(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,917675,e=>{"use strict";e.i(541536);var t=e.i(23474);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.z;void 0===e.ZodType.prototype.meta&&(e.ZodType.prototype.meta=function(e){return this._def.meta={...this._def.meta,...e},this},e.ZodType.prototype.getMeta=function(){return this._def.meta})}(),t.z.enum(["public","private","team","team-edit","unlisted"]);let n=["message","forked-block","forked-chat","open-in-v0","refinement","added-environment-variables","added-integration","deleted-file","moved-file","renamed-file","edited-file","replace-src","reverted-block","fix-with-v0","auto-fix-with-v0","sync-git"];t.z.enum(n);let r=t.z.enum(["v0-1.5-sm","v0-1.5-md","v0-1.5-lg","v0-gpt-5"]),s=t.z.object({modelId:r.describe("Deprecated Model ID field preserved for backward compatibility.").meta({deprecated:!0}).default("v0-1.5-md"),imageGenerations:t.z.boolean().describe("Enables image generations to generate up to 5 images per version.").default(!1),thinking:t.z.boolean().describe("Enables thinking to generate a response in multiple steps.").default(!1)}).describe("Overrides for the model behavior.");t.z.enum(["chat.created","chat.updated","chat.deleted","message.created","message.updated","message.deleted","message.finished"]),t.z.enum(["pending","success","error"]).default("pending"),t.z.enum(["stop","length","content-filter","tool-calls","error","other","unknown"]).describe("The reason why message generation finished, including standard completion reasons and error states."),e.s(["ModelConfigurationSchema",0,s,"messageTypeEnumValues",0,n],917675)},139962,e=>{"use strict";let t,n;var r=e.i(230840),s=e.i(868275);let i=Symbol.for("drizzle:entityKind");function o(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,i)){var n;throw Error('Class "'.concat(null!=(n=t.name)?n:"<unknown>","\" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug."))}let r=e.constructor;if(r)for(;r;){if(i in r&&r[i]===t[i])return!0;r=Object.getPrototypeOf(r)}return!1}Symbol.for("drizzle:hasOwnEntityKind");class a{$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}constructor(e,t,n){(0,s._)(this,"config",void 0),(0,s._)(this,"$default",this.$defaultFn),(0,s._)(this,"$onUpdate",this.$onUpdateFn),this.config={name:e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}}(0,s._)(a,i,"ColumnBuilder");class l{mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}constructor(e,t){(0,s._)(this,"name",void 0),(0,s._)(this,"primary",void 0),(0,s._)(this,"notNull",void 0),(0,s._)(this,"default",void 0),(0,s._)(this,"defaultFn",void 0),(0,s._)(this,"onUpdateFn",void 0),(0,s._)(this,"hasDefault",void 0),(0,s._)(this,"isUnique",void 0),(0,s._)(this,"uniqueName",void 0),(0,s._)(this,"uniqueType",void 0),(0,s._)(this,"dataType",void 0),(0,s._)(this,"columnType",void 0),(0,s._)(this,"enumValues",void 0),(0,s._)(this,"generated",void 0),(0,s._)(this,"generatedIdentity",void 0),(0,s._)(this,"config",void 0),this.table=e,this.config=t,this.name=t.name,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}}(0,s._)(l,i,"Column");let u=Symbol.for("drizzle:Name"),d=Symbol.for("drizzle:Schema"),c=Symbol.for("drizzle:Columns"),m=Symbol.for("drizzle:ExtraConfigColumns"),h=Symbol.for("drizzle:OriginalName"),p=Symbol.for("drizzle:BaseName"),g=Symbol.for("drizzle:IsAlias"),f=Symbol.for("drizzle:ExtraConfigBuilder"),y=Symbol.for("drizzle:IsDrizzleTable");class I{constructor(e,t,n){(0,s._)(this,u,void 0),(0,s._)(this,h,void 0),(0,s._)(this,d,void 0),(0,s._)(this,c,void 0),(0,s._)(this,m,void 0),(0,s._)(this,p,void 0),(0,s._)(this,g,!1),(0,s._)(this,y,!0),(0,s._)(this,f,void 0),this[u]=this[h]=e,this[d]=t,this[p]=n}}(0,s._)(I,i,"Table"),(0,s._)(I,"Symbol",{Name:u,Schema:d,OriginalName:h,Columns:c,ExtraConfigColumns:m,BaseName:p,IsAlias:g,ExtraConfigBuilder:f});let _=Symbol.for("drizzle:PgInlineForeignKeys"),b=I.Symbol.ExtraConfigBuilder;class v extends I{constructor(...e){super(...e),(0,s._)(this,_,[]),(0,s._)(this,b,void 0)}}(0,s._)(v,i,"PgTable"),(0,s._)(v,"Symbol",Object.assign({},I.Symbol,{InlineForeignKeys:_}));let x=(e,t,n)=>(function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,i=new v(e,r,s),o=Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e,r=n.build(i);return i[_].push(...n.buildForeignKeys(r,i)),[t,r]})),a=Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,n.buildExtraConfigColumn(i)]})),l=Object.assign(i,o);return l[I.Symbol.Columns]=o,l[I.Symbol.ExtraConfigColumns]=a,n&&(l[v.Symbol.ExtraConfigBuilder]=n),l})(e,t,n,void 0);class N{onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new S(e,this)}constructor(e,t){(0,s._)(this,"reference",void 0),(0,s._)(this,"_onUpdate","no action"),(0,s._)(this,"_onDelete","no action"),this.reference=()=>{let{name:t,columns:n,foreignColumns:r}=e();return{name:t,columns:n,foreignTable:r[0].table,foreignColumns:r}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}}(0,s._)(N,i,"PgForeignKeyBuilder");class S{getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),r=t.map(e=>e.name),s=n.map(e=>e.name),i=[this.table[v.Symbol.Name],...r,n[0].table[v.Symbol.Name],...s];return null!=e?e:"".concat(i.join("_"),"_fk")}constructor(e,t){(0,s._)(this,"reference",void 0),(0,s._)(this,"onUpdate",void 0),(0,s._)(this,"onDelete",void 0),this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}}function w(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e(...n)}function C(e,t){return"".concat(e[v.Symbol.Name],"_").concat(t.join("_"),"_unique")}(0,s._)(S,i,"PgForeignKey");class z{nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new T(e,this.columns,this.nullsNotDistinctConfig,this.name)}constructor(e,t){(0,s._)(this,"columns",void 0),(0,s._)(this,"nullsNotDistinctConfig",!1),this.name=t,this.columns=e}}(0,s._)(z,i,"PgUniqueConstraintBuilder"),(0,s._)(class{on(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new z(t,this.name)}constructor(e){(0,s._)(this,"name",void 0),this.name=e}},i,"PgUniqueOnConstraintBuilder");class T{getName(){return this.name}constructor(e,t,n,r){(0,s._)(this,"columns",void 0),(0,s._)(this,"name",void 0),(0,s._)(this,"nullsNotDistinct",!1),this.table=e,this.columns=t,this.name=null!=r?r:C(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=n}}function j(e,t,n){for(let r=t;r<e.length;r++){let s=e[r];if("\\"===s){r++;continue}if('"'===s)return[e.slice(t,r).replace(/\\/g,""),r+1];if(!n&&(","===s||"}"===s))return[e.slice(t,r).replace(/\\/g,""),r]}return[e.slice(t).replace(/\\/g,""),e.length]}(0,s._)(T,i,"PgUniqueConstraint");class A extends a{array(e){return new D(this.config.name,this,e)}references(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=null==t?void 0:t.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(n=>{let{ref:r,actions:s}=n;return w((n,r)=>{let s=new N(()=>({columns:[e],foreignColumns:[n()]}));return r.onUpdate&&s.onUpdate(r.onUpdate),r.onDelete&&s.onDelete(r.onDelete),s.build(t)},r,s)})}buildExtraConfigColumn(e){return new q(e,this.config)}constructor(...e){super(...e),(0,s._)(this,"foreignKeyConfigs",[])}}(0,s._)(A,i,"PgColumnBuilder");class k extends l{constructor(e,t){t.uniqueName||(t.uniqueName=C(e,[t.name])),super(e,t),this.table=e}}(0,s._)(k,i,"PgColumn");class q extends k{getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}constructor(...e){var t,n;super(...e),(0,s._)(this,"indexConfig",{order:null!=(t=this.config.order)?t:"asc",nulls:null!=(n=this.config.nulls)?n:"last",opClass:this.config.opClass}),(0,s._)(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}}(0,s._)(q,i,"ExtraConfigColumn");class P{constructor(e,t,n){(0,s._)(this,"name",void 0),(0,s._)(this,"type",void 0),(0,s._)(this,"indexConfig",void 0),this.name=e,this.type=t,this.indexConfig=n}}(0,s._)(P,i,"IndexedColumn");class D extends A{build(e){let t=this.config.baseBuilder.build(e);return new U(e,this.config,t)}constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}}(0,s._)(D,i,"PgArrayBuilder");class U extends k{getSQLType(){return"".concat(this.baseColumn.getSQLType(),"[").concat("number"==typeof this.size?this.size:"","]")}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],s=n,i=!1;for(;s<t.length;){let o=t[s];if(","===o){(i||s===n)&&r.push(""),i=!0,s++;continue}if(i=!1,"\\"===o){s+=2;continue}if('"'===o){let[e,n]=j(t,s+1,!0);r.push(e),s=n;continue}if("}"===o)return[r,s+1];if("{"===o){let[n,i]=e(t,s+1);r.push(n),s=i;continue}let[a,l]=j(t,s,!1);r.push(a),s=l}return[r,s]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.map(e=>null===e?null:o(this.baseColumn,U)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?n:function e(t){return"{".concat(t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?'"'.concat(t.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),'"'):"".concat(t)).join(","),"}")}(n)}constructor(e,t,n,r){super(e,t),(0,s._)(this,"size",void 0),this.baseColumn=n,this.range=r,this.size=t.size}}(0,s._)(U,i,"PgArray");class B extends A{build(e){return new V(e,this.config)}constructor(e){super(e,"boolean","PgBoolean")}}(0,s._)(B,i,"PgBooleanBuilder");class V extends k{getSQLType(){return"boolean"}}function F(e){return new B(e)}(0,s._)(V,i,"PgBoolean");let L=Symbol.for("drizzle:isPgEnum");class K extends A{build(e){return new Q(e,this.config)}constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}}(0,s._)(K,i,"PgEnumColumnBuilder");class Q extends k{getSQLType(){return this.enum.enumName}constructor(e,t){super(e,t),(0,s._)(this,"enum",this.config.enum),(0,s._)(this,"enumValues",this.config.enum.enumValues),this.enum=t.enum}}function O(e,t){var n=e,r=t,s=void 0;let i=Object.assign(e=>new K(e,i),{enumName:n,enumValues:r,schema:s,[L]:!0});return i}(0,s._)(Q,i,"PgEnumColumn");class E{constructor(e,t,n,r=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:r}}}(0,s._)(E,i,"Subquery"),(0,s._)(class extends E{},i,"WithSubquery");let M={startActiveSpan:(e,r)=>t?(n||(n=t.trace.getTracer("drizzle-orm","0.33.0")),w((t,n)=>n.startActiveSpan(e,e=>{try{return r(e)}catch(n){throw e.setStatus({code:t.SpanStatusCode.ERROR,message:n instanceof Error?n.message:"Unknown error"}),n}finally{e.end()}}),t,n)):r()},$=Symbol.for("drizzle:ViewBaseConfig");(0,s._)(class{},i,"FakePrimitiveParam");class J{getSQL(){return new R([this])}constructor(e){(0,s._)(this,"value",void 0),this.value=Array.isArray(e)?e:[e]}}(0,s._)(J,i,"StringChunk");class R{append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return M.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return null==t||t.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{escapeName:r,escapeParam:s,prepareTyping:i,inlineParams:a,paramStartIndex:u}=n;var d,c=e.map(e=>{var d;if(o(e,J))return{sql:e.value.join(""),params:[]};if(o(e,W))return{sql:r(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new J("(")];for(let[n,r]of e.entries())t.push(r),n<e.length-1&&t.push(new J(", "));return t.push(new J(")")),this.buildQueryFromSourceParams(t,n)}if(o(e,R))return this.buildQueryFromSourceParams(e.queryChunks,{...n,inlineParams:a||e.shouldInlineParams});if(o(e,I)){let t=e[I.Symbol.Schema],n=e[I.Symbol.Name];return{sql:void 0===t?r(n):r(t)+"."+r(n),params:[]}}if(o(e,l))return"indexes"===t.invokeSource?{sql:r(e.name),params:[]}:{sql:r(e.table[I.Symbol.Name])+"."+r(e.name),params:[]};if(o(e,ee)){let t=e[$].schema,n=e[$].name;return{sql:void 0===t?r(n):r(t)+"."+r(n),params:[]}}if(o(e,H)){if(o(e.value,Y))return{sql:s(u.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if(o(t,R))return this.buildQueryFromSourceParams([t],n);if(a)return{sql:this.mapInlineParam(t,n),params:[]};let r=["none"];return i&&(r=[i(e.encoder)]),{sql:s(u.value++,t),params:[t],typings:r}}return o(e,Y)?{sql:s(u.value++,e),params:[e],typings:["none"]}:o(e,R.Aliased)&&void 0!==e.fieldAlias?{sql:r(e.fieldAlias),params:[]}:o(e,E)?e._.isWith?{sql:r(e._.alias),params:[]}:this.buildQueryFromSourceParams([new J("("),e._.sql,new J(") "),new W(e._.alias)],n):e&&"function"==typeof e&&L in e&&!0===e[L]?e.schema?{sql:r(e.schema)+"."+r(e.enumName),params:[]}:{sql:r(e.enumName),params:[]}:null!=e&&"function"==typeof e.getSQL?(null==(d=e.shouldOmitSQLParens)?void 0:d.call(e))?this.buildQueryFromSourceParams([e.getSQL()],n):this.buildQueryFromSourceParams([new J("("),e.getSQL(),new J(")")],n):a?{sql:this.mapInlineParam(e,n),params:[]}:{sql:s(u.value++,e),params:[e],typings:["none"]}});let m={sql:"",params:[]};for(let e of c)m.sql+=e.sql,m.params.push(...e.params),(null==(d=e.typings)?void 0:d.length)&&(m.typings||(m.typings=[]),m.typings.push(...e.typings));return m}mapInlineParam(e,t){let{escapeString:n}=t;if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return n(e);if("object"==typeof e){let t=e.toString();return n("[object Object]"===t?JSON.stringify(e):t)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new R.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}constructor(e){(0,s._)(this,"decoder",Z),(0,s._)(this,"shouldInlineParams",!1),this.queryChunks=e}}(0,s._)(R,i,"SQL");class W{getSQL(){return new R([this])}constructor(e){(0,s._)(this,"brand",void 0),this.value=e}}(0,s._)(W,i,"Name");let Z={mapFromDriverValue:e=>e},G={mapToDriverValue:e=>e};({...Z,...G});class H{getSQL(){return new R([this])}constructor(e,t=G){(0,s._)(this,"brand",void 0),this.value=e,this.encoder=t}}function X(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let s=[];for(let[t,r]of((n.length>0||e.length>0&&""!==e[0])&&s.push(new J(e[0])),n.entries()))s.push(r,new J(e[t+1]));return new R(s)}(0,s._)(H,i,"Param"),(e=>{e.empty=function(){return new R([])},e.fromList=function(e){return new R(e)},e.raw=function(e){return new R([new J(e)])},e.join=function(e,t){let n=[];for(let[r,s]of e.entries())r>0&&void 0!==t&&n.push(t),n.push(s);return new R(n)},e.identifier=function(e){return new W(e)},e.placeholder=function(e){return new Y(e)},e.param=function(e,t){return new H(e,t)}})(X||(X={})),(e=>{class t{getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}constructor(e,t){(0,s._)(this,"isSelectionField",!1),this.sql=e,this.fieldAlias=t}}(0,s._)(t,i,"SQL.Aliased"),e.Aliased=t})(R||(R={}));class Y{getSQL(){return new R([this])}constructor(e){this.name=e}}(0,s._)(Y,i,"Placeholder");class ee{getSQL(){return new R([this])}constructor({name:e,schema:t,selectedFields:n,query:r}){(0,s._)(this,$,void 0),this[$]={name:e,originalName:e,schema:t,selectedFields:n,query:r,isExisting:!r,isAlias:!1}}}(0,s._)(ee,i,"View"),l.prototype.getSQL=function(){return new R([this])},I.prototype.getSQL=function(){return new R([this])},E.prototype.getSQL=function(){return new R([this])};class et{on(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new en(t.map(e=>{if(o(e,R))return e;let t=new P(e.name,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!1,this.name)}onOnly(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new en(t.map(e=>{if(o(e,R))return e;let t=new P(e.name,e.columnType,e.indexConfig);return e.indexConfig=e.defaultConfig,t}),this.unique,!0,this.name)}using(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new en(n.map(e=>{if(o(e,R))return e;let t=new P(e.name,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!0,this.name,e)}constructor(e,t){this.unique=e,this.name=t}}(0,s._)(et,i,"PgIndexBuilderOn");class en{concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new er(this.config,e)}constructor(e,t,n,r,i="btree"){(0,s._)(this,"config",void 0),this.config={name:r,columns:e,unique:t,only:n,method:i}}}(0,s._)(en,i,"PgIndexBuilder");class er{constructor(e,t){(0,s._)(this,"config",void 0),this.config={...e,table:t}}}function es(e){return new et(!1,e)}function ei(e){return new et(!0,e)}(0,s._)(er,i,"PgIndex");class eo extends A{generatedAlwaysAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}(0,s._)(eo,i,"PgIntColumnBaseBuilder");class ea extends eo{build(e){return new el(e,this.config)}constructor(e){super(e,"number","PgInteger")}}(0,s._)(ea,i,"PgIntegerBuilder");class el extends k{getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}(0,s._)(el,i,"PgInteger");class eu extends A{build(e){return new ed(e,this.config)}constructor(e){super(e,"json","PgJsonb")}}(0,s._)(eu,i,"PgJsonbBuilder");class ed extends k{getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e}constructor(e,t){super(e,t)}}function ec(e){return new eu(e)}(0,s._)(ed,i,"PgJsonb");class em extends A{build(e){return new eh(e,this.config)}constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}}(0,s._)(em,i,"PgSerialBuilder");class eh extends k{getSQLType(){return"serial"}}(0,s._)(eh,i,"PgSerial");class ep extends A{build(e){return new eg(e,this.config)}constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}}(0,s._)(ep,i,"PgTextBuilder");class eg extends k{getSQLType(){return"text"}constructor(...e){super(...e),(0,s._)(this,"enumValues",this.config.enumValues)}}function ef(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ep(e,t)}function ey(){let e=(0,r._)(["now()"]);return ey=function(){return e},e}(0,s._)(eg,i,"PgText");class eI extends A{defaultNow(){return this.default(X(ey()))}}(0,s._)(eI,i,"PgDateColumnBaseBuilder");class e_ extends eI{build(e){return new eb(e,this.config)}constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}}(0,s._)(e_,i,"PgTimestampBuilder");class eb extends k{getSQLType(){let e=void 0===this.precision?"":" (".concat(this.precision,")");return"timestamp".concat(e).concat(this.withTimezone?" with time zone":"")}constructor(e,t){super(e,t),(0,s._)(this,"withTimezone",void 0),(0,s._)(this,"precision",void 0),(0,s._)(this,"mapFromDriverValue",e=>new Date(this.withTimezone?e:e+"+0000")),(0,s._)(this,"mapToDriverValue",e=>e.toISOString()),this.withTimezone=t.withTimezone,this.precision=t.precision}}(0,s._)(eb,i,"PgTimestamp");class ev extends eI{build(e){return new ex(e,this.config)}constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}}(0,s._)(ev,i,"PgTimestampStringBuilder");class ex extends k{getSQLType(){let e=void 0===this.precision?"":"(".concat(this.precision,")");return"timestamp".concat(e).concat(this.withTimezone?" with time zone":"")}constructor(e,t){super(e,t),(0,s._)(this,"withTimezone",void 0),(0,s._)(this,"precision",void 0),this.withTimezone=t.withTimezone,this.precision=t.precision}}function eN(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===r.mode?new ev(e,null!=(t=r.withTimezone)&&t,r.precision):new e_(e,null!=(n=r.withTimezone)&&n,r.precision)}(0,s._)(ex,i,"PgTimestampString");class eS extends A{build(e){return new ew(e,this.config)}constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}}(0,s._)(eS,i,"PgVarcharBuilder");class ew extends k{getSQLType(){return void 0===this.length?"varchar":"varchar(".concat(this.length,")")}constructor(...e){super(...e),(0,s._)(this,"length",this.config.length),(0,s._)(this,"enumValues",this.config.enumValues)}}(0,s._)(ew,i,"PgVarchar");class eC extends A{build(e){return new ez(e,this.config)}constructor(e,t){super(e,"number","PgReal"),this.config.length=t}}(0,s._)(eC,i,"PgRealBuilder");class ez extends k{getSQLType(){return"real"}constructor(e,t){super(e,t),(0,s._)(this,"mapFromDriverValue",e=>"string"==typeof e?Number.parseFloat(e):e)}}function eT(e){return new eC(e)}function ej(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0].columns?new eA(t[0].columns,t[0].name):new eA(t)}(0,s._)(ez,i,"PgReal");class eA{build(e){return new ek(e,this.columns,this.name)}constructor(e,t){(0,s._)(this,"columns",void 0),(0,s._)(this,"name",void 0),this.columns=e,this.name=t}}(0,s._)(eA,i,"PgPrimaryKeyBuilder");class ek{getName(){var e;return null!=(e=this.name)?e:"".concat(this.table[v.Symbol.Name],"_").concat(this.columns.map(e=>e.name).join("_"),"_pk")}constructor(e,t,n){(0,s._)(this,"columns",void 0),(0,s._)(this,"name",void 0),this.table=e,this.columns=t,this.name=n}}(0,s._)(ek,i,"PgPrimaryKey");class eq extends A{build(e){return new eP(e,this.config)}constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}}(0,s._)(eq,i,"PgCustomColumnBuilder");class eP extends k{getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}constructor(e,t){super(e,t),(0,s._)(this,"sqlName",void 0),(0,s._)(this,"mapTo",void 0),(0,s._)(this,"mapFrom",void 0),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}}function eD(e){return(t,n)=>new eq(t,n,e)}(0,s._)(eP,i,"PgCustomColumn");let eU=Symbol.for("drizzle:MySqlInlineForeignKeys"),eB=I.Symbol.Columns,eV=I.Symbol.ExtraConfigBuilder;class eF extends I{constructor(...e){super(...e),(0,s._)(this,eB,void 0),(0,s._)(this,eU,[]),(0,s._)(this,eV,void 0)}}(0,s._)(eF,i,"MySqlTable"),(0,s._)(eF,"Symbol",Object.assign({},I.Symbol,{InlineForeignKeys:eU}));class eL{onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new eK(e,this)}constructor(e,t){(0,s._)(this,"reference",void 0),(0,s._)(this,"_onUpdate",void 0),(0,s._)(this,"_onDelete",void 0),this.reference=()=>{let{name:t,columns:n,foreignColumns:r}=e();return{name:t,columns:n,foreignTable:r[0].table,foreignColumns:r}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}}(0,s._)(eL,i,"MySqlForeignKeyBuilder");class eK{getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),r=t.map(e=>e.name),s=n.map(e=>e.name),i=[this.table[eF.Symbol.Name],...r,n[0].table[eF.Symbol.Name],...s];return null!=e?e:"".concat(i.join("_"),"_fk")}constructor(e,t){(0,s._)(this,"reference",void 0),(0,s._)(this,"onUpdate",void 0),(0,s._)(this,"onDelete",void 0),this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}}function eQ(e,t){return"".concat(e[eF.Symbol.Name],"_").concat(t.join("_"),"_unique")}(0,s._)(eK,i,"MySqlForeignKey");class eO{build(e){return new eE(e,this.columns,this.name)}constructor(e,t){(0,s._)(this,"columns",void 0),this.name=t,this.columns=e}}(0,s._)(eO,i,"MySqlUniqueConstraintBuilder"),(0,s._)(class{on(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eO(t,this.name)}constructor(e){(0,s._)(this,"name",void 0),this.name=e}},i,"MySqlUniqueOnConstraintBuilder");class eE{getName(){return this.name}constructor(e,t,n){(0,s._)(this,"columns",void 0),(0,s._)(this,"name",void 0),(0,s._)(this,"nullsNotDistinct",!1),this.table=e,this.columns=t,this.name=null!=n?n:eQ(this.table,this.columns.map(e=>e.name))}}(0,s._)(eE,i,"MySqlUniqueConstraint");class eM extends a{references(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,t){var n;return this.config.generated={as:e,type:"always",mode:null!=(n=null==t?void 0:t.mode)?n:"virtual"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(n=>{let{ref:r,actions:s}=n,i=new eL(()=>({columns:[e],foreignColumns:[r()]}));return s.onUpdate&&i.onUpdate(s.onUpdate),s.onDelete&&i.onDelete(s.onDelete),i.build(t)})}constructor(...e){super(...e),(0,s._)(this,"foreignKeyConfigs",[])}}(0,s._)(eM,i,"MySqlColumnBuilder");class e$ extends l{constructor(e,t){t.uniqueName||(t.uniqueName=eQ(e,[t.name])),super(e,t),this.table=e}}(0,s._)(e$,i,"MySqlColumn"),(0,s._)(class extends eM{autoincrement(){return this.config.autoIncrement=!0,this.config.hasDefault=!0,this}constructor(e,t,n){super(e,t,n),this.config.autoIncrement=!1}},i,"MySqlColumnBuilderWithAutoIncrement"),(0,s._)(class extends e${constructor(...e){super(...e),(0,s._)(this,"autoIncrement",this.config.autoIncrement)}},i,"MySqlColumnWithAutoIncrement"),(0,s._)(class extends eM{build(e){return new eJ(e,this.config)}constructor(e,t){super(e,"string","MySqlVarChar"),this.config.length=t.length,this.config.enum=t.enum}},i,"MySqlVarCharBuilder");class eJ extends e${getSQLType(){return void 0===this.length?"varchar":"varchar(".concat(this.length,")")}constructor(...e){super(...e),(0,s._)(this,"length",this.config.length),(0,s._)(this,"enumValues",this.config.enum)}}(0,s._)(eJ,i,"MySqlVarChar"),(0,s._)(class extends eM{build(e){return new eR(e,this.config)}constructor(e,t){super(e,"string","MySqlVarBinary"),this.config.length=null==t?void 0:t.length}},i,"MySqlVarBinaryBuilder");class eR extends e${getSQLType(){return void 0===this.length?"varbinary":"varbinary(".concat(this.length,")")}constructor(...e){super(...e),(0,s._)(this,"length",this.config.length)}}(0,s._)(eR,i,"MySqlVarBinary"),(0,s._)(class extends eM{build(e){return new eW(e,this.config)}constructor(e,t){super(e,"string","MySqlChar"),this.config.length=t.length,this.config.enum=t.enum}},i,"MySqlCharBuilder");class eW extends e${getSQLType(){return void 0===this.length?"char":"char(".concat(this.length,")")}constructor(...e){super(...e),(0,s._)(this,"length",this.config.length),(0,s._)(this,"enumValues",this.config.enum)}}function eZ(){let e=(0,r._)(["gen_random_uuid()"]);return eZ=function(){return e},e}(0,s._)(eW,i,"MySqlChar"),(0,s._)(class extends A{defaultRandom(){return this.default(X(eZ()))}build(e){return new eG(e,this.config)}constructor(e){super(e,"string","PgUUID")}},i,"PgUUIDBuilder");class eG extends k{getSQLType(){return"uuid"}}(0,s._)(eG,i,"PgUUID"),(0,s._)(class extends A{build(e){return new eH(e,this.config)}constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}},i,"PgCharBuilder");class eH extends k{getSQLType(){return void 0===this.length?"char":"char(".concat(this.length,")")}constructor(...e){super(...e),(0,s._)(this,"length",this.config.length),(0,s._)(this,"enumValues",this.config.enumValues)}}(0,s._)(eH,i,"PgChar");let eX=Symbol.for("drizzle:SQLiteInlineForeignKeys"),eY=I.Symbol.Columns,e0=I.Symbol.ExtraConfigBuilder;class e1 extends I{constructor(...e){super(...e),(0,s._)(this,eY,void 0),(0,s._)(this,eX,[]),(0,s._)(this,e0,void 0)}}(0,s._)(e1,i,"SQLiteTable"),(0,s._)(e1,"Symbol",Object.assign({},I.Symbol,{InlineForeignKeys:eX}));class e5{onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new e2(e,this)}constructor(e,t){(0,s._)(this,"reference",void 0),(0,s._)(this,"_onUpdate",void 0),(0,s._)(this,"_onDelete",void 0),this.reference=()=>{let{name:t,columns:n,foreignColumns:r}=e();return{name:t,columns:n,foreignTable:r[0].table,foreignColumns:r}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}}(0,s._)(e5,i,"SQLiteForeignKeyBuilder");class e2{getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),r=t.map(e=>e.name),s=n.map(e=>e.name),i=[this.table[e1.Symbol.Name],...r,n[0].table[e1.Symbol.Name],...s];return null!=e?e:"".concat(i.join("_"),"_fk")}constructor(e,t){(0,s._)(this,"reference",void 0),(0,s._)(this,"onUpdate",void 0),(0,s._)(this,"onDelete",void 0),this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}}function e4(e,t){return"".concat(e[e1.Symbol.Name],"_").concat(t.join("_"),"_unique")}(0,s._)(e2,i,"SQLiteForeignKey");class e6{build(e){return new e3(e,this.columns,this.name)}constructor(e,t){(0,s._)(this,"columns",void 0),this.name=t,this.columns=e}}(0,s._)(e6,i,"SQLiteUniqueConstraintBuilder"),(0,s._)(class{on(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new e6(t,this.name)}constructor(e){(0,s._)(this,"name",void 0),this.name=e}},i,"SQLiteUniqueOnConstraintBuilder");class e3{getName(){return this.name}constructor(e,t,n){(0,s._)(this,"columns",void 0),(0,s._)(this,"name",void 0),this.table=e,this.columns=t,this.name=null!=n?n:e4(this.table,this.columns.map(e=>e.name))}}(0,s._)(e3,i,"SQLiteUniqueConstraint");class e7 extends a{references(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,t){var n;return this.config.generated={as:e,type:"always",mode:null!=(n=null==t?void 0:t.mode)?n:"virtual"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(n=>{let{ref:r,actions:s}=n,i=new e5(()=>({columns:[e],foreignColumns:[r()]}));return s.onUpdate&&i.onUpdate(s.onUpdate),s.onDelete&&i.onDelete(s.onDelete),i.build(t)})}constructor(...e){super(...e),(0,s._)(this,"foreignKeyConfigs",[])}}(0,s._)(e7,i,"SQLiteColumnBuilder");class e9 extends l{constructor(e,t){t.uniqueName||(t.uniqueName=e4(e,[t.name])),super(e,t),this.table=e}}(0,s._)(e9,i,"SQLiteColumn"),(0,s._)(class extends e7{build(e){return new e8(e,this.config)}constructor(e,t){super(e,"string","SQLiteText"),this.config.enumValues=t.enum,this.config.length=t.length}},i,"SQLiteTextBuilder");class e8 extends e9{getSQLType(){return"text".concat(this.config.length?"(".concat(this.config.length,")"):"")}constructor(e,t){super(e,t),(0,s._)(this,"enumValues",this.config.enumValues),(0,s._)(this,"length",this.config.length)}}(0,s._)(e8,i,"SQLiteText"),(0,s._)(class extends e7{build(e){return new te(e,this.config)}constructor(e){super(e,"json","SQLiteTextJson")}},i,"SQLiteTextJsonBuilder");class te extends e9{getSQLType(){return"text"}mapFromDriverValue(e){return JSON.parse(e)}mapToDriverValue(e){return JSON.stringify(e)}}(0,s._)(te,i,"SQLiteTextJson"),e.i(541536);var tt=e.i(23474);let tn=tt.z.union([tt.z.string(),tt.z.number(),tt.z.boolean(),tt.z.null()]),tr=tt.z.lazy(()=>tt.z.union([tn,tt.z.array(tr),tt.z.record(tr)]));function ts(e,t){let n=Object.entries(e[I.Symbol.Columns]),r=Object.fromEntries(n.map(e=>{let[t,n]=e;return[t,function e(t){let n;if("enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0&&(n=t.enumValues.length?tt.z.enum(t.enumValues):tt.z.string()),!n){if(o(t,eG))n=tt.z.string().uuid();else if("custom"===t.dataType)n=tt.z.any();else if("json"===t.dataType)n=tr;else if("array"===t.dataType)n=tt.z.array(e(t.baseColumn));else if("number"===t.dataType)n=tt.z.number();else if("bigint"===t.dataType)n=tt.z.bigint();else if("boolean"===t.dataType)n=tt.z.boolean();else if("date"===t.dataType)n=tt.z.date();else if("string"===t.dataType){let e=tt.z.string();(o(t,eH)||o(t,ew)||o(t,eJ)||o(t,eR)||o(t,eW)||o(t,e8))&&"number"==typeof t.length&&(e=e.max(t.length)),n=e}}return n||(n=tt.z.any()),n}(n)]}));for(let[e,s]of(t&&(r=Object.assign(r,Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,"function"==typeof n?n(r):n]})))),n))s.notNull||(r[e]=r[e].nullable());return tt.z.object(r)}class ti{constructor(e,t,n){(0,s._)(this,"referencedTableName",void 0),(0,s._)(this,"fieldName",void 0),this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[I.Symbol.Name]}}(0,s._)(ti,i,"Relation");class to{constructor(e,t){this.table=e,this.config=t}}(0,s._)(to,i,"Relations");class ta extends ti{withFieldName(e){let t=new ta(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}constructor(e,t,n,r){super(e,t,null==n?void 0:n.relationName),this.config=n,this.isNullable=r}}(0,s._)(ta,i,"One");class tl extends ti{withFieldName(e){let t=new tl(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}constructor(e,t,n){super(e,t,null==n?void 0:n.relationName),this.config=n}}function tu(e,t){return new to(e,e=>Object.fromEntries(Object.entries(t(e)).map(e=>{let[t,n]=e;return[t,n.withFieldName(t)]})))}(0,s._)(tl,i,"Many"),e.i(168204);var td=e.i(225695),tc=e.i(917675);function tm(){let e=(0,r._)(["lower(",")"]);return tm=function(){return e},e}let th={createdAt:eN("createdAt").defaultNow().notNull(),updatedAt:eN("updatedAt").defaultNow(),deletedAt:eN("deletedAt")},tp=tt.z.object({diff:tt.z.string().optional(),originalCode:tt.z.string(),findAndReplace:tt.z.string().optional()});tt.z.array(tt.z.object({searchValue:tt.z.string(),replaceValue:tt.z.string()})),tt.z.object({source:tt.z.string().optional(),sourceVersionKey:tt.z.custom(e=>void 0===e||"string"==typeof e&&e.startsWith("v_")).optional(),diffInfo:tt.z.object({type:tt.z.undefined(),...tp.shape}).or(tt.z.object({type:tt.z.literal("multi-file"),fileToDiffMap:tt.z.record(tt.z.string(),tp)})).optional(),remoteInfo:tt.z.object({originalSources:tt.z.record(tt.z.string(),tt.z.string()).optional(),accepted:tt.z.boolean().optional()}).optional(),resultId:tt.z.string().optional(),title:tt.z.string().optional(),lang:tt.z.string().optional(),lastError:tt.z.string().optional(),lastDeployedAt:tt.z.string().optional(),lastEditedAt:tt.z.string().optional(),externalMeta:tt.z.object({git:tt.z.object({ownerName:tt.z.string(),repoName:tt.z.string(),sha:tt.z.string(),ref:tt.z.string(),commitMessage:tt.z.string()}).optional(),deployment:tt.z.object({id:tt.z.string()}).optional()}).optional(),meta:tt.z.object({file:tt.z.string().optional(),url:tt.z.string().optional(),type:tt.z.string().optional(),project:tt.z.string().optional(),taskNameComplete:tt.z.string().optional(),taskNameActive:tt.z.string().optional(),title:tt.z.string().optional(),id:tt.z.string().optional(),sqlExecutionState:tt.z.enum(["applied","error","cancelled"]).optional()}).optional()}),tt.z.object({title:tt.z.string(),isMultiFile:tt.z.boolean().optional(),isAgentEnabled:tt.z.boolean().optional(),remote:tt.z.object({v:tt.z.enum(["1"]),tunnel:tt.z.string()}).optional(),gitDisableAutoCommit:tt.z.boolean().optional(),gitDisableAutoPull:tt.z.boolean().optional(),gitDisconnected:tt.z.boolean().optional(),from:tt.z.string().optional(),isFigmaChat:tt.z.boolean().optional(),tailwindV4Default:tt.z.boolean().optional(),context:tt.z.object({ai:tt.z.boolean().optional()}).optional(),completedSteps:tt.z.array(tt.z.string()).optional()});let tg=x("chats",{...th,chatId:ef("chatId").primaryKey().notNull(),authorId:ef("authorId").notNull(),ownerId:ef("ownerId").notNull(),shareable:F("shareable").notNull().default(!1),projectId:ef("projectId"),designSystemId:ef("designSystemId"),metadata:ec("metadata").$type(),summary:ef("summary"),summaryLastMessageId:ef("summaryLastMessageId"),currentLeafMessageId:ef("currentLeafMessageId"),privacy:ef("privacy").$type().default("private"),vercelProjectId:ef("vercelProjectId")},e=>({authorIdIndex:es("chatsAuthorIdIndex").on(e.authorId),projectIdIndex:es("chatsProjectIdIndex").on(e.projectId),ownerIdUpdatedAtIndex:es("chatsOwnerIdUpdatedAtIndex").on(e.ownerId,e.deletedAt.desc().nullsFirst(),e.updatedAt.desc()).concurrently()})),tf=x("projects",{...th,projectId:ef("projectId").primaryKey().notNull(),name:ef("name").notNull(),description:ef("description"),ownerId:ef("ownerId"),creatorId:ef("creatorId").notNull(),settings:ec("settings").$type(),privacy:ef("privacy").$type().default("private"),vercelProjectId:ef("vercelProjectId")},e=>({ownerIdIndex:es("projectsOwnerIdIndex").on(e.ownerId),creatorIdIndex:es("projectsCreatorIdIndex").on(e.creatorId).concurrently()})),ty=x("designSystems",{...th,designSystemId:ef("designSystemId").primaryKey().notNull(),name:ef("name").notNull(),description:ef("description"),ownerId:ef("ownerId").notNull(),creatorId:ef("creatorId").notNull(),registryUrl:ef("registryUrl").notNull()},e=>({ownerIdIndex:es("designSystemsOwnerIdIndex").on(e.ownerId)}));tu(ty,e=>{let{many:t}=e;return{chats:t(tg)}}),tu(tf,e=>{let{one:t,many:n}=e;return{chats:n(tD),sources:n(tV),hasUserFavoritedProject:t(tK),permissions:n(tY)}});let tI=x("sources",{...th,sourceId:ef("sourceId").primaryKey().notNull(),type:ef("type").$type().notNull(),title:ef("title"),description:ef("description"),url:ef("url"),content:ef("content"),metadata:ec("metadata").$type(),errorMessage:ef("errorMessage"),status:ef("status").$type().default("pending"),startedAt:eN("startedAt"),finishedAt:eN("finishedAt"),progress:eT("progress").default(0),textContentUrl:ef("textContentUrl")});ts(tI),tu(tI,e=>{let{many:t}=e;return{projects:t(tV),chats:t(tB),messages:t(tU)}}),ts(tg),tu(tg,e=>{let{one:t,many:n}=e;return{messages:n(tN),summaryLastMessage:t(tN,{fields:[tg.summaryLastMessageId],references:[tN.messageId]}),blocks:n(tj),sources:n(tB),project:t(tD),designSystem:t(ty,{fields:[tg.designSystemId],references:[ty.designSystemId]}),userFavoritedChats:t(tL),permissions:n(tY),template:t(tM,{fields:[tg.chatId],references:[tM.chatId]})}});let t_=O("messageType",tc.messageTypeEnumValues),tb=tt.z.enum(["screenshot","figma","zip"]).optional(),tv="<|v0MessageContent|>",tx=eD({dataType:()=>"text",fromDriver(e){let t={version:1,parts:[{type:"mdx",content:e}]};if(!e.startsWith(tv))return t;try{let t=e.slice(tv.length);return td.MessageContentServer.parse(JSON.parse(t))}catch(e){return t}},toDriver:e=>e.parts.every(e=>{let{type:t}=e;return"mdx"===t})?(0,td.stringifyMessageContent)(e,{filterTypes:["mdx"]}):"".concat(tv).concat(JSON.stringify(e))}),tN=x("messages",{...th,messageId:ef("messageId").primaryKey().notNull(),chatId:ef("chatId").notNull(),content:tx("content").notNull(),ragSources:ec("sources").$type(),role:(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new eS(e,t)})("role",{length:255}).notNull().$type(),attachments:ec("attachments").$type(),finishReason:ef("finishReason").$type(),messageFeedback:ec("messageFeedback").$type(),parentId:ef("parentId"),type:t_("type").notNull(),modelId:ef("modelId").$type(),usage:ec("usage").$type(),authorId:ef("authorId"),metadata:ec("metadata").$type()},e=>({chatIdIndex:es("messagesChatIdIndex").on(e.chatId),authorIdIndex:es("messagesAuthorIdIndex").on(e.authorId),createdAtIndex:es("messagesCreatedAtIndex").on(e.createdAt)}));ts(tN).shape.type,tu(tN,e=>{let{one:t,many:n}=e;return{chat:t(tg,{fields:[tN.chatId],references:[tg.chatId]}),blocks:n(tj),feedback:n(tq),parent:t(tN,{fields:[tN.parentId],references:[tN.messageId]}),summary:t(tC,{fields:[tN.messageId],references:[tC.messageId]}),sources:n(tU)}});let tS="v0 Summary URL: ",tw=eD({dataType:()=>"text",fromDriver:e=>e.startsWith(tS)?{type:"url",url:e.slice(tS.length)}:{type:"text",text:e},toDriver:e=>"url"===e.type?"".concat(tS).concat(e.url):e.text}),tC=x("chatMessageSummaries",{...th,chatId:ef("chatId").notNull(),messageId:ef("messageId").notNull(),content:tw("content").notNull(),usage:ec("usage").$type()},e=>({messageIdx:es("chatMessageSummariesMessageIdIndex").on(e.messageId),chatMessageUniqueIdx:ei("chatMessageSummariesUniqueIndex").on(e.chatId,e.messageId)}));tu(tC,e=>{let{one:t}=e;return{chat:t(tg,{fields:[tC.chatId],references:[tg.chatId]}),message:t(tN,{fields:[tC.messageId],references:[tN.messageId]})}});let tz=eD({dataType:()=>"text",fromDriver:e=>"react-project"===e?"code-project":e}),tT=eD({dataType:()=>"jsonb",fromDriver(e){var t;return(null==(t=e.meta)?void 0:t.type)==="react-project"&&(e.meta.type="code-project"),e}}),tj=x("blocks",{...th,blockId:ef("blockId").primaryKey().notNull(),blockType:tz("blockType").notNull(),chatId:ef("chatId").notNull(),messageId:ef("messageId").notNull(),data:tT("data"),removeBranding:F("removeBranding").notNull().default(!1),shared:F("shared").notNull().default(!1),forkedFromBlockId:ef("forkedFromBlockId"),isBlocked:F("isBlocked").default(!1),allowCrawling:F("allowCrawling"),hasSourceBeenEdited:F("hasSourceBeenEdited").default(!1),latestDeploymentInfo:ec("latestDeploymentInfo").$type(),templateVersionId:ef("templateVersionId"),templateCanonId:ef("templateCanonId"),nextLiteVersion:new ea("nextLiteVersion")},e=>{var t;return{chatIdIndex:es("blocksChatIdIndex").on(e.chatId),messageIdIndex:es("blocksMessageIdIndex").on(e.messageId),createdAtIndex:es("blocksCreatedAtIndex").on(e.createdAt),lowerBlockIdIndex:es("blockId_lower_idx").on((t=e.blockId,X(tm(),t)))}});ts(tj),tu(tj,e=>{let{one:t}=e;return{chat:t(tg,{fields:[tj.chatId],references:[tg.chatId]}),message:t(tN,{fields:[tj.messageId],references:[tN.messageId]}),forkedFromBlock:t(tj,{fields:[tj.forkedFromBlockId],references:[tj.blockId]}),subdomains:t(tF),templateVersion:t(tE,{fields:[tj.templateVersionId],references:[tE.templateVersionId]}),template:t(tM,{fields:[tj.templateCanonId],references:[tM.templateCanonId]})}});let tA=O("status",["triage","corrected","external_fix","ignored","pending","assigned","resolved"]),tk=O("type",["upvote","downvote"]),tq=x("feedback",{type:tk("type").default("downvote").notNull(),feedbackId:new em("feedbackId").primaryKey(),messageId:ef("messageId").notNull(),leafMessageId:ef("leafMessageId"),submitterId:ef("submitterId"),reasons:ef("reasons").array().notNull(),freeform:ef("freeform").notNull(),quote:ef("quote"),status:tA("status").default("triage").notNull(),comment:ef("comment"),createdAt:eN("createdAt").defaultNow().notNull(),updatedAt:eN("updatedAt").defaultNow(),deletedAt:eN("deletedAt"),correctionId:ef("correctionId"),categories:ef("categories").array().notNull().default([])});tu(tq,e=>{let{one:t}=e;return{message:t(tN,{fields:[tq.messageId],references:[tN.messageId]}),correction:t(tP,{fields:[tq.correctionId],references:[tP.correctionId]})}});let tP=x("corrections",{correctionId:ef("correctionId").primaryKey().notNull(),feedbackId:new ea("feedbackId"),correctorId:ef("correctorId"),messageId:ef("messageId"),prompt:ef("prompt").notNull(),response:ef("response").notNull(),promotedBlocks:ef("promotedBlocks").array().notNull(),suppressedBlocks:ef("suppressedBlocks").array().notNull(),promotedSources:ef("promotedSources").array().notNull(),suppressedSources:ef("suppressedSources").array().notNull(),status:ef("status").$type().default("unset").notNull(),approvedById:ef("approvedById"),approvedAt:eN("approvedAt"),rejectionReason:ef("rejectionReason"),createdAt:eN("createdAt").defaultNow().notNull(),updatedAt:eN("updatedAt").defaultNow(),deletedAt:eN("deletedAt")});tu(tP,e=>{let{many:t,one:n}=e;return{feedback:t(tq),message:n(tN,{fields:[tP.messageId],references:[tN.messageId]})}});let tD=x("projectsAndChats",{project:ef("projectId"),chat:ef("chatId")},e=>({projectIdx:es("project_idx").on(e.project),chatIdx:ei("chat_idx").on(e.chat)}));tu(tD,e=>{let{one:t}=e;return{project:t(tf,{fields:[tD.project],references:[tf.projectId]}),chat:t(tg,{fields:[tD.chat],references:[tg.chatId]})}});let tU=x("messagesAndSources",{message:ef("messageId"),source:ef("sourceId")},e=>({messageIdx:es("messagesAndSources_message_idx").on(e.message),sourceIdx:ei("messagesAndSources_source_idx").on(e.source)})),tB=x("chatsAndSources",{chat:ef("chatId"),source:ef("sourceId")},e=>({chatIdx:es("chatsAndSources_chat_idx").on(e.chat),sourceIdx:ei("chatsAndSources_source_idx").on(e.source)})),tV=x("projectsAndSources",{project:ef("projectId"),source:ef("sourceId")},e=>({projectIdx:es("projectsAndSources_project_idx").on(e.project),sourceIdx:ei("projectsAndSources_source_idx").on(e.source)}));tu(tU,e=>{let{one:t}=e;return{message:t(tN,{fields:[tU.message],references:[tN.messageId]}),source:t(tI,{fields:[tU.source],references:[tI.sourceId]})}}),tu(tB,e=>{let{one:t}=e;return{chat:t(tg,{fields:[tB.chat],references:[tg.chatId]}),source:t(tI,{fields:[tB.source],references:[tI.sourceId]})}}),tu(tV,e=>{let{one:t}=e;return{project:t(tf,{fields:[tV.project],references:[tf.projectId]}),source:t(tI,{fields:[tV.source],references:[tI.sourceId]})}});let tF=x("subdomains",{blockId:ef("blockId").primaryKey().notNull(),subdomain:ef("subdomain").notNull().unique()});tu(tF,e=>{let{one:t}=e;return{block:t(tj,{fields:[tF.blockId],references:[tj.blockId]})}});let tL=x("userFavoritedChats",{userId:ef("userId").notNull(),chatId:ef("chatId").notNull(),favoritedAt:eN("favoritedAt").defaultNow().notNull()},e=>({pk:ej({columns:[e.userId,e.chatId]}),chatIdIdx:es("userFavoritedChats_chatId_idx").on(e.chatId)}));tu(tL,e=>{let{one:t}=e;return{chat:t(tg,{fields:[tL.chatId],references:[tg.chatId]})}});let tK=x("userFavoritedProjects",{userId:ef("userId").notNull(),projectId:ef("projectId").notNull(),favoritedAt:eN("favoritedAt").defaultNow().notNull()},e=>({pk:ej({columns:[e.userId,e.projectId]}),chatIdIdx:es("userFavoritedProjects_projectId_idx").on(e.projectId)}));tu(tK,e=>{let{one:t}=e;return{projects:t(tf,{fields:[tK.projectId],references:[tf.projectId]})}}),x("integrations",{...th,ownerId:ef("ownerId").notNull(),creatorId:ef("creatorId").notNull(),settings:ec("settings").$type(),accessToken:ef("accessToken").notNull(),refreshToken:ef("refreshToken"),tokenExpiresAt:eN("tokenExpiresAt"),integrationUserId:ef("integrationUserId").notNull(),provider:ef("provider").$type().notNull()},e=>({pk:ej({columns:[e.provider,e.ownerId,e.creatorId]}),figmaIntegrationUserIdIdx:es("integrations_integrationUserId_idx").on(e.integrationUserId)})),x("apiKeys",{id:ef("id").primaryKey(),name:ef("name").notNull(),hashedKey:ef("hashedKey").notNull(),partialKey:ef("partialKey").notNull(),created:eN("createdAt").defaultNow().notNull(),lastUsed:eN("lastUsedAt"),ownerId:ef("ownerId").notNull(),creatorId:ef("creatorId").notNull()},e=>({hashedKeyIndex:es("apiKeys_hashedKey_idx").on(e.hashedKey)}));let tQ=O("templateEventType",["fork"]),tO=x("templateEvents",{...th,templateEventId:ef("templateEventId").primaryKey().notNull(),type:tQ("type").notNull(),templateCanonId:ef("templateCanonId").notNull(),userId:ef("userId").notNull()},e=>({templateEventsTypeIndex:es("templateEvents_type_idx").on(e.type),templateEventsCanonIdIndex:es("templateEvents_templateCanonId_idx").on(e.templateCanonId)}));ts(tO),tu(tO,e=>{let{one:t}=e;return{templateCanon:t(tM,{fields:[tO.templateCanonId],references:[tM.templateCanonId]})}});let tE=x("templateVersions",{...th,templateVersionId:ef("templateVersionId").primaryKey().notNull(),templateCanonId:ef("templateCanonId").notNull(),blockId:ef("blockId").notNull(),publishedToCommunity:ef("templatePublishedToCommunity").$type().default("private"),title:ef("title").notNull(),description:ef("description"),imageUrl:ef("imageUrl"),envVarKeys:ef("envVarKeys").array().notNull().default([])},e=>({blockIdIndex:es("templatesBlockIdIndex").on(e.blockId),templateCanonIdIndex:es("templateCanonId").on(e.blockId)}));ts(tE),tu(tE,e=>{let{one:t}=e;return{block:t(tj,{fields:[tE.blockId],references:[tj.blockId]}),templateCanon:t(tM,{fields:[tE.templateCanonId],references:[tM.templateCanonId]})}});let tM=x("templates",{...th,templateCanonId:ef("templateCanonId").primaryKey().notNull(),templateVersionId:ef("templateVersionId").unique().notNull(),authorId:ef("authorId").notNull(),uses:new ea("uses").default(0).notNull(),tags:ef("tags").array().notNull().default([]),category:ef("category"),trendingScore:eT("trendingScore").default(0).notNull(),trendingScoreOffset:eT("trendingScoreOffset").default(0).notNull(),order:eT("order").default(0).notNull(),projectId:ef("projectId"),chatId:ef("chatId").unique(),title:ef("title"),description:ef("description"),imageUrl:ef("imageUrl"),keywords:ef("keywords"),visibility:ef("visibility").$type().default("public").notNull(),teamId:ef("teamId")},e=>({usesIndex:es("templatesUsesIndex").on(e.uses),projectIdIndex:es("templatesProjectIdIndex").on(e.projectId),teamIdIndex:es("templatesTeamIdIndex").on(e.teamId),titleIndex:es("templatesTitleIndex").on(e.title),keywordsIndex:es("templatesKeywordsIndex").on(e.keywords),chatIdUniqueIndex:ei("templatesChatIdUniqueIndex").on(e.chatId)}));ts(tM),tu(tM,e=>{let{one:t,many:n}=e;return{templateVersion:t(tE,{fields:[tM.templateVersionId],references:[tE.templateVersionId]}),project:t(tf,{fields:[tM.projectId],references:[tf.projectId]}),likes:n(t$),chat:t(tg,{fields:[tM.chatId],references:[tg.chatId]})}});let t$=x("templateLikes",{userId:ef("userId").notNull(),templateCanonId:ef("templateCanonId").notNull(),likedAt:eN("likedAt").defaultNow().notNull()},e=>({pk:ej({columns:[e.userId,e.templateCanonId]}),templateCanonIdIdx:es("templateLikes_templateCanonId_idx").on(e.templateCanonId)}));tu(t$,e=>{let{one:t}=e;return{templateCanon:t(tM,{fields:[t$.templateCanonId],references:[tM.templateCanonId]})}});let tJ=x("evalExperiments",{...th,experimentId:ef("experimentId").primaryKey().notNull(),userId:ef("userId").notNull(),title:ef("title").notNull(),modelConfigA:ec("modelConfigA").notNull(),modelConfigB:ec("modelConfigB").notNull()}),tR=x("experimentExamples",{...th,exampleId:ef("exampleId").primaryKey().notNull(),experimentId:ef("experimentId").notNull(),urlA:ef("urlA").notNull(),urlB:ef("urlB").notNull()}),tW=O("voteChoice",["-2","-1","0","1","2"]),tZ=x("experimentVotes",{...th,voteId:ef("voteId").primaryKey().notNull(),userId:ef("userId").notNull(),exampleId:ef("exampleId").notNull(),choice:tW("choice").notNull()}),tG=x("evalExperimentPrompts",{...th,promptId:ef("promptId").primaryKey().notNull(),label:ef("label").notNull(),value:ef("value").notNull()}),tH=x("examplesAndPrompts",{exampleId:ef("exampleId").notNull(),promptId:ef("promptId").notNull()},e=>({pk:ej({columns:[e.exampleId,e.promptId]}),exampleIdx:es("examplesAndPrompts_example_idx").on(e.exampleId),promptIdx:es("examplesAndPrompts_prompt_idx").on(e.promptId)}));tu(tJ,e=>{let{many:t}=e;return{examples:t(tR)}}),tu(tR,e=>{let{one:t,many:n}=e;return{experiment:t(tJ,{fields:[tR.experimentId],references:[tJ.experimentId]}),votes:n(tZ),prompts:n(tH)}}),tu(tZ,e=>{let{one:t}=e;return{example:t(tR,{fields:[tZ.exampleId],references:[tR.exampleId]})}}),tu(tG,e=>{let{many:t}=e;return{examples:t(tH)}}),tu(tH,e=>{let{one:t}=e;return{example:t(tR,{fields:[tH.exampleId],references:[tR.exampleId]}),prompt:t(tG,{fields:[tH.promptId],references:[tG.promptId]})}});let tX=O("integrationLinkSource",["settings","add-integration"]);x("integrationLinks",{...th,integrationLinkId:ef("integrationLinkId").primaryKey().notNull(),projectId:ef("projectId").notNull(),chatId:ef("chatId").notNull(),integrationId:ef("integrationId").notNull(),integrationName:ef("integrationName").notNull(),token:ef("token").notNull(),expiresAt:eN("expiresAt").notNull(),connected:F("connected").default(!1).notNull(),source:tX("source").notNull(),messageId:ef("messageId")});let tY=x("permissions",{permissionId:ef("permissionId").primaryKey(),...th,projectId:ef("projectId"),chatId:ef("chatId"),granteeType:ef("granteeType").$type().notNull(),granteeId:ef("granteeId").notNull(),permission:ef("permission").$type().notNull()},e=>({projectIdIdx:es("permissions_project_id_idx").on(e.projectId),chatIdIdx:es("permissions_chat_id_idx").on(e.chatId),granteeIdx:es("permissions_grantee_idx").on(e.granteeType,e.granteeId)}));tu(tY,e=>{let{one:t}=e;return{project:t(tf,{fields:[tY.projectId],references:[tf.projectId]}),chat:t(tg,{fields:[tY.chatId],references:[tg.chatId]})}}),x("hooks",{...th,hookId:ef("hookId").primaryKey().notNull(),chatId:ef("chatId"),ownerId:ef("ownerId").notNull(),name:ef("name").notNull(),events:ef("events").array().notNull().default([]).$type(),url:ef("url").notNull()},e=>({ownerIdIndex:es("hooks_ownerId_idx").on(e.ownerId)})),x("hookEvents",{...th,hookEventId:ef("hookEventId").primaryKey().notNull(),hookId:ef("hookId").notNull(),event:ef("event").notNull().$type(),status:ef("status").notNull().default("pending").$type()},e=>({hookIdIndex:es("hookEvents_hookId_idx").on(e.hookId)})),x("teamSettings",{...th,teamId:ef("teamId").primaryKey(),disablePublicSharing:F("disablePublicSharing").notNull().default(!1)}),e.s(["feedbackStatusEnum",0,tA,"feedbackTypeEnum",0,tk,"v0AttachmentTypeSchema",0,tb],139962)}]);