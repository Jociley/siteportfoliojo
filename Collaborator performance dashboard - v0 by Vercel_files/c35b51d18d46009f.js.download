(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,561030,(e,t,r)=>{t.exports=function(e,t){let r;if("function"!=typeof e)throw TypeError("Expected the first argument to be a `function`, got `".concat(typeof e,"`."));let a=0;return function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];clearTimeout(r);let s=Date.now(),l=t-(s-a);l<=0?(a=s,e.apply(this,o)):r=setTimeout(()=>{a=Date.now(),e.apply(this,o)},l)}}},333130,e=>{"use strict";let t,r;e.i(643908);var a,n,o="vercel.ai.error",i=Symbol.for(o),s=class e extends Error{static isInstance(t){return e.hasMarker(t,o)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}constructor({name:e,message:t,cause:r}){super(t),this[a]=!0,this.name=e,this.cause=r}};a=i;var l=s,u=(Symbol.for("vercel.ai.error.".concat("AI_APICallError")),Symbol.for("vercel.ai.error.".concat("AI_EmptyResponseBodyError")),"AI_InvalidArgumentError"),c="vercel.ai.error.".concat(u),d=Symbol.for(c),p=class extends l{static isInstance(e){return l.hasMarker(e,c)}constructor({message:e,cause:t,argument:r}){super({name:u,message:e,cause:t}),this[n]=!0,this.argument=r}};n=d,Symbol.for("vercel.ai.error.".concat("AI_InvalidPromptError")),Symbol.for("vercel.ai.error.".concat("AI_InvalidResponseDataError")),Symbol.for("vercel.ai.error.".concat("AI_JSONParseError")),Symbol.for("vercel.ai.error.".concat("AI_LoadAPIKeyError")),Symbol.for("vercel.ai.error.".concat("AI_LoadSettingError")),Symbol.for("vercel.ai.error.".concat("AI_NoContentGeneratedError")),Symbol.for("vercel.ai.error.".concat("AI_NoSuchModelError")),Symbol.for("vercel.ai.error.".concat("AI_TooManyEmbeddingValuesForCallError")),Symbol.for("vercel.ai.error.".concat("AI_TypeValidationError")),Symbol.for("vercel.ai.error.".concat("AI_UnsupportedFunctionalityError"));var f=e.i(86079);e.i(254471);TransformStream,!function(){let{prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.customAlphabet)(r,t);if(null!=e){if(r.includes(a))throw new p({argument:"separator",message:'The separator "'.concat(a,'" must not be part of the alphabet "').concat(r,'".')})}}(),Symbol.for("vercel.ai.validator");var{btoa:m,atob:y}=globalThis;let g=Symbol("Let zodToJsonSchema decide on which parser to use");function h(e,t,r,a){(null==a?void 0:a.errorMessages)&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function v(e,t,r,a,n){e[t]=r,h(e,t,a,n)}e.i(541536);var b=e.i(101079);function _(e,t){return O(e.type._def,t)}let T={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===t&&(t=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function w(e,t){let r={type:"string"};if(e.checks)for(let a of e.checks)switch(a.kind){case"min":v(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t);break;case"max":v(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"email":switch(t.emailStrategy){case"format:email":E(r,"email",a.message,t);break;case"format:idn-email":E(r,"idn-email",a.message,t);break;case"pattern:zod":Z(r,T.email,a.message,t)}break;case"url":E(r,"uri",a.message,t);break;case"uuid":E(r,"uuid",a.message,t);break;case"regex":Z(r,a.regex,a.message,t);break;case"cuid":Z(r,T.cuid,a.message,t);break;case"cuid2":Z(r,T.cuid2,a.message,t);break;case"startsWith":Z(r,RegExp("^".concat(k(a.value,t))),a.message,t);break;case"endsWith":Z(r,RegExp("".concat(k(a.value,t),"$")),a.message,t);break;case"datetime":E(r,"date-time",a.message,t);break;case"date":E(r,"date",a.message,t);break;case"time":E(r,"time",a.message,t);break;case"duration":E(r,"duration",a.message,t);break;case"length":v(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t),v(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"includes":Z(r,RegExp(k(a.value,t)),a.message,t);break;case"ip":"v6"!==a.version&&E(r,"ipv4",a.message,t),"v4"!==a.version&&E(r,"ipv6",a.message,t);break;case"base64url":Z(r,T.base64url,a.message,t);break;case"jwt":Z(r,T.jwt,a.message,t);break;case"cidr":"v6"!==a.version&&Z(r,T.ipv4Cidr,a.message,t),"v4"!==a.version&&Z(r,T.ipv6Cidr,a.message,t);break;case"emoji":Z(r,T.emoji(),a.message,t);break;case"ulid":Z(r,T.ulid,a.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":E(r,"binary",a.message,t);break;case"contentEncoding:base64":v(r,"contentEncoding","base64",a.message,t);break;case"pattern:zod":Z(r,T.base64,a.message,t)}break;case"nanoid":Z(r,T.nanoid,a.message,t)}return r}function k(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)P.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}let P=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function E(e,t,r,a){var n;e.format||(null==(n=e.anyOf)?void 0:n.some(e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):v(e,"format",t,r,a)}function Z(e,t,r,a){var n;e.pattern||(null==(n=e.allOf)?void 0:n.some(e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:x(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):v(e,"pattern",x(t,a),r,a)}function x(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},a=r.i?e.source.toLowerCase():e.source,n="",o=!1,i=!1,s=!1;for(let e=0;e<a.length;e++){if(o){n+=a[e],o=!1;continue}if(r.i){if(i){if(a[e].match(/[a-z]/)){var l;s?(n+=a[e],n+="".concat(a[e-2],"-").concat(a[e]).toUpperCase(),s=!1):"-"===a[e+1]&&(null==(l=a[e+2])?void 0:l.match(/[a-z]/))?(n+=a[e],s=!0):n+="".concat(a[e]).concat(a[e].toUpperCase());continue}}else if(a[e].match(/[a-z]/)){n+="[".concat(a[e]).concat(a[e].toUpperCase(),"]");continue}}if(r.m){if("^"===a[e]){n+="(^|(?<=[\r\n]))";continue}else if("$"===a[e]){n+="($|(?=[\r\n]))";continue}}if(r.s&&"."===a[e]){n+=i?"".concat(a[e],"\r\n"):"[".concat(a[e],"\r\n]");continue}n+=a[e],"\\"===a[e]?o=!0:i&&"]"===a[e]?i=!1:i||"["!==a[e]||(i=!0)}try{new RegExp(n)}catch(r){return console.warn("Could not convert regex pattern at ".concat(t.currentPath.join("/")," to a flag-independent form! Falling back to the flag-ignorant source")),e.source}return n}function A(e,t){var r,a,n,o,i,s,l;if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&(null==(r=e.keyType)?void 0:r._def.typeName)===b.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,a)=>{var n;return{...r,[a]:null!=(n=O(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]}))?n:{}}},{}),additionalProperties:t.rejectedAdditionalProperties};let u={type:"object",additionalProperties:null!=(l=O(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))?l:t.allowedAdditionalProperties};if("openApi3"===t.target)return u;if((null==(a=e.keyType)?void 0:a._def.typeName)===b.ZodFirstPartyTypeKind.ZodString&&(null==(n=e.keyType._def.checks)?void 0:n.length)){let{type:r,...a}=w(e.keyType._def,t);return{...u,propertyNames:a}}if((null==(o=e.keyType)?void 0:o._def.typeName)===b.ZodFirstPartyTypeKind.ZodEnum)return{...u,propertyNames:{enum:e.keyType._def.values}};if((null==(i=e.keyType)?void 0:i._def.typeName)===b.ZodFirstPartyTypeKind.ZodBranded&&e.keyType._def.type._def.typeName===b.ZodFirstPartyTypeKind.ZodString&&(null==(s=e.keyType._def.type._def.checks)?void 0:s.length)){let{type:r,...a}=_(e.keyType._def,t);return{...u,propertyNames:a}}return u}let S={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},I=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>O(e._def,{...t,currentPath:[...t.currentPath,"anyOf","".concat(r)]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function O(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.seen.get(e);if(t.override){var n;let o=null==(n=t.override)?void 0:n.call(t,e,t,a,r);if(o!==g)return o}if(a&&!r){let e=F(a,t);if(void 0!==e)return e}let o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);let i=((e,t,r)=>{switch(t){case b.ZodFirstPartyTypeKind.ZodString:return w(e,r);case b.ZodFirstPartyTypeKind.ZodNumber:var a,n,o,i,s,l,u=e,c=r;let d={type:"number"};if(!u.checks)return d;for(let e of u.checks)switch(e.kind){case"int":d.type="integer",h(d,"type",e.message,c);break;case"min":"jsonSchema7"===c.target?e.inclusive?v(d,"minimum",e.value,e.message,c):v(d,"exclusiveMinimum",e.value,e.message,c):(e.inclusive||(d.exclusiveMinimum=!0),v(d,"minimum",e.value,e.message,c));break;case"max":"jsonSchema7"===c.target?e.inclusive?v(d,"maximum",e.value,e.message,c):v(d,"exclusiveMaximum",e.value,e.message,c):(e.inclusive||(d.exclusiveMaximum=!0),v(d,"maximum",e.value,e.message,c));break;case"multipleOf":v(d,"multipleOf",e.value,e.message,c)}return d;case b.ZodFirstPartyTypeKind.ZodObject:return function(e,t){let r="openAi"===t.target,a={type:"object",properties:{}},n=[],o=e.shape();for(let e in o){let i=o[e];if(void 0===i||void 0===i._def)continue;let s=function(e){try{return e.isOptional()}catch(e){return!0}}(i);s&&r&&(i instanceof b.ZodOptional&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),s=!1);let l=O(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(a.properties[e]=l,s||n.push(e))}n.length&&(a.required=n);let i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return O(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(a.additionalProperties=i),a}(e,r);case b.ZodFirstPartyTypeKind.ZodBigInt:var p=e,f=r;let m={type:"integer",format:"int64"};if(!p.checks)return m;for(let e of p.checks)switch(e.kind){case"min":"jsonSchema7"===f.target?e.inclusive?v(m,"minimum",e.value,e.message,f):v(m,"exclusiveMinimum",e.value,e.message,f):(e.inclusive||(m.exclusiveMinimum=!0),v(m,"minimum",e.value,e.message,f));break;case"max":"jsonSchema7"===f.target?e.inclusive?v(m,"maximum",e.value,e.message,f):v(m,"exclusiveMaximum",e.value,e.message,f):(e.inclusive||(m.exclusiveMaximum=!0),v(m,"maximum",e.value,e.message,f));break;case"multipleOf":v(m,"multipleOf",e.value,e.message,f)}return m;case b.ZodFirstPartyTypeKind.ZodBoolean:return{type:"boolean"};case b.ZodFirstPartyTypeKind.ZodDate:return function e(t,r,a){let n=null!=a?a:r.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((a,n)=>e(t,r,a))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var o=t,i=r;let s={type:"integer",format:"unix-time"};if("openApi3"===i.target)return s;for(let e of o.checks)switch(e.kind){case"min":v(s,"minimum",e.value,e.message,i);break;case"max":v(s,"maximum",e.value,e.message,i)}return s}}(e,r);case b.ZodFirstPartyTypeKind.ZodUndefined:return{not:{}};case b.ZodFirstPartyTypeKind.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case b.ZodFirstPartyTypeKind.ZodArray:var y,g,T,k=e,P=r;let E={type:"array"};return(null==(y=k.type)?void 0:y._def)&&(null==(T=k.type)||null==(g=T._def)?void 0:g.typeName)!==b.ZodFirstPartyTypeKind.ZodAny&&(E.items=O(k.type._def,{...P,currentPath:[...P.currentPath,"items"]})),k.minLength&&v(E,"minItems",k.minLength.value,k.minLength.message,P),k.maxLength&&v(E,"maxItems",k.maxLength.value,k.maxLength.message,P),k.exactLength&&(v(E,"minItems",k.exactLength.value,k.exactLength.message,P),v(E,"maxItems",k.exactLength.value,k.exactLength.message,P)),E;case b.ZodFirstPartyTypeKind.ZodUnion:case b.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:var Z=e,x=r;if("openApi3"===x.target)return I(Z,x);let F=Z.options instanceof Map?Array.from(Z.options.values()):Z.options;if(F.every(e=>e._def.typeName in S&&(!e._def.checks||!e._def.checks.length))){let e=F.reduce((e,t)=>{let r=S[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(F.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=F.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===F.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:F.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(F.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:F.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return I(Z,x);case b.ZodFirstPartyTypeKind.ZodIntersection:var j=e,N=r;let R=[O(j.left._def,{...N,currentPath:[...N.currentPath,"allOf","0"]}),O(j.right._def,{...N,currentPath:[...N.currentPath,"allOf","1"]})].filter(e=>!!e),C="jsonSchema2019-09"===N.target?{unevaluatedProperties:!1}:void 0,L=[];return R.forEach(e=>{if((!("type"in e)||"string"!==e.type)&&"allOf"in e)L.push(...e.allOf),void 0===e.unevaluatedProperties&&(C=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...a}=e;t=a}else C=void 0;L.push(t)}}),L.length?{allOf:L,...C}:void 0;case b.ZodFirstPartyTypeKind.ZodTuple:return q=e,G=r,q.rest?{type:"array",minItems:q.items.length,items:q.items.map((e,t)=>O(e._def,{...G,currentPath:[...G.currentPath,"items","".concat(t)]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:O(q.rest._def,{...G,currentPath:[...G.currentPath,"additionalItems"]})}:{type:"array",minItems:q.items.length,maxItems:q.items.length,items:q.items.map((e,t)=>O(e._def,{...G,currentPath:[...G.currentPath,"items","".concat(t)]})).reduce((e,t)=>void 0===t?e:[...e,t],[])};case b.ZodFirstPartyTypeKind.ZodRecord:return A(e,r);case b.ZodFirstPartyTypeKind.ZodLiteral:var M=e,K=r;let D=typeof M.value;return"bigint"!==D&&"number"!==D&&"boolean"!==D&&"string"!==D?{type:Array.isArray(M.value)?"array":"object"}:"openApi3"===K.target?{type:"bigint"===D?"integer":D,enum:[M.value]}:{type:"bigint"===D?"integer":D,const:M.value};case b.ZodFirstPartyTypeKind.ZodEnum:return{type:"string",enum:Array.from(e.values)};case b.ZodFirstPartyTypeKind.ZodNativeEnum:var V=e;let z=V.values,$=Object.keys(V.values).filter(e=>"number"!=typeof z[z[e]]).map(e=>z[e]),U=Array.from(new Set($.map(e=>typeof e)));return{type:1===U.length?"string"===U[0]?"string":"number":["string","number"],enum:$};case b.ZodFirstPartyTypeKind.ZodNullable:var B=e,W=r;if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(B.innerType._def.typeName)&&(!B.innerType._def.checks||!B.innerType._def.checks.length))return"openApi3"===W.target?{type:S[B.innerType._def.typeName],nullable:!0}:{type:[S[B.innerType._def.typeName],"null"]};if("openApi3"===W.target){let e=O(B.innerType._def,{...W,currentPath:[...W.currentPath]});return e&&"$ref"in e?{allOf:[e],nullable:!0}:e&&{...e,nullable:!0}}let J=O(B.innerType._def,{...W,currentPath:[...W.currentPath,"anyOf","0"]});return J&&{anyOf:[J,{type:"null"}]};case b.ZodFirstPartyTypeKind.ZodOptional:var q,G,H,Q=e,X=r;if(X.currentPath.toString()===(null==(H=X.propertyPath)?void 0:H.toString()))return O(Q.innerType._def,X);let Y=O(Q.innerType._def,{...X,currentPath:[...X.currentPath,"anyOf","1"]});return Y?{anyOf:[{not:{}},Y]}:{};case b.ZodFirstPartyTypeKind.ZodMap:return a=e,"record"===(n=r).mapStrategy?A(a,n):{type:"array",maxItems:125,items:{type:"array",items:[O(a.keyType._def,{...n,currentPath:[...n.currentPath,"items","items","0"]})||{},O(a.valueType._def,{...n,currentPath:[...n.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}};case b.ZodFirstPartyTypeKind.ZodSet:var ee=e,et=r;let er={type:"array",uniqueItems:!0,items:O(ee.valueType._def,{...et,currentPath:[...et.currentPath,"items"]})};return ee.minSize&&v(er,"minItems",ee.minSize.value,ee.minSize.message,et),ee.maxSize&&v(er,"maxItems",ee.maxSize.value,ee.maxSize.message,et),er;case b.ZodFirstPartyTypeKind.ZodLazy:return()=>e.getter()._def;case b.ZodFirstPartyTypeKind.ZodPromise:return O(e.type._def,r);case b.ZodFirstPartyTypeKind.ZodNaN:case b.ZodFirstPartyTypeKind.ZodNever:return{not:{}};case b.ZodFirstPartyTypeKind.ZodEffects:return o=e,"input"===(i=r).effectStrategy?O(o.schema._def,i):{};case b.ZodFirstPartyTypeKind.ZodAny:case b.ZodFirstPartyTypeKind.ZodUnknown:return{};case b.ZodFirstPartyTypeKind.ZodDefault:return s=e,l=r,{...O(s.innerType._def,l),default:s.defaultValue()};case b.ZodFirstPartyTypeKind.ZodBranded:return _(e,r);case b.ZodFirstPartyTypeKind.ZodReadonly:case b.ZodFirstPartyTypeKind.ZodCatch:return O(e.innerType._def,r);case b.ZodFirstPartyTypeKind.ZodPipeline:var ea=e,en=r;if("input"===en.pipeStrategy)return O(ea.in._def,en);if("output"===en.pipeStrategy)return O(ea.out._def,en);let eo=O(ea.in._def,{...en,currentPath:[...en.currentPath,"allOf","0"]}),ei=O(ea.out._def,{...en,currentPath:[...en.currentPath,"allOf",eo?"1":"0"]});return{allOf:[eo,ei].filter(e=>void 0!==e)};case b.ZodFirstPartyTypeKind.ZodFunction:case b.ZodFirstPartyTypeKind.ZodVoid:case b.ZodFirstPartyTypeKind.ZodSymbol:default:return}})(e,e.typeName,t),s="function"==typeof i?O(i(),t):i;if(s&&N(e,t,s),t.postProcess){let r=t.postProcess(s,e,t);return o.jsonSchema=s,r}return o.jsonSchema=s,s}let F=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:j(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn("Recursive reference detected at ".concat(t.currentPath.join("/"),"! Defaulting to any")),{};return"seen"===t.$refStrategy?{}:void 0}},j=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},N=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r);var R={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},C={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},L={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},M={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},K={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},D=[R,C,L,M,K];R.code,C.code,L.code,M.code,K.code,R.name,R.code,C.name,C.code,L.name,L.code,M.name,M.code,K.name,K.code,D.map(e=>e.code);var V=[{code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},{code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},{code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},{code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},{code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},{code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},{code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},{code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},{code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:NaN}),{type:"finish_message",value:t}}},{code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},{code:"f",name:"start_step",parse:e=>{if(null==e||"object"!=typeof e||!("messageId"in e)||"string"!=typeof e.messageId)throw Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},{code:"g",name:"reasoning",parse:e=>{if("string"!=typeof e)throw Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},{code:"h",name:"source",parse:e=>{if(null==e||"object"!=typeof e)throw Error('"source" parts expect a Source object.');return{type:"source",value:e}}},{code:"i",name:"redacted_reasoning",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data)throw Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},{code:"j",name:"reasoning_signature",parse:e=>{if(null==e||"object"!=typeof e||!("signature"in e)||"string"!=typeof e.signature)throw Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}}],z=Object.fromEntries(V.map(e=>[e.code,e]));Object.fromEntries(V.map(e=>[e.name,e.code]));var $=V.map(e=>e.code),U=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!$.includes(r))throw Error("Failed to parse stream string. Invalid code ".concat(r,"."));let a=JSON.parse(e.slice(t+1));return z[r].parse(a)};async function B(e){let{stream:t,onTextPart:r,onReasoningPart:a,onReasoningSignaturePart:n,onRedactedReasoningPart:o,onSourcePart:i,onDataPart:s,onErrorPart:l,onToolCallStreamingStartPart:u,onToolCallDeltaPart:c,onToolCallPart:d,onToolResultPart:p,onMessageAnnotationsPart:f,onFinishMessagePart:m,onFinishStepPart:y,onStartStepPart:g}=e,h=t.getReader(),v=new TextDecoder,b=[],_=0;for(;;){let{value:e}=await h.read();if(e&&(b.push(e),_+=e.length,10!==e[e.length-1]))continue;if(0===b.length)break;let t=function(e,t){let r=new Uint8Array(t),a=0;for(let t of e)r.set(t,a),a+=t.length;return e.length=0,r}(b,_);for(let{type:e,value:h}of(_=0,v.decode(t,{stream:!0}).split("\n").filter(e=>""!==e).map(U)))switch(e){case"text":await (null==r?void 0:r(h));break;case"reasoning":await (null==a?void 0:a(h));break;case"reasoning_signature":await (null==n?void 0:n(h));break;case"redacted_reasoning":await (null==o?void 0:o(h));break;case"source":await (null==i?void 0:i(h));break;case"data":await (null==s?void 0:s(h));break;case"error":await (null==l?void 0:l(h));break;case"message_annotations":await (null==f?void 0:f(h));break;case"tool_call_streaming_start":await (null==u?void 0:u(h));break;case"tool_call_delta":await (null==c?void 0:c(h));break;case"tool_call":await (null==d?void 0:d(h));break;case"tool_result":await (null==p?void 0:p(h));break;case"finish_message":await (null==m?void 0:m(h));break;case"finish_step":await (null==y?void 0:y(h));break;case"start_step":await (null==g?void 0:g(h));break;default:throw Error("Unknown stream part type: ".concat(e))}}}async function W(e){let{stream:t,onTextPart:r}=e,a=t.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:e,value:t}=await a.read();if(e)break;await r(t)}}async function J(e){var t;let{api:r,prompt:a,credentials:n,headers:o,body:i,streamProtocol:s="data",setCompletion:l,setLoading:u,setError:c,setAbortController:d,onResponse:p,onFinish:f,onError:m,onData:y,fetch:g=fetch}=e;try{u(!0),c(void 0);let e=new AbortController;d(e),l("");let m=await g(r,{method:"POST",body:JSON.stringify({prompt:a,...i}),credentials:n,headers:{"Content-Type":"application/json",...o},signal:e.signal}).catch(e=>{throw e});if(p)try{await p(m)}catch(e){throw e}if(!m.ok)throw Error(null!=(t=await m.text())?t:"Failed to fetch the chat response.");if(!m.body)throw Error("The response body is empty.");let h="";switch(s){case"text":await W({stream:m.body,onTextPart:e=>{h+=e,l(h)}});break;case"data":await B({stream:m.body,onTextPart(e){h+=e,l(h)},onDataPart(e){null==y||y(e)},onErrorPart(e){throw Error(e)}});break;default:throw Error("Unknown stream protocol: ".concat(s))}return f&&f(a,h),d(null),h}catch(e){if("AbortError"===e.name)return d(null),null;e instanceof Error&&m&&m(e),c(e)}finally{u(!1)}}Symbol.for("vercel.ai.schema");var q=e.i(743124);e.i(458098);var G=e.i(957573);let H=()=>{},Q=H(),X=Object,Y=e=>e===Q,ee=(e,t)=>({...e,...t}),et=new WeakMap,er=0,ea=e=>{let t,r,a=typeof e,n=e&&e.constructor,o=n==Date;if(X(e)!==e||o||n==RegExp)t=o?e.toJSON():"symbol"==a?e.toString():"string"==a?JSON.stringify(e):""+e;else{if(t=et.get(e))return t;if(t=++er+"~",et.set(e,t),n==Array){for(r=0,t="@";r<e.length;r++)t+=ea(e[r])+",";et.set(e,t)}if(n==X){t="#";let a=X.keys(e).sort();for(;!Y(r=a.pop());)Y(e[r])||(t+=r+":"+ea(e[r])+",");et.set(e,t)}}return t},en=new WeakMap,eo={},ei={},es="undefined",el=typeof window!=es,eu=typeof document!=es,ec=(e,t)=>{let r=en.get(e);return[()=>!Y(t)&&e.get(t)||eo,a=>{if(!Y(t)){let n=e.get(t);t in ei||(ei[t]=n),r[5](t,ee(n,a),n||eo)}},r[6],()=>!Y(t)&&t in ei?ei[t]:!Y(t)&&e.get(t)||eo]},ed=!0,[ep,ef]=el&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[H,H],em={initFocus:e=>(eu&&document.addEventListener("visibilitychange",e),ep("focus",e),()=>{eu&&document.removeEventListener("visibilitychange",e),ef("focus",e)}),initReconnect:e=>{let t=()=>{ed=!0,e()},r=()=>{ed=!1};return ep("online",t),ep("offline",r),()=>{ef("online",t),ef("offline",r)}}},ey=!q.default.useId,eg=!el||"Deno"in window,eh=eg?q.useEffect:q.useLayoutEffect,ev="undefined"!=typeof navigator&&navigator.connection,eb=!eg&&ev&&(["slow-2g","2g"].includes(ev.effectiveType)||ev.saveData),e_=e=>{if("function"==typeof e)try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?ea(e):"",t]},eT=0,ew=()=>++eT;var ek={ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:0,MUTATE_EVENT:2,RECONNECT_EVENT:1};async function eP(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a,n,o,i]=t,s=ee({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{}),l=s.populateCache,u=s.rollbackOnError,c=s.optimisticData,d=s.throwOnError;if("function"==typeof n){let e=[];for(let t of a.keys())!/^\$(inf|sub)\$/.test(t)&&n(a.get(t)._k)&&e.push(t);return Promise.all(e.map(p))}return p(n);async function p(e){let r,[n]=e_(e);if(!n)return;let[i,p]=ec(a,n),[f,m,y,g]=en.get(a),h=()=>{let t=f[n];return("function"==typeof s.revalidate?s.revalidate(i().data,e):!1!==s.revalidate)&&(delete y[n],delete g[n],t&&t[0])?t[0](2).then(()=>i().data):i().data};if(t.length<3)return h();let v=o,b=ew();m[n]=[b,0];let _=!Y(c),T=i(),w=T.data,k=T._c,P=Y(k)?w:k;if(_&&p({data:c="function"==typeof c?c(P,w):c,_c:P}),"function"==typeof v)try{v=v(P)}catch(e){r=e}if(v&&"function"==typeof v.then){let e;if(v=await v.catch(e=>{r=e}),b!==m[n][0]){if(r)throw r;return v}r&&_&&(e=r,"function"==typeof u?u(e):!1!==u)&&(l=!0,p({data:P,_c:Q}))}if(l&&!r&&("function"==typeof l?p({data:l(v,P),error:Q,_c:Q}):p({data:v,error:Q,_c:Q})),m[n][1]=ew(),Promise.resolve(h()).then(()=>{p({_c:Q})}),r){if(d)throw r;return}return v}}let eE=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},eZ=(e,t)=>{if(!en.has(e)){let r=ee(em,t),a={},n=eP.bind(Q,e),o=H,i={},s=(e,t)=>{let r=i[e]||[];return i[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},l=(t,r,a)=>{e.set(t,r);let n=i[t];if(n)for(let e of n)e(r,a)},u=()=>{if(!en.has(e)&&(en.set(e,[a,{},{},{},n,l,s]),!eg)){let t=r.initFocus(setTimeout.bind(Q,eE.bind(Q,a,0))),n=r.initReconnect(setTimeout.bind(Q,eE.bind(Q,a,1)));o=()=>{t&&t(),n&&n(),en.delete(e)}}};return u(),[e,n,u,o]}return[e,en.get(e)[4]]},[ex,eA]=eZ(new Map),eS=ee({onLoadingSlow:H,onSuccess:H,onError:H,onErrorRetry:(e,t,r,a,n)=>{let o=r.errorRetryCount,i=n.retryCount,s=~~((Math.random()+.5)*(1<<(i<8?i:8)))*r.errorRetryInterval;(Y(o)||!(i>o))&&setTimeout(a,s,n)},onDiscarded:H,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:eb?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:eb?5e3:3e3,compare:(e,t)=>ea(e)==ea(t),isPaused:()=>!1,cache:ex,mutate:eA,fallback:{}},{isOnline:()=>ed,isVisible:()=>{let e=eu&&document.visibilityState;return Y(e)||"hidden"!==e}}),eI=(e,t)=>{let r=ee(e,t);if(t){let{use:a,fallback:n}=e,{use:o,fallback:i}=t;a&&o&&(r.use=a.concat(o)),n&&i&&(r.fallback=ee(n,i))}return r},eO=(0,q.createContext)({}),eF=el&&window.__SWR_DEVTOOLS_USE__,ej=(eF?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,a)=>{let n=r&&function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];let[o]=e_(t),[,,,i]=en.get(ex);if(o.startsWith("$inf$"))return r(...a);let s=i[o];return Y(s)?r(...a):(delete i[o],s)};return e(t,n,a)});eF&&(window.__SWR_DEVTOOLS_REACT__=q.default);let eN=q.default.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}),eR={dedupe:!0};X.defineProperty(e=>{let{value:t}=e,r=(0,q.useContext)(eO),a="function"==typeof t,n=(0,q.useMemo)(()=>a?t(r):t,[a,r,t]),o=(0,q.useMemo)(()=>a?n:eI(r,n),[a,r,n]),i=n&&n.provider,s=(0,q.useRef)(Q);i&&!s.current&&(s.current=eZ(i(o.cache||ex),n));let l=s.current;return l&&(o.cache=l[0],o.mutate=l[1]),eh(()=>{if(l)return l[2]&&l[2](),l[3]},[]),(0,q.createElement)(eO.Provider,ee(e,{value:o}))},"defaultValue",{value:eS});let eC=(r=(e,t,r)=>{let{cache:a,compare:n,suspense:o,fallbackData:i,revalidateOnMount:s,revalidateIfStale:l,refreshInterval:u,refreshWhenHidden:c,refreshWhenOffline:d,keepPreviousData:p}=r,[f,m,y,g]=en.get(a),[h,v]=e_(e),b=(0,q.useRef)(!1),_=(0,q.useRef)(!1),T=(0,q.useRef)(h),w=(0,q.useRef)(t),k=(0,q.useRef)(r),P=()=>k.current.isVisible()&&k.current.isOnline(),[E,Z,x,A]=ec(a,h),S=(0,q.useRef)({}).current,I=Y(i)?r.fallback[h]:i,O=(e,t)=>{for(let r in S)if("data"===r){if(!n(e[r],t[r])&&(!Y(e[r])||!n(D,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},F=(0,q.useMemo)(()=>{let e=!!h&&!!t&&(Y(s)?!k.current.isPaused()&&!o&&(!!Y(l)||l):s),r=t=>{let r=ee(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},a=E(),n=A(),i=r(a),u=a===n?i:r(n),c=i;return[()=>{let e=r(E());return O(e,c)?(c.data=e.data,c.isLoading=e.isLoading,c.isValidating=e.isValidating,c.error=e.error,c):(c=e,e)},()=>u]},[a,h]),j=(0,G.useSyncExternalStore)((0,q.useCallback)(e=>x(h,(t,r)=>{O(r,t)||e()}),[a,h]),F[0],F[1]),N=!b.current,R=f[h]&&f[h].length>0,C=j.data,L=Y(C)?I:C,M=j.error,K=(0,q.useRef)(L),D=p?Y(C)?K.current:C:L,V=(!R||!!Y(M))&&(N&&!Y(s)?s:!k.current.isPaused()&&(o?!Y(L)&&l:Y(L)||l)),z=!!(h&&t&&N&&V),$=Y(j.isValidating)?z:j.isValidating,U=Y(j.isLoading)?z:j.isLoading,B=(0,q.useCallback)(async e=>{let t,a,o=w.current;if(!h||!o||_.current||k.current.isPaused())return!1;let i=!0,s=e||{},l=!y[h]||!s.dedupe,u=()=>ey?!_.current&&h===T.current&&b.current:h===T.current,c={isValidating:!1,isLoading:!1},d=()=>{Z(c)},p=()=>{let e=y[h];e&&e[1]===a&&delete y[h]},g={isValidating:!0};Y(E().data)&&(g.isLoading=!0);try{if(l&&(Z(g),r.loadingTimeout&&Y(E().data)&&setTimeout(()=>{i&&u()&&k.current.onLoadingSlow(h,r)},r.loadingTimeout),y[h]=[o(v),ew()]),[t,a]=y[h],t=await t,l&&setTimeout(p,r.dedupingInterval),!y[h]||y[h][1]!==a)return l&&u()&&k.current.onDiscarded(h),!1;c.error=Q;let e=m[h];if(!Y(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return d(),l&&u()&&k.current.onDiscarded(h),!1;let s=E().data;c.data=n(s,t)?s:t,l&&u()&&k.current.onSuccess(t,h,r)}catch(r){p();let e=k.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(c.error=r,l&&u())&&(e.onError(r,h,e),(!0===t||"function"==typeof t&&t(r))&&(!k.current.revalidateOnFocus||!k.current.revalidateOnReconnect||P())&&e.onErrorRetry(r,h,e,e=>{let t=f[h];t&&t[0]&&t[0](ek.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0}))}return i=!1,d(),!0},[h,a]),W=(0,q.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return eP(a,T.current,...t)},[]);if(eh(()=>{w.current=t,k.current=r,Y(C)||(K.current=C)}),eh(()=>{if(!h)return;let e=B.bind(Q,eR),t=0,r=((e,t,r)=>{let a=t[e]||(t[e]=[]);return a.push(r),()=>{let e=a.indexOf(r);e>=0&&(a[e]=a[a.length-1],a.pop())}})(h,f,function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r==ek.FOCUS_EVENT){let r=Date.now();k.current.revalidateOnFocus&&r>t&&P()&&(t=r+k.current.focusThrottleInterval,e())}else if(r==ek.RECONNECT_EVENT)k.current.revalidateOnReconnect&&P()&&e();else if(r==ek.MUTATE_EVENT)return B();else if(r==ek.ERROR_REVALIDATE_EVENT)return B(a)});return _.current=!1,T.current=h,b.current=!0,Z({_k:v}),V&&(Y(L)||eg?e():(e=>el&&typeof window.requestAnimationFrame!=es?window.requestAnimationFrame(e):setTimeout(e,1))(e)),()=>{_.current=!0,r()}},[h]),eh(()=>{let e;function t(){let t="function"==typeof u?u(E().data):u;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!E().error&&(c||k.current.isVisible())&&(d||k.current.isOnline())?B(eR).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[u,c,d,h]),(0,q.useDebugValue)(D),o&&Y(L)&&h){if(!ey&&eg)throw Error("Fallback data is required when using suspense in SSR.");w.current=t,k.current=r,_.current=!1;let e=g[h];if(Y(e)||eN(W(e)),Y(M)){let e=B(eR);Y(D)||(e.status="fulfilled",e.value=!0),eN(e)}else throw M}return{mutate:W,get data(){return S.data=!0,D},get error(){return S.error=!0,M},get isValidating(){return S.isValidating=!0,$},get isLoading(){return S.isLoading=!0,U}}},function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let n=ee(eS,(0,q.useContext)(eO)),[o,i,s]="function"==typeof t[1]?[t[0],t[1],t[2]||{}]:[t[0],null,(null===t[1]?t[2]:t[1])||{}],l=eI(n,s),u=r,{use:c}=l,d=(c||[]).concat(ej);for(let e=d.length;e--;)u=d[e](u);return u(o,i||l.fetcher||null,l)});var eL=e.i(561030);function eM(e,t){return null!=t?(0,eL.default)(e,t):e}function eK(){let{api:e="/api/completion",id:t,initialCompletion:r="",initialInput:a="",credentials:n,headers:o,body:i,streamProtocol:s="data",fetch:l,onResponse:u,onFinish:c,onError:d,experimental_throttle:p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=(0,q.useId)(),m=t||f,{data:y,mutate:g}=eC([e,m],null,{fallbackData:r}),{data:h=!1,mutate:v}=eC([m,"loading"],null),{data:b,mutate:_}=eC([m,"streamData"],null),[T,w]=(0,q.useState)(void 0),[k,P]=(0,q.useState)(null),E=(0,q.useRef)({credentials:n,headers:o,body:i});(0,q.useEffect)(()=>{E.current={credentials:n,headers:o,body:i}},[n,o,i]);let Z=(0,q.useCallback)(async(t,r)=>J({api:e,prompt:t,credentials:E.current.credentials,headers:{...E.current.headers,...null==r?void 0:r.headers},body:{...E.current.body,...null==r?void 0:r.body},streamProtocol:s,fetch:l,setCompletion:eM(e=>g(e,!1),p),onData:eM(e=>_([...null!=b?b:[],...null!=e?e:[]],!1),p),setLoading:v,setError:w,setAbortController:P,onResponse:u,onFinish:c,onError:d}),[g,v,e,E,P,u,c,d,w,b,s,l,_,p]),x=(0,q.useCallback)(()=>{k&&(k.abort(),P(null))},[k]),A=(0,q.useCallback)(e=>{g(e,!1)},[g]),S=(0,q.useCallback)(async(e,t)=>Z(e,t),[Z]),[I,O]=(0,q.useState)(a),F=(0,q.useCallback)(e=>{var t;return null==(t=null==e?void 0:e.preventDefault)||t.call(e),I?S(I):void 0},[I,S]),j=(0,q.useCallback)(e=>{O(e.target.value)},[O]);return{completion:y,complete:S,error:T,setCompletion:A,stop:x,input:I,setInput:O,handleInputChange:j,handleSubmit:F,isLoading:h,data:b}}e.s(["useCompletion",()=>eK],333130)}]);