(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,801525,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9.53033 2.21968L9 1.68935L7.93934 2.75001L8.46967 3.28034L12.4393 7.25001H1.75H1V8.75001H1.75H12.4393L8.46967 12.7197L7.93934 13.25L9 14.3107L9.53033 13.7803L14.6036 8.70711C14.9941 8.31659 14.9941 7.68342 14.6036 7.2929L9.53033 2.21968Z" fill="currentColor"/>');e.s(["ArrowRight",0,t])},157664,(e,t,a)=>{function r(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(Error("Failed to load "+this.src),e)}}t.exports=function(e,t,a){var i=document.head||document.getElementsByTagName("head")[0],l=document.createElement("script");"function"==typeof t&&(a=t,t={}),a=a||function(){},l.type=(t=t||{}).type||"text/javascript",l.charset=t.charset||"utf8",l.async=!("async"in t)||!!t.async,l.src=e,t.attrs&&function(e,t){for(var a in t)e.setAttribute(a,t[a])}(l,t.attrs),t.text&&(l.text=""+t.text),("onload"in l?r:function(e,t){e.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&(this.onreadystatechange=null,t(null,e))}})(l,a),l.onload||r(l,a),i.appendChild(l)}},126612,(e,t,a)=>{"use strict";var r=function(e){var t,a,r;return!!(t=e)&&"object"==typeof t&&(a=e,"[object RegExp]"!==(r=Object.prototype.toString.call(a))&&"[object Date]"!==r&&a.$$typeof!==i)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function l(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c(Array.isArray(e)?[]:{},e,t):e}function n(e,t,a){return e.concat(t).map(function(e){return l(e,a)})}function s(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function o(e,t){try{return t in e}catch(e){return!1}}function c(e,t,a){(a=a||{}).arrayMerge=a.arrayMerge||n,a.isMergeableObject=a.isMergeableObject||r,a.cloneUnlessOtherwiseSpecified=l;var i,d,u=Array.isArray(t);return u!==Array.isArray(e)?l(t,a):u?a.arrayMerge(e,t,a):(d={},(i=a).isMergeableObject(e)&&s(e).forEach(function(t){d[t]=l(e[t],i)}),s(t).forEach(function(a){o(e,a)&&!(Object.hasOwnProperty.call(e,a)&&Object.propertyIsEnumerable.call(e,a))||(o(e,a)&&i.isMergeableObject(t[a])?d[a]=(function(e,t){if(!t.customMerge)return c;var a=t.customMerge(e);return"function"==typeof a?a:c})(a,i)(e[a],t[a],i):d[a]=l(t[a],i))}),d)}c.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,a){return c(e,a,t)},{})},t.exports=c},857440,(e,t,a)=>{var r=Object.create,i=Object.defineProperty,l=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,c=(e,t,a,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of n(t))o.call(e,s)||s===a||i(e,s,{get:()=>t[s],enumerable:!(r=l(t,s))||r.enumerable});return e},d=(e,t,a)=>(a=null!=e?r(s(e)):{},c(!t&&e&&e.__esModule?a:i(a,"default",{value:e,enumerable:!0}),e)),u={};((e,t)=>{for(var a in t)i(e,a,{get:t[a],enumerable:!0})})(u,{callPlayer:()=>A,getConfig:()=>k,getSDK:()=>_,isBlobUrl:()=>P,isMediaStream:()=>O,lazy:()=>g,omit:()=>M,parseEndTime:()=>C,parseStartTime:()=>y,queryString:()=>N,randomString:()=>w,supportsWebKitPresentationMode:()=>L}),t.exports=c(i({},"__esModule",{value:!0}),u);var h=d(e.r(743124)),m=d(e.r(157664)),f=d(e.r(126612));let g=e=>h.default.lazy(async()=>{let t=await e();return"function"==typeof t.default?t:t.default}),p=/[?&#](?:start|t)=([0-9hms]+)/,x=/[?&#]end=([0-9hms]+)/,v=/(\d+)(h|m|s)/g,j=/^\d+$/;function b(e,t){if(e instanceof Array)return;let a=e.match(t);if(a){let e=a[1];if(e.match(v)){var r=e;let t=0,a=v.exec(r);for(;null!==a;){let[,e,i]=a;"h"===i&&(t+=60*parseInt(e,10)*60),"m"===i&&(t+=60*parseInt(e,10)),"s"===i&&(t+=parseInt(e,10)),a=v.exec(r)}return t}if(j.test(e))return parseInt(e)}}function y(e){return b(e,p)}function C(e){return b(e,x)}function w(){return Math.random().toString(36).substr(2,5)}function N(e){return Object.keys(e).map(t=>"".concat(t,"=").concat(e[t])).join("&")}function S(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}let I={},_=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m.default,l=S(t);return l&&r(l)?Promise.resolve(l):new Promise((r,l)=>{if(I[e])return void I[e].push({resolve:r,reject:l});I[e]=[{resolve:r,reject:l}];let n=t=>{I[e].forEach(e=>e.resolve(t))};if(a){let e=window[a];window[a]=function(){e&&e(),n(S(t))}}i(e,r=>{r?(I[e].forEach(e=>e.reject(r)),I[e]=null):a||n(S(t))})})};function k(e,t){return(0,f.default)(t.config,e.config)}function M(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];let i=[].concat(...a),l={};for(let t of Object.keys(e))-1===i.indexOf(t)&&(l[t]=e[t]);return l}function A(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];if(!this.player||!this.player[e]){let t="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c – ");return this.player?this.player[e]||(t+="The method was not available"):t+="The player was not available",console.warn(t,"font-weight: bold",""),null}return this.player[e](...a)}function O(e){return"undefined"!=typeof window&&void 0!==window.MediaStream&&e instanceof window.MediaStream}function P(e){return/^blob:/.test(e)}function L(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode&&t}},610265,(e,t,a)=>{var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var a in t)r(e,a,{get:t[a],enumerable:!0})})(s,{AUDIO_EXTENSIONS:()=>w,DASH_EXTENSIONS:()=>I,FLV_EXTENSIONS:()=>_,HLS_EXTENSIONS:()=>S,MATCH_URL_DAILYMOTION:()=>j,MATCH_URL_FACEBOOK:()=>m,MATCH_URL_FACEBOOK_WATCH:()=>f,MATCH_URL_KALTURA:()=>C,MATCH_URL_MIXCLOUD:()=>b,MATCH_URL_MUX:()=>h,MATCH_URL_SOUNDCLOUD:()=>d,MATCH_URL_STREAMABLE:()=>g,MATCH_URL_TWITCH_CHANNEL:()=>v,MATCH_URL_TWITCH_VIDEO:()=>x,MATCH_URL_VIDYARD:()=>y,MATCH_URL_VIMEO:()=>u,MATCH_URL_WISTIA:()=>p,MATCH_URL_YOUTUBE:()=>c,VIDEO_EXTENSIONS:()=>N,canPlay:()=>M}),t.exports=((e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of l(t))n.call(e,o)||o===a||r(e,o,{get:()=>t[o],enumerable:!(s=i(t,o))||s.enumerable});return e})(r({},"__esModule",{value:!0}),s);var o=e.r(857440);let c=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,d=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,u=/vimeo\.com\/(?!progressive_redirect).+/,h=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,m=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,f=/^https?:\/\/fb\.watch\/.+$/,g=/streamable\.com\/([a-z0-9]+)$/,p=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,x=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,v=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,j=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,b=/mixcloud\.com\/([^/]+\/[^/]+)/,y=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,C=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,w=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,N=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,S=/\.(m3u8)($|\?)/i,I=/\.(mpd)($|\?)/i,_=/\.(flv)($|\?)/i,k=e=>{if(e instanceof Array){for(let t of e)if("string"==typeof t&&k(t)||k(t.src))return!0;return!1}return!!((0,o.isMediaStream)(e)||(0,o.isBlobUrl)(e))||w.test(e)||N.test(e)||S.test(e)||I.test(e)||_.test(e)},M={youtube:e=>e instanceof Array?e.every(e=>c.test(e)):c.test(e),soundcloud:e=>d.test(e)&&!w.test(e),vimeo:e=>u.test(e)&&!N.test(e)&&!S.test(e),mux:e=>h.test(e),facebook:e=>m.test(e)||f.test(e),streamable:e=>g.test(e),wistia:e=>p.test(e),twitch:e=>x.test(e)||v.test(e),dailymotion:e=>j.test(e),mixcloud:e=>b.test(e),vidyard:e=>y.test(e),kaltura:e=>C.test(e),file:k}},189044,e=>{"use strict";var t=e.i(509473),a=e.i(743124),r=e.i(403055);let i=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("div",{className:(0,r.cn)("shadow-2xs overflow-hidden rounded-lg border bg-white",i),ref:a,...l})});i.displayName="Card";let l=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 p-6",i),ref:a,...l})});l.displayName="CardHeader",a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("div",{className:(0,r.cn)("mb-4 flex h-8 w-8 items-center justify-center rounded-lg border bg-white [&>svg]:size-4",i),ref:a,...l})}).displayName="CardIcon";let n=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("h3",{className:(0,r.cn)("whitespace-nowrap font-semibold leading-none tracking-tight",i),ref:a,...l})});n.displayName="CardTitle";let s=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("p",{className:(0,r.cn)("text-muted-foreground text-sm",i),ref:a,...l})});s.displayName="CardDescription";let o=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("div",{className:(0,r.cn)("p-6 pt-0",i),ref:a,...l})});o.displayName="CardContent";let c=a.forwardRef((e,a)=>{let{className:i,...l}=e;return(0,t.jsx)("div",{className:(0,r.cn)(" flex items-center p-6 pt-0",i),ref:a,...l})});c.displayName="CardFooter",e.s(["Card",()=>i,"CardContent",()=>o,"CardDescription",()=>s,"CardFooter",()=>c,"CardHeader",()=>l,"CardTitle",()=>n])},35305,(e,t,a)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},561227,(e,t,a)=>{"use strict";var r=e.r(35305);function i(){}function l(){}l.resetWarningCache=i,t.exports=function(){function e(e,t,a,i,l,n){if(n!==r){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:i};return a.PropTypes=a,a}},304153,(e,t,a)=>{t.exports=e.r(561227)()},517889,e=>{"use strict";var t=e.i(509473),a=e.i(176248),r=e.i(686832),i=e.i(346970),l=e.i(358847),n=(0,l.createServerReference)("40dd4d2238a92f415d6f6abdd165dc917c2acf1c7a",l.callServer,void 0,l.findSourceMapURL,"deleteProjectAction"),s=e.i(211976);e.i(563948);var o=e.i(407562),c=e.i(53223),d=e.i(979865),u=e.i(120485);function h(){let[e,i]=m(),l=(0,d.useRouter)(),h=(0,d.usePathname)();return(0,t.jsx)(r.Modal,{onOpenChange:e=>!e&&i(null),open:!!e,children:(0,t.jsxs)("form",{action:async()=>{if(e)try{let t=await n(e.projectId);if(!0===t)i(null),(0,c.track)("ClickDeleteProject",{targetProjectId:e.projectId,projectName:e.projectName}),o.toast.success("Project deleted"),h.startsWith("/chat/projects/".concat(e.projectId))&&l.push("/chat/projects");else throw Error(t.error)}catch(e){(0,u.handleChatError)(e)||o.toast.error("Failed to delete project")}},children:[(0,t.jsxs)(r.ModalHeader,{children:[(0,t.jsx)(r.ModalTitle,{children:"Delete Project"}),(0,t.jsxs)(r.ModalDescription,{children:["Are you sure you want to delete this project? All chats will be removed from the project, but they won’t be deleted."," ",(0,t.jsx)("span",{className:"font-medium",children:"This action cannot be reversed."})]})]}),(0,t.jsxs)(r.ModalFooter,{children:[(0,t.jsx)(r.ModalClose,{asChild:!0,children:(0,t.jsx)(a.Button,{onClick:()=>i(null),size:"sm",variant:"secondary",children:"Cancel"})}),(0,t.jsx)(s.FormSpinnerButton,{"data-testid":"delete-project-button",size:"sm",variant:"destructive",children:"Delete"})]})]})})}function m(){let{data:e,mutate:t}=(0,i.default)("showDeleteProjectModal",null);return[e,t]}e.s(["default",()=>h,"useDeleteProjectModal",()=>m],517889)},644026,e=>{"use strict";var t=e.i(509473),a=e.i(176248),r=e.i(686832),i=e.i(346970),l=e.i(211976),n=e.i(763480),s=e.i(743124);e.i(563948);var o=e.i(407562),c=e.i(53223),d=e.i(79776),u=e.i(120485),h=e.i(979865),m=e.i(183673);function f(){let{projectId:e,projectName:i,setProject:f}=g(),{updateProjectName:p}=(0,m.useProjectName)(),[x,v]=(0,s.useState)(i||""),j=(0,h.useRouter)();return((0,s.useEffect)(()=>{v(i||"")},[i]),e)?(0,t.jsx)(r.Modal,{onOpenChange:e=>!e&&f(null),open:!0,children:(0,t.jsxs)("form",{action:async()=>{(0,c.track)("ClickRenameProject",{targetProjectId:e,oldProjectName:null!=i?i:"project-name-missing"});try{p(x);let t=await (0,d.renameProject)({projectId:e,name:x});if("success"in t)o.toast.success("Renamed project");else if(t.error)throw p(i||""),Error(t.error)}catch(e){(0,u.handleChatError)(e,j,"Failed to rename project")||o.toast.error("Failed to rename project")}await f(null)},"data-testid":"rename-project-form",children:[(0,t.jsxs)(r.ModalHeader,{children:[(0,t.jsx)(r.ModalTitle,{children:"Rename Project"}),(0,t.jsx)(n.Input,{autoFocus:!0,"data-testid":"rename-project-input",maxLength:100,onChange:e=>v(e.target.value),value:x})]}),(0,t.jsxs)(r.ModalFooter,{children:[(0,t.jsx)(r.ModalClose,{asChild:!0,children:(0,t.jsx)(a.Button,{onClick:()=>f(null),size:"sm",variant:"secondary",children:"Cancel"})}),(0,t.jsx)(l.FormSpinnerButton,{"data-testid":"save-rename-project",size:"sm",variant:"default",children:"Save"})]})]})}):null}function g(){let{data:e,mutate:t}=(0,i.default)("renameProjectModal",null);return{projectId:null==e?void 0:e.projectId,projectName:null==e?void 0:e.projectName,setProject:t}}e.s(["default",()=>f,"useRenameProjectModal",()=>g])},638541,e=>{"use strict";var t=e.i(753533),a=e.i(142219),r=e.i(490293);let i=(0,t.cacheResult)(null,()=>({isOpen:(0,r.atom)(!1),isLoaded:(0,r.atom)(!1)})),l=(0,t.cacheResult)(null,()=>({...i()}));function n(){let e=i();return{setIsOpen:t=>{a.store.set(e.isOpen,t),t&&a.store.set(e.isLoaded,!0)}}}e.s(["getCmdkActions",()=>n,"getCmdkAtoms",0,l])},448069,e=>{"use strict";let t=(0,e.i(121793).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["default",()=>t])},938884,e=>{"use strict";var t=e.i(448069);e.s(["GripVertical",()=>t.default])},257214,e=>{"use strict";let t=(0,e.i(121793).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["default",()=>t])},851994,456881,e=>{"use strict";var t=e.i(509473),a=e.i(686832),r=e.i(176248),i=e.i(346970);let l=(0,e.i(936096).withNewIcon)('<path d="M8.00342 8C8.00342 7.29275 8.28437 6.61448 8.78447 6.11438C9.28456 5.61428 9.96284 5.33333 10.6701 5.33333C11.3773 5.33333 12.0556 5.61428 12.5557 6.11438C13.0558 6.61448 13.3368 7.29275 13.3368 8C13.3368 8.70724 13.0558 9.38552 12.5557 9.88562C12.0556 10.3857 11.3773 10.6667 10.6701 10.6667C9.96284 10.6667 9.28456 10.3857 8.78447 9.88562C8.28437 9.38552 8.00342 8.70724 8.00342 8Z" fill="#1ABCFE"/>\n  <path d="M2.66992 13.3333C2.66992 12.6261 2.95087 11.9478 3.45097 11.4477C3.95107 10.9476 4.62934 10.6667 5.33659 10.6667H8.00326V13.3333C8.00326 14.0406 7.7223 14.7189 7.22221 15.2189C6.72211 15.719 6.04383 16 5.33659 16C4.62934 16 3.95107 15.719 3.45097 15.2189C2.95087 14.7189 2.66992 14.0406 2.66992 13.3333Z" fill="#0ACF83"/>\n  <path d="M8.00342 0V5.33333H10.6701C11.3773 5.33333 12.0556 5.05238 12.5557 4.55228C13.0558 4.05219 13.3368 3.37391 13.3368 2.66667C13.3368 1.95942 13.0558 1.28115 12.5557 0.781049C12.0556 0.280952 11.3773 0 10.6701 0L8.00342 0Z" fill="#FF7262"/>\n  <path d="M2.67017 2.66667C2.67017 3.37391 2.95112 4.05219 3.45121 4.55228C3.95131 5.05238 4.62959 5.33333 5.33683 5.33333H8.0035V0H5.33683C4.62959 0 3.95131 0.280952 3.45121 0.781049C2.95112 1.28115 2.67017 1.95942 2.67017 2.66667Z" fill="#F24E1E"/>\n  <path d="M2.66992 8C2.66992 8.70724 2.95087 9.38552 3.45097 9.88562C3.95107 10.3857 4.62934 10.6667 5.33659 10.6667H8.00326V5.33333H5.33659C4.62934 5.33333 3.95107 5.61428 3.45097 6.11438C2.95087 6.61448 2.66992 7.29275 2.66992 8Z" fill="#A259FF"/>');e.s(["LogoFigma",0,l],456881);var n=e.i(297239),s=e.i(53223),o=e.i(743124),c=e.i(979865);function d(){let e=(0,n.useT)(),{setSignInWithFigmaModalOpen:i,oauthUrlSearchParams:d,signInWithFigmaModalOpen:h}=u(),m=(0,c.useRouter)();(0,o.useEffect)(()=>{h&&(0,s.track)("FigmaAuthModalOpen")},[h]);let f=e=>{(0,s.track)("FigmaAuthModalClose",{reason:e}),i(null)},g=(0,o.useCallback)(async()=>{let e=window.location.pathname+window.location.search+"?".concat(new URLSearchParams(d).toString()),t=await fetch("/chat/api/integrations/figma/get-oauth-url?returnPath=".concat(encodeURIComponent(e))).then(e=>e.json()).then(e=>e.url);m.push(t)},[d]);return h?(0,t.jsx)(a.Modal,{onOpenChange:e=>!e&&f("cancel"),open:!!h,children:(0,t.jsxs)("div",{className:"grid gap-6",children:[(0,t.jsx)(a.ModalHeader,{className:"flex justify-start p-5",children:(0,t.jsxs)("div",{className:"flex w-full flex-col items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-v0-background-200 border-v0-gray-300 flex items-center gap-2 rounded-lg p-2",children:(0,t.jsx)("div",{className:"rounded-lg border bg-v0-white p-2",children:(0,t.jsx)(l,{className:"text-v0-gray-900 h-6 w-6"})})}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-1.5",children:[(0,t.jsx)(a.ModalTitle,{className:"text-xl font-semibold",children:e("figmaIntegration.signInWithFigma")}),(0,t.jsx)(a.ModalDescription,{className:"text-sm text-zinc-500",children:e("figmaIntegration.signInDescription")})]})]})}),(0,t.jsx)(a.ModalFooter,{className:"border-v0-gray-300 bg-v0-background-200 border-t p-4!",children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-end gap-4",children:[(0,t.jsx)(a.ModalClose,{asChild:!0,children:(0,t.jsx)(r.Button,{onClick:()=>f("cancel"),size:"sm",variant:"secondary",children:e("figmaIntegration.cancel")})}),(0,t.jsx)(r.Button,{onClick:g,size:"sm",variant:"default",autoFocus:!0,children:e("figmaIntegration.signIn")})]})})]})}):null}function u(){let{data:e,mutate:t}=(0,i.default)("signInWithFigmaModal",null);return{signInWithFigmaModalOpen:null==e?void 0:e.open,oauthUrlSearchParams:null==e?void 0:e.oauthUrlSearchParams,setSignInWithFigmaModalOpen:t}}e.s(["default",()=>d,"useSignInWithFigmaModal",()=>u],851994)},179395,e=>{"use strict";var t=e.i(257214);e.s(["AlertTriangle",()=>t.default])},391236,e=>{"use strict";var t=e.i(743124),a=e.i(242759),r=e.i(346970),i=e.i(851994);let l=/^https:\/\/www\.figma\.com\/(?:file|design)\/[a-zA-Z0-9]+(?:\/[^\/]+)?\/?\?node-id=[0-9]+-[0-9]+(?:&node-type=(?:frame|component|section))?(?:&t=[a-zA-Z0-9-]+)?(?:&m=dev)?(?:&t=[a-zA-Z0-9-]+)?$/,n=/^https:\/\/www\.figma\.com(?:\/.*)?$/;var s=e.i(142219),o=e.i(418929);function c(){let e=(0,a.useFlags)(),{setSignInWithFigmaModalOpen:c}=(0,i.useSignInWithFigmaModal)(),{data:d,isLoading:u}=(0,r.default)("integrations:figma",{fallbackData:{isSignedIn:!1,figmaOauthUrl:""}}),h=(0,t.useMemo)(()=>e&&(void 0===e.fi||e.fi),[e]),[m,f]=(0,t.useState)({imageBase64:null,originalUrl:null,fileName:null,isScreenshotLoading:!1,isContextLoading:!1,error:null,nodeContext:null}),g=(0,t.useCallback)(e=>h&&!u&&l.test(e),[h,u]),p=(0,t.useCallback)(e=>h&&!u&&n.test(e),[h,u]),{atoms:x}=(0,o.useCurrentChatPrompt)(),v=(0,t.useCallback)(async e=>{let t=e||s.store.get(x.contentText)||"";if(!t)return{success:!1,reason:"invalid_url"};if(!g(t))return{success:!1,reason:t.includes("figma.com")?"missing_node":"invalid_url"};if(f(e=>({...e,originalUrl:t,isScreenshotLoading:!0})),!(null==d?void 0:d.isSignedIn))return c({open:!0}),f(e=>({...e,isScreenshotLoading:!1})),{success:!1,needsAuth:!0};try{let e=await fetch("/chat/api/integrations/figma/get-screenshot?url=".concat(encodeURIComponent(t)));if(401===e.status)return c({open:!0}),f(e=>({...e,imageBase64:null,originalUrl:null,fileName:null,isScreenshotLoading:!1,isContextLoading:!1,error:"Authentication required",nodeContext:null})),{success:!1,needsAuth:!0};if(!e.ok){let t=await e.json();if(400===e.status&&t.error.includes("too large"))return f(e=>({...e,isScreenshotLoading:!1,error:"Figma node too large"})),{success:!1,reason:"node_too_large"};throw Error(t.error||"Failed to fetch Figma image")}let a=await e.json(),r=new URL(t).pathname.split("/").pop()||"Figma Design",i={success:!0,data:{base64:a.base64,originalUrl:a.originalUrl,fileName:r}};return f(e=>({...e,imageBase64:a.base64,originalUrl:a.originalUrl,fileName:r,isScreenshotLoading:!1,error:null,nodeContext:JSON.stringify(a,null,0),imageHeight:a.height})),i}catch(t){console.error("Error fetching Figma image:",t);let e=t instanceof Error?t.message:"Failed to fetch image";return f(t=>({...t,imageBase64:null,originalUrl:null,fileName:null,isScreenshotLoading:!1,error:e,nodeContext:null})),{success:!1,error:e}}},[g,null==d?void 0:d.isSignedIn,c]),j=(0,t.useCallback)(async e=>{try{f(e=>({...e,isContextLoading:!0,error:null}));let t=await fetch("/chat/api/integrations/figma/context?url=".concat(encodeURIComponent(e))),a=await t.json();return f(e=>({...e,isContextLoading:!1,nodeContext:JSON.stringify(a,null,0)})),a}catch(t){let e=t instanceof Error?t.message:"Failed to fetch context";throw f(t=>({...t,isContextLoading:!1,error:e})),t}},[]);return(0,t.useMemo)(()=>{var e;return{...m,isLoading:m.isScreenshotLoading||m.isContextLoading||u,isFigmaLoading:u,handleFigmaUrl:v,isFigmaNodeUrl:g,isSignedIn:!u&&null!=(e=null==d?void 0:d.isSignedIn)&&e,userData:d,getNodeContext:j,isFigmaUrl:p}},[m,v,g,d,j,p,u])}e.s(["useFigmaIntegration",()=>c],391236)},492526,e=>{"use strict";var t=e.i(509473),a=e.i(743124),r=e.i(686832),i=e.i(176248),l=e.i(763480),n=e.i(211976),s=e.i(456881),o=e.i(660348),c=e.i(179395),d=e.i(992879),u=e.i(529693),h=e.i(716360),m=e.i(403055),f=e.i(53223),g=e.i(297239),p=e.i(391236),x=e.i(851994),v=e.i(346970),j=e.i(794593),b=e.i(502398),y=e.i(107296);function C(e){let{inputRef:a,inputValue:s,setInputValue:c,urlError:f,setUrlError:p,handleImport:x,handleClose:v,isLoading:j}=e,b=(0,g.useT)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.ModalHeader,{className:"flex justify-start p-5",children:(0,t.jsxs)("div",{className:"flex w-full flex-col items-start gap-2",children:[(0,t.jsxs)("div",{className:"bg-muted/50 relative h-[180px] w-full rounded-md",children:[(0,t.jsx)(d.default,{src:"/chat-static/figma-integration-light.svg",alt:"",className:"h-full w-full rounded-md object-cover dark:hidden",fill:!0,priority:!0}),(0,t.jsx)(d.default,{src:"/chat-static/figma-integration-dark.svg",alt:"",className:"hidden h-full w-full rounded-md object-cover dark:block",fill:!0,priority:!0})]}),(0,t.jsxs)("div",{className:"flex w-full flex-col items-start gap-2",children:[(0,t.jsx)(r.ModalTitle,{className:"text-xl font-semibold",children:b("figmaIntegration.importFromFigma")}),(0,t.jsxs)("form",{className:"flex w-full flex-col space-y-3",onSubmit:e=>{e.preventDefault(),x()},children:[(0,t.jsx)("div",{className:"text-left text-sm text-v0-gray-1000",children:(0,t.jsx)(r.ModalDescription,{children:b("figmaIntegration.importFigmaDescription")})}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(l.Input,{ref:a,type:"url",size:"sm",placeholder:b("figmaIntegration.enterFigmaUrl"),className:(0,m.cn)("bg-subtle w-full",f&&"border-v0-red-700"),value:s,onChange:e=>{c(e.target.value),f&&p(null)}}),(0,t.jsx)(h.AnimatePresence,{mode:"sync",children:f&&(0,t.jsx)(u.motion.div,{initial:{height:0,opacity:0,y:-8},animate:{height:"auto",opacity:1,y:0},exit:{height:0,opacity:0,y:-8},transition:{duration:.15,ease:"easeOut"},children:(0,t.jsxs)("span",{className:"flex items-center gap-2 whitespace-nowrap text-v0-red-700",children:[(0,t.jsx)(o.Stop,{className:"h-4 w-4 shrink-0"}),(0,t.jsx)("span",{className:"truncate text-sm",children:f})]})})})]})]})]})]})}),(0,t.jsx)(r.ModalFooter,{className:"border-v0-gray-300 bg-v0-background-200 border-t p-4!",children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[(0,t.jsx)(r.ModalClose,{asChild:!0,disabled:j,children:(0,t.jsx)(i.Button,{onClick:v,size:"sm",variant:"secondary",disabled:j,children:b("figmaIntegration.cancel")})}),(0,t.jsx)(n.SpinnerButton,{onClick:x,size:"sm",pending:j,autoFocus:!0,children:b("figmaIntegration.next")})]})})]})}function w(e){let{color:a}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-1 rounded-md border p-1",children:[(0,t.jsx)("div",{className:"h-4 w-4 rounded-sm border",style:{backgroundColor:a.hex}}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("span",{className:"text-v0-gray-900 text-xs",children:a.hex.toLowerCase()})})]})}function N(e){let{imageBase64:a,originalFigmaUrl:l,nodeContext:o,handleImport:u,handleClose:h,isLoading:m,imageHeight:f}=e,p=(0,g.useT)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"max-h-[calc(100vh-8rem)] overflow-y-auto",children:(0,t.jsx)(r.ModalHeader,{className:"flex w-full flex-col p-3 md:p-5",children:(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3 md:gap-4",children:[(0,t.jsx)(r.ModalTitle,{className:"text-left text-lg font-semibold md:text-xl",children:p("figmaIntegration.heresWhatWellImport")}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,t.jsx)("h3",{className:"text-left text-sm font-medium md:text-base",children:p("figmaIntegration.visualContext")}),f&&f/2>982&&(0,t.jsxs)(y.Alert,{children:[(0,t.jsx)(c.AlertTriangle,{className:"h-4 w-4"}),(0,t.jsx)(y.AlertDescription,{children:p("figmaIntegration.heightWarning")})]}),(0,t.jsx)("div",{className:"bg-muted/50 relative h-[200px] w-full rounded-md border md:h-[400px]",children:a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.default,{src:a,alt:"Figma design preview",className:"rounded-md object-cover object-top",fill:!0,sizes:"100vw",priority:!0}),(0,t.jsx)("div",{className:"absolute bottom-2 right-2 z-10 md:bottom-3 md:right-3",children:(0,t.jsx)(b.Link,{href:l,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(j.Badge,{className:"max-w-[200px] cursor-pointer truncate text-xs md:text-sm",prefix:(0,t.jsx)(s.LogoFigma,{}),children:(0,t.jsx)("span",{className:"truncate",children:o.frameName||p("figmaIntegration.openInFigma")})})})})]})}),(0,t.jsx)("div",{className:"mt-3 flex flex-col space-y-3",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:gap-6",children:[o.nodes.designTokens.length>0&&(0,t.jsxs)("div",{className:"mb-6 flex flex-1 flex-col gap-2 md:mb-0",children:[(0,t.jsx)("h3",{className:"text-left text-sm font-medium md:text-base",children:p("figmaIntegration.designTokens")}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:o.nodes.designTokens.map((e,a)=>(0,t.jsx)(w,{color:e},e.hex||a))})]}),o.nodes.colors.length>0&&(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,t.jsx)("h3",{className:"text-left text-sm font-medium md:text-base",children:p("figmaIntegration.colors")}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:o.nodes.colors.map((e,a)=>(0,t.jsx)(w,{color:e},e.hex||a))})]})]})})]})]})})}),(0,t.jsx)(r.ModalFooter,{className:"border-v0-gray-300 bg-v0-background-200 sticky bottom-0 border-t p-3! md:p-4!",children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[(0,t.jsx)(r.ModalClose,{asChild:!0,disabled:m,children:(0,t.jsx)(i.Button,{onClick:h,size:"sm",variant:"secondary",disabled:m,children:p("figmaIntegration.cancel")})}),(0,t.jsx)(n.SpinnerButton,{onClick:u,size:"sm",pending:m,autoFocus:!0,children:p("figmaIntegration.confirm")})]})})]})}function S(){let e=(0,g.useT)(),{importFigmaModalOpen:i,setImportFigmaModalOpen:l}=I(),{setSignInWithFigmaModalOpen:n}=(0,x.useSignInWithFigmaModal)(),[s,o]=(0,a.useState)("url"),[c,d]=(0,a.useState)(null),[u,h]=a.useState(null),v=a.useRef(null),[j,b]=a.useState(""),[y,w]=a.useState(""),S=(0,p.useFigmaIntegration)();(0,a.useEffect)(()=>{(null==i?void 0:i.open)&&(S.isSignedIn||(l(null),n({open:!0})))},[S.isSignedIn,null==i?void 0:i.open,l,n]);let _=(0,a.useCallback)(()=>{l(null),h(null),b(""),o("url"),v.current&&(v.current.value="")},[l]),k=(0,a.useCallback)(()=>{_(),(0,f.track)("FigmaModalClose")},[_]),M=async()=>{if(!j){let t=e("figmaIntegration.enterValidUrl");h(t),(0,f.track)("FigmaUrlSubmit",{url:"",success:!1,error:t});return}try{await A(j)}catch(e){(0,f.track)("FigmaUrlSubmit",{url:j,success:!1,error:e instanceof Error?e.message:"Unknown error"})}},A=(0,a.useCallback)(async t=>{let a,r=!1;if("url"===s)if(S.isFigmaNodeUrl(t))try{let r=await S.getNodeContext(t),i=await S.handleFigmaUrl(t);i.success?(d(r),w(i.data.base64),h(null),o("context")):(a="node_too_large"===i.reason?e("figmaIntegration.nodeTooLarge"):i.error||e("figmaIntegration.invalidUrl"),h(a))}catch(e){a=e instanceof Error?e.message:"Error loading Figma content",h("Error loading Figma content")}else S.isFigmaUrl(t)&&["design","file"].some(e=>t.includes(e))?h(a=e("figmaIntegration.missingNodeInUrl")):S.isFigmaUrl(t)&&t.includes("/proto/")?h(a=e("figmaIntegration.prototypeUrlNotSupported")):h(a=e("figmaIntegration.invalidUrl"));else(await S.handleFigmaUrl(t)).success&&(null==i?void 0:i.onImport)?(k(),await i.onImport(t),r=!0):h(a="Failed to import Figma URL");(0,f.track)("FigmaUrlSubmit",{url:t,success:r,error:a})},[k,i,S,s,e]);return i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Modal,{onClose:k,onOpenChange:S.isLoading?void 0:_,open:!!i,className:(0,m.cn)("w-full","url"===s?"max-w-xl":"md:w-[800px]!"),children:(0,t.jsx)("div",{className:"flex w-full flex-col",children:c?"url"===s?(0,t.jsx)(C,{inputRef:v,inputValue:j,setInputValue:b,urlError:u,setUrlError:h,handleImport:M,handleClose:k,isLoading:S.isLoading}):(0,t.jsx)(N,{imageBase64:y,originalFigmaUrl:j,nodeContext:c,handleImport:M,handleClose:k,isLoading:S.isLoading,imageHeight:S.imageHeight}):(0,t.jsx)(C,{inputRef:v,inputValue:j,setInputValue:b,urlError:u,setUrlError:h,handleImport:M,handleClose:k,isLoading:S.isLoading})})}),(0,t.jsx)(x.default,{})]}):null}function I(){let{data:e,mutate:t}=(0,v.default)("useImportFromFigmaModal",null);return{importFigmaModalOpen:e,setImportFigmaModalOpen:t,figmaContext:null==e?void 0:e.figmaContext}}e.s(["ImportFromFigmaModal",()=>S,"useImportFromFigmaModal",()=>I])},715326,e=>{"use strict";var t=e.i(509473),a=e.i(743124),r=e.i(162061),i=e.i(176248),l=e.i(189044),n=e.i(827728),s=e.i(644471),o=e.i(32170),c=e.i(209819),d=e.i(92479),u=e.i(745197),h=e.i(449381),m=e.i(183673),f=e.i(376346),g=e.i(304649),p=e.i(529693),x=e.i(37129),v=e.i(580643),j=e.i(244078),b=e.i(499030),y=e.i(658484);e.i(563948);var C=e.i(407562);e.s([],622375),e.i(622375);var w=e.i(817138);let N=(0,a.createContext)(null);var S=e.i(367356),I=e.i(62391),_=e.i(804214);let k=(0,a.forwardRef)(function(e,r){let{children:i,as:l="ul",axis:n="y",onReorder:s,values:o,...c}=e,d=(0,S.useConstant)(()=>p.motion[l]),u=[],h=(0,a.useRef)(!1);return(0,w.invariant)(!!o,"Reorder.Group must be provided a values prop"),(0,a.useEffect)(()=>{h.current=!1}),(0,t.jsx)(d,{...c,ref:r,ignoreStrict:!0,children:(0,t.jsx)(N.Provider,{value:{axis:n,registerItem:(e,t)=>{let a=u.findIndex(t=>e===t.value);-1!==a?u[a].layout=t[n]:u.push({value:e,layout:t[n]}),u.sort(A)},updateOrder:(e,t,a)=>{if(h.current)return;let r=function(e,t,a,r){if(!r)return e;let i=e.findIndex(e=>e.value===t);if(-1===i)return e;let l=r>0?1:-1,n=e[i+l];if(!n)return e;let s=e[i],o=n.layout,c=(0,I.mixNumber)(o.min,o.max,.5);return 1===l&&s.layout.max+a>c||-1===l&&s.layout.min+a<c?(0,_.moveItem)(e,i,i+l):e}(u,e,t,a);u!==r&&(h.current=!0,s(r.map(M).filter(e=>-1!==o.indexOf(e))))}},children:i})})});function M(e){return e.value}function A(e,t){return e.layout.min-t.layout.min}var O=e.i(504462),P=e.i(647217),L=e.i(507191),T=e.i(859040),E=e.i(616203);function F(e,t){let a=(0,P.useMotionValue)(t()),r=()=>a.set(t());return r(),(0,E.useIsomorphicLayoutEffect)(()=>{let t=()=>T.frame.preRender(r,!1,!0),a=e.map(e=>e.on("change",t));return()=>{a.forEach(e=>e()),(0,T.cancelFrame)(r)}}),a}var R=e.i(74278);function U(e,t){let a=(0,S.useConstant)(()=>[]);return F(e,()=>{a.length=0;let r=e.length;for(let t=0;t<r;t++)a[t]=e[t].get();return t(a)})}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,O.isMotionValue)(e)?e:(0,P.useMotionValue)(t)}let H=(0,a.forwardRef)(function(e,r){let{children:i,style:l={},value:n,as:s="li",onDrag:o,layout:c=!0,...d}=e,u=(0,S.useConstant)(()=>p.motion[s]),h=(0,a.useContext)(N),m={x:D(l.x),y:D(l.y)},f=function(e,t,a,r){if("function"==typeof e){R.collectMotionValues.current=[],e();let t=F(R.collectMotionValues.current,e);return R.collectMotionValues.current=void 0,t}let i="function"==typeof t?t:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let r=!Array.isArray(t[0]),i=r?0:-1,l=t[0+i],n=t[1+i],s=t[2+i],o=t[3+i],c=(0,L.interpolate)(n,s,o);return r?c(l):c}(t,void 0,void 0);return Array.isArray(e)?U(e,i):U([e],e=>{let[t]=e;return i(t)})}([m.x,m.y],e=>{let[t,a]=e;return t||a?1:"unset"});(0,w.invariant)(!!h,"Reorder.Item must be a child of Reorder.Group");let{axis:g,registerItem:x,updateOrder:v}=h;return(0,t.jsx)(u,{drag:g,...d,dragSnapToOrigin:!0,style:{...l,x:m.x,y:m.y,zIndex:f},layout:c,onDrag:(e,t)=>{let{velocity:a}=t;a[g]&&v(n,m[g].get(),a[g]),o&&o(e,t)},onLayoutMeasure:e=>x(n,e),ref:r,ignoreStrict:!0,children:i})});e.s(["Group",()=>k,"Item",()=>H],221663);var B=e.i(221663),B=B;class z{subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,t){this.componentControls.forEach(a=>{a.start(e.nativeEvent||e,t)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}constructor(){this.componentControls=new Set}}let V=()=>new z;var W=e.i(938884),$=e.i(667660),Z=e.i(654225);let G=(0,a.createContext)(void 0);function J(e){let{initialState:a,isDragging:r,setIsDragging:i,children:l}=e,n=(0,v.useMultiSelect)(a);return(0,t.jsx)(G.Provider,{value:{multiSelect:n,isDragging:r,setIsDragging:i},children:l})}function X(){let e=(0,a.useContext)(G);if(void 0===e)throw Error("useStatePanelContext must be used within a StatePanelProvider");return e}function q(e){let{children:a}=e;return(0,t.jsx)("h4",{className:"max-w-full truncate text-sm text-v0-gray-900",title:"string"==typeof a?a:void 0,children:a})}function K(e){let{children:r,className:i}=e,l=null===r?"null":void 0===r?"undefined":"string"==typeof r?r||"' '":JSON.stringify(r,null,2),n=(0,a.useRef)(l),s=(0,x.useAnimation)();return(0,a.useEffect)(()=>{(async()=>{l!==n.current&&(n.current=l,await s.start({opacity:1,transition:{duration:.05}}),await s.start({opacity:0,transition:{delay:.7,duration:2}}))})()},[r,s,l]),(0,t.jsxs)("button",{className:(0,g.cn)("relative max-w-[66.6%] truncate font-medium text-v0-black hover:underline",i),onClick:async()=>{await navigator.clipboard.writeText(l),C.toast.success("Copied to clipboard")},title:"' '"===l?"empty string":l,children:[(0,t.jsx)(p.motion.p,{animate:s,className:"absolute inset-0 -z-10 bg-teal-500/50",initial:{opacity:0}}),l]})}function Y(e){let{label:a,children:r,className:i,valueClass:l}=e;return(0,t.jsxs)("div",{className:(0,g.cn)("flex w-full min-w-0 items-center gap-3",i),children:[(0,t.jsx)(q,{children:a}),(0,t.jsx)("div",{className:"border-v0-alpha-400 h-px flex-1 border-t border-dashed"}),(0,t.jsx)(K,{className:l,children:r})]})}function Q(e){let{title:r,hook:i,children:l}=e,{multiSelect:{toggle:n},isDragging:s,setIsDragging:o}=X(),c=(0,S.useConstant)(V),[d,u]=(0,a.useState)(s),h=(0,a.useMemo)(()=>s||d,[s,d]);return(0,a.useEffect)(()=>{s?u(!0):setTimeout(()=>u(s),500)},[s]),(0,t.jsx)(B.Item,{className:(0,g.cn)("-ml-2 w-full",!h&&"scale-100!"),dragControls:c,dragListener:!1,onDragEnd:()=>o(!1),onDragStart:()=>o(!0),value:i,children:(0,t.jsxs)(j.Item,{className:"flex flex-col gap-2",value:i,children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"group cursor-move p-2",onPointerDown:e=>{o(!0),c.start(e)},children:(0,t.jsx)("div",{className:"rounded-sm py-0.5 text-v0-gray-500 transition-colors group-hover:bg-v0-gray-300 group-hover:text-v0-black",children:(0,t.jsx)(W.GripVertical,{size:12})})}),(0,t.jsx)(j.Header,{asChild:!0,children:(0,t.jsx)(j.Trigger,{asChild:!0,className:"group",onClick:()=>{u(!1),n(i)},children:(0,t.jsx)("button",{children:(0,t.jsxs)("h3",{className:"flex select-none items-center gap-1.5",children:[(0,t.jsx)("div",{className:"font-medium",children:r}),(0,t.jsx)("div",{className:"bg-v0-background-200 rounded-sm border px-0.5 font-mono text-xs",children:i}),(0,t.jsx)("div",{className:"transition-all group-data-[state=open]:rotate-90",children:(0,t.jsx)(b.ChevronRight,{size:12})})]})})})})]}),(0,t.jsx)(j.Content,{className:"data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up overflow-hidden data-[state=open]:mb-3",children:(0,t.jsx)("div",{className:"ml-[13px] flex flex-col gap-1 border-l pl-4 transition-all ",children:l})})]})})}function ee(e){let{initialState:i,initialOrder:l}=e,[n,s]=(0,a.useState)(!1),[o,c]=(0,a.useState)(l),d=(0,a.useCallback)(e=>{c(e),r.default.set("ADMIN_PANEL_ORDER",JSON.stringify(e),{expires:7})},[]);return(0,a.useEffect)(()=>{document.body.style.userSelect=n?"none":""},[n]),(0,t.jsx)(J,{initialState:i,isDragging:n,setIsDragging:s,children:(0,t.jsx)(B.Group,{animate:!1,axis:"y",layoutScroll:!0,onReorder:d,values:o,children:(0,t.jsx)(et,{order:o})})})}function et(e){var a,i,l,n,s,g,p;let{order:x}=e,{multiSelect:{values:v}}=X(),{chatId:b}=(0,d.useChatId)(),{chatPrivacy:C}=(0,c.useChatPrivacy)(),w=(0,d.useChatState)(),N=(0,c.useChatMetadata)(),S=(0,o.useUser)(),[I]=(0,u.useRateLimit)(),_=(0,h.useActiveBlockState)(),k=(0,h.useActiveBlockView)(),{projectId:M}=(0,m.useProjectId)(),A=(0,m.useProjectsForUser)(),O=(0,$.useActiveScope)(),P=(0,Z.localDraftController)(b||"_new-chat_",!b).getLocalDraft(),L={misc:(0,t.jsxs)(Q,{hook:"misc",title:"Misc.",children:[(0,t.jsx)(Y,{label:"chatId",children:b}),(0,t.jsx)(Y,{label:"blockView",children:k}),(0,t.jsx)(Y,{label:"selectedProjectId",children:A.selectedProjectId}),(0,t.jsx)(Y,{label:"projectId",children:M}),(0,t.jsx)(Y,{label:"projects.length",children:A.projects.length})]},"misc"),usePromptDraft:(0,t.jsx)(Q,{hook:"usePromptDraft",title:"Draft",children:(0,t.jsx)(Y,{label:"updatedAt",children:P.updatedAt})},"usePromptDraft"),useChatState:(0,t.jsxs)(Q,{hook:"useChatState",title:"State",children:[(0,t.jsx)(Y,{label:"messages.length",children:w.messages.length}),(0,t.jsx)(Y,{label:"isLoading",children:w.isLoading}),(0,t.jsx)(Y,{label:"isContinuing",children:w.isContinuing}),(0,t.jsx)(Y,{label:"isStreaming",children:w.isStreaming}),(0,t.jsx)(Y,{label:"isAuthor",children:w.isAuthor}),(0,t.jsx)(Y,{label:"prefillOptions.keys.length",children:w.prefillOptions?Object.keys(w.prefillOptions).length:0}),(0,t.jsx)(Y,{label:"chatId",children:w.chatId})]},"useChatState"),useChatMetadata:(0,t.jsxs)(Q,{hook:"useChatMetadata",title:"Meta",children:[(0,t.jsx)(Y,{label:"project.vercelProjectId",children:null==(a=N.project)?void 0:a.vercelProjectId}),(0,t.jsx)(Y,{label:"title",children:N.title}),(0,t.jsx)(Y,{label:"isNew",children:N.isNew}),(0,t.jsx)(Y,{label:"authorId",children:N.authorId})]},"useChatMetadata"),useUser:(0,t.jsxs)(Q,{hook:"useUser",title:"User",children:[(0,t.jsx)(Y,{label:"expectUser",children:S.expectUser}),(0,t.jsx)(Y,{label:"id",children:null==(i=S.user)?void 0:i.id}),(0,t.jsx)(Y,{label:"isAdminMode",children:null==(l=S.user)?void 0:l.isAdminMode}),(0,t.jsx)(Y,{label:"isVercelian",children:null==(n=S.user)?void 0:n.isVercelian})]},"useUser"),useRateLimit:(0,t.jsxs)(Q,{hook:"useRateLimit",title:"Rate",children:[(0,t.jsx)(Y,{label:"remaining",children:null==I?void 0:I.remaining}),(0,t.jsx)(Y,{label:"reset",children:null==I?void 0:I.reset}),(0,t.jsx)(Y,{label:"limit",children:null==I?void 0:I.limit})]},"useRateLimit"),useChatPrivacy:(0,t.jsx)(Q,{hook:"useChatPrivacy",title:"Privacy",children:(0,t.jsx)(Y,{label:"chatPrivacy",children:C})},"useChatPrivacy"),useActiveBlockState:(0,t.jsxs)(Q,{hook:"useActiveBlockState",title:"Block State",children:[(0,t.jsx)(Y,{label:"initial",children:null==_?void 0:_.initial}),(0,t.jsx)(Y,{label:"fullscreenOnLoad",children:null==_?void 0:_.fullscreenOnLoad}),(0,t.jsx)(Y,{label:"id",children:null==_?void 0:_.id}),(0,t.jsx)(Y,{label:"meta.type",children:null==_?void 0:_.meta.type}),(0,t.jsx)(Y,{label:"meta.file",children:null==_?void 0:_.meta.file}),(0,t.jsx)(Y,{label:"meta.project",children:null==_?void 0:_.meta.project}),(0,t.jsx)(Y,{label:"type",children:null==_?void 0:_.type}),(0,t.jsx)(Y,{label:"messageId",children:null==_?void 0:_.messageId}),(0,t.jsx)(Y,{label:"source",children:null==_?void 0:_.source}),(0,t.jsx)(Y,{label:"language",children:null==_?void 0:_.language}),(0,t.jsx)(Y,{label:"closed",children:null==_?void 0:_.closed}),(0,t.jsx)(Y,{label:"subdomain",children:null==_?void 0:_.subdomain}),(0,t.jsx)(Y,{label:"hasSourceBeenEdited",children:null==_?void 0:_.hasSourceBeenEdited}),(0,t.jsx)(Y,{label:"templateCanonId",children:null==_?void 0:_.templateCanonId}),(0,t.jsx)(Y,{label:"templateVersionId",children:null==_?void 0:_.templateVersionId}),(0,t.jsx)(Y,{label:"forkedFromBlockId",children:null==_?void 0:_.forkedFromBlockId})]},"useActiveBlockState"),useActiveScope:(0,t.jsxs)(Q,{hook:"useActiveScope",title:"Active Scope",children:[(0,t.jsx)(Y,{label:"activeScope.name",children:null==(s=O.activeScope)?void 0:s.name}),(0,t.jsx)(Y,{label:"activeScopeSlug",children:O.activeScopeSlug}),(0,t.jsx)(Y,{label:"isActiveScopeReady",children:O.isActiveScopeReady}),(0,t.jsx)(Y,{label:"isTeam",children:O.isTeam}),(0,t.jsx)(Y,{label:"scopes.length",children:null==(g=O.scopes)?void 0:g.length}),(0,t.jsx)(Y,{label:"user.name",children:null==(p=O.user)?void 0:p.name})]},"useActiveScope")};return(0,t.jsxs)(j.Root,{className:"flex flex-col items-stretch gap-4 text-sm",onValueChange:e=>{r.default.set("ADMIN_PANEL_STATE",JSON.stringify(e),{expires:7})},type:"multiple",value:v,children:[x.map(e=>L[e]),(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("h3",{className:"flex select-none items-center gap-1.5 font-medium",children:[(0,t.jsx)(y.Code,{size:12}),"Raw JSON"]}),(0,t.jsx)(f.Card,{children:(0,t.jsx)("pre",{className:"max-h-72 overflow-auto p-2 font-mono text-xs",children:JSON.stringify({chatId:b,state:w,chatPrivacy:C,meta:N,user:S,rate:I,blockState:_,blockView:k,projectId:M,projects:A,activeScope:O},null,2)})})]})]})}var ea=e.i(572175),er=e.i(801525),ei=e.i(868275),el="__vtcr",en=1,es=class{onChange(e){return this.changeHandlers.add(e),()=>this.changeHandlers.delete(e)}emitChange(){for(let e of this.changeHandlers)e()}register(e){this.commands.includes(e)||(this.commands.push(e),this.emitChange())}unregister(e){let t=this.commands.indexOf(e);-1!==t&&(this.commands.splice(t,1),this.emitChange())}constructor(){(0,ei._)(this,"commands",void 0),(0,ei._)(this,"changeHandlers",void 0),this.commands=[],this.changeHandlers=new Set}},eo=()=>{let e="u">typeof window&&(window.top||window);if(e){let t=e[el];return t||(t=new es,e[el]=t),t}};eo();var ec=class{get label(){return this._label}set label(e){this._label!==e&&(this._label=e,this.emitChange())}get badge(){return this._badge}set badge(e){this._badge!==e&&(this._badge=e,this.emitChange())}get badgeColor(){return this._badgeColor}set badgeColor(e){this._badgeColor!==e&&(this._badgeColor=e,this.emitChange())}get aliases(){return this._aliases}set aliases(e){((e,t)=>{if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let a=e.length;a--;)if(e[a]!==t[a])return!1;return!0})(this._aliases,e)||(this._aliases=e,this.emitChange())}get href(){return this._href}set href(e){this._href!==e&&(this._href=e,this.emitChange())}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.emitChange())}remove(){var e;null==(e=eo())||e.unregister(this)}onChange(e){return this.changeHandlers.add(e),()=>this.changeHandlers.delete(e)}emitChange(){for(let e of this.changeHandlers)e()}constructor(e){(0,ei._)(this,"key",void 0),(0,ei._)(this,"_label",void 0),(0,ei._)(this,"_badge",void 0),(0,ei._)(this,"_badgeColor",void 0),(0,ei._)(this,"_aliases",void 0),(0,ei._)(this,"_href",void 0),(0,ei._)(this,"onSelect",void 0),(0,ei._)(this,"_visible",void 0),(0,ei._)(this,"changeHandlers",void 0),this.key="".concat(en++,"×").concat(String(Math.random()).substring(2)),this._label=e.label,this._badge=e.badge,this._badgeColor=e.badgeColor,this._aliases=e.aliases,this._href=e.href,this.onSelect=e.onSelect,this._visible=e.visible,this.changeHandlers=new Set}},ed=e=>{let t=(0,a.useRef)();return(0,a.useEffect)(()=>{let a=t.current;a?(a.label=e.label,a.badge=e.badge,a.badgeColor=e.badgeColor,a.aliases=e.aliases,a.href=e.href,a.onSelect=e.onSelect,a.visible=e.visible):t.current=a=(e=>{var t;let a=new ec(e);return null==(t=eo())||t.register(a),a})(e)}),(0,a.useEffect)(()=>()=>{var e;null==(e=t.current)||e.remove(),t.current=void 0},[]),t.current};let eu=["INPUT","TEXTAREA","BUTTON"];function eh(e){let{currentUserId:o,initialOpen:c,initialTab:d,initialState:u,initialPosition:h,initialOrder:m}=e;ed({label:"Chat Datadog Dashboard",aliases:["datadog"],href:"https://app.datadoghq.com/dashboard/jie-rn5-jfn",visible:!0}),ed({label:"v0-frame Datadog Logs",aliases:["frame logs"],href:"https://app.datadoghq.com/logs?saved-view-id=2893862",visible:!0}),ed({label:"v0chat Datadog Logs",aliases:["chat logs"],href:"https://app.datadoghq.com/logs?saved-view-id=3000893",visible:!0}),ed({label:"Go to /chat/internal",aliases:["internal"],href:"/chat/internal",visible:!0}),ed({label:"Preset Dash",aliases:["preset"],href:"https://6b9529fd.us2a.app.preset.io/superset/dashboard/281/",visible:!0});let[f,g]=(0,a.useState)(c),p=(0,a.useCallback)(e=>{r.default.set("ADMIN_PANEL_OPEN",String(e),{expires:7}),g(e)},[g]),[x,v]=(0,a.useState)(null!=d?d:"state"),j=(0,a.useCallback)(e=>{r.default.set("ADMIN_PANEL_TAB",e,{expires:7}),v(e)},[v]),[b,y]=(0,a.useState)(o||""),[C,w]=(0,a.useState)(""),[N,S]=(0,a.useState)(h),I=(0,a.useCallback)(e=>{r.default.set("ADMIN_PANEL_POSITION",e,{expires:7}),S(e)},[S]);return((0,n.useEventListener)("keydown",e=>{"`"!==e.key||eu.includes(e.target.tagName)||p(!f)}),f)?(0,t.jsx)(l.Card,{className:"fixed ".concat(N,"-4 top-4 z-50 flex max-h-[96vh] w-96 max-w-full flex-col"),children:(0,t.jsxs)(s.Tabs,{className:"flex min-h-0 flex-col",onValueChange:e=>j(e),value:x,children:[(0,t.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,t.jsx)(l.CardTitle,{className:"flex items-center gap-2",children:"Admin Panel"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.TabsList,{children:(0,t.jsx)(s.TabsTrigger,{value:"state",children:"State"})}),(0,t.jsx)(i.Button,{onClick:()=>{I("right"===N?"left":"right")},size:"sm",title:"Move to ".concat("right"===N?"left":"right"),variant:"ghost",children:"right"===N?(0,t.jsx)(ea.ArrowLeft,{}):(0,t.jsx)(er.ArrowRight,{})})]})]}),(0,t.jsx)(l.CardContent,{className:"overflow-y-scroll",children:(0,t.jsx)(s.TabsContent,{value:"state",children:(0,t.jsx)(ee,{initialOrder:m,initialState:u})})})]})}):null}e.s(["default",()=>eh],715326)},810457,e=>{e.v(t=>Promise.all(["static/chunks/ee674374ae840ec3.js"].map(t=>e.l(t))).then(()=>t(712129)))},755396,e=>{e.v(t=>Promise.all(["static/chunks/44e424fba84a70ca.js"].map(t=>e.l(t))).then(()=>t(353654)))},476308,e=>{e.v(t=>Promise.all(["static/chunks/ff6daf69630c6cae.js"].map(t=>e.l(t))).then(()=>t(195450)))},977612,e=>{e.v(t=>Promise.all(["static/chunks/d43967788bc7a37b.js"].map(t=>e.l(t))).then(()=>t(804146)))},219662,e=>{e.v(t=>Promise.all(["static/chunks/276d913ad7cf86b9.js"].map(t=>e.l(t))).then(()=>t(277352)))},376872,e=>{e.v(t=>Promise.all(["static/chunks/f3e13cc2ffeada05.js"].map(t=>e.l(t))).then(()=>t(167861)))},430007,e=>{e.v(t=>Promise.all(["static/chunks/72e0c4d8ab8001cd.js"].map(t=>e.l(t))).then(()=>t(382942)))},181699,e=>{e.v(t=>Promise.all(["static/chunks/561433d7d430db71.js"].map(t=>e.l(t))).then(()=>t(867956)))},109161,e=>{e.v(t=>Promise.all(["static/chunks/1fe4a208c9c6174e.js"].map(t=>e.l(t))).then(()=>t(310872)))},943441,e=>{e.v(t=>Promise.all(["static/chunks/9568b1c9b23fd5e1.js"].map(t=>e.l(t))).then(()=>t(111780)))},55756,e=>{e.v(t=>Promise.all(["static/chunks/7e6e619290897749.js"].map(t=>e.l(t))).then(()=>t(178198)))},297630,e=>{e.v(t=>Promise.all(["static/chunks/3068ffa8210d2b8f.js"].map(t=>e.l(t))).then(()=>t(683385)))},269552,e=>{e.v(t=>Promise.all(["static/chunks/e4fc8bc1bc6c68fd.js"].map(t=>e.l(t))).then(()=>t(985624)))},811449,e=>{e.v(t=>Promise.all(["static/chunks/4cfbc2d59f660e89.js"].map(t=>e.l(t))).then(()=>t(701562)))},514499,e=>{e.v(t=>Promise.all(["static/chunks/dd0a6d94231e7263.js"].map(t=>e.l(t))).then(()=>t(634624)))}]);