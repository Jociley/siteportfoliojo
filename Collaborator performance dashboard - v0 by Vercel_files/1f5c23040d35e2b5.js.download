(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,216871,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return c}});let r=e.r(509473),i=e.r(743124),o=e.r(370957),a=e.r(374504);function s(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},n=(0,i.lazy)(()=>t.loader().then(s)),c=t.loading;function u(e){let s=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,u=l?i.Suspense:i.Fragment,d=l?{fallback:s}:{},p=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(a.PreloadChunks,{moduleIds:t.modules}):null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(u,{...d,children:p})}return u.displayName="LoadableComponent",u}},651219,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i}});let r=e.r(481258)._(e.r(216871));function i(e,t){var n;let i={};"function"==typeof e&&(i.loader=e);let o={...i,...t};return(0,r.default)({...o,modules:null==(n=o.loadableGenerated)?void 0:n.modules})}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},15185,735234,881181,595432,760343,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(176248),i=e.i(304649),o=e.i(936096);let a=(0,o.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM11.5303 6.53033L12.0607 6L11 4.93934L10.4697 5.46967L6.5 9.43934L5.53033 8.46967L5 7.93934L3.93934 9L4.46967 9.53033L5.96967 11.0303C6.26256 11.3232 6.73744 11.3232 7.03033 11.0303L11.5303 6.53033Z" fill="currentColor"/>');e.s(["CheckCircle",0,a],735234);let s=(0,o.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5.5 11.5607L6.03033 11.0303L8 9.06066L9.96967 11.0303L10.5 11.5607L11.5607 10.5L11.0303 9.96967L9.06066 8L11.0303 6.03033L11.5607 5.5L10.5 4.43934L9.96967 4.96967L8 6.93934L6.03033 4.96967L5.5 4.43934L4.43934 5.5L4.96967 6.03033L6.93934 8L4.96967 9.96967L4.43934 10.5L5.5 11.5607Z" fill="currentColor"/>');function l(e){return(0,t.jsx)("div",{className:"bg-v0-background-200 my-4 space-y-4 rounded-lg border px-4 pb-6 pt-2",children:e.children})}function c(e){let{value:n,selected:r,onClick:o,children:a,index:s}=e;return(0,t.jsxs)("label",{className:"flex w-full cursor-pointer flex-col",children:[(0,t.jsx)("input",{className:"size-0",defaultChecked:r,name:"answer",onClick:o,type:"radio",value:n}),(0,t.jsxs)("span",{className:(0,i.cn)("bg-v0-background-100 flex items-center justify-start gap-3 px-4 py-3 transition-colors",r&&"bg-v0-blue-100"),children:[(0,t.jsx)("span",{className:(0,i.cn)("flex size-5 select-none items-center justify-center rounded-full bg-v0-blue-100 text-center text-xs font-semibold text-v0-blue-800 transition-colors",r&&"bg-v0-blue-400 text-v0-white"),children:String.fromCharCode(65+s)}),a]})]})}function u(e){let{correct:n,selected:r,className:o}=e;return n||r?(0,t.jsx)("span",{className:(0,i.cn)("inline-block size-6 shrink-0 rounded-full p-1 align-middle",n?"bg-v0-blue-100 text-v0-blue-700":"bg-v0-red-200 text-v0-red-700",o),children:n?(0,t.jsx)(a,{}):(0,t.jsx)(s,{})}):null}function d(e){let{answer:n,correctAnswer:r}=e;return(0,t.jsxs)("span",{className:(0,i.cn)("animate-slide-down-and-fade flex select-none items-center justify-center gap-1 rounded-full py-1 pl-3 pr-5",n===r&&"bg-v0-blue-100 text-v0-blue-700",n&&n!==r&&"bg-v0-red-200 text-v0-red-700"),children:[void 0!==n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{correct:n===r,selected:!0})," "]}),void 0===n?(0,t.jsxs)(t.Fragment,{children:["The correct answer is: ",(0,t.jsx)("strong",{children:r})]}):n===r?(0,t.jsx)("span",{className:"font-bold text-v0-blue-700",children:"Correct"}):(0,t.jsx)("span",{className:"font-bold text-v0-red-700",children:"Incorrect"})]})}function p(e){let{answers:i,correctAnswer:o,question:a}=e,[s,p]=(0,n.useState)(null),[h,f]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),v=()=>{f(!0),g(!0)};return a&&Array.isArray(i)&&0!==i.length?(0,t.jsxs)(l,{children:[(0,t.jsx)("p",{className:"text-md px-4 text-center font-semibold md:px-8 lg:px-12",children:a}),(0,t.jsx)("div",{className:"mx-0 flex flex-col divide-y overflow-hidden rounded-md border md:mx-8 lg:mx-12",children:i.map((e,n)=>(0,t.jsxs)(c,{index:n,onClick:()=>{m||p(e)},selected:e===s,value:e,children:[(0,t.jsx)("span",{className:"flex-1",children:e}),h?(0,t.jsx)(u,{className:"animate-slide-down-and-fade ml-2",correct:e===o,selected:e===s}):null]},e))}),(0,t.jsx)("div",{className:"flex justify-center",children:h&&null!==s?(0,t.jsx)(d,{answer:s,correctAnswer:o}):(0,t.jsx)(r.Button,{className:"h-9 select-none",disabled:null===s,onClick:v,size:"sm",children:"Check answer"})})]}):null}e.s(["CrossCircle",0,s],881181),e.s(["Quiz",()=>p],15185);var h=t,f=e.i(7284);function m(e){let{children:t,className:n,...r}=e;return(0,h.jsx)("div",{className:(0,f.default)("steps mb-12 ml-2 border-l border-v0-gray-200 pl-5 sm:ml-4 sm:pl-6","[counter-reset:step]",n),...r,children:t})}e.s(["Steps",()=>m],595432);var g=t;function v(e){let{title:t}=e;return(0,g.jsxs)("div",{className:"rounded-lg border border-v0-gray-100 p-4 shadow-sm",children:[(0,g.jsx)("p",{className:"mb-2 mt-0 font-medium text-v0-gray-900",children:t}),(0,g.jsxs)("div",{className:"animate-pulse",children:[(0,g.jsx)("div",{className:"h-4 w-3/4 rounded bg-v0-gray-200"}),(0,g.jsx)("div",{className:"mt-2 h-4 w-1/2 rounded bg-v0-gray-200"}),(0,g.jsx)("div",{className:"mt-2 h-4 w-3/4 rounded bg-v0-gray-200"})]})]})}e.s(["LoadingCard",()=>v],760343)},845210,e=>{"use strict";var t=e.i(509473),n=e.i(743124);let r=(0,n.createContext)(!1);function i(e){let{children:n}=e;return(0,t.jsx)(r.Provider,{value:!0,children:n})}function o(){return{isPublished:(0,n.use)(r)||!1}}e.s(["PublishedPageProvider",()=>i,"usePublishedPage",()=>o])},338993,636139,739126,938807,65836,196269,e=>{"use strict";var t=e.i(509473),n=e.i(304649),r=e.i(283751),i=e.i(845210);function o(e){let{className:i,headerClassName:o,language:a,actions:s,syntax:l}=e;return(0,t.jsx)("div",{className:(0,n.cn)("codeblock border-v0-alpha-400 relative flex size-full flex-col overflow-hidden rounded-lg border font-sans",i),"data-seg":"root",children:(0,t.jsxs)("div",{className:"group/inline-code-block relative flex size-full flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:(0,n.cn)("bg-v0-background-200 flex h-10 w-full shrink-0 items-center justify-between rounded-t-lg border-b pl-2.5 pr-1.5",o),"data-seg":"skip",children:[a?(0,t.jsx)("span",{className:"text-v0-gray-900",children:(0,t.jsx)(r.FileIcon,{lang:a})}):null,(0,t.jsx)("div",{className:"flex items-center space-x-1 text-v0-gray-900",children:s})]}),l]})})}function a(e){let{className:r,showLineNumbers:o,actions:a,fileName:l,syntax:c}=e,{isPublished:u}=(0,i.usePublishedPage)();return u?(0,t.jsxs)("div",{className:(0,n.cn)("codeblock @container/codeblock bg-v0-background-200 flex size-full flex-col overflow-hidden rounded-lg pt-3",r),"data-seg":"root",children:[(0,t.jsxs)("div",{className:"z-10 mx-3 flex translate-y-px justify-between","data-seg":"skip",children:[(0,t.jsx)(s,{active:!0,fileName:l}),(0,t.jsx)("div",{className:"flex -translate-y-1.5 items-center gap-1",children:a})]}),(0,t.jsx)("div",{className:(0,n.cn)("border-v0-alpha-400 bg-v0-background-100 relative flex flex-1 flex-col overflow-hidden border-t px-3 font-sans",o&&"px-0"),children:c})]}):(0,t.jsx)("div",{className:(0,n.cn)("codeblock @container/codeblock bg-v0-background-200 flex size-full flex-col",r),"data-seg":"root",children:(0,t.jsx)("div",{className:(0,n.cn)("relative flex flex-1 flex-col overflow-hidden px-3 font-sans",o&&"px-0"),children:c})})}function s(e){let{active:r,fileName:i,onClick:o}=e;return(0,t.jsxs)("button",{className:(0,n.cn)("font-regular border-v0-alpha-400 pointer-events-none relative h-full whitespace-nowrap rounded-t-md border border-b-0 px-4 pb-1 pt-1.5 text-[13px] text-v0-gray-900 transition-colors",r?"bg-v0-background-100 font-medium":"border-transparent bg-transparent hover:bg-v0-gray-200"),onClick:o,children:[(0,t.jsx)(l,{active:r,side:"left"}),i,(0,t.jsx)(l,{active:r,side:"right"})]})}function l(e){let{active:r,side:i}=e;if(!r)return null;let o="left"===i;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,n.cn)("bg-v0-background-200 absolute bottom-0 z-20 h-[4px] w-[4px] border-b border-v0-gray-200",o?"right-[-4px] rounded-bl-[3px] border-l":"left-[-4px] rounded-br-[3px] border-r")}),(0,t.jsx)("div",{className:(0,n.cn)("bg-v0-background-100 absolute bottom-0 z-10 h-[4px] w-[4px]",o?"right-[-4px]":"left-[-4px]")})]})}e.s(["InlineCodeBlock",()=>o,"TabbedCodeBlock",()=>a],338993);let c=["javascript","typescript","python","sql"],u=["js","jsx","mjs","cjs","ts","tsx","mts","cts","py","sql"];function d(e){switch(e){case"plaintext":case"png":case"jpg":case"jpeg":case"slim":case"shaderlab":return"text";case"bat":return"batch";case"dockercompose":return"yaml";case"git-rebase":case"git-commit":return"markdown";case"typescriptreact":return"tsx";case"javascriptreact":case"svelte":case"astro":return"jsx";case"jsonc":return"json5";case"objective-c":case"objective-cpp":return"objectivec";case"perl6":return"perl";case"shellscript":return"bash";case"terraform":return"hcl";case"bibtex":return"tex";case"cuda-cpp":return"cpp";case"jade":return"pascal";case"vue":case"vue-html":return"html";case"xsl":return"xml";default:return e}}e.s(["getPrismLanguage",()=>d,"runnableExtensions",0,u,"runnableLanguages",0,c],636139);var p=e.i(346970);function h(e){let{blockId:t,fileName:n,originalCode:r,newCode:i}=e,{data:o,mutate:a}=(0,p.default)(["block:diffView:show",t],{fallbackData:!1}),{data:s}=(0,p.default)(["block:diffView",t,n],{fallbackData:!!r&&r!==i});return{hasDiffs:s,showDiffs:o,setShowDiffs:a}}e.s(["useDiffView",()=>h],739126);var f=t,m=n;let g=e=>{let{size:t=16,className:n}=e;return(0,f.jsxs)("svg",{className:(0,m.cn)("trash-icon overflow-visible",n),fill:"none",stroke:"currentColor",height:t,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M10.0001 1.33203H4.00008C3.64646 1.33203 3.30732 1.47251 3.05727 1.72256C2.80722 1.9726 2.66675 2.31174 2.66675 2.66536V13.332C2.66675 13.6857 2.80722 14.0248 3.05727 14.2748C3.30732 14.5249 3.64646 14.6654 4.00008 14.6654H12.0001C12.3537 14.6654 12.6928 14.5249 12.9429 14.2748C13.1929 14.0248 13.3334 13.6857 13.3334 13.332V4.66536L10.0001 1.33203Z",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M6 6.66797H10",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M8 8.66797V4.66797",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M6 11.332H10",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"square",strokeLinejoin:"round"})]})};e.s(["DiffIcon",0,g],938807);var v=e.i(358847),x=(0,v.createServerReference)("7cbf00452b96a0172b33f3c38722015090415b59b0",v.callServer,void 0,v.findSourceMapURL,"doExecution");e.s(["doExecution",()=>x],65836);var y=v,b=(0,y.createServerReference)("40428948f5f74bbcca189e79b7c59216d9b28fa09c",y.callServer,void 0,y.findSourceMapURL,"doSqlExecution");e.s(["doSqlExecution",()=>b],196269)},703699,e=>{"use strict";e.i(342681);let t=7;function n(e,t){let n=e.replace(/^\/|\/$/g,"").split("/"),{id:i,title:o}=r(n[n.length-1],t);return{segments:n,id:i,title:o,fullPath:e}}function r(e,t){let n,r="";for(let i=e.length-1;i>=0;i--){if("-"===e[i]&&r.length>=t){n=e.slice(0,i);break}r=e[i]+r}return!n&&r.length<e.length&&(n=e.slice(0,e.length-r.length-1)),{id:r,title:n||void 0}}function i(e){return r(e,t).id}e.s(["extractChatIdFromSlug",()=>i,"parsePath",()=>n])},726718,e=>{"use strict";var t=e.i(703699);let n=new Map([["archive","archiveLayout.title"],["blocks","blocksLayout.title"],["button","buttonPage.title"],["community","templatesPage.title"],["enterprise","footer.enterprise"],["git","gitPage.title"],["history","libraryLayout.title"],["id","idPage.title"],["internal","internalPage.title"],["pricing","sidebar.userMenu.pricing"],["projects","projectsPage.title"],["settings","settingsPage.title"],["upgrade","upgradePage.title"],["user","sidebar.userMenu.profile"],["design-systems","designSystemsPage.title"]]),r=new Set(n.keys()),i=/^(?:\/chat)?(?:\/v0pprvariant[^\/]*)?(?:\/v3)?\/?$/,o=/^\/chat\/(?:v0pprvariant[^\/]*\/)?(?:v3\/?)?([^\/]+)\/?/,a=/^(?:\/chat)?(?:\/v0pprvariant[^\/]*)?(?:\/v3)?\/([^\/]+)/;function s(e){return i.test(e)}let l=/^\/chat\/(?:[^/]+\/)?design-systems\/[^/]+\/?$/;function c(e){return l.test(e)}let u=/^\/chat(?:\/[^/]+)?\/design-systems\/?$/;function d(e){return u.test(e)}let p=/^(?:\/chat(?:\/[^/]+)?)?\/community(?:\/top)?(?:\/newest)?\/?$/,h=e=>p.test(e);function f(e){let t=e.match(a);return null==t?void 0:t[1]}function m(e){let t=e.match(o),n=null==t?void 0:t[1];if(n&&!r.has(n))return n}function g(e){let n=m(e);if(n)return(0,t.extractChatIdFromSlug)(n)}e.s(["PATHS_TO_TITLE",0,n,"getChatIdFromPathname",()=>g,"getChatSlugFromPathname",()=>m,"getTopLevelPathFromPathname",()=>f,"isCommunityHomePage",0,h,"isDesignSystemsEditorPage",()=>c,"isDesignSystemsPage",()=>d,"isHome",()=>s])},92479,887968,767373,72047,273207,819969,e=>{"use strict";e.s(["assertChatId",()=>eu,"useChatHashNavigation",()=>ew,"useChatId",()=>ed,"useChatLoadingState",()=>em,"useChatMessages",()=>ef,"useChatMessagesLength",()=>eg,"useChatPermissions",()=>ev,"useChatPrefillOptions",()=>eb,"useChatState",()=>eh,"useChatSyncState",()=>ey,"useChatUndoState",()=>ex,"useSetChatState",()=>ep],92479);var t=e.i(346970),n=e.i(391795),r=e.i(743124);let i={messages:[],isLoading:!1,lastSyncedAt:Date.now(),undo:null,activeForkKey:void 0,isContinuing:!1,isStreaming:!1,isAuthor:!1,isRestoring:!1},o={title:"",isNew:!1,authorId:"",ownerId:"",tailwindV4Default:!1};e.s(["CHAT_METADATA_FALLBACK",0,o,"CHAT_STATE_FALLBACK",0,i],887968),e.s(["useLeafMessage",()=>Y],273207);let a=(e,t,n)=>{if(!e)return;let r=e.findIndex(e=>e===t);return r<0?e:[...e.slice(0,r),n]},s=(e,t)=>void 0===e?[t]:[...e,t],l=e=>e&&e.length>0?e[e.length-1]:void 0,c=(e,t)=>e?[...e.slice(0,e.length-1),t]:s(void 0,t),u=(e,t)=>{if(!e)return;let n=e.findIndex(e=>e===t);if(!(n<0))return e[n-1]},d="<ROOT_MESSAGE>";function p(e){let t=new Map;for(let n of e){let e=n.parentId||d;t.set(e,[...t.get(e)||[],n])}return t}function h(e){let t=p(e),n=new Set,r=new Map,i=(e,o)=>{var a;if(e&&n.has(e.id))return;let l=t.get(e?e.id:d);e&&n.add(e.id);let c=[];for(let e=0;e<(null!=(a=null==l?void 0:l.length)?a:0);e++){let t=l[e],n=s(o,t.id);c.push(n),i(t,n)}r.set(e?e.id:d,c)};return i(void 0,void 0),r}function f(e,t){let n=p(e),r=new Set,i=[];function o(e){if(!r.has(e))for(let t of(r.add(e),n.get(e)||[]))i.push(t.messageId),o(t.messageId)}return o(t||d),i}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=t,i=p(e),o=l(r)||d,a=i.get(o)||[],c=new Set;for(;a.length>0;){let{id:e}=a["left"===n?0:a.length-1];if(c.has(e))break;c.add(e),r=s(r,e),a=i.get(e)||[]}return r}function g(e,t){let n,r=t;if(0===e.length)return;let i=p(e),o=e=>{var t,n;let r=new Set,o=null==(t=i.get(e&&l(e)||d))?void 0:t[0],a=e;for(;o&&!r.has(o.messageId);)r.add(o.messageId),a=s(a,o.messageId),o=null==(n=i.get(o.messageId))?void 0:n[0];return a};null!==r&&e.some(e=>e.messageId===r)||(r=e.reduce((e,t)=>e.createdAt>t.createdAt?e:t).messageId);let a=new Set;function c(e,t){if(!a.has(e||d))for(let o of(a.add(e||d),i.get(e||d)||[])){let e=s(t,o.messageId);if(o.messageId===r){n=e;return}c(o.messageId,e)}}return c(void 0,void 0),o(n)}e.s(["ROOT_MESSAGE_KEY",0,d,"addMessageIdToForkKey",0,s,"computeForkKeyOptions",()=>h,"computeInitialForkKey",()=>g,"createSiblingForkKey",0,c,"getChildMessageIds",()=>f,"getLeafMessageIdFromForkKey",0,l,"getLeafNodeForkKey",()=>m,"getPreviousMessageIdInForkKey",0,u,"replaceIdInForkKey",0,a],767373);var v=r,x=e.i(957573),y=e.i(827330),b=e.i(355045),w=e.i(887139),j=n,C=e.i(9694),k=e.i(762380),S=e.i(957212),N=e.i(642790),E=e.i(518273),D=e.i(726295),I=e.i(912866),A=e.i(635316),T=e.i(649440),M=e.i(754883),L=e.i(265540),P=e.i(671183),R=e.i(612034),_=e.i(396350),O=e.i(880092);let F=v.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),B={dedupe:!0},V=(e,t,n)=>{let{cache:r,compare:i,suspense:o,fallbackData:a,revalidateOnMount:s,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:p}=n,[h,f,m,g]=C.SWRGlobalState.get(r),[y,b]=(0,k.serialize)(e),w=(0,v.useRef)(!1),V=(0,v.useRef)(!1),z=(0,v.useRef)(y),H=(0,v.useRef)(t),U=(0,v.useRef)(n),G=()=>U.current,W=()=>G().isVisible()&&G().isOnline(),[q,Z,K,$]=(0,S.createCacheHelper)(r,y),Y=(0,v.useRef)({}).current,J=(0,N.isUndefined)(a)?(0,N.isUndefined)(n.fallback)?E.UNDEFINED:n.fallback[y]:a;J&&(0,D.isPromiseLike)(J)&&(J=F(J));let Q=(e,t)=>{for(let n in Y){let r=n;if("data"===r){if(!i(e[r],t[r])&&(!(0,N.isUndefined)(e[r])||!i(es,t[r])))return!1}else if(t[r]!==e[r])return!1}return!0},X=(0,v.useMemo)(()=>{let e=!!y&&!!t&&((0,N.isUndefined)(s)?!G().isPaused()&&!o&&!1!==l:s),n=t=>{let n=(0,O.mergeObjects)(t);return(delete n._k,e)?{isValidating:!0,isLoading:!0,...n}:n},r=q(),i=$(),a=n(r),c=r===i?a:n(i),u=a;return[()=>{let e=n(q());return Q(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>c]},[r,y]),ee=(0,x.useSyncExternalStore)((0,v.useCallback)(e=>K(y,(t,n)=>{Q(n,t)||e()}),[r,y]),X[0],X[1]),et=!w.current,en=h[y]&&h[y].length>0,er=ee.data,ei=(0,N.isUndefined)(er)?J:er,eo=ee.error,ea=(0,v.useRef)(ei),es=p?(0,N.isUndefined)(er)?ea.current:er:ei,el=(!en||!!(0,N.isUndefined)(eo))&&(et&&!(0,N.isUndefined)(s)?s:!G().isPaused()&&(o?!(0,N.isUndefined)(ei)&&l:(0,N.isUndefined)(ei)||l)),ec=!!(y&&t&&et&&el),eu=(0,N.isUndefined)(ee.isValidating)?ec:ee.isValidating,ed=(0,N.isUndefined)(ee.isLoading)?ec:ee.isLoading,ep=(0,v.useCallback)(async e=>{let t,r,o=H.current;if(!y||!o||V.current||G().isPaused())return!1;let a=!0,s=e||{},l=!m[y]||!s.dedupe,c=()=>_.IS_REACT_LEGACY?!V.current&&y===z.current&&w.current:y===z.current,u={isValidating:!1,isLoading:!1},d=()=>{Z(u)},p=()=>{let e=m[y];e&&e[1]===r&&delete m[y]},g={isValidating:!0};(0,N.isUndefined)(q().data)&&(g.isLoading=!0);try{if(l&&(Z(g),n.loadingTimeout&&(0,N.isUndefined)(q().data)&&setTimeout(()=>{a&&c()&&G().onLoadingSlow(y,n)},n.loadingTimeout),m[y]=[o(b),(0,I.getTimestamp)()]),[t,r]=m[y],t=await t,l&&setTimeout(p,n.dedupingInterval),!m[y]||m[y][1]!==r)return l&&c()&&G().onDiscarded(y),!1;u.error=E.UNDEFINED;let e=f[y];if(!(0,N.isUndefined)(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return d(),l&&c()&&G().onDiscarded(y),!1;let s=q().data;u.data=i(s,t)?s:t,l&&c()&&G().onSuccess(t,y,n)}catch(n){p();let e=G(),{shouldRetryOnError:t}=e;!e.isPaused()&&(u.error=n,l&&c()&&(e.onError(n,y,e),(!0===t||(0,A.isFunction)(t)&&t(n))&&(!G().revalidateOnFocus||!G().revalidateOnReconnect||W())&&e.onErrorRetry(n,y,e,e=>{let t=h[y];t&&t[0]&&t[0](T.revalidateEvents.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return a=!1,d(),!0},[y,r]),eh=(0,v.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,M.internalMutate)(r,z.current,...t)},[]);if((0,L.useIsomorphicLayoutEffect)(()=>{H.current=t,U.current=n,(0,N.isUndefined)(er)||(ea.current=er)}),(0,L.useIsomorphicLayoutEffect)(()=>{if(!y)return;let e=ep.bind(E.UNDEFINED,B),t=0,n=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n==T.revalidateEvents.FOCUS_EVENT){let n=Date.now();G().revalidateOnFocus&&n>t&&W()&&(t=n+G().focusThrottleInterval,e())}else if(n==T.revalidateEvents.RECONNECT_EVENT)G().revalidateOnReconnect&&W()&&e();else if(n==T.revalidateEvents.MUTATE_EVENT)return ep();else if(n==T.revalidateEvents.ERROR_REVALIDATE_EVENT)return ep(r)},r=(0,j.subscribeCallback)(y,h,n);return V.current=!1,z.current=y,w.current=!0,Z({_k:b}),el&&((0,N.isUndefined)(ei)||P.IS_SERVER?e():(0,R.rAF)(e)),()=>{V.current=!0,r()}},[y]),(0,L.useIsomorphicLayoutEffect)(()=>{let e;function t(){let t=(0,A.isFunction)(c)?c(q().data):c;t&&-1!==e&&(e=setTimeout(n,t))}function n(){!q().error&&(u||G().isVisible())&&(d||G().isOnline())?ep(B).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[c,u,d,y]),(0,v.useDebugValue)(es),o&&(0,N.isUndefined)(ei)&&y){if(!_.IS_REACT_LEGACY&&P.IS_SERVER)throw Error("Fallback data is required when using Suspense in SSR.");H.current=t,U.current=n,V.current=!1;let e=g[y];if((0,N.isUndefined)(e)||F(eh(e)),(0,N.isUndefined)(eo)){let e=ep(B);(0,N.isUndefined)(es)||(e.status="fulfilled",e.value=!0),F(e)}else throw eo}return{mutate:eh,get data(){return Y.data=!0,es},get error(){return Y.error=!0,eo},get isValidating(){return Y.isValidating=!0,eu},get isLoading(){return Y.isLoading=!0,ed}}};y.OBJECT.defineProperty(b.SWRConfig,"defaultValue",{value:w.defaultConfig});let z=(0,j.withArgs)(V),H=_.IS_REACT_LEGACY?e=>{e()}:v.default.startTransition,U=e=>{let[,t]=(0,v.useState)({}),n=(0,v.useRef)(!1),r=(0,v.useRef)(e),i=(0,v.useRef)({data:!1,error:!1,isValidating:!1}),o=(0,v.useCallback)(e=>{let o=!1,a=r.current;for(let t in e){let n=t;a[n]!==e[n]&&(a[n]=e[n],i.current[n]&&(o=!0))}o&&!n.current&&t({})},[]);return(0,L.useIsomorphicLayoutEffect)(()=>(n.current=!1,()=>{n.current=!0})),[r,i.current,o]},G=()=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{mutate:r}=(0,j.useSWRConfig)(),i=(0,v.useRef)(e),o=(0,v.useRef)(t),a=(0,v.useRef)(n),s=(0,v.useRef)(0),[l,c,u]=U({data:E.UNDEFINED,error:E.UNDEFINED,isMutating:!1}),d=l.current,p=(0,v.useCallback)(async(e,t)=>{let[n,l]=(0,k.serialize)(i.current);if(!o.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!n)throw Error("Can’t trigger the mutation: missing key.");let c=(0,O.mergeObjects)((0,O.mergeObjects)({populateCache:!1,throwOnError:!0},a.current),t),d=(0,I.getTimestamp)();s.current=d,u({isMutating:!0});try{let t=await r(n,o.current(l,{arg:e}),(0,O.mergeObjects)(c,{throwOnError:!0}));return s.current<=d&&(H(()=>u({data:t,isMutating:!1,error:void 0})),null==c.onSuccess||c.onSuccess.call(c,t,n,c)),t}catch(e){if(s.current<=d&&(H(()=>u({error:e,isMutating:!1})),null==c.onError||c.onError.call(c,e,n,c),c.throwOnError))throw e}},[]),h=(0,v.useCallback)(()=>{s.current=(0,I.getTimestamp)(),u({data:E.UNDEFINED,error:E.UNDEFINED,isMutating:!1})},[]);return(0,L.useIsomorphicLayoutEffect)(()=>{i.current=e,o.current=t,a.current=n}),{trigger:p,reset:h,get data(){return c.data=!0,d.data},get error(){return c.error=!0,d.error},get isMutating(){return c.isMutating=!0,d.isMutating}}},W=(0,j.withMiddleware)(z,G);e.s(["default",()=>W],72047);var q=t,Z=r;let K={};async function $(e,t){let{arg:n}=t,r=l(n.activeForkKey);if(r)return fetch(e,{method:"POST",body:JSON.stringify({chatId:n.chatId,messageId:r})}).then(e=>e.json())}function Y(){let{chatId:e}=ed(),{trigger:t}=W("/chat/api/chat/leaf",$),{data:n,mutate:r}=(0,q.default)(["chat:leaf:cache",e],null),i=(0,Z.useCallback)(e=>{r(t=>{if(!e)return t;let n=!1,r={...t||K};for(let t of e)r[t]!==e&&(r[t]=e,n=!0);return n?r:t})},[r]);return{cacheForkKey:i,saveLeafMessageId:(0,Z.useCallback)(e=>{let{chatId:n,activeForkKey:r}=e;n&&t({chatId:n,activeForkKey:r})},[t]),forkKeyCache:n||K,switchForkKey:i}}var J=e.i(979865),Q=e.i(726718);e.s(["getChatActions",()=>ec,"getChatAtoms",()=>el,"getWritableChatAtoms",()=>eo],819969);var X=e.i(490293),ee=e.i(753533),et=e.i(142219),en=e.i(470259),er=e.i(452703);let ei=new Map,eo=(0,ee.cacheResultById)(ei,()=>({awaitingChatSubmissionResponse:(0,X.atom)(!1),isStreaming:(0,X.atom)(!1),isStreamingBlock:(0,X.atom)(!1),forkKeyCache:(0,X.atom)({}),userInitiatedAbort:(0,X.atom)(!1),template:(0,X.atom)(null),attributes:(0,X.atom)({access:3,session:void 0,team:void 0,isAdmin:!1,isAuthor:!1,ownerId:void 0,authorId:void 0,canWriteToChat:!1,designSystemId:null}),permissions:(0,X.atom)({access:3,session:void 0,team:void 0,isAdmin:!1,isAuthor:!1,ownerId:void 0,authorId:void 0,canWriteToChat:!1}),externalMeta:(0,X.atom)({error:en.SWR_PROMISE_NOT_FOUND}),project:(0,X.atom)({error:en.SWR_PROMISE_NOT_FOUND,status:0}),latest:(0,X.atom)({error:en.SWR_PROMISE_NOT_FOUND})})),ea=new Map,es=new Map,el=(0,ee.cacheResultById)(ea,e=>{let t=eo(e);return{...t,deploymentState:(0,X.atom)(e=>{let n=e(t.externalMeta);if(n.error){if(n.error===en.MISSING_MFA_SCOPE)return"two-factor-error";if(n.error!==en.NOT_FOUND)return"error"}return n.deployment?(0,er.mapReadyStateToDeploymentState)(n.deployment.readyState):"not-deployed"}),isAuthor:(0,X.atom)(e=>e(t.permissions).isAuthor),canWriteToChat:(0,X.atom)(e=>!!e(t.permissions).canWriteToChat)}});function ec(e){let t=eo(e);return{setIsStreamingBlock:e=>et.store.set(t.isStreamingBlock,e),setChatPermissions:e=>et.store.set(t.permissions,e),setAwaitingChatSubmissionResponse:e=>et.store.set(t.awaitingChatSubmissionResponse,e),setIsStreaming:e=>et.store.set(t.isStreaming,e),updateForkKeyCache:e=>et.store.set(t.forkKeyCache,e),addToForkKeyCache:(e,n)=>et.store.set(t.forkKeyCache,{...et.store.get(t.forkKeyCache),[e]:n}),setUserInitiatedAbort:e=>et.store.set(t.userInitiatedAbort,e),abortStreaming:()=>{et.store.get(t.isStreaming)&&(et.store.set(t.userInitiatedAbort,!0),et.store.set(t.isStreaming,!1))}}}function eu(e){return null!=e?e:"_no_chat_"}function ed(){let{data:e,mutate:n}=(0,t.default)("chat:id"),i=(0,J.usePathname)();return(0,r.useEffect)(()=>{(0,Q.getChatIdFromPathname)(i)||n(void 0,!1)},[i,n]),{chatId:e}}function ep(){let{chatId:e}=ed(),{setIsStreaming:t}=ec(null!=e?e:"no_chat"),{saveLeafMessageId:o,cacheForkKey:a}=Y(),{mutate:s}=(0,n.useSWRConfig)();return(0,r.useCallback)(n=>{s(["chat:state",e],r=>{var s;let l=null!=r?r:i;return(l.activeForkKey&&a(l.activeForkKey),"function"==typeof n)?{...l,...n(l)}:(n.activeForkKey&&n.saveLeafMessageId&&e&&(delete n.saveLeafMessageId,o({chatId:e,activeForkKey:n.activeForkKey})),t(null!=(s=n.isStreaming)&&s),{...l,...n})})},[s,e,t,a,o])}function eh(){let e=eu(ed().chatId),{data:n}=(0,t.default)(["chat:state",e]);return{...null!=n?n:i,chatId:e}}function ef(){let e=eu(ed().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>{let t=null!=n?n:i;return{messages:t.messages,activeForkKey:t.activeForkKey,chatId:e}},[null==n?void 0:n.messages,null==n?void 0:n.activeForkKey,e])}function em(){let e=eu(ed().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>{let t=null!=n?n:i;return{isLoading:t.isLoading,isStreaming:t.isStreaming,isSyncing:t.isSyncing,isContinuing:t.isContinuing,isRestoring:t.isRestoring,initialStreamPromise:t.initialStreamPromise,chatId:e}},[null==n?void 0:n.isLoading,null==n?void 0:n.isStreaming,null==n?void 0:n.isSyncing,null==n?void 0:n.isContinuing,null==n?void 0:n.isRestoring,null==n?void 0:n.initialStreamPromise,e])}function eg(){var e;let n=eu(ed().chatId),{data:o}=(0,t.default)(["chat:state",n]),a=(0,r.useRef)(void 0);return(0,r.useMemo)(()=>{var e;let t=(null!=(e=null==o?void 0:o.messages)?e:i.messages).length;return a.current&&a.current.messagesLength===t&&a.current.chatId===n||(a.current={messagesLength:t,chatId:n}),a.current},[null==o||null==(e=o.messages)?void 0:e.length,n])}function ev(){let e=eu(ed().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({isAuthor:(null!=n?n:i).isAuthor,chatId:e}),[null==n?void 0:n.isAuthor,e])}function ex(){let e=eu(ed().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({undo:(null!=n?n:i).undo,chatId:e}),[null==n?void 0:n.undo,e])}function ey(){let e=eu(ed().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({lastSyncedAt:(null!=n?n:i).lastSyncedAt,chatId:e}),[null==n?void 0:n.lastSyncedAt,e])}function eb(){let e=eu(ed().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({prefillOptions:(null!=n?n:i).prefillOptions,chatId:e}),[null==n?void 0:n.prefillOptions,e])}function ew(){let e=eu(ed().chatId),{data:n}=(0,t.default)(["chat:state",e]);return(0,r.useMemo)(()=>({hashMessageId:(null!=n?n:i).hashMessageId,chatId:e}),[null==n?void 0:n.hashMessageId,e])}(0,ee.cacheResultById)(es,(e,t)=>({editingContent:(0,X.atom)(n=>{var r;let i=n(t).find(t=>t.id===e);return i&&"user"===i.role&&null!=(r=i.editingContent)?r:null}),editingAttachments:(0,X.atom)(n=>{var r;let i=n(t).find(t=>t.id===e);return i&&"user"===i.role&&null!=(r=i.editingAttachments)?r:null})}))},179381,(e,t,n)=>{t.exports=function(){this.__data__=[],this.size=0}},278744,(e,t,n)=>{t.exports=function(e,t){return e===t||e!=e&&t!=t}},756755,(e,t,n)=>{var r=e.r(278744);t.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return -1}},366612,(e,t,n)=>{var r=e.r(756755),i=Array.prototype.splice;t.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},280256,(e,t,n)=>{var r=e.r(756755);t.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},664751,(e,t,n)=>{var r=e.r(756755);t.exports=function(e){return r(this.__data__,e)>-1}},26145,(e,t,n)=>{var r=e.r(756755);t.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},922416,(e,t,n)=>{var r=e.r(179381),i=e.r(366612),o=e.r(280256),a=e.r(664751),s=e.r(26145);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},708027,(e,t,n)=>{var r=e.r(922416);t.exports=function(){this.__data__=new r,this.size=0}},205153,(e,t,n)=>{t.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},541364,(e,t,n)=>{t.exports=function(e){return this.__data__.get(e)}},689631,(e,t,n)=>{t.exports=function(e){return this.__data__.has(e)}},363883,(e,t,n)=>{var r=e.r(423748),i=e.r(791606),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";t.exports=function(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==l}},656921,(e,t,n)=>{t.exports=e.r(818408)["__core-js_shared__"]},763803,(e,t,n)=>{var r=e.r(656921),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=function(e){return!!i&&i in e}},395331,(e,t,n)=>{var r=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},732150,(e,t,n)=>{var r=e.r(363883),i=e.r(763803),o=e.r(791606),a=e.r(395331),s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Object.prototype,u=Function.prototype.toString,d=c.hasOwnProperty,p=RegExp("^"+u.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!o(e)||i(e))&&(r(e)?p:l).test(a(e))}},861686,(e,t,n)=>{t.exports=function(e,t){return null==e?void 0:e[t]}},622280,(e,t,n)=>{var r=e.r(732150),i=e.r(861686);t.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},74136,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"Map")},95269,(e,t,n)=>{t.exports=e.r(622280)(Object,"create")},814640,(e,t,n)=>{var r=e.r(95269);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},502814,(e,t,n)=>{t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},320134,(e,t,n)=>{var r=e.r(95269),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return o.call(t,e)?t[e]:void 0}},602951,(e,t,n)=>{var r=e.r(95269),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},479981,(e,t,n)=>{var r=e.r(95269),i="__lodash_hash_undefined__";t.exports=function(e,t){var n=this.__data__;return this.size+=+!this.has(e),n[e]=r&&void 0===t?i:t,this}},804937,(e,t,n)=>{var r=e.r(814640),i=e.r(502814),o=e.r(320134),a=e.r(602951),s=e.r(479981);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},662682,(e,t,n)=>{var r=e.r(804937),i=e.r(922416),o=e.r(74136);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},368725,(e,t,n)=>{t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},548365,(e,t,n)=>{var r=e.r(368725);t.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},591270,(e,t,n)=>{var r=e.r(548365);t.exports=function(e){var t=r(this,e).delete(e);return this.size-=!!t,t}},87911,(e,t,n)=>{var r=e.r(548365);t.exports=function(e){return r(this,e).get(e)}},923680,(e,t,n)=>{var r=e.r(548365);t.exports=function(e){return r(this,e).has(e)}},327495,(e,t,n)=>{var r=e.r(548365);t.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=+(n.size!=i),this}},141177,(e,t,n)=>{var r=e.r(662682),i=e.r(591270),o=e.r(87911),a=e.r(923680),s=e.r(327495);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},527270,(e,t,n)=>{var r=e.r(922416),i=e.r(74136),o=e.r(141177),a=200;t.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},875266,(e,t,n)=>{var r=e.r(922416),i=e.r(708027),o=e.r(205153),a=e.r(541364),s=e.r(689631),l=e.r(527270);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},239372,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},347474,(e,t,n)=>{var r=e.r(622280);t.exports=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},930215,(e,t,n)=>{var r=e.r(347474);t.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},263217,(e,t,n)=>{var r=e.r(930215),i=e.r(278744),o=Object.prototype.hasOwnProperty;t.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},606227,(e,t,n)=>{var r=e.r(263217),i=e.r(930215);t.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=o?o(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),a?i(n,c,u):r(n,c,u)}return n}},45203,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},648313,(e,t,n)=>{var r=e.r(423748),i=e.r(819674),o="[object Arguments]";t.exports=function(e){return i(e)&&r(e)==o}},417288,(e,t,n)=>{var r=e.r(648313),i=e.r(819674),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable;t.exports=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")}},272098,(e,t,n)=>{t.exports=Array.isArray},124019,(e,t,n)=>{t.exports=function(){return!1}},385370,(e,t,n)=>{var r=e.r(818408),i=e.r(124019),o=n&&!n.nodeType&&n,a=o&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0;t.exports=(s?s.isBuffer:void 0)||i},729582,(e,t,n)=>{var r=0x1fffffffffffff,i=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}},145373,(e,t,n)=>{var r=0x1fffffffffffff;t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},719575,(e,t,n)=>{var r=e.r(423748),i=e.r(145373),o=e.r(819674),a="[object Arguments]",s="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",p="[object Map]",h="[object Number]",f="[object Object]",m="[object RegExp]",g="[object Set]",v="[object String]",x="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",w="[object Float64Array]",j="[object Int8Array]",C="[object Int16Array]",k="[object Int32Array]",S="[object Uint8Array]",N="[object Uint8ClampedArray]",E="[object Uint16Array]",D="[object Uint32Array]",I={};I["[object Float32Array]"]=I[w]=I[j]=I[C]=I[k]=I[S]=I[N]=I[E]=I[D]=!0,I[a]=I[s]=I[y]=I[l]=I[b]=I[c]=I[u]=I[d]=I[p]=I[h]=I[f]=I[m]=I[g]=I[v]=I[x]=!1,t.exports=function(e){return o(e)&&i(e.length)&&!!I[r(e)]}},632900,(e,t,n)=>{t.exports=function(e){return function(t){return e(t)}}},29979,(e,t,n)=>{var r=e.r(472668),i=n&&!n.nodeType&&n,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process;t.exports=function(){try{var e=o&&o.require&&o.require("util").types;if(e)return e;return a&&a.binding&&a.binding("util")}catch(e){}}()},713376,(e,t,n)=>{var r=e.r(719575),i=e.r(632900),o=e.r(29979),a=o&&o.isTypedArray;t.exports=a?i(a):r},127424,(e,t,n)=>{var r=e.r(45203),i=e.r(417288),o=e.r(272098),a=e.r(385370),s=e.r(729582),l=e.r(713376),c=Object.prototype.hasOwnProperty;t.exports=function(e,t){var n=o(e),u=!n&&i(e),d=!n&&!u&&a(e),p=!n&&!u&&!d&&l(e),h=n||u||d||p,f=h?r(e.length,String):[],m=f.length;for(var g in e)(t||c.call(e,g))&&!(h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m)))&&f.push(g);return f}},570795,(e,t,n)=>{var r=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},991915,(e,t,n)=>{t.exports=function(e,t){return function(n){return e(t(n))}}},642918,(e,t,n)=>{t.exports=e.r(991915)(Object.keys,Object)},603114,(e,t,n)=>{var r=e.r(570795),i=e.r(642918),o=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},707850,(e,t,n)=>{var r=e.r(363883),i=e.r(145373);t.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},833089,(e,t,n)=>{var r=e.r(127424),i=e.r(603114),o=e.r(707850);t.exports=function(e){return o(e)?r(e):i(e)}},908687,(e,t,n)=>{var r=e.r(606227),i=e.r(833089);t.exports=function(e,t){return e&&r(t,i(t),e)}},242151,(e,t,n)=>{t.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},206645,(e,t,n)=>{var r=e.r(791606),i=e.r(570795),o=e.r(242151),a=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)"constructor"==s&&(t||!a.call(e,s))||n.push(s);return n}},975419,(e,t,n)=>{var r=e.r(127424),i=e.r(206645),o=e.r(707850);t.exports=function(e){return o(e)?r(e,!0):i(e)}},120341,(e,t,n)=>{var r=e.r(606227),i=e.r(975419);t.exports=function(e,t){return e&&r(t,i(t),e)}},44242,(e,t,n)=>{var r=e.r(818408),i=n&&!n.nodeType&&n,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},133442,(e,t,n)=>{t.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},419519,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},287024,(e,t,n)=>{t.exports=function(){return[]}},896852,(e,t,n)=>{var r=e.r(419519),i=e.r(287024),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;t.exports=a?function(e){return null==e?[]:r(a(e=Object(e)),function(t){return o.call(e,t)})}:i},603332,(e,t,n)=>{var r=e.r(606227),i=e.r(896852);t.exports=function(e,t){return r(e,i(e),t)}},334666,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},530968,(e,t,n)=>{t.exports=e.r(991915)(Object.getPrototypeOf,Object)},667874,(e,t,n)=>{var r=e.r(334666),i=e.r(530968),o=e.r(896852),a=e.r(287024);t.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a},983664,(e,t,n)=>{var r=e.r(606227),i=e.r(667874);t.exports=function(e,t){return r(e,i(e),t)}},41612,(e,t,n)=>{var r=e.r(334666),i=e.r(272098);t.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},628423,(e,t,n)=>{var r=e.r(41612),i=e.r(896852),o=e.r(833089);t.exports=function(e){return r(e,o,i)}},326640,(e,t,n)=>{var r=e.r(41612),i=e.r(667874),o=e.r(975419);t.exports=function(e){return r(e,o,i)}},531751,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"DataView")},31337,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"Promise")},511524,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"Set")},115942,(e,t,n)=>{t.exports=e.r(622280)(e.r(818408),"WeakMap")},626568,(e,t,n)=>{var r=e.r(531751),i=e.r(74136),o=e.r(31337),a=e.r(511524),s=e.r(115942),l=e.r(423748),c=e.r(395331),u="[object Map]",d="[object Object]",p="[object Promise]",h="[object Set]",f="[object WeakMap]",m="[object DataView]",g=c(r),v=c(i),x=c(o),y=c(a),b=c(s),w=l;(r&&w(new r(new ArrayBuffer(1)))!=m||i&&w(new i)!=u||o&&w(o.resolve())!=p||a&&w(new a)!=h||s&&w(new s)!=f)&&(w=function(e){var t=l(e),n=t==d?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return m;case v:return u;case x:return p;case y:return h;case b:return f}return t}),t.exports=w},137208,(e,t,n)=>{var r=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},533576,(e,t,n)=>{t.exports=e.r(818408).Uint8Array},688187,(e,t,n)=>{var r=e.r(533576);t.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},255438,(e,t,n)=>{var r=e.r(688187);t.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},997169,(e,t,n)=>{var r=/\w*$/;t.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},790793,(e,t,n)=>{var r=e.r(407667),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(e){return o?Object(o.call(e)):{}}},651235,(e,t,n)=>{var r=e.r(688187);t.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},299513,(e,t,n)=>{var r=e.r(688187),i=e.r(255438),o=e.r(997169),a=e.r(790793),s=e.r(651235),l="[object Boolean]",c="[object Date]",u="[object Map]",d="[object Number]",p="[object RegExp]",h="[object Set]",f="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",v="[object DataView]",x="[object Float32Array]",y="[object Float64Array]",b="[object Int8Array]",w="[object Int16Array]",j="[object Int32Array]",C="[object Uint8Array]",k="[object Uint8ClampedArray]",S="[object Uint16Array]",N="[object Uint32Array]";t.exports=function(e,t,n){var E=e.constructor;switch(t){case g:return r(e);case l:case c:return new E(+e);case v:return i(e,n);case x:case y:case b:case w:case j:case C:case k:case S:case N:return s(e,n);case u:return new E;case d:case f:return new E(e);case p:return o(e);case h:return new E;case m:return a(e)}}},116947,(e,t,n)=>{var r=e.r(791606),i=Object.create;t.exports=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}()},807299,(e,t,n)=>{var r=e.r(116947),i=e.r(530968),o=e.r(570795);t.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},44732,(e,t,n)=>{var r=e.r(626568),i=e.r(819674),o="[object Map]";t.exports=function(e){return i(e)&&r(e)==o}},249084,(e,t,n)=>{var r=e.r(44732),i=e.r(632900),o=e.r(29979),a=o&&o.isMap;t.exports=a?i(a):r},292596,(e,t,n)=>{var r=e.r(626568),i=e.r(819674),o="[object Set]";t.exports=function(e){return i(e)&&r(e)==o}},791316,(e,t,n)=>{var r=e.r(292596),i=e.r(632900),o=e.r(29979),a=o&&o.isSet;t.exports=a?i(a):r},716543,(e,t,n)=>{var r=e.r(875266),i=e.r(239372),o=e.r(263217),a=e.r(908687),s=e.r(120341),l=e.r(44242),c=e.r(133442),u=e.r(603332),d=e.r(983664),p=e.r(628423),h=e.r(326640),f=e.r(626568),m=e.r(137208),g=e.r(299513),v=e.r(807299),x=e.r(272098),y=e.r(385370),b=e.r(249084),w=e.r(791606),j=e.r(791316),C=e.r(833089),k=e.r(975419),S=1,N=2,E=4,D="[object Arguments]",I="[object Array]",A="[object Boolean]",T="[object Date]",M="[object Error]",L="[object Function]",P="[object GeneratorFunction]",R="[object Map]",_="[object Number]",O="[object Object]",F="[object RegExp]",B="[object Set]",V="[object String]",z="[object Symbol]",H="[object WeakMap]",U="[object ArrayBuffer]",G="[object DataView]",W="[object Float32Array]",q="[object Float64Array]",Z="[object Int8Array]",K="[object Int16Array]",$="[object Int32Array]",Y="[object Uint8Array]",J="[object Uint8ClampedArray]",Q="[object Uint16Array]",X="[object Uint32Array]",ee={};function et(e,t,n,I,A,T){var M,R=t&S,_=t&N,F=t&E;if(n&&(M=A?n(e,I,A,T):n(e)),void 0!==M)return M;if(!w(e))return e;var B=x(e);if(B){if(M=m(e),!R)return c(e,M)}else{var V=f(e),z=V==L||V==P;if(y(e))return l(e,R);if(V==O||V==D||z&&!A){if(M=_||z?{}:v(e),!R)return _?d(e,s(M,e)):u(e,a(M,e))}else{if(!ee[V])return A?e:{};M=g(e,V,R)}}T||(T=new r);var H=T.get(e);if(H)return H;T.set(e,M),j(e)?e.forEach(function(r){M.add(et(r,t,n,r,e,T))}):b(e)&&e.forEach(function(r,i){M.set(i,et(r,t,n,i,e,T))});var U=F?_?h:p:_?k:C,G=B?void 0:U(e);return i(G||e,function(r,i){G&&(r=e[i=r]),o(M,i,et(r,t,n,i,e,T))}),M}ee[D]=ee[I]=ee[U]=ee[G]=ee[A]=ee[T]=ee[W]=ee[q]=ee[Z]=ee[K]=ee[$]=ee[R]=ee[_]=ee[O]=ee[F]=ee[B]=ee[V]=ee[z]=ee[Y]=ee[J]=ee[Q]=ee[X]=!0,ee[M]=ee[L]=ee[H]=!1,t.exports=et},120311,(e,t,n)=>{var r=e.r(716543),i=1,o=4;t.exports=function(e){return r(e,i|o)}},75356,e=>{"use strict";let t=24;e.s(["PROJECT_PAGE_SIZE",0,t])},443324,(e,t,n)=>{var r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,function(n){return i(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":o._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var n=Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach(function(t){a.push(e(t))}),o.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,function(t){return i(n,e.charAt(t))}))},compress:function(t){return o._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var r,i,o,a={},s={},l="",c="",u="",d=2,p=3,h=2,f=[],m=0,g=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(a,l)||(a[l]=p++,s[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(a,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(256>u.charCodeAt(0)){for(r=0;r<h;r++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=0,i=u.charCodeAt(0);r<8;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(r=0,i=1;r<h;r++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(r=0,i=u.charCodeAt(0);r<16;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[u]}else for(r=0,i=a[u];r<h;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--d&&(d=Math.pow(2,h),h++),a[c]=p++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(256>u.charCodeAt(0)){for(r=0;r<h;r++)m<<=1,g==t-1?(g=0,f.push(n(m)),m=0):g++;for(r=0,i=u.charCodeAt(0);r<8;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}else{for(r=0,i=1;r<h;r++)m=m<<1|i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i=0;for(r=0,i=u.charCodeAt(0);r<16;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[u]}else for(r=0,i=a[u];r<h;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;0==--d&&(d=Math.pow(2,h),h++)}for(r=0,i=2;r<h;r++)m=m<<1|1&i,g==t-1?(g=0,f.push(n(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){f.push(n(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var i,o,a,s,l,c,u,d,p=[],h=4,f=4,m=3,g="",v=[],x={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)p[o]=o;for(s=0,c=4,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;switch(i=s){case 0:for(s=0,c=256,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;d=e(s);break;case 1:for(s=0,c=65536,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;d=e(s);break;case 2:return""}for(p[3]=d,a=d,v.push(d);;){if(x.index>t)return"";for(s=0,c=Math.pow(2,m),u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;switch(d=s){case 0:for(s=0,c=256,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;p[f++]=e(s),d=f-1,h--;break;case 1:for(s=0,c=65536,u=1;u!=c;)l=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),s|=(l>0)*u,u<<=1;p[f++]=e(s),d=f-1,h--;break;case 2:return v.join("")}if(0==h&&(h=Math.pow(2,m),m++),p[d])g=p[d];else{if(d!==f)return null;g=a+a.charAt(0)}v.push(g),p[f++]=a+g.charAt(0),h--,a=g,0==h&&(h=Math.pow(2,m),m++)}}};return o}();"function"==typeof define&&define.amd?(t=>void 0!==t&&e.v(t))((e.r,r)):null!=t?t.exports=r:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return r})},254211,941813,569543,e=>{"use strict";var t=e.i(490293);let n=10,r=50;e.s(["MAX_FAVORITES",0,n,"MAX_RECENT_CHATS",0,r],941813);var i=e.i(75356),o=e.i(443324);e.i(541536);var a=e.i(23474),s=e.i(917675);let l=a.z.object({webSearch:a.z.boolean(),generateImages:a.z.boolean(),designSystemId:a.z.string().nullable().default(null)}),c="v0-durable-chat-state",u=a.z.object({lastUpdated:a.z.number()}),d={lastUpdated:D()},p="v0-durable-scoped-state",h=a.z.object({sidebarRecentChatsSkeleton:a.z.number(),sidebarFavoriteChatsAndProjectsSkeleton:a.z.number(),sidebarRecentChatsCollapsed:a.z.boolean(),sidebarFavoriteChatsAndProjectsCollapsed:a.z.boolean(),projectsSkeleton:a.z.number(),lastUpdated:a.z.number()}),f={sidebarRecentChatsSkeleton:Math.floor(r/2),sidebarFavoriteChatsAndProjectsSkeleton:Math.floor(n),sidebarRecentChatsCollapsed:!1,sidebarFavoriteChatsAndProjectsCollapsed:!1,projectsSkeleton:i.PROJECT_PAGE_SIZE,lastUpdated:D()},m="v0-durable-root-state",g=a.z.enum(["build","ask"]),v=a.z.object({ratio:a.z.number(),visible:a.z.boolean().default(!0),savedRatio:a.z.number().optional(),savedVisibility:a.z.boolean().optional()}),x="input",y="output",b=v.extend({id:a.z.literal(x)}),w=v.extend({id:a.z.literal(y)}),j=a.z.union([b,w]),C=a.z.object({sidebarCollapsed:a.z.boolean(),lastUpdated:a.z.number(),modelConfiguration:s.ModelConfigurationSchema,toolConfiguration:l,messageMode:g,shouldShowUpgrade:a.z.boolean().default(!1),chatPanelLayout:a.z.array(j),chatMobilePanel:a.z.enum([x,y]),dismissedFeatureDialogs:a.z.record(a.z.string(),a.z.boolean()).default({})}),k={sidebarCollapsed:!1,lastUpdated:D(),modelConfiguration:{modelId:"v0-1.5-md",thinking:!1,imageGenerations:!1},toolConfiguration:{webSearch:!0,generateImages:!0,designSystemId:null},messageMode:"build",shouldShowUpgrade:!1,chatMobilePanel:x,chatPanelLayout:[{id:x,ratio:.3,visible:!0},{id:y,ratio:.7,visible:!0}],dismissedFeatureDialogs:{}},S={chat:{schema:u,keyedSchema:a.z.record(a.z.string(),u),cookieKey:c},scoped:{schema:h,keyedSchema:a.z.record(a.z.string(),h),cookieKey:p},root:{schema:C,keyedSchema:a.z.record(a.z.literal("root"),C),cookieKey:m}};function N(e,t){try{if(!t)return null;let n=(0,o.decompressFromBase64)(t);if(!n)return null;let r=JSON.parse(n),i=e.safeParse(r);if(!i.success)throw Error("Invalid durable state",{cause:i.error});return i.data}catch(e){return console.warn("Error parsing durable state cookie:",e),null}}function E(e){return(0,o.compressToBase64)(JSON.stringify(e))}function D(){let e=new Date,t=e.getFullYear()%100,n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return parseInt("".concat(t).concat(n).concat(r).concat(i).concat(o))}function I(e,t){return e-t}e.s(["CHAT_INPUT_PANEL_ID",0,x,"CHAT_OUTPUT_PANEL_ID",0,y,"DEFAULT_DURABLE_CHAT_STATE",0,d,"DEFAULT_DURABLE_ROOT_STATE",0,k,"DEFAULT_DURABLE_SCOPED_STATE",0,f,"DURABLE_STORES",0,S,"compareCompactTimestamps",()=>I,"compressDurableState",()=>E,"getCurrentCompactTimestamp",()=>D,"parseDurableStateCookie",()=>N],569543);var A=e.i(753533),T=e.i(142219),M=e.i(162061);let L=2048;function P(e){let t=S[e],n=M.default.get(t.cookieKey);return N(t.keyedSchema,n)}function R(e,t,n){let r=P(e),i={[t]:n},o={...r,...i},a=E(o);for(;a.length>L&&Object.keys(o).length>0;){let e=_(o);if(!e)break;delete o[e],a=E(o)}M.default.set(S[e].cookieKey,a,{expires:365})}function _(e){var t;return null!=(t=Object.entries(e).sort((e,t)=>{let[,n]=e,[,r]=t;return I(n.lastUpdated,r.lastUpdated)}).map(e=>{let[t]=e;return t})[0])?t:null}let O={chat:new Map,scoped:new Map,root:new Map},F=(0,A.cacheResultById)(O.chat,e=>{let n=B(e);function r(e,t,n){let r=B(e);R("chat",e,{...r,[t]:n,lastUpdated:D()})}let i=(0,t.atom)(n.lastUpdated,(t,n,o)=>{r(e,"lastUpdated",o),n(i,o)});return{lastUpdated:i}});function B(e,t){if(t&&e in t)return t[e];let n=z(e);if(n)return n;let r=V(e);if(r)return R("chat",e,r),r;let i=d;return R("chat",e,i),i}function V(e){let t=O.chat.get(e);return t?{lastUpdated:T.store.get(t.lastUpdated)}:null}function z(e){let t=P("chat");return t&&e in t?t[e]:null}let H=(0,A.cacheResultById)(O.scoped,e=>{let n=U(e);function r(e,t,n){let r=U(e);R("scoped",e,{...r,[t]:n,lastUpdated:D()})}let i=(0,t.atom)(n.sidebarRecentChatsSkeleton,(t,n,o)=>{r(e,"sidebarRecentChatsSkeleton",o),n(i,o)}),o=(0,t.atom)(n.sidebarFavoriteChatsAndProjectsSkeleton,(t,n,i)=>{r(e,"sidebarFavoriteChatsAndProjectsSkeleton",i),n(o,i)}),a=(0,t.atom)(n.sidebarRecentChatsCollapsed,(t,n,i)=>{r(e,"sidebarRecentChatsCollapsed",i),n(a,i)}),s=(0,t.atom)(n.sidebarFavoriteChatsAndProjectsCollapsed,(t,n,i)=>{r(e,"sidebarFavoriteChatsAndProjectsCollapsed",i),n(s,i)}),l=(0,t.atom)(n.projectsSkeleton,(t,n,i)=>{r(e,"projectsSkeleton",i),n(l,i)}),c=(0,t.atom)(n.lastUpdated,(t,n,i)=>{r(e,"lastUpdated",i),n(c,i)});return{sidebarRecentChatsSkeleton:i,sidebarFavoriteChatsAndProjectsSkeleton:o,sidebarRecentChatsCollapsed:a,sidebarFavoriteChatsAndProjectsCollapsed:s,projectsSkeleton:l,lastUpdated:c}});function U(e,t){if(t&&e in t)return t[e];let n=W(e);if(n)return n;let r=G(e);if(r)return R("scoped",e,r),r;let i=f;return R("scoped",e,i),i}function G(e){let t=O.scoped.get(e);if(!t)return null;let n=T.store.get(t.sidebarRecentChatsSkeleton),r=T.store.get(t.sidebarFavoriteChatsAndProjectsSkeleton),i=T.store.get(t.sidebarRecentChatsCollapsed),o=T.store.get(t.sidebarFavoriteChatsAndProjectsCollapsed);return{sidebarRecentChatsSkeleton:n,sidebarFavoriteChatsAndProjectsSkeleton:r,sidebarRecentChatsCollapsed:i,sidebarFavoriteChatsAndProjectsCollapsed:o,projectsSkeleton:T.store.get(t.projectsSkeleton),lastUpdated:T.store.get(t.lastUpdated)}}function W(e){let t=P("scoped");return t&&e in t?t[e]:null}let q=(0,A.cacheResultById)(O.root,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";if("root"!==e)throw Error('Invalid rootId, must be "root"');let n=Z(e);function r(e,t,n){let r=Z(e);R("root",e,{...r,[t]:n,lastUpdated:D()})}let i=(0,t.atom)(n.sidebarCollapsed,(t,n,o)=>{r(e,"sidebarCollapsed",o),n(i,o)}),o=(0,t.atom)(n.lastUpdated,(t,n,i)=>{r(e,"lastUpdated",i),n(o,i)}),a=(0,t.atom)(n.modelConfiguration,(t,n,i)=>{r(e,"modelConfiguration",i),n(a,i)}),s=(0,t.atom)(n.messageMode,(t,n,i)=>{r(e,"messageMode",i),n(s,i)}),l=(0,t.atom)(n.shouldShowUpgrade,(t,n,i)=>{r(e,"shouldShowUpgrade",i),n(l,i)}),c=(0,t.atom)(n.chatPanelLayout,(t,n,i)=>{r(e,"chatPanelLayout",i),n(c,i)}),u=(0,t.atom)(n.chatMobilePanel,(t,n,i)=>{r(e,"chatMobilePanel",i),n(u,i)}),d=(0,t.atom)(n.dismissedFeatureDialogs,(t,n,i)=>{r(e,"dismissedFeatureDialogs",i),n(d,i)}),p=(0,t.atom)(n.toolConfiguration,(t,n,i)=>{r(e,"toolConfiguration",i),n(p,i)});return{sidebarCollapsed:i,lastUpdated:o,modelConfiguration:a,toolConfiguration:p,messageMode:s,shouldShowUpgrade:l,chatPanelLayout:c,chatMobilePanel:u,dismissedFeatureDialogs:d}});function Z(e,t){if(t&&e in t&&t[e])return t[e];let n=$(e);if(n)return n;let r=K(e);if(r)return R("root",e,r),r;let i=k;return R("root",e,i),i}function K(e){let t=O.root.get(e);if(!t)return null;let n=T.store.get(t.sidebarCollapsed),r=T.store.get(t.lastUpdated),i=T.store.get(t.modelConfiguration),o=T.store.get(t.toolConfiguration),a=T.store.get(t.messageMode),s=T.store.get(t.shouldShowUpgrade),l=T.store.get(t.chatPanelLayout);return{sidebarCollapsed:n,lastUpdated:r,modelConfiguration:i,toolConfiguration:o,messageMode:a,shouldShowUpgrade:s,chatPanelLayout:l,chatMobilePanel:T.store.get(t.chatMobilePanel),dismissedFeatureDialogs:T.store.get(t.dismissedFeatureDialogs)}}function $(e){let t=P("root");return t&&e in t&&t[e]?t[e]:null}function Y(e){let t={chat:[],scoped:[],root:[]};for(let n of Object.keys(S)){let r=(null==e?void 0:e[n])?Object.keys(e[n]):[],i=P(n),o=new Set([...i?Object.keys(i):[],...Array.from(O[n].keys()),...r]);t[n]=Array.from(o)}return t}e.s(["getDurableChatAtoms",0,F,"getDurableChatState",()=>B,"getDurableRootAtoms",0,q,"getDurableRootState",()=>Z,"getDurableScopedAtoms",0,H,"getDurableScopedState",()=>U,"getDurableStateKeys",()=>Y],254211)},647370,(e,t,n)=>{var r="__lodash_hash_undefined__";t.exports=function(e){return this.__data__.set(e,r),this}},403852,(e,t,n)=>{t.exports=function(e){return this.__data__.has(e)}},25964,(e,t,n)=>{var r=e.r(141177),i=e.r(647370),o=e.r(403852);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},577484,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},689808,(e,t,n)=>{t.exports=function(e,t){return e.has(t)}},275483,(e,t,n)=>{var r=e.r(25964),i=e.r(577484),o=e.r(689808),a=1,s=2;t.exports=function(e,t,n,l,c,u){var d=n&a,p=e.length,h=t.length;if(p!=h&&!(d&&h>p))return!1;var f=u.get(e),m=u.get(t);if(f&&m)return f==t&&m==e;var g=-1,v=!0,x=n&s?new r:void 0;for(u.set(e,t),u.set(t,e);++g<p;){var y=e[g],b=t[g];if(l)var w=d?l(b,y,g,t,e,u):l(y,b,g,e,t,u);if(void 0!==w){if(w)continue;v=!1;break}if(x){if(!i(t,function(e,t){if(!o(x,t)&&(y===e||c(y,e,n,l,u)))return x.push(t)})){v=!1;break}}else if(!(y===b||c(y,b,n,l,u))){v=!1;break}}return u.delete(e),u.delete(t),v}},380060,(e,t,n)=>{t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},449123,(e,t,n)=>{t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},339965,(e,t,n)=>{var r=e.r(407667),i=e.r(533576),o=e.r(278744),a=e.r(275483),s=e.r(380060),l=e.r(449123),c=1,u=2,d="[object Boolean]",p="[object Date]",h="[object Error]",f="[object Map]",m="[object Number]",g="[object RegExp]",v="[object Set]",x="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",j=r?r.prototype:void 0,C=j?j.valueOf:void 0;t.exports=function(e,t,n,r,j,k,S){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case b:if(e.byteLength!=t.byteLength||!k(new i(e),new i(t)))break;return!0;case d:case p:case m:return o(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case x:return e==t+"";case f:var N=s;case v:var E=r&c;if(N||(N=l),e.size!=t.size&&!E)break;var D=S.get(e);if(D)return D==t;r|=u,S.set(e,t);var I=a(N(e),N(t),r,j,k,S);return S.delete(e),I;case y:if(C)return C.call(e)==C.call(t)}return!1}},703206,(e,t,n)=>{var r=e.r(628423),i=1,o=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,a,s,l){var c=n&i,u=r(e),d=u.length;if(d!=r(t).length&&!c)return!1;for(var p=d;p--;){var h=u[p];if(!(c?h in t:o.call(t,h)))return!1}var f=l.get(e),m=l.get(t);if(f&&m)return f==t&&m==e;var g=!0;l.set(e,t),l.set(t,e);for(var v=c;++p<d;){var x=e[h=u[p]],y=t[h];if(a)var b=c?a(y,x,h,t,e,l):a(x,y,h,e,t,l);if(!(void 0===b?x===y||s(x,y,n,a,l):b)){g=!1;break}v||(v="constructor"==h)}if(g&&!v){var w=e.constructor,j=t.constructor;w!=j&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof j&&j instanceof j)&&(g=!1)}return l.delete(e),l.delete(t),g}},954525,(e,t,n)=>{var r=e.r(875266),i=e.r(275483),o=e.r(339965),a=e.r(703206),s=e.r(626568),l=e.r(272098),c=e.r(385370),u=e.r(713376),d=1,p="[object Arguments]",h="[object Array]",f="[object Object]",m=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,g,v,x){var y=l(e),b=l(t),w=y?h:s(e),j=b?h:s(t);w=w==p?f:w,j=j==p?f:j;var C=w==f,k=j==f,S=w==j;if(S&&c(e)){if(!c(t))return!1;y=!0,C=!1}if(S&&!C)return x||(x=new r),y||u(e)?i(e,t,n,g,v,x):o(e,t,w,n,g,v,x);if(!(n&d)){var N=C&&m.call(e,"__wrapped__"),E=k&&m.call(t,"__wrapped__");if(N||E){var D=N?e.value():e,I=E?t.value():t;return x||(x=new r),v(D,I,n,g,x)}}return!!S&&(x||(x=new r),a(e,t,n,g,v,x))}},733698,(e,t,n)=>{var r=e.r(954525),i=e.r(819674);function o(e,t,n,a,s){return e===t||(null!=e&&null!=t&&(i(e)||i(t))?r(e,t,n,a,o,s):e!=e&&t!=t)}t.exports=o},40455,(e,t,n)=>{var r=e.r(733698);t.exports=function(e,t){return r(e,t)}},562489,e=>{"use strict";var t=e.i(490293);let n={get url(){return`file://${e.P("node_modules/.pnpm/jotai@2.8.0_@types+react@19.1.13_react@19.1.1/node_modules/jotai/esm/vanilla/utils.mjs")}`}},r=Symbol((n.env?n.env.MODE:void 0)!=="production"?"RESET":""),i=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),o=new WeakMap,a=(e,t,n,r)=>{let a=i(()=>new WeakMap,o,t),s=i(()=>new WeakMap,a,n);return i(e,s,r)};function s(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;return a(()=>{let i=Symbol(),o=e=>{let[t,o]=e;if(o===i)return n(t);let a=n(t,o);return r(o,a)?o:a},a=(0,t.atom)(t=>{let n=t(a);return o([t(e),n])});return a.init=i,a},e,n,r)}let l=e=>"function"==typeof(null==e?void 0:e.then),c=function(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{try{return window.localStorage}catch(e){(n.env?n.env.MODE:void 0)!=="production"&&"undefined"!=typeof window&&console.warn(e);return}},i=arguments.length>1?arguments[1]:void 0,o={getItem:(n,o)=>{var a,s;let c=n=>{if(e!==(n=n||"")){try{t=JSON.parse(n,null==i?void 0:i.reviver)}catch(e){return o}e=n}return t},u=null!=(s=null==(a=r())?void 0:a.getItem(n))?s:null;return l(u)?u.then(c):c(u)},setItem:(e,t)=>{var n;return null==(n=r())?void 0:n.setItem(e,JSON.stringify(t,null==i?void 0:i.replacer))},removeItem:e=>{var t;return null==(t=r())?void 0:t.removeItem(e)}};return"undefined"!=typeof window&&"function"==typeof window.addEventListener&&window.Storage&&(o.subscribe=(e,t,n)=>{if(!(r()instanceof window.Storage))return()=>{};let i=i=>{if(i.storageArea===r()&&i.key===e){let e;try{e=JSON.parse(i.newValue||"")}catch(t){e=n}t(e)}};return window.addEventListener("storage",i),()=>{window.removeEventListener("storage",i)}}),o}();function u(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,a=arguments.length>3?arguments[3]:void 0,s=null==a?void 0:a.getOnInit,l=(0,t.atom)(s?o.getItem(e,i):i);return(n.env?n.env.MODE:void 0)!=="production"&&(l.debugPrivate=!0),l.onMount=t=>{let n;return t(o.getItem(e,i)),o.subscribe&&(n=o.subscribe(e,t,i)),n},(0,t.atom)(e=>e(l),(t,n,a)=>{let s="function"==typeof a?a(t(l)):a;return s===r?(n(l,i),o.removeItem(e)):s instanceof Promise?s.then(t=>(n(l,t),o.setItem(e,t))):(n(l,s),o.setItem(e,s))})}e.s(["atomWithStorage",()=>u,"selectAtom",()=>s])},418929,894688,695608,874486,187195,838208,313084,124251,213917,632814,770496,73687,654225,605667,e=>{"use strict";var t=e.i(490293),n=e.i(753533),r=e.i(142219),i=e.i(53223),o=e.i(509473);e.i(541536);var a=e.i(23474),s=i,l=e.i(120311),c=a,u=o,d=e.i(486011),p=o;function h(e){this.content=e}e.s([],894688),h.prototype={constructor:h,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return -1==i?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new h(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new h(n)},addToStart:function(e,t){return new h([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new h(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(-1==o?i.length:o,0,t,n),new h(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=h.from(e)).size?new h(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=h.from(e)).size?new h(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=h.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},h.from=function(e){if(e instanceof h)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new h(t)};let f=h;function m(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),o=t.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let e=0;i.text[e]==o.text[e];e++)n++;return n}if(i.content.size||o.content.size){let e=m(i.content,o.content,n+1);if(null!=e)return e}n+=i.nodeSize}}function g(e,t,n,r){for(let i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let a=e.child(--i),s=t.child(--o),l=a.nodeSize;if(a==s){n-=l,r-=l;continue}if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){let e=0,t=Math.min(a.text.length,s.text.length);for(;e<t&&a.text[a.text.length-e-1]==s.text[s.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){let e=g(a.content,s.content,n-1,r-1);if(e)return e}n-=l,r-=l}}class v{nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;for(let o=0,a=0;a<t;o++){let s=this.content[o],l=a+s.nodeSize;if(l>e&&!1!==n(s,r+a,i||null,o)&&s.content.size){let i=a+1;s.nodesBetween(Math.max(0,e-i),Math.min(s.content.size,t-i),n,r+i)}a=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,(a,s)=>{let l=a.isText?a.text.slice(Math.max(e,s)-s,t-s):a.isLeaf?r?"function"==typeof r?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&l||a.isTextblock)&&n&&(o?o=!1:i+=n),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new v(r,this.size+e.size)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let a=this.content[i],s=o+a.nodeSize;s>e&&((o<e||s>t)&&(a=a.isText?a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),n.push(a),r+=a.nodeSize),o=s}return new v(n,r)}cutByIndex(e,t){return e==t?v.empty:0==e&&t==this.content.length?this:new v(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new v(r,i)}addToStart(e){return new v([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new v(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return m(this,e,t)}findDiffEnd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size;return g(this,e,t,n)}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return y(0,e);if(e==this.size)return y(this.content.length,e);if(e>this.size||e<0)throw RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e){if(i==e||t>0)return y(n+1,i);return y(n,r)}r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return v.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new v(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return v.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new v(t||e,n)}static from(e){if(!e)return v.empty;if(e instanceof v)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new v([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}}v.empty=new v([],0);let x={index:0,offset:0};function y(e,t){return x.index=e,x.offset=t,x}function b(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!b(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!b(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class w{addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&b(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError("There is no mark type ".concat(t.type," in this schema"));let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return w.none;if(e instanceof w)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}constructor(e,t){this.type=e,this.attrs=t}}w.none=[];class j extends Error{}class C{get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=S(this.content,e+this.openStart,t);return n&&new C(n,this.openStart,this.openEnd)}removeBetween(e,t){return new C(k(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return C.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw RangeError("Invalid input for Slice.fromJSON");return new C(v.fromJSON(e,t.content),n,r)}static maxOpen(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new C(e,n,r)}constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}}function k(e,t,n){let{index:r,offset:i}=e.findIndex(t),o=e.maybeChild(r),{index:a,offset:s}=e.findIndex(n);if(i==t||o.isText){if(s!=n&&!e.child(a).isText)throw RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=a)throw RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(k(o.content,t-i-1,n-i-1)))}function S(e,t,n,r){let{index:i,offset:o}=e.findIndex(t),a=e.maybeChild(i);if(o==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let s=S(a.content,t-o-1,n);return s&&e.replaceChild(i,a.copy(s))}function N(e,t,n){if(n.openStart>e.depth)throw new j("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new j("Inconsistent open depths");return E(e,t,n,0)}function E(e,t,n,r){let i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let a=E(e,t,n,r+1);return o.copy(o.content.replaceChild(i,a))}if(!n.content.size)return M(o,P(e,t,r));if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:i,end:a}=R(n,e);return M(o,L(e,i,a,t,r))}{let r=e.parent,i=r.content;return M(r,i.cut(0,e.parentOffset).append(n.content).append(i.cut(t.parentOffset)))}}function D(e,t){if(!t.type.compatibleContent(e.type))throw new j("Cannot join "+t.type.name+" onto "+e.type.name)}function I(e,t,n){let r=e.node(n);return D(r,t.node(n)),r}function A(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function T(e,t,n,r){let i=(t||e).node(n),o=0,a=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(A(e.nodeAfter,r),o++));for(let e=o;e<a;e++)A(i.child(e),r);t&&t.depth==n&&t.textOffset&&A(t.nodeBefore,r)}function M(e,t){return e.type.checkContent(t),e.copy(t)}function L(e,t,n,r,i){let o=e.depth>i&&I(e,t,i+1),a=r.depth>i&&I(n,r,i+1),s=[];return T(null,e,i,s),o&&a&&t.index(i)==n.index(i)?(D(o,a),A(M(o,L(e,t,n,r,i+1)),s)):(o&&A(M(o,P(e,t,i+1)),s),T(t,n,i,s),a&&A(M(a,P(n,r,i+1)),s)),T(r,null,i,s),new v(s)}function P(e,t,n){let r=[];return T(null,e,n,r),e.depth>n&&A(M(I(e,t,n+1),P(e,t,n+1)),r),T(t,null,n,r),new v(r)}function R(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(v.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}C.empty=new C(v.empty,0,0);class _{resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return w.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new V(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let t=e;;){let{index:e,offset:o}=t.content.findIndex(i),a=i-o;if(n.push(t,e,r+o),!a||(t=t.child(e)).isText)break;i=a-1,r+=o+1}return new _(t,n,i)}static resolveCached(e,t){let n=B.get(e);if(n)for(let e=0;e<n.elts.length;e++){let r=n.elts[e];if(r.pos==t)return r}else B.set(e,n=new O);let r=n.elts[n.i]=_.resolve(e,t);return n.i=(n.i+1)%F,r}constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}}class O{constructor(){this.elts=[],this.i=0}}let F=12,B=new WeakMap;class V{get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}}let z=Object.create(null);class H{get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&b(this.attrs,t||e.defaultAttrs||z)&&w.sameSet(this.marks,n||w.none)}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new H(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new H(this.type,this.attrs,this.content,e)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return C.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),a=r.start(o);return new C(r.node(o).content.cut(r.pos-a,i.pos-a),r.depth-o,i.depth-o)}replace(e,t,n){return N(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return _.resolveCached(this,e)}resolveNoCache(e){return _.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),G(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,o=this.contentMatchAt(e).matchFragment(n,r,i),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let e=r;e<i;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=w.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!w.sameSet(e,this.marks))throw RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map(e=>e.type.name)));this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let n;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=v.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,r,n);return i.type.checkAttrs(i.attrs),i}constructor(e,t,n,r=w.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||v.empty}}H.prototype.text=void 0;class U extends H{toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):G(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new U(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new U(this.type,this.attrs,e,this.marks)}cut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}constructor(e,t,n,r){if(super(e,t,null,r),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}}function G(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class W{static parse(e,t){let n=new q(e,t);if(null==n.next)return W.empty;let r=Z(n);n.next&&n.err("Unexpected trailing text");let i=er(ee(r));return ei(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];function i(o,a){let s=o.matchFragment(e,n);if(s&&(!t||s.validEnd))return v.from(a.map(e=>e.createAndFill()));for(let e=0;e<o.next.length;e++){let{type:t,next:n}=o.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==r.indexOf(n)){r.push(n);let e=i(n,a.concat(t));if(e)return e}}return null}return i(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:a}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!a.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}return t(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}}W.empty=new W(!0);class q{get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}}function Z(e){let t=[];do t.push(K(e));while(e.eat("|"))return 1==t.length?t[0]:{type:"choice",exprs:t}}function K(e){let t=[];do t.push($(e));while(e.next&&")"!=e.next&&"|"!=e.next)return 1==t.length?t[0]:{type:"seq",exprs:t}}function $(e){let t=X(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=J(e,t);else break;return t}function Y(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function J(e,t){let n=Y(e),r=n;return e.eat(",")&&(r="}"!=e.next?Y(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Q(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.isInGroup(t)&&i.push(r)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}function X(e){if(e.eat("(")){let t=Z(e);return e.eat(")")||e.err("Missing closing paren"),t}if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=Q(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}}function ee(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}function o(e,t){if("choice"==e.type)return e.exprs.reduce((e,n)=>e.concat(o(n,t)),[]);if("seq"==e.type)for(let r=0;;r++){let a=o(e.exprs[r],t);if(r==e.exprs.length-1)return a;i(a,t=n())}else if("star"==e.type){let a=n();return r(t,a),i(o(e.expr,a),a),[r(a)]}else if("plus"==e.type){let a=n();return i(o(e.expr,t),a),i(o(e.expr,a),a),[r(a)]}else if("opt"==e.type)return[r(t)].concat(o(e.expr,t));else if("range"==e.type){let a=t;for(let t=0;t<e.min;t++){let t=n();i(o(e.expr,a),t),a=t}if(-1==e.max)i(o(e.expr,a),a);else for(let t=e.min;t<e.max;t++){let t=n();r(a,t),i(o(e.expr,a),t),a=t}return[r(a)]}else if("name"==e.type)return[r(t,void 0,e.value)];else throw Error("Unknown expr type")}}function et(e,t){return t-e}function en(e,t){let n=[];return r(t),n.sort(et);function r(t){let i=e[t];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(t);for(let e=0;e<i.length;e++){let{term:t,to:o}=i[e];t||-1!=n.indexOf(o)||r(o)}}}function er(e){let t=Object.create(null);return n(en(e,0));function n(r){let i=[];r.forEach(t=>{e[t].forEach(t=>{let n,{term:r,to:o}=t;if(r){for(let e=0;e<i.length;e++)i[e][0]==r&&(n=i[e][1]);en(e,o).forEach(e=>{n||i.push([r,n=[]]),-1==n.indexOf(e)&&n.push(e)})}})});let o=t[r.join(",")]=new W(r.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let r=i[e][1].sort(et);o.next.push({type:i[e][0],next:t[r.join(",")]||n(r)})}return o}}function ei(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:a}=e.next[t];o.push(n.name),i&&!(n.isText||n.hasRequiredAttrs())&&(i=!1),-1==r.indexOf(a)&&r.push(a)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function eo(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function ea(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(t.hasDefault)i=t.default;else throw RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function es(e,t,n,r){for(let r in t)if(!(r in e))throw RangeError("Unsupported attribute ".concat(r," for ").concat(n," of type ").concat(r));for(let n in e){let r=e[n];r.validate&&r.validate(t[n])}}function el(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new ed(e,r,t[r]);return n}class ec{get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==W.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ea(this.attrs,e)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw Error("NodeType.create can't construct text nodes");return new H(this,this.computeAttrs(e),v.from(t),w.setFrom(n))}createChecked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=v.from(t),this.checkContent(t),new H(this,this.computeAttrs(e),t,w.setFrom(n))}createAndFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),(t=v.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(v.empty,!0);return i?new H(this,e,t.append(i),w.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError("Invalid content for node ".concat(this.name,": ").concat(e.toString().slice(0,50)))}checkAttrs(e){es(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:w.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new ec(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=el(e,n.attrs),this.defaultAttrs=eo(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}}function eu(e,t,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(0>r.indexOf(i))throw RangeError("Expected value of type ".concat(r," for attribute ").concat(t," on type ").concat(e,", got ").concat(i))}}class ed{get isRequired(){return!this.hasDefault}constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?eu(e,t,n.validate):n.validate}}class ep{create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new w(this,ea(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,i)=>n[e]=new ep(e,r++,t,i)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){es(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=el(e,r.attrs),this.excluded=null;let i=eo(this.attrs);this.instance=i?new w(this,i):null}}class eh{node(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else if(e instanceof ec){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new U(n,n.defaultAttrs,e,w.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return H.fromJSON(this,e)}markFromJSON(e){return w.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=f.from(e.nodes),t.marks=f.from(e.marks||{}),this.nodes=ec.compile(this.spec.nodes,this),this.marks=ep.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[r]||(n[r]=W.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?ef(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:ef(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}}function ef(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],a=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=r)}if(!a)throw SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function em(e){return null!=e.tag}function eg(e){return null!=e.style}class ev{parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new eN(this,t,!1);return n.addAll(e,w.none,t.from,t.to),n.finish()}parseSlice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new eN(this,t,!0);return n.addAll(e,w.none,t.from,t.to),C.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(eD(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(0==o.indexOf(e)&&(!r.context||n.matchesContext(r.context))&&(!(o.length>e.length)||61==o.charCodeAt(e.length)&&o.slice(e.length+1)==t)){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=eI(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=eI(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ev(e,ev.schemaRules(e)))}constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(em(e))this.tags.push(e);else if(eg(e)){let t=/[^=]*/.exec(e.style)[0];0>n.indexOf(t)&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}}let ex={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ey={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},eb={ol:!0,ul:!0},ew=1,ej=2,eC=4;function ek(e,t,n){return null!=t?(t?ew:0)|("full"===t?ej:0):e&&"pre"==e.whitespace?ew|ej:n&~eC}class eS{findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(v.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,n;return(n=t.findWrapping(e.type))?(this.match=t,n):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ew)){let e=this.content[this.content.length-1],t;if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let t=v.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(v.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ex.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}constructor(e,t,n,r,i,o){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=w.none,this.match=i||(o&eC?null:e.contentMatch)}}class eN{get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,i=r.options&ej?"full":this.localPreserveWS||(r.options&ew)>0;if("full"===i||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)n="full"!==i?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;eb.hasOwnProperty(o)&&this.parser.normalizeLists&&eE(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(s?s.ignore:ey.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let n,r=this.needsBlock;if(ex.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),n=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let a=s&&s.skip?t:this.readStyles(e,t);a&&this.addAll(e,a),n&&this.sync(i),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,s,n,!1===s.consuming?a:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let r=this.parser.matchedStyles[e],i=n.getPropertyValue(r);if(i)for(let e;;){let n=this.parser.matchStyle(r,i,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1===n.consuming)e=n;else break}}return t}addElementByRule(e,t,n,r){let i,o;if(t.node)if((o=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(o.create(t.attrs),n)||this.leafFallback(e,n);else{let e=this.enter(o,t.attrs||null,n,t.preserveWhitespace);e&&(i=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}i&&this.sync(a)&&this.open--}addAll(e,t,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t){let n,r;for(let t=this.open;t>=0;t--){let i=this.nodes[t],o=i.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=i,!o.length)||i.solid)break}if(!n)return null;this.sync(r);for(let e=0;e<n.length;e++)t=this.enterInner(n[e],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let n=this.findPlace(e,t);if(n){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let r=w.none;for(let i of n.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):eA(i.type,e.type))&&(r=i.addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,n,r){let i=this.findPlace(e.create(t),n);return i&&(i=this.enterInner(e,t,n,!0,r)),i}enterInner(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=ek(e,i,o.options);o.options&eC&&0==o.content.length&&(a|=eC);let s=w.none;return n=n.filter(t=>(o.type?!o.type.allowsMarkType(t.type):!eA(t.type,e))||(s=t.addToSet(s),!1)),this.nodes.push(new eS(e,t,s,r,null,a)),this.open++,n}closeExtra(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;else this.localPreserveWS&&(this.nodes[t].options|=ew);return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+ +!r,o=(e,a)=>{for(;e>=0;e--){let s=t[e];if(""==s){if(e==t.length-1||0==e)continue;for(;a>=i;a--)if(o(e-1,a))return!0;return!1}{let e=a>0||0==a&&r?this.nodes[a].type:n&&a>=i?n.node(a-i).type:null;if(!e||e.name!=s&&!e.isInGroup(s))return!1;a--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r=t.topNode,i,o=ek(null,t.preserveWhitespace,0)|(n?eC:0);i=r?new eS(r.type,r.attrs,w.none,!0,t.topMatch||r.type.contentMatch,o):n?new eS(null,null,w.none,!0,null,o):new eS(e.schema.topNodeType,null,w.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}}function eE(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&eb.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}function eD(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function eI(e){let t={};for(let n in e)t[n]=e[n];return t}function eA(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],a=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t||0>o.indexOf(i)&&a(i))return!0}};if(a(i.contentMatch))return!0}}class eT{serializeFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=eL(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,o=0;for(;n<i.length&&o<e.marks.length;){let t=e.marks[o];if(!this.marks[t.type.name]){o++;continue}if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}for(;n<i.length;)r=i.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],a=this.serializeMark(n,e.isInline,t);a&&(i.push([n,r]),r.appendChild(a.dom),r=a.contentDOM||a.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=eO(eL(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&eO(eL(n),r(e,t),null,e.attrs)}static renderSpec(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return eO(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new eT(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=eM(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return eM(e.marks)}constructor(e,t){this.nodes=e,this.marks=t}}function eM(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function eL(e){return e.document||window.document}let eP=new WeakMap;function eR(e){let t=eP.get(e);return void 0===t&&eP.set(e,t=e_(e)),t}function e_(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}function eO(e,t,n,r){let i;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let o=t[0],a;if("string"!=typeof o)throw RangeError("Invalid array passed to renderSpec");if(r&&(a=eR(r))&&a.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let l=n?e.createElementNS(n,o):e.createElement(o),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){for(let e in u=2,c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):l.setAttribute(e,c[e])}}for(let o=u;o<t.length;o++){let a=t[o];if(0===a){if(o<t.length-1||o>u)throw RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:o}=eO(e,a,n,r);if(l.appendChild(t),o){if(i)throw RangeError("Multiple content holes");i=o}}}return{dom:l,contentDOM:i}}e.s(["DOMParser",()=>ev,"DOMSerializer",()=>eT,"Fragment",()=>v,"Mark",()=>w,"MarkType",()=>ep,"Node",()=>H,"NodeRange",()=>V,"ReplaceError",()=>j,"Schema",()=>eh,"Slice",()=>C],695608);let eF=65535,eB=65536;function eV(e,t){return e+t*eB}function ez(e){return e&eF}function eH(e){return(e-(e&eF))/eB}let eU=1,eG=2,eW=4,eq=8;class eZ{get deleted(){return(this.delInfo&eq)>0}get deletedBefore(){return(this.delInfo&(eU|eW))>0}get deletedAfter(){return(this.delInfo&(eG|eW))>0}get deletedAcross(){return(this.delInfo&eW)>0}constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}}class eK{recover(e){let t=0,n=ez(e);if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+eH(e)}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let s=this.ranges[a]-(this.inverted?r:0);if(s>e)break;let l=this.ranges[a+i],c=this.ranges[a+o],u=s+l;if(e<=u){let i=l?e==s?-1:e==u?1:t:t,o=s+r+(i<0?0:c);if(n)return o;let d=e==(t<0?s:u)?null:eV(a/3,e-s),p=e==s?eG:e==u?eU:eW;return(t<0?e!=s:e!=u)&&(p|=eq),new eZ(o,p,d)}r+=c-l}return n?e+r:new eZ(e+r,0,null)}touches(e,t){let n=0,r=ez(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let a=this.ranges[t]-(this.inverted?n:0);if(a>e)break;let s=this.ranges[t+i];if(e<=a+s&&t==3*r)return!0;n+=this.ranges[t+o]-s}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?i:0),s=o+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(a,a+l,s,s+c),i+=c-l}}invert(){return new eK(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?eK.empty:new eK(e<0?[0,-e,0]:[0,0,e])}constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&eK.empty)return eK.empty}}eK.empty=new eK([]);class e${slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new e$(this.maps,this.mirror,e,t)}copy(){return new e$(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new e$;return e.appendMappingInverted(this),e}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){let i=this.maps[n].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this.maps[t].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new eZ(e,r,null)}constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}}let eY=Object.create(null);class eJ{getMap(){return eK.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let n=eY[t.stepType];if(!n)throw RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}static jsonID(e,t){if(e in eY)throw RangeError("Duplicate use of step JSON ID "+e);return eY[e]=t,t.prototype.jsonID=e,t}}class eQ{static ok(e){return new eQ(e,null)}static fail(e){return new eQ(null,e)}static fromReplace(e,t,n,r){try{return eQ.ok(e.replace(t,n,r))}catch(e){if(e instanceof j)return eQ.fail(e.message);throw e}}constructor(e,t){this.doc=e,this.failed=t}}function eX(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(eX(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return v.fromArray(r)}class e0 extends eJ{apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new C(eX(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return eQ.fromReplace(e,this.from,this.to,i)}invert(){return new e1(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new e0(t.pos,n.pos,this.mark)}merge(e){return e instanceof e0&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new e0(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new e0(t.from,t.to,e.markFromJSON(t.mark))}constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}}eJ.jsonID("addMark",e0);class e1 extends eJ{apply(e){let t=e.slice(this.from,this.to),n=new C(eX(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return eQ.fromReplace(e,this.from,this.to,n)}invert(){return new e0(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new e1(t.pos,n.pos,this.mark)}merge(e){return e instanceof e1&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new e1(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e1(t.from,t.to,e.markFromJSON(t.mark))}constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}}eJ.jsonID("removeMark",e1);class e2 extends eJ{apply(e){let t=e.nodeAt(this.pos);if(!t)return eQ.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return eQ.fromReplace(e,this.pos,this.pos+1,new C(v.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new e2(this.pos,t.marks[n]);return new e2(this.pos,this.mark)}}return new e5(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new e2(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new e2(t.pos,e.markFromJSON(t.mark))}constructor(e,t){super(),this.pos=e,this.mark=t}}eJ.jsonID("addNodeMark",e2);class e5 extends eJ{apply(e){let t=e.nodeAt(this.pos);if(!t)return eQ.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return eQ.fromReplace(e,this.pos,this.pos+1,new C(v.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new e2(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new e5(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new e5(t.pos,e.markFromJSON(t.mark))}constructor(e,t){super(),this.pos=e,this.mark=t}}eJ.jsonID("removeNodeMark",e5);class e4 extends eJ{apply(e){return this.structure&&e9(e,this.from,this.to)?eQ.fail("Structure replace would overwrite content"):eQ.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new eK([this.from,this.to-this.from,this.slice.size])}invert(e){return new e4(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new e4(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof e4)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart)if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;else{let t=this.slice.size+e.slice.size==0?C.empty:new C(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new e4(e.from,this.to,t,this.structure)}{let t=this.slice.size+e.slice.size==0?C.empty:new C(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new e4(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new e4(t.from,t.to,C.fromJSON(e,t.slice),!!t.structure)}constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}}eJ.jsonID("replace",e4);class e3 extends eJ{apply(e){if(this.structure&&(e9(e,this.from,this.gapFrom)||e9(e,this.gapTo,this.to)))return eQ.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return eQ.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?eQ.fromReplace(e,this.from,this.to,n):eQ.fail("Content does not fit in gap")}getMap(){return new eK([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new e3(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new e3(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e3(t.from,t.to,t.gapFrom,t.gapTo,C.fromJSON(e,t.slice),t.insert,!!t.structure)}constructor(e,t,n,r,i,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=a}}function e9(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let e=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function e7(e,t,n,r){let i,o,a=[],s=[];e.doc.nodesBetween(t,n,(e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),p=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(p)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:a.push(i=new e1(c,d,u[e])));o&&o.to==c?o.to=d:s.push(o=new e0(c,d,r))}}),a.forEach(t=>e.step(t)),s.forEach(t=>e.step(t))}function e6(e,t,n,r){let i=[],o=0;e.doc.nodesBetween(t,n,(e,a)=>{if(!e.isInline)return;o++;let s=null;if(r instanceof ep){let t=e.marks,n;for(;n=r.isInSet(t);)(s||(s=[])).push(n),t=n.removeFromSet(t)}else r?r.isInSet(e.marks)&&(s=[r]):s=e.marks;if(s&&s.length){let r=Math.min(a+e.nodeSize,n);for(let e=0;e<s.length;e++){let n=s[e],l;for(let e=0;e<i.length;e++){let t=i[e];t.step==o-1&&n.eq(i[e].style)&&(l=t)}l?(l.to=r,l.step=o):i.push({style:n,from:Math.max(a,t),to:r,step:o})}}}),i.forEach(t=>e.step(new e1(t.from,t.to,t.style)))}function e8(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],o=e.doc.nodeAt(t),a=[],s=t+1;for(let t=0;t<o.childCount;t++){let l=o.child(t),c=s+l.nodeSize,u=r.matchType(l.type);if(u){r=u;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new e1(s,c,l.marks[t]));if(i&&l.isText&&"pre"!=n.whitespace){let e,t=/\r?\n|\r/g,r;for(;e=t.exec(l.text);)r||(r=new C(v.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),a.push(new e4(s+e.index,s+e.index+e[0].length,r))}}else a.push(new e4(s,c,C.empty));s=c}if(!r.validEnd){let t=r.fillBefore(v.empty,!0);e.replace(s,s,new C(t,0,0))}for(let t=a.length-1;t>=0;t--)e.step(a[t])}function te(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function tt(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!te(r,i,o))break}return null}function tn(e,t,n){let{$from:r,$to:i,depth:o}=t,a=r.before(o+1),s=i.after(o+1),l=a,c=s,u=v.empty,d=0;for(let e=o,t=!1;e>n;e--)t||r.index(e)>0?(t=!0,u=v.from(r.node(e).copy(u)),d++):l--;let p=v.empty,h=0;for(let e=o,t=!1;e>n;e--)t||i.after(e+1)<i.end(e)?(t=!0,p=v.from(i.node(e).copy(p)),h++):c++;e.step(new e3(l,c,a,s,new C(u.append(p),d,h),u.size-d,!0))}function tr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,i=to(e,t),o=i&&ta(r,t);return o?i.map(ti).concat({type:t,attrs:n}).concat(o.map(ti)):null}function ti(e){return{type:e,attrs:null}}function to(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let a=o.length?o[0]:t;return n.canReplaceWith(r,i,a)?o:null}function ta(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),a=t.contentMatch.findWrapping(o.type);if(!a)return null;let s=(a.length?a[a.length-1]:t).contentMatch;for(let e=r;s&&e<i;e++)s=s.matchType(n.child(e).type);return s&&s.validEnd?a:null}function ts(e,t,n){let r=v.empty;for(let e=n.length-1;e>=0;e--){if(r.size){let t=n[e].type.contentMatch.matchFragment(r);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=v.from(n[e].type.create(n[e].attrs,r))}let i=t.start,o=t.end;e.step(new e3(i,o,i,o,new C(r,0,0),n.length,!0))}function tl(e,t,n,r,i){if(!r.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{let a="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(r,a)&&td(e.doc,e.mapping.slice(o).map(n),r)){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&tu(e,t,n,o),e8(e,e.mapping.slice(o).map(n,1),r,void 0,null===i);let s=e.mapping.slice(o),l=s.map(n,1),c=s.map(n+t.nodeSize,1);return e.step(new e3(l,c,l+1,c-1,new C(v.from(r.create(a,null,t.marks)),0,0),1,!0)),!0===i&&tc(e,t,n,o),!1}})}function tc(e,t,n,r){t.forEach((i,o)=>{if(i.isText){let a,s=/\r?\n|\r/g;for(;a=s.exec(i.text);){let i=e.mapping.slice(r).map(n+1+o+a.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function tu(e,t,n,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+o);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function td(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function tp(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw RangeError("No node at given position");n||(n=o.type);let a=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,a);if(!n.validContent(o.content))throw RangeError("Invalid content for node type "+n.name);e.step(new e3(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new C(v.from(a),0,0),1,!0))}function th(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=e.resolve(t),o=i.depth-n,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=n-2;e>o;e--,t--){let n=i.node(e),o=i.index(e);if(n.type.spec.isolating)return!1;let a=n.content.cutByIndex(o,n.childCount),s=r&&r[t+1];s&&(a=a.replaceChild(0,s.type.create(s.attrs)));let l=r&&r[t]||n;if(!n.canReplace(o+1,n.childCount)||!l.type.validContent(a))return!1}let s=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(s,s,l?l.type:i.node(o+1).type)}function tf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=e.doc.resolve(t),o=v.empty,a=v.empty;for(let e=i.depth,t=i.depth-n,s=n-1;e>t;e--,s--){o=v.from(i.node(e).copy(o));let t=r&&r[s];a=v.from(t?t.type.create(t.attrs,a):i.node(e).copy(a))}e.step(new e4(t,t,new C(o.append(a),n,n),!0))}function tm(e,t){let n=e.resolve(t),r=n.index();return tv(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function tg(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),a=o.type==r?e.type.schema.nodes.text:o.type;if(!(n=n.matchType(a))||!e.type.allowsMarks(o.marks))return!1}return n.validEnd}function tv(e,t){return!!(e&&t&&!e.isLeaf&&tg(e,t))}function tx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t);for(let e=r.depth;;e--){let i,o,a=r.index(e);if(e==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(e+1),a++,o=r.node(e).maybeChild(a)):(i=r.node(e).maybeChild(a-1),o=r.node(e+1)),i&&!i.isTextblock&&tv(i,o)&&r.node(e).canReplace(a,a+1))return t;if(0==e)break;t=n<0?r.before(e):r.after(e)}}function ty(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,o=e.doc.resolve(t-n),a=o.node().type;if(i&&a.inlineContent){let e="pre"==a.whitespace,t=!!a.contentMatch.matchType(i);e&&!t?r=!1:!e&&t&&(r=!0)}let s=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);tu(e,r.node(),r.before(),s)}a.inlineContent&&e8(e,t+n-1,a,o.node().contentMatchAt(o.index()),null==r);let l=e.mapping.slice(s),c=l.map(t-n);if(e.step(new e4(c,l.map(t+n,-1),C.empty,!0)),!0===r){let t=e.doc.resolve(c);tc(e,t.node(),t.before(),e.steps.length)}return e}function tb(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)break}return null}function tw(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let e=0;e<n.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;t>=0;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,o=r.index(t)+ +(n>0),a=r.node(t),s=!1;if(1==e)s=a.canReplace(o,o,i);else{let e=a.contentMatchAt(o).findWrapping(i.firstChild.type);s=e&&a.canReplaceWith(o,o,e[0])}if(s)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}function tj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C.empty;if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return tC(i,o,r)?new e4(t,n,r):new tk(i,o,r).fit()}function tC(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}eJ.jsonID("replaceAround",e3);class tk{get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,o=n.depth,a=r.depth;for(;o&&a&&1==i.childCount;)i=i.firstChild.content,o--,a--;let s=new C(i,o,a);return e>-1?new e3(n.pos,e,this.$to.pos,this.$to.end(),s,t):s.size||n.pos!=this.$to.pos?new e4(n.pos,r.pos,s):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null,i=(e=n?(r=tE(this.unplaced.content,n-1).firstChild).content:this.unplaced.content).firstChild;for(let e=this.depth;e>=0;e--){let{type:o,match:a}=this.frontier[e],s,l=null;if(1==t&&(i?a.matchType(i.type)||(l=a.fillBefore(v.from(i),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:e,parent:r,inject:l};if(2==t&&i&&(s=a.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:e,parent:r,wrap:s};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=tE(e,t);return!!r.childCount&&!r.firstChild.isLeaf&&(this.unplaced=new C(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=tE(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new C(tS(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new C(tS(e,t,1),t,n)}placeNodes(e){let{sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:o}=e;for(;this.depth>n;)this.closeFrontierNode();if(o)for(let e=0;e<o.length;e++)this.openFrontierNode(o[e]);let a=this.unplaced,s=r?r.content:a.content,l=a.openStart-t,c=0,u=[],{match:d,type:p}=this.frontier[n];if(i){for(let e=0;e<i.childCount;e++)u.push(i.child(e));d=d.matchFragment(i)}let h=s.size+t-(a.content.size-a.openEnd);for(;c<s.childCount;){let e=s.child(c),t=d.matchType(e.type);if(!t)break;(++c>1||0==l||e.content.size)&&(d=t,u.push(tD(e.mark(p.allowedMarks(e.marks)),1==c?l:0,c==s.childCount?h:-1)))}let f=c==s.childCount;f||(h=-1),this.placed=tN(this.placed,n,v.from(u)),this.frontier[n].match=d,f&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=s;e<h;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=f?0==t?C.empty:new C(tS(a.content,t-1,1),t-1,h<0?a.openEnd:t-1):new C(tS(a.content,t,c),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!tI(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){t:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=tI(e,t,r,n,i);if(o){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=tI(e,n,r,t,!0);if(!i||i.childCount)continue t}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=tN(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=tN(this.placed,this.depth,v.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(v.empty,!0);e.childCount&&(this.placed=tN(this.placed,this.frontier.length,e))}constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=v.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=v.from(e.node(t).copy(this.placed))}}function tS(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(tS(e.firstChild.content,t-1,n)))}function tN(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(tN(e.lastChild.content,t-1,n)))}function tE(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function tD(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,tD(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(v.empty,!0)))),e.copy(r)}function tI(e,t,n,r,i){let o=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==o.childCount&&!n.compatibleContent(o.type))return null;let s=r.fillBefore(o.content,!0,a);return s&&!tA(n,o.content,a)?s:null}function tA(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function tT(e){return e.spec.defining||e.spec.definingForContent}function tM(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(tC(i,o,r))return e.step(new e4(t,n,r));let a=t_(i,e.doc.resolve(n));0==a[a.length-1]&&a.pop();let s=-(i.depth+1);a.unshift(s);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let n=i.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;a.indexOf(e)>-1?s=e:i.before(e)==t&&a.splice(1,0,-e)}let l=a.indexOf(s),c=[],u=r.openStart;for(let e=r.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==r.openStart)break;e=n.content}for(let e=u-1;e>=0;e--){let t=c[e],n=tT(t.type);if(n&&!t.sameMarkup(i.node(Math.abs(s)-1)))u=e;else if(n||!t.type.isTextblock)break}for(let t=r.openStart;t>=0;t--){let s=(t+u+1)%(r.openStart+1),d=c[s];if(d)for(let t=0;t<a.length;t++){let c=a[(t+l)%a.length],u=!0;c<0&&(u=!1,c=-c);let p=i.node(c-1),h=i.index(c-1);if(p.canReplaceWith(h,h,d.type,d.marks))return e.replace(i.before(c),u?o.after(c):n,new C(tL(r.content,0,r.openStart,s),s,r.openEnd))}}let d=e.steps.length;for(let s=a.length-1;s>=0&&(e.replace(t,n,r),!(e.steps.length>d));s--){let e=a[s];e<0||(t=i.before(e),n=o.after(e))}}function tL(e,t,n,r,i){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(tL(i.content,t+1,n,r,i)))}if(t>r){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(v.empty,!0))}return e}function tP(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=tb(e.doc,t,r.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new C(v.from(r),0,0))}function tR(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=t_(r,i);for(let t=0;t<o.length;t++){let n=o[t],a=t==o.length-1;if(a&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),i.end(n));if(n>0&&(a||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return e.delete(r.before(n),i.after(n))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function t_(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}class tO extends eJ{apply(e){let t=e.nodeAt(this.pos);if(!t)return eQ.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return eQ.fromReplace(e,this.pos,this.pos+1,new C(v.from(r),0,+!t.isLeaf))}getMap(){return eK.empty}invert(e){return new tO(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new tO(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new tO(t.pos,t.attr,t.value)}constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}}eJ.jsonID("attr",tO);class tF extends eJ{apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return eQ.ok(n)}getMap(){return eK.empty}invert(e){return new tF(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new tF(t.attr,t.value)}constructor(e,t){super(),this.attr=e,this.value=t}}eJ.jsonID("docAttr",tF);let tB=class extends Error{};(tB=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype),tB.prototype.constructor=tB,tB.prototype.name="TransformError";class tV{get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new tB(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.empty,r=tj(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new C(v.from(n),0,0))}delete(e,t){return this.replace(e,t,C.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return tM(this,e,t,n),this}replaceRangeWith(e,t,n){return tP(this,e,t,n),this}deleteRange(e,t){return tR(this,e,t),this}lift(e,t){return tn(this,e,t),this}join(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ty(this,e,t),this}wrap(e,t){return ts(this,e,t),this}setBlockType(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return tl(this,e,t,n,r),this}setNodeMarkup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return tp(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new tO(e,t,n)),this}setDocAttribute(e,t){return this.step(new tF(e,t)),this}addNodeMark(e,t){return this.step(new e2(e,t)),this}removeNodeMark(e,t){if(!(t instanceof w)){let n=this.doc.nodeAt(e);if(!n)throw RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new e5(e,t)),this}split(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return tf(this,e,t,n),this}addMark(e,t,n){return e7(this,e,t,n),this}removeMark(e,t,n){return e6(this,e,t,n),this}clearIncompatible(e,t,n){return e8(this,e,t,n),this}constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new e$}}e.s(["Mapping",()=>e$,"ReplaceAroundStep",()=>e3,"ReplaceStep",()=>e4,"Transform",()=>tV,"canJoin",()=>tm,"canSplit",()=>th,"dropPoint",()=>tw,"findWrapping",()=>tr,"joinPoint",()=>tx,"liftTarget",()=>tt,"replaceStep",()=>tj],874486);let tz=Object.create(null);class tH{get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.empty,n=t.content.lastChild,r=null;for(let e=0;e<t.openEnd;e++)r=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:s,$to:l}=o[a],c=e.mapping.slice(i);e.replaceRange(c.map(s.pos),c.map(l.pos),a?C.empty:t),0==a&&tX(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:a}=r[i],s=e.mapping.slice(n),l=s.map(o.pos),c=s.map(a.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),tX(e,n,t.isInline?-1:1))}}static findFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new tq(e):tQ(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let i=t<0?tQ(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):tQ(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}return null}static near(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new tY(e.node(0))}static atStart(e){return tQ(e,e,0,0,1)||new tY(e)}static atEnd(e){return tQ(e,e,e.content.size,e.childCount,-1)||new tY(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let n=tz[t.type];if(!n)throw RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}static jsonID(e,t){if(e in tz)throw RangeError("Duplicate use of selection JSON ID "+e);return tz[e]=t,t.prototype.jsonID=e,t}getBookmark(){return tq.between(this.$anchor,this.$head).getBookmark()}constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new tU(e.min(t),e.max(t))]}}tH.prototype.visible=!0;class tU{constructor(e,t){this.$from=e,this.$to=t}}let tG=!1;function tW(e){tG||e.parent.inlineContent||(tG=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class tq extends tH{get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return tH.near(n);let r=e.resolve(t.map(this.anchor));return new tq(r.parent.inlineContent?r:n,n)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.empty;if(super.replace(e,t),t==C.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof tq&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new tZ(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new tq(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if((!n||r)&&(n=r>=0?1:-1),!t.parent.inlineContent){let e=tH.findFrom(t,n,!0)||tH.findFrom(t,-n,!0);if(!e)return tH.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r?e=t:(e=(tH.findFrom(e,-n,!0)||tH.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0&&(e=t)),new tq(e,t)}constructor(e,t=e){tW(e),tW(t),super(e,t)}}tH.jsonID("text",tq);class tZ{map(e){return new tZ(e.map(this.anchor),e.map(this.head))}resolve(e){return tq.between(e.resolve(this.anchor),e.resolve(this.head))}constructor(e,t){this.anchor=e,this.head=t}}class tK extends tH{map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?tH.near(i):new tK(i)}content(){return new C(v.from(this.node),0,0)}eq(e){return e instanceof tK&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new t$(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new tK(e.resolve(t.anchor))}static create(e,t){return new tK(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}}tK.prototype.visible=!1,tH.jsonID("node",tK);class t${map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new tZ(n,n):new t$(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&tK.isSelectable(n)?new tK(t):tH.near(t)}constructor(e){this.anchor=e}}class tY extends tH{replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.empty;if(t==C.empty){e.delete(0,e.doc.content.size);let t=tH.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new tY(e)}map(e){return new tY(e)}eq(e){return e instanceof tY}getBookmark(){return tJ}constructor(e){super(e.resolve(0),e.resolve(e.content.size))}}tH.jsonID("all",tY);let tJ={map(){return this},resolve:e=>new tY(e)};function tQ(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return tq.create(e,n);for(let a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let r=t.child(a);if(r.isAtom){if(!o&&tK.isSelectable(r))return tK.create(e,n-(i<0?r.nodeSize:0))}else{let t=tQ(e,r,n+i,i<0?r.childCount:0,i,o);if(t)return t}n+=r.nodeSize*i}return null}function tX(e,t,n){let r,i=e.steps.length-1;if(i<t)return;let o=e.steps[i];(o instanceof e4||o instanceof e3)&&(e.mapping.maps[i].forEach((e,t,n,i)=>{null==r&&(r=i)}),e.setSelection(tH.near(e.doc.resolve(r),n)))}let t0=1,t1=2,t2=4;class t5 extends tV{get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|t0)&~t1,this.storedMarks=null,this}get selectionSet(){return(this.updated&t0)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=t1,this}ensureMarks(e){return w.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&t1)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~t1,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||w.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(tH.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=t2,this}get scrolledIntoView(){return(this.updated&t2)>0}constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}}function t4(e,t){return t&&e?e.bind(t):e}class t3{constructor(e,t,n){this.name=e,this.init=t4(t.init,n),this.apply=t4(t.apply,n)}}let t9=[new t3("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new t3("selection",{init:(e,t)=>e.selection||tH.atStart(t.doc),apply:e=>e.selection}),new t3("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new t3("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class t7{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=t9.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new t3(e.key,e.spec.state,e))})}}class t6{get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let s=r?r[o].n:0,l=r?r[o].state:this,c=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new t6(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new t5(this)}static create(e){let t=new t7(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new t6(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new t7(this.schema,e.plugins),n=t.fields,r=new t6(t);for(let t=0;t<n.length;t++){let i=n[t].name;r[i]=this.hasOwnProperty(i)?this[i]:n[t].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let r=new t7(e.schema,e.plugins),i=new t6(r);return r.fields.forEach(r=>{if("doc"==r.name)i.doc=H.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=tH.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let a=n[o],s=a.spec.state;if(a.key==r.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(t,o)){i[r.name]=s.fromJSON.call(a,e,t[o],i);return}}i[r.name]=r.init(e,i)}}),i}constructor(e){this.config=e}}function t8(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=t8(i,t,{})),n[r]=i}return n}class ne{getState(e){return e[this.key]}constructor(e){this.spec=e,this.props={},e.props&&t8(e.props,this,this.props),this.key=e.key?e.key.key:nn("plugin")}}let nt=Object.create(null);function nn(e){return e in nt?e+"$"+ ++nt[e]:(nt[e]=0,e+"$")}class nr{get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}constructor(e="key"){this.key=nn(e)}}e.s(["AllSelection",()=>tY,"EditorState",()=>t6,"NodeSelection",()=>tK,"Plugin",()=>ne,"PluginKey",()=>nr,"Selection",()=>tH,"SelectionRange",()=>tU,"TextSelection",()=>tq],187195),e.s([],838208);let ni=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},no=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},na=null,ns=function(e,t,n){let r=na||(na=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},nl=function(){na=null},nc=function(e,t,n,r){return n&&(nd(e,t,n,r,-1)||nd(e,t,n,r,1))},nu=/^(img|br|input|textarea|hr)$/i;function nd(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:np(e))){let n=e.parentNode;if(!n||1!=n.nodeType||ng(e)||nu.test(e.nodeName)||"false"==e.contentEditable)return!1;t=ni(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType||"false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?np(e):0}}}function np(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function nh(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=np(e=e.childNodes[t-1])}else{if(!e.parentNode||ng(e))return null;t=ni(e),e=e.parentNode}}}function nf(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||ng(e))return null;t=ni(e)+1,e=e.parentNode}}}function nm(e,t,n){for(let r=0==t,i=t==np(e);r||i;){if(e==n)return!0;let t=ni(e);if(!(e=e.parentNode))return!1;r=r&&0==t,i=i&&t==np(e)}}function ng(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}let nv=function(e){return e.focusNode&&nc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function nx(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function ny(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function nb(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(np(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(np(r.startContainer),r.startOffset)}}}let nw="undefined"!=typeof navigator?navigator:null,nj="undefined"!=typeof document?document:null,nC=nw&&nw.userAgent||"",nk=/Edge\/(\d+)/.exec(nC),nS=/MSIE \d/.exec(nC),nN=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nC),nE=!!(nS||nN||nk),nD=nS?document.documentMode:nN?+nN[1]:nk?+nk[1]:0,nI=!nE&&/gecko\/(\d+)/i.test(nC);nI&&(/Firefox\/(\d+)/.exec(nC)||[0,0])[1];let nA=!nE&&/Chrome\/(\d+)/.exec(nC),nT=!!nA,nM=nA?+nA[1]:0,nL=!nE&&!!nw&&/Apple Computer/.test(nw.vendor),nP=nL&&(/Mobile\/\w+/.test(nC)||!!nw&&nw.maxTouchPoints>2),nR=nP||!!nw&&/Mac/.test(nw.platform),n_=!!nw&&/Win/.test(nw.platform),nO=/Android \d/.test(nC),nF=!!nj&&"webkitFontSmoothing"in nj.documentElement.style,nB=nF?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function nV(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function nz(e,t){return"number"==typeof e?e:e[t]}function nH(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function nU(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let a=n||e.dom;a;a=no(a)){if(1!=a.nodeType)continue;let e=a,n=e==o.body,s=n?nV(o):nH(e),l=0,c=0;if(t.top<s.top+nz(r,"top")?c=-(s.top-t.top+nz(i,"top")):t.bottom>s.bottom-nz(r,"bottom")&&(c=t.bottom-t.top>s.bottom-s.top?t.top+nz(i,"top")-s.top:t.bottom-s.bottom+nz(i,"bottom")),t.left<s.left+nz(r,"left")?l=-(s.left-t.left+nz(i,"left")):t.right>s.right-nz(r,"right")&&(l=t.right-s.right+nz(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,o=e.scrollTop-r;t={left:t.left-i,top:t.top-o,right:t.right-i,bottom:t.bottom-o}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function nG(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,a=i+1;a<Math.min(innerHeight,r.bottom);a+=5){let r=e.root.elementFromPoint(o,a);if(!r||r==e.dom||!e.dom.contains(r))continue;let s=r.getBoundingClientRect();if(s.top>=i-20){t=r,n=s.top;break}}return{refDOM:t,refTop:n,stack:nW(e.dom)}}function nW(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=no(r));return t}function nq(e){let{refDOM:t,refTop:n,stack:r}=e,i=t?t.getBoundingClientRect().top:0;nZ(r,0==i?0:i-n)}function nZ(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let nK=null;function n$(e){if(e.setActive)return e.setActive();if(nK)return e.focus(nK);let t=nW(e);e.focus(null==nK?{get preventScroll(){return nK={preventScroll:!0},!0}}:void 0),nK||(nK=!1,nZ(t,0))}function nY(e,t){let n,r,i,o=2e8,a,s=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=ns(u).getClientRects()}for(let p=0;p<e.length;p++){let h=e[p];if(h.top<=l&&h.bottom>=c){l=Math.max(h.bottom,l),c=Math.min(h.top,c);let e=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(e<o){i=u,o=e,a=e&&3==i.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==u.nodeType&&e&&(s=d+ +(t.left>=(h.left+h.right)/2));continue}}else h.top>t.top&&!n&&h.left<=t.left&&h.right>=t.left&&(n=u,r={left:Math.max(h.left,Math.min(h.right,t.left)),top:h.top});!i&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(s=d+1)}}return(!i&&n&&(i=n,a=r,o=0),i&&3==i.nodeType)?nJ(i,a):!i||o&&1==i.nodeType?{node:e,offset:s}:nY(i,a)}function nJ(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=n3(r,1);if(n.top!=n.bottom&&nQ(t,n))return{node:e,offset:i+ +(t.left>=(n.left+n.right)/2)}}return{node:e,offset:0}}function nQ(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function nX(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function n0(e,t,n){let{node:r,offset:i}=nY(t,n),o=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}function n1(e,t,n,r){let i=-1;for(let n=t,o=!1;n!=e.dom;){let t=e.docView.nearestDesc(n,!0),a;if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)&&((a=t.dom.getBoundingClientRect()).width||a.height)&&(t.node.isBlock&&t.parent&&(!o&&a.left>r.left||a.top>r.top?i=t.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=t.posAfter),o=!0),!t.contentDOM&&i<0&&!t.node.isText))return(t.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?t.posBefore:t.posAfter;n=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function n2(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=e.childNodes[o];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let i=e[r];if(nQ(t,i))return n2(n,t,i)}}if((o=(o+1)%r)==i)break}return e}function n5(e,t){let n,r=e.dom.ownerDocument,i,o=0,a=nb(r,t.left,t.top);a&&({node:i,offset:o}=a);let s=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!s||!e.dom.contains(1!=s.nodeType?s.parentNode:s)){let n=e.dom.getBoundingClientRect();if(!nQ(t,n)||!(s=n2(e.dom,t,n)))return null}if(nL)for(let e=s;i&&e;e=no(e))e.draggable&&(i=void 0);if(s=nX(s,t),i){let r;if(nI&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length))<i.childNodes.length){let e=i.childNodes[o],n;"IMG"==e.nodeName&&(n=e.getBoundingClientRect()).right<=t.left&&n.bottom>t.top&&o++}nF&&o&&1==i.nodeType&&1==(r=i.childNodes[o-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&o--,i==e.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?n=e.state.doc.content.size:(0==o||1!=i.nodeType||"BR"!=i.childNodes[o-1].nodeName)&&(n=n1(e,i,o,t))}null==n&&(n=n0(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:n,inside:l?l.posAtStart-l.border:-1}}function n4(e){return e.top<e.bottom||e.left<e.right}function n3(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(n4(e))return e}return Array.prototype.find.call(n,n4)||e.getBoundingClientRect()}let n9=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function n7(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),a=nF||nI;if(3==r.nodeType)if(a&&(n9.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let e=n3(ns(r,i,i),n);if(nI&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=n3(ns(r,i-1,i-1),-1);if(t.top==e.top){let n=n3(ns(r,i,i+1),-1);if(n.top!=e.top)return n6(n,n.left<t.left)}}return e}else{let e=i,t=i,o=n<0?1:-1;return n<0&&!i?(t++,o=-1):n>=0&&i==r.nodeValue.length?(e--,o=1):n<0?e--:t++,n6(n3(ns(r,e,t),o),o<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(null==o&&i&&(n<0||i==np(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return n8(e.getBoundingClientRect(),!1)}if(null==o&&i<np(r)){let e=r.childNodes[i];if(1==e.nodeType)return n8(e.getBoundingClientRect(),!0)}return n8(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==np(r))){let e=r.childNodes[i-1],t=3==e.nodeType?ns(e,np(e)-!a):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return n6(n3(t,1),!1)}if(null==o&&i<np(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?ns(e,0,+!a):1==e.nodeType?e:null:null;if(t)return n6(n3(t,-1),!0)}return n6(n3(3==r.nodeType?ns(r):r,-n),n>=0)}function n6(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function n8(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function re(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function rt(e,t,n){let r=t.selection,i="up"==n?r.$from:r.$to;return re(e,t,()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=n7(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=ns(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>(i.bottom-r.top)*2:i.bottom-r.bottom>(r.bottom-i.top)*2))return!1}}return!0})}let rn=/[\u0590-\u08ac]/;function rr(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,a=i==r.parent.content.size,s=e.domSelection();return s?rn.test(r.parent.textContent)&&s.modify?re(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:o,anchorOffset:a}=e.domSelectionRange(),l=s.caretBidiLevel;s.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),p=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==d;try{s.collapse(o,a),t&&(t!=o||i!=a)&&s.extend&&s.extend(t,i)}catch(e){}return null!=l&&(s.caretBidiLevel=l),p}):"left"==n||"backward"==n?o:a:r.pos==r.start()||r.pos==r.end()}let ri=null,ro=null,ra=!1;function rs(e,t,n){return ri==t&&ro==n?ra:(ri=t,ro=n,ra="up"==n||"down"==n?rt(e,t,n):rr(e,t,n))}let rl=0,rc=1,ru=2,rd=3;class rp{matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){let r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode))if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}else{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}if(e==this.dom&&this.contentDOM)r=t>ni(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n=!0,r=e;r;r=r.parentNode){let i=this.getDesc(r),o;if(i&&(!t||i.node))if(!n||!(o=i.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return i;else n=!1}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return -1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let t=0;n<this.children.length;n++){let i=this.children[n],o=t+i.size;if(o>e||i instanceof ry){r=e-t;break}t=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof rh&&e.side>=0;n--);if(t<=0){let e,r=!0;for(;(e=n?this.children[n-1]:null)&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?ni(e.dom)+1:0}}{let e,r=!0;for(;(e=n<this.children.length?this.children[n]:null)&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?ni(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,a=0;;a++){let n=this.children[a],s=o+n.size;if(-1==r&&e<=s){let i=o+n.border;if(e>=i&&t<=s-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=o;for(let t=a;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=ni(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(s>t||a==this.children.length-1)){t=s;for(let e=a+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=ni(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=s}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Math.min(e,t),o=Math.max(e,t);for(let a=0,s=0;a<this.children.length;a++){let l=this.children[a],c=s+l.size;if(i>s&&o<c)return l.setSelection(e-s-l.border,t-s-l.border,n,r);s=c}let a=this.domFromPos(e,e?-1:1),s=t==e?a:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),u=!1;if((nI||nL)&&e==t){let{node:e,offset:t}=a;if(3==e.nodeType){if((u=!!(t&&"\n"==e.nodeValue[t-1]))&&t==e.nodeValue.length)for(let t=e,n;t;t=t.parentNode){if(n=t.nextSibling){"BR"==n.nodeName&&(a=s={node:n.parentNode,offset:ni(n)+1});break}let e=t.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(nI&&c.focusNode&&c.focusNode!=s.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||u&&nL)&&nc(a.node,a.offset,c.anchorNode,c.anchorOffset)&&nc(s.node,s.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==t)&&!u){l.collapse(a.node,a.offset);try{e!=t&&l.extend(s.node,s.offset),d=!0}catch(e){}}if(!d){if(e>t){let e=a;a=s,s=e}let n=document.createRange();n.setEnd(s.node,s.offset),n.setStart(a.node,a.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let r=n+i.border,a=o-i.border;if(e>=r&&t<=a){this.dirty=e==n||t==o?ru:rc,e==r&&t==a&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=rd:i.markDirty(e-r,t-r);return}i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?rd:ru}n=o}this.dirty=ru}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?ru:rc;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=rl,n.pmViewDesc=this}}class rh extends rp{matchesWidget(e){return this.dirty==rl&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}constructor(e,t,n,r){let i,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r)),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}}class rf extends rp{get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}}class rm extends rp{static create(e,t,n,r){let i=r.nodeViews[t.type.name],o=i&&i(t,r,n);return o&&o.dom||(o=eT.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new rm(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&rd||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=rd&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=rl){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=rl}}slice(e,t,n){let r=rm.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;t<o&&(i=r_(i,t,o,n)),e>0&&(i=r_(i,0,e,n));for(let e=0;e<i.length;e++)i[e].parent=r;return r.children=i,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}constructor(e,t,n,r,i){super(e,[],n,r),this.mark=t,this.spec=i}}class rg extends rp{static create(e,t,n,r,i,o){let a=i.nodeViews[t.type.name],s,l=a&&a(t,i,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o,n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=eT.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return(c=rE(c,n,t),l)?s=new rb(e,t,n,r,c,u||null,d,l,i,o+1):t.isText?new rx(e,t,n,r,c,d,i):new rg(e,t,n,r,c,u||null,d,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>v.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return this.dirty==rl&&e.eq(this.node)&&rD(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return+!this.node.isLeaf}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,s=new rA(this,o&&o.node,e);rL(this.node,this.innerDeco,(t,i,o)=>{t.spec.marks?s.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&s.syncToMarks(i==this.node.childCount?w.none:this.node.child(i).marks,n,e),s.placeWidget(t,e,r)},(t,o,l,c)=>{let u;s.syncToMarks(t.marks,n,e),s.findNodeMatch(t,o,l,c)||a&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=s.findIndexWithChild(i.node))>-1&&s.updateNodeAt(t,o,l,u,e)||s.updateNextNode(t,o,l,e,c,r)||s.addNode(t,o,l,e,r),r+=t.nodeSize}),s.syncToMarks([],n,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||this.dirty==ru)&&(o&&this.protectLocalComposition(e,o),rw(this.contentDOM,this.children,e),nP&&rP(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof tq)||n<t||r>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(!this.node.inlineContent)return{node:i,pos:-1,text:""};{let e=i.nodeValue,o=rR(this.node.content,e,n-t,r-t);return o<0?null:{node:i,pos:o,text:e}}}protectLocalComposition(e,t){let{node:n,pos:r,text:i}=t;if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new rf(this,o,n,i);e.input.compositionNodes.push(a),this.children=r_(this.children,r,r+i.length,e,a)}update(e,t,n,r){return this.dirty!=rd&&!!e.sameMarkup(this.node)&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=rl}updateOuterDeco(e){if(rD(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=rS(this.dom,this.nodeDOM,rk(this.outerDeco,this.node,t),rk(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}constructor(e,t,n,r,i,o,a,s,l){super(e,[],i,o),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=a}}function rv(e,t,n,r,i){rE(r,t,e);let o=new rg(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class rx extends rg{parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return this.dirty!=rd&&(this.dirty==rl||!!this.inParent())&&!!e.sameMarkup(this.node)&&(this.updateOuterDeco(t),(this.dirty!=rl||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=rl,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new rx(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=rd)}get domAtom(){return!1}isText(e){return this.node.text==e}constructor(e,t,n,r,i,o,a){super(e,t,n,r,i,null,o,a,0)}}class ry extends rp{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==rl&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class rb extends rg{update(e,t,n,r){if(this.dirty==rd)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return(!!this.contentDOM||!!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}constructor(e,t,n,r,i,o,a,s,l,c){super(e,t,n,r,i,o,a,l,c),this.spec=s}}function rw(e,t,n){let r=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let a=t[o],s=a.dom;if(s.parentNode==e){for(;s!=r;)r=rI(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(s,r);if(a instanceof rm){let t=r?r.previousSibling:e.lastChild;rw(a.contentDOM,a.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=rI(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}let rj=function(e){e&&(this.nodeName=e)};rj.prototype=Object.create(null);let rC=[new rj];function rk(e,t,n){if(0==e.length)return rC;let r=n?rC[0]:new rj,i=[r];for(let o=0;o<e.length;o++){let a=e[o].type.attrs;if(a)for(let e in a.nodeName&&i.push(r=new rj(a.nodeName)),a){let o=a[e];null!=o&&(n&&1==i.length&&i.push(r=new rj(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+o:"style"==e?r.style=(r.style?r.style+";":"")+o:"nodeName"!=e&&(r[e]=o))}}return i}function rS(e,t,n,r){if(n==rC&&r==rC)return t;let i=t;for(let t=0;t<r.length;t++){let o=r[t],a=n[t];if(t){let t;a&&a.nodeName==o.nodeName&&i!=e&&(t=i.parentNode)&&t.nodeName.toLowerCase()==o.nodeName||((t=document.createElement(o.nodeName)).pmIsDeco=!0,t.appendChild(i),a=rC[0]),i=t}rN(i,a||rC[0],o)}return i}function rN(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=n.exec(t.style);)e.style.removeProperty(r[1])}n.style&&(e.style.cssText+=n.style)}}function rE(e,t,n){return rS(e,e,rC,rk(t,n,1!=e.nodeType))}function rD(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function rI(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class rA{destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=rl,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=rm.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(let r=this.index,o=Math.min(this.top.children.length,r+5);r<o;r++){let o=this.top.children[r];if(o.matchesNode(e,t,n)&&!this.preMatch.matched.has(o)){i=r;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,i){let o=this.top.children[r];return o.dirty==rd&&o.dom==o.contentDOM&&(o.dirty=ru),!!o.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e}return -1}e=t}}updateNextNode(e,t,n,r,i,o){for(let a=this.index;a<this.top.children.length;a++){let s=this.top.children[a];if(s instanceof rg){let l=this.preMatch.matched.get(s);if(null!=l&&l!=i)return!1;let c=s.dom,u,d=this.isLocked(c)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&s.dirty!=rd&&rD(t,s.outerDeco));if(!d&&s.update(e,t,n,r))return this.destroyBetween(this.index,a),s.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(u=this.recreateWrapper(s,e,t,n,r,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=ru,u.updateChildren(r,o+1),u.dirty=rl),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!rD(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let a=rg.create(this.top,t,n,r,i,o);if(a.contentDOM)for(let t of(a.children=e.children,e.children=[],a.children))t.parent=a;return e.destroy(),a}addNode(e,t,n,r,i){let o=rg.create(this.top,e,t,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let r=new rh(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof rm;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof rx)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((nL||nT)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new ry(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=rT(e.node.content,e)}}function rT(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,a=[];n:for(;i>0;){let s;for(;;)if(r){let e=n.children[r-1];if(e instanceof rm)n=e,r=e.children.length;else{s=e,r--;break}}else if(n==t)break n;else r=n.parent.children.indexOf(n),n=n.parent;let l=s.node;if(l){if(l!=e.child(i-1))break;--i,o.set(s,i),a.push(s)}}return{index:i,matched:o,matches:a.reverse()}}function rM(e,t){return e.type.side-t.type.side}function rL(e,t,n,r){let i=t.locals(e),o=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let a=e.child(n);r(a,i,t.forChild(o,a),n),o+=a.nodeSize}return}let a=0,s=[],l=null;for(let c=0;;){let u,d,p,h;for(;a<i.length&&i[a].to==o;){let e=i[a++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(rM);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(u,c,!!l);if(l)h=-1,p=l,l=null;else if(c<e.childCount)h=c,p=e.child(c++);else break;for(let e=0;e<s.length;e++)s[e].to<=o&&s.splice(e--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)s.push(i[a++]);let f=o+p.nodeSize;if(p.isText){let e=f;a<i.length&&i[a].from<e&&(e=i[a].from);for(let t=0;t<s.length;t++)s[t].to<e&&(e=s[t].to);e<f&&(l=p.cut(e-o),p=p.cut(0,e-o),f=e,h=-1)}else for(;a<i.length&&i[a].to<f;)a++;let m=p.isInline&&!p.isLeaf?s.filter(e=>!e.inline):s.slice();r(p,m,t.forChild(o,p),h),o=f}}function rP(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function rR(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let a=e.child(i++),s=o;if(o+=a.nodeSize,!a.isText)continue;let l=a.text;for(;i<e.childCount;){let t=e.child(i++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){if(o>=r&&l.slice(r-t.length-s,r-s)==t)return r-t.length;let e=s<r?l.lastIndexOf(t,r-s-1):-1;if(e>=0&&e+t.length+s>=n)return s+e;if(n==r&&l.length>=r+t.length-s&&l.slice(r-s,r-s+t.length)==t)return r}}return -1}function r_(e,t,n,r,i){let o=[];for(let a=0,s=0;a<e.length;a++){let l=e[a],c=s,u=s+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function rO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&0==i.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let s=r.resolve(a),l,c;if(nv(n)){for(l=a;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&tK.isSelectable(e)&&i.parent&&!(e.isInline&&nm(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;c=new tK(a==e?s:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=a,i=a;for(let r=0;r<n.rangeCount;r++){let o=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(o.startContainer,o.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(o.endContainer,o.endOffset,-1))}if(t<0)return null;[l,a]=i==e.state.selection.anchor?[i,t]:[t,i],s=r.resolve(a)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let n="pointer"==t||e.state.selection.head<s.pos&&!o?1:-1;c=rK(e,u,s,n)}return c}function rF(e){return e.editable?e.hasFocus():rY(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function rB(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(rq(e,n),rF(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&nT){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&nc(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)rW(e);else{let{anchor:r,head:i}=n,o,a;rV&&!(n instanceof tq)&&(n.$from.parent.inlineContent||(o=rz(e,n.from)),n.empty||n.$from.parent.inlineContent||(a=rz(e,n.to))),e.docView.setSelection(r,i,e,t),rV&&(o&&rU(o),a&&rU(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&rG(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}let rV=nL||nT&&nM<63;function rz(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(nL&&i&&"false"==i.contentEditable)return rH(i);if((!i||"false"==i.contentEditable)&&(!o||"false"==o.contentEditable)){if(i)return rH(i);else if(o)return rH(o)}}function rH(e){return e.contentEditable="true",nL&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function rU(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function rG(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!rF(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function rW(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setStart(r.parentNode,ni(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&nE&&nD<=11&&(r.disabled=!0,r.disabled=!1)}function rq(e,t){if(t instanceof tK){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(rZ(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else rZ(e)}function rZ(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function rK(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||tq.between(t,n,r)}function r$(e){return(!e.editable||!!e.hasFocus())&&rY(e)}function rY(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function rJ(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return nc(t.node,t.offset,n.anchorNode,n.anchorOffset)}function rQ(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&tH.findFrom(o,t)}function rX(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function r0(e,t,n){let r=e.state.selection;if(r instanceof tq){if(n.indexOf("s")>-1){let{$head:n}=r,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=e.state.doc.resolve(n.pos+i.nodeSize*(t<0?-1:1));return rX(e,new tq(r.$anchor,o))}else if(!r.empty)return!1;else if(e.endOfTextblock(t>0?"forward":"backward")){let n=rQ(e.state,t);return!!n&&n instanceof tK&&rX(e,n)}else if(!(nR&&n.indexOf("m")>-1)){let n=r.$head,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter,o;if(!i||i.isText)return!1;let a=t<0?n.pos-i.nodeSize:n.pos;return!!(i.isAtom||(o=e.docView.descAt(a))&&!o.contentDOM)&&(tK.isSelectable(i)?rX(e,new tK(t<0?e.state.doc.resolve(n.pos-i.nodeSize):n)):!!nF&&rX(e,new tq(e.state.doc.resolve(t<0?a:a+i.nodeSize))))}}else{if(r instanceof tK&&r.node.isInline)return rX(e,new tq(t>0?r.$to:r.$from));let n=rQ(e.state,t);return!!n&&rX(e,n)}}function r1(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function r2(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function r5(e,t){return t<0?r4(e):r3(e)}function r4(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,a=!1;for(nI&&1==n.nodeType&&r<r1(n)&&r2(n.childNodes[r],-1)&&(a=!0);;)if(r>0)if(1!=n.nodeType)break;else{let e=n.childNodes[r-1];if(r2(e,-1))i=n,o=--r;else if(3==e.nodeType)r=(n=e).nodeValue.length;else break}else if(r9(n))break;else{let t=n.previousSibling;for(;t&&r2(t,-1);)i=n.parentNode,o=ni(t),t=t.previousSibling;if(t)r=r1(n=t);else{if((n=n.parentNode)==e.dom)break;r=0}}a?r8(e,n,r):i&&r8(e,i,o)}function r3(e){let t,n,r=e.domSelectionRange(),i=r.focusNode,o=r.focusOffset;if(!i)return;let a=r1(i);for(;;)if(o<a){if(1!=i.nodeType)break;if(r2(i.childNodes[o],1))t=i,n=++o;else break}else if(r9(i))break;else{let r=i.nextSibling;for(;r&&r2(r,1);)t=r.parentNode,n=ni(r)+1,r=r.nextSibling;if(r)o=0,a=r1(i=r);else{if((i=i.parentNode)==e.dom)break;o=a=0}}t&&r8(e,t,n)}function r9(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function r7(e,t){for(;e&&t==e.childNodes.length&&!ng(e);)t=ni(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}function r6(e,t){for(;e&&!t&&!ng(e);)t=ni(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}function r8(e,t,n){if(3!=t.nodeType){let e,r;(r=r7(t,n))?(t=r,n=0):(e=r6(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(nv(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&rB(e)},50)}function ie(e,t){let n=e.state.doc.resolve(t);if(!(nT||n_)&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function it(e,t,n){let r=e.state.selection;if(r instanceof tq&&!r.empty||n.indexOf("s")>-1||nR&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=rQ(e.state,t);if(n&&n instanceof tK)return rX(e,n)}if(!i.parent.inlineContent){let n=t<0?i:o,a=r instanceof tY?tH.near(n,t):tH.findFrom(n,t);return!!a&&rX(e,a)}return!1}function ir(e,t){if(!(e.state.selection instanceof tq))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let r=e.state.tr;return t<0?r.delete(n.pos-o.nodeSize,n.pos):r.delete(n.pos,n.pos+o.nodeSize),e.dispatch(r),!0}return!1}function ii(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function io(e){if(!nL||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;ii(e,n,"true"),setTimeout(()=>ii(e,n,"false"),20)}return!1}function ia(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function is(e,t){let n=t.keyCode,r=ia(t);if(8==n||nR&&72==n&&"c"==r)return ir(e,-1)||r5(e,-1);if(46==n&&!t.shiftKey||nR&&68==n&&"c"==r)return ir(e,1)||r5(e,1);if(13==n||27==n)return!0;if(37==n||nR&&66==n&&"c"==r){let t=37==n?"ltr"==ie(e,e.state.selection.from)?-1:1:-1;return r0(e,t,r)||r5(e,t)}if(39==n||nR&&70==n&&"c"==r){let t=39==n?"ltr"==ie(e,e.state.selection.from)?1:-1:1;return r0(e,t,r)||r5(e,t)}else if(38==n||nR&&80==n&&"c"==r)return it(e,-1,r)||r5(e,-1);else if(40==n||nR&&78==n&&"c"==r)return io(e)||it(e,1,r)||r5(e,1);else if(r==(nR?"m":"c")&&(66==n||73==n||89==n||90==n))return!0;return!1}function il(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let a=e.someProp("clipboardSerializer")||eT.fromSchema(e.state.schema),s=ib(),l=s.createElement("div");l.appendChild(a.serializeFragment(r,{document:s}));let c=l.firstChild,u,d=0;for(;c&&1==c.nodeType&&(u=ix[c.nodeName.toLowerCase()]);){for(let e=u.length-1;e>=0;e--){let t=s.createElement(u[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}c=l.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice","".concat(i," ").concat(o).concat(d?" -".concat(d):""," ").concat(JSON.stringify(n))),{dom:l,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function ic(e,t,n,r,i){let o,a,s=i.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",n=>{t=n(t,s||r,e)}),s)return t?new C(v.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):C.empty;let n=e.someProp("clipboardTextParser",n=>n(t,i,r,e));if(n)a=n;else{let n=i.marks(),{schema:r}=e.state,a=eT.fromSchema(r);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(a.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),o=iC(n),nF&&ik(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let e=+u[3];e>0;e--){let e=o.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;o=e}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||ev.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||iu.test(e.parentNode.nodeName)?null:{ignore:!0}})),u)a=iS(iv(a,+u[1],+u[2]),u[4]);else if((a=C.maxOpen(id(a.content,i),!0)).openStart||a.openEnd){let e=0,t=0;for(let t=a.content.firstChild;e<a.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=a.content.lastChild;t<a.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);a=iv(a,e,t)}return e.someProp("transformPasted",t=>{a=t(a,e)}),a}let iu=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function id(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.index(n)),i,o=[];if(e.forEach(e=>{if(!o)return;let t=r.findWrapping(e.type),n;if(!t)return o=null;if(n=o.length&&i.length&&ih(t,i,e,o[o.length-1],0))o[o.length-1]=n;else{o.length&&(o[o.length-1]=im(o[o.length-1],i.length));let n=ip(e,t);o.push(n),r=r.matchType(n.type),i=t}}),o)return v.from(o)}return e}function ip(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let r=t.length-1;r>=n;r--)e=t[r].create(null,v.from(e));return e}function ih(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=ih(e,t,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(v.from(ip(n,e,i+1))))}}function im(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,im(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(v.empty,!0);return e.copy(n.append(r))}function ig(e,t,n,r,i,o){let a=t<0?e.firstChild:e.lastChild,s=a.content;return e.childCount>1&&(o=0),i<r-1&&(s=ig(s,t,n,r,i+1,o)),i>=n&&(s=t<0?a.contentMatchAt(0).fillBefore(s,o<=i).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(v.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(s))}function iv(e,t,n){return t<e.openStart&&(e=new C(ig(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new C(ig(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}let ix={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},iy=null;function ib(){return iy||(iy=document.implementation.createHTMLDocument("title"))}let iw=null;function ij(e){let t=window.trustedTypes;return t?(iw||(iw=t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),iw.createHTML(e)):e}function iC(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=ib().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&ix[r[1].toLowerCase()])&&(e=i.map(e=>"<"+e+">").join("")+e+i.map(e=>"</"+e+">").reverse().join("")),n.innerHTML=ij(e),i)for(let e=0;e<i.length;e++)n=n.querySelector(i[e])||n;return n}function ik(e){let t=e.querySelectorAll(nT?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function iS(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch(t){return e}let{content:i,openStart:o,openEnd:a}=e;for(let e=r.length-2;e>=0;e-=2){let t=n.nodes[r[e]];if(!t||t.hasRequiredAttrs())break;i=v.from(t.create(r[e+1],i)),o++,a++}return new C(i,o,a)}let iN={},iE={},iD={touchstart:!0,touchmove:!0};class iI{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function iA(e){for(let t in iN){let n=iN[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!iR(e,t)||iP(e,t)||!e.editable&&t.type in iE||n(e,t)},iD[t]?{passive:!0}:void 0)}nL&&e.dom.addEventListener("input",()=>null),iL(e)}function iT(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function iM(e){for(let t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function iL(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>iP(e,t))})}function iP(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function iR(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function i_(e,t){iP(e,t)||!iN[t.type]||!e.editable&&t.type in iE||iN[t.type](e,t)}function iO(e){return{left:e.clientX,top:e.clientY}}function iF(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function iB(e,t,n,r,i){if(-1==r)return!1;let o=e.state.doc.resolve(r);for(let r=o.depth+1;r>0;r--)if(e.someProp(t,t=>r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)))return!0;return!1}function iV(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function iz(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&tK.isSelectable(r))&&(iV(e,new tK(n),"pointer"),!0)}function iH(e,t){if(-1==t)return!1;let n=e.state.selection,r,i;n instanceof tK&&(r=n.node);let o=e.state.doc.resolve(t);for(let e=o.depth+1;e>0;e--){let t=e>o.depth?o.nodeAfter:o.node(e);if(tK.isSelectable(t)){i=r&&n.$from.depth>0&&e>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?o.before(n.$from.depth):o.before(e);break}}return null!=i&&(iV(e,tK.create(e.state.doc,i),"pointer"),!0)}function iU(e,t,n,r,i){return iB(e,"handleClickOn",t,n,r)||e.someProp("handleClick",n=>n(e,t,r))||(i?iH(e,n):iz(e,n))}function iG(e,t,n,r){return iB(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}function iW(e,t,n,r){return iB(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||iq(e,n,r)}function iq(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(iV(e,tq.create(r,0,r.content.size),"pointer"),!0);let i=r.resolve(t);for(let t=i.depth+1;t>0;t--){let n=t>i.depth?i.nodeAfter:i.node(t),o=i.before(t);if(n.inlineContent)iV(e,tq.create(r,o+1,o+1+n.content.size),"pointer");else{if(!tK.isSelectable(n))continue;iV(e,tK.create(r,o),"pointer")}return!0}}function iZ(e){return i2(e)}iE.keydown=(e,t)=>{let n=t;if((e.input.shiftKey=16==n.keyCode||n.shiftKey,!iY(e,n))&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!nO||!nT||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!nP||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||is(e,n)?n.preventDefault():iT(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,nx(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},iE.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},iE.keypress=(e,t)=>{let n=t;if(iY(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||nR&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof tq)||!r.$from.sameParent(r.$to)){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,r.$from.pos,r.$to.pos,t))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};let iK=nR?"metaKey":"ctrlKey";iN.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=iZ(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&iF(n,e.input.lastClick)&&!n[iK]&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let a=e.posAtCoords(iO(n));a&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new i$(e,a,n,!!r)):("doubleClick"==o?iG:iW)(e,a.pos,a.inside,n)?n.preventDefault():iT(e,"pointer"))};class i${done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>rB(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(iO(e))),this.updateAllowDefault(e),this.allowDefault||!t?iT(this.view,"pointer"):iU(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||nL&&this.mightDrag&&!this.mightDrag.node.isAtom||nT&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to)))?(iV(this.view,tH.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):iT(this.view,"pointer")}move(e){this.updateAllowDefault(e),iT(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}constructor(e,t,n,r){let i,o;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[iK],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,o=n.depth?n.before():0}let a=r?null:n.target,s=a?e.docView.nearestDesc(a,!0):null;this.target=s&&1==s.dom.nodeType?s.dom:null;let{selection:l}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof tK&&l.from<=o&&l.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&nI&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),iT(e,"pointer")}}function iY(e,t){return!!e.composing||!!(nL&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}iN.touchstart=e=>{e.input.lastTouch=Date.now(),iZ(e),iT(e,"pointer")},iN.touchmove=e=>{e.input.lastTouch=Date.now(),iT(e,"pointer")},iN.contextmenu=e=>iZ(e);let iJ=nO?5e3:-1;function iQ(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>i2(e),t))}function iX(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=i1());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function i0(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=nh(t.focusNode,t.focusOffset),r=nf(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(!(!e||!e.isText(n.nodeValue)))return r}}return n||r}function i1(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function i2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!nO||!(e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),iX(e),t||e.docView&&e.docView.dirty){let n=rO(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function i5(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}iE.compositionstart=iE.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof tq&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),i2(e,!0),e.markCursor=null;else if(i2(e,!t.selection.empty),nI&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}iQ(e,iJ)},iE.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,iQ(e,20))};let i4=nE&&nD<15||nP&&nB<604;function i3(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function i9(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?i7(e,r.value,null,i,t):i7(e,r.textContent,r.innerHTML,i,t)},50)}function i7(e,t,n,r,i){let o=ic(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,o||C.empty)))return!0;if(!o)return!1;let a=i3(o),s=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function i6(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}iN.copy=iE.cut=(e,t)=>{let n=t,r=e.state.selection,i="cut"==n.type;if(r.empty)return;let o=i4?null:n.clipboardData,{dom:a,text:s}=il(e,r.content());o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",s)):i5(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},iE.paste=(e,t)=>{let n=t;if(e.composing&&!nO)return;let r=i4?null:n.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&i7(e,i6(r),r.getData("text/html"),i,n)?n.preventDefault():i9(e,n)};class i8{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}let oe=nR?"altKey":"ctrlKey";for(let e in iN.dragstart=(e,t)=>{let n,r=t,i=e.input.mouseDown;if(i&&i.done(),!r.dataTransfer)return;let o=e.state.selection,a=o.empty?null:e.posAtCoords(iO(r));if(a&&a.pos>=o.from&&a.pos<=(o instanceof tK?o.to-1:o.to));else if(i&&i.mightDrag)n=tK.create(e.state.doc,i.mightDrag.pos);else if(r.target&&1==r.target.nodeType){let t=e.docView.nearestDesc(r.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(n=tK.create(e.state.doc,t.posBefore))}let s=(n||e.state.selection).content(),{dom:l,text:c,slice:u}=il(e,s);r.dataTransfer.files.length&&nT&&!(nM>120)||r.dataTransfer.clearData(),r.dataTransfer.setData(i4?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",i4||r.dataTransfer.setData("text/plain",c),e.dragging=new i8(u,!r[oe],n)},iN.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},iE.dragover=iE.dragenter=(e,t)=>t.preventDefault(),iE.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(iO(n));if(!i)return;let o=e.state.doc.resolve(i.pos),a=r&&r.slice;a?e.someProp("transformPasted",t=>{a=t(a,e)}):a=ic(e,i6(n.dataTransfer),i4?null:n.dataTransfer.getData("text/html"),!1,o);let s=!!(r&&!n[oe]);if(e.someProp("handleDrop",t=>t(e,n,a||C.empty,s)))return void n.preventDefault();if(!a)return;n.preventDefault();let l=a?tw(e.state.doc,o.pos,a):o.pos;null==l&&(l=o.pos);let c=e.state.tr;if(s){let{node:e}=r;e?e.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,p=c.doc;if(d?c.replaceRangeWith(u,u,a.content.firstChild):c.replaceRange(u,u,a),c.doc.eq(p))return;let h=c.doc.resolve(u);if(d&&tK.isSelectable(a.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new tK(h));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((e,n,r,i)=>t=i),c.setSelection(rK(e,h,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},iN.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&rB(e)},20))},iN.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},iN.beforeinput=(e,t)=>{let n=t;if(nT&&nO&&"deleteContentBackward"==n.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,nx(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}},iE)iN[e]=iE[e];function ot(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class on{map(e,t,n,r){let{pos:i,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new oo(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof on&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ot(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}constructor(e,t){this.toDOM=e,this.spec=t||ol,this.side=this.spec.side||0}}class or{map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new oo(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof or&&ot(this.attrs,e.attrs)&&ot(this.spec,e.spec)}static is(e){return e.type instanceof or}destroy(){}constructor(e,t){this.attrs=e,this.spec=t||ol}}class oi{map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new oo(i.pos-n,o.pos-n,this)}valid(e,t){let{index:n,offset:r}=e.content.findIndex(t.from),i;return r==t.from&&!(i=e.child(n)).isText&&r+i.nodeSize==t.to}eq(e){return this==e||e instanceof oi&&ot(this.attrs,e.attrs)&&ot(this.spec,e.spec)}destroy(){}constructor(e,t){this.attrs=e,this.spec=t||ol}}class oo{copy(e,t){return new oo(e,t,this.type)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new oo(e,e,new on(t,n))}static inline(e,t,n,r){return new oo(e,t,new or(n,r))}static node(e,t,n,r){return new oo(e,t,new oi(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof or}get widget(){return this.type instanceof on}constructor(e,t,n){this.from=e,this.to=t,this.type=n}}let oa=[],ol={};class oc{static create(e,t){return t.length?ov(t,e,0,ol):ou}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,n,r+a,i)}}map(e,t,n){return this==ou||0==e.maps.length?this:this.mapInner(e,t,0,0,n||ol)}mapInner(e,t,n,r,i){let o;for(let a=0;a<this.local.length;a++){let s=this.local[a].map(e,n,r);s&&s.type.valid(t,s)?(o||(o=[])).push(s):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?op(this.children,o||[],e,t,n,r,i):o?new oc(o.sort(ox),oa):ou}add(e,t){return t.length?this==ou?oc.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach((e,o)=>{let a=o+n,s;if(s=om(t,e,a)){for(r||(r=this.children.slice());i<r.length&&r[i]<o;)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(e,s,a+1):r.splice(i,0,o,o+e.nodeSize,ov(s,e,a+1,ol)),i+=3}});let o=oh(i?og(t):t,-n);for(let t=0;t<o.length;t++)o[t].type.valid(e,o[t])||o.splice(t--,1);return new oc(o.length?this.local.concat(o).sort(ox):this.local,r||this.children)}remove(e){return 0==e.length||this==ou?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let i,o=n[r]+t,a=n[r+1]+t;for(let t=0,n;t<e.length;t++)(n=e[t])&&n.from>o&&n.to<a&&(e[t]=null,(i||(i=[])).push(n));if(!i)continue;n==this.children&&(n=this.children.slice());let s=n[r+2].removeInner(i,o+1);s!=ou?n[r+2]=s:(n.splice(r,3),r-=3)}if(r.length){for(let n=0,i;n<e.length;n++)if(i=e[n])for(let e=0;e<r.length;e++)r[e].eq(i,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1))}return n==this.children&&r==this.local?this:r.length||n.length?new oc(r,n):ou}forChild(e,t){let n,r;if(this==ou)return this;if(t.isLeaf)return oc.empty;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let i=e+1,o=i+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<o&&t.to>i&&t.type instanceof or){let e=Math.max(i,t.from)-i,n=Math.min(o,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let e=new oc(r.sort(ox),oa);return n?new od([e,n]):e}return n||ou}eq(e){if(this==e)return!0;if(!(e instanceof oc)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return oy(this.localsInner(e))}localsInner(e){if(this==ou)return oa;if(e.inlineContent||!this.local.some(or.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof or||t.push(this.local[e]);return t}forEachSet(e){e(this)}constructor(e,t){this.local=e.length?e:oa,this.children=t.length?t:oa}}oc.empty=new oc([],[]),oc.removeOverlap=oy;let ou=oc.empty;class od{map(e,t){let n=this.members.map(n=>n.map(e,t,ol));return od.from(n)}forChild(e,t){if(t.isLeaf)return oc.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=ou&&(i instanceof od?n=n.concat(i.members):n.push(i))}return od.from(n)}eq(e){if(!(e instanceof od)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?oy(n?t:t.sort(ox)):oa}static from(e){switch(e.length){case 0:return ou;case 1:return e[0];default:return new od(e.every(e=>e instanceof oc)?e:e.reduce((e,t)=>e.concat(t instanceof oc?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}constructor(e){this.members=e}}function op(e,t,n,r,i,o,a){let s=e.slice();for(let e=0,t=o;e<n.maps.length;e++){let r=0;n.maps[e].forEach((e,n,i,o)=>{let a=o-i-(n-e);for(let i=0;i<s.length;i+=3){let o=s[i+1];if(o<0||e>o+t-r)continue;let l=s[i]+t-r;n>=l?s[i+1]=e<=l?-2:-1:e>=t&&a&&(s[i]+=a,s[i+1]+=a)}r+=a}),t=n.maps[e].map(t,-1)}let l=!1;for(let t=0;t<s.length;t+=3)if(s[t+1]<0){if(-2==s[t+1]){l=!0,s[t+1]=-1;continue}let c=n.map(e[t]+o),u=c-i;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[t+1]+o,-1)-i,{index:p,offset:h}=r.content.findIndex(u),f=r.maybeChild(p);if(f&&h==u&&h+f.nodeSize==d){let r=s[t+2].mapInner(n,f,c+1,e[t]+o+1,a);r!=ou?(s[t]=u,s[t+1]=d,s[t+2]=r):(s[t+1]=-2,l=!0)}else l=!0}if(l){let l=ov(of(s,e,t,n,i,o,a),r,0,a);t=l.local;for(let e=0;e<s.length;e+=3)s[e+1]<0&&(s.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let n=l.children[e];for(;t<s.length&&s[t]<n;)t+=3;s.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new oc(t.sort(ox),s)}function oh(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new oo(i.from+t,i.to+t,i.type))}return n}function of(e,t,n,r,i,o,a){function s(e,t){for(let o=0;o<e.local.length;o++){let s=e.local[o].map(r,i,t);s?n.push(s):a.onRemove&&a.onRemove(e.local[o].spec)}for(let n=0;n<e.children.length;n+=3)s(e.children[n+2],e.children[n]+t+1)}for(let n=0;n<e.length;n+=3)-1==e[n+1]&&s(e[n+2],t[n]+o+1);return n}function om(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let t=0,o;t<e.length;t++)(o=e[t])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[t]=null);return i}function og(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function ov(e,t,n,r){let i=[],o=!1;t.forEach((t,a)=>{let s=om(e,t,a+n);if(s){o=!0;let e=ov(s,t,n+a+1,r);e!=ou&&i.push(a,a+t.nodeSize,e)}});let a=oh(o?og(e):e,-n).sort(ox);for(let e=0;e<a.length;e++)a[e].type.valid(t,a[e])||(r.onRemove&&r.onRemove(a[e].spec),a.splice(e--,1));return a.length||i.length?new oc(a,i):ou}function ox(e,t){return e.from-t.from||e.to-t.to}function oy(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),ob(t,i+1,o.copy(r.to,o.to)));continue}o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),ob(t,i,r.copy(o.from,r.to)));break}}return t}function ob(e,t,n){for(;t<e.length&&ox(n,e[t])>0;)t++;e.splice(t,0,n)}function ow(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=ou&&t.push(r)}),e.cursorWrapper&&t.push(oc.create(e.state.doc,[e.cursorWrapper.deco])),od.from(t)}let oj={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},oC=nE&&nD<=11;class ok{set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}}class oS{flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,oj)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(r$(this.view)){if(this.suppressingSelectionUpdates)return rB(this.view);if(nE&&nD<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&nc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let n=e.focusNode;n;n=no(n))t.add(n);for(let r=e.anchorNode;r;r=no(r))if(t.has(r)){n=r;break}let r=n&&this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&r$(e)&&!this.ignoreSelectionChange(n),i=-1,o=-1,a=!1,s=[];if(e.editable)for(let e=0;e<t.length;e++){let n=this.registerMutation(t[e],s);n&&(i=i<0?n.from:Math.min(n.from,i),o=o<0?n.to:Math.max(n.to,o),n.typeOver&&(a=!0))}if(nI&&s.length){let t=s.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of t){let t=r.parentNode;t&&"LI"==t.nodeName&&(!n||oT(e,n)!=t)&&r.remove()}}}let l=null;i<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&nv(n)&&(l=rO(e))&&l.eq(tH.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,rB(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||r)&&(i>-1&&(e.docView.markDirty(i,o),oD(e)),this.handleDOMChange(i,o,a,s),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||rB(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(nE&&nD<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||0>Array.prototype.indexOf.call(e.addedNodes,n))&&(r=n),(!o||0>Array.prototype.indexOf.call(e.addedNodes,o))&&(i=o)}let o=r&&r.parentNode==e.target?ni(r)+1:0,a=n.localPosFromDOM(e.target,o,-1),s=i&&i.parentNode==e.target?ni(i):e.target.childNodes.length;return{from:a,to:n.localPosFromDOM(e.target,s,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ok,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);nE&&nD<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),oC&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}}let oN=new WeakMap,oE=!1;function oD(e){!oN.has(e)&&(oN.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))&&(e.requiresGeckoHackNode=nI,oE||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),oE=!0))}function oI(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return nc(a.node,a.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function oA(e,t){let n;if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return oI(e,n)}function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?oI(e,n):null}function oT(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function oM(e,t,n){let r,{node:i,fromOffset:o,toOffset:a,from:s,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],nv(c)||r.push({node:c.focusNode,offset:c.focusOffset})),nT&&8===e.input.lastKeyCode)for(let e=a;e>o;e--){let t=i.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){a=e;break}if(!n||n.size)break}let d=e.state.doc,p=e.someProp("domParser")||ev.fromSchema(e.state.schema),h=d.resolve(s),f=null,m=p.parse(i,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:a,preserveWhitespace:"pre"!=h.parent.type.whitespace||"full",findPositions:r,ruleFromNode:oL,context:h});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+s,head:t+s}}return{doc:m,sel:f,from:s,to:l}}function oL(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(nL&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(e.parentNode.lastChild==e||nL&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}let oP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function oR(e,t,n,r,i){let o,a,s,l,c,u,d=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=rO(e,t);if(n&&!e.state.selection.eq(n)){if(nT&&nO&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,nx(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),d&&r.setMeta("composition",d),e.dispatch(r)}return}let p=e.state.doc.resolve(t),h=p.sharedDepth(n);t=p.before(h+1),n=e.state.doc.resolve(n).after(h+1);let f=e.state.selection,m=oM(e,t,n),g=e.state.doc,v=g.slice(m.from,m.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(o=e.state.selection.to,a="end"):(o=e.state.selection.from,a="start"),e.input.lastKeyCode=null;let x=oV(v.content,m.doc.content,m.from,o,a);if(x&&e.input.domChangeCount++,(nP&&e.input.lastIOSEnter>Date.now()-225||nO)&&i.some(e=>1==e.nodeType&&!oP.test(e.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",t=>t(e,nx(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(r&&f instanceof tq&&!f.empty&&f.$head.sameParent(f.$anchor)&&!e.composing&&!(m.sel&&m.sel.anchor!=m.sel.head))x={start:f.from,endA:f.to,endB:f.to};else{if(m.sel){let t=o_(e,e.state.doc,m.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);d&&n.setMeta("composition",d),e.dispatch(n)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof tq&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=m.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=m.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),nE&&nD<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>m.from&&"  "==m.doc.textBetween(x.start-m.from-1,x.start-m.from+1)&&(x.start--,x.endA--,x.endB--);let y=m.doc.resolveNoCache(x.start-m.from),b=m.doc.resolveNoCache(x.endB-m.from),w=g.resolve(x.start),j=y.sameParent(b)&&y.parent.inlineContent&&w.end()>=x.endA;if((nP&&e.input.lastIOSEnter>Date.now()-225&&(!j||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!j&&y.pos<m.doc.content.size&&!y.sameParent(b)&&(s=tH.findFrom(m.doc.resolve(y.pos+1),1,!0))&&s.head==b.pos)&&e.someProp("handleKeyDown",t=>t(e,nx(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&oF(g,x.start,x.endA,y,b)&&e.someProp("handleKeyDown",t=>t(e,nx(8,"Backspace")))){nO&&nT&&e.domObserver.suppressSelectionUpdates();return}nT&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),nO&&!j&&y.start()!=b.start()&&0==b.parentOffset&&y.depth==b.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==x.endA&&(x.endB-=2,b=m.doc.resolveNoCache(x.endB-m.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,nx(13,"Enter"))})},20));let C=x.start,k=x.endA;if(j){if(y.pos==b.pos)nE&&nD<=11&&0==y.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>rB(e),20)),l=e.state.tr.delete(C,k),c=g.resolve(x.start).marksAcross(g.resolve(x.endA));else if(x.endA==x.endB&&(u=oO(y.parent.content.cut(y.parentOffset,b.parentOffset),w.parent.content.cut(w.parentOffset,x.endA-w.start()))))l=e.state.tr,"add"==u.type?l.addMark(C,k,u.mark):l.removeMark(C,k,u.mark);else if(y.parent.child(y.index()).isText&&y.index()==b.index()-!b.textOffset){let t=y.parent.textBetween(y.parentOffset,b.parentOffset);if(e.someProp("handleTextInput",n=>n(e,C,k,t)))return;l=e.state.tr.insertText(t,C,k)}}if(l||(l=e.state.tr.replace(C,k,m.doc.slice(x.start-m.from,x.endB-m.from))),m.sel){let t=o_(e,l.doc,m.sel);t&&!(nT&&e.composing&&t.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==C||t.head==l.mapping.map(k)-1)||nE&&t.empty&&t.head==C)&&l.setSelection(t)}c&&l.ensureMarks(c),d&&l.setMeta("composition",d),e.dispatch(l.scrollIntoView())}function o_(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:rK(e,t.resolve(n.anchor),t.resolve(n.head))}function oO(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,o=r,a,s,l;for(let e=0;e<r.length;e++)i=r[e].removeFromSet(i);for(let e=0;e<n.length;e++)o=n[e].removeFromSet(o);if(1==i.length&&0==o.length)s=i[0],a="add",l=e=>e.mark(s.addToSet(e.marks));else{if(0!=i.length||1!=o.length)return null;s=o[0],a="remove",l=e=>e.mark(s.removeFromSet(e.marks))}let c=[];for(let e=0;e<t.childCount;e++)c.push(l(t.child(e)));if(v.from(c).eq(e))return{mark:s,type:a}}function oF(e,t,n,r,i){if(n-t<=i.pos-r.pos||oB(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let e=o.nodeAfter;return null!=e&&n==t+e.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=e.resolve(oB(o,!0,!0));return!(!a.parent.isTextblock||a.pos>n||oB(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function oB(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function oV(e,t,n,r,i){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:a,b:s}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i){let e=Math.max(0,o-Math.min(a,s));r-=a+e-o}if(a<o&&e.size<t.size){let e=r<=o&&r>=a?o-r:0;(o-=e)&&o<t.size&&oz(t.textBetween(o-1,o+1))&&(o+=e?1:-1),s=o+(s-a),a=o}else if(s<o){let t=r<=o&&r>=s?o-r:0;(o-=t)&&o<e.size&&oz(e.textBetween(o-1,o+1))&&(o+=t?1:-1),a=o+(a-s),s=o}return{start:o,endA:a,endB:s}}function oz(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class oH{get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&iL(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(o$),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];for(let n in t.state=this.state,e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(iX(this),o=!0),this.state=e;let a=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=oZ(this);oK(e,this.nodeViews)&&(this.nodeViews=e,i=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&iL(this),this.editable=oW(this),oG(this);let s=ow(this),l=oU(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",u=i||!this.docView.matchesNode(e.doc,l,s);(u||!e.selection.eq(r.selection))&&(o=!0);let d="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&nG(this);if(o){this.domObserver.stop();let t=u&&(nE||nT)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&oq(r.selection,e.selection);if(u){let n=nT?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=i0(this)),(i||!this.docView.update(e.doc,l,s,this))&&(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=rv(e.doc,l,s,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&rJ(this))?rB(this,t):(rq(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null==(n=this.dragging)?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&nq(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof tK){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&nU(this,t.getBoundingClientRect(),e)}else nU(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new i8(e.slice,e.move,r<0?void 0:tK.create(this.state.doc,r))}someProp(e,t){let n=this._props&&this._props[e],r;if(null!=n&&(r=t?t(n):n))return r;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[e];if(null!=i&&(r=t?t(i):i))return r}let i=this.state.plugins;if(i)for(let n=0;n<i.length;n++){let o=i[n].props[e];if(null!=o&&(r=t?t(o):o))return r}}hasFocus(){if(nE){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&n$(this.dom),rB(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return e||document}updateRoot(){this._root=null}posAtCoords(e){return n5(this,e)}coordsAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n7(this,e,t)}domAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return rs(this,t||this.state,e)}pasteHTML(e,t){return i7(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return i7(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(iM(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ow(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,nl())}get isDestroyed(){return null==this.docView}dispatchEvent(e){return i_(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?nL&&11===this.root.nodeType&&ny(this.dom.ownerDocument)==this.dom&&oA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new iI,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(o$),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=oW(this),oG(this),this.nodeViews=oZ(this),this.docView=rv(this.state.doc,oU(this),ow(this),this.dom,this),this.domObserver=new oS(this,(e,t,n,r)=>oR(this,e,t,n,r)),this.domObserver.start(),iA(this),this.updatePluginViews()}}function oU(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[oo.node(0,e.state.doc.content.size,t)]}function oG(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:oo.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function oW(e){return!e.someProp("editable",t=>!1===t(e.state))}function oq(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function oZ(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function oK(e,t){let n=0,r=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let e in t)r++;return n!=r}function o$(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}e.s(["Decoration",()=>oo,"DecorationSet",()=>oc,"EditorView",()=>oH],313084);for(var oY={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},oJ={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},oQ="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),oX="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),o0=0;o0<10;o0++)oY[48+o0]=oY[96+o0]=String(o0);for(var o0=1;o0<=24;o0++)oY[o0+111]="F"+o0;for(var o0=65;o0<=90;o0++)oY[o0]=String.fromCharCode(o0+32),oJ[o0]=String.fromCharCode(o0);for(var o1 in oY)oJ.hasOwnProperty(o1)||(oJ[o1]=oY[o1]);function o2(e){var t=!(oQ&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||oX&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?oJ:oY)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}let o5="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function o4(e){let t,n,r,i,o=e.split(/-(?!$)/),a=o[o.length-1];"Space"==a&&(a=" ");for(let e=0;e<o.length-1;e++){let a=o[e];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))r=!0;else if(/^mod$/i.test(a))o5?i=!0:n=!0;else throw Error("Unrecognized modifier name: "+a)}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),i&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function o3(e){let t=Object.create(null);for(let n in e)t[o4(n)]=e[n];return t}function o9(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function o7(e){return new ne({props:{handleKeyDown:o6(e)}})}function o6(e){let t=o3(e);return function(e,n){let r=o2(n),i,o=t[o9(r,n)];if(o&&o(e.state,e.dispatch,e))return!0;if(1==r.length&&" "!=r){if(n.shiftKey){let i=t[o9(r,n,!1)];if(i&&i(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||r.charCodeAt(0)>127)&&(i=oY[n.keyCode])&&i!=r){let r=t[o9(i,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1}}e.s(["keydownHandler",()=>o6,"keymap",()=>o7],124251);let o8=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function ae(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}let at=(e,t,n)=>{let r=ae(e,n);if(!r)return!1;let i=as(r);if(!i){let n=r.blockRange(),i=n&&tt(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let o=i.nodeBefore;if(ak(e,i,t,-1))return!0;if(0==r.parent.content.size&&(ao(o,"end")||tK.isSelectable(o)))for(let n=r.depth;;n--){let a=tj(e.doc,r.before(n),r.after(n),C.empty);if(a&&a.slice.size<a.to-a.from){if(t){let n=e.tr.step(a);n.setSelection(ao(o,"end")?tH.findFrom(n.doc.resolve(n.mapping.map(i.pos,-1)),-1):tK.create(n.doc,i.pos-o.nodeSize)),t(n.scrollIntoView())}return!0}if(1==n||r.node(n-1).childCount>1)break}return!!o.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0)},an=(e,t,n)=>{let r=ae(e,n);if(!r)return!1;let i=as(r);return!!i&&ai(e,i,t)},ar=(e,t,n)=>{let r=al(e,n);if(!r)return!1;let i=ad(r);return!!i&&ai(e,i,t)};function ai(e,t,n){let r=t.nodeBefore,i=t.pos-1;for(;!r.isTextblock;i--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let o=t.nodeAfter,a=t.pos+1;for(;!o.isTextblock;a++){if(o.type.spec.isolating)return!1;let e=o.firstChild;if(!e)return!1;o=e}let s=tj(e.doc,i,a,C.empty);if(!s||s.from!=i||s instanceof e4&&s.slice.size>=a-i)return!1;if(n){let t=e.tr.step(s);t.setSelection(tq.create(t.doc,i)),n(t.scrollIntoView())}return!0}function ao(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)break}return!1}let aa=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=as(r)}let a=o&&o.nodeBefore;return!!a&&!!tK.isSelectable(a)&&(t&&t(e.tr.setSelection(tK.create(e.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function as(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function al(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}let ac=(e,t,n)=>{let r=al(e,n);if(!r)return!1;let i=ad(r);if(!i)return!1;let o=i.nodeAfter;if(ak(e,i,t,1))return!0;if(0==r.parent.content.size&&(ao(o,"start")||tK.isSelectable(o))){let n=tj(e.doc,r.before(),r.after(),C.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(ao(o,"start")?tH.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):tK.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!!o.isAtom&&i.depth==r.depth-1&&(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0)},au=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=ad(r)}let a=o&&o.nodeAfter;return!!a&&!!tK.isSelectable(a)&&(t&&t(e.tr.setSelection(tK.create(e.doc,o.pos)).scrollIntoView()),!0)};function ad(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}let ap=(e,t)=>{let n=e.selection,r=n instanceof tK,i;if(r){if(n.node.isTextblock||!tm(e.doc,n.from))return!1;i=n.from}else if(null==(i=tx(e.doc,n.from,-1)))return!1;if(t){let n=e.tr.join(i);r&&n.setSelection(tK.create(n.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(n.scrollIntoView())}return!0},ah=(e,t)=>{let n=e.selection,r;if(n instanceof tK){if(n.node.isTextblock||!tm(e.doc,n.to))return!1;r=n.to}else if(null==(r=tx(e.doc,n.to,1)))return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},af=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),o=i&&tt(i);return null!=o&&(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)},am=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!!n.parent.type.spec.code&&!!n.sameParent(r)&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function ag(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let av=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),a=ag(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,a.createAndFill());i.setSelection(tH.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0},ax=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof tY||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=ag(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(n,o.createAndFill());a.setSelection(tq.create(a.doc,n+1)),t(a.scrollIntoView())}return!0},ay=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(th(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&tt(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},ab=function(e){return(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof tK&&e.selection.node.isBlock)return!!n.parentOffset&&!!th(e.doc,n.pos)&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],o,a,s=!1,l=!1;for(let e=n.depth;;e--){if(n.node(e).isBlock){s=n.end(e)==n.pos+(n.depth-e),l=n.start(e)==n.pos-(n.depth-e),a=ag(n.node(e-1).contentMatchAt(n.indexAfter(e-1)));let t=void 0;i.unshift(t||(s&&a?{type:a}:null)),o=e;break}if(1==e)return!1;i.unshift(null)}let c=e.tr;(e.selection instanceof tq||e.selection instanceof tY)&&c.deleteSelection();let u=c.mapping.map(n.pos),d=th(c.doc,u,i.length,i);if(d||(i[0]=a?{type:a}:null,d=th(c.doc,u,i.length,i)),c.split(u,i.length,i),!s&&l&&n.node(o).type!=a){let e=c.mapping.map(n.before(o)),t=c.doc.resolve(e);a&&n.node(o-1).canReplaceWith(t.index(),t.index()+1,a)&&c.setNodeMarkup(c.mapping.map(n.before(o)),a)}return t&&t(c.scrollIntoView()),!0}}(),aw=(e,t)=>{let{$from:n,to:r}=e.selection,i,o=n.sharedDepth(r);return 0!=o&&(i=n.before(o),t&&t(e.tr.setSelection(tK.create(e.doc,i))),!0)},aj=(e,t)=>(t&&t(e.tr.setSelection(new tY(e.doc))),!0);function aC(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!!r&&!!i&&!!r.type.compatibleContent(i.type)&&(!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!!t.parent.canReplace(o,o+1)&&!!(i.isTextblock||tm(e.doc,t.pos))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))}function ak(e,t,n,r){let i=t.nodeBefore,o=t.nodeAfter,a,s,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&aC(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(a=(s=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&s.matchType(a[0]||o.type).validEnd){if(n){let r=t.pos+o.nodeSize,s=v.empty;for(let e=a.length-1;e>=0;e--)s=v.from(a[e].create(null,s));s=v.from(i.copy(s));let l=e.tr.step(new e3(t.pos-1,r,t.pos,r,new C(s,1,0),a.length,!0)),c=l.doc.resolve(r+2*a.length);c.nodeAfter&&c.nodeAfter.type==i.type&&tm(l.doc,c.pos)&&l.join(c.pos),n(l.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:tH.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),p=d&&tt(d);if(null!=p&&p>=t.depth)return n&&n(e.tr.lift(d,p).scrollIntoView()),!0;if(c&&ao(o,"start",!0)&&ao(i,"end")){let r=i,a=[];for(;a.push(r),!r.isTextblock;)r=r.lastChild;let s=o,l=1;for(;!s.isTextblock;s=s.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,s.content)){if(n){let r=v.empty;for(let e=a.length-1;e>=0;e--)r=v.from(a[e].copy(r));n(e.tr.step(new e3(t.pos-a.length,t.pos+o.nodeSize,t.pos+l,t.pos+o.nodeSize-l,new C(r,a.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function aS(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(n&&n(t.tr.setSelection(tq.create(t.doc,e<0?i.start(o):i.end(o)))),!0)}}let aN=aS(-1),aE=aS(1);function aD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o),s=a&&tr(a,e,t);return!!s&&(r&&r(n.tr.wrap(a,s).scrollIntoView()),!0)}}function aI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let i=!1;for(let r=0;r<n.selection.ranges.length&&!i;r++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[r];n.doc.nodesBetween(o,a,(r,o)=>{if(i)return!1;if(!(!r.isTextblock||r.hasMarkup(e,t)))if(r.type==e)i=!0;else{let t=n.doc.resolve(o),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}})}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[r];i.setBlockType(o,a,e,t)}r(i.scrollIntoView())}return!0}}function aA(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let aT=aA(o8,at,aa),aM=aA(o8,ac,au),aL={Enter:aA(am,ax,ay,ab),"Mod-Enter":av,Backspace:aT,"Mod-Backspace":aT,"Shift-Backspace":aT,Delete:aM,"Mod-Delete":aM,"Mod-a":aj},aP={"Ctrl-h":aL.Backspace,"Alt-Backspace":aL["Mod-Backspace"],"Ctrl-d":aL.Delete,"Ctrl-Alt-Backspace":aL["Mod-Delete"],"Alt-Delete":aL["Mod-Delete"],"Alt-d":aL["Mod-Delete"],"Ctrl-a":aN,"Ctrl-e":aE};for(let e in aL)aP[e]=aL[e];function aR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:i,$to:o}=n.selection,a=i.blockRange(o);if(!a)return!1;let s=r?n.tr:null;return!!a_(s,a,e,t)&&(r&&r(s.scrollIntoView()),!0)}}function a_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!1,o=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=a.resolve(t.start-2);o=new V(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new V(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let s=tr(o,n,r,t);return!!s&&(e&&aO(e,t,s,i,n),!0)}function aO(e,t,n,r,i){let o=v.empty;for(let e=n.length-1;e>=0;e--)o=v.from(n[e].type.create(n[e].attrs,o));e.step(new e3(t.start-2*!!r,t.end,t.start,t.end,new C(o,0,0),n.length,!0));let a=0;for(let e=0;e<n.length;e++)n[e].type==i&&(a=e+1);let s=n.length-a,l=t.start+n.length-2*!!r,c=t.parent;for(let n=t.startIndex,r=t.endIndex,i=!0;n<r;n++,i=!1)!i&&th(e.doc,l,s)&&(e.split(l,s),l+=2*s),l+=c.child(n).nodeSize;return e}function aF(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);return!!o&&(!n||(r.node(o.depth-1).type==e?aB(t,n,e,o):aV(t,n,o)))}}function aB(e,t,n,r){let i=e.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new e3(o-1,a,o,a,new C(v.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new V(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));let s=tt(r);if(null==s)return!1;i.lift(r,s);let l=i.mapping.map(o,-1)-1;return tm(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}function aV(e,t,n){let r=e.tr,i=n.parent;for(let e=n.end,t=n.endIndex-1,o=n.startIndex;t>o;t--)e-=i.child(t).nodeSize,r.delete(e-1,e+1);let o=r.doc.resolve(n.start),a=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let s=0==n.startIndex,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+ +!s,u+1,a.content.append(l?v.empty:v.from(i))))return!1;let d=o.pos,p=d+a.nodeSize;return r.step(new e3(d-!!s,p+ +!!l,d+1,p-1,new C((s?v.empty:v.from(i.copy(v.empty))).append(l?v.empty:v.from(i.copy(v.empty))),+!s,+!l),+!s)),t(r.scrollIntoView()),!0}function az(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);if(!o)return!1;let a=o.startIndex;if(0==a)return!1;let s=o.parent,l=s.child(a-1);if(l.type!=e)return!1;if(n){let r=l.lastChild&&l.lastChild.type==s.type,i=v.from(r?e.create():null),a=new C(v.from(e.create(null,v.from(s.type.create(null,i)))),r?3:1,0),c=o.start,u=o.end;n(t.tr.step(new e3(c-(r?3:1),u,c,u,a,1,!0)).scrollIntoView())}return!0}}function aH(e){let{state:t,transaction:n}=e,{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class aU{get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;var a=this;return[t,function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let l=n(...t)(o);return i.getMeta("preventDispatch")||a.hasCustomState||r.dispatch(i),l}]}))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:i}=this,{view:o}=r,a=[],s=!!e,l=e||i.tr,c=()=>(s||!t||l.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(l),a.every(e=>!0===e)),u={...Object.fromEntries(Object.entries(n).map(e=>{let[n,r]=e;var i=this;return[n,function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];let s=i.buildProps(l,t),c=r(...n)(s);return a.push(c),u}]})),run:c};return u}createCan(e){let{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)({...o,dispatch:void 0})}]})),chain:()=>this.createChain(i,r)}}buildProps(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:i}=this,{view:o}=r,a={tr:e,editor:r,view:o,state:aH({state:i,transaction:e}),dispatch:t?()=>void 0:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)(a)}]}))}};return a}constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}}class aG{on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.callbacks[e];return i&&i.forEach(e=>e.apply(this,n)),this}off(e,t){let n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){var n=this;let r=function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];n.off(e,r),t.apply(n,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}constructor(){this.callbacks={}}}function aW(e,t,n){return void 0===e.config[t]&&e.parent?aW(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?aW(e.parent,t,n):null}):e.config[t]}function aq(e){let t=e.filter(e=>"extension"===e.type);return{baseExtensions:t,nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function aZ(e){let t=[],{nodeExtensions:n,markExtensions:r}=aq(e),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage,extensions:i},r=aW(e,"addGlobalAttributes",n);r&&r().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(e=>{let[r,i]=e;t.push({type:n,name:r,attribute:{...o,...i}})})})})}),i.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage},r=aW(e,"addAttributes",n);r&&Object.entries(r()).forEach(n=>{let[r,i]=n,a={...o,...i};"function"==typeof(null==a?void 0:a.default)&&(a.default=a.default()),(null==a?void 0:a.isRequired)&&(null==a?void 0:a.default)===void 0&&delete a.default,t.push({type:e.name,name:r,attribute:a})})}),t}function aK(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}function a$(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(e=>{let[t,r]=e;if(!n[t]){n[t]=r;return}if("class"===t){let e=r?String(r).split(" "):[],i=n[t]?n[t].split(" "):[],o=e.filter(e=>!i.includes(e));n[t]=[...i,...o].join(" ")}else if("style"===t){let e=r?r.split(";").map(e=>e.trim()).filter(Boolean):[],i=n[t]?n[t].split(";").map(e=>e.trim()).filter(Boolean):[],o=new Map;i.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());o.set(t,n)}),e.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());o.set(t,n)}),n[t]=Array.from(o.entries()).map(e=>{let[t,n]=e;return"".concat(t,": ").concat(n)}).join("; ")}else n[t]=r}),n},{})}function aY(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>a$(e,t),{})}function aJ(e){return"function"==typeof e}function aQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return aJ(e)?t?e.bind(t)(...r):e(...r):e}function aX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}function a0(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function a1(e,t){return"style"in e?e:{...e,getAttrs:n=>{let r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;let i=t.reduce((e,t)=>{let r=t.attribute.parseHTML?t.attribute.parseHTML(n):a0(n.getAttribute(t.name));return null==r?e:{...e,[t.name]:r}},{});return{...r,...i}}}}function a2(e){return Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return!("attrs"===t&&aX(n))&&null!=n}))}function a5(e,t){var n;let r=aZ(e),{nodeExtensions:i,markExtensions:o}=aq(e),a=null==(n=i.find(e=>aW(e,"topNode")))?void 0:n.name;return new eh({topNode:a,nodes:Object.fromEntries(i.map(n=>{let i=r.filter(e=>e.type===n.name),o={name:n.name,options:n.options,storage:n.storage,editor:t},a=a2({...e.reduce((e,t)=>{let r=aW(t,"extendNodeSchema",o);return{...e,...r?r(n):{}}},{}),content:aQ(aW(n,"content",o)),marks:aQ(aW(n,"marks",o)),group:aQ(aW(n,"group",o)),inline:aQ(aW(n,"inline",o)),atom:aQ(aW(n,"atom",o)),selectable:aQ(aW(n,"selectable",o)),draggable:aQ(aW(n,"draggable",o)),code:aQ(aW(n,"code",o)),whitespace:aQ(aW(n,"whitespace",o)),linebreakReplacement:aQ(aW(n,"linebreakReplacement",o)),defining:aQ(aW(n,"defining",o)),isolating:aQ(aW(n,"isolating",o)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default}]}))}),s=aQ(aW(n,"parseHTML",o));s&&(a.parseDOM=s.map(e=>a1(e,i)));let l=aW(n,"renderHTML",o);l&&(a.toDOM=e=>l({node:e,HTMLAttributes:aY(e,i)}));let c=aW(n,"renderText",o);return c&&(a.toText=c),[n.name,a]})),marks:Object.fromEntries(o.map(n=>{let i=r.filter(e=>e.type===n.name),o={name:n.name,options:n.options,storage:n.storage,editor:t},a=a2({...e.reduce((e,t)=>{let r=aW(t,"extendMarkSchema",o);return{...e,...r?r(n):{}}},{}),inclusive:aQ(aW(n,"inclusive",o)),excludes:aQ(aW(n,"excludes",o)),group:aQ(aW(n,"group",o)),spanning:aQ(aW(n,"spanning",o)),code:aQ(aW(n,"code",o)),attrs:Object.fromEntries(i.map(e=>{var t;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default}]}))}),s=aQ(aW(n,"parseHTML",o));s&&(a.parseDOM=s.map(e=>a1(e,i)));let l=aW(n,"renderHTML",o);return l&&(a.toDOM=e=>l({mark:e,HTMLAttributes:aY(e,i)})),[n.name,a]}))})}function a4(e,t){return t.nodes[e]||t.marks[e]||null}function a3(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function a9(e,t){let n=eT.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}let a7=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,i,o)=>{var a,s;let l=(null==(s=(a=e.type.spec).toText)?void 0:s.call(a,{node:e,pos:t,parent:i,index:o}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))}),n};function a6(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class a8{constructor(e){this.find=e.find,this.handler=e.handler}}let se=(e,t)=>{if(a6(t))return t.exec(e);let n=t(e);if(!n)return null;let r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function st(e){var t;let{editor:n,from:r,to:i,text:o,rules:a,plugin:s}=e,{view:l}=n;if(l.composing)return!1;let c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null==(t=c.nodeBefore||c.nodeAfter)?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let u=!1,d=a7(c)+o;return a.forEach(e=>{if(u)return;let t=se(d,e.find);if(!t)return;let a=l.state.tr,c=aH({state:l.state,transaction:a}),p={from:r-(t[0].length-o.length),to:i},{commands:h,chain:f,can:m}=new aU({editor:n,state:c});null!==e.handler({state:c,range:p,match:t,commands:h,chain:f,can:m})&&a.steps.length&&(a.setMeta(s,{transform:a,from:r,to:i,text:o}),l.dispatch(a),u=!0)}),u}function sn(e){let{editor:t,rules:n}=e,r=new ne({state:{init:()=>null,apply(e,i,o){let a=e.getMeta(r);if(a)return a;let s=e.getMeta("applyInputRules");return s&&setTimeout(()=>{let{text:e}=s;"string"==typeof e||(e=a9(v.from(e),o.schema));let{from:i}=s,a=i+e.length;st({editor:t,from:i,to:a,text:e,rules:n,plugin:r})}),e.selectionSet||e.docChanged?null:i}},props:{handleTextInput:(e,i,o,a)=>st({editor:t,from:i,to:o,text:a,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:i}=e.state.selection;i&&st({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(e,i){if("Enter"!==i.key)return!1;let{$cursor:o}=e.state.selection;return!!o&&st({editor:t,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function sr(e){return Object.prototype.toString.call(e).slice(8,-1)}function si(e){return"Object"===sr(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function so(e,t){let n={...e};return si(e)&&si(t)&&Object.keys(t).forEach(r=>{si(t[r])&&si(e[r])?n[r]=so(e[r],t[r]):n[r]=t[r]}),n}class sa{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new sa(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>so(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new sa(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=aQ(aW(t,"addOptions",{name:t.name})),t.storage=aQ(aW(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit(e){let{editor:t,mark:n}=e,{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){let e=i.marks();if(!e.find(e=>(null==e?void 0:e.type.name)===n.name))return!1;let o=e.find(e=>(null==e?void 0:e.type.name)===n.name);return o&&r.removeStoredMark(o),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=aQ(aW(this,"addOptions",{name:this.name}))),this.storage=aQ(aW(this,"addStorage",{name:this.name,options:this.options}))||{}}}function ss(e){return"number"==typeof e}class sl{constructor(e){this.find=e.find,this.handler=e.handler}}let sc=(e,t,n)=>{if(a6(t))return[...e.matchAll(t)];let r=t(e,n);return r?r.map(t=>{let n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]};function su(e){let{editor:t,state:n,from:r,to:i,rule:o,pasteEvent:a,dropEvent:s}=e,{commands:l,chain:c,can:u}=new aU({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;let p=Math.max(r,t),h=Math.min(i,t+e.content.size);sc(e.textBetween(p-t,h-t,void 0,"￼"),o.find,a).forEach(e=>{if(void 0===e.index)return;let t=p+e.index+1,r=t+e[0].length,i={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},h=o.handler({state:n,range:i,match:e,commands:l,chain:c,can:u,pasteEvent:a,dropEvent:s});d.push(h)})}),d.every(e=>null!==e)}let sd=null,sp=e=>{var t;let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null==(t=n.clipboardData)||t.setData("text/html",e),n};function sh(e){let t,{editor:n,rules:r}=e,i=null,o=!1,a=!1,s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}let l=e=>{let{state:r,from:i,to:o,rule:a,pasteEvt:l}=e,c=r.tr;if(su({editor:n,state:aH({state:r,transaction:c}),from:Math.max(i-1,0),to:o.b-1,rule:a,pasteEvent:l,dropEvent:t})&&c.steps.length){try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){t=null}return s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,c}};return r.map(e=>new ne({view(e){let t=t=>{var r;(i=(null==(r=e.dom.parentElement)?void 0:r.contains(t.target))?e.dom.parentElement:null)&&(sd=n)},r=()=>{sd&&(sd=null)};return window.addEventListener("dragstart",t),window.addEventListener("dragend",r),{destroy(){window.removeEventListener("dragstart",t),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:(e,n)=>{if(a=i===e.dom.parentElement,t=n,!a){let e=sd;e&&setTimeout(()=>{let t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;let r=null==(n=t.clipboardData)?void 0:n.getData("text/html");return s=t,o=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{let i=t[0],c="paste"===i.getMeta("uiEvent")&&!o,u="drop"===i.getMeta("uiEvent")&&!a,d=i.getMeta("applyPasteRules"),p=!!d;if(!c&&!u&&!p)return;if(p){let{text:t}=d;"string"==typeof t||(t=a9(v.from(t),r.schema));let{from:n}=d,i=n+t.length;return l({rule:e,state:r,from:n,to:{b:i},pasteEvt:sp(t)})}let h=n.doc.content.findDiffStart(r.doc.content),f=n.doc.content.findDiffEnd(r.doc.content);if(ss(h)&&f&&h!==f.b)return l({rule:e,state:r,from:h,to:f,pasteEvt:s})}}))}function sf(e){return Array.from(new Set(e.filter((t,n)=>e.indexOf(t)!==n)))}class sm{static resolve(e){let t=sm.sort(sm.flatten(e)),n=sf(t.map(e=>e.name));return n.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(n.map(e=>"'".concat(e,"'")).join(", "),"]. This can lead to issues.")),t}static flatten(e){return e.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},n=aW(e,"addExtensions",t);return n?[e,...this.flatten(n())]:e}).flat(10)}static sort(e){let t=100;return e.sort((e,n)=>{let r=aW(e,"priority")||t,i=aW(n,"priority")||t;return r>i?-1:+(r<i)})}get commands(){return this.extensions.reduce((e,t)=>{let n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:a4(t.name,this.schema)},r=aW(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){let{editor:e}=this,t=sm.sort([...this.extensions].reverse()),n=[],r=[],i=t.map(t=>{let i={name:t.name,options:t.options,storage:t.storage,editor:e,type:a4(t.name,this.schema)},o=[],a=aW(t,"addKeyboardShortcuts",i),s={};if("mark"===t.type&&aW(t,"exitable",i)&&(s.ArrowRight=()=>sa.handleExit({editor:e,mark:t})),a){let t=Object.fromEntries(Object.entries(a()).map(t=>{let[n,r]=t;return[n,()=>r({editor:e})]}));s={...s,...t}}let l=o7(s);o.push(l);let c=aW(t,"addInputRules",i);a3(t,e.options.enableInputRules)&&c&&n.push(...c());let u=aW(t,"addPasteRules",i);a3(t,e.options.enablePasteRules)&&u&&r.push(...u());let d=aW(t,"addProseMirrorPlugins",i);if(d){let e=d();o.push(...e)}return o}).flat();return[sn({editor:e,rules:n}),...sh({editor:e,rules:r}),...i]}get attributes(){return aZ(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=aq(this.extensions);return Object.fromEntries(t.filter(e=>!!aW(e,"addNodeView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:aK(t.name,this.schema)},i=aW(t,"addNodeView",r);if(!i)return[];let o=(r,o,a,s,l)=>{let c=aY(r,n);return i()({node:r,view:o,getPos:a,decorations:s,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})};return[t.name,o]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;let n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:a4(e.name,this.schema)};"mark"===e.type&&(null==(t=aQ(aW(e,"keepOnSplit",n)))||t)&&this.splittableMarks.push(e.name);let r=aW(e,"onBeforeCreate",n),i=aW(e,"onCreate",n),o=aW(e,"onUpdate",n),a=aW(e,"onSelectionUpdate",n),s=aW(e,"onTransaction",n),l=aW(e,"onFocus",n),c=aW(e,"onBlur",n),u=aW(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),s&&this.editor.on("transaction",s),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)})}constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=sm.resolve(e),this.schema=a5(this.extensions,t),this.setupExtensions()}}class sg{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new sg(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>so(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new sg({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=aQ(aW(t,"addOptions",{name:t.name})),t.storage=aQ(aW(t,"addStorage",{name:t.name,options:t.options})),t}constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=aQ(aW(this,"addOptions",{name:this.name}))),this.storage=aQ(aW(this,"addStorage",{name:this.name,options:this.options}))||{}}}function sv(e,t,n){let{from:r,to:i}=t,{blockSeparator:o="\n\n",textSerializers:a={}}=n||{},s="";return e.nodesBetween(r,i,(e,n,l,c)=>{var u;e.isBlock&&n>r&&(s+=o);let d=null==a?void 0:a[e.type.name];if(d)return l&&(s+=d({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(s+=null==(u=null==e?void 0:e.text)?void 0:u.slice(Math.max(r,n)-n,i-n))}),s}function sx(e){return Object.fromEntries(Object.entries(e.nodes).filter(e=>{let[,t]=e;return t.spec.toText}).map(e=>{let[t,n]=e;return[t,n.spec.toText]}))}let sy=sg.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new ne({key:new nr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:o}=i,a=Math.min(...o.map(e=>e.$from.pos)),s=Math.max(...o.map(e=>e.$to.pos)),l=sx(n);return sv(r,{from:a,to:s},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function sb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:a6(t[r])?t[r].test(e[r]):t[r]===e[r])}function sw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find(e=>e.type===t&&sb(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function sj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!sw(e,t,n)}function sC(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(i.node&&i.node.marks.some(e=>e.type===t)||(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(e=>e.type===t)||(n=n||(null==(r=i.node.marks[0])?void 0:r.attrs),!sw([...i.node.marks],t,n)))return;let o=i.index,a=e.start()+i.offset,s=o+1,l=a+i.node.nodeSize;for(;o>0&&sj([...e.parent.child(o-1).marks],t,n);)o-=1,a-=e.parent.child(o).nodeSize;for(;s<e.parent.childCount&&sj([...e.parent.child(s).marks],t,n);)l+=e.parent.child(s).nodeSize,s+=1;return{from:a,to:l}}function sk(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function sS(e){return e instanceof tq}function sN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function sE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;let n=tH.atStart(e),r=tH.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;let i=n.from,o=r.to;return"all"===t?tq.create(e,sN(0,i,o),sN(e.content.size,i,o)):tq.create(e,sN(t,i,o),sN(t,i,o))}function sD(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function sI(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}let sA=e=>{let t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){let r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&sA(r)}return e};function sT(e){let t="<body>".concat(e,"</body>");return sA(new window.DOMParser().parseFromString(t,"text/html").body)}function sM(e,t,n){if(e instanceof H||e instanceof v)return e;n={slice:!0,parseOptions:{},...n};let r="object"==typeof e&&null!==e,i="string"==typeof e;if(r)try{if(Array.isArray(e)&&e.length>0)return v.fromArray(e.map(e=>t.nodeFromJSON(e)));let r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(r){if(n.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),sM("",t,n)}if(i){if(n.errorOnInvalidContent){let r=!1,i="",o=new eh({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,i="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?ev.fromSchema(o).parseSlice(sT(e),n.parseOptions):ev.fromSchema(o).parse(sT(e),n.parseOptions),n.errorOnInvalidContent&&r)throw Error("[tiptap error]: Invalid HTML content",{cause:Error("Invalid element found: ".concat(i))})}let r=ev.fromSchema(t);return n.slice?r.parseSlice(sT(e),n.parseOptions).content:r.parse(sT(e),n.parseOptions)}return sM("",t,n)}function sL(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof e4||i instanceof e3))return;let o=e.mapping.maps[r],a=0;o.forEach((e,t,n,r)=>{0===a&&(a=r)}),e.setSelection(tH.near(e.doc.resolve(a),n))}let sP=e=>!("type"in e);function sR(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function s_(e){let t,n,r,i,o=e.split(/-(?!$)/),a=o[o.length-1];"Space"===a&&(a=" ");for(let e=0;e<o.length-1;e+=1){let a=o[e];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))r=!0;else if(/^mod$/i.test(a))sI()||sR()?i=!0:n=!0;else throw Error("Unrecognized modifier name: ".concat(a))}return t&&(a="Alt-".concat(a)),n&&(a="Ctrl-".concat(a)),i&&(a="Meta-".concat(a)),r&&(a="Shift-".concat(a)),a}function sO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{from:r,to:i,empty:o}=e.selection,a=t?aK(t,e.schema):null,s=[];e.doc.nodesBetween(r,i,(e,t)=>{if(e.isText)return;let n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);s.push({node:e,from:n,to:o})});let l=i-r,c=s.filter(e=>!a||a.name===e.node.type.name).filter(e=>sb(e.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((e,t)=>e+t.to-t.from,0)>=l}function sF(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function sB(e,t){let n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}function sV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return sM(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function sz(e,t){let n=sk(t,e.schema),{from:r,to:i,empty:o}=e.selection,a=[];o?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,e=>{a.push(...e.marks)});let s=a.find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}function sH(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function sU(e,t){for(let n=e.depth;n>0;n-=1){let r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function sG(e){return t=>sU(t.$from,e)}function sW(e,t){let n={from:0,to:e.content.size};return sv(e,n,t)}function sq(e,t){let n=aK(t,e.schema),{from:r,to:i}=e.selection,o=[];e.doc.nodesBetween(r,i,e=>{o.push(e)});let a=o.reverse().find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function sZ(e,t){let n=sF("string"==typeof t?t:t.name,e.schema);return"node"===n?sq(e,t):"mark"===n?sz(e,t):{}}function sK(e,t,n){let r=[];return e===t?n.resolve(e).marks().forEach(t=>{let i=sC(n.resolve(e),t.type);i&&r.push({mark:t,...i})}):n.nodesBetween(e,t,(e,t)=>{e&&(null==e?void 0:e.nodeSize)!==void 0&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}function s$(e,t,n){return Object.fromEntries(Object.entries(n).filter(n=>{let[r]=n,i=e.find(e=>e.type===t&&e.name===r);return!!i&&i.attribute.keepOnSplit}))}function sY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{empty:r,ranges:i}=e.selection,o=t?sk(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!o||o.name===e.type.name).find(e=>sb(e.attrs,n,{strict:!1}));let a=0,s=[];if(i.forEach(t=>{let{$from:n,$to:r}=t,i=n.pos,o=r.pos;e.doc.nodesBetween(i,o,(e,t)=>{if(!e.isText&&!e.marks.length)return;let n=Math.max(i,t),r=Math.min(o,t+e.nodeSize);a+=r-n,s.push(...e.marks.map(e=>({mark:e,from:n,to:r})))})}),0===a)return!1;let l=s.filter(e=>!o||o.name===e.mark.type.name).filter(e=>sb(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=s.filter(e=>!o||e.mark.type!==o&&e.mark.type.excludes(o)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=a}function sJ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return sO(e,null,n)||sY(e,null,n);let r=sF(t,e.schema);return"node"===r?sO(e,t,n):"mark"===r&&sY(e,t,n)}function sQ(e,t){let{nodeExtensions:n}=aq(t),r=n.find(t=>t.name===e);if(!r)return!1;let i={name:r.name,options:r.options,storage:r.storage},o=aQ(aW(r,"group",i));return"string"==typeof o&&o.split(" ").includes("list")}function sX(e){var t;let{checkChildren:n=!0,ignoreWhitespace:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!=(t=e.text)?t:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(n){let t=!0;return e.content.forEach(e=>{!1!==t&&(sX(e,{ignoreWhitespace:r,checkChildren:n})||(t=!1))}),t}return!1}function s0(e){return e instanceof tK}function s1(e,t,n){let r=0,i=e.state.doc.content.size,o=sN(t,r,i),a=sN(n,r,i),s=e.coordsAtPos(o),l=e.coordsAtPos(a,-1),c=Math.min(s.top,l.top),u=Math.max(s.bottom,l.bottom),d=Math.min(s.left,l.left),p=Math.max(s.right,l.right),h=p-d,f=u-c,m=d,g=c,v={top:c,bottom:u,left:d,right:p,width:h,height:f,x:m,y:g};return{...v,toJSON:()=>v}}function s2(e,t,n){var r;let{selection:i}=t,o=null;if(sS(i)&&(o=i.$cursor),o){let t=null!=(r=e.storedMarks)?r:o.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}let{ranges:a}=i;return a.some(t=>{let{$from:r,$to:i}=t,o=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,i.pos,(e,t,r)=>{if(o)return!1;if(e.isInline){let t=!r||r.type.allowsMarkType(n),i=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));o=t&&i}return!o}),o})}function s5(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}let s4=(e,t)=>{let n=sG(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;let i=e.doc.nodeAt(r);return!(n.node.type===(null==i?void 0:i.type)&&tm(e.doc,n.pos))||(e.join(n.pos),!0)},s3=(e,t)=>{let n=sG(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;let i=e.doc.nodeAt(r);return!(n.node.type===(null==i?void 0:i.type)&&tm(e.doc,r))||(e.join(r),!0)};var s9=Object.freeze({__proto__:null,blur:()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame(()=>{var e;t.isDestroyed||(n.dom.blur(),null==(e=null==window?void 0:window.getSelection())||e.removeAllRanges())}),!0},clearContent:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{commands:n}=t;return n.setContent("",e)}},clearNodes:()=>e=>{let{state:t,tr:n,dispatch:r}=e,{selection:i}=n,{ranges:o}=i;return!r||(o.forEach(e=>{let{$from:r,$to:i}=e;t.doc.nodesBetween(r.pos,i.pos,(e,t)=>{if(e.type.isText)return;let{doc:r,mapping:i}=n,o=r.resolve(i.map(t)),a=r.resolve(i.map(t+e.nodeSize)),s=o.blockRange(a);if(!s)return;let l=tt(s);if(e.type.isTextblock){let{defaultType:e}=o.parent.contentMatchAt(o.index());n.setNodeMarkup(s.start,e)}(l||0===l)&&n.lift(s,l)})}),!0)},command:e=>t=>e(t),createParagraphNear:()=>e=>{let{state:t,dispatch:n}=e;return ax(t,n)},cut:(e,t)=>n=>{let{editor:r,tr:i}=n,{state:o}=r,a=o.doc.slice(e.from,e.to);i.deleteRange(e.from,e.to);let s=i.mapping.map(t);return i.insert(s,a.content),i.setSelection(new tq(i.doc.resolve(s-1))),!0},deleteCurrentNode:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,i=r.$anchor.node();if(i.content.size>0)return!1;let o=t.selection.$anchor;for(let e=o.depth;e>0;e-=1)if(o.node(e).type===i.type){if(n){let n=o.before(e),r=o.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},deleteNode:e=>t=>{let{tr:n,state:r,dispatch:i}=t,o=aK(e,r.schema),a=n.selection.$anchor;for(let e=a.depth;e>0;e-=1)if(a.node(e).type===o){if(i){let t=a.before(e),r=a.after(e);n.delete(t,r).scrollIntoView()}return!0}return!1},deleteRange:e=>t=>{let{tr:n,dispatch:r}=t,{from:i,to:o}=e;return r&&n.delete(i,o),!0},deleteSelection:()=>e=>{let{state:t,dispatch:n}=e;return o8(t,n)},enter:()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},exitCode:()=>e=>{let{state:t,dispatch:n}=e;return av(t,n)},extendMarkRange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:o}=n,a=sk(e,i.schema),{doc:s,selection:l}=r,{$from:c,from:u,to:d}=l;if(o){let e=sC(c,a,t);if(e&&e.from<=u&&e.to>=d){let t=tq.create(s,e.from,e.to);r.setSelection(t)}}return!0}},first:e=>t=>{let n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:r,view:i,tr:o,dispatch:a}=n;t={scrollIntoView:!0,...t};let s=()=>{(sI()||sD())&&i.dom.focus(),requestAnimationFrame(()=>{!r.isDestroyed&&(i.focus(),(null==t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())})};if(i.hasFocus()&&null===e||!1===e)return!0;if(a&&null===e&&!sS(r.state.selection))return s(),!0;let l=sE(o.doc,e)||r.state.selection,c=r.state.selection.eq(l);return a&&(c||o.setSelection(l),c&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0}},forEach:(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),insertContent:(e,t)=>n=>{let{tr:r,commands:i}=n;return i.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)},insertContentAt:(e,t,n)=>r=>{var i;let{tr:o,dispatch:a,editor:s}=r;if(a){let r,a;n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};try{r=sM(t,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:null!=(i=n.errorOnInvalidContent)?i:s.options.enableContentCheck})}catch(e){return s.emit("contentError",{editor:s,error:e,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},u=!0,d=!0;if((sP(r)?r:[r]).forEach(e=>{e.check(),u=!!u&&e.isText&&0===e.marks.length,d=!!d&&e.isBlock}),l===c&&d){let{parent:e}=o.doc.resolve(l);!e.isTextblock||e.type.spec.code||e.childCount||(l-=1,c+=1)}if(u){if(Array.isArray(t))a=t.map(e=>e.text||"").join("");else if(t instanceof v){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),a=e}else a="object"==typeof t&&t&&t.text?t.text:t;o.insertText(a,l,c)}else a=r,o.replaceWith(l,c,a);n.updateSelection&&sL(o,o.steps.length-1,-1),n.applyInputRules&&o.setMeta("applyInputRules",{from:l,text:a}),n.applyPasteRules&&o.setMeta("applyPasteRules",{from:l,text:a})}return!0},joinBackward:()=>e=>{let{state:t,dispatch:n}=e;return at(t,n)},joinDown:()=>e=>{let{state:t,dispatch:n}=e;return ah(t,n)},joinForward:()=>e=>{let{state:t,dispatch:n}=e;return ac(t,n)},joinItemBackward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let e=tx(t.doc,t.selection.$from.pos,-1);if(null==e)return!1;return r.join(e,2),n&&n(r),!0}catch(e){return!1}},joinItemForward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let e=tx(t.doc,t.selection.$from.pos,1);if(null==e)return!1;return r.join(e,2),n&&n(r),!0}catch(e){return!1}},joinTextblockBackward:()=>e=>{let{state:t,dispatch:n}=e;return an(t,n)},joinTextblockForward:()=>e=>{let{state:t,dispatch:n}=e;return ar(t,n)},joinUp:()=>e=>{let{state:t,dispatch:n}=e;return ap(t,n)},keyboardShortcut:e=>t=>{let{editor:n,view:r,tr:i,dispatch:o}=t,a=s_(e).split(/-(?!$)/),s=a.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),l=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,l))});return null==c||c.steps.forEach(e=>{let t=e.map(i.mapping);t&&o&&i.maybeStep(t)}),!0},lift:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n,o=aK(e,r.schema);return!!sO(r,o,t)&&af(r,i)}},liftEmptyBlock:()=>e=>{let{state:t,dispatch:n}=e;return ay(t,n)},liftListItem:e=>t=>{let{state:n,dispatch:r}=t;return aF(aK(e,n.schema))(n,r)},newlineInCode:()=>e=>{let{state:t,dispatch:n}=e;return am(t,n)},resetAttributes:(e,t)=>n=>{let{tr:r,state:i,dispatch:o}=n,a=null,s=null,l=sF("string"==typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(a=aK(e,i.schema)),"mark"===l&&(s=sk(e,i.schema)),o&&r.selection.ranges.forEach(e=>{i.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{a&&a===e.type&&r.setNodeMarkup(n,void 0,sB(e.attrs,t)),s&&e.marks.length&&e.marks.forEach(i=>{s===i.type&&r.addMark(n,n+e.nodeSize,s.create(sB(i.attrs,t)))})})}),!0)},scrollIntoView:()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},selectAll:()=>e=>{let{tr:t,dispatch:n}=e;if(n){let e=new tY(t.doc);t.setSelection(e)}return!0},selectNodeBackward:()=>e=>{let{state:t,dispatch:n}=e;return aa(t,n)},selectNodeForward:()=>e=>{let{state:t,dispatch:n}=e;return au(t,n)},selectParentNode:()=>e=>{let{state:t,dispatch:n}=e;return aw(t,n)},selectTextblockEnd:()=>e=>{let{state:t,dispatch:n}=e;return aE(t,n)},selectTextblockStart:()=>e=>{let{state:t,dispatch:n}=e;return aN(t,n)},setContent:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{var o,a;let{editor:s,tr:l,dispatch:c,commands:u}=i,{doc:d}=l;if("full"!==n.preserveWhitespace){let i=sV(e,s.schema,n,{errorOnInvalidContent:null!=(o=r.errorOnInvalidContent)?o:s.options.enableContentCheck});return c&&l.replaceWith(0,d.content.size,i).setMeta("preventUpdate",!t),!0}return c&&l.setMeta("preventUpdate",!t),u.insertContentAt({from:0,to:d.content.size},e,{parseOptions:n,errorOnInvalidContent:null!=(a=r.errorOnInvalidContent)?a:s.options.enableContentCheck})}},setMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:o}=n,{selection:a}=r,{empty:s,ranges:l}=a,c=sk(e,i.schema);if(o)if(s){let e=sz(i,c);r.addStoredMark(c.create({...e,...t}))}else l.forEach(e=>{let n=e.$from.pos,o=e.$to.pos;i.doc.nodesBetween(n,o,(e,i)=>{let a=Math.max(i,n),s=Math.min(i+e.nodeSize,o);e.marks.find(e=>e.type===c)?e.marks.forEach(e=>{c===e.type&&r.addMark(a,s,c.create({...e.attrs,...t}))}):r.addMark(a,s,c.create(t))})});return s2(i,r,c)}},setMeta:(e,t)=>n=>{let{tr:r}=n;return r.setMeta(e,t),!0},setNode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let r,{state:i,dispatch:o,chain:a}=n,s=aK(e,i.schema);return(i.selection.$anchor.sameParent(i.selection.$head)&&(r=i.selection.$anchor.parent.attrs),s.isTextblock)?a().command(e=>{let{commands:n}=e;return!!aI(s,{...r,...t})(i)||n.clearNodes()}).command(e=>{let{state:n}=e;return aI(s,{...r,...t})(n,o)}).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){let{doc:t}=n,r=sN(e,0,t.content.size),i=tK.create(t,r);n.setSelection(i)}return!0},setTextSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){let{doc:t}=n,{from:r,to:i}="number"==typeof e?{from:e,to:e}:e,o=tq.atStart(t).from,a=tq.atEnd(t).to,s=sN(r,o,a),l=sN(i,o,a),c=tq.create(t,s,l);n.setSelection(c)}return!0},sinkListItem:e=>t=>{let{state:n,dispatch:r}=t;return az(aK(e,n.schema))(n,r)},splitBlock:function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{tr:n,state:r,dispatch:i,editor:o}=t,{selection:a,doc:s}=n,{$from:l,$to:c}=a,u=s$(o.extensionManager.attributes,l.node().type.name,l.node().attrs);if(a instanceof tK&&a.node.isBlock)return!!l.parentOffset&&!!th(s,l.pos)&&(i&&(e&&s5(r,o.extensionManager.splittableMarks),n.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;let d=c.parentOffset===c.parent.content.size,p=0===l.depth?void 0:sH(l.node(-1).contentMatchAt(l.indexAfter(-1))),h=d&&p?[{type:p,attrs:u}]:void 0,f=th(n.doc,n.mapping.map(l.pos),1,h);if(!h&&!f&&th(n.doc,n.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(f=!0,h=p?[{type:p,attrs:u}]:void 0),i){if(f&&(a instanceof tq&&n.deleteSelection(),n.split(n.mapping.map(l.pos),1,h),p&&!d&&!l.parentOffset&&l.parent.type!==p)){let e=n.mapping.map(l.before()),t=n.doc.resolve(e);l.node(-1).canReplaceWith(t.index(),t.index()+1,p)&&n.setNodeMarkup(n.mapping.map(l.before()),p)}e&&s5(r,o.extensionManager.splittableMarks),n.scrollIntoView()}return f}},splitListItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{var r;let{tr:i,state:o,dispatch:a,editor:s}=n,l=aK(e,o.schema),{$from:c,$to:u}=o.selection,d=o.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;let p=c.node(-1);if(p.type!==l)return!1;let h=s.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(a){let e=v.empty,n=c.index(-1)?1:c.index(-2)?2:3;for(let t=c.depth-n;t>=c.depth-3;t-=1)e=v.from(c.node(t).copy(e));let o=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,a={...s$(h,c.node().type.name,c.node().attrs),...t},s=(null==(r=l.contentMatch.defaultType)?void 0:r.createAndFill(a))||void 0;e=e.append(v.from(l.createAndFill(null,s)||void 0));let u=c.before(c.depth-(n-1));i.replace(u,c.after(-o),new C(e,4-n,0));let d=-1;i.doc.nodesBetween(u,i.doc.content.size,(e,t)=>{if(d>-1)return!1;e.isTextblock&&0===e.content.size&&(d=t+1)}),d>-1&&i.setSelection(tq.near(i.doc.resolve(d))),i.scrollIntoView()}return!0}let f=u.pos===c.end()?p.contentMatchAt(0).defaultType:null,m={...s$(h,p.type.name,p.attrs),...t},g={...s$(h,c.node().type.name,c.node().attrs),...t};i.delete(c.pos,u.pos);let x=f?[{type:l,attrs:m},{type:f,attrs:g}]:[{type:l,attrs:m}];if(!th(i.doc,c.pos,2))return!1;if(a){let{selection:e,storedMarks:t}=o,{splittableMarks:n}=s.extensionManager,r=t||e.$to.parentOffset&&e.$from.marks();if(i.split(c.pos,2,x).scrollIntoView(),!r||!a)return!0;let l=r.filter(e=>n.includes(e.type.name));i.ensureMarks(l)}return!0}},toggleList:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{let{editor:o,tr:a,state:s,dispatch:l,chain:c,commands:u,can:d}=i,{extensions:p,splittableMarks:h}=o.extensionManager,f=aK(e,s.schema),m=aK(t,s.schema),{selection:g,storedMarks:v}=s,{$from:x,$to:y}=g,b=x.blockRange(y),w=v||g.$to.parentOffset&&g.$from.marks();if(!b)return!1;let j=sG(e=>sQ(e.type.name,p))(g);if(b.depth>=1&&j&&b.depth-j.depth<=1){if(j.node.type===f)return u.liftListItem(m);if(sQ(j.node.type.name,p)&&f.validContent(j.node.content)&&l)return c().command(()=>(a.setNodeMarkup(j.pos,f),!0)).command(()=>s4(a,f)).command(()=>s3(a,f)).run()}return n&&w&&l?c().command(()=>{let e=d().wrapInList(f,r),t=w.filter(e=>h.includes(e.type.name));return a.ensureMarks(t),!!e||u.clearNodes()}).wrapInList(f,r).command(()=>s4(a,f)).command(()=>s3(a,f)).run():c().command(()=>!!d().wrapInList(f,r)||u.clearNodes()).wrapInList(f,r).command(()=>s4(a,f)).command(()=>s3(a,f)).run()}},toggleMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:i,commands:o}=r,{extendEmptyMarkRange:a=!1}=n,s=sk(e,i.schema);return sY(i,s,t)?o.unsetMark(s,{extendEmptyMarkRange:a}):o.setMark(s,t)}},toggleNode:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let i,{state:o,commands:a}=r,s=aK(e,o.schema),l=aK(t,o.schema),c=sO(o,s,n);return(o.selection.$anchor.sameParent(o.selection.$head)&&(i=o.selection.$anchor.parent.attrs),c)?a.setNode(l,i):a.setNode(s,{...i,...n})}},toggleWrap:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,commands:i}=n,o=aK(e,r.schema);return sO(r,o,t)?i.lift(o):i.wrapIn(o,t)}},undoInputRule:()=>e=>{let{state:t,dispatch:n}=e,r=t.plugins;for(let e=0;e<r.length;e+=1){let i,o=r[e];if(o.spec.isInputRules&&(i=o.getState(t))){if(n){let e=t.tr,n=i.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(i.text){let n=e.doc.resolve(i.from).marks();e.replaceWith(i.from,i.to,t.schema.text(i.text,n))}else e.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,{empty:i,ranges:o}=r;return!!i||(n&&o.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos)}),!0)},unsetMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{var r;let{tr:i,state:o,dispatch:a}=n,{extendEmptyMarkRange:s=!1}=t,{selection:l}=i,c=sk(e,o.schema),{$from:u,empty:d,ranges:p}=l;if(!a)return!0;if(d&&s){let{from:e,to:t}=l,n=null==(r=u.marks().find(e=>e.type===c))?void 0:r.attrs,o=sC(u,c,n);o&&(e=o.from,t=o.to),i.removeMark(e,t,c)}else p.forEach(e=>{i.removeMark(e.$from.pos,e.$to.pos,c)});return i.removeStoredMark(c),!0}},updateAttributes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:o}=n,a=null,s=null,l=sF("string"==typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(a=aK(e,i.schema)),"mark"===l&&(s=sk(e,i.schema)),o&&r.selection.ranges.forEach(e=>{let n,o,l,c,u=e.$from.pos,d=e.$to.pos;r.selection.empty?i.doc.nodesBetween(u,d,(e,t)=>{a&&a===e.type&&(l=Math.max(t,u),c=Math.min(t+e.nodeSize,d),n=t,o=e)}):i.doc.nodesBetween(u,d,(e,i)=>{i<u&&a&&a===e.type&&(l=Math.max(i,u),c=Math.min(i+e.nodeSize,d),n=i,o=e),i>=u&&i<=d&&(a&&a===e.type&&r.setNodeMarkup(i,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach(n=>{if(s===n.type){let o=Math.max(i,u),a=Math.min(i+e.nodeSize,d);r.addMark(o,a,s.create({...n.attrs,...t}))}}))}),o&&(void 0!==n&&r.setNodeMarkup(n,void 0,{...o.attrs,...t}),s&&o.marks.length&&o.marks.forEach(e=>{s===e.type&&r.addMark(l,c,s.create({...e.attrs,...t}))}))}),!0)}},wrapIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n;return aD(aK(e,r.schema),t)(r,i)}},wrapInList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n;return aR(aK(e,r.schema),t)(r,i)}}});let s7=sg.create({name:"commands",addCommands:()=>({...s9})}),s6=sg.create({name:"drop",addProseMirrorPlugins(){return[new ne({key:new nr("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),s8=sg.create({name:"editable",addProseMirrorPlugins(){return[new ne({key:new nr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),le=sg.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new ne({key:new nr("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;let r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;let r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),lt=sg.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.undoInputRule(),()=>t.command(e=>{let{tr:n}=e,{selection:r,doc:i}=n,{empty:o,$anchor:a}=r,{pos:s,parent:l}=a,c=a.parent.isTextblock&&s>0?n.doc.resolve(s-1):a,u=c.parent.type.spec.isolating,d=a.pos-a.parentOffset,p=u&&1===c.parent.childCount?d===a.pos:tH.atStart(i).from===s;return!!o&&!!l.type.isTextblock&&!l.textContent.length&&!!p&&(!p||"paragraph"!==a.parent.type.name)&&t.clearNodes()}),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]}),t=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]}),n={Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]}),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},i={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return sI()||sR()?i:r},addProseMirrorPlugins(){return[new ne({key:new nr("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;let r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),i=e.some(e=>e.getMeta("preventClearDocument"));if(!r||i)return;let{empty:o,from:a,to:s}=t.selection,l=tH.atStart(t.doc).from,c=tH.atEnd(t.doc).to,u=a===l&&s===c;if(o||!u||!sX(n.doc))return;let d=n.tr,p=aH({state:n,transaction:d}),{commands:h}=new aU({editor:this.editor,state:p});if(h.clearNodes(),d.steps.length)return d}})]}}),ln=sg.create({name:"paste",addProseMirrorPlugins(){return[new ne({key:new nr("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),lr=sg.create({name:"tabindex",addProseMirrorPlugins(){return[new ne({key:new nr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class li{get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!=(e=this.actualDepth)?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error("You can’t set content on a block node. Tried to set content on ".concat(this.name," at ").concat(this.pos));t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+ +!this.node.isText}get parent(){if(0===this.depth)return null;let e=this.resolvedPos.start(this.resolvedPos.depth-1);return new li(this.resolvedPos.doc.resolve(e),this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new li(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new li(e,this.editor)}get children(){let e=[];return this.node.content.forEach((t,n)=>{let r=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,o=this.pos+n+ +!i,a=this.resolvedPos.doc.resolve(o);if(!r&&a.depth<=this.depth)return;let s=new li(a,this.editor,r,r?t:null);r&&(s.actualDepth=this.depth+1),e.push(new li(a,this.editor,r,r?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0){let e=r.node.attrs,n=Object.keys(t);for(let r=0;r<n.length;r+=1){let i=n[r];if(e[i]!==t[i])break}}else n=r;r=r.parent}return n}querySelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(!this.children||0===this.children.length)return r;let i=Object.keys(t);return this.children.forEach(o=>{(!n||!(r.length>0))&&(o.node.type.name===e&&i.every(e=>t[e]===o.node.attrs[e])&&r.push(o),n&&r.length>0||(r=r.concat(o.querySelectorAll(e,t,n))))}),r}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}constructor(e,t,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}}let lo='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';function la(e,t,n){let r=document.querySelector("style[data-tiptap-style".concat(n?"-".concat(n):"","]"));if(null!==r)return r;let i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style".concat(n?"-".concat(n):""),""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}class ls extends aG{get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=la(lo,this.options.injectNonce))}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let n=aJ(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;let t=this.state.plugins,n=t;if([].concat(e).forEach(e=>{let r="string"==typeof e?"".concat(e,"$"):e.key;n=t.filter(e=>!e.key.startsWith(r))}),t.length===n.length)return;let r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;let n=[...this.options.enableCoreExtensions?[s8,sy.configure({blockSeparator:null==(t=null==(e=this.options.coreExtensionOptions)?void 0:e.clipboardTextSerializer)?void 0:t.blockSeparator}),s7,le,lt,lr,s6,ln].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new sm(n,this)}createCommandManager(){this.commandManager=new aU({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=sV(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),t=sV(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}let n=sE(t,this.options.autofocus);this.view=new oH(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...null==(e=this.options.editorProps)?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:t6.create({doc:t,selection:n||void 0})});let r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className="tiptap ".concat(this.view.dom.className)}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(e=>{var t;return null==(t=this.capturedTransaction)?void 0:t.step(e)});return}let t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});let r=e.getMeta("focus"),i=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!e.docChanged||e.getMeta("preventUpdate")||this.emit("update",{editor:this,transaction:e})}getAttributes(e){return sZ(this.state,e)}isActive(e,t){let n="string"==typeof e?e:null,r="string"==typeof e?t:e;return sJ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return a9(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return sW(this.state.doc,{blockSeparator:t,textSerializers:{...sx(this.schema),...n}})}get isEmpty(){return sX(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){let e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null==(e=this.view)?void 0:e.docView)}$node(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelectorAll(e,t))||null}$pos(e){return new li(this.state.doc.resolve(e),this)}get $doc(){return this.$pos(0)}constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:e=>{let{error:t}=e;throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",e=>{let{event:t,slice:n,moved:r}=e;return this.options.onDrop(t,n,r)}),this.on("paste",e=>{let{event:t,slice:n}=e;return this.options.onPaste(t,n)}),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}}function ll(e){return new a8({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,o=aQ(e.getAttributes,void 0,i);if(!1===o||null===o)return null;let{tr:a}=n,s=i[i.length-1],l=i[0];if(s){let t=l.search(/\S/),i=r.from+l.indexOf(s),c=i+s.length;if(sK(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>i).length)return null;c<r.to&&a.delete(c,r.to),i>r.from&&a.delete(r.from+t,i);let u=r.from+t+s.length;a.addMark(r.from+t,u,e.type.create(o||{})),a.removeStoredMark(e.type)}}})}function lc(e){return new a8({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,o=aQ(e.getAttributes,void 0,i)||{},{tr:a}=n,s=r.from,l=r.to,c=e.type.create(o);if(i[1]){let e=s+i[0].lastIndexOf(i[1]);e>l?e=l:l=e+i[1].length;let t=i[0][i[0].length-1];a.insertText(t,s+i[0].length-1),a.replaceWith(e,l,c)}else if(i[0]){let t=e.type.isInline?s:s-1;a.insert(t,e.type.create(o)).delete(a.mapping.map(s),a.mapping.map(l))}a.scrollIntoView()}})}function lu(e){return new a8({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,o=n.doc.resolve(r.from),a=aQ(e.getAttributes,void 0,i)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,a)}})}function ld(e){return new a8({find:e.find,handler:t=>{let{state:n,range:r,match:i,chain:o}=t,a=aQ(e.getAttributes,void 0,i)||{},s=n.tr.delete(r.from,r.to),l=s.doc.resolve(r.from).blockRange(),c=l&&tr(l,e.type,a);if(!c)return null;if(s.wrap(l,c),e.keepMarks&&e.editor){let{selection:t,storedMarks:r}=n,{splittableMarks:i}=e.editor.extensionManager,o=r||t.$to.parentOffset&&t.$from.marks();if(o){let e=o.filter(e=>i.includes(e.type.name));s.ensureMarks(e)}}if(e.keepAttributes){let t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";o().updateAttributes(t,a).run()}let u=s.doc.resolve(r.from-1).nodeBefore;u&&u.type===e.type&&tm(s.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(i,u))&&s.join(r.from-1)}})}class lp{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new lp(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>so(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new lp(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=aQ(aW(t,"addOptions",{name:t.name})),t.storage=aQ(aW(t,"addStorage",{name:t.name,options:t.options})),t}constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=aQ(aW(this,"addOptions",{name:this.name}))),this.storage=aQ(aW(this,"addStorage",{name:this.name,options:this.options}))||{}}}class lh{mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,r,i,o,a,s;let{view:l}=this.editor,c=e.target,u=3===c.nodeType?null==(t=c.parentElement)?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(null==(n=this.contentDOM)?void 0:n.contains(c))||!u)return;let d=0,p=0;if(this.dom!==u){let t=this.dom.getBoundingClientRect(),n=u.getBoundingClientRect(),s=null!=(r=e.offsetX)?r:null==(i=e.nativeEvent)?void 0:i.offsetX,l=null!=(o=e.offsetY)?o:null==(a=e.nativeEvent)?void 0:a.offsetY;d=n.x-t.x+s,p=n.y-t.y+l}null==(s=e.dataTransfer)||s.setDragImage(this.dom,d,p);let h=this.getPos();if("number"!=typeof h)return;let f=tK.create(l.state.doc,h),m=l.state.tr.setSelection(f);l.dispatch(m)}stopEvent(e){var t;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});let n=e.target;if(!(this.dom.contains(n)&&!(null==(t=this.contentDOM)?void 0:t.contains(n))))return!1;let r=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!r)return!0;let{isEditable:o}=this.editor,{isDragging:a}=this,s=!!this.node.type.spec.draggable,l=tK.isSelectable(this.node),c="copy"===e.type,u="paste"===e.type,d="cut"===e.type,p="mousedown"===e.type;if(!s&&l&&r&&e.target===this.dom&&e.preventDefault(),s&&r&&!a&&e.target===this.dom)return e.preventDefault(),!1;if(s&&o&&!a&&p){let e=n.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!a&&!i&&!c&&!u&&!d&&(!p||!l)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!!this.node.isLeaf||!!this.node.isAtom||!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&(sI()||sD())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)))}updateAttributes(e){this.editor.commands.command(t=>{let{tr:n}=t,r=this.getPos();return"number"==typeof r&&(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){let e=this.getPos();if("number"!=typeof e)return;let t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}}function lf(e){return new sl({find:e.find,handler:t=>{let{state:n,range:r,match:i,pasteEvent:o}=t,a=aQ(e.getAttributes,void 0,i,o);if(!1===a||null===a)return null;let{tr:s}=n,l=i[i.length-1],c=i[0],u=r.to;if(l){let t=c.search(/\S/),i=r.from+c.indexOf(l),o=i+l.length;if(sK(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>i).length)return null;o<r.to&&s.delete(o,r.to),i>r.from&&s.delete(r.from+t,i),u=r.from+t+l.length,s.addMark(r.from+t,u,e.type.create(a||{})),s.removeStoredMark(e.type)}}})}function lm(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function lg(e){var t;let{char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:o,startOfLine:a,$position:s}=e,l=r&&!i,c=lm(n),u=new RegExp("\\s".concat(c,"$")),d=a?"^":"",p=i?"":c,h=l?RegExp("".concat(d).concat(c,".*?(?=\\s").concat(p,"|$)"),"gm"):RegExp("".concat(d,"(?:^)?").concat(c,"[^\\s").concat(p,"]*"),"gm"),f=(null==(t=s.nodeBefore)?void 0:t.isText)&&s.nodeBefore.text;if(!f)return null;let m=s.pos-f.length,g=Array.from(f.matchAll(h)).pop();if(!g||void 0===g.input||void 0===g.index)return null;let v=g.input.slice(Math.max(0,g.index-1),g.index),x=new RegExp("^[".concat(null==o?void 0:o.join(""),"\0]?$")).test(v);if(null!==o&&!x)return null;let y=m+g.index,b=y+g[0].length;return(l&&u.test(f.slice(b-1,b+1))&&(g[0]+=" ",b+=1),y<s.pos&&b>=s.pos)?{range:{from:y,to:b},query:g[0].slice(n.length),text:g[0]}:null}e.s(["Editor",()=>ls,"Extension",()=>sg,"Mark",()=>sa,"Node",()=>lp,"NodeView",()=>lh,"callOrReturn",()=>aQ,"escapeForRegEx",()=>lm,"getExtensionField",()=>aW,"getRenderedAttributes",()=>aY,"getText",()=>sW,"getTextSerializersFromSchema",()=>sx,"isNodeEmpty",()=>sX,"isNodeSelection",()=>s0,"isTextSelection",()=>sS,"markInputRule",()=>ll,"markPasteRule",()=>lf,"mergeAttributes",()=>a$,"nodeInputRule",()=>lc,"posToDOMRect",()=>s1,"textblockTypeInputRule",()=>lu,"wrappingInputRule",()=>ld],213917);let lv=new nr("suggestion");function lx(e){let t,{pluginKey:n=lv,editor:r,char:i="@",allowSpaces:o=!1,allowToIncludeChar:a=!1,allowedPrefixes:s=[" "],startOfLine:l=!1,decorationTag:c="span",decorationClass:u="suggestion",command:d=()=>null,items:p=()=>[],render:h=()=>({}),allow:f=()=>!0,findSuggestionMatch:m=lg}=e,g=null==h?void 0:h(),v=new ne({key:n,view(){return{update:async(e,n)=>{var i,o,a,s,l,c,u;let h=null==(i=this.key)?void 0:i.getState(n),f=null==(o=this.key)?void 0:o.getState(e.state),m=h.active&&f.active&&h.range.from!==f.range.from,v=!h.active&&f.active,x=h.active&&!f.active,y=!v&&!x&&h.query!==f.query,b=v||m&&y,w=y||m,j=x||m&&y;if(!b&&!w&&!j)return;let C=j&&!b?h:f,k=e.dom.querySelector('[data-decoration-id="'.concat(C.decorationId,'"]'));t={editor:r,range:C.range,query:C.query,text:C.text,items:[],command:e=>d({editor:r,range:C.range,props:e}),decorationNode:k,clientRect:k?()=>{var t;let{decorationId:n}=null==(t=this.key)?void 0:t.getState(r.state),i=e.dom.querySelector('[data-decoration-id="'.concat(n,'"]'));return(null==i?void 0:i.getBoundingClientRect())||null}:null},b&&(null==(a=null==g?void 0:g.onBeforeStart)||a.call(g,t)),w&&(null==(s=null==g?void 0:g.onBeforeUpdate)||s.call(g,t)),(w||b)&&(t.items=await p({editor:r,query:C.query})),j&&(null==(l=null==g?void 0:g.onExit)||l.call(g,t)),w&&(null==(c=null==g?void 0:g.onUpdate)||c.call(g,t)),b&&(null==(u=null==g?void 0:g.onStart)||u.call(g,t))},destroy:()=>{var e;t&&(null==(e=null==g?void 0:g.onExit)||e.call(g,t))}}},state:{init:()=>({active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}),apply(e,t,n,c){let{isEditable:u}=r,{composing:d}=r.view,{selection:p}=e,{empty:h,from:g}=p,v={...t};if(v.composing=d,u&&(h||r.view.composing)){(g<t.range.from||g>t.range.to)&&!d&&!t.composing&&(v.active=!1);let e=m({char:i,allowSpaces:o,allowToIncludeChar:a,allowedPrefixes:s,startOfLine:l,$position:p.$from}),n="id_".concat(Math.floor(0xffffffff*Math.random()));e&&f({editor:r,state:c,range:e.range,isActive:t.active})?(v.active=!0,v.decorationId=t.decorationId?t.decorationId:n,v.range=e.range,v.query=e.query,v.text=e.text):v.active=!1}else v.active=!1;return v.active||(v.decorationId=null,v.range={from:0,to:0},v.query=null,v.text=null),v}},props:{handleKeyDown(e,t){var n;let{active:r,range:i}=v.getState(e.state);return!!r&&((null==(n=null==g?void 0:g.onKeyDown)?void 0:n.call(g,{view:e,event:t,range:i}))||!1)},decorations(e){let{active:t,range:n,decorationId:r}=v.getState(e);return t?oc.create(e.doc,[oo.inline(n.from,n.to,{nodeName:c,class:u,"data-decoration-id":r})]):null}}});return v}var ly=e.i(743124),lb=e.i(152076),lw=e.i(503529),lj=e.i(940393),lC=e.i(304649),lk=a,lS=r;let lN=lk.z.object({data:lk.z.object({id:lk.z.string(),title:lk.z.string(),value:lk.z.string()})});function lE(e){let{fuseResults:t,command:n,editor:r,range:i,keyboardHandler:o,selectedIndex:a,emptyMessage:s="No results found.",renderFuseResult:l}=e,c=(0,ly.useRef)(null),u=(0,ly.useCallback)(e=>{let r=t[e];r&&n(r)},[n,t]);return(0,ly.useEffect)(()=>{let e=()=>{let e=c.current;if(!e||!i)return;let{from:t}=i,n=r.view.coordsAtPos(t),o=e.offsetHeight,a="".concat(n.left,"px"),s="".concat(n.top-o-8,"px");e.style.left=a,e.style.top=s};return window.addEventListener("scroll",e,!0),window.addEventListener("resize",e),requestAnimationFrame(e),()=>{window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",e)}},[r,i]),(0,ly.useEffect)(()=>{let e=["ArrowUp","ArrowDown","Enter"],t=t=>{if(e.includes(t.key))return t.preventDefault(),t.stopPropagation(),o(t),!0};return document.addEventListener("keydown",t,!0),()=>document.removeEventListener("keydown",t,!0)},[o]),(0,lb.createPortal)((0,p.jsx)("div",{ref:c,className:"fixed z-50 w-72",style:{top:0,left:0},children:(0,p.jsx)(lj.Command,{className:(0,lC.cn)("material-menu animate-in fade-in-0 zoom-in-95 border border-v0-gray-200",0===t.length&&"hidden"),children:(0,p.jsxs)(lj.CommandList,{className:"max-h-min",children:[(0,p.jsx)(lj.CommandEmpty,{children:s}),(0,p.jsx)(lj.CommandGroup,{children:t.map((e,n)=>(0,p.jsx)(lj.CommandItem,{value:e.item.data.title,onSelect:()=>u(n),tabIndex:0,className:(0,lC.cn)(n===a?"bg-v0-gray-100":"","my-1 h-8 px-2",0===n?"mt-0":"",n===t.length-1?"mb-0":""),children:l({fuseResult:e,isSelected:n===a})},e.item.data.id))})]})})}),document.body)}function lD(e){let{char:t,pluginKey:n,options:r,getFuseResults:i,onCommand:o,renderFuseResult:a}=e;return sg.create({name:"".concat(t,"MenuExtension"),addOptions:()=>r||{},addProseMirrorPlugins(){return[lx({editor:this.editor,char:t,pluginKey:n,items:e=>{let{query:t}=e,n=lS.store.get(i);return n?n.call(this,t):[]},render:()=>{let e,t=0,n=[],r=e=>{t=e,c()},i=i=>{if("ArrowUp"===i.event.key)return r((t-1+n.length)%n.length),!0;if("ArrowDown"===i.event.key)return r((t+1)%n.length),!0;if("Enter"===i.event.key){let r=n[t];return r&&o(this.editor,r,e),!0}if("Tab"===i.event.key){i.event.preventDefault();let e=i.event.shiftKey?-1:1;return r((t+e+n.length)%n.length),!0}return"Escape"===i.event.key&&(u(),!0)},s=null,l=null,c=()=>{l&&l.render((0,p.jsx)(lE,{fuseResults:n,command:t=>o(this.editor,t,e),editor:this.editor,range:e,renderFuseResult:a,keyboardHandler:t=>i({event:t,view:this.editor.view,range:e}),selectedIndex:t}))},u=()=>{l&&(l.unmount(),l=null),s&&(s.remove(),s=null)};return{onStart:r=>{e=r.range,t=0,n=r.items,s=document.createElement("div"),document.body.appendChild(s),l=(0,lw.createRoot)(s),c()},onUpdate:t=>{n=t.items,e=t.range,c()},onKeyDown:i,onExit:u}},command:()=>{}})]}})}function lI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(!t.length)return e;let r=t.find(e=>e.key===n);if(!(null==r?void 0:r.indices))return e;let i=[...r.indices].sort((e,t)=>e[0]-t[0]),o=[],a=0;return i.forEach((t,n)=>{let[r,i]=t;i-r+1<=2||(r>a&&o.push(e.slice(a,r)),o.push((0,p.jsx)("span",{className:"rounded-sm bg-v0-teal-100 dark:bg-[#13776C]",children:e.slice(r,i+1)},n)),a=i+1)}),a<e.length&&o.push(e.slice(a)),o}e.s(["MenuItemBaseSchema",0,lN,"createMenuExtension",()=>lD,"highlightFuseMatches",()=>lI],632814);var lA=a;let lT=lA.z.discriminatedUnion("type",[lN.extend({type:lA.z.literal("search-web")})]),lM="actionMenuItem";function lL(e){let{type:t,data:n}=e;return(0,u.jsx)(d.Globe,{})}e.s(["ACTION_MENU_ITEM_TYPE",0,lM,"ActionMenuItemSchema",0,lT,"getActionMenuItemIcon",()=>lL],770496);var lP=o,lR=e.i(239850),l_=e.i(561771),lO=e.i(79548),lF=d,lB=a;let lV=lB.z.discriminatedUnion("type",[lN.extend({type:lB.z.literal("file")}),lN.extend({type:lB.z.literal("url")}),lN.extend({type:lB.z.literal("directory")})]),lz="mentionMenuItem";function lH(e){let{type:t,data:n}=e;if(!n.value)return{icon:null};switch(t){case"file":if(n.value.endsWith(".tsx"))return{icon:(0,lP.jsx)(lR.LogoReact,{}),className:"text-current"};return{icon:(0,lP.jsx)(lO.File,{})};case"directory":return{icon:(0,lP.jsx)(l_.FolderOpen,{})};case"url":return{icon:(0,lP.jsx)(lF.Globe,{})};default:return{icon:t}}}e.s(["MENTION_MENU_ITEM_TYPE",0,lz,"MentionMenuItemSchema",0,lV,"getMentionIcon",()=>lH],73687);var lU=e.i(139962);let lG=c.z.object({id:c.z.string(),name:c.z.string(),url:c.z.string(),content:c.z.string().or(c.z.instanceof(ArrayBuffer)).optional(),status:c.z.enum(["uploading","done","compressing"]).optional(),size:c.z.number(),isImage:c.z.boolean(),isSavedDraft:c.z.boolean().optional(),v0Type:lU.v0AttachmentTypeSchema,tokens:c.z.number().optional(),contentType:c.z.string().optional()}),lW=c.z.object({file:c.z.string(),componentName:c.z.string().optional(),line:c.z.number(),column:c.z.number(),sourceContext:c.z.string()}),lq=c.z.union([c.z.discriminatedUnion("type",[c.z.object({type:c.z.literal("local-file"),data:c.z.lazy(()=>lG)}),c.z.object({type:c.z.literal("quote"),data:c.z.object({quote:c.z.string()})}),c.z.object({type:c.z.literal("refinement-element"),data:c.z.object({file:c.z.string(),line:c.z.number(),column:c.z.number(),sourceContext:c.z.string(),componentName:c.z.string().optional()})})]),lT,lV]);function lZ(e){return e.filter(e=>"local-file"===e.type&&"done"===e.data.status).map(e=>({url:e.data.url,name:e.data.name,size:e.data.size,content:"string"==typeof e.data.content?e.data.content:void 0,v0Type:e.data.v0Type,contentType:e.data.contentType}))}let lK="v0-local-drafts",l$="_new-chat_",lY=a.z.object({json:a.z.string().nullable(),html:a.z.string().nullable(),context:a.z.array(lq).default([]),updatedAt:a.z.number().default(()=>Date.now()),refinementElementSelected:lW.nullable().catch(()=>null)}),lJ=lY.extend({id:a.z.string()}),lQ=lY.extend({localFileInfos:a.z.array(a.z.any()).optional(),fileMap:a.z.record(a.z.string(),a.z.any()).default({}),promptQueue:a.z.array(lJ).default([])}),lX=a.z.record(a.z.string(),lQ),l0={json:null,html:null,refinementElementSelected:null,context:[],localFileInfos:[],fileMap:{},updatedAt:Date.now(),promptQueue:[]};function l1(){try{let e=localStorage.getItem(lK);if(!e)return{};let t=JSON.parse(e),n=lX.safeParse(t);if(n.success)return n.data;let r={};for(let[e,n]of Object.entries(t)){let t=lQ.safeParse(n);if(t.success){r[e]=t.data;continue}if(n&&"object"==typeof n&&"context"in n&&Array.isArray(n.context)){let t=n.context.filter(e=>lq.safeParse(e).success),i=lQ.safeParse({...n,context:t});if(i.success){r[e]=i.data;continue}}console.debug("Dropping invalid draft from localStorage:",e)}return r}catch(e){return console.debug("Error parsing drafts from localStorage:",e),{}}}function l2(e){try{localStorage.setItem(lK,JSON.stringify(e))}catch(e){console.debug("Error saving drafts to localStorage:",e)}}function l5(e,t){let n=t?l$:e;return{getLocalDraft:function(){try{var t;let r=l1();if(!(n in r))return l0;let i=r[n],o=null;if(i.json)try{o=JSON.parse(i.json)}catch(t){console.warn("Failed to parse draft json for chat",e,t),(0,s.track)("PromptDraftSaveError",{chatId:e,errorMsg:t.message})}let a=null!=(t=i.context)?t:[];return(!a||0===a.length)&&Array.isArray(i.localFileInfos)&&(a=i.localFileInfos.map(e=>({type:"local-file",data:e}))),{...i,json:o,context:a,fileMap:i.fileMap,promptQueue:i.promptQueue||i.messageQueue||[]}}catch(t){return console.debug("Draft not found for chat:",e),l0}},updateLocalDraft:function(t){let{json:r,html:i,context:o,fileMap:a,promptQueue:c,refinementElementSelected:u}=t;try{var d,p;let e=l1(),t=null!=(d=e[n])?d:l0,s=void 0===r?t.json:"object"==typeof r?JSON.stringify((0,l.default)(r)):r,h=void 0===i?t.html:i,f=void 0===o?null!=(p=t.context)?p:t.localFileInfos?t.localFileInfos.map(e=>({type:"local-file",data:e})):[]:o,m=void 0===a?t.fileMap:a,g=void 0===c?t.promptQueue:c,v=!s||"null"===s||'{"type":"doc","content":[{"type":"paragraph"}]}'===s,x=!h||"<p></p>"===h,y=f.length>0,b=g.length>0;if(v&&x&&!y&&!b){delete e[n],l2(e);return}let w=void 0===u?t.refinementElementSelected:u;e[n]={json:s,html:h,refinementElementSelected:w,context:f,fileMap:m,updatedAt:Date.now(),promptQueue:g},l2(e)}catch(t){console.debug("Ignored localStorage error:",t),(0,s.track)("PromptDraftSaveError",{chatId:e,errorMsg:t.message})}},deleteLocalDraft:function(){let e=l1();delete e[n],l2(e)}}}function l4(e){let{placeholderElementId:t,chatId:n,isNewChat:r}=e,i=l3(t),a=l3("".concat(i,"-focus"));return(0,o.jsx)("script",{id:"v0-draft-inject-script-".concat(i),dangerouslySetInnerHTML:{__html:"\n          const ".concat(i," = document.getElementById('").concat(t,"');\n          if (").concat(i,") {\n            // Resolve Drafts\n            try {\n              const draftsJson = localStorage.getItem('").concat(lK,"');\n              if (draftsJson) {\n                const drafts = JSON.parse(draftsJson);\n                const draftKey = ").concat(r?"'".concat(l$,"'"):"'".concat(n,"'"),";\n                const draft = drafts[draftKey];\n                \n                if (draft && draft.html) {\n                  ").concat(i,".innerHTML = draft.html;\n                }\n              }\n            } catch (error) {\n              console.debug('Error accessing draft from localStorage:', error);\n            }\n\n            // Focus the placeholder persistently\n            let userRemovedFocus = false;\n            let focusInterval;\n            let focusAttempts = 0;\n            \n            // Track if user manually removes focus\n            ").concat(i,".addEventListener('blur', () => {\n              if (document.activeElement !== ").concat(i,") {\n                userRemovedFocus = true;\n                if (focusInterval) clearInterval(focusInterval);\n              }\n            });\n            \n            // Try focusing every 10ms until successful or user removes focus\n            focusInterval = setInterval(() => {\n              const ").concat(a," = document.getElementById('").concat(t,"');\n              if (!").concat(a,") {\n                clearInterval(focusInterval);\n                return;\n              }\n\n              if (userRemovedFocus) {\n                clearInterval(focusInterval);\n                return;\n              }\n              \n              if (document.activeElement !== ").concat(a,") {\n                focusAttempts++;\n                ").concat(a,".focus();\n                // Move cursor to end after focusing\n                const range = document.createRange();\n                const selection = window.getSelection();\n                if (").concat(a,".childNodes.length > 0) {\n                  range.selectNodeContents(").concat(a,");\n                  range.collapse(false);\n                  selection.removeAllRanges();\n                  selection.addRange(range);\n                }\n              } else {\n                // Successfully focused, stop trying\n                clearInterval(focusInterval);\n              }\n            }, 16);\n          }\n        ")}})}function l3(e){return e.replace(/[^a-zA-Z0-9]/g,"_")}function l9(e){return{content:e.json?JSON.parse(e.json):{version:1,parts:[]},attachments:lZ(e.context)}}function l7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file";return e.map((e,n)=>{var r,i;return{id:"".concat(t,"-").concat(Date.now(),"-").concat(n,"-").concat(Math.random().toString(36).substring(2,11)),name:e.name||"attachment",url:e.url,content:e.content,status:"done",size:e.size,isImage:null!=(i=null==(r=e.contentType)?void 0:r.startsWith("image/"))&&i,v0Type:e.v0Type||"screenshot",contentType:e.contentType}})}e.s(["InlineInjectDraftScript",()=>l4,"convertAttachmentsToLocalFiles",()=>l7,"convertQueuedMessageToSubmitPayload",()=>l9,"localDraftController",()=>l5],654225);var l6=e.i(254211),l8=e.i(40455);function ce(e,t){if(!e)return;let n=e;if(Array.isArray(n))for(let e of n)ce(e,t);else if(Array.isArray(n.content))for(let e of n.content)ce(e,t);else if("text"===n.type)t.push({type:"mdx",content:n.text||""});else if("hardBreak"===n.type)t.push({type:"mdx",content:"\n"});else if(n.type===lz){let e=n.attrs;switch(e.type){case"file":t.push({type:"mention-file",filePath:e.data.value});break;case"url":t.push({type:"mention-url",url:e.data.value});break;case"directory":t.push({type:"mention-directory",directoryPath:e.data.value});break;default:return e.type}}}function ct(e){let t=[];for(let n of e){let e=n.type;switch(e){case"hidden-context":case"refinement-element":case"confirmed-steps":case"parse-error":break;case"mdx":t.push({type:"text",text:n.content||""});break;case"mention-url":t.push({type:"mentionMenuItem",attrs:{data:{id:"mention-url-".concat(n.url),value:n.url,title:n.url},type:"url"}});break;case"mention-file":t.push({type:"mentionMenuItem",attrs:{data:{id:"mention-file-".concat(n.filePath),value:n.filePath,title:n.filePath},type:"file"}});break;case"mention-directory":t.push({type:"mentionMenuItem",attrs:{data:{id:"mention-directory-".concat(n.directoryPath),value:n.directoryPath,title:n.directoryPath},type:"directory"}});break;default:return e}}return{content:[{content:t,type:"paragraph"}],type:"doc"}}function cn(e,t,n){if(!t)return;let r=t;if((null==r?void 0:r.type)===e&&n.push(r.attrs),Array.isArray(r))for(let t of r)cn(e,t,n);else if(Array.isArray(null==r?void 0:r.content))for(let t of r.content)cn(e,t,n)}e.s(["getContentJsonFromMessageContentParts",()=>ct,"getMessageContentPartsFromContentJson",()=>ce,"getNodesFromContentJson",()=>cn],605667),e.i(168204);var cr=e.i(225695),ci=e.i(92479),co=e.i(562489);let ca=10,cs=new Map,cl=(0,n.cacheResultById)(cs,()=>({saveToNewChatDraft:(0,t.atom)(!1),editor:(0,t.atom)(null),contentHtml:(0,t.atom)(null),contentJson:(0,t.atom)(null),contentText:(0,t.atom)(null),isMessageModeSwitcherOpen:(0,t.atom)(!1),isModelSwitcherOpen:(0,t.atom)(!1),isToolsDropdownOpen:(0,t.atom)(!1),editingMessage:(0,t.atom)(null),editingQueuedPrompt:(0,t.atom)(null),lastEditableMessage:(0,t.atom)(null),context:(0,t.atom)([]),isDraggingFile:(0,t.atom)(!1),bannerState:(0,t.atom)({type:"none"}),transientBannerState:(0,t.atom)(null),refinementElementSelected:(0,t.atom)(null),isTodosWithQueueOpen:(0,t.atom)(!1),derivedTodoList:(0,t.atom)({list:[],updatedAt:0}),isEnhancing:(0,t.atom)(!1),doNotEnhanceList:(0,t.atom)([]),originalPromptBeforeEnhancement:(0,t.atom)(""),promptQueue:(0,t.atom)([]),voiceState:(0,t.atom)({status:"idle",loadingMessage:"",progressItems:[],isProcessing:!1,chunks:[],transcribedText:"",isSupported:!1,waitingForReady:!1,initialTextLength:0})})),cc=new Map,cu=(0,n.cacheResultById)(cc,e=>{let n=(0,l6.getDurableRootAtoms)("root"),r=cl(e),i=(0,t.atom)(e=>{let t=e(r.transientBannerState);return t&&"none"!==t.type?t:e(r.bannerState)}),o=(0,t.atom)(e=>{let t=e(r.derivedTodoList).list.slice().sort((e,t)=>{let n={done:0,"in-progress":1,todo:2};return n[e.status]-n[t.status]});return{list:t,completedList:t.filter(e=>"done"===e.status),notCompletedList:t.filter(e=>"done"!==e.status),totalCount:t.length,totalDone:t.filter(e=>"done"===e.status).length,totalInProgress:t.filter(e=>"in-progress"===e.status).length,isEmpty:0===t.length,isListComplete:t.every(e=>"done"===e.status)&&t.length>0}}),a=(0,t.atom)(e=>{let t=e(r.voiceState);return"loading"===t.status?{type:"voice-model-loading"}:"recording"===t.status?{type:"voice-recording"}:!e(o).isEmpty||e(r.promptQueue).length>0?{type:"todos-with-queue"}:{type:"none"}}),s=(0,co.selectAtom)((0,t.atom)(e=>{let t=e(r.contentJson),n=[];return cn("mentionMenuItem",(null==t?void 0:t.content)||null,n),[...new Map(n.map(e=>[e.data.id,e])).values()]}),e=>e,(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n].data.id!==t[n].data.id)return!1;return!0});return{...r,areEditorsReady:(0,t.atom)(e=>{let t=e(r.editor);return!!(null==t?void 0:t.isEditorReady)}),isPromptEmpty:(0,t.atom)(e=>{let t=e(r.contentText);return!t||""===t.trim()}),shouldSaveDraft:(0,t.atom)(e=>!e(r.editingMessage)&&!e(r.editingQueuedPrompt)),messageMode:n.messageMode,modelConfiguration:n.modelConfiguration,toolConfiguration:n.toolConfiguration,isThinking:(0,t.atom)(e=>!!e(n.modelConfiguration).thinking),isImageGenerations:(0,t.atom)(e=>!!(e(n.modelConfiguration).imageGenerations||e(n.toolConfiguration).generateImages)),modelId:(0,t.atom)(e=>e(n.modelConfiguration).modelId),contextLimitReached:(0,t.atom)(e=>e(r.context).length>=ca),contextLength:(0,t.atom)(e=>e(r.context).length),uploadingContext:(0,t.atom)(e=>e(r.context).some(e=>"local-file"===e.type&&ch(e.data.status))),isDraggingFile:r.isDraggingFile,fullContext:(0,t.atom)(e=>{let t=e(r.refinementElementSelected),n=e(r.context);return[...t?[{type:"refinement-element",data:t}]:[],...e(s),...n.sort((e,t)=>"local-file"===e.type&&"local-file"===t.type?e.data.id.localeCompare(t.data.id):0)]}),attachments:(0,t.atom)(e=>lZ(e(r.context))),banner:i,isBannerVisible:(0,t.atom)(e=>"none"!==e(i).type),todoList:o,eyebrow:a,isEyebrowVisible:(0,t.atom)(e=>{let t=e(a),n=e(o);if("voice-recording"===t.type||"voice-model-loading"===t.type)return!0;let i=!n.isEmpty&&!n.isListComplete,s=e(r.promptQueue).length>0;return"todos-with-queue"===t.type&&(i||s)}),isEnhancing:r.isEnhancing,doNotEnhanceList:r.doNotEnhanceList,originalPromptBeforeEnhancement:r.originalPromptBeforeEnhancement,queueLength:(0,t.atom)(e=>e(r.promptQueue).length),isQueueFull:(0,t.atom)(e=>e(r.promptQueue).length>=10)}});function cd(e){let t=cl(e),n=cu(e),o=(0,l6.getDurableRootAtoms)("root"),a=()=>{let e=r.store.get(t.editor);e&&e.editor.commands.clearContent()},s=()=>{requestAnimationFrame(()=>{let e=r.store.get(t.editor);if(!e)return console.warn("Cannot focus prompt: editor not initialized");e.editor.commands.focus()})},l=()=>{if(!r.store.get(n.shouldSaveDraft)||r.store.get(t.editingQueuedPrompt))return;let i=r.store.get(t.context),o=r.store.get(t.refinementElementSelected);l5(e,r.store.get(t.saveToNewChatDraft)).updateLocalDraft({context:i,refinementElementSelected:o})},c=n=>{let{initialValue:i="",save:o=!0,force:a=!1,onInputChange:s}=n||{},l=r.store.get(t.editor);if(!l)return;let c=a?i:l.editor.getText()||i;l.editor.commands.setContent(c),null==s||s(c);let{updateLocalDraft:u}=l5(e,r.store.get(t.saveToNewChatDraft)),d=!!r.store.get(t.editingMessage),p=!!r.store.get(t.editingQueuedPrompt);!o||d||p||u({json:JSON.stringify(l.editor.getJSON()),html:l.editor.getHTML()})},u=e=>{var n;r.store.set(t.editingMessage,e),c({initialValue:ct(e.content.parts.filter(e=>(0,cr.isUserMessageContentPart)(e))),force:!0}),(null==(n=e.attachments)?void 0:n.length)&&m(l7(e.attachments,"edit"));let i=e.content.parts.find(e=>"refinement-element"===e.type);i&&y(i),s()},d=e=>{if(r.store.set(t.editingQueuedPrompt,e),e.json)try{let t=JSON.parse(e.json);c({initialValue:t,force:!0,save:!1})}catch(e){console.error("Failed to restore queued prompt content:",e)}r.store.set(t.context,e.context),r.store.set(t.refinementElementSelected,e.refinementElementSelected),s()},p=e=>{let n=r.store.get(t.context);n.some(t=>"local-file"===t.type&&t.data.id===e.id)||(r.store.set(t.context,[...n,{type:"local-file",data:e}]),l())},h=e=>{let n=r.store.get(t.context),i=n.findIndex(t=>"local-file"===t.type&&t.data.id===e.id);if(-1===i)return void p(e);let o=[...n];o[i]={type:"local-file",data:e},r.store.set(t.context,o),l()},f=e=>{let n=r.store.get(t.context),i=n.findIndex(t=>(0,l8.default)(t,e));if(-1===i)return;let o=[...n];o.splice(i,1),r.store.set(t.context,o),s(),l()},m=e=>{r.store.set(t.context,e.slice(0,ca).map(e=>({type:"local-file",data:e}))),l()},g=()=>{r.store.set(t.context,r.store.get(t.context).filter(e=>"local-file"!==e.type)),l()},v=n=>{let i=l5(e,n||r.store.get(t.saveToNewChatDraft)).getLocalDraft(),o=i.context.filter(e=>"local-file"!==e.type||!ch(e.data.status));r.store.set(t.context,o),r.store.set(t.refinementElementSelected,i.refinementElementSelected)},x=n=>{let i=l5(e,n||r.store.get(t.saveToNewChatDraft)).getLocalDraft(),o=r.store.get(t.editor);if(!o)return;let a=i.json;return a?void o.editor.commands.setContent(a):i.html?void o.editor.commands.setContent(i.html):void o.editor.commands.clearContent()},y=e=>{r.store.set(t.refinementElementSelected,e),l()},b=()=>{r.store.set(t.refinementElementSelected,null),l()};function w(){if(r.store.get(t.editingQueuedPrompt))return;let n=r.store.get(t.promptQueue);l5(e,r.store.get(t.saveToNewChatDraft)).updateLocalDraft({promptQueue:n})}function j(){let e="queue-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,11)),n=r.store.get(t.contentJson),o=r.store.get(t.contentHtml),l=r.store.get(t.contentText),c=r.store.get(t.context),u=c.some(e=>"local-file"===e.type),d=r.store.get(t.refinementElementSelected),p={id:e,json:n?JSON.stringify(n):null,html:o,refinementElementSelected:d,context:c,updatedAt:Date.now()},h=r.store.get(t.promptQueue);r.store.set(t.promptQueue,[...h,p]),w(),(0,i.track)("AddPromptToQueue",{queuedPromptId:e,queueLength:h.length+1,promptLength:(null==l?void 0:l.length)||0,hasAttachments:u}),a(),g(),b(),s()}let C=e=>{let n=r.store.get(t.voiceState);r.store.set(t.voiceState,{...n,...e})},k=e=>{C({status:e})},S=e=>{C({isProcessing:e})},N=e=>{C({chunks:[...r.store.get(t.voiceState).chunks,e]})},E=()=>{C({chunks:[]})},D=e=>{C({transcribedText:e})},I=e=>{C({isSupported:e})},A=e=>{C({waitingForReady:e})};return{clearEditorContent:a,registerEditor:e=>r.store.set(t.editor,e),unregisterEditor:e=>{let n=r.store.get(t.editor);(null==n?void 0:n.reactId)===e&&r.store.set(t.editor,null)},updateContentStates:(e,n)=>{if(e){r.store.set(t.contentHtml,e.getHTML()),r.store.set(t.contentJson,e.getJSON()),r.store.set(t.contentText,e.getText());let i=r.store.get(t.editor);i&&i.reactId!==n&&i.editor.commands.setContent(e.getHTML())}},focusPrompt:s,handleInputChange:c,setIsMessageModeSwitcherOpen:e=>{r.store.set(t.isMessageModeSwitcherOpen,e)},setMessageMode:e=>{r.store.set(o.messageMode,e)},setIsModelSwitcherOpen:e=>{r.store.set(t.isModelSwitcherOpen,e)},setModelId:e=>{r.store.set(o.modelConfiguration,{...r.store.get(o.modelConfiguration),modelId:e})},setThinking:e=>{r.store.set(o.modelConfiguration,{...r.store.get(o.modelConfiguration),thinking:e})},setImageGenerations:e=>{r.store.set(o.modelConfiguration,{...r.store.get(o.modelConfiguration),imageGenerations:e})},setWebSearch:e=>{r.store.set(o.toolConfiguration,{...r.store.get(o.toolConfiguration),webSearch:e})},setGenerateImages:e=>{r.store.set(o.toolConfiguration,{...r.store.get(o.toolConfiguration),generateImages:e})},setDesignSystemId:e=>{r.store.set(o.toolConfiguration,{...r.store.get(o.toolConfiguration),designSystemId:e})},startEditingMessage:u,cancelEditingMessage:()=>{r.store.set(t.editingMessage,null),v(),x()},clearEditingMessage:()=>{r.store.set(t.editingMessage,null)},setLastEditableMessage:e=>{r.store.set(t.lastEditableMessage,e)},startEditingQueuedPrompt:d,cancelEditingQueuedPrompt:()=>{r.store.set(t.editingQueuedPrompt,null),v(),x()},clearEditingQueuedPrompt:()=>{r.store.set(t.editingQueuedPrompt,null)},updateQueuedPromptInPlace:(e,n)=>{let o=r.store.get(t.promptQueue).map(t=>t.id===e?{...t,...n}:t);r.store.set(t.promptQueue,o),w(),(0,i.track)("AddPromptToQueue",{queuedPromptId:e,queueLength:o.length,promptLength:0,hasAttachments:!1})},addLocalFileToContext:p,updateLocalFileInContext:h,renameLocalFileInContext:(e,n)=>{let i=r.store.get(t.context),o=i.findIndex(t=>"local-file"===t.type&&t.data.id===e);if(-1===o)return;let a=[...i],s=a[o];a[o]={...s,data:{...s.data,name:n}},r.store.set(t.context,a),l()},removeLocalFileFromContext:e=>{r.store.set(t.context,r.store.get(t.context).filter(t=>"local-file"!==t.type||t.data.id!==e.id)),l()},removeItemFromContext:f,removeMentionFromEditor:e=>{let n=r.store.get(t.editor);if(!n)return;let{editor:i}=n;i.chain().focus().command(t=>{let{tr:n,state:r}=t,i=[];return r.doc.descendants((t,n)=>{var o;if(t.type.name===lz&&(null==(o=t.attrs.data)?void 0:o.id)===e.id){let e=n,o=n+t.nodeSize;" "===r.doc.textBetween(o,o+1,void 0,"\0")&&(o+=1),i.push({from:e,to:o})}return!0}),!!i.length&&(i.sort((e,t)=>t.from-e.from).forEach(e=>n.delete(e.from,e.to)),!0)}).run(),l()},setContextFromLocalFiles:m,clearContext:()=>{r.store.set(t.context,[]),b(),l()},clearAttachments:g,addQuoteToContext:e=>{let n=r.store.get(t.context).filter(e=>"quote"!==e.type);r.store.set(t.context,[{type:"quote",data:{quote:e}},...n]),l()},removeQuoteFromContext:()=>{let e=r.store.get(t.context).filter(e=>"quote"!==e.type);r.store.set(t.context,e)},setSaveToNewChatDraft:e=>{r.store.set(t.saveToNewChatDraft,e)},restoreDraft:e=>{v(e),x(e)},restorePromptContext:v,restorePromptContent:x,restorePromptQueue:()=>{let n=l5(e,!1).getLocalDraft();r.store.set(t.promptQueue,n.promptQueue)},setBannerState:e=>{r.store.set(t.bannerState,e)},setTransientBannerState:e=>{r.store.set(t.transientBannerState,e)},dismissTransientBannerState:function(){r.store.set(t.transientBannerState,null)},setRefinementElementSelected:y,clearRefinementElementSelected:b,setIsTodosWithQueueOpen:e=>{r.store.set(t.isTodosWithQueueOpen,e)},setTodoList:e=>{r.store.set(t.derivedTodoList,e)},clearTodoList:()=>{r.store.set(t.derivedTodoList,{list:[],updatedAt:0})},setIsToolsDropdownOpen:e=>{r.store.set(t.isToolsDropdownOpen,e)},getIndexOfQueuedPrompt:function(e){return r.store.get(t.promptQueue).findIndex(t=>t.id===e)},restoreQueuedPromptToQueue:function(e,n){let i,o=r.store.get(t.promptQueue);if(o.some(t=>t.id===e.id))return void console.warn("Queued prompt with id ".concat(e.id," already exists in the queue"));i="number"==typeof n&&n>=0&&n<=o.length?[...o.slice(0,n),e,...o.slice(n)]:[...o,e],r.store.set(t.promptQueue,i),w()},addPromptToQueue:j,removePromptFromQueue:function(e){let n=r.store.get(t.promptQueue).filter(t=>t.id!==e);r.store.set(t.promptQueue,n),w(),(0,i.track)("RemovePromptFromQueue",{queuedPromptId:e,queueLength:n.length})},clearPromptQueue:function(){r.store.set(t.promptQueue,[]),l5(e,r.store.get(t.saveToNewChatDraft)).updateLocalDraft({promptQueue:[]})},reorderPromptQueue:function(e,n){let i=r.store.get(t.promptQueue),o=i.findIndex(t=>t.id===e),a=i.findIndex(e=>e.id===n);if(-1===o||-1===a)return;let s=[...i],[l]=s.splice(o,1);s.splice(a,0,l),r.store.set(t.promptQueue,s),w()},updateVoiceState:C,setVoiceStatus:k,setVoiceProcessing:S,addVoiceChunk:N,clearVoiceChunks:E,setVoiceTranscribedText:D,setVoiceSupported:I,setVoiceWaitingForReady:A,resetVoiceState:()=>{r.store.set(t.voiceState,{status:r.store.get(t.voiceState).isSupported?"ready":"idle",loadingMessage:"",progressItems:[],isProcessing:!1,chunks:[],transcribedText:"",isSupported:r.store.get(t.voiceState).isSupported,waitingForReady:!1,initialTextLength:0})}}}function cp(){let e=(0,ci.assertChatId)((0,ci.useChatId)().chatId);return{atoms:cu(e),actions:cd(e),chatId:e}}let ch=e=>"uploading"===e||"compressing"===e;function cf(e){if(!e.json)return"";try{let t=JSON.parse(e.json);return cm(t)}catch(e){return""}}function cm(e){return e?"text"===e.type&&e.text?e.text:e.content&&Array.isArray(e.content)?e.content.map(e=>cm(e)).join(""):"":""}e.s(["getPlainTextFromQueuedMessage",()=>cf,"getPromptActions",()=>cd,"getPromptAtoms",0,cu,"getWritablePromptAtoms",0,cl,"isUploading",0,ch,"useCurrentChatPrompt",()=>cp],418929)},209819,e=>{"use strict";var t=e.i(92479),n=e.i(743124),r=e.i(887968),i=e.i(418929),o=e.i(639056),a=e.i(346970);function s(e){let{chatId:i}=(0,t.useChatId)(),{data:o,mutate:s,isLoading:l}=(0,a.default)(["chat:meta",null!=e?e:i]),c=(0,n.useRef)(null!=o?o:r.CHAT_METADATA_FALLBACK);return{setMetadata:(0,n.useCallback)(e=>s(t=>({...null!=t?t:c.current,...e})),[s]),...null!=o?o:r.CHAT_METADATA_FALLBACK,isLoading:l}}function l(){var e,t;let{atoms:r,actions:a}=(0,i.useCurrentChatPrompt)();return{quote:null!=(t=null==(e=(0,o.useAtomValue)(r.context).find(e=>"quote"===e.type))?void 0:e.data.quote)?t:null,setQuote:(0,n.useCallback)(e=>{e?a.addQuoteToContext(e):a.removeQuoteFromContext()},[a])}}function c(){let{chatId:e}=(0,t.useChatId)(),{data:n,mutate:r}=(0,a.default)(["chat:privacy",e]);return{chatPrivacy:n,setChatPrivacy:r}}e.s(["useChatMetadata",()=>s,"useChatPrivacy",()=>c,"useChatQuote",()=>l])},81097,(e,t,n)=>{function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},684599,(e,t,n)=>{var r=e.r(81097).default;function i(){"use strict";t.exports=i=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=Object.create((t&&t.prototype instanceof b?t:b).prototype);return s(i,"_invoke",{value:I(e,n,new L(r||[]))}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var m="suspendedStart",g="suspendedYield",v="executing",x="completed",y={};function b(){}function w(){}function j(){}var C={};p(C,c,function(){return this});var k=Object.getPrototypeOf,S=k&&k(k(P([])));S&&S!==o&&a.call(S,c)&&(C=S);var N=j.prototype=b.prototype=Object.create(C);function E(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function D(e,t){var n;function i(n,o,s,l){var c=f(e[n],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==r(d)&&a.call(d,"__await")?t.resolve(d.__await).then(function(e){i("next",e,s,l)},function(e){i("throw",e,s,l)}):t.resolve(d).then(function(e){u.value=e,s(u)},function(e){return i("throw",e,s,l)})}l(c.arg)}s(this,"_invoke",{value:function(e,r){function o(){return new t(function(t,n){i(e,r,t,n)})}return n=n?n.then(o,o):o()}})}function I(t,n,r){var i=m;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===x){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=x,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?x:g,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=x,r.method="throw",r.arg=c.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(r(t)+" is not iterable")}return w.prototype=j,s(N,"constructor",{value:j,configurable:!0}),s(j,"constructor",{value:w,configurable:!0}),w.displayName=p(j,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,j):(e.__proto__=j,p(e,d,"GeneratorFunction")),e.prototype=Object.create(N),e},n.awrap=function(e){return{__await:e}},E(D.prototype),p(D.prototype,u,function(){return this}),n.AsyncIterator=D,n.async=function(e,t,r,i,o){void 0===o&&(o=Promise);var a=new D(h(e,t,r,i),o);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(N),p(N,d,"Generator"),p(N,c,function(){return this}),p(N,"toString",function(){return"[object Generator]"}),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},n}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},228852,(e,t,n)=>{var r=e.r(684599)();t.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},87467,725415,393753,975294,287098,503855,e=>{"use strict";var t=e.i(509473),n=e.i(504066),r=e.i(743124),i=e.i(899488),o=e.i(375462),a=e.i(341448),s=e.i(192670),l=e.i(236699),c=e.i(297239),u=e.i(739126),d=e.i(696871),p=e.i(938807),h=e.i(65836),f=e.i(196269),m=e.i(707827),g=e.i(53223),v=e.i(667660),x=e.i(209819);e.i(563948);var y=e.i(407562),b=e.i(183673),w=e.i(44337);function j(e){let t=[...new Set(Array.from(w.SQL_EXEC_PROVIDERS_TO_EXECUTION_ENV.values()).flat())];return e.filter(e=>{let n=e.toUpperCase();return t.some(e=>n.includes(e.toUpperCase()))})}function C(e){let t=new Set;for(let[n,r]of w.INTEGRATION_NAME_TO_ENV_VARS.entries())for(let i of r)if(e.includes(i)){t.add(n);break}for(let[n,r]of w.INTEGRATION_NAME_TO_SOURCE_TEXT.entries())for(let i of r)if(e.includes(i)){t.add(n);break}return Array.from(t)}function k(e,t,n){let r=[],i=new Date().toISOString();if(e.stdout.forEach(e=>{r.push({type:"output",blockId:t,fileName:n,content:e.map(e=>JSON.stringify(e,void 0,2)).join(" "),timestamp:i,method:"stdout"})}),e.returned)if("$$attachments"in e.returned&&Array.isArray(e.returned.$$attachments))for(let o of e.returned.$$attachments){let[e,a]=o;r.push({type:"output",blockId:t,fileName:n,content:"Attachment: ".concat(e),timestamp:i,method:"stdout",attachment:{mimeType:e,data:a}})}else{let o=JSON.stringify(e.returned,void 0,2);r.push({type:"output",blockId:t,fileName:n,content:o,timestamp:i,method:"stdout"})}return e.stderr.forEach(e=>{r.push({type:"output",blockId:t,fileName:n,content:e.map(e=>JSON.stringify(e,void 0,2)).join(" "),timestamp:i,method:"stderr"})}),r}function S(e){let{fileName:w="file.txt",value:C,caller:S,additionalHeaderActions:N,allowCopyCode:E,allowDownloadCode:D,closeHandler:I,isTabbed:A,allowClose:T,blockId:M,originalCode:L,closed:P,isExecutable:R,transactionMeta:_,language:O,onExecutionComplete:F}=e,{isCopied:B,copyToClipboard:V}=(0,n.useCopyToClipboard)({timeout:2e3}),{setShowDiffs:z,hasDiffs:H,showDiffs:U}=(0,u.useDiffView)({blockId:M,fileName:w,originalCode:L,newCode:C}),G=(0,c.useT)(),[W,q]=(0,r.useState)(!1),{activeScopeSlug:Z}=(0,v.useActiveScope)(),{project:K}=(0,x.useChatMetadata)(),$=null==K?void 0:K.projectId,{envVars:Y}=(0,b.useVercelProject)({v0ProjectId:null==K?void 0:K.projectId}),J=(0,r.useMemo)(()=>!!Y&&j(Object.keys(Y)).length>0,[Y]),Q="sql"===O,X="python"===O,ee="javascript"===O,et=(Q||X||ee)&&R,en=Q&&$&&J,er=async()=>{if(O&&!W){q(!0);try{let e;if(en){if(!Z)return void y.toast.error("Error",{description:"Missing active scope"});if(!$)return void y.toast.error("Error",{description:"Missing project ID"});e=await (0,f.doSqlExecution)({props:{language:O,blockId:M,source:C,meta:{file:w,transaction:_},closed:P,originalCode:L},v0ProjectId:$})}else e=await (0,h.doExecution)({language:O,blockId:M,source:C,meta:{file:w,transaction:_},closed:P,originalCode:L});if("error"in e)y.toast.error("Error",{description:"Error executing code"}),null==F||F([{type:"output",blockId:M,fileName:w||"untitled",content:e.error,timestamp:new Date().toISOString(),method:"stderr"}]);else{let t=k(e,M,w||"untitled");null==F||F(t)}}finally{q(!1)}}},ei=()=>{let e=w.split("/").pop(),t=window.prompt("Enter file name",e);if(!t)return;let n=new Blob([C],{type:"text/plain"}),r=URL.createObjectURL(n),i=document.createElement("a");switch(i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),S){case"executable":return(0,g.track)("DownloadCodeExecutable",{code:C});case"v0":return(0,g.track)("DownloadCodeV0",{code:C})}},eo=async()=>{if(!B)switch(await V(C),S){case"inline":return(0,g.track)("CopyCodeInline",{code:C});case"executable":return(0,g.track)("CopyCodeExecutable",{code:C});case"v0":return(0,g.track)("CopyCodeV0",{code:C})}};return(0,t.jsxs)(t.Fragment,{children:[N&&N.length>0?N:null,et&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":"Run Code",onClick:er,disabled:W||Q&&!en,tooltip:{side:"bottom",content:W?"Running...":Q&&!en?"No database connected":"Run Code"},children:(0,t.jsx)("span",{"aria-hidden":!0,children:W?(0,t.jsx)(m.Spinner,{size:16}):(0,t.jsx)(a.PlayCircle,{})})}),P&&H&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":G(U?"codeBlockActions.hideDiff":"codeBlockActions.showDiff"),active:U,onClick:()=>{z(!U),setTimeout(()=>{let e=document.getElementById(d.FIRST_HIGHLIGHTED_LINE_ID);e&&e.scrollIntoView({behavior:"instant"})},0)},outline:!A,tooltip:A?{side:"bottom",content:G(U?"codeBlockActions.hideDiff":"codeBlockActions.showDiff")}:G(U?"codeBlockActions.hideDiff":"codeBlockActions.showDiff"),children:(0,t.jsx)(p.DiffIcon,{size:"inline"===S?14:void 0})}),E&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":G("codeBlockActions.copy"),onClick:eo,outline:!A,tooltip:A?{side:"bottom",content:G("codeBlockActions.copy")}:G("codeBlockActions.copy"),children:(0,t.jsx)(l.CopyCheck,{isCopied:B,size:"inline"===S?14:void 0})}),D&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":G("codeBlockActions.download"),onClick:ei,outline:!A,tooltip:A?{side:"bottom",content:G("codeBlockActions.download")}:G("codeBlockActions.download"),children:(0,t.jsx)("span",{"aria-hidden":!0,children:(0,t.jsx)(s.AnimatedDownload,{})})}),T&&I&&(0,t.jsx)(i.CodeBlockButton,{"aria-label":G("codeBlockActions.close"),onClick:I,outline:!A,tooltip:A?{side:"bottom",content:G("codeBlockActions.close")}:G("codeBlockActions.close"),children:(0,t.jsx)("span",{"aria-hidden":!0,children:(0,t.jsx)(o.Cross,{})})})]})}function N(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){N(o,r,i,a,s,"next",e)}function s(e){N(o,r,i,a,s,"throw",e)}a(void 0)})}}function D(){return(D=Object.assign.bind()).apply(null,arguments)}function I(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function M(e){var t=T(e,"string");return"symbol"==A(t)?t:t+""}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function P(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return R(e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}function V(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.s(["findIntegrationsInString",()=>C,"getSQLExecEnvVars",()=>j],725415),e.s(["transformExecutionOutputToEvents",()=>k],393753),e.s(["CodeBlockActions",()=>S],87467),e.s(["default",()=>D],975294);var z=e.i(228852),H=r;function U(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function G(e,t){if(null==e)return{};var n,r,i=U(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function q(e){if(Array.isArray(e))return W(e)}function Z(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function K(e,t){if(e){if("string"==typeof e)return W(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function $(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Y(e){return q(e)||Z(e)||K(e)||$()}var J=r,Q=r;function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){V(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function et(e){var t=e.length;return 0===t||1===t?e:2===t?[e[0],e[1],"".concat(e[0],".").concat(e[1]),"".concat(e[1],".").concat(e[0])]:3===t?[e[0],e[1],e[2],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0])]:t>=4?[e[0],e[1],e[2],e[3],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[2],".").concat(e[3]),"".concat(e[3],".").concat(e[0]),"".concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[0]),"".concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[3],".").concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[2],".").concat(e[1],".").concat(e[0])]:void 0}var en={};function er(e){if(0===e.length||1===e.length)return e;var t=e.join(".");return en[t]||(en[t]=et(e)),en[t]}function ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return er(e.filter(function(e){return"token"!==e})).reduce(function(e,t){return ee(ee({},e),n[t])},t)}function eo(e){return e.join(" ")}function ea(e,t){var n=0;return function(r){return n+=1,r.map(function(r,i){return es({node:r,stylesheet:e,useInlineStyles:t,key:"code-segment-".concat(n,"-").concat(i)})})}}function es(e){var t=e.node,n=e.stylesheet,r=e.style,i=void 0===r?{}:r,o=e.useInlineStyles,a=e.key,s=t.properties,l=t.type,c=t.tagName,u=t.value;if("text"===l)return u;if(c){var d,p=ea(n,o);if(o){var h=Object.keys(n).reduce(function(e,t){return t.split(".").forEach(function(t){e.includes(t)||e.push(t)}),e},[]),f=s.className&&s.className.includes("token")?["token"]:[],m=s.className&&f.concat(s.className.filter(function(e){return!h.includes(e)}));d=ee(ee({},s),{},{className:eo(m)||void 0,style:ei(s.className,Object.assign({},s.style,i),n)})}else d=ee(ee({},s),{},{className:eo(s.className)});var g=p(t.children);return Q.default.createElement(c,D({key:a},d),g)}}let el=function(e,t){return -1!==e.listLanguages().indexOf(t)};var ec=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach(function(t){V(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ep=/\n/g;function eh(e){return e.match(ep)}function ef(e){var t=e.lines,n=e.startingLineNumber,r=e.style;return t.map(function(e,t){var i=t+n;return J.default.createElement("span",{key:"line-".concat(t),className:"react-syntax-highlighter-line-number",style:"function"==typeof r?r(i):r},"".concat(i,"\n"))})}function em(e){var t=e.codeString,n=e.codeStyle,r=e.containerStyle,i=void 0===r?{float:"left",paddingRight:"10px"}:r,o=e.numberStyle,a=void 0===o?{}:o,s=e.startingLineNumber;return J.default.createElement("code",{style:Object.assign({},n,i)},ef({lines:t.replace(/\n$/,"").split("\n"),style:a,startingLineNumber:s}))}function eg(e){return"".concat(e.toString().length,".25em")}function ev(e,t){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(e),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:t},children:[{type:"text",value:e}]}}function ex(e,t,n){var r={display:"inline-block",minWidth:eg(n),paddingRight:"1em",textAlign:"right",userSelect:"none"},i="function"==typeof e?e(t):e;return ed(ed({},r),i)}function ey(e){var t=e.children,n=e.lineNumber,r=e.lineNumberStyle,i=e.largestLineNumber,o=e.showInlineLineNumbers,a=e.lineProps,s=void 0===a?{}:a,l=e.className,c=void 0===l?[]:l,u=e.showLineNumbers,d=e.wrapLongLines,p=e.wrapLines,h=void 0!==p&&p?ed({},"function"==typeof s?s(n):s):{};if(h.className=h.className?[].concat(Y(h.className.trim().split(/\s+/)),Y(c)):c,n&&o){var f=ex(r,n,i);t.unshift(ev(n,f))}return d&u&&(h.style=ed(ed({},h.style),{},{display:"flex"})),{type:"element",tagName:"span",properties:h,children:t}}function eb(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0;r<e.length;r++){var i=e[r];if("text"===i.type)n.push(ey({children:[i],className:Y(new Set(t))}));else if(i.children){var o=t.concat(i.properties.className);eb(i.children,o).forEach(function(e){return n.push(e)})}}return n}function ew(e,t,n,r,i,o,a,s,l){var c,u=eb(e.value),d=[],p=-1,h=0;function f(e,o){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return ey({children:e,lineNumber:o,lineNumberStyle:s,largestLineNumber:a,showInlineLineNumbers:i,lineProps:n,className:c,showLineNumbers:r,wrapLongLines:l,wrapLines:t})}function m(e,t){if(r&&t&&i){var n=ex(s,t,a);e.unshift(ev(t,n))}return e}function g(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t||r.length>0?f(e,n,r):m(e,n)}for(var v=function(){var e=u[h],t=e.children[0].value;if(eh(t)){var n=t.split("\n");n.forEach(function(t,i){var a=r&&d.length+o,s={type:"text",value:"".concat(t,"\n")};if(0===i){var l=g(u.slice(p+1,h).concat(ey({children:[s],className:e.properties.className})),a);d.push(l)}else if(i===n.length-1){var c=u[h+1]&&u[h+1].children&&u[h+1].children[0],f={type:"text",value:"".concat(t)};if(c){var m=ey({children:[f],className:e.properties.className});u.splice(h+1,0,m)}else{var v=g([f],a,e.properties.className);d.push(v)}}else{var x=g([s],a,e.properties.className);d.push(x)}}),p=h}h++};h<u.length;)v();if(p!==u.length-1){var x=u.slice(p+1,u.length);if(x&&x.length){var y=g(x,r&&d.length+o);d.push(y)}}return t?d:(c=[]).concat.apply(c,d)}function ej(e){var t=e.rows,n=e.stylesheet,r=e.useInlineStyles;return t.map(function(e,t){return es({node:e,stylesheet:n,useInlineStyles:r,key:"code-segement".concat(t)})})}function eC(e){return e&&void 0!==e.highlightAuto}function ek(e){var t=e.astGenerator,n=e.language,r=e.code,i=e.defaultCodeValue;if(eC(t)){var o=el(t,n);return"text"===n?{value:i,language:"text"}:o?t.highlight(n,r):t.highlightAuto(r)}try{return n&&"text"!==n?{value:t.highlight(r,n)}:{value:i}}catch(e){return{value:i}}}function eS(e,t){return function(n){var r=n.language,i=n.children,o=n.style,a=void 0===o?t:o,s=n.customStyle,l=void 0===s?{}:s,c=n.codeTagProps,u=void 0===c?{className:r?"language-".concat(r):void 0,style:ed(ed({},a['code[class*="language-"]']),a['code[class*="language-'.concat(r,'"]')])}:c,d=n.useInlineStyles,p=void 0===d||d,h=n.showLineNumbers,f=void 0!==h&&h,m=n.showInlineLineNumbers,g=void 0===m||m,v=n.startingLineNumber,x=void 0===v?1:v,y=n.lineNumberContainerStyle,b=n.lineNumberStyle,w=void 0===b?{}:b,j=n.wrapLines,C=n.wrapLongLines,k=void 0!==C&&C,S=n.lineProps,N=void 0===S?{}:S,E=n.renderer,D=n.PreTag,I=void 0===D?"pre":D,A=n.CodeTag,T=void 0===A?"code":A,M=n.code,L=void 0===M?(Array.isArray(i)?i[0]:i)||"":M,P=n.astGenerator,R=G(n,ec);P=P||e;var _=f?J.default.createElement(em,{containerStyle:y,codeStyle:u.style||{},numberStyle:w,startingLineNumber:x,codeString:L}):null,O=a.hljs||a['pre[class*="language-"]']||{backgroundColor:"#fff"},F=eC(P)?"hljs":"prismjs",B=p?Object.assign({},R,{style:Object.assign({},O,l)}):Object.assign({},R,{className:R.className?"".concat(F," ").concat(R.className):F,style:Object.assign({},l)});if(k?u.style=ed(ed({},u.style),{},{whiteSpace:"pre-wrap"}):u.style=ed(ed({},u.style),{},{whiteSpace:"pre"}),!P)return J.default.createElement(I,B,_,J.default.createElement(T,u,L));(void 0===j&&E||k)&&(j=!0),E=E||ej;var V=[{type:"text",value:L}],z=ek({astGenerator:P,language:r,code:L,defaultCodeValue:V});null===z.language&&(z.value=V);var H=z.value.length;1===H&&"text"===z.value[0].type&&(H=z.value[0].value.split("\n").length);var U=H+x,W=ew(z,j,N,f,g,x,U,w,k);return J.default.createElement(I,B,J.default.createElement(T,u,!g&&_,E({rows:W,stylesheet:a,useInlineStyles:p})))}}function eN(e,t,n){return t=O(t),_(e,eE()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function eE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eE=function(){return!!e})()}let eD=function(e){var t,n=e.loader,r=e.isLanguageRegistered,i=e.registerLanguage,o=e.languageLoaders,a=e.noAsyncLoadingLanguages,s=function(e){function t(){return I(this,t),eN(this,t,arguments)}return B(t,e),P(t,[{key:"componentDidUpdate",value:function(){!t.isRegistered(this.props.language)&&o&&this.loadLanguage()}},{key:"componentDidMount",value:function(){var e=this;t.astGeneratorPromise||t.loadAstGenerator(),t.astGenerator||t.astGeneratorPromise.then(function(){e.forceUpdate()}),!t.isRegistered(this.props.language)&&o&&this.loadLanguage()}},{key:"loadLanguage",value:function(){var e=this,n=this.props.language;"text"!==n&&t.loadLanguage(n).then(function(){return e.forceUpdate()}).catch(function(){})}},{key:"normalizeLanguage",value:function(e){return t.isSupportedLanguage(e)?e:"text"}},{key:"render",value:function(){return H.default.createElement(t.highlightInstance,D({},this.props,{language:this.normalizeLanguage(this.props.language),astGenerator:t.astGenerator}))}}],[{key:"preload",value:function(){return t.loadAstGenerator()}},{key:"loadLanguage",value:function(){var e=E(z.default.mark(function e(n){var r;return z.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof(r=o[n])){e.next=5;break}return e.abrupt("return",r(t.registerLanguage));case 5:throw Error("Language ".concat(n," not supported"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"isSupportedLanguage",value:function(e){return t.isRegistered(e)||"function"==typeof o[e]}},{key:"loadAstGenerator",value:function(){return t.astGeneratorPromise=n().then(function(e){t.astGenerator=e,i&&t.languages.forEach(function(t,n){return i(e,n,t)})}),t.astGeneratorPromise}}])}(H.default.PureComponent);return t=s,V(s,"astGenerator",null),V(s,"highlightInstance",eS(null,{})),V(s,"astGeneratorPromise",null),V(s,"languages",new Map),V(s,"supportedLanguages",e.supportedLanguages||Object.keys(o||{})),V(s,"isRegistered",function(e){if(a)return!0;if(!i)throw Error("Current syntax highlighter doesn't support registration of languages");return t.astGenerator?r(t.astGenerator,e):t.languages.has(e)}),V(s,"registerLanguage",function(e,n){if(!i)throw Error("Current syntax highlighter doesn't support registration of languages");if(t.astGenerator)return i(t.astGenerator,e,n);t.languages.set(e,n)}),s}({loader:function(){return e.A(204569).then(function(e){return e.default||e})},noAsyncLoadingLanguages:!0,supportedLanguages:["abap","abnf","actionscript","ada","agda","al","antlr4","apacheconf","apex","apl","applescript","aql","arduino","arff","asciidoc","asm6502","asmatmel","aspnet","autohotkey","autoit","avisynth","avro-idl","bash","basic","batch","bbcode","bicep","birb","bison","bnf","brainfuck","brightscript","bro","bsl","c","cfscript","chaiscript","cil","clike","clojure","cmake","cobol","coffeescript","concurnas","coq","cpp","crystal","csharp","cshtml","csp","css-extras","css","csv","cypher","d","dart","dataweave","dax","dhall","diff","django","dns-zone-file","docker","dot","ebnf","editorconfig","eiffel","ejs","elixir","elm","erb","erlang","etlua","excel-formula","factor","false","firestore-security-rules","flow","fortran","fsharp","ftl","gap","gcode","gdscript","gedcom","gherkin","git","glsl","gml","gn","go-module","go","graphql","groovy","haml","handlebars","haskell","haxe","hcl","hlsl","hoon","hpkp","hsts","http","ichigojam","icon","icu-message-format","idris","iecst","ignore","inform7","ini","io","j","java","javadoc","javadoclike","javascript","javastacktrace","jexl","jolie","jq","js-extras","js-templates","jsdoc","json","json5","jsonp","jsstacktrace","jsx","julia","keepalived","keyman","kotlin","kumir","kusto","latex","latte","less","lilypond","liquid","lisp","livescript","llvm","log","lolcode","lua","magma","makefile","markdown","markup-templating","markup","matlab","maxscript","mel","mermaid","mizar","mongodb","monkey","moonscript","n1ql","n4js","nand2tetris-hdl","naniscript","nasm","neon","nevod","nginx","nim","nix","nsis","objectivec","ocaml","opencl","openqasm","oz","parigp","parser","pascal","pascaligo","pcaxis","peoplecode","perl","php-extras","php","phpdoc","plsql","powerquery","powershell","processing","prolog","promql","properties","protobuf","psl","pug","puppet","pure","purebasic","purescript","python","q","qml","qore","qsharp","r","racket","reason","regex","rego","renpy","rest","rip","roboconf","robotframework","ruby","rust","sas","sass","scala","scheme","scss","shell-session","smali","smalltalk","smarty","sml","solidity","solution-file","soy","sparql","splunk-spl","sqf","sql","squirrel","stan","stylus","swift","systemd","t4-cs","t4-templating","t4-vb","tap","tcl","textile","toml","tremor","tsx","tt2","turtle","twig","typescript","typoscript","unrealscript","uorazor","uri","v","vala","vbnet","velocity","verilog","vhdl","vim","visual-basic","warpscript","wasm","web-idl","wiki","wolfram","wren","xeora","xml-doc","xojo","xquery","yaml","yang","zig"]});e.s(["PrismAsync",0,eD],287098);var eI=e.i(358847),eA=(0,eI.createServerReference)("607d642dffd5d6176828c7f0ade824409d8d6aad58",eI.callServer,void 0,eI.findSourceMapURL,"updateSqlExecutionStateAction");e.s(["updateSqlExecutionStateAction",()=>eA],503855)},485370,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path d="M6.0952 9.4643V5.5238H7.6190V10.5476C7.6190 11.1394 7.1394 11.6190 6.5476 11.6190C6.2651 11.6190 5.9862 11.5101 5.7857 11.3096L0 5.5238H2.1548L6.0952 9.4643Z M16 10.0952H14.4762V6.6071L10.9881 10.0952H14.4762V11.6190H10.5238C9.3403 11.6190 8.3810 10.6597 8.3810 9.4762V5.5238H9.9048V9.0238L13.4047 5.5238H9.9048V4H13.8571C15.0407 4 16 4.9594 16 6.1429V10.0952Z" fill="currentColor"/>');e.s(["LogoV0",0,t])},270793,(e,t,n)=>{"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}var o=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]];t.exports=function(){function e(){i(this,e),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0}return r(e,null,[{key:"escapeForHtml",value:function(t){return new e().escapeForHtml(t)}},{key:"linkify",value:function(t){return new e().linkify(t)}},{key:"ansiToHtml",value:function(t,n){return new e().ansiToHtml(t,n)}},{key:"ansiToJson",value:function(t,n){return new e().ansiToJson(t,n)}},{key:"ansiToText",value:function(t){return new e().ansiToText(t)}}]),r(e,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var e=0;e<2;++e)for(var t=0;t<8;++t)this.PALETTE_COLORS.push(o[e][t].color);for(var n=[0,95,135,175,215,255],r=function(e,t,r){return n[e]+", "+n[t]+", "+n[r]},i=0;i<6;++i)for(var a=0;a<6;++a)for(var s=0;s<6;++s)this.PALETTE_COLORS.push(r(i,a,s));for(var l=8,c=0;c<24;++c,l+=10)this.PALETTE_COLORS.push(r(l,l,l))}},{key:"escapeForHtml",value:function(e){return e.replace(/[&<>]/gm,function(e){return"&"==e?"&amp;":"<"==e?"&lt;":">"==e?"&gt;":""})}},{key:"linkify",value:function(e){return e.replace(/(https?:\/\/[^\s]+)/gm,function(e){return'<a href="'+e+'">'+e+"</a>"})}},{key:"ansiToHtml",value:function(e,t){return this.process(e,t,!0)}},{key:"ansiToJson",value:function(e,t){return(t=t||{}).json=!0,t.clearLine=!1,this.process(e,t,!0)}},{key:"ansiToText",value:function(e){return this.process(e,{},!1)}},{key:"process",value:function(e,t,n){var r=this,i=this,o=e.split(/\033\[/),a=o.shift();null==t&&(t={}),t.clearLine=/\r/.test(e);var s=o.map(function(e){return r.processChunk(e,t,n)});if(t&&t.json){var l=i.processChunkJson("");return l.content=a,l.clearLine=t.clearLine,s.unshift(l),t.remove_empty&&(s=s.filter(function(e){return!e.isEmpty()})),s}return s.unshift(a),s.join("")}},{key:"processChunkJson",value:function(e,t,n){var r=(t=void 0===t?{}:t).use_classes=void 0!==t.use_classes&&t.use_classes,i=t.key=r?"class":"color",a={content:e,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,clearLine:t.clearLine,decoration:null,was_processed:!1,isEmpty:function(){return!a.content}},s=e.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!s)return a;a.content=s[4];var l=s[2].split(";");if(""!==s[1]||"m"!==s[3]||!n)return a;var c=this;for(c.decoration=null;l.length>0;){var u=parseInt(l.shift());if(isNaN(u)||0===u)c.fg=c.bg=c.decoration=null;else if(1===u)c.decoration="bold";else if(2===u)c.decoration="dim";else if(3==u)c.decoration="italic";else if(4==u)c.decoration="underline";else if(5==u)c.decoration="blink";else if(7===u)c.decoration="reverse";else if(8===u)c.decoration="hidden";else if(9===u)c.decoration="strikethrough";else if(39==u)c.fg=null;else if(49==u)c.bg=null;else if(u>=30&&u<38)c.fg=o[0][u%10][i];else if(u>=90&&u<98)c.fg=o[1][u%10][i];else if(u>=40&&u<48)c.bg=o[0][u%10][i];else if(u>=100&&u<108)c.bg=o[1][u%10][i];else if(38===u||48===u){var d=38===u;if(l.length>=1){var p=l.shift();if("5"===p&&l.length>=1){var h=parseInt(l.shift());if(h>=0&&h<=255)if(r){var f=h>=16?"ansi-palette-"+h:o[+(h>7)][h%8].class;d?c.fg=f:c.bg=f}else this.PALETTE_COLORS||c.setupPalette(),d?c.fg=this.PALETTE_COLORS[h]:c.bg=this.PALETTE_COLORS[h]}else if("2"===p&&l.length>=3){var m=parseInt(l.shift()),g=parseInt(l.shift()),v=parseInt(l.shift());if(m>=0&&m<=255&&g>=0&&g<=255&&v>=0&&v<=255){var x=m+", "+g+", "+v;r?d?(c.fg="ansi-truecolor",c.fg_truecolor=x):(c.bg="ansi-truecolor",c.bg_truecolor=x):d?c.fg=x:c.bg=x}}}}}return null===c.fg&&null===c.bg&&null===c.decoration||(a.fg=c.fg,a.bg=c.bg,a.fg_truecolor=c.fg_truecolor,a.bg_truecolor=c.bg_truecolor,a.decoration=c.decoration,a.was_processed=!0),a}},{key:"processChunk",value:function(e,t,n){var r=this;t=t||{};var i=this.processChunkJson(e,t,n);if(t.json)return i;if(i.isEmpty())return"";if(!i.was_processed)return i.content;var o=t.use_classes,a=[],s=[],l={},c=function(e){var t=[],n=void 0;for(n in e)e.hasOwnProperty(n)&&t.push("data-"+n+'="'+r.escapeForHtml(e[n])+'"');return t.length>0?" "+t.join(" "):""};return(i.fg&&(o?(s.push(i.fg+"-fg"),null!==i.fg_truecolor&&(l["ansi-truecolor-fg"]=i.fg_truecolor,i.fg_truecolor=null)):a.push("color:rgb("+i.fg+")")),i.bg&&(o?(s.push(i.bg+"-bg"),null!==i.bg_truecolor&&(l["ansi-truecolor-bg"]=i.bg_truecolor,i.bg_truecolor=null)):a.push("background-color:rgb("+i.bg+")")),i.decoration&&(o?s.push("ansi-"+i.decoration):"bold"===i.decoration?a.push("font-weight:bold"):"dim"===i.decoration?a.push("opacity:0.5"):"italic"===i.decoration?a.push("font-style:italic"):"reverse"===i.decoration?a.push("filter:invert(100%)"):"hidden"===i.decoration?a.push("visibility:hidden"):"strikethrough"===i.decoration?a.push("text-decoration:line-through"):a.push("text-decoration:"+i.decoration)),o)?'<span class="'+s.join(" ")+'"'+c(l)+">"+i.content+"</span>":'<span style="'+a.join(";")+'"'+c(l)+">"+i.content+"</span>"}}]),e}()},864812,(e,t,n)=>{function r(e){if(!e)return"";if(!/\r/.test(e))return e;for(e=e.replace(/\r+\n/gm,"\n");/\r./.test(e);)e=e.replace(/^([^\r\n]*)\r+([^\r\n]+)/gm,function(e,t,n){return n+t.slice(n.length)});return e}function i(e){for(var t=0,n=0;n<e.length;n++)e[t].length<=e[n].length&&(t=n);return t}function o(e){if(!/\r/.test(e))return e;for(var t=e.split("\r"),n=[];t.length>0;){var r=i(t);n.push(t[r]),t=t.slice(r+1)}return n.join("\r")}function a(e){if(!e)return"";if(!/\r/.test(e))return e;if(!/\n/.test(e))return o(e);var t=(e=e.replace(/\r+\n/gm,"\n")).lastIndexOf("\n");return r(e.slice(0,t))+"\n"+o(e.slice(t+1))}t.exports=r,t.exports.escapeCarriageReturn=r,t.exports.escapeCarriageReturnSafe=a},243025,(e,t,n)=>{"use strict";var r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(n,"__esModule",{value:!0});let o=r(e.r(270793)),a=e.r(864812),s=i(e.r(743124));function l(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=a.escapeCarriageReturn(p(e)),o.default.ansiToJson(e,{json:!0,remove_empty:!0,use_classes:t})}function c(e){let t="";return(e.bg&&(t+="".concat(e.bg,"-bg ")),e.fg&&(t+="".concat(e.fg,"-fg ")),e.decoration&&(t+="ansi-".concat(e.decoration," ")),""===t)?null:t=t.substring(0,t.length-1)}function u(e){let t={};return e.bg&&(t.backgroundColor="rgb(".concat(e.bg,")")),e.fg&&(t.color="rgb(".concat(e.fg,")")),t}function d(e,t,n,r){let i,o=t?null:u(n),a=t?c(n):null;if(!e)return s.createElement("span",{style:o,key:r,className:a},n.content);let l=[],d=/(\s|^)(https?:\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,p=0;for(;null!==(i=d.exec(n.content));){let[,e,t]=i,r=i.index+e.length;r>p&&l.push(n.content.substring(p,r));let o=t.startsWith("www.")?"http://".concat(t):t;l.push(s.createElement("a",{key:p,href:o,target:"_blank"},"".concat(t))),p=d.lastIndex}return p<n.content.length&&l.push(n.content.substring(p)),s.createElement("span",{style:o,key:r,className:a},l)}function p(e){let t=e;do t=(e=t).replace(/[^\n]\x08/gm,"");while(t.length<e.length)return e}n.default=function(e){let{className:t,useClasses:n,children:r,linkify:i}=e;return s.createElement("code",{className:t},l(null!=r?r:"",null!=n&&n).map(d.bind(null,null!=i&&i,null!=n&&n)))}},451885,110909,65151,__turbopack_context__=>{"use strict";var _path$8,_path$7,_path$6,_path2$5,_path$5,_path2$4,_path$4,_path2$3,_path$3,_path2$2,_path$2,_path2$1,_path$1,_path,_path2,__TURBOPACK__imported__module__936096__=__turbopack_context__.i(936096);let RotateCounterClockwise=(0,__TURBOPACK__imported__module__936096__.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 8C13.5 4.96643 11.0257 2.5 7.96452 2.5C5.42843 2.5 3.29365 4.19393 2.63724 6.5H5.25H6V8H5.25H0.75C0.335787 8 0 7.66421 0 7.25V2.75V2H1.5V2.75V5.23347C2.57851 2.74164 5.06835 1 7.96452 1C11.8461 1 15 4.13001 15 8C15 11.87 11.8461 15 7.96452 15C5.62368 15 3.54872 13.8617 2.27046 12.1122L1.828 11.5066L3.03915 10.6217L3.48161 11.2273C4.48831 12.6051 6.12055 13.5 7.96452 13.5C11.0257 13.5 13.5 11.0336 13.5 8Z" fill="currentColor"/>');__turbopack_context__.s(["RotateCounterClockwise",0,RotateCounterClockwise],451885);var __TURBOPACK__imported__module__509473__=__turbopack_context__.i(509473),__TURBOPACK__imported__module__743124__=__turbopack_context__.i(743124),__TURBOPACK__imported__module__509473__1=__TURBOPACK__imported__module__509473__,__TURBOPACK__imported__module__743124__1=__TURBOPACK__imported__module__743124__;function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function objectSize(e){return Array.isArray(e)?e.length:isObject(e)?Object.keys(e).length:0}function stringifyForCopying(e,t){if("string"==typeof e)return e;try{return JSON.stringify(e,(e,t)=>{switch(typeof t){case"bigint":return String(t)+"n";case"number":case"boolean":case"object":case"string":return t;default:return String(t)}},t)}catch(e){return"".concat(e.name,": ").concat(e.message)||"JSON.stringify failed"}}function isCollapsed(e,t,n,r,i,o){if(o&&void 0!==o.collapsed)return!!o.collapsed;if("boolean"==typeof r)return r;if("number"==typeof r&&t>r)return!0;let a=objectSize(e);if("function"==typeof r){let i=safeCall(r,[{node:e,depth:t,indexOrName:n,size:a}]);if("boolean"==typeof i)return i}return!!(Array.isArray(e)&&a>i||isObject(e)&&a>i)}function isCollapsed_largeArray(e,t,n,r,i,o){if(o&&void 0!==o.collapsed)return!!o.collapsed;if("boolean"==typeof r)return r;if("number"==typeof r&&t>r)return!0;let a=Math.ceil(e.length/100);if("function"==typeof r){let i=safeCall(r,[{node:e,depth:t,indexOrName:n,size:a}]);if("boolean"==typeof i)return i}return!!(Array.isArray(e)&&a>i||isObject(e)&&a>i)}function ifDisplay(e,t,n){return"boolean"==typeof e?e:"number"==typeof e&&!!(t>e)||"collapsed"===e&&!!n||"expanded"===e&&!n}function safeCall(e,t){try{return e(...t)}catch(e){reportError(e)}}function editableAdd(e){if(!0===e||isObject(e)&&!0===e.add)return!0}function editableEdit(e){if(!0===e||isObject(e)&&!0===e.edit)return!0}function editableDelete(e){if(!0===e||isObject(e)&&!0===e.delete)return!0}function isReactComponent(e){return"function"==typeof e}function customAdd(e){return!e||void 0===e.add||!!e.add}function customEdit(e){return!e||void 0===e.edit||!!e.edit}function customDelete(e){return!e||void 0===e.delete||!!e.delete}function customCopy(e){return!e||void 0===e.enableClipboard||!!e.enableClipboard}function customMatchesURL(e){return!e||void 0===e.matchesURL||!!e.matchesURL}function resolveEvalFailedNewValue(e,t){return"string"===e?t.trim().replace(/^\"([\s\S]+?)\"$/,"$1"):t}function _extends$8(){return(_extends$8=Object.assign.bind()).apply(this,arguments)}var SvgAngleDown=function(e){return __TURBOPACK__imported__module__743124__1.createElement("svg",_extends$8({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),_path$8||(_path$8=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M12.473 5.806a.666.666 0 0 0-.946 0L8.473 8.86a.667.667 0 0 1-.946 0L4.473 5.806a.667.667 0 1 0-.946.94l3.06 3.06a2 2 0 0 0 2.826 0l3.06-3.06a.667.667 0 0 0 0-.94Z"})))};function _extends$7(){return(_extends$7=Object.assign.bind()).apply(this,arguments)}var SvgCopy=function(e){return __TURBOPACK__imported__module__743124__1.createElement("svg",_extends$7({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$7||(_path$7=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M17.542 2.5h-4.75a3.963 3.963 0 0 0-3.959 3.958v4.75a3.963 3.963 0 0 0 3.959 3.959h4.75a3.963 3.963 0 0 0 3.958-3.959v-4.75A3.963 3.963 0 0 0 17.542 2.5Zm2.375 8.708a2.378 2.378 0 0 1-2.375 2.375h-4.75a2.378 2.378 0 0 1-2.375-2.375v-4.75a2.378 2.378 0 0 1 2.375-2.375h4.75a2.378 2.378 0 0 1 2.375 2.375v4.75Zm-4.75 6.334a3.963 3.963 0 0 1-3.959 3.958h-4.75A3.963 3.963 0 0 1 2.5 17.542v-4.75a3.963 3.963 0 0 1 3.958-3.959.791.791 0 1 1 0 1.584 2.378 2.378 0 0 0-2.375 2.375v4.75a2.378 2.378 0 0 0 2.375 2.375h4.75a2.378 2.378 0 0 0 2.375-2.375.792.792 0 1 1 1.584 0Z"})))};function _extends$6(){return(_extends$6=Object.assign.bind()).apply(this,arguments)}var SvgCopied=function(e){return __TURBOPACK__imported__module__743124__1.createElement("svg",_extends$6({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$6||(_path$6=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.755 3.755 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.755 3.755 0 0 0 17.25 3Zm2.25 14.25a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5a2.25 2.25 0 0 1 2.25 2.25v10.5Z"})),_path2$5||(_path2$5=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"#14C786",d:"M10.312 14.45 7.83 11.906a.625.625 0 0 0-.896 0 .659.659 0 0 0 0 .918l2.481 2.546a1.264 1.264 0 0 0 .896.381 1.237 1.237 0 0 0 .895-.38l5.858-6.011a.658.658 0 0 0 0-.919.625.625 0 0 0-.896 0l-5.857 6.01Z"})))};function CopyButton(e){let{node:t}=e,{customizeCopy:n}=(0,__TURBOPACK__imported__module__743124__1.useContext)(JsonViewContext),[r,i]=(0,__TURBOPACK__imported__module__743124__1.useState)(!1);return r?(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgCopied,{className:"json-view--copy",style:{display:"inline-block"}}):(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgCopy,{onClick:e=>{e.stopPropagation();let r=n(t);"string"==typeof r&&r&&navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),3e3)},className:"json-view--copy"})}function NameValue(e){let{indexOrName:t,value:n,depth:r,parent:i,deleteHandle:o,editHandle:a}=e;return(0,__TURBOPACK__imported__module__509473__1.jsxs)("div",Object.assign({className:"json-view--pair"},{children:[(0,__TURBOPACK__imported__module__509473__1.jsx)("span",Object.assign({className:"number"==typeof t?"json-view--index":"json-view--property"},{children:t})),":"," ",(0,__TURBOPACK__imported__module__509473__1.jsx)(JsonNode,{node:n,depth:r+1,deleteHandle:o,editHandle:a,parent:i,indexOrName:t})]}))}function _extends$5(){return(_extends$5=Object.assign.bind()).apply(this,arguments)}var SvgTrash=function(e){return __TURBOPACK__imported__module__743124__1.createElement("svg",_extends$5({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$5||(_path$5=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M18.75 6h-2.325a3.757 3.757 0 0 0-3.675-3h-1.5a3.757 3.757 0 0 0-3.675 3H5.25a.75.75 0 0 0 0 1.5H6v9.75A3.754 3.754 0 0 0 9.75 21h4.5A3.754 3.754 0 0 0 18 17.25V7.5h.75a.75.75 0 1 0 0-1.5Zm-7.5-1.5h1.5A2.255 2.255 0 0 1 14.872 6H9.128a2.255 2.255 0 0 1 2.122-1.5Zm5.25 12.75a2.25 2.25 0 0 1-2.25 2.25h-4.5a2.25 2.25 0 0 1-2.25-2.25V7.5h9v9.75Z"})),_path2$4||(_path2$4=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"#DA0000",d:"M10.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75ZM13.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75Z"})))};function _extends$4(){return(_extends$4=Object.assign.bind()).apply(this,arguments)}var SvgAddSquare=function(e){return __TURBOPACK__imported__module__743124__1.createElement("svg",_extends$4({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$4||(_path$4=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M21 6.75v10.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3h10.5A3.754 3.754 0 0 1 21 6.75Zm-1.5 0c0-1.24-1.01-2.25-2.25-2.25H6.75C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25V6.75Z"})),_path2$3||(_path2$3=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"#14C786",d:"M15 12.75a.75.75 0 1 0 0-1.5h-2.25V9a.75.75 0 1 0-1.5 0v2.25H9a.75.75 0 1 0 0 1.5h2.25V15a.75.75 0 1 0 1.5 0v-2.25H15Z"})))};function _extends$3(){return(_extends$3=Object.assign.bind()).apply(this,arguments)}var SvgDone=function(e){return __TURBOPACK__imported__module__743124__1.createElement("svg",_extends$3({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$3||(_path$3=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})),_path2$2||(_path2$2=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"#14C786",d:"m10.85 13.96-1.986-2.036a.5.5 0 0 0-.716 0 .527.527 0 0 0 0 .735l1.985 2.036a1.01 1.01 0 0 0 .717.305.99.99 0 0 0 .716-.305l4.686-4.808a.526.526 0 0 0 0-.735.5.5 0 0 0-.716 0l-4.687 4.809Z"})))};function _extends$2(){return(_extends$2=Object.assign.bind()).apply(this,arguments)}var SvgCancel=function(e){return __TURBOPACK__imported__module__743124__1.createElement("svg",_extends$2({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$2||(_path$2=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"#DA0000",d:"M15 9a.75.75 0 0 0-1.06 0L12 10.94 10.06 9A.75.75 0 0 0 9 10.06L10.94 12 9 13.94A.75.75 0 0 0 10.06 15L12 13.06 13.94 15A.75.75 0 0 0 15 13.94L13.06 12 15 10.06A.75.75 0 0 0 15 9Z"})),_path2$1||(_path2$1=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})))};function LargeArrayNode(e){let{originNode:t,node:n,depth:r,index:i,deleteHandle:o,customOptions:a,startIndex:s}=e,{enableClipboard:l,src:c,onEdit:u,onChange:d,forceUpdate:p,displaySize:h}=(0,__TURBOPACK__imported__module__743124__1.useContext)(JsonViewContext),[f,m]=(0,__TURBOPACK__imported__module__743124__1.useState)(!0),g=(0,__TURBOPACK__imported__module__743124__1.useCallback)((e,n,i)=>{t[e]=n,u&&u({newValue:n,oldValue:i,depth:r,src:c,indexOrName:e,parentType:"array"}),d&&d({type:"edit",depth:r,src:c,indexOrName:e,parentType:"array"}),p()},[n,u,d,p]),v=e=>{t.splice(e,1),p()},x=(0,__TURBOPACK__imported__module__509473__1.jsxs)(__TURBOPACK__imported__module__509473__1.Fragment,{children:[!f&&(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({onClick:()=>m(!0),className:"jv-size-chevron"},{children:[ifDisplay(h,r,f)&&(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({className:"jv-size"},{children:[objectSize(n)," Items"]})),(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgAngleDown,{className:"jv-chevron"})]})),!f&&l&&customCopy(a)&&(0,__TURBOPACK__imported__module__509473__1.jsx)(CopyButton,{node:n})]});return(0,__TURBOPACK__imported__module__509473__1.jsxs)("div",{children:[(0,__TURBOPACK__imported__module__509473__1.jsx)("span",{children:"["}),x,f?(0,__TURBOPACK__imported__module__509473__1.jsxs)("button",Object.assign({onClick:()=>m(!1),className:"jv-button"},{children:[s," ... ",s+n.length-1]})):(0,__TURBOPACK__imported__module__509473__1.jsx)("div",Object.assign({className:"jv-indent"},{children:n.map((e,t)=>(0,__TURBOPACK__imported__module__509473__1.jsx)(NameValue,{indexOrName:t+s,value:e,depth:r,parent:n,deleteHandle:v,editHandle:g},String(i)+String(t)))})),(0,__TURBOPACK__imported__module__509473__1.jsx)("span",{children:"]"})]})}function LargeArray(e){let{node:t,depth:n,deleteHandle:r,indexOrName:i,customOptions:o}=e,a=[];for(let e=0;e<t.length;e+=100)a.push(t.slice(e,e+100));let{collapsed:s,enableClipboard:l,collapseObjectsAfterLength:c,editable:u,onDelete:d,src:p,onAdd:h,onEdit:f,onChange:m,forceUpdate:g,displaySize:v}=(0,__TURBOPACK__imported__module__743124__1.useContext)(JsonViewContext),[x,y]=(0,__TURBOPACK__imported__module__743124__1.useState)(isCollapsed_largeArray(t,n,i,s,c,o));(0,__TURBOPACK__imported__module__743124__1.useEffect)(()=>{y(isCollapsed_largeArray(t,n,i,s,c,o))},[s,c]);let[b,w]=(0,__TURBOPACK__imported__module__743124__1.useState)(!1),j=()=>{w(!1),r&&r(i),d&&d({value:t,depth:n,src:p,indexOrName:i,parentType:"array"}),m&&m({type:"delete",depth:n,src:p,indexOrName:i,parentType:"array"})},[C,k]=(0,__TURBOPACK__imported__module__743124__1.useState)(!1),S=()=>{let e=t;e.push(null),h&&h({indexOrName:e.length-1,depth:n,src:p,parentType:"array"}),m&&m({type:"add",indexOrName:e.length-1,depth:n,src:p,parentType:"array"}),g()},N=b||C,E=()=>{w(!1),k(!1)},D=(0,__TURBOPACK__imported__module__509473__1.jsxs)(__TURBOPACK__imported__module__509473__1.Fragment,{children:[!x&&!N&&(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({onClick:()=>y(!0),className:"jv-size-chevron"},{children:[ifDisplay(v,n,x)&&(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({className:"jv-size"},{children:[t.length," Items"]})),(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgAngleDown,{className:"jv-chevron"})]})),N&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:C?S:j}),N&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:E}),!x&&!N&&l&&customCopy(o)&&(0,__TURBOPACK__imported__module__509473__1.jsx)(CopyButton,{node:t}),!x&&!N&&editableAdd(u)&&customAdd(o)&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgAddSquare,{className:"json-view--edit",onClick:()=>{S()}}),!x&&!N&&editableDelete(u)&&customDelete(o)&&r&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgTrash,{className:"json-view--edit",onClick:()=>w(!0)})]});return(0,__TURBOPACK__imported__module__509473__1.jsxs)(__TURBOPACK__imported__module__509473__1.Fragment,{children:[(0,__TURBOPACK__imported__module__509473__1.jsx)("span",{children:"["}),D,x?(0,__TURBOPACK__imported__module__509473__1.jsx)("button",Object.assign({onClick:()=>y(!1),className:"jv-button"},{children:"..."})):(0,__TURBOPACK__imported__module__509473__1.jsx)("div",Object.assign({className:"jv-indent"},{children:a.map((e,r)=>(0,__TURBOPACK__imported__module__509473__1.jsx)(LargeArrayNode,{originNode:t,node:e,depth:n,index:r,startIndex:100*r},String(i)+String(r)))})),(0,__TURBOPACK__imported__module__509473__1.jsx)("span",{children:"]"}),x&&ifDisplay(v,n,x)&&(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({onClick:()=>y(!1),className:"jv-size"},{children:[t.length," Items"]}))]})}function ObjectNode(e){let{node:t,depth:n,indexOrName:r,deleteHandle:i,customOptions:o}=e,{collapsed:a,enableClipboard:s,ignoreLargeArray:l,collapseObjectsAfterLength:c,editable:u,onDelete:d,src:p,onAdd:h,onEdit:f,onChange:m,forceUpdate:g,displaySize:v}=(0,__TURBOPACK__imported__module__743124__1.useContext)(JsonViewContext);if(!l&&Array.isArray(t)&&t.length>100)return(0,__TURBOPACK__imported__module__509473__1.jsx)(LargeArray,{node:t,depth:n,indexOrName:r,deleteHandle:i,customOptions:o});let x=isObject(t),[y,b]=(0,__TURBOPACK__imported__module__743124__1.useState)(isCollapsed(t,n,r,a,c,o));(0,__TURBOPACK__imported__module__743124__1.useEffect)(()=>{b(isCollapsed(t,n,r,a,c,o))},[a,c]);let w=(0,__TURBOPACK__imported__module__743124__1.useCallback)((e,r,i)=>{Array.isArray(t)?t[+e]=r:t&&(t[e]=r),f&&f({newValue:r,oldValue:i,depth:n,src:p,indexOrName:e,parentType:x?"object":"array"}),m&&m({type:"edit",depth:n,src:p,indexOrName:e,parentType:x?"object":"array"}),g()},[t,f,m,g]),j=e=>{Array.isArray(t)?t.splice(+e,1):t&&delete t[e],g()},[C,k]=(0,__TURBOPACK__imported__module__743124__1.useState)(!1),S=()=>{k(!1),i&&i(r),d&&d({value:t,depth:n,src:p,indexOrName:r,parentType:x?"object":"array"}),m&&m({type:"delete",depth:n,src:p,indexOrName:r,parentType:x?"object":"array"})},[N,E]=(0,__TURBOPACK__imported__module__743124__1.useState)(!1),D=(0,__TURBOPACK__imported__module__743124__1.useRef)(null),I=()=>{var e;if(x){let r=null==(e=D.current)?void 0:e.value;r&&(t[r]=null,D.current&&(D.current.value=""),E(!1),h&&h({indexOrName:r,depth:n,src:p,parentType:"object"}),m&&m({type:"add",indexOrName:r,depth:n,src:p,parentType:"object"}))}else if(Array.isArray(t)){let e=t;e.push(null),h&&h({indexOrName:e.length-1,depth:n,src:p,parentType:"array"}),m&&m({type:"add",indexOrName:e.length-1,depth:n,src:p,parentType:"array"})}g()},A=e=>{"Enter"===e.key?(e.preventDefault(),I()):"Escape"===e.key&&M()},T=C||N,M=()=>{k(!1),E(!1)},L=(0,__TURBOPACK__imported__module__509473__1.jsxs)(__TURBOPACK__imported__module__509473__1.Fragment,{children:[!y&&!T&&(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({onClick:()=>b(!0),className:"jv-size-chevron"},{children:[ifDisplay(v,n,y)&&(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({className:"jv-size"},{children:[objectSize(t)," Items"]})),(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgAngleDown,{className:"jv-chevron"})]})),N&&x&&(0,__TURBOPACK__imported__module__509473__1.jsx)("input",{className:"json-view--input",placeholder:"property",ref:D,onKeyDown:A}),T&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:N?I:S}),T&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:M}),!y&&!T&&s&&customCopy(o)&&(0,__TURBOPACK__imported__module__509473__1.jsx)(CopyButton,{node:t}),!y&&!T&&editableAdd(u)&&customAdd(o)&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgAddSquare,{className:"json-view--edit",onClick:()=>{x?(E(!0),setTimeout(()=>{var e;return null==(e=D.current)?void 0:e.focus()})):I()}}),!y&&!T&&editableDelete(u)&&customDelete(o)&&i&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgTrash,{className:"json-view--edit",onClick:()=>k(!0)})]});return Array.isArray(t)?(0,__TURBOPACK__imported__module__509473__1.jsxs)(__TURBOPACK__imported__module__509473__1.Fragment,{children:[(0,__TURBOPACK__imported__module__509473__1.jsx)("span",{children:"["}),L,y?(0,__TURBOPACK__imported__module__509473__1.jsx)("button",Object.assign({onClick:()=>b(!1),className:"jv-button"},{children:"..."})):(0,__TURBOPACK__imported__module__509473__1.jsx)("div",Object.assign({className:"jv-indent"},{children:t.map((e,i)=>(0,__TURBOPACK__imported__module__509473__1.jsx)(NameValue,{indexOrName:i,value:e,depth:n,parent:t,deleteHandle:j,editHandle:w},String(r)+String(i)))})),(0,__TURBOPACK__imported__module__509473__1.jsx)("span",{children:"]"}),y&&ifDisplay(v,n,y)&&(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({onClick:()=>b(!1),className:"jv-size"},{children:[objectSize(t)," Items"]}))]}):x?(0,__TURBOPACK__imported__module__509473__1.jsxs)(__TURBOPACK__imported__module__509473__1.Fragment,{children:[(0,__TURBOPACK__imported__module__509473__1.jsx)("span",{children:"{"}),L,y?(0,__TURBOPACK__imported__module__509473__1.jsx)("button",Object.assign({onClick:()=>b(!1),className:"jv-button"},{children:"..."})):(0,__TURBOPACK__imported__module__509473__1.jsx)("div",Object.assign({className:"jv-indent"},{children:Object.entries(t).map(e=>{let[i,o]=e;return(0,__TURBOPACK__imported__module__509473__1.jsx)(NameValue,{indexOrName:i,value:o,depth:n,parent:t,deleteHandle:j,editHandle:w},String(r)+String(i))})})),(0,__TURBOPACK__imported__module__509473__1.jsx)("span",{children:"}"}),y&&ifDisplay(v,n,y)&&(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({onClick:()=>b(!1),className:"jv-size"},{children:[objectSize(t)," Items"]}))]}):null}let LongString=__TURBOPACK__imported__module__743124__1.default.forwardRef((e,t)=>{let{str:n,className:r,ctrlClick:i}=e,{collapseStringMode:o,collapseStringsAfterLength:a,customizeCollapseStringUI:s}=(0,__TURBOPACK__imported__module__743124__1.useContext)(JsonViewContext),[l,c]=(0,__TURBOPACK__imported__module__743124__1.useState)(!0),u=(0,__TURBOPACK__imported__module__743124__1.useRef)(null);a=a>0?a:0;let d=n.replace(/\s+/g," "),p="function"==typeof s?s(d,l):"string"==typeof s?s:"...",h=e=>{var t;if((e.ctrlKey||e.metaKey)&&i)i(e);else{let e=window.getSelection();if(e&&e.anchorOffset!==e.focusOffset&&(null==(t=e.anchorNode)?void 0:t.parentElement)===u.current)return;c(!l)}};if(n.length<=a)return(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({ref:u,className:r,onClick:i},{children:['"',n,'"']}));if("address"===o)return n.length<=10?(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({ref:u,className:r,onClick:i},{children:['"',n,'"']})):(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({ref:u,onClick:h,className:r+" cursor-pointer"},{children:['"',l?[d.slice(0,6),p,d.slice(-4)]:n,'"']}));if("directly"===o)return(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({ref:u,onClick:h,className:r+" cursor-pointer"},{children:['"',l?[d.slice(0,a),p]:n,'"']}));if("word"===o){let e=a,t=a+1,i=d,o=1;for(;;){if(/\W/.test(n[e])){i=n.slice(0,e);break}if(/\W/.test(n[t])){i=n.slice(0,t);break}if(6===o){i=n.slice(0,a);break}o++,e--,t++}return(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({ref:u,onClick:h,className:r+" cursor-pointer"},{children:['"',l?[i,p]:n,'"']}))}return(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({ref:u,className:r},{children:['"',n,'"']}))});function _extends$1(){return(_extends$1=Object.assign.bind()).apply(this,arguments)}var SvgEdit=function(e){return __TURBOPACK__imported__module__743124__1.createElement("svg",_extends$1({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path$1||(_path$1=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.754 3.754 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.754 3.754 0 0 0 17.25 3Zm2.25 14.25c0 1.24-1.01 2.25-2.25 2.25H6.75c-1.24 0-2.25-1.01-2.25-2.25V6.75c0-1.24 1.01-2.25 2.25-2.25h10.5c1.24 0 2.25 1.01 2.25 2.25v10.5Zm-6.09-9.466-5.031 5.03a2.981 2.981 0 0 0-.879 2.121v1.19c0 .415.336.75.75.75h1.19c.8 0 1.554-.312 2.12-.879l5.03-5.03a2.252 2.252 0 0 0 0-3.182c-.85-.85-2.331-.85-3.18 0Zm-2.91 7.151c-.28.28-.666.44-1.06.44H9v-.44c0-.4.156-.777.44-1.06l3.187-3.188 1.06 1.061-3.187 3.188Zm5.03-5.03-.782.783-1.06-1.061.782-.782a.766.766 0 0 1 1.06 0 .75.75 0 0 1 0 1.06Z"})))};function _extends(){return(_extends=Object.assign.bind()).apply(this,arguments)}var SvgLink=function(e){return __TURBOPACK__imported__module__743124__1.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),_path||(_path=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M6.75 3h5.5v1.5h-5.5C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25v-5.5H21v5.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3Z"})),_path2||(_path2=__TURBOPACK__imported__module__743124__1.createElement("path",{fill:"currentColor",d:"M20.013 3h-3.946a.987.987 0 0 0 0 1.973h1.564l-6.342 6.342a1.004 1.004 0 0 0 0 1.396 1.004 1.004 0 0 0 1.396 0l6.342-6.342v1.564a.987.987 0 0 0 1.973 0V3.987A.987.987 0 0 0 20.013 3Z"})))};function JsonNode(param){let customReturn,{node,depth,deleteHandle:_deleteHandle,indexOrName,parent,editHandle}=param,{collapseStringsAfterLength,enableClipboard,editable,src,onDelete,onChange,customizeNode,matchesURL,urlRegExp}=(0,__TURBOPACK__imported__module__743124__1.useContext)(JsonViewContext);if("function"==typeof customizeNode&&(customReturn=safeCall(customizeNode,[{node,depth,indexOrName}])),customReturn){if((0,__TURBOPACK__imported__module__743124__1.isValidElement)(customReturn))return customReturn;else if(isReactComponent(customReturn)){let CustomComponent=customReturn;return(0,__TURBOPACK__imported__module__509473__1.jsx)(CustomComponent,{node:node,depth:depth,indexOrName:indexOrName})}}if(Array.isArray(node)||isObject(node))return(0,__TURBOPACK__imported__module__509473__1.jsx)(ObjectNode,{node:node,depth:depth,indexOrName:indexOrName,deleteHandle:_deleteHandle,customOptions:"object"==typeof customReturn?customReturn:void 0});{let type=typeof node,[editing,setEditing]=(0,__TURBOPACK__imported__module__743124__1.useState)(!1),[deleting,setDeleting]=(0,__TURBOPACK__imported__module__743124__1.useState)(!1),valueRef=(0,__TURBOPACK__imported__module__743124__1.useRef)(null),edit=()=>{setEditing(!0),setTimeout(()=>{var e,t;null==(e=window.getSelection())||e.selectAllChildren(valueRef.current),null==(t=valueRef.current)||t.focus()})},done=(0,__TURBOPACK__imported__module__743124__1.useCallback)(()=>{let newValue=valueRef.current.innerText;try{("{}"===newValue||"[]"===newValue)&&(newValue="(".concat(newValue,")"));let evalValue=eval(newValue);editHandle&&editHandle(indexOrName,evalValue,node)}catch(e){let trimmedStringValue=resolveEvalFailedNewValue(type,newValue);editHandle&&editHandle(indexOrName,trimmedStringValue,node)}setEditing(!1)},[editHandle]),cancel=()=>{setEditing(!1),setDeleting(!1)},deleteHandle=()=>{setDeleting(!1),_deleteHandle&&_deleteHandle(indexOrName),onDelete&&onDelete({value:node,depth,src,indexOrName:indexOrName,parentType:Array.isArray(parent)?"array":"object"}),onChange&&onChange({depth,src,indexOrName:indexOrName,parentType:Array.isArray(parent)?"array":"object",type:"delete"})},handleKeyDown=(0,__TURBOPACK__imported__module__743124__1.useCallback)(e=>{"Enter"===e.key?(e.preventDefault(),done()):"Escape"===e.key&&cancel()},[done]),isEditing=editing||deleting,ctrlClick=!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle?e=>{(e.ctrlKey||e.metaKey)&&edit()}:void 0,Icons=(0,__TURBOPACK__imported__module__509473__1.jsxs)(__TURBOPACK__imported__module__509473__1.Fragment,{children:[isEditing&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:deleting?deleteHandle:done}),isEditing&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:cancel}),!isEditing&&enableClipboard&&customCopy(customReturn)&&(0,__TURBOPACK__imported__module__509473__1.jsx)(CopyButton,{node:node}),!isEditing&&matchesURL&&"string"===type&&urlRegExp.test(node)&&customMatchesURL(customReturn)&&(0,__TURBOPACK__imported__module__509473__1.jsx)("a",Object.assign({href:node,target:"_blank",className:"json-view--link"},{children:(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgLink,{})})),!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgEdit,{className:"json-view--edit",onClick:edit}),!isEditing&&editableDelete(editable)&&customDelete(customReturn)&&_deleteHandle&&(0,__TURBOPACK__imported__module__509473__1.jsx)(SvgTrash,{className:"json-view--edit",onClick:()=>setDeleting(!0)})]}),className="json-view--string";switch("string"==typeof(null==customReturn?void 0:customReturn.className)&&(className+=" "+customReturn.className),type){case"number":case"bigint":className="json-view--number";break;case"boolean":className="json-view--boolean";break;case"object":className="json-view--null"}deleting&&(className+=" json-view--deleting");let displayValue=String(node);"bigint"===type&&(displayValue+="n");let EditingElement=(0,__TURBOPACK__imported__module__743124__1.useMemo)(()=>(0,__TURBOPACK__imported__module__509473__1.jsx)("span",{contentEditable:!0,className:className,dangerouslySetInnerHTML:{__html:"string"===type?'"'.concat(displayValue,'"'):displayValue},ref:valueRef,onKeyDown:handleKeyDown}),[displayValue,type,handleKeyDown]);return"string"===type?(0,__TURBOPACK__imported__module__509473__1.jsxs)(__TURBOPACK__imported__module__509473__1.Fragment,{children:[editing?EditingElement:node.length>collapseStringsAfterLength?(0,__TURBOPACK__imported__module__509473__1.jsx)(LongString,{str:node,ref:valueRef,className:className,ctrlClick:ctrlClick}):(0,__TURBOPACK__imported__module__509473__1.jsxs)("span",Object.assign({className:className,onClick:ctrlClick},{children:['"',displayValue,'"']})),Icons]}):(0,__TURBOPACK__imported__module__509473__1.jsxs)(__TURBOPACK__imported__module__509473__1.Fragment,{children:[editing?EditingElement:(0,__TURBOPACK__imported__module__509473__1.jsx)("span",Object.assign({className:className,onClick:ctrlClick},{children:displayValue})),Icons]})}}let defaultURLRegExp=/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/,JsonViewContext=(0,__TURBOPACK__imported__module__743124__1.createContext)({src:void 0,collapseStringsAfterLength:99,collapseStringMode:"directly",customizeCollapseStringUI:void 0,collapseObjectsAfterLength:20,collapsed:!1,enableClipboard:!0,editable:!1,onEdit:void 0,onDelete:void 0,onAdd:void 0,onChange:void 0,forceUpdate:()=>{},customizeNode:void 0,customizeCopy:()=>{},displaySize:void 0,matchesURL:!1,urlRegExp:defaultURLRegExp,ignoreLargeArray:!1});function JsonView(e){let{src:t,collapseStringsAfterLength:n=99,collapseStringMode:r="directly",customizeCollapseStringUI:i,collapseObjectsAfterLength:o=99,collapsed:a,enableClipboard:s=!0,editable:l=!1,onEdit:c,onDelete:u,onAdd:d,onChange:p,dark:h=!1,theme:f="default",customizeNode:m,customizeCopy:g=stringifyForCopying,displaySize:v,style:x,className:y,matchesURL:b=!1,urlRegExp:w=defaultURLRegExp,ignoreLargeArray:j=!1}=e,[C,k]=(0,__TURBOPACK__imported__module__743124__1.useState)(0),S=(0,__TURBOPACK__imported__module__743124__1.useCallback)(()=>k(e=>++e),[]),[N,E]=(0,__TURBOPACK__imported__module__743124__1.useState)(t);return(0,__TURBOPACK__imported__module__743124__1.useEffect)(()=>E(t),[t]),(0,__TURBOPACK__imported__module__509473__1.jsx)(JsonViewContext.Provider,Object.assign({value:{src:N,collapseStringsAfterLength:n,collapseStringMode:r,customizeCollapseStringUI:i,collapseObjectsAfterLength:o,collapsed:a,enableClipboard:s,editable:l,onEdit:c,onDelete:u,onAdd:d,onChange:p,forceUpdate:S,customizeNode:m,customizeCopy:g,displaySize:v,matchesURL:b,urlRegExp:w,ignoreLargeArray:j}},{children:(0,__TURBOPACK__imported__module__509473__1.jsx)("code",Object.assign({className:"json-view"+(h?" dark":"")+(f&&"default"!==f?" json-view_"+f:"")+(y?" "+y:""),style:x},{children:(0,__TURBOPACK__imported__module__509473__1.jsx)(JsonNode,{node:N,depth:1,editHandle:(e,t,n)=>{E(t),c&&c({newValue:t,oldValue:n,depth:1,src:N,indexOrName:e,parentType:null}),p&&p({type:"edit",depth:1,src:N,indexOrName:e,parentType:null})},deleteHandle:()=>{E(void 0),u&&u({value:N,depth:1,src:N,indexOrName:"",parentType:null}),p&&p({depth:1,src:N,indexOrName:"",parentType:null,type:"delete"})}})}))}))}var __TURBOPACK__imported__module__243025__=__turbopack_context__.i(243025),__TURBOPACK__imported__module__304649__=__turbopack_context__.i(304649),__TURBOPACK__imported__module__543017__=__turbopack_context__.i(543017),__TURBOPACK__imported__module__499030__=__turbopack_context__.i(499030),__TURBOPACK__imported__module__480814__=__turbopack_context__.i(480814),__TURBOPACK__imported__module__113654__=__turbopack_context__.i(113654),__TURBOPACK__imported__module__681816__=__turbopack_context__.i(681816),__TURBOPACK__imported__module__633577__=__turbopack_context__.i(633577),__TURBOPACK__imported__module__242759__=__turbopack_context__.i(242759);function getEventStyle(e){switch(e){case"error":return"text-v0-red-900! bg-v0-red-200 hover:bg-v0-red-300";case"warn":return"text-v0-amber-900 bg-v0-amber-300 hover:bg-v0-amber-400";default:return"text-gray-700 hover:bg-gray-100"}}function CodeOutputAttachmentView(e){let{value:t}=e;return Array.isArray(t)?(0,__TURBOPACK__imported__module__509473__.jsx)("div",{className:"flex flex-col gap-2 font-mono text-[13px] leading-4 text-v0-gray-1000",children:[...t].map((e,t)=>{let[n,r]=e;return n.startsWith("image/")?(0,__TURBOPACK__imported__module__509473__.jsx)("img",{alt:"Attachment ".concat(t),src:"data:".concat(n,";base64,").concat(r)},t):n.startsWith("text/")||n.startsWith("application/")?(0,__TURBOPACK__imported__module__509473__.jsx)("div",{className:"whitespace-pre-wrap",children:r},t):null})}):null}let JsonRowView=(0,__TURBOPACK__imported__module__743124__.memo)(e=>{let{src:t,className:n,style:r}=e;return"string"==typeof t?(0,__TURBOPACK__imported__module__509473__.jsx)("span",{className:(0,__TURBOPACK__imported__module__304649__.cn)("whitespace-break-spaces break-all leading-[1.12] text-v0-gray-1000",n),children:(0,__TURBOPACK__imported__module__509473__.jsx)(__TURBOPACK__imported__module__243025__.default,{children:t})}):(0,__TURBOPACK__imported__module__509473__.jsx)(JsonView,{className:(0,__TURBOPACK__imported__module__304649__.cn)("leading-4 text-v0-gray-1000 [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-v0-gray-900 [&_.jv-indent]:pl-4",n),collapsed:1,editable:!1,enableClipboard:!1,src:t,theme:"default",style:r})});JsonRowView.displayName="JsonRowView";let CodeOutput=(0,__TURBOPACK__imported__module__743124__.memo)(e=>{let{value:t,className:n,inline:r}=e;return(0,__TURBOPACK__imported__module__509473__.jsx)("output",{"aria-label":"Code execution output",className:(0,__TURBOPACK__imported__module__304649__.cn)("codeblock not-prose relative flex w-full flex-col overflow-y-auto font-mono text-[13px]",n),children:t?"error"in t?(0,__TURBOPACK__imported__module__509473__.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,__TURBOPACK__imported__module__509473__.jsx)(__TURBOPACK__imported__module__681816__.ErrorComponent,{error:Error(t.error,{cause:"code-execution-error"})})}):(0,__TURBOPACK__imported__module__509473__.jsxs)(__TURBOPACK__imported__module__509473__.Fragment,{children:[t.stdout.length?t.stdout.map((e,t)=>(0,__TURBOPACK__imported__module__509473__.jsx)(CodeOutputMessage,{inline:r,children:e.map((e,n)=>(0,__TURBOPACK__imported__module__509473__.jsx)(JsonRowView,{src:e,className:"leading-normal"},"".concat(t,"-").concat(n,"-stdout")))},"".concat(t,"-stdout"))):null,t.stderr.length?t.stderr.map((e,t)=>(0,__TURBOPACK__imported__module__509473__.jsx)(CodeOutputMessage,{className:r?getEventStyle("error"):void 0,inline:r,children:e.map((e,n)=>(0,__TURBOPACK__imported__module__509473__.jsx)(JsonRowView,{className:(0,__TURBOPACK__imported__module__304649__.cn)("leading-normal [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-v0-gray-900 [&_.jv-indent]:pl-4",r&&"text-v0-red-800"),src:e,style:{color:"rgb(192,27,93)"}},"".concat(t,"-").concat(n,"-stderr")))},"".concat(t,"-stderr"))):null,t.returned?(0,__TURBOPACK__imported__module__509473__.jsx)(CodeOutputMessage,{inline:r,children:"$$attachments"in t.returned?t.returned.$$attachments.length>0?(0,__TURBOPACK__imported__module__509473__.jsx)(CodeOutputAttachmentView,{value:t.returned.$$attachments}):null:(0,__TURBOPACK__imported__module__509473__.jsx)(JsonRowView,{className:"leading-normal [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-v0-gray-900 [&_.jv-indent]:pl-4",src:t.returned})}):null]}):null})});function CodeOutputMessage(e){let{children:t,fileName:n,isCopied:r,handleCopy:i,handleDownload:o,handleFileOpen:a,inline:s,className:l}=e,{scp:c}=(0,__TURBOPACK__imported__module__242759__.useFlags)();return null===t?null:(0,__TURBOPACK__imported__module__509473__.jsxs)("div",{className:(0,__TURBOPACK__imported__module__304649__.cn)("border-v0-alpha-400 group/code-output-message flex w-full flex-col gap-2 border-b p-2 text-[13px] last:border-b-0",!s&&"pl-2.5",l),children:[(0,__TURBOPACK__imported__module__509473__.jsxs)("div",{className:"relative flex w-full items-baseline gap-3",children:[!s&&(0,__TURBOPACK__imported__module__509473__.jsx)("div",{"aria-hidden":!0,className:"select-none text-v0-pink-700 dark:text-v0-pink-500",children:(0,__TURBOPACK__imported__module__509473__.jsx)(__TURBOPACK__imported__module__499030__.ChevronRight,{size:8})}),n?(0,__TURBOPACK__imported__module__509473__.jsx)("button",{className:"codeblock not-prose line-clamp-1 font-mono text-v0-blue-700 underline",onClick:a,children:n}):t,c&&!s&&(0,__TURBOPACK__imported__module__509473__.jsx)("div",{className:(0,__TURBOPACK__imported__module__304649__.cn)("pointer-events-none absolute inset-y-0 right-0 z-10"),children:(0,__TURBOPACK__imported__module__509473__.jsxs)(__TURBOPACK__imported__module__633577__.ActionGroup,{className:"pointer-events-auto sticky top-3 flex -translate-y-1.5 opacity-0 group-hover:opacity-100 has-data-[state='delayed-open']:opacity-100 has-data-[state='instant-open']:opacity-100 has-data-[state=open]:opacity-100 md:top-5 in-data-[touch-active=true]:opacity-100",children:[(0,__TURBOPACK__imported__module__509473__.jsx)(__TURBOPACK__imported__module__633577__.Action,{"aria-label":"Copy",onClick:i,tooltip:"Copy",children:(0,__TURBOPACK__imported__module__509473__.jsx)("span",{"aria-hidden":!0,children:r?(0,__TURBOPACK__imported__module__509473__.jsx)(__TURBOPACK__imported__module__543017__.Check,{}):(0,__TURBOPACK__imported__module__509473__.jsx)(__TURBOPACK__imported__module__480814__.Copy,{className:"pointer-events-none"})})}),(0,__TURBOPACK__imported__module__509473__.jsx)(__TURBOPACK__imported__module__633577__.ActionSeparator,{className:"author-action"}),(0,__TURBOPACK__imported__module__509473__.jsx)(__TURBOPACK__imported__module__633577__.Action,{"aria-label":"Download",onClick:o,tooltip:"Download",children:(0,__TURBOPACK__imported__module__509473__.jsx)("span",{"aria-hidden":!0,children:(0,__TURBOPACK__imported__module__509473__.jsx)(__TURBOPACK__imported__module__113654__.Download,{className:"pointer-events-none"})})})]})})]}),n&&(0,__TURBOPACK__imported__module__509473__.jsx)("div",{className:"pl-5",children:t})]})}CodeOutput.displayName="CodeOutput",__turbopack_context__.s(["CodeOutput",()=>CodeOutput,"CodeOutputMessage",()=>CodeOutputMessage,"JsonRowView",()=>JsonRowView,"getEventStyle",()=>getEventStyle],110909);var __TURBOPACK__imported__module__53223__=__turbopack_context__.i(53223);function downloadAsFile(e){let t=getOutputString(e),n=new Blob([t],{type:"text/plain"}),r=URL.createObjectURL(n),i=document.createElement("a");return i.download="output.txt",i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),(0,__TURBOPACK__imported__module__53223__.track)("DownloadOutputExecutable",{output:t})}function downloadAttachment(e,t){try{let n=e.startsWith("image/")&&!e.includes("svg")?new Blob([Uint8Array.from(atob(t),e=>e.charCodeAt(0))],{type:e}):new Blob([t],{type:e}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r;let o=e.split("/")[1]||"txt";return i.download="output.".concat(o.startsWith("svg")?"svg":o),i.click(),URL.revokeObjectURL(r),(0,__TURBOPACK__imported__module__53223__.track)("DownloadOutputExecutable",{output:"".concat(e," attachment")})}catch(e){console.error("error downloading image: ",e)}}let getOutputString=e=>{if(!e)return"No output.";if("error"in e)return"Errored output. "+e.error;if(!Array.isArray(e.stdout)||!Array.isArray(e.stderr))return"Malformed output.";if(0===e.stdout.length&&0===e.stderr.length)return"Empty output.";let t=e.stdout.map(e=>e.map(e=>JSON.stringify(e,void 0,2)).join(" ")).join("\n"),n=e.stderr.map(e=>e.map(e=>JSON.stringify(e,void 0,2)).join(" ")).join("\n");return 0===e.stderr.length?t:0===e.stdout.length?"# stderr\n\n"+n:"# stdout\n\n"+t+"\n\n# stderr\n\n"+n};__turbopack_context__.s(["downloadAsFile",()=>downloadAsFile,"downloadAttachment",()=>downloadAttachment,"getOutputString",()=>getOutputString],65151)},18441,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(979865),i=e.i(346970);let o=(0,n.createContext)({sqlExecutionStates:{},updateSqlExecutionState:()=>{}});function a(e){let t=(0,n.useContext)(o);if(!t)throw Error("useSqlExecutionState must be used within a SqlExecutionProvider");return{sqlExecutionState:e?t.sqlExecutionStates[e]:void 0,updateSqlExecutionState:n=>{e&&t.updateSqlExecutionState(e,n)},allSqlExecutionStates:t.sqlExecutionStates}}function s(e){let{children:a}=e,[s,l]=(0,n.useState)({}),c=(0,r.useParams)().chatId,u=(e,t)=>{l(n=>({...n,[e]:t}))},{data:d}=(0,i.default)(c?["blocks-execution-states",c]:null,{revalidateOnFocus:!1,revalidateOnReconnect:!1});return(0,n.useEffect)(()=>{d&&l(d)},[d]),(0,t.jsx)(o.Provider,{value:{sqlExecutionStates:s,updateSqlExecutionState:u},children:a})}e.s(["SqlExecutionProvider",()=>s,"useSqlExecutionState",()=>a])},259112,e=>{"use strict";class t{options(e){return e&&(this.selfOptions=e),this.selfOptions}pipe(e,t){let n=t;if("string"==typeof e)if(void 0===n)return this.pipes[e];else this.pipes[e]=n;if(e&&e.name){if((n=e).processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}process(e,t){let n,r=e;r.options=this.options();let i=t||e.pipe||"default";for(;i;)void 0!==r.nextAfterChildren&&(r.next=r.nextAfterChildren,r.nextAfterChildren=null),"string"==typeof i&&(i=this.pipe(i)),i.process(r),n=i,i=null,r&&r.next&&(i=(r=r.next).pipe||n);return r.hasResult?r.result:void 0}constructor(e){this.selfOptions=e||{},this.pipes={}}}let n=t;class r{process(e){if(!this.processor)throw Error("add this pipe to a processor before using it");let t=this.debug,n=this.filters.length,r=e;for(let e=0;e<n;e++){let n=this.filters[e];if(t&&this.log("filter: ".concat(n.filterName)),n(r),"object"==typeof r&&r.exiting){r.exiting=!1;break}}!r.next&&this.resultCheck&&this.resultCheck(r)}log(e){console.log("[jsondiffpatch] ".concat(this.name," pipe, ").concat(e))}append(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.filters.push(...t),this}prepend(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.filters.unshift(...t),this}indexOf(e){if(!e)throw Error("a filter name is required");for(let t=0;t<this.filters.length;t++)if(this.filters[t].filterName===e)return t;throw Error("filter not found: ".concat(e))}list(){return this.filters.map(e=>e.filterName)}after(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.indexOf(e);return this.filters.splice(i+1,0,...n),this}before(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.indexOf(e);return this.filters.splice(i,0,...n),this}replace(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.indexOf(e);return this.filters.splice(i,1,...n),this}remove(e){let t=this.indexOf(e);return this.filters.splice(t,1),this}clear(){return this.filters.length=0,this}shouldHaveResult(e){if(!1===e){this.resultCheck=null;return}if(!this.resultCheck)return this.resultCheck=e=>{if(!e.hasResult){console.log(e);let t=Error("".concat(this.name," failed"));throw t.noResult=!0,t}},this}constructor(e){this.name=e,this.filters=[]}}let i=r;class o{setResult(e){return this.result=e,this.hasResult=!0,this}exit(){return this.exiting=!0,this}push(e,t){return e.parent=this,void 0!==t&&(e.childName=t),e.root=this.root||this,e.options=e.options||this.options,this.children?(this.children[this.children.length-1].next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}}function a(e){let t=/^\/(.*)\/([gimyu]*)$/.exec(e.toString());return new RegExp(t[1],t[2])}function s(e){if("object"!=typeof e)return e;if(null===e)return null;if(Array.isArray(e))return e.map(s);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return a(e);let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=s(e[n]));return t}class l extends o{setResult(e){if(this.options.cloneDiffValues&&"object"==typeof e){let t="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:s;"object"==typeof e[0]&&(e[0]=t(e[0])),"object"==typeof e[1]&&(e[1]=t(e[1]))}return super.setResult(e)}constructor(e,t){super(),this.left=e,this.right=t,this.pipe="diff"}}let c=l;class u extends o{constructor(e,t){super(),this.left=e,this.delta=t,this.pipe="patch"}}let d=u;class p extends o{constructor(e){super(),this.delta=e,this.pipe="reverse"}}let h=p,f=function(e){if(e.left===e.right)return void e.setResult(void 0).exit();if(void 0===e.left){if("function"==typeof e.right)throw Error("functions are not supported");e.setResult([e.right]).exit();return}if(void 0===e.right)return void e.setResult([e.left,0,0]).exit();if("function"==typeof e.left||"function"==typeof e.right)throw Error("functions are not supported");return(e.leftType=null===e.left?"null":typeof e.left,e.rightType=null===e.right?"null":typeof e.right,e.leftType!==e.rightType||"boolean"===e.leftType||"number"===e.leftType||("object"===e.leftType&&(e.leftIsArray=Array.isArray(e.left)),"object"===e.rightType&&(e.rightIsArray=Array.isArray(e.right)),e.leftIsArray!==e.rightIsArray))?void e.setResult([e.left,e.right]).exit():void(e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit()))};f.filterName="trivial";let m=function(e){if(void 0===e.delta)return void e.setResult(e.left).exit();if(e.nested=!Array.isArray(e.delta),e.nested)return;let t=e.delta;if(1===t.length)return void e.setResult(t[0]).exit();if(2===t.length){if(e.left instanceof RegExp){let n=/^\/(.*)\/([gimyu]+)$/.exec(t[1]);if(n)return void e.setResult(new RegExp(n[1],n[2])).exit()}e.setResult(t[1]).exit();return}3===t.length&&0===t[2]&&e.setResult(void 0).exit()};m.filterName="trivial";let g=function(e){if(void 0===e.delta)return void e.setResult(e.delta).exit();if(e.nested=!Array.isArray(e.delta),e.nested)return;let t=e.delta;return 1===t.length?void e.setResult([t[0],0,0]).exit():2===t.length?void e.setResult([t[1],t[0]]).exit():void(3===t.length&&0===t[2]&&e.setResult([t[0]]).exit())};g.filterName="trivial";let v=e=>{let t;if(!e||!e.children)return;let n=e.children.length,r=e.result;for(let i=0;i<n;i++)void 0!==(t=e.children[i]).result&&((r=r||{})[t.childName]=t.result);r&&e.leftIsArray&&(r._t="a"),e.setResult(r).exit()};v.filterName="collectChildren";let x=e=>{let t,n;if(e.leftIsArray||"object"!==e.leftType)return;let r=e.left,i=e.right,o=e.options.propertyFilter;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(!o||o(t,e))&&(n=new c(r[t],i[t]),e.push(n,t));for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(!o||o(t,e))&&void 0===r[t]&&(n=new c(void 0,i[t]),e.push(n,t));if(!e.children||0===e.children.length)return void e.setResult(void 0).exit();e.exit()};x.filterName="objects";let y=function(e){let t,n;if(!e.nested)return;let r=e.delta;if(r._t)return;let i=r;for(t in i)n=new d(e.left[t],i[t]),e.push(n,t);e.exit()};y.filterName="objects";let b=function(e){let t;if(!e||!e.children||e.delta._t)return;let n=e.left,r=e.children.length;for(let i=0;i<r;i++){let r=(t=e.children[i]).childName;Object.prototype.hasOwnProperty.call(e.left,r)&&void 0===t.result?delete n[r]:n[r]!==t.result&&(n[r]=t.result)}e.setResult(n).exit()};b.filterName="collectChildren";let w=function(e){let t,n;if(!e.nested||e.delta._t)return;let r=e.delta;for(t in r)n=new h(r[t]),e.push(n,t);e.exit()};w.filterName="objects";let j=e=>{let t;if(!e||!e.children||e.delta._t)return;let n=e.children.length,r={};for(let i=0;i<n;i++){let n=(t=e.children[i]).childName;r[n]!==t.result&&(r[n]=t.result)}e.setResult(r).exit()};j.filterName="collectChildren";let C=function(e,t,n,r){return e[n]===t[r]},k=function(e,t,n,r){let i,o,a=e.length,s=t.length,l=Array(a+1);for(i=0;i<a+1;i++)for(o=0,l[i]=Array(s+1);o<s+1;o++)l[i][o]=0;for(i=1,l.match=n;i<a+1;i++)for(o=1;o<s+1;o++)n(e,t,i-1,o-1,r)?l[i][o]=l[i-1][o-1]+1:l[i][o]=Math.max(l[i-1][o],l[i][o-1]);return l},S=function(e,t,n,r){let i=t.length,o=n.length,a={sequence:[],indices1:[],indices2:[]};for(;0!==i&&0!==o;)e.match(t,n,i-1,o-1,r)?(a.sequence.unshift(t[i-1]),a.indices1.unshift(i-1),a.indices2.unshift(o-1),--i,--o):e[i][o-1]>e[i-1][o]?--o:--i;return a},N={get:function(e,t,n,r){let i=r||{};return S(k(e,t,n||C,i),e,t,i)}},E=3;function D(e,t,n,r){for(let i=0;i<n;i++){let n=e[i];for(let e=0;e<r;e++){let r=t[e];if(i!==e&&n===r)return!0}}}function I(e,t,n,r,i){let o=e[n],a=t[r];if(o===a)return!0;if("object"!=typeof o||"object"!=typeof a)return!1;let s=i.objectHash;if(!s)return i.matchByPosition&&n===r;i.hashCache1=i.hashCache1||[];let l=i.hashCache1[n];if(void 0===l&&(i.hashCache1[n]=l=s(o,n)),void 0===l)return!1;i.hashCache2=i.hashCache2||[];let c=i.hashCache2[r];return void 0===c&&(i.hashCache2[r]=c=s(a,r)),void 0!==c&&l===c}let A=function(e){let t,n,r,i,o;if(!e.leftIsArray)return;let a={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},s=0,l=0,u=e.left,d=e.right,p=u.length,h=d.length;for(p>0&&h>0&&!a.objectHash&&"boolean"!=typeof a.matchByPosition&&(a.matchByPosition=!D(u,d,p,h));s<p&&s<h&&I(u,d,s,s,a);)i=new c(u[t=s],d[t]),e.push(i,t),s++;for(;l+s<p&&l+s<h&&I(u,d,p-1-l,h-1-l,a);)n=p-1-l,r=h-1-l,i=new c(u[n],d[r]),e.push(i,r),l++;if(s+l===p){if(p===h)return void e.setResult(void 0).exit();for(o=o||{_t:"a"},t=s;t<h-l;t++)o[t]=[d[t]];return void e.setResult(o).exit()}if(s+l===h){for(o=o||{_t:"a"},t=s;t<p-l;t++)o["_".concat(t)]=[u[t],0,0];e.setResult(o).exit();return}delete a.hashCache1,delete a.hashCache2;let f=u.slice(s,p-l),m=d.slice(s,h-l),g=N.get(f,m,I,a),v=[];for(o=o||{_t:"a"},t=s;t<p-l;t++)0>g.indices1.indexOf(t-s)&&(o["_".concat(t)]=[u[t],0,0],v.push(t));let x=!0;e.options&&e.options.arrays&&!1===e.options.arrays.detectMove&&(x=!1);let y=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(y=!0);let b=v.length;for(t=s;t<h-l;t++){let l=g.indices2.indexOf(t-s);if(l<0){let l=!1;if(x&&b>0){for(let p=0;p<b;p++)if(I(f,m,(n=v[p])-s,t-s,a)){o["_".concat(n)].splice(1,2,t,E),y||(o["_".concat(n)][0]=""),r=t,i=new c(u[n],d[r]),e.push(i,r),v.splice(p,1),l=!0;break}}l||(o[t]=[d[t]])}else n=g.indices1[l]+s,r=g.indices2[l]+s,i=new c(u[n],d[r]),e.push(i,r)}e.setResult(o).exit()};A.filterName="arrays";let T={numerically:(e,t)=>e-t,numericallyBy:e=>(t,n)=>t[e]-n[e]},M=function(e){let t,n,r;if(!e.nested)return;let i=e.delta;if("a"!==i._t)return;let o=i,a=e.left,s=[],l=[],c=[];for(t in o)if("_t"!==t)if("_"===t[0]){let e=t;if(0===o[e][2]||o[e][2]===E)s.push(parseInt(t.slice(1),10));else throw Error("only removal or move can be applied at original array indices,"+" invalid diff type: ".concat(o[e][2]))}else{let e=t;1===o[e].length?l.push({index:parseInt(e,10),value:o[e][0]}):c.push({index:parseInt(e,10),delta:o[e]})}for(t=(s=s.sort(T.numerically)).length-1;t>=0;t--){n=s[t];let e=o["_".concat(n)],r=a.splice(n,1)[0];e[2]===E&&l.push({index:e[1],value:r})}let u=(l=l.sort(T.numericallyBy("index"))).length;for(t=0;t<u;t++){let e=l[t];a.splice(e.index,0,e.value)}let p=c.length;if(p>0)for(t=0;t<p;t++){let n=c[t];r=new d(a[n.index],n.delta),e.push(r,n.index)}if(!e.children)return void e.setResult(a).exit();e.exit()};M.filterName="arrays";let L=function(e){let t;if(!e||!e.children||"a"!==e.delta._t)return;let n=e.left,r=e.children.length;for(let i=0;i<r;i++)n[(t=e.children[i]).childName]=t.result;e.setResult(n).exit()};L.filterName="arraysCollectChildren";let P=function(e){let t,n;if(!e.nested){let t=e.delta;if(t[2]===E){let n=t;e.newName="_".concat(n[1]),e.setResult([n[0],parseInt(e.childName.substring(1),10),E]).exit()}return}let r=e.delta;if("a"!==r._t)return;let i=r;for(t in i)"_t"!==t&&(n=new h(i[t]),e.push(n,t));e.exit()};P.filterName="arrays";let R=(e,t,n)=>{if("string"==typeof t&&"_"===t[0])return parseInt(t.substring(1),10);if(Array.isArray(n)&&0===n[2])return"_".concat(t);let r=+t;for(let n in e){let i=e[n];if(Array.isArray(i))if(i[2]===E){let e=parseInt(n.substring(1),10),o=i[1];if(o===+t)return e;e<=r&&o>r?r++:e>=r&&o<r&&r--}else 0===i[2]?parseInt(n.substring(1),10)<=r&&r++:1===i.length&&parseInt(n,10)<=r&&r--}return r},_=e=>{let t;if(!e||!e.children)return;let n=e.delta;if("a"!==n._t)return;let r=n,i=e.children.length,o={_t:"a"};for(let n=0;n<i;n++){let i=(t=e.children[n]).newName;void 0===i&&(i=R(r,t.childName,t.result)),o[i]!==t.result&&(o[i]=t.result)}e.setResult(o).exit()};_.filterName="arraysCollectChildren";let O=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};O.filterName="dates";let F=2,B=60,V=null;function z(e,t){var n;if(!V){let r;if(null==(n=null==e?void 0:e.textDiff)?void 0:n.diffMatchPatch)r=new e.textDiff.diffMatchPatch;else{if(!t)return null;let e=Error("The diff-match-patch library was not provided. Pass the library in through the options or use the `jsondiffpatch/with-text-diffs` entry-point.");throw e.diff_match_patch_not_found=!0,e}V={diff:function(e,t){return r.patch_toText(r.patch_make(e,t))},patch:function(e,t){let n=r.patch_apply(r.patch_fromText(t),e);for(let e=0;e<n[1].length;e++)n[1][e]||(Error("text patch failed").textPatchFailed=!0);return n[0]}}}return V}let H=function(e){if("string"!==e.leftType)return;let t=e.left,n=e.right,r=e.options&&e.options.textDiff&&e.options.textDiff.minLength||B;if(t.length<r||n.length<r)return void e.setResult([t,n]).exit();let i=z(e.options);if(!i)return void e.setResult([t,n]).exit();let o=i.diff;e.setResult([o(t,n),0,F]).exit()};H.filterName="texts";let U=function(e){if(e.nested)return;let t=e.delta;if(t[2]!==F)return;let n=t,r=z(e.options,!0).patch;e.setResult(r(e.left,n[0])).exit()};U.filterName="texts";let G=function(e){let t,n,r,i,o=null,a=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/,s=e.split("\n");for(t=0,n=s.length;t<n;t++){let e=(r=s[t]).slice(0,1);"@"===e?(o=a.exec(r),s[t]="@@ -"+o[3]+","+o[4]+" +"+o[1]+","+o[2]+" @@"):"+"===e?(s[t]="-"+s[t].slice(1),"+"===s[t-1].slice(0,1)&&(i=s[t],s[t]=s[t-1],s[t-1]=i)):"-"===e&&(s[t]="+"+s[t].slice(1))}return s.join("\n")},W=function(e){if(e.nested)return;let t=e.delta;if(t[2]!==F)return;let n=t;e.setResult([G(n[0]),0,F]).exit()};W.filterName="texts";class q{options(e){return this.processor.options(e)}diff(e,t){return this.processor.process(new c(e,t))}patch(e,t){return this.processor.process(new d(e,t))}reverse(e){return this.processor.process(new h(e))}unpatch(e,t){return this.patch(e,this.reverse(t))}clone(e){return s(e)}constructor(e){this.processor=new n(e),this.processor.pipe(new i("diff").append(v,f,O,H,x,A).shouldHaveResult()),this.processor.pipe(new i("patch").append(b,L,m,U,y,M).shouldHaveResult()),this.processor.pipe(new i("reverse").append(j,_,g,W,w,P).shouldHaveResult())}}let Z=q,K=function(e){return new Z(e)}({});function $(e,t){let n=K.clone(e);if(Array.isArray(t)&&9===t[1]&&9===t[2]){let e=t[0].slice(0,-1),r=t[0].slice(-1),i=n;for(let t of e){if("string"==typeof i[t])return i[t]+=r,n;i=i[t]}}return K.patch(n,t),n}e.s(["patch",()=>$],259112)},230869,e=>{"use strict";var t=e.i(696871);function n(e){var n,r,i;let o={isLlmError:!1,isRetried:!1,errorCategory:void 0};if("string"==typeof e)o.isLlmError=e.startsWith(t.LLM_ERROR_PREFIX),o.isRetried=e.endsWith(t.LLM_ERROR_RETRY_SUFFIX),o.errorCategory=null!=(r=e.split(":")[1])?r:"default";else if(null==(n=e.finishReason)?void 0:n.includes("provider_server_error")){let t=e.finishReason.startsWith("retry_provider_server_error"),n=t||!!e.finishReason.startsWith("provider_server_error");o.isLlmError=n,o.isRetried=t,n&&(o.errorCategory=null!=(i=e.finishReason.split(":")[1])?i:"default")}return o}e.s(["isLlmError",()=>n])},914483,e=>{"use strict";var t=e.i(490293),n=e.i(639056);let r=function(){let e=new Map;return function(n,r){return e.has(n)||e.set(n,(0,t.atom)(r)),e.get(n)}}();function i(e,t){return(0,n.useAtomValue)(r(e,t))}function o(e,t){return(0,n.useSetAtom)(r(e,t))}function a(e,t){return(0,n.useAtom)(r(e,t))}e.s(["useGet",()=>i,"useGetSet",()=>a,"useSet",()=>o])},206037,e=>{"use strict";var t=e.i(346970),n=e.i(403055),r=t;let i=e=>fetch(e).then(e=>e.json()),o=()=>{let{data:e,isLoading:t}=(0,r.default)("/api/auth/info",i);return{user:null==e?void 0:e.user,isLoggedIn:t?void 0:!!(null==e?void 0:e.user),agreementStatus:t||null==e?void 0:e.agreementStatus}};function a(e,r){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,{isLoggedIn:s}=o(),{data:l,isLoading:c,mutate:u}=(0,t.default)(()=>{let t;if((null==r?void 0:r.startsWith("team_"))&&(t=r),e&&s){let e=new URLSearchParams;return t&&e.set("teamId",t),i&&e.set("paymentMethod","true"),"/api/plan?".concat(e.toString())}return null},n.fetcher,{revalidateOnFocus:!1,dedupingInterval:a}),d=l;if(l&&Array.isArray(l.plans))for(let e=l.plans.length-1;e>=0;e--){let t=l.plans[e].slug;("v0-platinum"===t||"v0-ultra"===t)&&l.plans.splice(e,1)}return{planInfo:d,planSlug:null==d?void 0:d.currentPlanSlug,isLoading:c,update:u}}function s(e){return"subscription"in e.current}e.s(["isUserPlanInfo",()=>s,"usePlanInfo",()=>a],206037)},936990,e=>{"use strict";var t=e.i(346970),n=e.i(242759),r=e.i(667660);function i(e){let{tbb:i}=(0,n.useFlags)(),{activeScope:o}=(0,r.useActiveScope)(),{data:a,error:s,isLoading:l,isValidating:c,mutate:u}=(0,t.default)(i?["/chat/api/plan-info",o]:null,async e=>{let[t]=e,n=await fetch(t);if(!n.ok){let e=n.headers.get("content-type");if(e&&-1!==e.indexOf("application/json"))throw Error((await n.json()).message||"Failed to get plan info");throw Error("Failed to get plan info: ".concat(n.status," ").concat(n.statusText))}return n.json()},{revalidateOnFocus:!1,...e});return{planInfo:a,error:s,isLoading:l,isValidating:c,mutate:u}}e.s(["useTokenBillingPlanInfo",()=>i])},739976,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.parse=c,n.serialize=p;let r=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,i=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function c(e,t){let n=new l,r=e.length;if(r<2)return n;let i=(null==t?void 0:t.decode)||h,o=0;do{let t=e.indexOf("=",o);if(-1===t)break;let a=e.indexOf(";",o),s=-1===a?r:a;if(t>s){o=e.lastIndexOf(";",t-1)+1;continue}let l=u(e,o,t),c=d(e,t,l),p=e.slice(l,c);if(void 0===n[p]){let r=u(e,t+1,s),o=d(e,s,r),a=i(e.slice(r,o));n[p]=a}o=s+1}while(o<r)return n}function u(e,t,n){do{let n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n)return n}function d(e,t,n){for(;t>n;){let n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function p(e,t,n){let s=(null==n?void 0:n.encode)||encodeURIComponent;if(!r.test(e))throw TypeError("argument name is invalid: ".concat(e));let l=s(t);if(!i.test(l))throw TypeError("argument val is invalid: ".concat(t));let c=e+"="+l;if(!n)return c;if(void 0!==n.maxAge){if(!Number.isInteger(n.maxAge))throw TypeError("option maxAge is invalid: ".concat(n.maxAge));c+="; Max-Age="+n.maxAge}if(n.domain){if(!o.test(n.domain))throw TypeError("option domain is invalid: ".concat(n.domain));c+="; Domain="+n.domain}if(n.path){if(!a.test(n.path))throw TypeError("option path is invalid: ".concat(n.path));c+="; Path="+n.path}if(n.expires){if(!f(n.expires)||!Number.isFinite(n.expires.valueOf()))throw TypeError("option expires is invalid: ".concat(n.expires));c+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(c+="; HttpOnly"),n.secure&&(c+="; Secure"),n.partitioned&&(c+="; Partitioned"),n.priority)switch("string"==typeof n.priority?n.priority.toLowerCase():n.sameSite){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw TypeError("option priority is invalid: ".concat(n.priority))}if(n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid: ".concat(n.sameSite))}return c}function h(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}function f(e){return"[object Date]"===s.call(e)}},912074,e=>{"use strict";var t=e.i(739976),n=e.i(139505);e.i(665632);var r=n;function i(e){return e.startsWith(r.ANON_ID_PREFIX)}function o(e){if(!i(e))throw Error("Invalid anonId: ".concat(e))}let a=null,s={};function l(){if("undefined"==typeof document)return;a!==document.cookie&&(a=document.cookie,s=(0,t.parse)(a));let e=s[n.ANON_COOKIE_NAME_DO_NOT_USE_OR_YOU_WILL_BE_FIRED];if(e)return o(e),e}e.s(["getAnonId",()=>l],912074)},745197,525258,e=>{"use strict";var t=e.i(162061),n=e.i(346970),r=e.i(914483),i=e.i(696871),o=e.i(743124),a=e.i(206037),s=e.i(936990),l=e.i(667660),c=e.i(912074),u=e.i(242759),d=e.i(152641),p=e.i(457456),h=e.i(639056),f=u,m=i;function g(){let e=(0,p.getGlobalAtoms)(),{dmule:t}=(0,f.useFlags)(),n=(0,h.useAtomValue)(e.dailyModelUsageRateLimit),{updateDailyModelUsage:r}=(0,p.getGlobalActions)(),{isValidating:i}=(0,d.useServerQuerySWR)(["global","dailyModelUsage"],{},{noRevalidate:!0,revalidateOnFocus:!1});return{isValidating:i,updateDailyModelUsage:t?r:e=>{},...!t?{remaining:m.DAILY_MODEL_USAGE_LIMIT,usage:0,limit:m.DAILY_MODEL_USAGE_LIMIT}:n}}e.s(["useDailyModelUsage",()=>g],525258);let v=(e,t)=>fetch("".concat(e,"?scope=").concat(t)).then(e=>e.json());function x(){var e;let{tbb:t}=(0,u.useFlags)(),{activeScopeSlug:r}=(0,l.useActiveScope)(),i=(0,c.getAnonId)(),a=null!=(e=null!=r?r:i)?e:void 0,{data:s,mutate:d}=(0,n.default)(a&&!t?["/chat/api/rate-limit",a]:null,()=>{if(a)return v("/chat/api/rate-limit",a)});return[s,(0,o.useCallback)(()=>d(e=>{if(void 0!==e)return{...e,remaining:Math.max(e.remaining-1,0)}},{revalidate:!1}),[d])]}function y(){let{tbb:e}=(0,u.useFlags)(),[n]=x(),{isTeam:c,user:d,isActiveScopeReady:p}=(0,l.useActiveScope)(),{planSlug:h}=(0,a.usePlanInfo)(p&&!c,null==d?void 0:d.id,!1),{planInfo:f}=(0,s.useTokenBillingPlanInfo)(),m="v0-level0"===h,{remaining:v}=g(),[y,b]=(0,r.useGetSet)("show-daily-usage-upgrade-banner",!1),[w,j]=(0,r.useGetSet)("show-upgrade-banner-limit",!1),[C,k]=(0,r.useGetSet)("show-upgrade-banner-general",!1);(0,o.useLayoutEffect)(()=>{if(!h){j(!1),k(!1),b(!1);return}let r=t.default.get(i.DISMISSED_DAILY_UPGRADE_CTA_COOKIE),o=t.default.get(i.DISMISSED_DAILY_MODEL_USAGE_UPGRADE_CTA_COOKIE),a=f?(f.onDemand.balance||0)+(f.balance.remaining||0):void 0,s=!(n&&0===n.remaining||"number"==typeof a&&a<=0)&&"1"===r,l="1"===t.default.get(i.DISMISSED_GENERAL_UPGRADE_CTA_COOKIE),c=!(v<=i.SHOW_NON_DISMISSABLE_UPGRADE_CTA_THRESHOLD_DAILY_MODEL_USAGE)&&(v>i.SHOW_DISMISSABLE_UPGRADE_CTA_THRESHOLD_DAILY_MODEL_USAGE||"1"===o),u=!s&&(n&&n.remaining<i.SHOW_UPGRADE_CTA_THRESHOLD_MESSAGES||e&&"number"==typeof a&&a<i.SHOW_UPGRADE_CTA_THRESHOLD_CREDITS),d=m&&!c,p=n&&n.limit-n.remaining>=1,g=m&&!l&&(p||e);j(null!=u&&u),k(null!=g&&g),b(d)},[n,k,j,b,m,c,h,d,f,e,v]);let S=(0,o.useCallback)(()=>{j(!1),t.default.set(i.DISMISSED_DAILY_UPGRADE_CTA_COOKIE,"1",{expires:1})},[j]),N=(0,o.useCallback)(()=>{k(!1),t.default.set(i.DISMISSED_GENERAL_UPGRADE_CTA_COOKIE,"1",{expires:5})},[k]),E=(0,o.useCallback)(()=>{b(!1),t.default.set(i.DISMISSED_DAILY_MODEL_USAGE_UPGRADE_CTA_COOKIE,"1",{expires:1})},[b]);return{showBannerLimit:w,showBannerGeneral:C,showDailyUsageBannerLimit:y,remaining:null==n?void 0:n.remaining,dismissBannerLimit:S,dismissBannerGeneral:N,dismissDailyUsageBanner:E,userOnFree:m,dailyUsageRemaining:v}}e.s(["useRateLimit",()=>x,"useShowUpgradeBanner",()=>y],745197)},768167,e=>{"use strict";var t=e.i(346970),n=e.i(912106);function r(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{data:n,mutate:r}=(0,t.default)("showOnboardingModal",null,{fallbackData:e});return{showOnboardingModal:n,setShowOnboardingModal:r}}function i(e){return(0,n.mutate)("showOnboardingModal",e)}e.s(["mutateOnboardingModal",()=>i,"useOnboardingModal",()=>r])},120945,e=>{"use strict";var t=e.i(509473),n=e.i(686832),r=e.i(639056),i=e.i(37737),o=e.i(743124);function a(e){let{type:a,children:s,forceOpen:l,onOpenChange:c,onOpenAutoFocus:u,...d}=e,p=(0,i.getDialogsAtoms)(),h=(0,r.useAtomValue)(p.visibleDialogType),f=(0,r.useAtomValue)(p.dialogOpen),m=(0,o.useId)(),g=(0,o.useCallback)(e=>{c&&c(e),e&&f?(0,i.openDialog)(f):l||(0,i.closeDialog)()},[f,l,c]),v=(0,o.useMemo)(()=>h===a||l,[a,h,l]),x=(0,o.useCallback)(e=>{if(u)u(e);else{e.preventDefault();let t=document.getElementById(m);t&&t.focus()}},[u,m]);return(0,t.jsx)(n.Modal,{"aria-description":"Dialog",id:m,open:v,onOpenChange:g,onOpenAutoFocus:x,tabIndex:-1,...d,children:s})}e.s(["AtomicDialog",()=>a])},261825,e=>{"use strict";e.s(["TeamCreateDialog",()=>a]);var t=e.i(509473),n=e.i(686832),r=e.i(176248),i=e.i(120945);e.i(904347);var o=e.i(37737);function a(){return(0,t.jsxs)(i.AtomicDialog,{type:"createTeam",children:[(0,t.jsxs)(n.ModalHeader,{children:[(0,t.jsx)(n.ModalTitle,{children:"Create a Team on Vercel"}),(0,t.jsxs)(n.ModalDescription,{children:["You will be redirected to"," ",(0,t.jsx)("span",{className:"font-medium",children:"vercel.com"})," to create a new Vercel team. If you create a Vercel Pro team, you will be charged for the Vercel Pro subscription in addition to the v0 Team plan."]})]}),(0,t.jsxs)(n.ModalFooter,{children:[(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:o.closeDialog,children:"Cancel"}),(0,t.jsx)(r.Button,{size:"sm",asChild:!0,variant:"default",children:(0,t.jsx)("a",{href:"https://vercel.com/dashboard?createTeam=v0-checkout-page",target:"_blank",children:"Continue to Vercel"})})]})]})}},228520,e=>{"use strict";e.s(["TeamRequestAccessDialog",()=>d]);var t=e.i(509473),n=e.i(686832),r=e.i(176248),i=e.i(32170),o=e.i(743124);e.i(563948);var a=e.i(407562),s=e.i(837062),l=e.i(120945);e.i(904347);var c=e.i(37737),u=e.i(120485);function d(e){let{slug:d,name:p}=e,{user:h}=(0,i.useUser)(),{refreshScopes:f}=(0,s.useScopes)(),[m,g]=(0,o.useTransition)(),v=(0,o.useCallback)(e=>{m||g(async()=>{let t=await fetch("/chat/api/team/request-access/".concat(e),{method:"POST"});if(!t.ok){try{let e=(await t.json()).error||"Failed to request access";(0,u.handleChatError)(e)||a.toast.error(e)}catch(e){a.toast.error("Failed to request access")}return}a.toast.success("Access requested"),(0,c.closeDialog)(),f()})},[m,f]);return(0,t.jsxs)(l.AtomicDialog,{type:"requestAccess",children:[(0,t.jsxs)(n.ModalHeader,{children:[(0,t.jsx)(n.ModalTitle,{children:"Request Access"}),(0,t.jsxs)(n.ModalDescription,{children:["Your account"," ",(0,t.jsx)("b",{className:"font-medium",children:(null==h?void 0:h.name)||(null==h?void 0:h.username)})," does not have permission to use v0 in"," ",(0,t.jsx)("b",{className:"font-medium",children:p||d})," Team. Request access, or switch to a different Team."]})]}),(0,t.jsxs)(n.ModalFooter,{children:[(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:c.closeDialog,children:"Cancel"}),(0,t.jsx)(r.Button,{disabled:m,onClick:()=>v(d),size:"sm",children:"Request Access"})]})]})}},456915,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 9.75V11.25C11.5 11.3881 11.3881 11.5 11.25 11.5H4.75C4.61193 11.5 4.5 11.3881 4.5 11.25L4.5 4.75C4.5 4.61193 4.61193 4.5 4.75 4.5H6.25H7V3H6.25H4.75C3.7835 3 3 3.7835 3 4.75V11.25C3 12.2165 3.7835 13 4.75 13H11.25C12.2165 13 13 12.2165 13 11.25V9.75V9H11.5V9.75ZM8.5 3H9.25H12.2495C12.6637 3 12.9995 3.33579 12.9995 3.75V6.75V7.5H11.4995V6.75V5.56066L8.53033 8.52978L8 9.06011L6.93934 7.99945L7.46967 7.46912L10.4388 4.5H9.25H8.5V3Z" fill="currentColor"/>');e.s(["ExternalSmall",0,t])},298515,e=>{"use strict";let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"usd"}),n=new Intl.NumberFormat("en-US",{style:"currency",currency:"usd",maximumFractionDigits:0}),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";switch(r){case"default":return t.format(e/100);case"display":return n.format(e/100)}};function i(e){return r(e.reduce((e,t)=>e+t.price.cents,0),"display")}function o(e){return i(e.items)}function a(e){return i(e.items)}e.s(["formatCents",0,r,"formatPlanTotalPrice",()=>o,"formatSubscriptionTotalPrice",()=>a])},3156,89993,307778,589910,e=>{"use strict";e.s(["TeamUpgradeDialog",()=>h],3156);var t=e.i(509473),n=e.i(686832),r=e.i(176248),i=e.i(543017),o=e.i(456915),a=e.i(297239),s=e.i(206037),l=e.i(298515),c=e.i(909270),u=e.i(53223),d=e.i(120945);e.i(904347);var p=e.i(37737);function h(e){var h;let{id:f,name:m,slug:g}=e,v=(0,a.useT)(),{planInfo:x,isLoading:y}=(0,s.usePlanInfo)(!0,f),b=null==x||null==(h=x.plans)?void 0:h.find(e=>"v0-team"===e.slug);if(y||!b)return null;let w=(0,l.formatPlanTotalPrice)(b);return(0,t.jsxs)(d.AtomicDialog,{type:"upgradeTeam",children:[(0,t.jsxs)(n.ModalHeader,{className:"pb-4!",children:[(0,t.jsx)(n.ModalTitle,{children:v("teamUpgradeDialog.title")}),(0,t.jsx)(n.ModalDescription,{children:v("teamUpgradeDialog.description")(m||g)})]}),(0,t.jsxs)(n.ModalContent,{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"border-v0-alpha-400 bg-v0-background-200 m-0 space-y-3 rounded-sm border p-4!",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:v("teamUpgradeDialog.planName")("Team")}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-0.5",children:[(0,t.jsx)("p",{className:"text-xl font-semibold leading-7",children:w}),(0,t.jsx)("p",{className:"leading-5 text-v0-gray-900",children:v("teamUpgradeDialog.userPerMonth")})]})]}),(0,t.jsx)("p",{className:"font-semibold",children:v("teamUpgradeDialog.forFastMovingTeams")}),(0,t.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Check,{size:20})," ",v("teamUpgradeDialog.everythingInPremium")]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Check,{size:20})," ",v("teamUpgradeDialog.evenHigherLimits")]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Check,{size:20})," ",v("teamUpgradeDialog.centralizedBilling")]})]})]}),(0,t.jsxs)("p",{className:"text-sm text-v0-gray-900",children:[v("teamUpgradeDialog.learnMore")," ",(0,t.jsxs)(c.default,{className:"inline-flex items-center text-v0-blue-700",href:"/pricing",children:[v("teamUpgradeDialog.pricingPage"),(0,t.jsx)(o.ExternalSmall,{})]}),v("teamUpgradeDialog.afterLearnMore")]})]}),(0,t.jsxs)(n.ModalFooter,{children:[(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:p.closeDialog,children:v("teamUpgradeDialog.cancel")}),(0,t.jsx)(r.Button,{asChild:!0,onClick:()=>{(0,u.track)("ClickGoToUpgradeTeamPage",{teamId:f}),(0,p.closeDialog)()},size:"sm",children:(0,t.jsx)(c.default,{href:"/chat/upgrade?teamId=".concat(f),children:v("teamUpgradeDialog.startTeamPlan")})})]})]})}var f=e.i(358847),m=(0,f.createServerReference)("40175cb570eb6af6a44f88cd0f5ae561981aeb2f1c",f.callServer,void 0,f.findSourceMapURL,"updateChatTitle");e.s(["updateChatTitle",()=>m],89993);var g=t,v=e.i(304649);function x(e){let{className:t,...n}=e;return(0,g.jsx)("svg",{className:(0,v.cn)("h-4 w-4 animate-spin",t),fill:"currentColor",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",...n,children:(0,g.jsx)("path",{d:"M232 128a104 104 0 0 1-208 0c0-41 23.81-78.36 60.66-95.27a8 8 0 0 1 6.68 14.54C60.15 61.59 40 93.27 40 128a88 88 0 0 0 176 0c0-34.73-20.15-66.41-51.34-80.73a8 8 0 0 1 6.68-14.54C208.19 49.64 232 87 232 128Z"})})}e.s(["IconSpinner",()=>x],307778);var y=t,b=v;function w(e){let{count:t,max:n,className:r,displayThreshold:i,alertThreshold:o,message:a,messageThreshold:s,...l}=e;return i=null!=i?i:.75*n,s=null!=s?s:.9*n,o=null!=o?o:.95*n,(0,y.jsxs)("div",{className:(0,b.cn)("pointer-events-none items-center gap-2 rounded-md px-2 py-1 text-xs",t>=i?"flex":"hidden",t>=o?"text-v0-red-700":"text-v0-gray-900",r),...l,children:[a&&t>=s&&(0,y.jsx)("span",{children:a}),(0,y.jsxs)("span",{className:"ml-auto tabular-nums",children:[t.toLocaleString(),"/",n.toLocaleString()]})]})}e.s(["InputCounter",()=>w],589910)},988388,(e,t,n)=>{"use strict";let r=/[|\\{}()[\]^$+*?.-]/g;t.exports=e=>{if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(r,"\\$&")}},702739,(e,t,n)=>{var r=1/0,i="[object Symbol]",o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),s={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},l=e.g&&e.g.Object===Object&&e.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=function(e){return function(t){return null==e?void 0:e[t]}}(s),p=Object.prototype.toString,h=u.Symbol,f=h?h.prototype:void 0,m=f?f.toString:void 0;function g(e){if("string"==typeof e)return e;if(x(e))return m?m.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}function v(e){return!!e&&"object"==typeof e}function x(e){return"symbol"==typeof e||v(e)&&p.call(e)==i}function y(e){return null==e?"":g(e)}t.exports=function(e){return(e=y(e))&&e.replace(o,d).replace(a,"")}},605634,(e,t,n)=>{t.exports=[["ß","ss"],["ä","ae"],["Ä","Ae"],["ö","oe"],["Ö","Oe"],["ü","ue"],["Ü","Ue"],["À","A"],["Á","A"],["Â","A"],["Ã","A"],["Ä","Ae"],["Å","A"],["Æ","AE"],["Ç","C"],["È","E"],["É","E"],["Ê","E"],["Ë","E"],["Ì","I"],["Í","I"],["Î","I"],["Ï","I"],["Ð","D"],["Ñ","N"],["Ò","O"],["Ó","O"],["Ô","O"],["Õ","O"],["Ö","Oe"],["Ő","O"],["Ø","O"],["Ù","U"],["Ú","U"],["Û","U"],["Ü","Ue"],["Ű","U"],["Ý","Y"],["Þ","TH"],["ß","ss"],["à","a"],["á","a"],["â","a"],["ã","a"],["ä","ae"],["å","a"],["æ","ae"],["ç","c"],["è","e"],["é","e"],["ê","e"],["ë","e"],["ì","i"],["í","i"],["î","i"],["ï","i"],["ð","d"],["ñ","n"],["ò","o"],["ó","o"],["ô","o"],["õ","o"],["ö","oe"],["ő","o"],["ø","o"],["ù","u"],["ú","u"],["û","u"],["ü","ue"],["ű","u"],["ý","y"],["þ","th"],["ÿ","y"],["ẞ","SS"],["à","a"],["À","A"],["á","a"],["Á","A"],["â","a"],["Â","A"],["ã","a"],["Ã","A"],["è","e"],["È","E"],["é","e"],["É","E"],["ê","e"],["Ê","E"],["ì","i"],["Ì","I"],["í","i"],["Í","I"],["ò","o"],["Ò","O"],["ó","o"],["Ó","O"],["ô","o"],["Ô","O"],["õ","o"],["Õ","O"],["ù","u"],["Ù","U"],["ú","u"],["Ú","U"],["ý","y"],["Ý","Y"],["ă","a"],["Ă","A"],["Đ","D"],["đ","d"],["ĩ","i"],["Ĩ","I"],["ũ","u"],["Ũ","U"],["ơ","o"],["Ơ","O"],["ư","u"],["Ư","U"],["ạ","a"],["Ạ","A"],["ả","a"],["Ả","A"],["ấ","a"],["Ấ","A"],["ầ","a"],["Ầ","A"],["ẩ","a"],["Ẩ","A"],["ẫ","a"],["Ẫ","A"],["ậ","a"],["Ậ","A"],["ắ","a"],["Ắ","A"],["ằ","a"],["Ằ","A"],["ẳ","a"],["Ẳ","A"],["ẵ","a"],["Ẵ","A"],["ặ","a"],["Ặ","A"],["ẹ","e"],["Ẹ","E"],["ẻ","e"],["Ẻ","E"],["ẽ","e"],["Ẽ","E"],["ế","e"],["Ế","E"],["ề","e"],["Ề","E"],["ể","e"],["Ể","E"],["ễ","e"],["Ễ","E"],["ệ","e"],["Ệ","E"],["ỉ","i"],["Ỉ","I"],["ị","i"],["Ị","I"],["ọ","o"],["Ọ","O"],["ỏ","o"],["Ỏ","O"],["ố","o"],["Ố","O"],["ồ","o"],["Ồ","O"],["ổ","o"],["Ổ","O"],["ỗ","o"],["Ỗ","O"],["ộ","o"],["Ộ","O"],["ớ","o"],["Ớ","O"],["ờ","o"],["Ờ","O"],["ở","o"],["Ở","O"],["ỡ","o"],["Ỡ","O"],["ợ","o"],["Ợ","O"],["ụ","u"],["Ụ","U"],["ủ","u"],["Ủ","U"],["ứ","u"],["Ứ","U"],["ừ","u"],["Ừ","U"],["ử","u"],["Ử","U"],["ữ","u"],["Ữ","U"],["ự","u"],["Ự","U"],["ỳ","y"],["Ỳ","Y"],["ỵ","y"],["Ỵ","Y"],["ỷ","y"],["Ỷ","Y"],["ỹ","y"],["Ỹ","Y"],["ء","e"],["آ","a"],["أ","a"],["ؤ","w"],["إ","i"],["ئ","y"],["ا","a"],["ب","b"],["ة","t"],["ت","t"],["ث","th"],["ج","j"],["ح","h"],["خ","kh"],["د","d"],["ذ","dh"],["ر","r"],["ز","z"],["س","s"],["ش","sh"],["ص","s"],["ض","d"],["ط","t"],["ظ","z"],["ع","e"],["غ","gh"],["ـ","_"],["ف","f"],["ق","q"],["ك","k"],["ل","l"],["م","m"],["ن","n"],["ه","h"],["و","w"],["ى","a"],["ي","y"],["َ‎","a"],["ُ","u"],["ِ‎","i"],["٠","0"],["١","1"],["٢","2"],["٣","3"],["٤","4"],["٥","5"],["٦","6"],["٧","7"],["٨","8"],["٩","9"],["چ","ch"],["ک","k"],["گ","g"],["پ","p"],["ژ","zh"],["ی","y"],["۰","0"],["۱","1"],["۲","2"],["۳","3"],["۴","4"],["۵","5"],["۶","6"],["۷","7"],["۸","8"],["۹","9"],["ټ","p"],["ځ","z"],["څ","c"],["ډ","d"],["ﺫ","d"],["ﺭ","r"],["ړ","r"],["ﺯ","z"],["ږ","g"],["ښ","x"],["ګ","g"],["ڼ","n"],["ۀ","e"],["ې","e"],["ۍ","ai"],["ٹ","t"],["ڈ","d"],["ڑ","r"],["ں","n"],["ہ","h"],["ھ","h"],["ے","e"],["А","A"],["а","a"],["Б","B"],["б","b"],["В","V"],["в","v"],["Г","G"],["г","g"],["Д","D"],["д","d"],["Е","E"],["е","e"],["Ж","Zh"],["ж","zh"],["З","Z"],["з","z"],["И","I"],["и","i"],["Й","J"],["й","j"],["К","K"],["к","k"],["Л","L"],["л","l"],["М","M"],["м","m"],["Н","N"],["н","n"],["О","O"],["о","o"],["П","P"],["п","p"],["Р","R"],["р","r"],["С","S"],["с","s"],["Т","T"],["т","t"],["У","U"],["у","u"],["Ф","F"],["ф","f"],["Х","H"],["х","h"],["Ц","Cz"],["ц","cz"],["Ч","Ch"],["ч","ch"],["Ш","Sh"],["ш","sh"],["Щ","Shh"],["щ","shh"],["Ъ",""],["ъ",""],["Ы","Y"],["ы","y"],["Ь",""],["ь",""],["Э","E"],["э","e"],["Ю","Yu"],["ю","yu"],["Я","Ya"],["я","ya"],["Ё","Yo"],["ё","yo"],["ă","a"],["Ă","A"],["ș","s"],["Ș","S"],["ț","t"],["Ț","T"],["ţ","t"],["Ţ","T"],["ş","s"],["Ş","s"],["ç","c"],["Ç","c"],["ğ","g"],["Ğ","g"],["ı","i"],["İ","i"],["ա","a"],["բ","b"],["գ","ɡ"],["դ","d"],["ե","ye"],["զ","z"],["է","e"],["ը","u"],["թ","t"],["ժ","zh"],["ի","i"],["լ","l"],["խ","kh"],["ծ","ts"],["կ","k"],["հ","h"],["ձ","dz"],["ղ","r"],["ճ","j"],["մ","m"],["յ","j"],["ն","n"],["շ","sh"],["ո","vo"],["չ","ch"],["պ","p"],["ջ","j"],["ռ","r"],["ս","s"],["վ","v"],["տ","t"],["ր","re"],["ց","ts"],["ու","u"],["ւ","v"],["փ","p"],["ք","q"],["օ","o"],["ֆ","f"],["և","yev"],["ა","a"],["ბ","b"],["გ","g"],["დ","d"],["ე","e"],["ვ","v"],["ზ","z"],["თ","t"],["ი","i"],["კ","k"],["ლ","l"],["მ","m"],["ნ","n"],["ო","o"],["პ","p"],["ჟ","zh"],["რ","r"],["ს","s"],["ტ","t"],["უ","u"],["ფ","ph"],["ქ","q"],["ღ","gh"],["ყ","k"],["შ","sh"],["ჩ","ch"],["ც","ts"],["ძ","dz"],["წ","ts"],["ჭ","tch"],["ხ","kh"],["ჯ","j"],["ჰ","h"],["č","c"],["ď","d"],["ě","e"],["ň","n"],["ř","r"],["š","s"],["ť","t"],["ů","u"],["ž","z"],["Č","C"],["Ď","D"],["Ě","E"],["Ň","N"],["Ř","R"],["Š","S"],["Ť","T"],["Ů","U"],["Ž","Z"],["ހ","h"],["ށ","sh"],["ނ","n"],["ރ","r"],["ބ","b"],["ޅ","lh"],["ކ","k"],["އ","a"],["ވ","v"],["މ","m"],["ފ","f"],["ދ","dh"],["ތ","th"],["ލ","l"],["ގ","g"],["ޏ","gn"],["ސ","s"],["ޑ","d"],["ޒ","z"],["ޓ","t"],["ޔ","y"],["ޕ","p"],["ޖ","j"],["ޗ","ch"],["ޘ","tt"],["ޙ","hh"],["ޚ","kh"],["ޛ","th"],["ޜ","z"],["ޝ","sh"],["ޞ","s"],["ޟ","d"],["ޠ","t"],["ޡ","z"],["ޢ","a"],["ޣ","gh"],["ޤ","q"],["ޥ","w"],["ަ","a"],["ާ","aa"],["ި","i"],["ީ","ee"],["ު","u"],["ޫ","oo"],["ެ","e"],["ޭ","ey"],["ޮ","o"],["ޯ","oa"],["ް",""],["α","a"],["β","v"],["γ","g"],["δ","d"],["ε","e"],["ζ","z"],["η","i"],["θ","th"],["ι","i"],["κ","k"],["λ","l"],["μ","m"],["ν","n"],["ξ","ks"],["ο","o"],["π","p"],["ρ","r"],["σ","s"],["τ","t"],["υ","y"],["φ","f"],["χ","x"],["ψ","ps"],["ω","o"],["ά","a"],["έ","e"],["ί","i"],["ό","o"],["ύ","y"],["ή","i"],["ώ","o"],["ς","s"],["ϊ","i"],["ΰ","y"],["ϋ","y"],["ΐ","i"],["Α","A"],["Β","B"],["Γ","G"],["Δ","D"],["Ε","E"],["Ζ","Z"],["Η","I"],["Θ","TH"],["Ι","I"],["Κ","K"],["Λ","L"],["Μ","M"],["Ν","N"],["Ξ","KS"],["Ο","O"],["Π","P"],["Ρ","R"],["Σ","S"],["Τ","T"],["Υ","Y"],["Φ","F"],["Χ","X"],["Ψ","PS"],["Ω","O"],["Ά","A"],["Έ","E"],["Ί","I"],["Ό","O"],["Ύ","Y"],["Ή","I"],["Ώ","O"],["Ϊ","I"],["Ϋ","Y"],["ā","a"],["ē","e"],["ģ","g"],["ī","i"],["ķ","k"],["ļ","l"],["ņ","n"],["ū","u"],["Ā","A"],["Ē","E"],["Ģ","G"],["Ī","I"],["Ķ","k"],["Ļ","L"],["Ņ","N"],["Ū","U"],["č","c"],["š","s"],["ž","z"],["Č","C"],["Š","S"],["Ž","Z"],["ą","a"],["č","c"],["ę","e"],["ė","e"],["į","i"],["š","s"],["ų","u"],["ū","u"],["ž","z"],["Ą","A"],["Č","C"],["Ę","E"],["Ė","E"],["Į","I"],["Š","S"],["Ų","U"],["Ū","U"],["Ќ","Kj"],["ќ","kj"],["Љ","Lj"],["љ","lj"],["Њ","Nj"],["њ","nj"],["Тс","Ts"],["тс","ts"],["ą","a"],["ć","c"],["ę","e"],["ł","l"],["ń","n"],["ś","s"],["ź","z"],["ż","z"],["Ą","A"],["Ć","C"],["Ę","E"],["Ł","L"],["Ń","N"],["Ś","S"],["Ź","Z"],["Ż","Z"],["Є","Ye"],["І","I"],["Ї","Yi"],["Ґ","G"],["є","ye"],["і","i"],["ї","yi"],["ґ","g"]]},307232,(e,t,n)=>{var r=e.r(702739),i=e.r(988388),o=e.r(605634);Object.keys||(Object.keys=function(e){if(e!==Object(e))throw TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),t.exports=function(e,t){if("string"!=typeof e)throw TypeError("Expected a string, got `"+typeof e+"`");var n=e,a=t||{};a=[{customReplacements:[]},a].reduce(function(e,t){try{var n=e;return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}catch(t){return e}},{});var s=[].concat(o).concat(a.customReplacements).filter(Boolean);return r(n=function(e,t){return t.reduce(function(e,t){var n=t[0],r=t[1];return"string"!=typeof n?e:e.replace(RegExp(i(n),"g"),r)},e)}(n=n.normalize(),s))}},858269,(e,t,n)=>{var r=e.r(988388),i=e.r(307232);t.exports=function(e){var t,n;if("string"!=typeof e)throw TypeError("Expected a string, got `"+typeof e+"`");return t=i(e,{customReplacements:[["&"," and "]]}).replace(/([A-Z]{2,})([a-z\d]+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1 $2").toLowerCase().replace(/[^a-z\d]+/g,"-").replace(/\\/g,""),n=r("-"),t.replace(RegExp(n+"{2,}","g"),"-").replace(RegExp("^"+n+"|"+n+"$","g"),"")}},476171,e=>{"use strict";var t=e.i(858269);function n(e,n){return n?"".concat((0,t.default)(n.slice(0,50)),"-").concat(e):e}e.s(["getSluggifiedId",()=>n])},472428,210611,401329,152641,e=>{"use strict";var t=e.i(743124),n=e.i(346970),r=e.i(142219),i=e.i(639056);e.i(541536),e.i(23474),e.i(868275),e.i(470259);var o=e.i(868668);e.s(["createAtomicContextSWR",()=>m,"createAtomicContextSWRProvider",()=>g,"createNamespacePromiseContext",()=>x,"createNamespacePromiseContextProvider",()=>y,"useAtomicContextSWR",()=>f,"useNamespacePromiseContext",()=>v],401329);var a=e.i(509473),s=t;e.s(["atomicContextSWRInstance",()=>h,"namespacePromiseContexts",()=>p],210611);let l=m(),c=x("chat"),u=x("scoped"),d=x("project"),p={chat:c,scoped:u,deployment:x("deployment"),project:d,global:x("global")},h=l,f=()=>{let e=h;return(0,s.useContext)(e)};function m(){return(0,s.createContext)({})}function g(e){let{context:t,getAtoms:n}=e;return e=>{let{children:r,routes:i}=e,o=(0,s.useMemo)(()=>({routes:i,getAtoms:n}),[i]);return(0,a.jsx)(t.Provider,{value:o,children:r})}}let v=e=>{let t=p[e];return(0,s.useContext)(t)};function x(e){return(0,s.createContext)({})}function y(e){return t=>{let{children:n,promises:r,params:i}=t,o=(0,s.useMemo)(()=>({promises:r,params:i,serverContextCreationTime:Date.now()}),[r,i]);return(0,a.jsx)(e.Provider,{value:o,children:n})}}let b=new Map,w=new Map,j=new Set,C=new Set,k=new Set;function S(e,a,s){var l;let c=(0,t.useId)(),u=e[0],d=e[1],p=f(),h=v(u);if(!p)throw Error("useServerQuerySWR: Missing top level ContextSWR");let m=(0,t.useMemo)(()=>p.routes[u][d],[p.routes,u,d]),g=(0,t.useMemo)(()=>!!h&&0!==Object.keys(h).length&&d in h.promises,[h,d]),x=(0,t.useMemo)(()=>g?h.promises[d]:null,[h,d,g]),y=(0,t.useMemo)(()=>{let e=null;return g&&(e=h.params),{...e,...a}},[a,g,h.params]),S=(0,t.useMemo)(()=>p.getAtoms[u](y),[p.getAtoms,u,y])[d],E=(0,i.useAtomValue)(S),D=(0,t.useCallback)(e=>r.store.set(S,e),[S]),I=(0,t.useMemo)(()=>h?(0,n.unstable_serialize)([h.serverContextCreationTime]):"client-only",[h]),A=(null==s?void 0:s.omitParamsFromFetchKey)||!1,T=(0,t.useMemo)(()=>A?(0,n.unstable_serialize)([d]):(0,n.unstable_serialize)([d,y]),[d,y,A]),M=(0,t.useMemo)(()=>(0,n.unstable_serialize)([T,I]),[I,T]),L=(0,t.useMemo)(()=>(0,n.unstable_serialize)([d,c]),[d,c]),P=(0,t.useCallback)(async()=>{let e;return w.get(T)?E:(b.set(T,L),!j.has(I)&&x?(e=await x,j.add(I)):e=await (0,o.createRouteFetcherForQuery)(m)(y),b.get(T)===L&&(w.get(T)||D(e),b.delete(T)),e)},[T,L,I,x,E,m,y,D]),R=(0,n.default)(M,(null==s?void 0:s.stopFetch)?null:P,{...(null==s?void 0:s.revalidateNever)?{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnMount:!1,revalidateOnReconnect:!1,revalidateNever:!0}:{},...s,suspense:!1}),_=(0,t.useCallback)(async e=>{let t,{serverMutate:n,optimisticData:r}=e;w.set(T,L),null!==r&&D(r);try{t=await n}catch(e){throw w.delete(T),R.mutate(P),e}return w.get(T)===L&&w.delete(T),(null==s?void 0:s.noRevalidate)||await R.mutate(P),t},[P,R,D,L,T,null==s?void 0:s.noRevalidate]),O=(0,t.useCallback)(async()=>R.mutate(P),[P,R]),F=x&&void 0===R.data&&(null==s?void 0:s.suspense);if(!x&&r.store.get(S)&&(null==(l=r.store.get(S))?void 0:l.__ASSERT_SWR_DATA)===!0&&!C.has(T)&&(console.error("useServerQuerySWR:    You are trying to access asserted data for "+"   ".concat(u,".").concat(String(d)," ")+"   promise: ".concat(x," ")+"   response.data: ".concat(R.data," ")+"   uniqueKey: ".concat(T," ")+"   fetchKey: ".concat(M," ")+"   store.get(atom): ".concat(r.store.get(S)," ")+"   but no promise was found.    This is probably because you are trying to access data from a server component."),C.add(T)),F){let e=(0,t.use)(x);w.get(T)||k.has(N([T,I]))||(D(e),k.add(N([T,I]))),j.add(I)}let B=!0,V=r.store.get(S);if(!x&&B&&void 0===V)throw O();return{...R,data:V,mutate:_,revalidate:O}}let N=e=>e.join("-"),E={__ASSERT_SWR_DATA:!0};e.s(["ASSERT_SWR_DATA",0,E,"useServerQuerySWR",()=>S],152641),e.s([],472428)},867751,105983,e=>{"use strict";e.s(["SuspendingChatRenameDialog",()=>N],867751);var t=e.i(509473),n=e.i(743124),r=e.i(176248),i=e.i(686832),o=e.i(89993),a=e.i(979865);e.i(563948);var s=e.i(407562),l=e.i(763480),c=e.i(307778),u=e.i(246300),d=e.i(120485),p=e.i(470259);e.i(541536);var h=e.i(23474),f=e.i(589910),m=e.i(297239),g=e.i(873013),v=e.i(70165),x=e.i(703699),y=e.i(476171);e.i(904347);var b=e.i(37737),w=e.i(120945),j=e.i(209819);e.i(472428);var C=e.i(152641);let k=h.z.object({title:h.z.string().min(1,"Title is required").max(100,"Title must be less than 100 characters")}),S=100;function N(e){let{chatId:h}=e,N=(0,a.useRouter)(),[E,D]=(0,n.useTransition)(),{title:I,setMetadata:A}=(0,j.useChatMetadata)(h),[T,M]=(0,n.useState)(""),L=(0,g.useRewrittenParams)(),{data:P,setData:R}=(0,u.useChatHistory)(),{data:_,setData:O}=(0,u.useChatFavorites)(),[F,B]=(0,n.useState)(""),V="string"==typeof L.id?(0,x.extractChatIdFromSlug)(L.id):null,z=n.default.useRef(null),H=(0,m.useT)(),U=(0,v.useIsMobile)(),{data:G,mutate:W}=(0,C.useServerQuerySWR)(["scoped","chats"],{},{suspense:!0});(0,n.useEffect)(()=>{let e=null==P?void 0:P.find(e=>e.chatId===h);B((null==e?void 0:e.title)||I||""),M((null==e?void 0:e.title)||I||"")},[P,I,h]),(0,n.useEffect)(()=>{setTimeout(()=>{var e,t;null==(e=z.current)||e.focus(),U||null==(t=z.current)||t.select()},0)},[U]);let q=(0,n.useCallback)(()=>{D(async()=>{try{let e=await W({serverMutate:(0,o.updateChatTitle)({chatId:h,title:T.trim()||"Untitled"}),optimisticData:{favorites:G.favorites.map(e=>e.chatId===h?{...e,title:T.trim()||"Untitled"}:e),history:G.history.map(e=>e.chatId===h?{...e,title:T.trim()||"Untitled"}:e)}}),t=null==_?void 0:_.find(e=>e.chatId===h);if("success"in e){if(t&&O(e=>e.map(e=>e.chatId===h?{...e,title:T.trim()||"Untitled"}:e)),(null==P?void 0:P.find(e=>e.chatId===h))&&R(e=>e.map(e=>e.chatId===h?{...e,title:T.trim()||"Untitled"}:e)),V===h&&A({title:T.trim()||"Untitled"}),s.toast.success(H("updateChatTitleDialog.successToast")),new RegExp("/chat/.*".concat(h)).test(window.location.pathname)){let e=(0,y.getSluggifiedId)(h,T);window.history.replaceState(null,"","/chat/".concat(e))}(0,b.closeDialog)()}else throw Error(p.FAILED_TO_UPDATE_CHAT_TITLE)}catch(e){(0,d.handleChatError)(e,N)||s.toast.error("Failed to update chat title. Please try again."),O(()=>_||[]),R(()=>P||[])}})},[W,h,T,G.favorites,G.history,_,P,V,H,O,R,A,N]),Z=(0,n.useCallback)(e=>{e.preventDefault();let t=k.safeParse({title:T});if(!t.success){var n;let e=t.error.flatten().fieldErrors;s.toast.error((null==(n=e.title)?void 0:n[0])||"Invalid title");return}q()},[q,T]);return(0,t.jsx)(w.AtomicDialog,{type:"updateChatTitle",children:(0,t.jsxs)("form",{onSubmit:Z,children:[(0,t.jsxs)(i.ModalHeader,{children:[(0,t.jsx)(i.ModalTitle,{children:H("updateChatTitleDialog.title")}),(0,t.jsxs)(i.ModalDescription,{children:[(0,t.jsx)("label",{className:"sr-only",htmlFor:"newChatTitle",children:H("updateChatTitleDialog.newChatTitle")}),(0,t.jsx)(l.Input,{"aria-label":H("updateChatTitleDialog.newChatTitle"),autoComplete:"off",autoFocus:!0,className:"w-full",id:"newChatTitle",maxLength:S,onChange:e=>M(e.target.value),placeholder:F||H("updateChatTitleDialog.enterNewTitle"),ref:z,value:T}),(0,t.jsx)(f.InputCounter,{className:"mt-2",count:T.length,max:S,message:"Title must be less than ".concat(S," characters")})]})]}),(0,t.jsxs)(i.ModalFooter,{children:[(0,t.jsx)(r.Button,{onClick:b.closeDialog,size:"sm",type:"button",variant:"secondary",children:H("updateChatTitleDialog.cancel")}),(0,t.jsx)(r.Button,{disabled:E,size:"sm",type:"submit",children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.IconSpinner,{"aria-hidden":"true",className:"size-4"}),(0,t.jsx)("span",{children:H("updateChatTitleDialog.saving")})]}):H("updateChatTitleDialog.save")})]})]})})}var E=e.i(358847),D=(0,E.createServerReference)("407825edb87df24f572ff65550b4d114fa77483607",E.callServer,void 0,E.findSourceMapURL,"deleteChat");e.s(["deleteChat",()=>D],105983)},729602,e=>{"use strict";var t=e.i(979865),n=e.i(726718);function r(e){if(!(0,n.isHome)(e))return(0,n.getChatIdFromPathname)(e)}function i(){return r((0,t.usePathname)())}e.s(["useChatId",()=>i],729602)},652461,e=>{"use strict";e.s(["ChatDeleteDialog",()=>g]);var t=e.i(509473),n=e.i(176248);e.i(563948);var r=e.i(407562),i=e.i(686832),o=e.i(743124),a=e.i(979865),s=e.i(246300),l=e.i(53223),c=e.i(105983),u=e.i(297239),d=e.i(307778),p=e.i(120485),h=e.i(120945);e.i(904347);var f=e.i(37737),m=e.i(729602);function g(e){let{chatId:g}=e,v=(0,a.useRouter)(),x=(0,m.useChatId)(),[y,b]=(0,o.useTransition)(),{setData:w}=(0,s.useChatHistory)(),j=(0,u.useT)(),C=()=>{b(async()=>{try{(0,l.track)("ClickDeleteChat",{targetChatId:g});let e=await (0,c.deleteChat)({payload:{chatId:g}});if(null==e?void 0:e.error)throw Error(e.error);w(e=>e.filter(e=>e.chatId!==g)),(0,f.closeDialog)(),r.toast.success(j("deleteChatDialog.successToast")),x===g&&v.push("/chat")}catch(e){(0,p.handleChatError)(e)||r.toast.error("Something went wrong. Please try again.")}})};return(0,t.jsxs)(h.AtomicDialog,{type:"deleteChat",children:[(0,t.jsxs)(i.ModalHeader,{children:[(0,t.jsx)(i.ModalTitle,{children:j("deleteChatDialog.title")}),(0,t.jsx)(i.ModalDescription,{children:j("deleteChatDialog.description")})]}),(0,t.jsxs)(i.ModalFooter,{children:[(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",onClick:f.closeDialog,children:j("deleteChatDialog.cancel")}),(0,t.jsx)(n.Button,{disabled:y,onClick:C,size:"sm",variant:"destructive",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.IconSpinner,{className:"size-4"}),j("deleteChatDialog.deleting")]}):j("deleteChatDialog.delete")})]})]})}},709717,e=>{"use strict";var t=e.i(358847),n=(0,t.createServerReference)("40575d831c27bbed3fb5577c1d51c31e544e78235c",t.callServer,void 0,t.findSourceMapURL,"restoreBlock");e.s(["restoreBlock",()=>n])},563152,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M12.0607 6.74999L11.5303 7.28032L8.7071 10.1035C8.31657 10.4941 7.68341 10.4941 7.29288 10.1035L4.46966 7.28032L3.93933 6.74999L4.99999 5.68933L5.53032 6.21966L7.99999 8.68933L10.4697 6.21966L11 5.68933L12.0607 6.74999Z" fill="currentColor"/>');e.s(["ChevronDownSmall",0,t])},370912,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(743124);function i(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:o}=(0,n.default)(["block:createdAt",e]);return{getBlockCreatedAt:(0,r.useCallback)(e=>{var t;return null!=(t=null==i?void 0:i.get(e))?t:void 0},[i]),setBlockCreatedAt:(0,r.useCallback)((e,t)=>{o(new Map(null==i?void 0:i.set(e,t)))},[i,o])}}e.s(["useBlockCreatedAt",()=>i])},848258,e=>{"use strict";var t=e.i(743124),n=e.i(92479),r=e.i(979865),i=e.i(346970);function o(){let{parentRef:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,t.useRef)(null),o=(0,t.useRef)(null),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!0),{messages:d,activeForkKey:p}=(0,n.useChatMessages)(),{hashMessageId:h}=(0,n.useChatHashNavigation)(),f=(0,r.usePathname)(),m=(0,t.useRef)(null),g=(0,t.useCallback)((e,t,n,r)=>{o.current&&o.current.scrollToIndex(e,{align:r?"start":"end",smooth:t})},[]),v=(0,t.useCallback)(e=>{g(1/0,e)},[g]),x=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!n){if(m.current===e)return;m.current=e}let i=new Set(null!=r?r:p||[]),o=d.filter(e=>i.has(e.id)).findIndex(t=>t.id===e);-1!==o&&setTimeout(()=>g(o,!0,null==r?void 0:r.length,!0),t)},[d,g,p]),y=(0,t.useCallback)(()=>{if(!i.current)return;let e=i.current.scrollTop,t=i.current.scrollHeight;u(e+i.current.clientHeight>=t-100),l(e<=100)},[]);return(0,t.useEffect)(()=>{let t=e=>{e.preventDefault();let t=window.location.hash.slice(1);t&&x(t)},n=e=>{var t;let n=e.target.closest("a");if(n&&(null==(t=n.getAttribute("href"))?void 0:t.startsWith("#"))){e.preventDefault(),e.stopPropagation();let t=n.getAttribute("href").slice(1);window.history.pushState(null,"","".concat(f,"#").concat(t)),window.scrollTo(0,0),x(t)}},r=null==e?void 0:e.current;return window.addEventListener("hashchange",t),null==r||r.addEventListener("click",n),window.location.hash?x(window.location.hash.slice(1),0):h&&x(h,0),()=>{window.removeEventListener("hashchange",t),null==r||r.removeEventListener("click",n)}},[f,x,h,e]),a({scrollToHash:x,scrollToBottom:v}),{isAtBottom:c,isAtTop:s,containerRef:i,vlistRef:o,scrollToBottom:v,scrollToHash:x,scrollToIndex:g,handleScroll:y}}function a(e){let{data:n,mutate:r}=(0,i.default)("scroll-functions",null,{fallbackData:e?{scrollToHash:e.scrollToHash,scrollToBottom:e.scrollToBottom}:void 0});return(0,t.useEffect)(()=>{e&&r({scrollToHash:e.scrollToHash,scrollToBottom:e.scrollToBottom})},[null==e?void 0:e.scrollToHash,null==e?void 0:e.scrollToBottom,r,e]),null!=n?n:{scrollToHash:()=>{},scrollToBottom:()=>{}}}e.s(["useChatScroll",()=>o,"useScrollToMessage",()=>a])},862664,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(743124);function i(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:o}=(0,n.default)(["blocks-deployed",e]);return{getBlockDeployed:(0,r.useCallback)(e=>{var t;return!!(null==i||null==(t=i.get(e))?void 0:t.deploymentId)},[i]),setBlockDeployed:(0,r.useCallback)((e,t)=>{o(new Map(null==i?void 0:i.set(e,t)))},[i,o])}}e.s(["useDeployedBlocks",()=>i])},314581,723487,e=>{"use strict";function t(e){return e.slice().reverse()}e.s(["toReversed",()=>t],314581);var n=e.i(490293),r=e.i(639056);let i=(0,n.atom)(!1);function o(){let[e,t]=(0,r.useAtom)(i);return[e,t]}e.s(["useHistoryPanel",()=>o],723487)},249897,e=>{"use strict";let t=/^v_(\d+)_/;function n(e){try{let n=e.match(t);if(!n)return console.error("Invalid source version format: ".concat(e)),null;return parseInt(n[1])}catch(t){return console.error("Error parsing source version: ".concat(e),t),null}}e.s(["parseSourceVersionToNumber",()=>n])},301331,e=>{"use strict";e.s(["BlockHistorySelect",()=>T,"useBlockHistory",()=>D,"useBlockSource",()=>I,"usePulsePreview",()=>M,"useSetPulsePreview",()=>L]);var t=e.i(509473),n=e.i(743124),r=e.i(92479),i=e.i(818273),o=e.i(449381),a=e.i(346970),s=e.i(912106),l=e.i(391795),c=e.i(563152),u=e.i(350097),d=e.i(370912),p=e.i(592258),h=e.i(176248),f=e.i(66990),m=e.i(848258),g=e.i(767373),v=e.i(304649),x=e.i(862664),y=e.i(486011),b=e.i(794593),w=e.i(696871),j=e.i(72047),C=e.i(314581),k=e.i(723487),S=e.i(249897);function N(e){let{messages:t,overrides:n,includeNonVersionedBlocks:r}=e,o=[];for(let e of t)if("assistant"===e.role){var a;let t=(0,i.getBlocksFromState)(e.content,e.id,{includeNonVersionedBlocks:r});for(let r of(e.isContentLoading&&(null==(a=e.loadingBlocks)?void 0:a.length)&&o.push(...e.loadingBlocks),t)){let e=null==n?void 0:n[r.id],t={...r,...e};w.INLINE_BLOCK_TYPES.includes(t.type)||o.push(t)}}return{blocks:o}}function E(){let{chatId:e}=(0,r.useChatMessages)(),{data:t,mutate:i}=(0,a.default)(["blocks:overrides",e]);return{blockOverrides:t,updateBlockData:(0,n.useCallback)(e=>{let{blockId:t,data:n}=e;i(e=>({...e,[t]:{...null==e?void 0:e[t],...n}}))},[i])}}let D=e=>{var t;let{blockId:i,searchAll:o=!1,includeNonVersionedBlocks:a=!1}=e,{messages:s,activeForkKey:l}=(0,r.useChatMessages)(),{blockOverrides:c,updateBlockData:u}=E(),{blocks:d}=(0,n.useMemo)(()=>N({messages:s,overrides:c,includeNonVersionedBlocks:a}),[c,s,a]),{allBlocks:p,thisBlock:h}=(0,n.useMemo)(()=>{let e=d.find(e=>e.id===i);if(o)return{allBlocks:d,thisBlock:e};let t=new Set(l);return{allBlocks:d.filter(e=>!!e.messageId&&t.has(e.messageId)),thisBlock:e}},[d,o,l,i]),{projectBlocks:f,activeProject:m,activeVersionIndex:g,activeBlockIndex:v,blockVersions:x}=(0,n.useMemo)(()=>{let e,t,n={},r=-1;for(let o of p){if(w.INLINE_BLOCK_TYPES.includes(o.type))continue;let a="code-project"===o.type?"code-project":o.meta.project||"";n[a]||(n[a]=[]),o.id===i&&(e=a,t=o.meta.file,r=n[a].length),n[a].push(o)}let o=[],a=-1,s=n[e||""];for(let r=0;r<(s?s.length:0);r++){let s=n[e||""][r];s.id===i&&(a=o.length),("code-project"===s.type||s.meta.file===t)&&o.push(s)}return{blockVersions:o,projectBlocks:n,activeProject:e,activeBlockIndex:r,activeVersionIndex:a}},[p,i]),y=(0,n.useCallback)(async e=>{let[t,n]=e,r=p.find(e=>e.id===n)||(null==c?void 0:c[n]),i=g>0?x[g-1]:void 0;async function o(){if(r&&!r.needsBlockSource)return r.source;let e=await A(n);return u({blockId:n,data:{source:e,needsBlockSource:!1}}),e}async function a(){if(!(null==i?void 0:i.needsBlockSource))return null==i?void 0:i.source;let e=await A(i.id);u({blockId:i.id,data:{source:e,needsBlockSource:!1}})}let[s]=await Promise.all([o(),a()]);return s},[g,p,x,u,c]),{trigger:b,isMutating:C}=(0,j.default)(i?["block:source",i]:null,y,{optimisticData:null==h?void 0:h.source}),k=(null==c||null==(t=c[i||"never_match"])?void 0:t.source)||(null==h?void 0:h.source),S=(0,n.useMemo)(()=>p.length>0?p[p.length-1]:null,[p]);return{history:x,allBlocks:p,latestSource:k,projectBlocks:m&&m in f?f[m]:[],projectBlockIndex:v,project:m,currentBlockIndex:g,updateBlockData:u,ensureBlockSource:b,isLoadingBlockSource:C,latestBlock:S,thisBlock:h}};function I(){let{mutate:e}=(0,l.useSWRConfig)();return{ensureBlockSource:(0,n.useCallback)(t=>{e(["block:source",t])},[e])}}async function A(e){let t=await fetch("/chat/api/blocks/source?blockId=".concat(e),{headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch block source");let{source:n}=await t.json();return n}function T(e){let{blockId:i,separator:a=!0}=e,{history:s,currentBlockIndex:l,thisBlock:w}=D({blockId:i,searchAll:!0}),{messages:j,activeForkKey:N}=(0,r.useChatMessages)(),E=(0,r.useSetChatState)(),I=(0,o.useSetActiveBlockState)(),{getBlockCreatedAt:A}=(0,d.useBlockCreatedAt)(),T=(0,o.useActiveBlockState)(),{setPulsePreview:M}=L(),{getBlockDeployed:P}=(0,x.useDeployedBlocks)(),[,R]=(0,k.useHistoryPanel)(),[_,O]=(0,n.useState)(!1),[F,B]=(0,n.useState)(Date.now()),V=(0,n.useCallback)(e=>{O(e),B(Date.now())},[]),{scrollToHash:z}=(0,m.useScrollToMessage)(),H=e=>{let t=s.find(t=>t.id===e);if((null==t?void 0:t.isLoading)||(I(t),!(null==t?void 0:t.messageId)))return;let n=j.map((e,t)=>({...e,parentId:e.parentId||null,createdAt:new Date(t),messageId:e.id})),r=(0,g.computeInitialForkKey)(n,t.messageId);N&&!N.includes(t.messageId)&&E({activeForkKey:r}),M({blockId:t.id}),z(t.messageId,150,!0,r),s.findIndex(t=>t.id===e)<s.length-1&&R(!0)},U=(null==w?void 0:w.sourceVersionKey)&&(0,S.parseSourceVersionToNumber)(w.sourceVersionKey),G=U&&U>1;return s.length<=1?(0,t.jsx)("div",{className:"no-block-history hidden"}):(0,t.jsxs)(t.Fragment,{children:[a?(0,t.jsx)(f.Separator,{className:"mx-1.5 h-[22px]",orientation:"vertical"}):null,(0,t.jsx)("div",{className:"block-history flex gap-1",onMouseDown:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:(0,t.jsxs)(p.Select,{open:_,onOpenChange:V,value:null==T?void 0:T.id,onValueChange:H,children:[(0,t.jsx)(h.Button,{variant:"ghost",size:"sm",className:"h-7 rounded-md pl-2 pr-1 text-v0-gray-900",asChild:!0,children:(0,t.jsx)(p.SelectTrigger,{hideChevron:!0,children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsxs)("span",{children:["v",l+1]}),G&&(0,t.jsx)("span",{children:"(edited)"})]}),(0,t.jsx)(c.ChevronDownSmall,{})]})})}),(0,t.jsx)(p.SelectContent,{align:"end",className:"max-h-64! min-w-60!",children:(0,C.toReversed)(s).map((e,n)=>{let r=null==N?void 0:N.includes(e.messageId);return(0,t.jsx)(p.SelectItem,{iconOnRight:!0,value:e.id,disabled:e.isLoading,className:(0,v.cn)("px-2 py-1.5",!r&&!e.isLoading&&"text-v0-gray-900 hover:text-v0-gray-900 focus:text-v0-gray-900"),children:(0,t.jsxs)("div",{className:"flex flex-col items-start",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[(0,t.jsxs)("div",{children:["Version ",s.length-n]}),P(e.id)?(0,t.jsx)(b.Badge,{prefix:(0,t.jsx)(y.Globe,{}),children:"Deployed"}):null]}),(0,t.jsx)("div",{className:(0,v.cn)("text-[13px] text-v0-gray-900",!r&&!e.isLoading&&"text-v0-gray-500"),children:A(e.id)?(0,u.timeAgo)(new Date(A(e.id)),!0,F):"Just now"})]})},e.id)})})]})})]})}function M(e){let{blockId:t}=e,{data:n}=(0,a.default)(["pulse-preview",t],null,{fallbackData:!1});return{pulsePreview:null!=n&&n}}function L(){return{setPulsePreview:(0,n.useCallback)(e=>{let{blockId:t}=e;(0,s.mutate)(["pulse-preview",t],!0),setTimeout(()=>(0,s.mutate)(["pulse-preview",t],!1),2e3)},[])}}},362777,e=>{"use strict";var t=e.i(358847),n=(0,t.createServerReference)("4072e7b3009edde203cb4ab27443fd2bb5b6888d0f",t.callServer,void 0,t.findSourceMapURL,"undoBlockEdits");e.s(["undoBlockEdits",()=>n])},204575,74356,487581,e=>{"use strict";function t(e){return!0===e||"object"==typeof e&&"warning"in e}e.i(509473),e.i(644471),e.i(836826),e.i(277018),e.i(845210),e.s(["canShowPreview",()=>t],74356);var n=e.i(142219),r=e.i(490293);let i=(0,r.atom)([]),o=(0,r.atom)(null),a=(0,r.atom)(null),s=(0,r.atom)(null);function l(e){return"v0-preview-".concat(e)}async function c(e,t,r){let i=l(e);for(let e=0;e<10;e++){let e=document.getElementById(i);if(e){var a;n.store.set(o,t),n.store.set(s,{callback:r}),null==(a=e.contentWindow)||a.postMessage({type:"preload_client",id:t,__v0_remote__:!0},"*");break}await new Promise(e=>setTimeout(e,200))}}e.s(["previewBlockCollectedErrorsVersion",0,o,"previewBlockDisplayedErrorsVersion",0,a,"previewBlockErrorsAtom",0,i,"previewBlockPreloadingSuccessCallback",0,s],487581),e.s(["getBlockIframeId",()=>l,"preloadIframeForBlock",()=>c],204575)},577247,e=>{"use strict";var t=e.i(743124),n=e.i(167343);let r=new Set,i=new Set;function o(){for(let e of(i.clear(),i.add(window.location.origin),document.querySelectorAll("iframe"))){let t=e.getAttribute("src");if(t&&!t.startsWith("/"))try{let e=new URL(t);i.add(e.origin)}catch(e){console.warn("Invalid iframe src: ".concat(t),e)}}for(let e of document.querySelectorAll("script[src]")){let t=e.getAttribute("src");if(t&&!t.startsWith("/"))try{let e=new URL(t);i.add(e.origin)}catch(e){console.warn("Invalid script src: ".concat(t),e)}}}function a(e,a){(0,t.useEffect)(()=>(r.add(e),()=>{r.delete(e)}),a||[e]),(0,n.default)("global-messages",()=>{o();let e=e=>{if(!e.defaultPrevented){if(!i.has(e.origin)&&(o(),!i.has(e.origin)))return void console.warn("Received message from untrusted origin: ".concat(e.origin,"."));for(let t of r)t(e)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}})}e.s(["useMessage",()=>a])},385671,775320,923510,e=>{"use strict";var t=e.i(490293),n=e.i(753533),r=e.i(254211),i=e.i(142219),o=e.i(569543),a=t,s=i;let l=0,c=.2;function u(e){return Math.round(1e4*e)/1e4}function d(e){let t=e.filter(e=>e.visible);if(0===t.length)return e;if(1===t.length)return e.map(e=>e.visible?{...e,ratio:1}:e);let n=t.reduce((e,t)=>e+t.ratio,0);if(.001>=Math.abs(n-1))return e;let r=1/n;return e.map(e=>e.visible?{...e,ratio:u(e.ratio*r)}:e)}function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.panelsLayout.findIndex(e=>e.id===t);if(-1===r||!e.panelsLayout[r].visible)return e;let i=e.panelsLayout.filter(e=>e.visible);if(i.length<=1)return{panelsLayout:e.panelsLayout.map(e=>e.id===t?{...e,visible:!1,savedRatio:e.ratio,ratio:0,savedVisibility:n?e.visible:e.savedVisibility}:e),mobilePanel:e.mobilePanel};let o=i.filter(e=>e.id!==t).reduce((e,t)=>e+t.ratio,0),a=o>0?1/o:0,s=e.panelsLayout.map(e=>e.id===t?{...e,visible:!1,savedRatio:e.ratio,ratio:0,savedVisibility:n?e.visible:e.savedVisibility}:e.visible?{...e,ratio:u(e.ratio*a)}:e),l=e.mobilePanel;if(e.mobilePanel===t){let e=s.find(e=>e.visible);e&&(l=e.id)}return{panelsLayout:d(s),mobilePanel:l}}function h(e,t){let n=e.panelsLayout.findIndex(e=>e.id===t);if(-1===n||e.panelsLayout[n].visible)return e;let r=e.panelsLayout[n],i=e.panelsLayout.filter(e=>e.visible);if(0===i.length)return{panelsLayout:e.panelsLayout.map(e=>e.id===t?{...e,visible:!0,ratio:1}:e),mobilePanel:e.mobilePanel};let o=c+.05,a=Math.max(o,r.savedRatio||o),s=i.reduce((e,t)=>e+t.ratio,0),l=Math.min(a,.8),p=u(1-l)/s;return{panelsLayout:d(e.panelsLayout.map(e=>e.id===t?{...e,visible:!0,ratio:l}:e.visible?{...e,ratio:u(e.ratio*p)}:e)),mobilePanel:e.mobilePanel}}function f(e,t){return -1===e.panelsLayout.findIndex(e=>e.id===t)?e:{panelsLayout:e.panelsLayout.map(e=>({...e,savedRatio:e.visible?e.ratio:e.savedRatio,savedVisibility:e.visible,visible:e.id===t,ratio:+(e.id===t)})),mobilePanel:t}}function m(e,t,n,r,i,o){var a,s,l,p;let h=e.panelsLayout.findIndex(e=>e.id===t),f=e.panelsLayout.findIndex(e=>e.id===n);if(-1===h||-1===f||!e.panelsLayout[h].visible||!e.panelsLayout[f].visible)return e;let m=e.panelsLayout[h],g=e.panelsLayout[f],v=u(m.ratio+r),x=u(g.ratio-r),y=null!=(a=null==i?void 0:i[t])?a:c,b=null!=(s=null==i?void 0:i[n])?s:c,w=null!=(l=null==o?void 0:o[t])?l:1,j=null!=(p=null==o?void 0:o[n])?p:1;if(v<y||v>w||x<b||x>j)return e;let C=e.panelsLayout.map(e=>e.id===t?{...e,ratio:v}:e.id===n?{...e,ratio:x}:e);return{...e,panelsLayout:d(C)}}function g(e,t){let n=[];return e.panelsLayout.forEach((r,i)=>{n.push(r.visible?"".concat(r.ratio,"fr"):"0fr"),i<e.panelsLayout.length-1&&n.push("".concat(t,"px"))}),n.join(" ")}function v(e){let t=[];return e.panelsLayout.forEach((n,r)=>{t.push(n.id),r<e.panelsLayout.length-1&&t.push("resize-".concat(r))}),'"'.concat(t.join(" "),'"')}function x(e){return{desktopGridTemplateAreas:v(e),desktopGridTemplateColumns:g(e,l),desktopGridTemplateColumnsUsingCqw:g(e,l)}}function y(e){return 1!==e.panelsLayout.filter(e=>e.visible).length?e:{panelsLayout:d(e.panelsLayout.map(e=>!0===e.savedVisibility?{...e,visible:!0,ratio:e.savedRatio||c}:e)),mobilePanel:e.mobilePanel}}e.s(["MIN_PANEL_RATIO",0,c,"RESIZE_HANDLE_WIDTH",0,l,"collapsePanel",()=>p,"computeGridProperties",()=>x,"expandPanel",()=>h,"fullscreenPanel",()=>f,"resizePanel",()=>m,"restoreSavedVisibility",()=>y],775320);var b=n,w=e.i(562489);let j=new Map,C=(0,b.cacheResultById)(j,()=>({resizingId:(0,a.atom)(null),isReordering:(0,a.atom)(!1),disableLayoutAnimations:(0,a.atom)(!1),autoCollapsiblePanels:(0,a.atom)(new Set),panelMinRatios:(0,a.atom)(new Map),panelMaxRatios:(0,a.atom)(new Map),cursorState:(0,a.atom)("normal")}));function k(e){return Object.freeze(e.map(e=>e.id))}function S(e){return Object.freeze(e.filter(e=>e.visible).map(e=>e.id))}function N(e,t){return e.length===t.length&&e.every((e,n)=>e===t[n])}let E=new Map,D=(0,b.cacheResultById)(E,(e,t)=>{let n=C(e),{panelsLayoutAtom:r,mobilePanelAtom:i}=t,o=(0,w.selectAtom)((0,a.atom)(e=>k(e(r))),e=>e,N),s=(0,w.selectAtom)((0,a.atom)(e=>S(e(r))),e=>e,N),l=(0,a.atom)(e=>x({panelsLayout:e(r),mobilePanel:e(i)})),c=(0,a.atom)(()=>!0);return{...n,panelsLayout:r,mobilePanel:i,gridProperties:l,isResizing:(0,a.atom)(e=>null!==e(n.resizingId)),panelOrder:o,visiblePanels:s,visiblePanelsLength:(0,a.atom)(e=>e(s).length),controlsEnabled:c,isEmptyStateVisible:(0,a.atom)(e=>0===e(s).length)}}),I=(e,t)=>{let n=C(e),{panelsLayoutAtom:r,mobilePanelAtom:i}=t,o=e=>{let t=h({panelsLayout:s.store.get(r),mobilePanel:s.store.get(i)},e);s.store.set(r,t.panelsLayout),s.store.set(i,t.mobilePanel)},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=p({panelsLayout:s.store.get(r),mobilePanel:s.store.get(i)},e,t);s.store.set(r,n.panelsLayout),s.store.set(i,n.mobilePanel)};return{setIsResizing:e=>{s.store.set(n.resizingId,e)},resizePanel:e=>{let{index:t,delta:o}=e,a=s.store.get(r),l=s.store.get(i),c=a[t],u=a.slice(t+1).find(e=>e.visible);if(!c||!u||!c.visible)return!1;let d={panelsLayout:a,mobilePanel:l},p=s.store.get(n.panelMinRatios),h=s.store.get(n.panelMaxRatios),f=Object.fromEntries(p),g=Object.fromEntries(h),v=m(d,c.id,u.id,o,f,g);return v!==d&&(s.store.set(r,v.panelsLayout),s.store.set(i,v.mobilePanel),!0)},movePanel:e=>{let{id:t,direction:i}=e,o=s.store.get(r),a=o.findIndex(e=>e.id===t),l=a+("left"===i?-1:1);if(-1===a||l<0||l>=o.length)return;s.store.set(n.isReordering,!0);let c=[...o],u=c[a];c[a]=c[l],c[l]=u,s.store.set(r,c),requestAnimationFrame(()=>{s.store.set(n.isReordering,!1)})},togglePanel:e=>{let t=s.store.get(r),n=s.store.get(i),l=t.find(t=>t.id===e);if(l)if(l.visible){a(e);let n=t.find(t=>t.id!==e&&t.visible);n&&s.store.set(i,n.id)}else o(e),n!==e&&s.store.set(i,e)},openPanel:o,closePanel:a,fullscreenPanel:e=>{let t=f({panelsLayout:s.store.get(r),mobilePanel:s.store.get(i)},e);s.store.set(r,t.panelsLayout),s.store.set(i,t.mobilePanel)},restoreSavedVisibility:()=>{let e=y({panelsLayout:s.store.get(r),mobilePanel:s.store.get(i)});s.store.set(r,e.panelsLayout),s.store.set(i,e.mobilePanel)},setMobilePanel:e=>{s.store.set(i,e)},setPanelsLayout:e=>{s.store.set(r,e)},isPanelFullscreen:e=>{let t=s.store.get(r);return t.some(t=>t.id===e&&t.visible)&&t.every(t=>t.id===e||!t.visible)},registerAutoCollapsiblePanel:e=>{let t=new Set(s.store.get(n.autoCollapsiblePanels));t.add(e),s.store.set(n.autoCollapsiblePanels,t)},unregisterAutoCollapsiblePanel:e=>{let t=new Set(s.store.get(n.autoCollapsiblePanels));t.delete(e),s.store.set(n.autoCollapsiblePanels,t)},isAutoCollapsible:e=>s.store.get(n.autoCollapsiblePanels).has(e),setPanelMinRatio:(e,t)=>{let r=new Map(s.store.get(n.panelMinRatios));r.set(e,t),s.store.set(n.panelMinRatios,r)},setPanelMaxRatio:(e,t)=>{let r=new Map(s.store.get(n.panelMaxRatios));r.set(e,t),s.store.set(n.panelMaxRatios,r)},removePanelRatios:e=>{let t=s.store.get(n.panelMinRatios),r=s.store.get(n.panelMaxRatios),i=new Map(t),o=new Map(r);i.delete(e),o.delete(e),s.store.set(n.panelMinRatios,i),s.store.set(n.panelMaxRatios,o)},getPanelMinRatio:e=>{var t;return null!=(t=s.store.get(n.panelMinRatios).get(e))?t:c},getPanelMaxRatio:e=>{var t;return null!=(t=s.store.get(n.panelMaxRatios).get(e))?t:1},setCursorState:e=>{s.store.set(n.cursorState,e)}}};e.s(["getPanelLayoutActions",0,I,"getPanelLayoutAtoms",0,D],923510);let A=null,T=(0,n.cacheResult)(A,()=>{let e=(0,r.getDurableRootAtoms)("root");return{panelsLayoutAtom:e.chatPanelLayout,mobilePanelAtom:e.chatMobilePanel}}),M=null,L=(0,n.cacheResult)(M,()=>({activeTabIntent:(0,t.atom)("preview"),previewSize:(0,t.atom)("desktop")})),P=null,R=(0,n.cacheResult)(P,()=>{let e=L(),n=D("chat",T());return{...e,isChatOnRight:(0,t.atom)(e=>{var t;return(null==(t=e(n.panelsLayout)[1])?void 0:t.id)===o.CHAT_INPUT_PANEL_ID}),isInputPanelOpen:(0,t.atom)(e=>e(n.panelsLayout).some(e=>e.id===o.CHAT_INPUT_PANEL_ID&&e.visible)),isResizing:(0,t.atom)(e=>e(n.isResizing)),deviceStyles:(0,t.atom)(t=>{let n=t(e.previewSize),r={width:"100%",height:"100%"};switch(n){case"phone":return{width:"max(40cqh, 300px)",height:"max(90%, 600px)"};case"tablet":return{width:"max(70cqh, 700px)",height:"max(55%, 550px)"};default:return r}}),isDesktopPreviewSize:(0,t.atom)(t=>"desktop"===t(e.previewSize))}}),_=null,O=(0,n.cacheResult)(_,()=>{let e=D("chat",T()),t=I("chat",T()),n=L(),r=e=>{t.movePanel({id:o.CHAT_INPUT_PANEL_ID,direction:e?"right":"left"})};return{setChatOnRight:r,toggleInputPanel:()=>{t.togglePanel(o.CHAT_INPUT_PANEL_ID)},setActiveTabIntent:e=>{i.store.set(n.activeTabIntent,e)},toggleChatPosition:()=>{var t;r((null==(t=i.store.get(e.panelsLayout)[1])?void 0:t.id)!==o.CHAT_INPUT_PANEL_ID)},isChatOnRight:()=>{var t;return(null==(t=i.store.get(e.panelsLayout)[1])?void 0:t.id)===o.CHAT_INPUT_PANEL_ID},setMobilePanel:e=>{t.setMobilePanel(e)},setPreviewSize:e=>{i.store.set(n.previewSize,e)}}});function F(){return{atoms:R(),actions:O()}}e.s(["getChatLayoutActions",0,O,"getChatLayoutAtoms",0,R,"getWritableChatPanelLayoutAtoms",0,T,"useChatLayout",()=>F],385671)},483962,407211,638200,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(162061),i=e.i(529693),o=e.i(304649),a=e.i(827728);function s(e){let{show:n,axis:r,side:i,resizing:a,dotsHandle:s,onMouseDown:l,onFocus:c,onBlur:u,ref:d}=e,p={"aria-orientation":"x"===r?"vertical":"horizontal",onBlur:u,onFocus:c,onMouseDown:l,ref:d,role:"separator",tabIndex:0};return s?(0,t.jsx)("div",{className:(0,o.cn)("group absolute flex items-center justify-center focus:outline-hidden","x"===r?(0,o.cn)("inset-y-0 w-5 cursor-col-resize flex-col","start"===i?"left-[-19px]":"right-[-19px]"):(0,o.cn)("inset-x-0 h-5 cursor-row-resize flex-row","start"===i?"top-[-19px]":"bottom-[-19px]")),...p,children:(0,t.jsxs)("div",{className:"flex gap-0.5",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black"}),(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black"}),(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black"}),(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black"}),(0,t.jsx)("div",{className:"size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black"})]})]})}):n?(0,t.jsx)("div",{className:(0,o.cn)("group absolute z-10 focus:outline-hidden","x"===r&&(0,o.cn)("inset-y-0 w-3 cursor-col-resize","start"===i?"-left-1.5":"-right-1.5"),"y"===r&&(0,o.cn)("inset-x-0 h-3 cursor-row-resize","start"===i?"-top-1.5":"-bottom-1.5")),...p,children:(0,t.jsx)("div",{className:(0,o.cn)("absolute inset-0 transition-all duration-200 group-hover:bg-v0-gray-300 group-focus:bg-v0-gray-500","x"===r&&(0,o.cn)("mx-auto group-hover:w-[3px] group-focus:w-[3px]",a?"w-1":"w-0"),"y"===r&&(0,o.cn)("my-auto group-hover:h-[3px] group-focus:h-[3px]",a?"h-1":"h-0"))})}):null}let l=(0,n.memo)(e=>{var l,c;let{show:u,innerClassName:d,dotsHandle:p=!1,onTrack:h,className:f,initialSize:m,animated:g=!0,minSizePx:v,minNegativeSpace:x,axis:y,side:b,children:w,cookieName:j,snapTo:C,forceInitialSize:k,onResize:S,ref:N}=e,E=(0,n.useRef)(null),D=(0,n.useRef)(null),I=(0,n.useRef)(null),[A,T]=(0,n.useState)(!1),[M,L]=(0,n.useState)(!1),[P,R]=(0,n.useState)(0),[_,O]=(0,n.useState)(0),[F,B]=(0,n.useState)(!1),V=(0,n.useState)(()=>{if("undefined"==typeof document)return null;let e=r.default.get(j);if(null===e)return null;let t=Number(e);return isNaN(t)?null:t})[0],z=(0,n.useRef)(k?m:null!=V?V:m);(0,n.useEffect)(()=>{N&&(N.current={setSize:e=>{z.current=e,E.current&&("x"===y?E.current.style.width="".concat(e,"%"):E.current.style.height="".concat(e,"%")),null==S||S(e)},getSize:()=>z.current,getContainer:()=>E.current})},[N,y,S]);let H=(0,n.useCallback)(e=>{var t,n,r,i;e.stopPropagation(),e.preventDefault(),null==(t=D.current)||t.focus(),L(!0),T(!0),R("x"===y?e.clientX:e.clientY),I.current=z.current,O(null!=(i="x"===y?null==(n=E.current)?void 0:n.clientWidth:null==(r=E.current)?void 0:r.clientHeight)?i:0),B(!0)},[y]),U=(0,n.useCallback)(e=>{var t,n;if(!A||!M)return;let r=null==(t=E.current)?void 0:t.parentElement,i=null!=(n="x"===y?null==r?void 0:r.clientWidth:null==r?void 0:r.clientHeight)?n:0,o=_+(P-("x"===y?e.clientX:e.clientY))*("start"===b?1:-1);C&&"y"===y&&o<C.threshold&&(o=C.size);let a=o/i*100;if(void 0!==x){let e=(i-x)/i*100;a>e&&(a=e)}"x"===y?E.current.style.width="".concat(a,"%"):E.current.style.height="".concat(a,"%"),z.current=a,null==S||S(a)},[y,M,A,b,P,_,C,x,S]),G=(0,n.useCallback)(()=>{var e;A&&(T(!1),L(!1),null==(e=D.current)||e.blur(),r.default.set(j,String(z.current),{expires:7}),null==h||h(I.current,z.current))},[j,h,A]);(0,a.useEventListener)("mousemove",U),(0,a.useEventListener)("mouseup",G),(0,a.useEventListener)("keydown",e=>{var t,n,r,i,o;if(!A||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;let a=(e.shiftKey?12:4)*("ArrowLeft"===e.key?1:-1)*("start"===b?1:-1),s=null==(t=E.current)?void 0:t.parentElement,l=null!=(i="x"===y?null==s?void 0:s.clientWidth:null==s?void 0:s.clientHeight)?i:0,c=(null!=(o="x"===y?null==(n=E.current)?void 0:n.clientWidth:null==(r=E.current)?void 0:r.clientHeight)?o:0)/l*100+a;if(C&&"y"===y&&c/100*l<C.threshold&&(c=C.size/l*100),void 0!==x){let e=(l-x)/l*100;c>e&&(c=e)}"x"===y?E.current.style.width="".concat(c,"%"):E.current.style.height="".concat(c,"%"),z.current=c},D);let W=(0,n.useCallback)(()=>{var e;if(void 0===x)return;let t=null==(e=E.current)?void 0:e.parentElement,n="x"===y?null==t?void 0:t.clientWidth:null==t?void 0:t.clientHeight;if(n)return(n-x)/n*100},[y,x]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,o.cn)("fixed inset-0 z-50",A?"x"===y?"cursor-col-resize":"cursor-row-resize":"pointer-events-none")}),(0,t.jsxs)(i.motion.div,{animate:"x"===y?{width:u?"".concat(null!=(l=z.current)?l:m,"%"):"0%",height:"100%",minWidth:u?"".concat(v,"px"):0,maxWidth:u&&x?"".concat(W(),"%"):void 0,opacity:+!!u}:{height:u?"".concat(null!=(c=z.current)?c:m,"%"):"0%",width:"100%",minHeight:u?"".concat(v,"px"):0,maxHeight:u&&x?"".concat(W(),"%"):void 0,opacity:+!!u},"aria-hidden":!u,className:(0,o.cn)("relative",f),inert:!u,initial:!1,layout:"size",onAnimationComplete:()=>{F&&B(!1)},ref:E,transition:F||!g?{type:!1}:{type:"spring",damping:25,stiffness:180,mass:1},children:[(0,t.jsx)(s,{axis:y,dotsHandle:p,onBlur:G,onFocus:()=>{T(!0),B(!0)},onMouseDown:H,ref:D,resizing:A,show:u,side:b}),(0,t.jsx)("div",{className:(0,o.cn)("absolute inset-0",d),children:w})]})]})});l.displayName="Resizable",e.s(["Resizable",()=>l],483962);var c=t,u=e.i(176248),d=n,p=e.i(707827),h=e.i(53223),f=e.i(341448),m=o;function g(e){let{buttonText:t="Run Code",variant:n="default",setOutput:r,codeExecutionBlockProps:i,execute:o,editedValue:a,disabled:s}=e,[l,g]=(0,d.useState)(!1);return(0,c.jsxs)(u.Button,{className:"ghost"===n?"h-6 text-v0-gray-900 has-[>svg]:px-1":"","data-testid":"run-code-button",disabled:l||s,onClick:async()=>{try{g(!0),(0,h.track)("ClickRunCode",{code:a||i.source});let e=await o(i,a);r(e)}finally{g(!1)}},size:"sm",variant:"ghost"===n?"ghost":"secondary",children:[l?(0,c.jsx)(p.Spinner,{size:16,wrapperClassName:"text-gray-500"}):(0,c.jsx)(f.PlayCircle,{className:(0,m.cn)("translate-y-[-0.5px] [&_circle]:[vector-effect:non-scaling-stroke]","ghost"===n?"text-v0-gray-900 [&_path]:fill-gray-500":"text-v0-gray-1000 [&_path]:fill-gray-900")}),t]},"execute")}e.s(["CodeExecutionRunButton",()=>g],407211);var v=t,x=o;function y(e){let{size:t=16,className:n}=e;return(0,v.jsxs)("svg",{className:(0,x.cn)("trash-icon overflow-visible",n),fill:"currentColor",height:t,viewBox:"0 0 16 16",width:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,v.jsx)("style",{children:"\n        .trash-icon .trash-lid {\n            transition: transform 0.35s cubic-bezier(0.35, 0.2, 0.14, 0.95);\n            transform-origin: center;\n        }\n\n        button:has(.trash-icon):hover .trash-lid, button:has(.trash-icon):focus-visible .trash-lid {\n          transform: translate(-0px, -2px) rotate(-10deg);\n        }\n            \n       "}),(0,v.jsx)("path",{className:"trash-lid",clipRule:"evenodd",d:"M6.75 2.75C6.75 2.0596 7.3096 1.5 8 1.5 8.6904 1.5 9.25 2.0596 9.25 2.75V3H6.75V2.75ZM5.25 3V2.75C5.25 1.2312 6.4812 0 8 0 9.5188 0 10.75 1.2312 10.75 2.75V3H12.9201 13 15V4.5H14.25 13.8846 1.75 1V3H1.75 3.0799 5.25Z",fill:"currentColor",fillRule:"evenodd"}),(0,v.jsx)("path",{clipRule:"evenodd",d:"M2.1154 4.5H13.8846L13.1776 13.6917C13.0774 14.9942 11.9913 16 10.6849 16H5.3151C4.0087 16 2.9226 14.9942 2.8224 13.6917L2.1154 4.5ZM4.318 13.5767 3.6198 4.5H12.3802L11.682 13.5767C11.6419 14.0977 11.2075 14.5 10.6849 14.5H5.3151C4.7925 14.5 4.3581 14.0977 4.318 13.5767Z",fill:"currentColor",fillRule:"evenodd"})]})}e.s(["AnimatedTrash",()=>y],638200)},417220,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0.191137 2.06228L0.751694 2.56055L14.2517 14.5605L14.8122 15.0588L15.8088 13.9377L15.2482 13.4394L13.4399 11.832L16.3183 8.48938V7.51059L13.1149 3.79053C10.6442 0.921301 6.36413 0.684726 3.59378 3.07992L1.74824 1.43943L1.18768 0.941162L0.191137 2.06228ZM14.7602 7.99998L12.3187 10.8354L10.6699 9.36978C11.249 8.24171 11.0661 6.82347 10.1213 5.87865C9.08954 4.8469 7.49326 4.72376 6.32676 5.50923L4.72751 4.08767C6.88288 2.36327 10.1023 2.59076 11.9783 4.76931L14.7602 7.99998ZM7.52702 6.57613L9.46929 8.30259C9.56713 7.82531 9.43091 7.30959 9.06063 6.93931C8.64578 6.52446 8.0484 6.4034 7.52702 6.57613ZM-0.318359 7.51059L1.40386 5.5106L2.54051 6.48938L1.23971 7.99998L4.02168 11.2307C5.52853 12.9805 7.90301 13.4734 9.89972 12.7017L10.4405 14.1008C7.88008 15.0904 4.82516 14.4625 2.88503 12.2094L-0.318359 8.48938V7.51059Z" fill="currentColor"/>');e.s(["EyeOff",0,t])},95642,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 1.25C5.33749 1.25 3.02334 2.73677 1.84047 4.92183L1.48342 5.58138L2.80253 6.29548L3.15958 5.63592C4.09084 3.91566 5.90986 2.75 8.00002 2.75C10.4897 2.75 12.5941 4.40488 13.2713 6.67462H11.8243H11.0743V8.17462H11.8243H15.2489C15.6631 8.17462 15.9989 7.83883 15.9989 7.42462V4V3.25H14.4989V4V5.64468C13.4653 3.06882 10.9456 1.25 8.00002 1.25ZM1.50122 10.8555V12.5V13.25H0.0012207V12.5V9.07538C0.0012207 8.66117 0.337007 8.32538 0.751221 8.32538H4.17584H4.92584V9.82538H4.17584H2.72876C3.40596 12.0951 5.51032 13.75 8.00002 13.75C10.0799 13.75 11.8912 12.5958 12.8266 10.8895L13.1871 10.2318L14.5025 10.9529L14.142 11.6105C12.9539 13.7779 10.6494 15.25 8.00002 15.25C5.05453 15.25 2.53485 13.4313 1.50122 10.8555Z" fill="currentColor"/>');e.s(["RefreshClockwise",0,t])},127169,167343,e=>{"use strict";var t=e.i(743124),n=t,r=e.i(957573),i=e.i(827330),o=e.i(355045),a=e.i(887139),s=e.i(391795),l=e.i(9694),c=e.i(762380),u=e.i(957212),d=e.i(642790),p=e.i(518273),h=e.i(726295),f=e.i(912866),m=e.i(635316),g=e.i(649440),v=e.i(754883),x=e.i(265540),y=e.i(671183),b=e.i(612034),w=e.i(396350),j=e.i(880092);let C=n.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),k={dedupe:!0},S=(e,t,i)=>{let{cache:o,compare:a,suspense:S,fallbackData:N,revalidateOnMount:E,revalidateIfStale:D,refreshInterval:I,refreshWhenHidden:A,refreshWhenOffline:T,keepPreviousData:M}=i,[L,P,R,_]=l.SWRGlobalState.get(o),[O,F]=(0,c.serialize)(e),B=(0,n.useRef)(!1),V=(0,n.useRef)(!1),z=(0,n.useRef)(O),H=(0,n.useRef)(t),U=(0,n.useRef)(i),G=()=>U.current,W=()=>G().isVisible()&&G().isOnline(),[q,Z,K,$]=(0,u.createCacheHelper)(o,O),Y=(0,n.useRef)({}).current,J=(0,d.isUndefined)(N)?(0,d.isUndefined)(i.fallback)?p.UNDEFINED:i.fallback[O]:N;J&&(0,h.isPromiseLike)(J)&&(J=C(J));let Q=(e,t)=>{for(let n in Y){let r=n;if("data"===r){if(!a(e[r],t[r])&&(!(0,d.isUndefined)(e[r])||!a(es,t[r])))return!1}else if(t[r]!==e[r])return!1}return!0},X=(0,n.useMemo)(()=>{let e=!!O&&!!t&&((0,d.isUndefined)(E)?!G().isPaused()&&!S&&!1!==D:E),n=t=>{let n=(0,j.mergeObjects)(t);return(delete n._k,e)?{isValidating:!0,isLoading:!0,...n}:n},r=q(),i=$(),o=n(r),a=r===i?o:n(i),s=o;return[()=>{let e=n(q());return Q(e,s)?(s.data=e.data,s.isLoading=e.isLoading,s.isValidating=e.isValidating,s.error=e.error,s):(s=e,e)},()=>a]},[o,O]),ee=(0,r.useSyncExternalStore)((0,n.useCallback)(e=>K(O,(t,n)=>{Q(n,t)||e()}),[o,O]),X[0],X[1]),et=!B.current,en=L[O]&&L[O].length>0,er=ee.data,ei=(0,d.isUndefined)(er)?J:er,eo=ee.error,ea=(0,n.useRef)(ei),es=M?(0,d.isUndefined)(er)?ea.current:er:ei,el=(!en||!!(0,d.isUndefined)(eo))&&(et&&!(0,d.isUndefined)(E)?E:!G().isPaused()&&(S?!(0,d.isUndefined)(ei)&&D:(0,d.isUndefined)(ei)||D)),ec=!!(O&&t&&et&&el),eu=(0,d.isUndefined)(ee.isValidating)?ec:ee.isValidating,ed=(0,d.isUndefined)(ee.isLoading)?ec:ee.isLoading,ep=(0,n.useCallback)(async e=>{let t,n,r=H.current;if(!O||!r||V.current||G().isPaused())return!1;let o=!0,s=e||{},l=!R[O]||!s.dedupe,c=()=>w.IS_REACT_LEGACY?!V.current&&O===z.current&&B.current:O===z.current,u={isValidating:!1,isLoading:!1},h=()=>{Z(u)},v=()=>{let e=R[O];e&&e[1]===n&&delete R[O]},x={isValidating:!0};(0,d.isUndefined)(q().data)&&(x.isLoading=!0);try{if(l&&(Z(x),i.loadingTimeout&&(0,d.isUndefined)(q().data)&&setTimeout(()=>{o&&c()&&G().onLoadingSlow(O,i)},i.loadingTimeout),R[O]=[r(F),(0,f.getTimestamp)()]),[t,n]=R[O],t=await t,l&&setTimeout(v,i.dedupingInterval),!R[O]||R[O][1]!==n)return l&&c()&&G().onDiscarded(O),!1;u.error=p.UNDEFINED;let e=P[O];if(!(0,d.isUndefined)(e)&&(n<=e[0]||n<=e[1]||0===e[1]))return h(),l&&c()&&G().onDiscarded(O),!1;let s=q().data;u.data=a(s,t)?s:t,l&&c()&&G().onSuccess(t,O,i)}catch(n){v();let e=G(),{shouldRetryOnError:t}=e;!e.isPaused()&&(u.error=n,l&&c()&&(e.onError(n,O,e),(!0===t||(0,m.isFunction)(t)&&t(n))&&(!G().revalidateOnFocus||!G().revalidateOnReconnect||W())&&e.onErrorRetry(n,O,e,e=>{let t=L[O];t&&t[0]&&t[0](g.revalidateEvents.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return o=!1,h(),!0},[O,o]),eh=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,v.internalMutate)(o,z.current,...t)},[]);if((0,x.useIsomorphicLayoutEffect)(()=>{H.current=t,U.current=i,(0,d.isUndefined)(er)||(ea.current=er)}),(0,x.useIsomorphicLayoutEffect)(()=>{if(!O)return;let e=ep.bind(p.UNDEFINED,k),t=0,n=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n==g.revalidateEvents.FOCUS_EVENT){let n=Date.now();G().revalidateOnFocus&&n>t&&W()&&(t=n+G().focusThrottleInterval,e())}else if(n==g.revalidateEvents.RECONNECT_EVENT)G().revalidateOnReconnect&&W()&&e();else if(n==g.revalidateEvents.MUTATE_EVENT)return ep();else if(n==g.revalidateEvents.ERROR_REVALIDATE_EVENT)return ep(r)},r=(0,s.subscribeCallback)(O,L,n);return V.current=!1,z.current=O,B.current=!0,Z({_k:F}),el&&((0,d.isUndefined)(ei)||y.IS_SERVER?e():(0,b.rAF)(e)),()=>{V.current=!0,r()}},[O]),(0,x.useIsomorphicLayoutEffect)(()=>{let e;function t(){let t=(0,m.isFunction)(I)?I(q().data):I;t&&-1!==e&&(e=setTimeout(n,t))}function n(){!q().error&&(A||G().isVisible())&&(T||G().isOnline())?ep(k).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[I,A,T,O]),(0,n.useDebugValue)(es),S&&(0,d.isUndefined)(ei)&&O){if(!w.IS_REACT_LEGACY&&y.IS_SERVER)throw Error("Fallback data is required when using Suspense in SSR.");H.current=t,U.current=i,V.current=!1;let e=_[O];if((0,d.isUndefined)(e)||C(eh(e)),(0,d.isUndefined)(eo)){let e=ep(k);(0,d.isUndefined)(es)||(e.status="fulfilled",e.value=!0),C(e)}else throw eo}return{mutate:eh,get data(){return Y.data=!0,es},get error(){return Y.error=!0,eo},get isValidating(){return Y.isValidating=!0,eu},get isLoading(){return Y.isLoading=!0,ed}}};i.OBJECT.defineProperty(o.SWRConfig,"defaultValue",{value:a.defaultConfig});let N=(0,s.withArgs)(S),E=new WeakMap,D="$sub$",I=e=>(t,n,r)=>{let[i,o]=(0,c.serialize)(t),a=i?D+i:void 0,s=e(a,null,r),{cache:l}=r;E.has(l)||E.set(l,[new Map,new Map]);let[d,p]=E.get(l);return(0,x.useIsomorphicLayoutEffect)(()=>{if(!a)return;let[,e]=(0,u.createCacheHelper)(l,a),t=d.get(a)||0,r=(t,n)=>{null!=t?e({error:t}):(e({error:void 0}),s.mutate(n,!1))};if(d.set(a,t+1),!t){let e=n(o,{next:r});if("function"!=typeof e)throw Error("The `subscribe` function must return a function to unsubscribe.");p.set(a,e)}return()=>{let e=d.get(a)-1;if(d.set(a,e),!e){let e=p.get(a);null==e||e()}}},[a]),{get data(){return s.data},get error(){return s.error}}},A=(0,s.withMiddleware)(N,I);e.s(["default",()=>A],167343);let T=new Set;function M(e,n){(0,t.useEffect)(()=>(T.add(e),()=>{T.delete(e)}),n||[e]),A("global-shortcuts",()=>{let e=e=>{if(!e.defaultPrevented)for(let t of T)t(e)};return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0})}})}e.s(["useShortcut",()=>M],127169)},566274,432008,481556,e=>{"use strict";var t=e.i(743124),n=e.i(346970);function r(){var e;let{data:r,mutate:i}=(0,n.default)("result:full-screen"),{mutate:o}=(0,n.default)("state:select"),a=(0,t.useCallback)((e,t)=>{i(n=>{if(!n&&!e)return;let r=new URL(window.location.href),i=r.searchParams,a=i.get("b"),s=null!=t?t:a;return s&&(e?i.set("f","1"):i.delete("f"),i.set("b",s),r.search=i.toString(),window.history.replaceState({},"",r.toString())),o(!1),{value:e}})},[i,o]);return{fullScreenResult:null!=(e=null==r?void 0:r.value)&&e,setFullscreenResult:a,source:null==r?void 0:r.source}}e.s(["useFullscreenResult",()=>r],566274);var i=e.i(509473),o=e.i(152076),a=e.i(304649),s=e.i(529693),l=t;let c=900,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return e<t},d=()=>{let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=window.matchMedia("(max-width: ".concat(c-1,"px)")),n=()=>{t(u(window.innerWidth))};return e.addEventListener("change",n),n(),()=>e.removeEventListener("change",n)},[]),e};e.s(["useShouldShowBlocksInDrawer",0,d],432008);var p=e.i(127169);function h(e){let{children:t,allowOnMobile:n}=e,{fullScreenResult:l,setFullscreenResult:c,source:u}=r(),h=d(),f=l&&(n||!h);(0,p.useShortcut)(e=>{"Escape"===e.key&&c(!1)});let m=e=>{if(!e)return void c(!1);e.target===e.currentTarget&&c(!1)},g=(0,i.jsx)("div",{className:(0,a.cn)(f?"fixed inset-0":"size-full",f&&"ssr"!==u&&"animate-in zoom-in-90"),children:(0,i.jsx)("div",{className:"bg-v0-background-100 size-full overflow-clip!",children:t})}),v=(0,a.cn)(f?"bg-alpha-700 dark:bg-alpha-900 fixed inset-0 z-60":"h-full w-full",f&&"ssr"!==u&&"animate-in fade-in duration-300");if(!f)return(0,i.jsx)("div",{className:"h-full w-full",children:t});let x="ssr"===u?(0,i.jsx)("div",{"data-testid":"fullscreen-overlay-ssr",className:v,onClick:m,children:g}):(0,i.jsx)(s.motion.div,{"data-testid":"fullscreen-overlay",className:v,onClick:m,children:g});return(0,o.createPortal)(x,document.body)}e.s(["FullscreenContainer",()=>h],481556)},242828,(e,t,n)=>{var r="Expected a function",i=0/0,o="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,d=e.g&&e.g.Object===Object&&e.g,p="object"==typeof self&&self&&self.Object===Object&&self,h=d||p||Function("return this")(),f=Object.prototype.toString,m=Math.max,g=Math.min,v=function(){return h.Date.now()};function x(e,t,n){var i,o,a,s,l,c,u=0,d=!1,p=!1,h=!0;if("function"!=typeof e)throw TypeError(r);function f(t){var n=i,r=o;return i=o=void 0,u=t,s=e.apply(r,n)}function x(e){return u=e,l=setTimeout(C,t),d?f(e):s}function b(e){var n=e-c,r=e-u,i=t-n;return p?g(i,a-r):i}function w(e){var n=e-c,r=e-u;return void 0===c||n>=t||n<0||p&&r>=a}function C(){var e=v();if(w(e))return k(e);l=setTimeout(C,b(e))}function k(e){return(l=void 0,h&&i)?f(e):(i=o=void 0,s)}function S(){return void 0===l?s:k(v())}function N(){var e=v(),n=w(e);if(i=arguments,o=this,c=e,n){if(void 0===l)return x(c);if(p)return l=setTimeout(C,t),f(c)}return void 0===l&&(l=setTimeout(C,t)),s}return t=j(t)||0,y(n)&&(d=!!n.leading,a=(p="maxWait"in n)?m(j(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),N.cancel=function(){void 0!==l&&clearTimeout(l),u=0,i=c=o=l=void 0},N.flush=S,N}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){return!!e&&"object"==typeof e}function w(e){return"symbol"==typeof e||b(e)&&f.call(e)==o}function j(e){if("number"==typeof e)return e;if(w(e))return i;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?i:+e}t.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw TypeError(r);return y(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),x(e,t,{leading:i,maxWait:t,trailing:o})}},780752,658252,218139,276221,671908,e=>{"use strict";e.s(["RefreshPreview",()=>c],780752);var t=e.i(509473),n=e.i(743124),r=e.i(899488),i=e.i(95642),o=e.i(297239),a=e.i(204575),s=e.i(768619);let l=e=>{if(!e)return;let t=document.getElementById((0,a.getBlockIframeId)(e));if(t instanceof HTMLIFrameElement)if(t.contentDocument)t.contentDocument.location.reload();else if(t.srcdoc){let e=t.srcdoc;t.srcdoc="",setTimeout(()=>{t.srcdoc=e},10)}else t.src=(0,s.getIframeSrc)(t)};function c(e){let{blockId:a}=e,s=(0,o.useT)(),c=(0,n.useCallback)(()=>{a&&l(a)},[a]);return(0,t.jsx)(r.CodeBlockButton,{"aria-label":s("previewBlock.refresh"),onClick:()=>c(),tooltip:{side:"bottom",content:s("previewBlock.refresh")},children:(0,t.jsx)("span",{children:(0,t.jsx)(i.RefreshClockwise,{})})})}var u=t,d=e.i(566274),p=r,h=e.i(923605),f=o;function m(){let{setFullscreenResult:e}=(0,d.useFullscreenResult)(),t=(0,f.useT)();return(0,u.jsx)(p.CodeBlockButton,{"aria-label":t("previewBlock.fullscreen"),className:"flex",onClick:()=>e(!0),tooltip:{side:"bottom",content:t("previewBlock.fullscreen")},children:(0,u.jsx)(h.Fullscreen,{})})}e.s(["FullscreenButton",()=>m],658252);var g=t,v=n,x=e.i(651219);e.i(563948);var y=e.i(407562),b=e.i(529693),w=e.i(716360),j=e.i(230125),C=e.i(176248),k=o,S=e.i(707827),N=e.i(926788),E=e.i(455552),D=e.i(926224);let I=(0,x.default)(()=>e.A(643931).then(e=>e.ConflictEditor),{loadableGenerated:{modules:[430433]},ssr:!1});function A(e){let{hasUnappliedChanges:t,blockId:n,source:r,onApply:i,showFadeOut:o}=e,[a,s]=(0,v.useState)(!1),[l,c]=(0,v.useState)(!1),u=(0,k.useT)(),[d,p]=(0,v.useState)(null),[h,f]=(0,v.useState)(null),m=async()=>{s(!0);let e=await fetch("/chat/api/chat/remote/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bid:n,blockSource:r})});if(s(!1),e.ok){let t=await e.json();t.success?(c(!0),setTimeout(()=>c(!1),2e3),y.toast.success(u("unappliedChanges.savedChanges"))):(y.toast.error("Local: conflict detected. Check your console"),p(t.conflicts)),i()}else y.toast.error(u("unappliedChanges.failedToApplyChanges"))},x=async()=>{if(h)try{let e=[...(0,D.parseMultiFileSource)({source:r,blockType:"local",blockId:n})];for(let t of h){let n=e.find(e=>e.meta.file===t.file);n&&(n.source=t.content)}let t=(0,E.createMultiFileSource)({files:e,blockType:"local"}),o=await fetch("/chat/api/chat/remote/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bid:n,blockSource:t,resolvedConflicts:!0})});o.ok&&(await o.json()).success?(c(!0),setTimeout(()=>c(!1),2e3),y.toast.success(u("unappliedChanges.savedChanges")),i(),p(null)):y.toast.error(u("unappliedChanges.failedToApplyChanges"))}catch(e){y.toast.error(u("unappliedChanges.failedToApplyChanges"))}},A=(0,v.useCallback)(e=>{e.every(e=>e.resolved)?f(e):f(null)},[]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(w.AnimatePresence,{children:t&&!l?(0,g.jsxs)(g.Fragment,{children:[o?(0,g.jsx)(b.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center bg-linear-to-t to-transparent"},"unsaved-changes-bg"):null,(0,g.jsx)(b.motion.div,{initial:{opacity:0,y:20,scale:.95,width:320},animate:{opacity:1,y:0,scale:1,width:a?96:320},exit:{opacity:0},transition:{duration:.15,ease:"easeOut",width:{type:"spring",stiffness:300,damping:30}},className:"shadow-modal bg-v0-background-100 absolute inset-x-0 bottom-3 z-50 mx-auto flex h-11 items-center justify-between rounded-full p-2 pl-3 text-sm font-medium",children:a?(0,g.jsxs)("div",{className:"flex items-center gap-2 text-v0-gray-900",children:[(0,g.jsx)(S.Spinner,{size:16}),"Saving"]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(j.Warning,{className:"text-v0-gray-900!"}),"Unsaved Changes"]}),(0,g.jsx)("div",{className:"flex items-center gap-2",children:(0,g.jsx)(C.Button,{size:"sm",className:"h-7",rounded:!0,disabled:a,onClick:m,children:u("unappliedChanges.apply")})})]})},"unsaved-changes-island")]}):null}),(0,g.jsx)(N.Dialog,{open:null!==d,children:(0,g.jsxs)(N.DialogContent,{className:"max-h-[90vh] w-full max-w-[90vw] overflow-auto",children:[(0,g.jsxs)(N.DialogHeader,{children:[(0,g.jsx)(N.DialogTitle,{children:"Conflict Detected"}),(0,g.jsx)(N.DialogDescription,{children:"Please resolve them before saving."})]}),(0,g.jsx)(v.Suspense,{fallback:(0,g.jsx)(S.Spinner,{}),children:d?(0,g.jsx)(I,{conflicts:d,onEdit:A}):null}),(0,g.jsxs)(N.DialogFooter,{children:[(0,g.jsx)(C.Button,{variant:"secondary",onClick:()=>{alert("You must resolve conflicts before continuing")},children:"Cancel"}),(0,g.jsx)(C.Button,{onClick:x,disabled:null===h,children:"Confirm"})]})]})})]})}function T(e){let t=(null==e?void 0:e.compiledTailwindPlugin)?e.compiledTailwindPlugin:'@import "tw-animate-css";',n=(null==e?void 0:e.includeFontHints)?"\n  /* optional: --font-sans, --font-serif, --font-mono if they are applied in the layout.tsx */":"";return"".concat((null==e?void 0:e.skipTailwindRuntimeImport)?"":'@import "tailwindcss"',"\n").concat(t,"\n\n@custom-variant dark (&:is(.dark *));\n \n:root {\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: oklch(0.205 0 0);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0 0);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.97 0 0);\n  --accent-foreground: oklch(0.205 0 0);\n  --destructive: oklch(0.577 0.245 27.325);\n  --destructive-foreground: oklch(0.577 0.245 27.325);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --radius: 0.625rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.205 0 0);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n}\n \n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.145 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.145 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.985 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.637 0.237 25.331);\n  --border: oklch(0.269 0 0);\n  --input: oklch(0.269 0 0);\n  --ring: oklch(0.439 0 0);\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(0.269 0 0);\n  --sidebar-ring: oklch(0.439 0 0);\n}\n\n@theme inline {").concat(n||"\n  --font-sans: var(--font-geist-sans);\n  --font-mono: var(--font-geist-mono);\n","\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --color-card: var(--card);\n  --color-card-foreground: var(--card-foreground);\n  --color-popover: var(--popover);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-primary: var(--primary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-secondary: var(--secondary);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-muted: var(--muted);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-accent: var(--accent);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-destructive: var(--destructive);\n  --color-destructive-foreground: var(--destructive-foreground);\n  --color-border: var(--border);\n  --color-input: var(--input);\n  --color-ring: var(--ring);\n  --color-chart-1: var(--chart-1);\n  --color-chart-2: var(--chart-2);\n  --color-chart-3: var(--chart-3);\n  --color-chart-4: var(--chart-4);\n  --color-chart-5: var(--chart-5);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  --color-sidebar: var(--sidebar);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-ring: var(--sidebar-ring);\n}\n \n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}")}e.s(["UnappliedChanges",()=>A],218139),e.s(["createDefaultGlobals",()=>T],276221);let M=["app/globals.css","src/app/globals.css","styles/globals.css","src/styles/globals.css"];function L(e){return R(e.map(e=>e.meta.file))}function P(e){var t;if(!e)return null;let n=L(e);return null!=(t=e.find(e=>e.meta.file===n))?t:null}function R(e){for(let t of M)if(e.some(e=>e===t))return t;return M[0]}function _(e){for(let n of M){var t;let r=null==(t=e.current)?void 0:t.getContent(n);if(r)return{path:n,content:r}}return{path:null,content:null}}e.s(["getGlobalsCssFromFiles",()=>P,"getGlobalsCssPathFromFiles",()=>L,"getGlobalsCssWithInlineEdit",()=>_],671908)},534607,e=>{"use strict";var t=e.i(743124);function n(){let[e,n]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{n(navigator.userAgent.toUpperCase().includes("MAC"))},[]),e}e.s(["useMac",()=>n])},661385,e=>{"use strict";async function t(e){let t=await fetch("/chat/api/blocks",{method:"PUT",body:JSON.stringify(e)});if(!t.ok)return{success:!1};let n=await t.json();return{success:n.success,transformedSource:n.success?n.transformedSource:void 0,sourceVersionKey:n.success?n.sourceVersionKey:void 0}}e.s(["updateCodeBlockSource",()=>t])},942371,458016,e=>{"use strict";var t=e.i(936096);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM10.5 11.5607L9.96967 11.0303L8 9.06066L6.03033 11.0303L5.5 11.5607L4.43934 10.5L4.96967 9.96967L6.93934 8L4.96967 6.03033L4.43934 5.5L5.5 4.43934L6.03033 4.96967L8 6.93934L9.96967 4.96967L10.5 4.43934L11.5607 5.5L11.0303 6.03033L9.06066 8L11.0303 9.96967L11.5607 10.5L10.5 11.5607Z" fill="currentColor"/>');e.s(["CrossCircleFill",0,n],942371);let r=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9.24996 12.0607L8.71963 11.5303L5.89641 8.7071C5.50588 8.31657 5.50588 7.68341 5.89641 7.29288L8.71963 4.46966L9.24996 3.93933L10.3106 4.99999L9.78029 5.53032L7.31062 7.99999L9.78029 10.4697L10.3106 11L9.24996 12.0607Z" fill="currentColor"/>');e.s(["ChevronLeftSmall",0,r],458016)},180131,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.55846 0.5C9.13413 0.5 9.65902 0.829456 9.90929 1.34788L15.8073 13.5653C16.1279 14.2293 15.6441 15 14.9068 15H1.09316C0.355835 15 -0.127943 14.2293 0.192608 13.5653L6.09065 1.34787C6.34092 0.829454 6.86581 0.5 7.44148 0.5H8.55846ZM8.74997 4.75V5.5V8V8.75H7.24997V8V5.5V4.75H8.74997ZM7.99997 12C8.55226 12 8.99997 11.5523 8.99997 11C8.99997 10.4477 8.55226 10 7.99997 10C7.44769 10 6.99997 10.4477 6.99997 11C6.99997 11.5523 7.44769 12 7.99997 12Z" fill="currentColor"/>');e.s(["WarningFill",0,t])},674523,e=>{"use strict";let t=["upstash","neon","supabase","blob","groq","fal","deepinfra","xai"],n={upstash:"Upstash for Redis",neon:"Neon",supabase:"Supabase",blob:"Blob",groq:"Groq",xai:"Grok",fal:"fal",deepinfra:"Deep Infra","api-key":"Groq"},r={"Upstash for Redis":"upstash",Neon:"neon",Supabase:"supabase",Blob:"blob",Groq:"groq",Grok:"xai",fal:"fal","Deep Infra":"deepinfra"},i={"Upstash for Redis":"database",Neon:"database",Supabase:"database",Blob:"database",Groq:"ai",Grok:"ai",fal:"ai","Deep Infra":"ai"},o={Supabase:"/chat-static/citation/supabase.svg",Neon:"/chat-static/citation/neon.svg","Upstash for Redis":"/chat-static/citation/upstash.svg",Blob:"/chat-static/icons/blob-no-background.svg",fal:"/chat-static/icons/fal.svg",Groq:"/chat-static/icons/groq-no-background.svg",Grok:"/chat-static/icons/grok.svg","Deep Infra":"/chat-static/icons/deepinfra.svg"},a=["supabase","neon"],s=["Groq","Grok","fal","Deep Infra"],l=[new Set(a)],c={"edge-config":{title:"Edge Config",description:"Ultra-low latency reads",icon:"/chat-static/icons/edge-config.svg"},blob:{title:"Blob",description:"Fast object storage",icon:"/chat-static/icons/blob.svg"}};e.s(["AI_INTEGRATION_NAMES",0,s,"INTEGRATION_NAME_TO_CATEGORY",0,i,"INTEGRATION_NAME_TO_SLUG",0,r,"INTEGRATION_NAME_TO_SVG",0,o,"INTEGRATION_SLUG_TO_NAME",0,n,"POTENTIALLY_CONFLICTING_INTEGRATIONS",0,l,"RECOMMENDED_INTEGRATION_SLUGS",0,t,"SQL_STORE_SLUGS",0,a,"STORE_INFO",0,c])},921097,28683,e=>{"use strict";var t=e.i(346970);function n(e){let{data:n,isLoading:r,mutate:i,error:o}=(0,t.default)(e?["chat:dont-show-again",e]:null,{revalidateOnFocus:!1,revalidateOnMount:!1,revalidateOnReconnect:!1}),a=(t,r)=>{if(!e)return;let o=[...n||[],...t,...r];return i(async()=>{let n=await fetch("/chat/api/chat/integrations/dont-show-again",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatId:e,missingEnvVars:t,missingIntegrations:r})});if(!(await n.json()).success)throw Error('Failed to update "don\'t show again" list');return o},{optimisticData:o,rollbackOnError:!0,revalidate:!1})};return{dontShowAgain:n,isLoading:r,error:o,refetchDontShowAgain:i,addToDontShowAgain:a}}e.s(["useDontShowAgain",()=>n],921097);let r=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 4.5C14.3284 4.5 15 3.82843 15 3C15 2.17157 14.3284 1.5 13.5 1.5C13.1212 1.5 12.7752 1.64043 12.5111 1.87207C12.4768 1.89889 12.4444 1.92909 12.4143 1.96262L8.29606 6.55029L7.64437 4.68404C6.97852 2.77723 5.17966 1.5 3.15993 1.5H2V3H3.15993C4.54185 3 5.77265 3.87389 6.22823 5.17855L7.1522 7.82454L4.24177 11.0667C3.85139 11.5016 3.16427 11.5008 2.57158 11.5001C2.54756 11.5 2.52369 11.5 2.5 11.5C1.67157 11.5 1 12.1716 1 13C1 13.8284 1.67157 14.5 2.5 14.5C2.87465 14.5 3.21721 14.3627 3.48009 14.1356C3.52245 14.1049 3.56223 14.0692 3.59859 14.0287L7.71672 9.44115L8.87551 12.7596C9.23003 13.7748 10.1878 14.4548 11.2631 14.4548C11.9338 14.4548 12.5771 14.1884 13.0514 13.7141L14.5303 12.2352L13.4697 11.1745L11.9907 12.6534C11.7978 12.8464 11.536 12.9548 11.2631 12.9548C10.8256 12.9548 10.4359 12.6781 10.2917 12.2651L8.86058 8.1669L11.7636 4.93297C12.1536 4.49852 12.8399 4.49929 13.4317 4.49995C13.4546 4.49997 13.4774 4.5 13.5 4.5Z" fill="currentColor"/>');e.s(["Variable",0,r],28683)},87934,e=>{"use strict";var t=e.i(358847),n=(0,t.createServerReference)("408718a11ff990f43ad53142d0ad5f72bb4d3719e3",t.callServer,void 0,t.findSourceMapURL,"exportChat");e.s(["exportChat",()=>n])},967658,e=>{"use strict";let t=(0,e.i(121793).default)("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);e.s(["default",()=>t])},685816,e=>{"use strict";var t=e.i(967658);e.s(["FileJson",()=>t.default])},564997,e=>{"use strict";e.s(["ExportChatButton",()=>p,"V0_CHAT_FILE_PREFIX",()=>d]);var t=e.i(509473),n=e.i(743124),r=e.i(176248),i=e.i(87934);e.i(563948);var o=e.i(407562),a=e.i(707827),s=e.i(685816),l=e.i(120485),c=e.i(403055),u=e.i(729602);let d="v0-chat-export";function p(e){let{className:p}=e,[h,f]=(0,n.useTransition)(),m=(0,u.useChatId)(),g=()=>{f(async()=>{if(!m)return void o.toast.error("Chat ID not found.");try{let e=await (0,i.exportChat)({payload:{chatId:m}});if("error"in e)throw Error(e.error);let t=new Blob([JSON.stringify(e.data)],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="".concat(d,"-").concat(m,"-").concat(new Date().toISOString(),".json"),r.click(),URL.revokeObjectURL(n)}catch(e){(0,l.handleChatError)(e)||o.toast.error("Something went wrong. Please try again.")}})};return(0,t.jsx)(r.Button,{disabled:h,onClick:g,className:(0,c.cn)("size-7 rounded-md px-1 py-1.5 text-v0-gray-1000",p),size:"sm",tooltip:{side:"bottom",content:"Export Chat (AI Team only)"},variant:"secondary",children:h?(0,t.jsx)(a.Spinner,{}):(0,t.jsx)(s.FileJson,{})})}},779948,962941,e=>{"use strict";var t=e.i(936096);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9 2H9.75H14.25H15V3.5H14.25H9.75H9V2ZM9 12.5H9.75H14.25H15V14H14.25H9.75H9V12.5ZM9.75 7.25H9V8.75H9.75H14.25H15V7.25H14.25H9.75ZM1 12.5H1.75H2.25H3V14H2.25H1.75H1V12.5ZM1.75 2H1V3.5H1.75H2.25H3V2H2.25H1.75ZM1 7.25H1.75H2.25H3V8.75H2.25H1.75H1V7.25ZM5.75 12.5H5V14H5.75H6.25H7V12.5H6.25H5.75ZM5 2H5.75H6.25H7V3.5H6.25H5.75H5V2ZM5.75 7.25H5V8.75H5.75H6.25H7V7.25H6.25H5.75Z" fill="currentColor"/>');e.s(["Logs",0,n],779948);let r=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 4.6736V9.09116L15 10.7065V4.44907C15 4.16343 14.8779 3.89142 14.6644 3.70166L10.7842 0.252591C10.6011 0.0898786 10.3647 0 10.1198 0H2.5H1V1.5V13.5C1 14.8807 2.11929 16 3.5 16H11.7275L11.3016 15.5414L10.3346 14.5H3.5C2.94772 14.5 2.5 14.0523 2.5 13.5V1.5H9.9297L13.5 4.6736ZM8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6ZM4.5 8C4.5 6.067 6.067 4.5 8 4.5C9.933 4.5 11.5 6.067 11.5 8C11.5 8.63488 11.331 9.23028 11.0354 9.74364L14.0496 12.9897L14.5599 13.5393L13.4607 14.5599L12.9504 14.0103L10.0223 10.857C9.4512 11.262 8.7534 11.5 8 11.5C6.067 11.5 4.5 9.933 4.5 8Z" fill="currentColor"/>');e.s(["PreviewDocument",0,r],962941)},744128,e=>{"use strict";let t=(0,e.i(121793).default)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);e.s(["default",()=>t])},625402,e=>{"use strict";var t=e.i(509473),n=e.i(176248),r=e.i(92479),i=e.i(502398),o=e.i(556355),a=e.i(779948),s=e.i(846722),l=e.i(962941),c=e.i(459342),u=e.i(744128),u=u,d=e.i(304649);function p(e){let{messageId:n}=e,{chatId:a}=(0,r.useChatId)(),s=new URL("/chat/internal/chats",window.location.origin);return a?(s.searchParams.set("chatId",a),s.searchParams.set("messageId",n),(0,t.jsx)(i.Link,{external:!0,href:s.toString(),children:(0,t.jsxs)(o.DropdownMenuItem,{children:[(0,t.jsx)(l.PreviewDocument,{})," View Internal Page"]})})):null}function h(e){let{messageId:n}=e,{chatId:s}=(0,r.useChatId)(),l=new URL("/chat/internal/agent-logs",window.location.origin);return s?(l.searchParams.set("q",n),(0,t.jsx)(i.Link,{external:!0,href:l.toString(),children:(0,t.jsxs)(o.DropdownMenuItem,{children:[(0,t.jsx)(a.Logs,{})," Agent Logs"]})})):null}function f(e){let{messageId:n}=e,{chatId:a}=(0,r.useChatId)(),l=new URL("/chat/internal/browse",window.location.origin);return a?(l.searchParams.set("q",n),(0,t.jsx)(i.Link,{external:!0,href:l.toString(),children:(0,t.jsxs)(o.DropdownMenuItem,{children:[(0,t.jsx)(s.MagnifyingGlass,{})," Browse Data"]})})):null}function m(e){let{chatId:r,className:i}=e;if(!r)return null;let o=new URL("/chat/internal/chats",window.location.origin);return o.searchParams.set("chatId",r),(0,t.jsx)(n.Button,{onClick:()=>{window.open(o.href,"_blank")},className:(0,d.cn)("size-7 rounded-md",i),size:"sm",tooltip:{side:"bottom",content:"View Internal Page (AI Team Only)"},variant:"secondary",children:(0,t.jsx)(l.PreviewDocument,{})})}function g(e){let{chatId:n,messageId:r}=e;return n?(0,t.jsx)(i.Link,{external:!0,href:(0,c.getInspectLink)({chatId:n,messageId:r}),children:(0,t.jsxs)(o.DropdownMenuItem,{children:[(0,t.jsx)(u.default,{})," View in Braintrust"]})}):null}e.s(["OpenInBraintrustButton",()=>g,"OpenInInternalButton",()=>m,"OpenMessageInInternalAgentLogsButton",()=>h,"OpenMessageInInternalBrowseButton",()=>f,"OpenMessageInInternalButton",()=>p],625402)},697856,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(743124),i=e.i(358847),o=(0,i.createServerReference)("4075639dcbda5329d91c65f375a63dd0365237c802",i.callServer,void 0,i.findSourceMapURL,"updateBlockShareStatus");e.i(563948);var a=e.i(407562);function s(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:s}=(0,n.default)(["blocks-shared",e]),l=(0,r.useCallback)(e=>{var t;return null!=(t=null==i?void 0:i.get(e))&&t},[i]);return{getBlockShared:l,setBlockShared:(0,r.useCallback)((e,t)=>{s(new Map(null==i?void 0:i.set(e,t)));try{o({blockId:e,shared:t})}catch(e){a.toast.error("Failed to update block publish status")}},[i,s]),updateBlockInSharedMap:(0,r.useCallback)((e,t)=>{s(new Map(null==i?void 0:i.set(e,t)))},[i,s])}}e.s(["useSharedBlocks",()=>s],697856)},499282,e=>{"use strict";function t(e){return(null==e?void 0:e.type)==="code-project"||(null==e?void 0:e.type)==="react"||(null==e?void 0:e.type)==="v0"||(null==e?void 0:e.type)==="tsx"}e.s(["canBeDeployed",()=>t])},341003,580643,811135,e=>{"use strict";var t=e.i(509473),n=e.i(304649),r=e.i(176248),i=e.i(543017);function o(e){let{children:o,Icon:a,selected:s,className:l,onClick:c}=e;return(0,t.jsxs)(r.Button,{className:(0,n.cn)("focus:bg-v0-background-100 flex h-12 items-center justify-between gap-1 px-4 font-medium text-v0-gray-1000 shadow-none transition-colors hover:focus:bg-v0-gray-100",s&&"border border-v0-blue-700 bg-v0-blue-100 text-v0-blue-700 hover:border-v0-blue-700 hover:bg-v0-blue-100 hover:brightness-97 focus:border-v0-blue-700 focus:bg-v0-blue-100 hover:focus:bg-v0-blue-100 focus-visible:border-v0-blue-700",l),onClick:c,size:"sm",type:"button",variant:"secondary",children:[(0,t.jsxs)("div",{className:"shrink-1 flex items-center gap-2 overflow-hidden",children:[a&&(0,t.jsx)(a,{className:"h-4 w-4 shrink-0"}),(0,t.jsx)("span",{className:"overflow-hidden text-ellipsis",children:o})]}),(0,t.jsx)("div",{className:(0,n.cn)("flex size-4 shrink-0 items-center justify-center rounded-sm border text-v0-white",s&&"border-0 bg-v0-blue-700"),children:s?(0,t.jsx)(i.Check,{className:"stroke-background h-2 w-2"}):null})]})}e.s(["RadioButton",()=>o],341003);var a=e.i(743124);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,a.useState)(new Set(e)),r=e=>t.has(e);return{values:[...t],has:r,toggle:e=>n(t=>new Set(t.delete(e)?t:t.add(e))),clear:()=>n(new Set)}}e.s(["useMultiSelect",()=>s],580643);let l=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 2.38401C2.64568 2.28957 2.84672 2.17097 3.09632 2.0516C3.67556 1.77457 4.50202 1.5 5.5 1.5C6.36835 1.5 7.01666 1.91731 7.76416 2.47582C7.81395 2.51302 7.86487 2.55137 7.91678 2.59046C8.2325 2.82825 8.58515 3.09385 8.94862 3.30046C9.38732 3.54983 9.90016 3.75 10.5 3.75C11.4771 3.75 12.5081 3.46807 13.2589 3.20897C13.3421 3.18026 13.4226 3.15157 13.5 3.12321V8.81917C13.366 8.88807 13.1923 8.96944 12.9825 9.05151C12.4127 9.27435 11.5825 9.49998 10.5568 9.49998C9.65149 9.49998 9.11435 9.17173 8.42753 8.74001L8.40495 8.72582C7.70405 8.28516 6.85285 7.75 5.5 7.75C4.25466 7.75 3.22521 8.08445 2.5 8.42432V2.38401ZM2.5 10.134V15.25V16H1V15.25V2V1.65215L1.26554 1.42746L1.75 2C1.26554 1.42746 1.26576 1.42728 1.26599 1.42709L1.26646 1.42668L1.26752 1.42579L1.27005 1.42367L1.27679 1.41807L1.29689 1.4017C1.31321 1.38857 1.33537 1.37107 1.36321 1.34985C1.41885 1.30743 1.49735 1.24998 1.59739 1.18261C1.79715 1.04807 2.08466 0.872716 2.44914 0.698399C3.17671 0.350428 4.22526 0 5.5 0C6.90437 0 7.9038 0.707694 8.66198 1.27418C8.72015 1.31765 8.77638 1.3599 8.831 1.40094C9.15213 1.64223 9.41729 1.84147 9.68987 1.99641C9.99337 2.16892 10.2476 2.25 10.5 2.25C11.2275 2.25 12.0715 2.03193 12.7695 1.79103C13.1109 1.67321 13.4025 1.55523 13.6079 1.46707C13.7104 1.42308 13.7908 1.38677 13.8446 1.36197C13.8714 1.34957 13.8916 1.34007 13.9044 1.33395L13.9182 1.32736L13.9206 1.32621L13.9208 1.32612L13.9209 1.32608L13.9209 1.32605L13.9211 1.32597L15 0.798502V2V9.24998V9.6392L14.6817 9.86326L14.25 9.24998C14.6817 9.86326 14.6815 9.86342 14.6813 9.86359L14.6808 9.86394L14.6797 9.86471L14.6771 9.86653L14.6702 9.87124L14.6502 9.88477C14.6341 9.89556 14.6123 9.90981 14.5851 9.92701C14.5307 9.96141 14.4542 10.0077 14.3569 10.0618C14.1624 10.1699 13.8834 10.3098 13.5289 10.4485C12.8202 10.7256 11.8039 11 10.5568 11C9.20395 11 8.35275 10.4648 7.65185 10.0242L7.62928 10.01C6.94245 9.57826 6.40532 9.25 5.5 9.25C4.50202 9.25 3.67557 9.52457 3.09633 9.8016C2.84672 9.92098 2.64568 10.0396 2.5 10.134ZM2.23212 10.3245C2.23169 10.3249 2.23159 10.325 2.23184 10.3248L2.23212 10.3245Z" fill="currentColor"/>');e.s(["Flag",0,l],811135)},5894,e=>{"use strict";e.s(["ChatFlagBlockDialog",()=>j,"FlagBlockButton",()=>C],5894);var t=e.i(509473),n=e.i(743124),r=e.i(176248),i=e.i(216445);e.i(563948);var o=e.i(407562),a=e.i(707974),s=e.i(341003),l=e.i(580643),c=e.i(92479),u=e.i(304649),d=e.i(686832),p=e.i(297239),h=e.i(32170),f=e.i(811135),m=e.i(556355),g=e.i(358847),v=(0,g.createServerReference)("405126498c50239d4669a2c814727bb6a04f30e083",g.callServer,void 0,g.findSourceMapURL,"sendFlag"),x=e.i(51940),y=e.i(120945);e.i(904347);var b=e.i(37737);function w(e){let{children:n,value:r,reasons:i}=e;return(0,t.jsx)(s.RadioButton,{className:"max-sm:text-xs",onClick:()=>i.toggle(r),selected:i.has(r),children:n})}function j(e){let{blockId:s}=e,{chatId:f}=(0,c.useChatId)(),{user:m}=(0,h.useUser)(),[g,j]=(0,n.useState)(""),C=(0,l.useMultiSelect)(),k=(0,p.useT)(),S=(0,n.useCallback)(()=>{j(""),C.clear(),(0,b.closeDialog)()},[C]),N=(0,n.useCallback)(async e=>{if(e.preventDefault(),!f)return void o.toast.error("Failed to submit flag. Please try again later.");try{await Promise.all([S(),v({feedback:g,reasons:C.values,chatId:f,blockId:s,userId:null==m?void 0:m.id}),o.toast.success("Successfully flagged Block")])}catch(e){console.error(e),o.toast.error("Failed to submit flag. Please try again later.")}},[S,g,C.values,f,s,null==m?void 0:m.id]),E=(0,n.useMemo)(()=>(0,t.jsxs)("form",{className:(0,u.cn)("flex flex-col","gap-3 sm:gap-6"),onSubmit:N,children:[(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)("div",{className:"grid w-full grid-cols-2 items-center justify-start gap-2",children:[(0,t.jsx)(w,{reasons:C,value:"inappropriate",children:"Inappropriate Content"}),(0,t.jsx)(w,{reasons:C,value:"copyright",children:"Copyright Violation"}),(0,t.jsx)(w,{reasons:C,value:"illegal",children:"Illegal Content"}),(0,t.jsx)(w,{reasons:C,value:"other",children:"Other"})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(a.Label,{className:"text-sm font-normal text-v0-gray-900",htmlFor:"downvote-feedback",children:"Please provide your reasoning for flagging this generation."}),(0,t.jsx)(i.Textarea,{asChild:!0,children:(0,t.jsx)(x.ResizableTextArea,{id:"downvote-feedback",name:"feedback",onChange:e=>j(e.target.value),placeholder:"Additional information...",minHeight:80,maxHeight:192,value:g})})]}),(0,t.jsxs)("div",{className:"flex-col-reverse sm:flex-row flex w-full items-center justify-end gap-2",children:[(0,t.jsx)(r.Button,{className:"max-sm:w-full",onClick:e=>{e.preventDefault(),S()},size:"sm",variant:"secondary",children:k("downvoteDialog.cancel")}),(0,t.jsx)(r.Button,{className:"max-sm:w-full",size:"sm",type:"submit",children:k("downvoteDialog.submit")})]})]}),[N,C,k,g,S]);return(0,t.jsx)(y.AtomicDialog,{type:"flagBlock",children:(0,t.jsxs)("div",{className:"overflow-auto",children:[(0,t.jsxs)(d.ModalHeader,{children:[(0,t.jsx)(d.ModalTitle,{children:"Flag a generation"}),(0,t.jsx)(d.ModalDescription,{children:"Flag a generation for inappropriate, abusive, or illegal content."})]}),(0,t.jsx)(d.ModalContent,{children:E})]})})}function C(e){let{blockId:i,isMenuItem:o=!1,closeMenu:a,...s}=e,l=(0,n.useCallback)(()=>{a&&a(),(0,b.openDialog)({type:"flagBlock",data:{blockId:i}})},[a,i]);return o?(0,t.jsxs)(m.DropdownMenuItem,{onClick:l,children:[(0,t.jsx)(f.Flag,{}),(0,t.jsx)("span",{children:"Flag"})]}):(0,t.jsx)(r.Button,{"aria-label":"Flag Generation",onClick:l,size:"sm",className:"size-7 rounded-md",tooltip:"Flag",variant:"ghost",...s,children:(0,t.jsx)(f.Flag,{})})}},472914,435106,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(753533),i=e.i(142219),o=e.i(490293);let a=null,s=(0,r.cacheResult)(a,()=>({isPointerDown:(0,o.atom)(!1),lastInteract:(0,o.atom)(0)})),l=null,c=(0,r.cacheResult)(l,()=>({...s()}));function u(){let e=s();return{setPointerDown:t=>{i.store.set(e.isPointerDown,t)},setLastInteract:t=>{i.store.set(e.lastInteract,t)}}}e.s(["getUserInputActions",()=>u,"getUserInputAtoms",0,c],435106);var d=e.i(639056),p=e.i(827728);function h(e){let{children:n,debug:r}=e;return g(),(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsx)(f,{}),n]})}function f(){let e=c(),r=(0,d.useAtomValue)(e.isPointerDown),i=(0,d.useAtomValue)(e.lastInteract),o=(0,n.useMemo)(()=>[{name:"isPointerDown",value:r},{name:"lastInteract",value:i}],[r,i]);return(0,t.jsx)("div",{className:"pointer-events-none fixed left-0 top-0 h-full w-full",children:o.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.name}),(0,t.jsx)("div",{children:JSON.stringify(e.value)})]},e.name))})}let m={passive:!0,capture:!0};function g(){let e=u(),t=(0,n.useCallback)(()=>{e.setPointerDown(!0),e.setLastInteract(Date.now())},[e]),r=(0,n.useCallback)(()=>{e.setPointerDown(!1)},[e]),i=(0,n.useCallback)(()=>{e.setPointerDown(!1),e.setLastInteract(Date.now())},[e]),o=(0,n.useCallback)(()=>{"hidden"===document.visibilityState&&i()},[i]),a=(0,n.useCallback)(()=>{e.setLastInteract(Date.now())},[e]),s=(0,n.useCallback)(()=>{e.setLastInteract(Date.now())},[e]);(0,p.useEventListener)("blur",i,void 0,m),(0,p.useEventListener)("pointerdown",t,void 0,m),(0,p.useEventListener)("pointerup",r,void 0,m),(0,p.useEventListener)("mouseleave",i,void 0,m),(0,p.useEventListener)("mousemove",a,void 0,m),(0,p.useEventListener)("keydown",s,void 0,m),(0,p.useEventListener)("visibilitychange",o,{current:"undefined"!=typeof document?document:null},m)}e.s(["UserInputProvider",()=>h],472914)},528517,e=>{"use strict";e.i(472914),e.i(435106),e.s([])},275215,668887,e=>{"use strict";e.s(["getSidebarActions",()=>_,"getSidebarAtoms",()=>S,"getWritableSidebarAtoms",()=>k],275215);var t=e.i(753533),n=e.i(142219),r=e.i(254211),i=e.i(490293);e.i(528517);var o=e.i(435106);e.s(["getDesignModeEnabled",()=>g,"useCurrentBlockDesignMode",()=>j,"useDesignModeEnabled",()=>m],668887);var a=i,s=e.i(639056),l=n,c=t,u=e.i(449381),d=e.i(92479),p=e.i(418929),h=e.i(84079);let f=(0,a.atom)(!1);function m(){return(0,s.useAtomValue)(f)}function g(e){return e(f)}let v=new Map,x=(0,c.cacheResultById)(v,()=>({previewTheme:(0,a.atom)("light"),undoHistory:(0,a.atom)([]),redoHistory:(0,a.atom)([]),lastFileContent:(0,a.atom)(null),currentQueue:(0,a.atom)({current:[]}),saveNextState:(0,a.atom)(!1),lastIsPreview:(0,a.atom)(!1),pendingDesignSystem:(0,a.atom)({isPending:!1,designSystemId:null})})),y=new Map,b=(0,c.cacheResultById)(y,e=>{let t=x(e);return{...t,designModeEnabled:(0,a.atom)(e=>e(f)),canUndo:(0,a.atom)(e=>e(t.undoHistory).length>0),canRedo:(0,a.atom)(e=>e(t.redoHistory).length>0)}});function w(e){let{blockId:t,chatId:n}=e,r=x(t),i=(0,p.getPromptActions)(n),o=()=>{(0,h.sendToIframeFromBlockId)(t,{type:"devtools_cleanup_theme"})};return{setDesignModeEnabled:e=>{let t=l.store.get(f);l.store.set(f,e),e&&o(),!e&&(o(),i.clearRefinementElementSelected(),t&&i.focusPrompt())},initializePreviewTheme:e=>(l.store.set(r.previewTheme,e),e),setPreviewTheme:(e,n)=>{l.store.set(r.previewTheme,e),(0,h.sendToIframeFromBlockId)(t,{type:"devtools_revert_design"}),n.current&&(0,h.sendToIframeFromBlockId)(t,{type:"devtools_apply_theme",payload:{theme:e}})},cleanupPreviewTheme:o,pushUndoHistory:(e,t)=>{l.store.set(r.undoHistory,[...l.store.get(r.undoHistory),{file:e,content:t}].slice(-20)),l.store.set(r.redoHistory,[])},popUndoHistory:e=>{let n=[...l.store.get(r.undoHistory)],i=n.pop();if(!i||!e.current)return null;let o=e.current.getContent(i.file);return"string"!=typeof o?null:((0,h.sendToIframeFromBlockId)(t,{type:"devtools_revert_design"}),l.store.set(r.undoHistory,n),l.store.set(r.redoHistory,[...l.store.get(r.redoHistory),{file:i.file,content:o}]),e.current.inlineEdit(i.file,0,0,0,i.content,Date.now(),void 0,[0,o.length]),i)},pushRedoHistory:(e,t)=>{l.store.set(r.redoHistory,[...l.store.get(r.redoHistory),{file:e,content:t}].slice(-20))},popRedoHistory:e=>{let n=[...l.store.get(r.redoHistory)],i=n.pop();if(!i||!e.current)return null;let o=e.current.getContent(i.file);return"string"!=typeof o?null:((0,h.sendToIframeFromBlockId)(t,{type:"devtools_revert_design"}),l.store.set(r.redoHistory,n),l.store.set(r.undoHistory,[...l.store.get(r.undoHistory),{file:i.file,content:o}]),e.current.inlineEdit(i.file,0,0,0,i.content,Date.now(),void 0,[0,o.length]),i)},clearHistory:()=>{l.store.set(r.undoHistory,[]),l.store.set(r.redoHistory,[])},setLastFileContent:e=>{l.store.set(r.lastFileContent,e)},setSaveNextState:e=>{l.store.set(r.saveNextState,e)},setLastIsPreview:e=>{l.store.set(r.lastIsPreview,e)},setPendingDesignSystem:e=>{l.store.set(r.pendingDesignSystem,e)}}}function j(){var e;let t=(0,u.assertBlockId)(null==(e=(0,u.useActiveBlockState)())?void 0:e.id),n=(0,d.assertChatId)((0,d.useChatId)().chatId);return{atoms:b(t),actions:w({blockId:t,chatId:n}),blockId:t}}let C=new Map,k=(0,t.cacheResultById)(C,()=>({isCollapsedOverride:(0,i.atom)(!1),isPeeking:(0,i.atom)(!1),isChatRoute:(0,i.atom)(!0),renderRecoverHitArea:(0,i.atom)(!1),openedDropdown:(0,i.atom)(!1)})),S=(0,t.cacheResultById)(new Map,e=>{let t=k(e),n=(0,r.getDurableScopedAtoms)(e),o=(0,r.getDurableRootAtoms)("root"),a=(0,i.atom)(e=>e(t.isCollapsedOverride)||e(o.sidebarCollapsed)),s=(0,i.atom)(e=>!e(a)||e(t.isPeeking));return{...t,isVisible:s,isCollapsed:a,sidebarRecentChatsSkeleton:n.sidebarRecentChatsSkeleton,sidebarFavoriteChatsAndProjectsSkeleton:n.sidebarFavoriteChatsAndProjectsSkeleton,sidebarFavoriteChatsAndProjectsCollapsed:n.sidebarFavoriteChatsAndProjectsCollapsed,sidebarRecentChatsCollapsed:n.sidebarRecentChatsCollapsed}}),N=null,E=null,D=null,I=null,A=null,T=200,M=50,L=200,P=200,R=1e3;function _(e){let t=S(e),i=k(e),a=(0,r.getDurableScopedAtoms)(e),s=(0,r.getDurableRootAtoms)("root"),l=(0,o.getUserInputAtoms)();function c(){N&&clearTimeout(N),E&&clearTimeout(E),A&&clearTimeout(A),n.store.get(t.isCollapsed)&&(n.store.set(i.renderRecoverHitArea,!0),A=setTimeout(()=>{n.store.set(i.renderRecoverHitArea,!1)},P)),N=setTimeout(()=>{n.store.set(i.openedDropdown,!1)},50),n.store.set(i.isPeeking,!1)}function u(){let{leavingScreen:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(N&&clearTimeout(N),E&&clearTimeout(E),D&&Date.now()-D>T&&!e)return c();N=setTimeout(()=>c(),e?R:M)}function d(){let{onlyOnCollapsed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(!e||n.store.get(s.sidebarCollapsed))&&(c(),I&&clearTimeout(I),I=setTimeout(()=>I=null,L))}function p(e){n.store.set(s.sidebarCollapsed,e),e&&d()}return{startPeeking:()=>{if(!n.store.get(l.isPointerDown)){if(N&&clearTimeout(N),E&&clearTimeout(E),!I){if(g(n.store.get)){E=setTimeout(()=>{n.store.set(i.isPeeking,!0),D=Date.now(),E=null},500);return}n.store.set(i.isPeeking,!0),D=Date.now()}}},stopPeeking:c,stopPeekingAfterDelay:u,stopPeekingForced:d,clearStartPeekingTimeout:function(){E&&(clearTimeout(E),E=null)},openSidebar:()=>{p(!1)},collapseSidebar:()=>{p(!0)},toggleSidebar:()=>{p(!n.store.get(s.sidebarCollapsed))},setCollapsedOverride:e=>n.store.set(i.isCollapsedOverride,e),setSidebarRecentChatsSkeleton:e=>n.store.set(a.sidebarRecentChatsSkeleton,e),setSidebarFavoriteChatsAndProjectsSkeleton:e=>n.store.set(a.sidebarFavoriteChatsAndProjectsSkeleton,e),setSidebarFavoriteChatsAndProjectsCollapsed:e=>n.store.set(a.sidebarFavoriteChatsAndProjectsCollapsed,e),setSidebarRecentChatsCollapsed:e=>n.store.set(a.sidebarRecentChatsCollapsed,e),setOpenedDropdown:e=>n.store.set(i.openedDropdown,e)}}},296046,e=>{"use strict";e.s(["useIsChatPage",()=>s]);var t=e.i(743124),n=e.i(729602),r=e.i(979865),i=e.i(726718),o=e.i(275215),a=e.i(639056);function s(){let e=(0,o.getWritableSidebarAtoms)("skeleton"),s=(0,a.useAtomValue)(e.isChatRoute),l=(0,r.useSearchParams)(),c=(0,r.usePathname)(),u=(0,n.useChatId)();return(0,t.useMemo)(()=>{let e=(0,i.isHome)(c),t=!!u,n=!!l.get("q");return t&&s||e&&n},[u,c,l,s])}},331967,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 13.5H6.75V15H2C1.44772 15 1 14.5523 1 14V2C1 1.44771 1.44772 1 2 1H6.75V2.5L2.5 2.5L2.5 13.5ZM12.4393 7.24999L10.4697 5.28031L9.93934 4.74998L11 3.68932L11.5303 4.21965L14.6036 7.29288C14.9941 7.6834 14.9941 8.31657 14.6036 8.70709L11.5303 11.7803L11 12.3106L9.93934 11.25L10.4697 10.7197L12.4393 8.74999L5.75 8.74999H5V7.24999H5.75L12.4393 7.24999Z" fill="currentColor"/>');e.s(["Logout",0,t])},532567,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.70059 1.73618L7.74488 1.5H8.2551L8.29938 1.73618C8.4406 2.48936 8.98357 3.04807 9.63284 3.27226C9.82296 3.33791 10.008 3.41476 10.1871 3.50207C10.805 3.80328 11.5845 3.7922 12.2172 3.35933L12.4158 3.22342L12.7766 3.5842L12.6407 3.78284C12.2078 4.41549 12.1967 5.19496 12.4979 5.81292C12.5852 5.99203 12.6621 6.17703 12.7277 6.36714C12.9519 7.01642 13.5106 7.55938 14.2638 7.7006L14.5 7.74489V8.25511L14.2638 8.2994C13.5106 8.44062 12.9519 8.98359 12.7277 9.63286C12.6621 9.82298 12.5852 10.008 12.4979 10.1871C12.1967 10.805 12.2078 11.5845 12.6407 12.2172L12.7766 12.4158L12.4158 12.7766L12.2172 12.6407C11.5845 12.2078 10.805 12.1967 10.1871 12.4979C10.008 12.5852 9.82296 12.6621 9.63284 12.7277C8.98357 12.9519 8.4406 13.5106 8.29938 14.2638L8.2551 14.5H7.74488L7.70059 14.2638C7.55937 13.5106 7.0164 12.9519 6.36713 12.7277C6.17702 12.6621 5.99202 12.5852 5.8129 12.4979C5.19495 12.1967 4.41548 12.2078 3.78283 12.6407L3.5842 12.7766L3.22342 12.4158L3.35932 12.2172C3.79219 11.5845 3.80326 10.8051 3.50206 10.1871C3.41475 10.008 3.3379 9.82298 3.27225 9.63285C3.04806 8.98358 2.48935 8.44061 1.73616 8.29939L1.5 8.25511V7.74489L1.73616 7.70061C2.48935 7.55939 3.04806 7.01642 3.27225 6.36715C3.3379 6.17703 3.41475 5.99203 3.50205 5.81291C3.80326 5.19496 3.79218 4.41549 3.35931 3.78283L3.2234 3.5842L3.58418 3.22342L3.78282 3.35932C4.41547 3.79219 5.19494 3.80327 5.8129 3.50207C5.99201 3.41476 6.17701 3.33791 6.36713 3.27226C7.0164 3.04807 7.55937 2.48936 7.70059 1.73618ZM6.49999 0H9.49999L9.77369 1.45974C9.80837 1.64472 9.94454 1.79299 10.1224 1.85441C10.3702 1.93996 10.6111 2.04007 10.8443 2.15371C11.0135 2.2362 11.2148 2.22768 11.3701 2.12137L12.5962 1.28249L14.7175 3.40381L13.8786 4.62987C13.7723 4.78525 13.7638 4.98647 13.8463 5.1557C13.9599 5.38885 14.06 5.62981 14.1456 5.87756C14.207 6.05545 14.3553 6.19161 14.5402 6.2263L16 6.5V9.5L14.5402 9.7737C14.3553 9.80839 14.207 9.94455 14.1456 10.1224C14.06 10.3702 13.9599 10.6112 13.8463 10.8443C13.7638 11.0135 13.7723 11.2148 13.8786 11.3701L14.7175 12.5962L12.5962 14.7175L11.3701 13.8786C11.2147 13.7723 11.0135 13.7638 10.8443 13.8463C10.6111 13.9599 10.3702 14.06 10.1224 14.1456C9.94454 14.207 9.80837 14.3553 9.77369 14.5403L9.49999 16H6.49999L6.22628 14.5403C6.1916 14.3553 6.05544 14.207 5.87755 14.1456C5.6298 14.06 5.38884 13.9599 5.15569 13.8463C4.98645 13.7638 4.78523 13.7723 4.62985 13.8786L3.40381 14.7175L1.28249 12.5962L2.12136 11.3702C2.22767 11.2148 2.23619 11.0136 2.1537 10.8443C2.04006 10.6112 1.93995 10.3702 1.8544 10.1224C1.79297 9.94455 1.6447 9.80838 1.45973 9.7737L0 9.5V6.5L1.45973 6.2263C1.6447 6.19162 1.79297 6.05545 1.8544 5.87756C1.93995 5.62981 2.04005 5.38885 2.1537 5.15569C2.23619 4.98646 2.22766 4.78524 2.12135 4.62986L1.28247 3.40381L3.40379 1.28249L4.62984 2.12136C4.78522 2.22767 4.98644 2.2362 5.15568 2.15371C5.38883 2.04007 5.6298 1.93996 5.87755 1.85441C6.05544 1.79299 6.1916 1.64472 6.22628 1.45975L6.49999 0ZM9.49998 8C9.49998 8.82843 8.82841 9.5 7.99998 9.5C7.17156 9.5 6.49998 8.82843 6.49998 8C6.49998 7.17157 7.17156 6.5 7.99998 6.5C8.82841 6.5 9.49998 7.17157 9.49998 8ZM11 8C11 9.65685 9.65684 11 7.99998 11C6.34313 11 4.99998 9.65685 4.99998 8C4.99998 6.34315 6.34313 5 7.99998 5C9.65684 5 11 6.34315 11 8Z" fill="currentColor"/>');e.s(["SettingsGear",0,t])},120407,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 6V7H6.5V6C6.5 5.17157 7.17157 4.5 8 4.5C8.82843 4.5 9.5 5.17157 9.5 6ZM5 7V6C5 4.34315 6.34315 3 8 3C9.65685 3 11 4.34315 11 6V7H12V11.5C12 12.3284 11.3284 13 10.5 13H5.5C4.67157 13 4 12.3284 4 11.5V7H5Z" fill="currentColor"/>');e.s(["LockClosedSmall",0,t])},22061,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM9 11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11C7 10.4477 7.44772 10 8 10C8.55229 10 9 10.4477 9 11ZM7.09584 5.82182C7.25716 5.48223 7.6022 5.25 7.99999 5.25C8.55227 5.25 8.99999 5.69772 8.99999 6.25C8.99999 6.75329 8.62748 7.17086 8.14337 7.23989C7.70367 7.3026 7.24999 7.67511 7.24999 8.25V8.5V9.25H8.74999V8.63535C9.76443 8.31661 10.5 7.36971 10.5 6.25C10.5 4.86929 9.3807 3.75 7.99999 3.75C7.00158 3.75 6.14136 4.3353 5.74095 5.17818L5.41913 5.85563L6.77402 6.49926L7.09584 5.82182Z" fill="currentColor"/>');e.s(["Question",0,t])},932009,968811,e=>{"use strict";var t=e.i(936096);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0 1H0.75H5C6.2267 1 7.31583 1.58901 8 2.49963C8.68417 1.58901 9.7733 1 11 1H15.25H16V1.75V13V13.75H15.25H10.7426C10.1459 13.75 9.57361 13.9871 9.15165 14.409L8.53033 15.0303H7.46967L6.84835 14.409C6.42639 13.9871 5.8541 13.75 5.25736 13.75H0.75H0V13V1.75V1ZM7.25 4.75C7.25 3.50736 6.24264 2.5 5 2.5H1.5V12.25H5.25736C5.96786 12.25 6.65758 12.4516 7.25 12.8232V4.75ZM8.75 12.8232V4.75C8.75 3.50736 9.75736 2.5 11 2.5H14.5V12.25H10.7426C10.0321 12.25 9.34242 12.4516 8.75 12.8232Z" fill="currentColor"/>');e.s(["BookOpen",0,n],932009);let r=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM8.62499 3.375V4V4.375H9C10.1736 4.375 11.125 5.3264 11.125 6.5H9.875C9.875 6.01675 9.48325 5.625 9 5.625H8.62499V7.375H9C10.1736 7.375 11.125 8.3264 11.125 9.5C11.125 10.6736 10.1736 11.625 9 11.625H8.62499V12V12.625H7.37499V12V11.625H7C5.8264 11.625 4.875 10.6736 4.875 9.5H6.125C6.125 9.98325 6.51675 10.375 7 10.375H7.37499V8.625H7C5.8264 8.625 4.875 7.6736 4.875 6.5C4.875 5.3264 5.8264 4.375 7 4.375H7.37499V4V3.375H8.62499ZM7.37499 5.625H7C6.51675 5.625 6.125 6.01675 6.125 6.5C6.125 6.98325 6.51675 7.375 7 7.375H7.37499V5.625ZM8.62499 8.625V10.375H9C9.48325 10.375 9.875 9.98325 9.875 9.5C9.875 9.01675 9.48325 8.625 9 8.625H8.62499Z" fill="currentColor"/>');e.s(["Dollar",0,r],968811)},315266,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.75 0C5.95507 0 4.5 1.45507 4.5 3.25V3.75C4.5 5.54493 5.95507 7 7.75 7H8.25C10.0449 7 11.5 5.54493 11.5 3.75V3.25C11.5 1.45507 10.0449 0 8.25 0H7.75ZM6 3.25C6 2.2835 6.7835 1.5 7.75 1.5H8.25C9.2165 1.5 10 2.2835 10 3.25V3.75C10 4.7165 9.2165 5.5 8.25 5.5H7.75C6.7835 5.5 6 4.7165 6 3.75V3.25ZM2.5 14.5V13.1709C3.31958 11.5377 4.99308 10.5 6.82945 10.5H9.17055C11.0069 10.5 12.6804 11.5377 13.5 13.1709V14.5H2.5ZM6.82945 9C4.35483 9 2.10604 10.4388 1.06903 12.6857L1 12.8353V13V15.25V16H1.75H14.25H15V15.25V13V12.8353L14.931 12.6857C13.894 10.4388 11.6452 9 9.17055 9H6.82945Z" fill="currentColor"/>');e.s(["User",0,t])},494206,e=>{"use strict";var t=e.i(358847),n=(0,t.createServerReference)("00fd0082b45a5dd1d80655c76f9acfa571284b65d2",t.callServer,void 0,t.findSourceMapURL,"logoutAction");e.s(["logoutAction",()=>n])},420861,e=>{e.v({blink:"loading-dots-module__YBRlOW__blink",loading:"loading-dots-module__YBRlOW__loading"})},840454,e=>{"use strict";var t=e.i(509473),n=e.i(420861),r=e.i(7284);function i(e){let{size:i=2,height:a,className:s}=e;return(0,t.jsxs)("span",{className:(0,r.default)(n.default.loading,s),"data-geist-loading-dots":"","data-version":"v1",style:{"--loading-dots-height":a?o(a):void 0,"--loading-dots-size":2!==i?o(i):void 0},children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})}let o=e=>"number"==typeof e?"".concat(e,"px"):e;e.s(["LoadingDots",()=>i])},966848,e=>{"use strict";var t=e.i(509473),n=e.i(840454),r=e.i(403055),i=e.i(152076),o=e.i(556355),a=e.i(909270),s=e.i(242084);function l(e){let{className:n,children:i,...a}=e;return(0,t.jsx)(o.DropdownMenuGroup,{className:(0,r.cn)("flex flex-col gap-0.5",n),...a,children:i})}function c(e){let{label:n,Icon:r,children:i}=e;return(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-4 text-v0-gray-900",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[r,(0,t.jsx)("span",{className:"text-nowrap text-sm font-normal text-v0-gray-1000",children:n})]}),i]})}function u(e){let{className:n,children:i,clickable:a=!0,...s}=e;return(0,t.jsx)(o.DropdownMenuItem,{className:(0,r.cn)(!a&&"hover:bg-transparent!",n),onSelect:e=>e.preventDefault(),...s,children:i})}function d(e){let{action:n,disabled:r,...i}=e;return(0,t.jsx)(u,{asChild:!0,disabled:r,children:(0,t.jsx)("form",{action:n,children:(0,t.jsx)(p,{...i})})})}function p(e){let{label:r,Icon:o,children:a}=e,{pending:s}=(0,i.useFormStatus)();return(0,t.jsx)("button",{type:"submit",className:"w-full",children:(0,t.jsx)(c,{label:r,Icon:o&&s?(0,t.jsx)("div",{className:"flex size-4 items-center justify-center",children:(0,t.jsx)(n.LoadingDots,{size:4})}):o,children:a})})}function h(e){let{href:n,external:r=!1,onClick:i,label:o,Icon:l,sameTab:d=!0,children:p,className:h}=e;return r?(0,t.jsx)(u,{className:h,onSelect:e=>{e.preventDefault(),null==i||i()},asChild:!0,children:(0,t.jsx)("a",{href:n,target:d?void 0:"_blank",rel:"noopener",children:(0,t.jsxs)(c,{label:o,Icon:l,children:[p||null,r&&!p?(0,t.jsx)(s.External,{}):null]})})}):(0,t.jsx)(u,{className:h,onSelect:e=>{e.preventDefault(),null==i||i()},asChild:!0,children:(0,t.jsx)(a.default,{href:n,target:d?void 0:"_blank",children:(0,t.jsx)(c,{label:o,Icon:l,children:p||null})})})}function f(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex h-8 items-center px-1.5",children:(0,t.jsx)("span",{className:"text-[13px] font-medium leading-[16px] text-v0-gray-900",children:n})})}e.s(["ActionMenuItem",()=>d,"LinkMenuItem",()=>h,"MenuGroup",()=>l,"MenuItem",()=>u,"MenuItemContent",()=>c,"MenuLabel",()=>f])},775883,e=>{"use strict";var t=e.i(509473),n=e.i(297239),r=e.i(304649),i=e.i(794593);function o(){let e=(0,n.useT)();return{"v0-level0":{color:"text-gray-500",badge:void 0,label:e("billingPlans.planName")("Free")},"v0-level3":{color:"text-teal-700",badge:"teal",label:e("billingPlans.planName")("Premium")},"v0-team":{color:"text-blue-700",badge:"blue",label:e("billingPlans.planName")("Team")},"v0-enterprise":{color:"text-purple-700",badge:"purple",label:e("billingPlans.planName")("Enterprise")},"v0-platinum":{color:"text-orange-400",badge:"teal",label:e("billingPlans.planName")("Ultra")}}}function a(e){let{type:n}=e,i=o()[n];return(0,t.jsx)("span",{className:(0,r.cn)("text-[13px] font-medium leading-[16px]",i.color),children:i.label})}function s(e){let{type:n,className:r,includeSuffix:a=!0}=e,s=o()[n];return(0,t.jsxs)(i.Badge,{variant:s.badge,className:r,children:[s.label," ",a?(0,t.jsx)("span",{children:"Plan"}):null]})}e.s(["PlanBadge",()=>s,"PlanLabel",()=>a,"usePlanLabelMap",()=>o])},915153,e=>{"use strict";var t=e.i(906261),n=e.i(206037),r=e.i(532733);function i(e){let{scope:i,user:o,suspense:a=!1}=e,s=(0,t.isUserScope)(i),{planSlug:l,isLoading:c}=(0,n.usePlanInfo)(!!s||!i.limited,i.id,void 0,6e4),u=s?void 0:i.membership.role,d=l,p=!!(s&&d)||!!(!s&&o&&(0,r.teamMemberHasV0Entitlement)(i,o)),h=s?i.username:i.slug,f=!!(!s&&i.accessRequested);return{scopeIsUser:s,scopePlan:l||(s?void 0:i.activeTrialPlan),scopeSlug:h,scopeMembershipRole:u,user:o,hasV0Seat:p,accessRequested:f,isLoading:c}}e.s(["useExtraScopeProperties",()=>i])},427286,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.7071 2.39644C8.31658 2.00592 7.68341 2.00592 7.29289 2.39644L4.46966 5.21966L3.93933 5.74999L4.99999 6.81065L5.53032 6.28032L7.99999 3.81065L10.4697 6.28032L11 6.81065L12.0607 5.74999L11.5303 5.21966L8.7071 2.39644ZM5.53032 9.71966L4.99999 9.18933L3.93933 10.25L4.46966 10.7803L7.29289 13.6035C7.68341 13.9941 8.31658 13.9941 8.7071 13.6035L11.5303 10.7803L12.0607 10.25L11 9.18933L10.4697 9.71966L7.99999 12.1893L5.53032 9.71966Z" fill="currentColor"/>');e.s(["ChevronUpDown",0,t])},595722,e=>{"use strict";var t=e.i(509473),n=e.i(691175),r=e.i(230766),i=e.i(297239),o=e.i(762585),a=e.i(743124),s=e.i(775883),l=e.i(304649),c=e.i(915153),u=e.i(427286),d=e.i(906261),p=e.i(979865);function h(e){let{scope:o,user:a,showEmail:l=!1,trigger:p=!1,children:h,showAvatar:f=!0,avatarOnly:g=!1,showName:v=!1,skeleton:x}=e,y=(0,n.isAuthenticationRequired)(o),b=y&&(0,n.isScopeLimitedOnlyByMfa)(o),w=(0,d.isUserScope)(o),{scopePlan:j,scopeMembershipRole:C,hasV0Seat:k,accessRequested:S,isLoading:N}=(0,c.useExtraScopeProperties)({scope:o,user:a}),E=(0,i.useT)(),D=(0,t.jsx)(m,{authRequired:y,isMfaLimited:b,emailToShow:l?null==a?void 0:a.email:void 0,isLoading:N,role:C,scopeSlug:w?o.username:o.slug,scopePlan:j,v0Access:k,accessRequested:S});if(p){let e=j&&"v0-level0"===j;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.AvatarUser,{size:"sm",className:"mr-1.5 size-[22px]",rounded:!0,teamId:w?void 0:o.id,userId:null==a?void 0:a.id,avatarSha:null==a?void 0:a.avatarSha}),g?null:(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 items-center truncate text-start text-sm font-medium leading-[20px] text-v0-gray-1000",children:[(0,t.jsx)("div",{className:"max-w-64 truncate",children:w?E("sidebar.personal"):o.name}),e?(0,t.jsx)(s.PlanBadge,{type:j,includeSuffix:!1,className:"bg-v0-alpha-400 ml-1.5 h-[18px] rounded-full border-none px-1.5"}):null]}),(0,t.jsx)(u.ChevronUpDown,{className:"mx-1 text-v0-gray-900!"})]})}return!j&&w&&x?x:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[f&&(0,t.jsx)(r.AvatarUser,{teamId:w?void 0:o.id,userId:null==a?void 0:a.id}),g?null:(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start",children:[(0,t.jsx)("div",{className:"w-full truncate text-start text-sm font-medium leading-[20px] text-v0-gray-1000",children:w&&!v?E("sidebar.personal"):o.name}),D]}),h]})}function f(e){let{variant:n}=e;return(0,t.jsxs)("div",{className:(0,l.cn)("flex w-full justify-between gap-2",{"p-1.5":"list-item"===n,"py-0.5":"indicator"===n}),children:[(0,t.jsx)(o.Skeleton,{className:"size-8 rounded-lg"}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start justify-between pb-px pt-0.5",children:[(0,t.jsx)(o.Skeleton,{className:"h-3 w-24 rounded-lg"}),(0,t.jsx)(o.Skeleton,{className:"h-3 w-12 rounded-lg"})]})]})}function m(e){let{authRequired:r,isMfaLimited:c,isLoading:u,scopeSlug:d,scopePlan:h,role:f,v0Access:m,accessRequested:g,emailToShow:v}=e,x=(0,i.useT)(),y=(0,p.useRouter)(),b=m&&h,w=(0,a.useMemo)(()=>{if(r)return c?"2FA Required":"Authentication Required";if(v)return v;if(b)return(0,t.jsx)(s.PlanLabel,{type:h});if("OWNER"===f)if("v0-enterprise"===h)return x("billingPlans.claimSeat");else return x("billingPlans.startTeamPlan");return g?x("billingPlans.accessRequested"):x("billingPlans.requestAccess")},[r,v,b,c,h,f,x,g]),j="h-4 w-full truncate text-start text-[13px] font-medium leading-[16px] text-gray-500";return u?(0,t.jsx)(o.Skeleton,{className:"h-4 w-20 rounded-lg "}):r?(0,t.jsx)("button",{onClick:()=>{if(c)return void(0,n.redirectToTwoFactorRequired)({slug:d,push:y.push});(0,n.redirectToLoginToMissingScope)({slug:d,push:y.push})},className:(0,l.cn)(j,"hover:underline"),children:w}):(0,t.jsx)("div",{className:j,children:w})}e.s(["ScopeItemContent",()=>h,"ScopeItemContentSkeleton",()=>f])},117286,155327,e=>{"use strict";var t=e.i(509473),n=e.i(936096);let r=(0,n.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.25C1 1.45507 2.45507 0 4.25 0H11.75C13.5449 0 15 1.45507 15 3.25V15.25V16H14.25H1.75H1V15.25V3.25ZM4.25 1.5C3.2835 1.5 2.5 2.2835 2.5 3.25V14.5H13.5V3.25C13.5 2.2835 12.7165 1.5 11.75 1.5H4.25ZM4 4C4 3.44772 4.44772 3 5 3H11C11.5523 3 12 3.44772 12 4V10H4V4ZM9 13H12V11.5H9V13Z" fill="currentColor"/>');var i=e.i(571513);let o=(0,n.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 0.75V0H7.25V0.75V2V2.75H8.75V2V0.75ZM11.182 3.75732L11.7123 3.22699L12.0659 2.87344L12.5962 2.34311L13.6569 3.40377L13.1265 3.9341L12.773 4.28765L12.2426 4.81798L11.182 3.75732ZM8 10.5C9.38071 10.5 10.5 9.38071 10.5 8C10.5 6.61929 9.38071 5.5 8 5.5C6.61929 5.5 5.5 6.61929 5.5 8C5.5 9.38071 6.61929 10.5 8 10.5ZM8 12C10.2091 12 12 10.2091 12 8C12 5.79086 10.2091 4 8 4C5.79086 4 4 5.79086 4 8C4 10.2091 5.79086 12 8 12ZM13.25 7.25H14H15.25H16V8.75H15.25H14H13.25V7.25ZM0.75 7.25H0V8.75H0.75H2H2.75V7.25H2H0.75ZM2.87348 12.0659L2.34315 12.5962L3.40381 13.6569L3.93414 13.1265L4.28769 12.773L4.81802 12.2426L3.75736 11.182L3.22703 11.7123L2.87348 12.0659ZM3.75735 4.81798L3.22702 4.28765L2.87347 3.9341L2.34314 3.40377L3.4038 2.34311L3.93413 2.87344L4.28768 3.22699L4.81802 3.75732L3.75735 4.81798ZM12.0659 13.1265L12.5962 13.6569L13.6569 12.5962L13.1265 12.0659L12.773 11.7123L12.2426 11.182L11.182 12.2426L11.7123 12.773L12.0659 13.1265ZM8.75 13.25V14V15.25V16H7.25V15.25V14V13.25H8.75Z" fill="currentColor"/>');e.s(["Sun",0,o],155327);var a=e.i(644471),s=e.i(304649),l=e.i(996174),c=e.i(297239),u=e.i(35590);function d(e){let{className:n}=e,{theme:d,setTheme:p}=(0,u.useTheme)(),h=(0,c.useT)();return(0,t.jsx)(a.Tabs,{variant:"secondary",className:n,onClick:e=>e.stopPropagation(),onValueChange:e=>p(e),value:d,children:(0,t.jsxs)(a.TabsList,{id:"theme-switcher",className:(0,s.cn)("h-fit overflow-hidden rounded-full border p-0 focus-within:overflow-visible [&>[role=tab]]:size-6","[&>[role=tab]>.absolute]:-inset-px [&>[role=tab]>.absolute]:rounded-full [&>[role=tab]>.absolute]:border [&>[role=tab]>.absolute]:bg-transparent"),children:[(0,t.jsx)(l.Tooltip,{content:h("sidebar.themeSwitcher.system"),children:(0,t.jsxs)(a.TabsTrigger,{className:"[&>div]:shrink-0",value:"system",children:[(0,t.jsx)(r,{size:12}),(0,t.jsx)("span",{className:"sr-only",children:"System"})]})}),(0,t.jsx)(l.Tooltip,{content:h("sidebar.themeSwitcher.light"),children:(0,t.jsxs)(a.TabsTrigger,{className:"[&>div]:shrink-0",value:"light",children:[(0,t.jsx)(o,{size:12}),(0,t.jsx)("span",{className:"sr-only",children:"Light"})]})}),(0,t.jsx)(l.Tooltip,{content:h("sidebar.themeSwitcher.dark"),children:(0,t.jsxs)(a.TabsTrigger,{className:"[&>div]:shrink-0",value:"dark",children:[(0,t.jsx)(i.Moon,{size:12}),(0,t.jsx)("span",{className:"sr-only",children:"Dark"})]})})]})})}e.s(["ThemeSwitcher",()=>d],117286)},998065,803342,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(556355),i=e.i(297239),o=e.i(117286),a=e.i(592258),s=e.i(479273),l=e.i(145568),c=e.i(358847),u=(0,c.createServerReference)("402e9bac402024d67c288c11af33bd9f4249fe4473",c.callServer,void 0,c.findSourceMapURL,"setAdminMode"),d=c,p=(0,d.createServerReference)("40a9985387f021a2a473a9394c84996a744ee94ebd",d.callServer,void 0,d.findSourceMapURL,"setDemoMode"),h=e.i(304649),f=e.i(966848),m=e.i(990453),g=e.i(667660),v=e.i(639056),x=e.i(385671);function y(){let e=(0,i.useT)(),{user:a}=(0,g.useActiveScope)(),[s,l]=(0,n.useTransition)(),[c,d]=(0,n.useState)(),h=(0,n.useMemo)(()=>null!=c?c:null==a?void 0:a.isAdminMode,[c,null==a?void 0:a.isAdminMode]),[v,x]=(0,n.useTransition)(),[y,C]=(0,n.useState)(),k=(0,n.useMemo)(()=>null!=y?y:null==a?void 0:a.isDemoMode,[y,null==a?void 0:a.isDemoMode]);return(0,t.jsxs)(t.Fragment,{children:[(null==a?void 0:a.isVercelian)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(f.MenuGroup,{children:[(0,t.jsx)(f.MenuLabel,{children:"Internal"}),!k&&(0,t.jsx)(j,{clickable:!0,disabled:s,onClick:()=>{let e=!h;d(e),l(()=>u(e))},label:"Admin Mode",children:(0,t.jsx)(m.Switch,{className:"pointer-events-none",checked:h,asDiv:!0})}),(0,t.jsx)(j,{clickable:!0,disabled:v,onClick:()=>{let e=!k;C(e),x(()=>p(e))},label:"Priority Mode",children:(0,t.jsx)(m.Switch,{className:"pointer-events-none",checked:k,asDiv:!0})})]}),(0,t.jsx)(r.DropdownMenuSeparator,{})]}):null,(0,t.jsxs)(f.MenuGroup,{children:[(0,t.jsx)(f.MenuLabel,{children:e("sidebar.scopeSwitcher.preferences")}),(0,t.jsx)(j,{label:e("sidebar.scopeSwitcher.theme"),onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null==(t=document.getElementById("theme-switcher"))||t.focus())},children:(0,t.jsx)(o.ThemeSwitcher,{})}),(0,t.jsx)(j,{label:e("sidebar.scopeSwitcher.language"),onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null==(t=document.getElementById("locale-switcher"))||t.focus())},children:(0,t.jsx)(b,{})}),(0,t.jsx)(j,{label:"Chat Position",onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null==(t=document.getElementById("chat-position-switcher"))||t.focus())},children:(0,t.jsx)(w,{})})]})]})}function b(){let{locale:e,setLocale:r}=(0,s.useLocale)(),i=(0,n.useCallback)(e=>{r(e)},[r]);return(0,t.jsxs)(a.Select,{onValueChange:i,value:e,children:[(0,t.jsx)(a.SelectTrigger,{id:"locale-switcher",className:"h-7 gap-1 px-2 [&>svg]:w-3 [&>svg]:shrink-0 w-auto","data-testid":"language-selector",children:(0,t.jsx)("div",{className:"truncate text-xs",children:(0,t.jsx)(a.SelectValue,{placeholder:l.ISO639_TO_LOCALEINFO[e].name})})}),(0,t.jsx)(a.SelectContent,{children:(0,t.jsx)(a.SelectGroup,{children:Object.keys(l.ISO639_TO_LOCALEINFO).map(e=>(0,t.jsx)(a.SelectItem,{value:e,children:l.ISO639_TO_LOCALEINFO[e].name},e))})})]})}function w(){let e=(0,x.getChatLayoutAtoms)(),r=(0,x.getChatLayoutActions)(),i=(0,v.useAtomValue)(e.isChatOnRight),o=(0,n.useCallback)(e=>{r.setChatOnRight("right"===e)},[r]);return(0,t.jsxs)(a.Select,{onValueChange:o,value:i?"right":"left",children:[(0,t.jsx)(a.SelectTrigger,{id:"chat-position-switcher",className:"h-7 gap-1 px-2 [&>svg]:w-3 [&>svg]:shrink-0 w-auto","data-testid":"chat-position-selector",children:(0,t.jsx)("div",{className:"truncate text-xs",children:(0,t.jsx)(a.SelectValue,{placeholder:i?"Right":"Left"})})}),(0,t.jsx)(a.SelectContent,{children:(0,t.jsxs)(a.SelectGroup,{children:[(0,t.jsx)(a.SelectItem,{value:"left",children:"Left"}),(0,t.jsx)(a.SelectItem,{value:"right",children:"Right"})]})})]})}let j=e=>{let{label:n,children:r,clickable:i=!1,className:o,...a}=e,s=(0,h.cn)("cursor-default items-center justify-between gap-4 focus:bg-transparent focus-visible:bg-gray-100","function"==typeof a.onClick&&"cursor-pointer",o);return(0,t.jsxs)(f.MenuItem,{className:s,clickable:i,svgStyling:!1,...a,children:[(0,t.jsx)(f.MenuItemContent,{label:n}),r]})};e.s(["HeaderPreference",()=>y],998065);var C=t,k=n,S=e.i(293240),N=h;let E=k.forwardRef((e,t)=>{let{className:n,value:r,...i}=e;return(0,C.jsx)(S.Root,{ref:t,className:(0,N.cn)("bg-secondary relative h-4 w-full overflow-hidden rounded-full",n),...i,children:(0,C.jsx)(S.Indicator,{className:"h-full w-full flex-1 rounded-r-full bg-v0-teal-700 transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});E.displayName=S.Root.displayName,e.s(["Progress",()=>E],803342)},425622,e=>{"use strict";var t=e.i(509473),n=e.i(803342),r=e.i(745197),i=e.i(762585);function o(){let[e]=(0,r.useRateLimit)();if(!e)return(0,t.jsxs)("div",{className:"text-v0-gray-900 flex w-full flex-col gap-1.5 p-1.5 text-[13px] font-medium",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-v0-gray-900",children:"Messages Left"}),(0,t.jsx)(i.Skeleton,{className:"h-3 w-12"})]}),(0,t.jsx)(i.Skeleton,{className:"h-2 w-full"}),(0,t.jsx)(i.Skeleton,{className:"mb-[3.5px] mt-1 h-3 w-32"})]});let o=e.remaining/e.limit*100,a=e.reset?Math.ceil((new Date(e.reset).getTime()-Date.now())/864e5):0;return(0,t.jsxs)("div",{className:"text-v0-gray-900 flex w-full flex-col gap-1.5 p-1.5 text-[13px] font-medium",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-v0-gray-900",children:"Messages Left"}),(0,t.jsxs)("span",{className:"flex items-center gap-1 text-v0-gray-900",children:[e.remaining,"/",e.limit]})]}),(0,t.jsx)(n.Progress,{value:o,className:"h-2"}),e.reset&&(0,t.jsx)("div",{className:"flex items-center justify-between font-normal",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:["Usage resets in ",a," ",(0,t.jsx)("span",{children:1===a?"day":"days"})]})})]})}e.s(["UserMessageItemContent",()=>o])},114960,173059,e=>{"use strict";e.i(541536);var t=e.i(23474);t.z.union([t.z.literal("v0-level0"),t.z.literal("v0-level3"),t.z.literal("v0-team"),t.z.literal("v0-enterprise")]);let n={"v0-level0":{name:"Free",credits:5},"v0-level3":{name:"Premium",credits:20},"v0-team":{name:"Team",credits:30},"v0-enterprise":{name:"Enterprise",credits:0}};Object.keys(n),e.s(["CREDIT_BASED_PLANS",0,n],114960);var r=e.i(509473),i=e.i(966848),o=e.i(556355);function a(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.MenuGroup,{children:[(0,r.jsx)(i.MenuLabel,{children:"Credit Balance"}),(0,r.jsx)(s,{label:"Monthly credits"}),(0,r.jsx)(s,{label:"Purchased credits"})]}),(0,r.jsx)(o.DropdownMenuSeparator,{})]})}function s(e){let{label:t}=e;return(0,r.jsxs)(i.MenuItem,{className:"focus-visible:none cursor-default items-center justify-between gap-4 focus:bg-transparent",clickable:!1,svgStyling:!1,children:[(0,r.jsx)(i.MenuItemContent,{label:t}),(0,r.jsx)("div",{className:"h-5 w-16 animate-pulse rounded bg-v0-gray-200"})]})}e.s(["HeaderCreditBalanceSkeleton",()=>a],173059)},897850,e=>{"use strict";var t=e.i(667660);function n(e){let{role:n,plan:r}=e,{user:i,isTeam:o,isActiveScopeReady:a}=(0,t.useActiveScope)(),s=n||(null==i?void 0:i.teamRole),l=r||(null==i?void 0:i.v0plan),c=!a&&(!n||!r);return a&&!o?{isLoading:c,needsToRequestCredits:!1,shouldInvoice:!1,canBuyCredits:"v0-level0"!==l}:{canBuyCredits:"v0-level0"!==l,needsToRequestCredits:"OWNER"!==s&&"BILLING"!==s,shouldInvoice:"v0-enterprise"===l,isLoading:c}}e.s(["useCanBuyCredits",()=>n])},175241,670786,e=>{"use strict";e.s(["HeaderCreditBalance",()=>j],175241);var t=e.i(509473),n=e.i(743124),r=e.i(304649),i=e.i(966848),o=e.i(909270),a=e.i(556355),s=e.i(114960),l=e.i(936990),c=e.i(173059),u=e.i(176248);e.i(904347);var d=e.i(37737),p=e.i(996174),h=e.i(897850);e.s(["HeaderCreditsButton",()=>b,"getDailyCreditsBalance",()=>y],670786);var f=t,m=u,g=l,v=a,x=d;function y(e){var t;if(!e.balance.blocks)return 0;let n=e.balance.blocks.find(e=>{var t;return(null==(t=e.metadata)?void 0:t.promo)==="daily_credits"});return null!=(t=null==n?void 0:n.currentBalance)?t:0}function b(){let{planInfo:e,mutate:t}=(0,g.useTokenBillingPlanInfo)();if(!e||"v0-enterprise"===e.plan)return null;let n=y(e),r=e.balance.remaining-n,i=e.onDemand.balance,o=r+i+n,a="v0-level0"!==e.plan,s=()=>{t()};return(0,f.jsxs)(v.DropdownMenu,{children:[(0,f.jsx)(v.DropdownMenuTrigger,{asChild:!0,children:(0,f.jsxs)(m.Button,{variant:"secondary",size:"sm",className:"rounded-md h-7 hidden sm:flex",children:[(0,f.jsx)(w,{}),(0,f.jsx)("span",{className:"text-sm font-medium",children:o.toFixed(2)})]})}),(0,f.jsxs)(v.DropdownMenuContent,{align:"end",className:"w-64",children:[(0,f.jsxs)(v.DropdownMenuGroup,{children:[(0,f.jsx)(v.DropdownMenuLabel,{className:"text-v0-gray-900 font-medium",children:"Credit Balance"}),(0,f.jsxs)(v.DropdownMenuItem,{className:"justify-between text-sm",onSelect:e=>e.preventDefault(),children:[(0,f.jsx)("span",{className:"text-v0-gray-1000",children:"Gifted credits"}),(0,f.jsx)("span",{className:"text-v0-gray-900 font-medium",children:n.toFixed(2)})]}),(0,f.jsxs)(v.DropdownMenuItem,{className:"justify-between text-sm",onSelect:e=>e.preventDefault(),children:[(0,f.jsx)("span",{className:"text-v0-gray-1000",children:"Monthly credits"}),(0,f.jsx)("span",{className:"text-v0-gray-900 font-medium",children:r.toFixed(2)})]}),(0,f.jsxs)(v.DropdownMenuItem,{className:"justify-between text-sm",onSelect:e=>e.preventDefault(),children:[(0,f.jsx)("span",{className:"text-v0-gray-1000",children:"Purchased credits"}),(0,f.jsx)("span",{className:"text-v0-gray-900 font-medium",children:i.toFixed(2)})]})]}),(0,f.jsxs)(v.DropdownMenuGroup,{className:"pt-0 flex flex-col gap-1.5",children:[(0,f.jsx)(m.Button,{variant:"secondary",size:"sm",className:"flex w-full rounded-md h-7",onClick:()=>{(0,x.openDialog)({type:"redeemCode"})},children:"Redeem Code"}),(0,f.jsx)(m.Button,{variant:"default",size:"sm",className:"flex w-full rounded-md h-7",onClick:()=>{a?(0,x.openDialog)({type:"buyMoreCredits",data:{onSuccess:s,role:e.role}}):(0,x.openDialog)({type:"upgradePlan",data:{planSlug:"v0-level3",customTitle:"Upgrade your plan to buy more credits"}})},children:"Buy Credits"})]})]})]})}let w=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM6 6H8.75C8.80246 6 8.85417 6.00323 8.90493 6.00951L6.00951 8.90493C6.00323 8.85417 6 8.80246 6 8.75V6ZM10 10H11.5V7.25C11.5 5.73122 10.2688 4.5 8.75 4.5H6V6H4.5L4.5 8.75C4.5 10.2688 5.73122 11.5 7.25 11.5H10V10ZM7.05144 9.98432L9.98432 7.05144C9.99464 7.11611 10 7.18243 10 7.25V10H7.25C7.18243 10 7.11611 9.99464 7.05144 9.98432Z" fill="currentColor"/>');function j(e){let{onClick:r}=e,{planInfo:o,isLoading:s}=(0,l.useTokenBillingPlanInfo)(),u=(0,n.useMemo)(()=>{if(o)return Math.ceil(Math.abs(o.billingCycle.end-Date.now())/864e5)},[o]);if(s)return(0,t.jsx)(c.HeaderCreditBalanceSkeleton,{});if(!o)return null;let d=o.plan,p="v0-level0"===d,h="v0-enterprise"!==d,f=y(o),m=o.balance.remaining-f,g=o.onDemand.balance;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.MenuGroup,{children:[(0,t.jsx)(i.MenuLabel,{children:"Credit Balance"}),h?(0,t.jsx)(i.LinkMenuItem,{className:"font-medium text-v0-gray-900",label:"Gifted credits",href:"/chat/settings/billing",onClick:()=>r(!1),children:f.toFixed(2)}):null,(0,t.jsx)(i.LinkMenuItem,{className:"font-medium text-v0-gray-900",label:"Monthly credits",href:"/chat/settings/billing",onClick:()=>r(!1),children:m.toFixed(2)}),p?null:(0,t.jsx)(i.LinkMenuItem,{className:"font-medium text-v0-gray-900",label:"Purchased credits",href:"/chat/settings/billing",onClick:()=>r(!1),children:g.toFixed(2)}),(0,t.jsx)(C,{plan:d,monthly:m,payAsYouGo:g,daysRemaining:u})]}),(0,t.jsx)(a.DropdownMenuSeparator,{})]})}function C(e){let{plan:n,monthly:r,payAsYouGo:i,daysRemaining:o}=e;return"v0-level0"===n?(0,t.jsx)(E,{}):r<=1&&void 0!==i&&i>.01?(0,t.jsx)(N,{}):r<("v0-enterprise"===n?5:.25*s.CREDIT_BASED_PLANS[n].credits)&&o&&"number"==typeof i?(0,t.jsx)(S,{daysRemaining:o}):null}let k=e=>{let{variant:n,children:i}=e;return(0,t.jsx)("div",{className:(0,r.cn)("mt-1 rounded-lg p-2","amber"===n?"bg-v0-amber-200":"bg-v0-blue-200"),children:(0,t.jsx)("p",{className:(0,r.cn)("font-sm text-sm [&_a]:font-medium [&_a]:underline [&_button]:font-medium [&_button]:underline","amber"===n?"text-v0-amber-900":"text-v0-blue-900"),children:i})})};function S(e){let{daysRemaining:n}=e,{needsToRequestCredits:r}=(0,h.useCanBuyCredits)({}),i=1===n?"day":"days";return(0,t.jsxs)(k,{variant:"amber",children:["Your monthly credits will reset in ",n," ",i,"."," ",(0,t.jsx)(p.Tooltip,{content:r?"You do not have permission to purchase credits. Please contact your administrator.":void 0,children:(0,t.jsx)("button",{disabled:r,onClick:()=>(0,d.openDialog)({type:"buyMoreCredits",data:{onSuccess:()=>{}}}),children:"Buy more credits"})})]})}function N(){return(0,t.jsxs)(k,{variant:"blue",children:["You're now using your pay as you go credits."," ",(0,t.jsx)(o.default,{href:"/chat/settings/billing",children:"Buy more credits"})]})}function E(){return(0,t.jsxs)(k,{variant:"blue",children:["Upgrade your plan to buy more credits."," ",(0,t.jsx)(u.Button,{className:"text-v0-blue-900 underline underline-offset-1",onClick:()=>(0,d.openDialog)({type:"upgradePlan"}),variant:"link",children:"Upgrade plan"})]})}},676069,e=>{"use strict";function t(e){return(null==e?void 0:e.current)&&"payment"in e.current?e.current.payment:null}function n(e){return"string"==typeof e?"v0-level0"===e:"v0-level0"===e.slug}e.s(["getPaymentStatus",()=>t,"isFreePlan",()=>n])},896182,e=>{"use strict";var t=e.i(509473),n=e.i(667660),r=e.i(206037),i=e.i(676069),o=e.i(230125),a=e.i(794593),s=e.i(909270);function l(e){var l;let{className:c}=e,{activeScope:u}=(0,n.useActiveScope)(),{planInfo:d,planSlug:p}=(0,r.usePlanInfo)(!0,null==u?void 0:u.id),h=(0,i.getPaymentStatus)(d),f=null==h||null==(l=h.openInvoices[0])?void 0:l.url;return d&&f&&p&&"v0-level0"!==p&&"paid"!==h.status&&"processing"!==h.status&&"pending"!==h.status?(0,t.jsx)(s.default,{href:f,children:(0,t.jsx)(a.Badge,{variant:"red",prefix:(0,t.jsx)(o.Warning,{}),children:"Payment Failed"})}):null}e.s(["NonPaymentBadge",()=>l])},235009,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(465839),i=e.i(639056),o=e.i(490293),a=e.i(304649),s=e.i(529693),l=e.i(365290);let c=n.createContext(null);function u(){let e=n.useContext(c);if(!e)throw Error("useTabsToggle must be used within TabsToggle");return e}let d=n.forwardRef((e,s)=>{let{className:l,children:u,defaultValue:d,value:p,onValueChange:h,atom:f,...m}=e,g=n.useId(),v=n.useMemo(()=>(0,o.atom)(void 0),[]),[x,y]=(0,i.useAtom)(null!=f?f:v),b=void 0!==f,[w,j]=n.useState(null!=p?p:d),C=b?x:void 0!==p?p:w,k=b?y:e=>j(e),[S,N]=n.useState([]),E=n.useCallback((e,t)=>{N(n=>n.find(t=>t.value===e)?n.map(n=>n.value===e?{value:e,disabled:t}:n):[...n,{value:e,disabled:t}])},[]),D=n.useCallback(e=>{N(t=>t.filter(t=>t.value!==e))},[]),I=n.useCallback(()=>{if(0===S.length)return;let e=(S.findIndex(e=>e.value===C)+1)%S.length,t=0;for(;t<S.length;){let n=S[e];if(!n.disabled){k(n.value),null==h||h(n.value);return}e=(e+1)%S.length,t++}},[S,C,k,h]);return(0,t.jsx)(c.Provider,{value:{activeTab:C,setActiveTab:k,layoutId:g,cycleToNext:I,registerTab:E,unregisterTab:D},children:(0,t.jsx)(r.Root,{ref:s,defaultValue:b?void 0:d,value:C,onValueChange:e=>{k(e),null==h||h(e)},...m,children:(0,t.jsxs)(r.List,{className:(0,a.cn)("text-label-14 relative inline-flex h-7 font-medium",l),"data-layout-id":g,onClick:I,children:[(0,t.jsx)("div",{className:"group absolute inset-0 rounded-[6px] border border-v0-alpha-400 bg-v0-gray-100"}),u]})})})});d.displayName="TabsToggle";let p=n.forwardRef((e,i)=>{let{className:o,children:c,square:d,onClick:p,...h}=e,{activeTab:f,layoutId:m,cycleToNext:g,registerTab:v,unregisterTab:x}=u(),y=f===h.value;n.useEffect(()=>{if(h.value){var e;v(h.value,null!=(e=h.disabled)&&e)}return()=>{h.value&&x(h.value)}},[h.value,h.disabled,v,x]);let b=e=>{let t=y;if(h.disabled||t){e.preventDefault(),e.stopPropagation(),g();return}e.stopPropagation()},w=e=>{e.stopPropagation(),null==p||p(e)};return(0,t.jsxs)(r.Trigger,{ref:i,className:(0,a.cn)("group relative inline-flex items-center justify-center text-v0-gray-900 focus-visible:outline-none focus-visible:ring-0 data-[state=active]:text-gray-900 cursor-pointer",d&&"w-7 max-w-7 px-0",o),style:{...(0,l.transitionStyles)(["color"],{duration:300})},onMouseDown:b,onClick:w,...h,children:[y&&(0,t.jsx)(s.motion.div,{className:(0,a.cn)("bg-v0-background-100 absolute inset-[1px] rounded-[5px] shadow-[0px_2px_2px_0px_rgba(0,0,0,0.04),0px_8px_8px_-8px_rgba(0,0,0,0.04)]","group-focus-visible:ring-offset-background group-focus-visible:ring-2 group-focus-visible:ring-v0-caveat-focus-ring-tab group-focus-visible:ring-offset-[1.5px]"),layoutId:"".concat(m,"-indicator"),transition:{type:"spring",bounce:.04,duration:.3}}),(0,t.jsx)("div",{className:(0,a.cn)("z-10 flex items-center justify-center gap-1.5 overflow-hidden px-2",d&&"px-0"),children:c})]})});p.displayName="TabsToggleTrigger",d.Trigger=p,e.s(["TabsToggle",()=>d,"TabsToggleTrigger",()=>p])},805214,e=>{"use strict";e.s(["HeaderUserMenu",()=>J],805214);var t=e.i(509473),n=e.i(743124),r=e.i(556355),i=e.i(176248),o=e.i(762585),a=e.i(297239),s=e.i(331967),l=e.i(532567),c=e.i(120407),u=e.i(22061),d=e.i(932009),p=e.i(968811),h=e.i(367801),f=e.i(315266),m=e.i(494206),g=e.i(230766),v=e.i(304649),x=e.i(966848),y=e.i(701739),b=e.i(595722),w=e.i(794593),j=e.i(906261),C=e.i(667660),k=e.i(998065),S=e.i(425622),N=e.i(296046);e.i(904347);var E=e.i(37737),D=e.i(175241),I=e.i(242759),A=e.i(696871),T=e.i(896182),M=e.i(574768),L=t,P=e.i(235009),R=e.i(763480),_=e.i(707974),O=e.i(990453),F=e.i(338157),B=i,V=n,z=e.i(358847),H=(0,z.createServerReference)("400e1e866f46753d5857af3d1c41f2435d3bae5456",z.callServer,void 0,z.findSourceMapURL,"creditAction"),U=z,G=(0,U.createServerReference)("40bee07e5c7fbe0391d39be89ce4ce87b1e1bf165d",U.callServer,void 0,U.findSourceMapURL,"debitAction"),W=e.i(936990),q=e.i(707827);e.i(563948);var Z=e.i(407562);function K(){var e,t,n,r;let[i,o]=(0,V.useState)("debit"),[a,s]=(0,V.useState)("1"),[l,c]=(0,V.useState)("1000"),[u,d]=(0,V.useState)("onDemand"),[p,h]=(0,V.useState)(!1),[f,m]=(0,V.useState)(!1),[g,v]=(0,V.useState)(new Date().toISOString().slice(0,16)),[x,y]=(0,V.useState)(new Date(Date.now()+2592e6).toISOString().slice(0,16)),{mutate:b,planInfo:w,isLoading:j}=(0,W.useTokenBillingPlanInfo)({refreshInterval:1e3}),C=()=>$(()=>G({amount:a,allowOverdraft:p}),"Debit successful",m,b),k=()=>$(()=>H({amount:l,type:u,effectiveDate:"plan"===u?g:void 0,expirationDate:"plan"===u?x:void 0}),"".concat("onDemand"===u?"On-Demand":"Plan"," credit successful"),m,b);return j?(0,L.jsxs)("div",{className:"animate-pulse space-y-3 p-3",children:[(0,L.jsx)("div",{className:"h-4 bg-v0-gray-200 rounded-md w-24"}),(0,L.jsx)("div",{className:"h-6 bg-v0-gray-200 rounded-md w-16"}),(0,L.jsx)("div",{className:"h-8 bg-v0-gray-200 rounded-md w-32"})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"flex flex-col justify-center p-3 border-b border-v0-alpha-400 gap-2",children:[(0,L.jsxs)(_.Label,{className:"text-sm flex justify-between",children:[(0,L.jsx)("span",{className:"text-v0-gray-1000 font-normal",children:"Plan"}),(0,L.jsx)("span",{className:"font-medium",children:null!=(e=null==w?void 0:w.plan)?e:(0,L.jsx)("span",{children:"N/A"})})]}),(0,L.jsxs)(_.Label,{className:"text-sm font-medium flex justify-between",children:[(0,L.jsx)("span",{className:"text-v0-gray-1000 font-normal",children:"Monthly credits"}),(0,L.jsxs)("span",{className:"font-medium",children:[null!=(t=null==w?void 0:w.balance.remaining.toFixed(2))?t:(0,L.jsx)("span",{children:"N/A"}),(0,L.jsxs)("span",{children:["/",null!=(n=null==w?void 0:w.balance.total)?n:(0,L.jsx)("span",{children:"N/A"})]})]})]}),(0,L.jsxs)(_.Label,{className:"text-sm font-medium flex justify-between",children:[(0,L.jsx)("span",{className:"text-v0-gray-1000 font-normal",children:"Purchased credits"}),(0,L.jsx)("span",{className:"font-medium",children:null!=(r=null==w?void 0:w.onDemand.balance.toFixed(2))?r:(0,L.jsx)("span",{children:"N/A"})})]})]}),(0,L.jsxs)("div",{className:"w-full",children:[(0,L.jsx)("div",{className:"px-3 pt-3",children:(0,L.jsxs)(P.TabsToggle,{value:i,onValueChange:f?void 0:o,className:"w-full",children:[(0,L.jsx)(P.TabsToggleTrigger,{value:"debit",className:"w-full",disabled:f,children:"Debit"}),(0,L.jsx)(P.TabsToggleTrigger,{value:"credit",className:"w-full",disabled:f,children:"Credit"})]})}),"debit"===i&&(0,L.jsxs)("div",{className:"space-y-3 py-3 px-3",children:[(0,L.jsx)(Y,{value:u,onChange:e=>d(e)}),(0,L.jsxs)("div",{className:"space-y-2",children:[(0,L.jsx)(_.Label,{htmlFor:"debit-amount",children:"Amount"}),(0,L.jsx)(R.Input,{className:"rounded-md h-7",id:"debit-amount",type:"number",value:a,onChange:e=>s(e.target.value),placeholder:"onDemand"===u?"Enter on-demand credit amount":"Enter plan credit amount"})]}),(0,L.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,L.jsx)(O.Switch,{id:"allow-overdraft",checked:p,onCheckedChange:h}),(0,L.jsx)(_.Label,{htmlFor:"allow-overdraft",children:"Allow Overdraft"})]}),(0,L.jsx)(B.Button,{size:"sm",variant:"destructive",onClick:C,disabled:f,className:"rounded-md w-full",children:f?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(q.Spinner,{className:"!size-4"}),"Processing"]}):"Debit Credits"})]}),"credit"===i&&(0,L.jsxs)("div",{className:"space-y-3 py-3 px-3",children:[(0,L.jsx)(Y,{value:u,onChange:e=>d(e)}),(0,L.jsxs)("div",{className:"space-y-2",children:[(0,L.jsx)(_.Label,{htmlFor:"credit-amount",children:"Amount"}),(0,L.jsx)(R.Input,{className:"rounded-md h-7",id:"credit-amount",type:"number",value:l,onChange:e=>c(e.target.value),placeholder:"Enter credit amount"})]}),"plan"===u&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"space-y-2",children:[(0,L.jsx)(_.Label,{htmlFor:"effective-date",children:"Effective Date"}),(0,L.jsx)(R.Input,{className:"rounded-md h-7",id:"effective-date",type:"datetime-local",value:g,onChange:e=>v(e.target.value)})]}),(0,L.jsxs)("div",{className:"space-y-2",children:[(0,L.jsx)(_.Label,{htmlFor:"expiration-date",children:"Expiration Date"}),(0,L.jsx)(R.Input,{className:"rounded-md h-7",id:"expiration-date",type:"datetime-local",value:x,onChange:e=>y(e.target.value)})]})]}),(0,L.jsx)(B.Button,{size:"sm",onClick:k,disabled:f,className:"rounded-md w-full bg-v0-blue-700 text-[#FFFFFF] hover:bg-v0-blue-700",variant:"ghost",children:f?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(q.Spinner,{className:"!size-4"}),"Processing"]}):(0,L.jsx)("span",{children:"onDemand"===u?"Add On-demand Credits":"Add Plan Credits"})})]})]})]})}let $=async(e,t,n,r)=>{n(!0);try{let n=await e();n.success?Z.toast.success(t):Z.toast.error("".concat(t.split(" ")[0]," failed. Error: ").concat(JSON.stringify(n)))}catch(e){Z.toast.error("Error occurred while ".concat(t.toLowerCase()))}finally{await r(),n(!1)}},Y=e=>{let{value:t,onChange:n}=e;return(0,L.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,L.jsx)(_.Label,{className:"text-v0-gray-900 font-medium",children:"Credit Type"}),(0,L.jsxs)(F.RadioGroup,{className:"flex flex-col gap-3",value:t,onValueChange:n,children:[(0,L.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,L.jsx)(F.RadioGroupItem,{value:"onDemand",id:"onDemand"}),(0,L.jsx)(_.Label,{className:"text-v0-gray-1000",htmlFor:"onDemand",children:"Purchased/on-demand credits"})]}),(0,L.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,L.jsx)(F.RadioGroupItem,{value:"plan",id:"plan"}),(0,L.jsx)(_.Label,{className:"text-v0-gray-1000",htmlFor:"plan",children:"Monthly/included credits"})]})]})]})};function J(e){let{className:L,...P}=e,R=(0,a.useT)(),[_,O]=(0,n.useState)(!1),F=(0,N.useIsChatPage)(),{tbb:B,profpe:V}=(0,I.useFlags)(),z=(0,n.useRef)(null),{activeScope:H,user:U}=(0,C.useActiveScope)(),G=(0,j.isUserScope)(H),W=(0,n.useCallback)(()=>{(0,E.openDialog)({type:"upgradePlan"}),O(!1)},[]);if(!U)return(0,t.jsx)(o.Skeleton,{className:"m-0.5 size-6 rounded-full"});let q=G&&"v0-level0"===U.v0plan,Z=U.isAdminMode;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.NonPaymentBadge,{className:F?"@[60rem]/chat-header:[&_.non-payment-text]:block @[60rem]/chat-header:w-auto w-7 [&_.non-payment-text]:hidden":void 0}),Z?(0,t.jsx)(w.Badge,{variant:"blue",prefix:(0,t.jsx)(c.LockClosedSmall,{}),children:(0,t.jsx)("span",{className:"text-label-14 font-medium",children:"Admin"})}):null,"test"===U.billingMode?(0,t.jsxs)(M.Popover,{children:[(0,t.jsx)(M.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{className:"size-7 rounded-md bg-[#1FA572] hover:bg-[#1B9365]",variant:"ghost",tooltip:"Stripe test mode tools (internal)",tooltipDirection:"bottom",children:(0,t.jsx)(Q,{className:"!size-3.5 shrink-0 text-[#FFFFFF]"})})}),(0,t.jsx)(M.PopoverContent,{className:"w-64",align:"end",children:(0,t.jsx)(K,{})})]}):null,(0,t.jsxs)(r.DropdownMenu,{open:_,onOpenChange:O,children:[(0,t.jsx)(r.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{ref:z,className:(0,v.cn)("hover:bg-v0-alpha-400 focus:bg-v0-alpha-400 size-fit border-0 p-0.5",_&&"bg-v0-alpha-400",Z&&"bg-v0-blue-200 ring-2 ring-v0-blue-700 hover:bg-blue-600/50 hover:ring-v0-blue-1000 focus:bg-blue-600/50 focus:ring-v0-blue-1000",L),"data-testid":"user-menu-toggle",rounded:!0,variant:"ghost",...P,children:(0,t.jsx)(g.AvatarUser,{avatarSha:U.avatarSha,userId:U.id,className:"size-6",rounded:!0})})}),(0,t.jsxs)(r.DropdownMenuContent,{onCloseAutoFocus:e=>{e.preventDefault()},onEscapeKeyDown:()=>{var e;O(!1),null==(e=z.current)||e.focus()},align:"end",className:"max-h-[calc(100vh-90px)] w-[250px] overflow-y-auto",side:"top",sideOffset:8,children:[(0,t.jsx)(x.MenuGroup,{children:(0,t.jsx)("div",{className:"h-11 content-center px-1.5",children:(0,t.jsx)(b.ScopeItemContent,{scope:U,user:U,showEmail:!0,showName:!0,showAvatar:!1})})}),q&&!B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsx)(x.MenuGroup,{children:(0,t.jsx)(S.UserMessageItemContent,{})})]}):null,(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsxs)(x.MenuGroup,{children:[V&&(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.userMenu.profile"),Icon:(0,t.jsx)(f.User,{}),href:"/@".concat(U.username),onClick:()=>{O(!1)}}),(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.scopeSwitcher.settings"),Icon:(0,t.jsx)(l.SettingsGear,{}),href:"/chat/settings",onClick:()=>{O(!1)}}),(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.userMenu.pricing"),Icon:(0,t.jsx)(p.Dollar,{}),href:"/pricing",external:!0,sameTab:!0}),(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.userMenu.documentation"),Icon:(0,t.jsx)(d.BookOpen,{}),href:"/docs",external:!0}),(0,t.jsx)(x.LinkMenuItem,{label:R("sidebar.userMenu.communityForum"),sameTab:!1,external:!0,className:"group",Icon:(0,t.jsx)(h.Users,{className:"[&_path]:fill-gray-500 [&_path]:group-hover:fill-gray-900"}),href:A.VERCEL_COMMUNITY_V0_SECTION_URL}),F?(0,t.jsx)(x.MenuItem,{onSelect:()=>(0,E.openDialog)({type:"feedback"}),children:(0,t.jsx)(x.MenuItemContent,{label:R("sidebar.userMenu.feedback"),Icon:(0,t.jsx)(u.Question,{})})}):null]}),(0,t.jsx)(r.DropdownMenuSeparator,{}),B?(0,t.jsx)(D.HeaderCreditBalance,{onClick:O}):null,(0,t.jsx)(k.HeaderPreference,{}),(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsx)(x.MenuGroup,{children:(0,t.jsx)(x.ActionMenuItem,{label:R("sidebar.scopeSwitcher.signOut"),Icon:(0,t.jsx)(s.Logout,{}),action:m.logoutAction})}),q&&!B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsx)(x.MenuGroup,{children:(0,t.jsx)(y.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(i.Button,{size:"sm",className:"focus:ring-0 focus-visible:ring-0",onClick:W,"data-testid":"upgrade-cta-button",children:R("sidebar.scopeSwitcher.upgradeToPremium")})})})]}):null]})]})]})}let Q=e=>{let{className:n,...r}=e;return(0,t.jsx)("svg",{className:n,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.87023 4.76483C6.87023 4.07912 7.43286 3.81539 8.36473 3.81539C9.701 3.81539 11.3889 4.21978 12.7252 4.94066V0.808791C11.2658 0.228571 9.82407 0 8.36473 0C4.7955 0 2.42188 1.86374 2.42188 4.97582C2.42188 9.82857 9.10319 9.05494 9.10319 11.1473C9.10319 11.956 8.3999 12.2198 7.41528 12.2198C5.95594 12.2198 4.0922 11.622 2.61528 10.8132V14.9978C4.25045 15.7011 5.90319 16 7.41528 16C11.0724 16 13.5867 14.189 13.5867 11.0418C13.5691 5.8022 6.87023 6.73407 6.87023 4.76483Z",fill:"currentColor"})})}},972287,e=>{"use strict";var t=e.i(490293),n=e.i(753533);e.i(472428);var r=e.i(152641);let i=null,o=(0,n.cacheResult)(i,()=>({user:(0,t.atom)(r.ASSERT_SWR_DATA),chats:(0,t.atom)(r.ASSERT_SWR_DATA),scopes:(0,t.atom)(r.ASSERT_SWR_DATA),projects:(0,t.atom)(r.ASSERT_SWR_DATA),rateLimit:(0,t.atom)(r.ASSERT_SWR_DATA),newFeatureBanner:(0,t.atom)(r.ASSERT_SWR_DATA),gitNamespaces:(0,t.atom)(r.ASSERT_SWR_DATA),paginatedProjects:(0,t.atom)(r.ASSERT_SWR_DATA),editableTemplates:(0,t.atom)(r.ASSERT_SWR_DATA),designSystems:(0,t.atom)(r.ASSERT_SWR_DATA),team:(0,t.atom)(r.ASSERT_SWR_DATA)})),a=null,s=(0,n.cacheResult)(a,()=>({...o()}));e.s(["getScopedAtoms",0,s,"getWritableScopedAtoms",0,o])},457456,819892,e=>{"use strict";var t=e.i(490293),n=e.i(753533),r=e.i(142219),i=e.i(696871);let o=null,a=(0,n.cacheResult)(o,()=>({dailyModelUsage:(0,t.atom)({usage:void 0})})),s=null,l=(0,n.cacheResult)(s,()=>{let e=a();return{...e,dailyModelUsageRateLimit:(0,t.atom)(t=>{var n;let r=null!=(n=t(e.dailyModelUsage).usage)?n:0;return{usage:r,remaining:Math.max(0,i.DAILY_MODEL_USAGE_LIMIT-r),limit:i.DAILY_MODEL_USAGE_LIMIT}})}});function c(){let e=a();return{updateDailyModelUsage:t=>{r.store.set(e.dailyModelUsage,{usage:t})}}}e.s(["getGlobalActions",()=>c,"getGlobalAtoms",0,l,"getWritableGlobalAtoms",0,a],457456);var u=t,d=n,p=e.i(470259);let h=new Map,f=(0,d.cacheResultById)(h,()=>({latestGit:(0,u.atom)({error:p.NOT_FOUND}),passwordProtection:(0,u.atom)({error:p.NOT_FOUND,message:"Password protection status not found"})})),m=new Map,g=(0,d.cacheResultById)(m,e=>({...f(e)}));e.s(["getProjectAtoms",0,g,"getWritableProjectAtoms",0,f],819892)},407705,331968,e=>{"use strict";var t=e.i(490293),n=e.i(753533),r=e.i(142219),i=e.i(819969),o=e.i(470259),a=e.i(972287),s=e.i(819892);function l(e){if(!e)return null;let t=e.replace(/\s+/g,"-");return"@"!==(t=(t=t.replace(/[\x00-\x1F\x7F~^\:\?\*\[\\\@\{]/g,"")).replace(/\.{2,}/g,"."))&&(t=t.replace(/^\.|\.$/g,""))?t:null}e.s(["sanitizeBranchName",()=>l],331968);let c=new Map,u=(0,n.cacheResultById)(c,(e,n)=>{var r;return{isOpen:(0,t.atom)(!1),stageIntent:(0,t.atom)(null),isAutoSyncEnabled:(0,t.atom)(!1),createBranchName:(0,t.atom)(null),createBranchNameError:(0,t.atom)(null),selectedBranch:(0,t.atom)(null),selectedGitNamespaceName:(0,t.atom)(null),createRepoName:(0,t.atom)(null!=(r=null==n?void 0:n.defaultRepoName)?r:null),createRepoNameError:(0,t.atom)(null),asyncActionLoading:(0,t.atom)(null),lastSyncedCommitSha:(0,t.atom)(null),isRefreshingGitHead:(0,t.atom)(!1),timeSinceLastSync:(0,t.atom)(null),switchBranchTarget:(0,t.atom)(null),syncedShas:(0,t.atom)(new Set)}}),d=new Map,p=(0,n.cacheResultById)(d,(e,n,r)=>{let c=u(e,{defaultRepoName:null==r?void 0:r.defaultRepoName}),d=(0,i.getChatAtoms)(e),p=(0,a.getScopedAtoms)(),h=(0,s.getProjectAtoms)(n),f=(0,t.atom)(e=>{let t=e(c.createBranchName);return!!t&&t===l(t)}),m=(0,t.atom)(e=>{let t=e(d.externalMeta);return t.git&&t.git.gitConnected&&t.git.ref?t.git.ref:null}),g=(0,t.atom)(e=>{let{head:t}=e(h.latestGit),n=e(d.externalMeta).git,r=e(c.syncedShas);return!(null==t?void 0:t.sha)||!n||!("sha"in n)||n.sha===t.sha||r.has(t.sha)?null:t.sha});return{...c,latestProjectGit:h.latestGit,externalChatMeta:d.externalMeta,gitNamespaces:p.gitNamespaces,stage:(0,t.atom)(e=>{let t=e(d.externalMeta);if(t.error&&t.error!==o.NOT_FOUND)return"error";if(!t.git){if(e(p.gitNamespaces).error)return"error";let t=e(p.gitNamespaces);return t.verifiedGitHubUser?t.userNamespace||t.orgNamespaces.length?"create-repo":"install-app":"sign-in"}let n=e(c.stageIntent);return e(m)?n||(t.git.gitConnected?"status":"select-branch"):"create-branch"===n?"create-branch":"select-branch"}),allBranches:(0,t.atom)(e=>{var t,n;let r=e(h.latestGit);if(r.error)return[];let i=e(m);return(null!=(n=null==(t=r.branches)?void 0:t.map(e=>e.name))?n:[]).sort((e,t)=>e===i?-1:+(t===i))}),isConnectedToGit:(0,t.atom)(e=>!!e(d.externalMeta).git),disableAsyncAction:(0,t.atom)(e=>e(d.isStreaming)),currentBranch:m,isAbleToCreateBranch:(0,t.atom)(e=>"creating-branch"!==e(c.asyncActionLoading)&&e(f)&&null!==e(c.createBranchName)),upstreamSha:g,isNewBranchNameValid:f}}),h=null,f=1e3;function m(e,t){let n=u(e,{defaultRepoName:null==t?void 0:t.defaultRepoName});return{setIsOpen:e=>r.store.set(n.isOpen,e),setStageIntent:e=>{h&&clearTimeout(h),r.store.set(n.stageIntent,e)},resetStageOnDelay:()=>{h&&clearTimeout(h),h=setTimeout(()=>{r.store.set(n.stageIntent,null)},f)},setAsyncActionLoading:e=>r.store.set(n.asyncActionLoading,e),setIsAutoSyncEnabled:e=>r.store.set(n.isAutoSyncEnabled,e),updateCreateBranchName:e=>{let t=l(e);r.store.set(n.createBranchName,t),r.store.set(n.createBranchNameError,null)},setCreateBranchNameError:e=>r.store.set(n.createBranchNameError,e),setSelectedBranch:e=>r.store.set(n.selectedBranch,e),setCreateRepoName:e=>{r.store.set(n.createRepoName,e),r.store.set(n.createRepoNameError,null)},setCreateRepoNameError:e=>r.store.set(n.createRepoNameError,e),setSelectedGitNamespaceName:e=>r.store.set(n.selectedGitNamespaceName,e),setLastSyncedCommitSha:e=>r.store.set(n.lastSyncedCommitSha,e),updateIsRefreshingGitHead:e=>{e&&r.store.set(n.timeSinceLastSync,Date.now()),r.store.set(n.isRefreshingGitHead,e)},setSwitchBranchTarget:e=>r.store.set(n.switchBranchTarget,e),addSyncedSha:e=>r.store.set(n.syncedShas,new Set([...r.store.get(n.syncedShas),e]))}}function g(e,t){return!!(e&&t.includes(e))}e.s(["getGitSyncActions",()=>m,"getGitSyncAtoms",0,p,"isInState",()=>g],407705)},144019,992771,397314,761033,921,e=>{"use strict";e.i(563948);var t=e.i(407562),n=e.i(358847),r=(0,n.createServerReference)("600ea5ce995c8c9b0a3fd21aa83fb28df21d834ec3",n.callServer,void 0,n.findSourceMapURL,"createNewVercelProject");e.s(["createNewVercelProject",()=>r],992771);var i=n,o=(0,i.createServerReference)("403e8b37a5218dce5f198532e31e1d6bafd32c0a11",i.callServer,void 0,i.findSourceMapURL,"newProjectAction");e.s(["newProjectAction",()=>o],397314);var a=n,s=(0,a.createServerReference)("40516a1852e91a98c935fa3321b8bdaa6795a0f9f0",a.callServer,void 0,a.findSourceMapURL,"assignProjectToChat");e.s(["assignProjectToChat",()=>s],761033);var l=e.i(387040);async function c(e){let{projectName:n,chatId:i,onSuccess:a,includeSuccessToast:c=!0}=e;if(e.existingProjectId){let t=await r(e.existingProjectId,n);return t.ok?(0,l.ok)({id:e.existingProjectId,vercelProjectId:t.value.id,name:t.value.name}):t}{let e=await o({name:n,icon:"icon-wand-sparkles"});if(!e.ok){var u,d;return(0,l.err)("fieldErrors"in e.error?null!=(d=null==(u=e.error.fieldErrors.name)?void 0:u.at(0))?d:"Failed to create project":e.error.message)}if(c&&t.toast.success("Project created successfully"),i){let t=await s({chatId:i,projectId:e.value.id});if(!t.ok)return(0,l.err)("Failed to add chat to newly created project. Error: ".concat(t.error))}return null==a||a(e.value.id),e}}e.s(["createProject",()=>c],921);var u=l,d=e.i(209819);function p(e){let{chatId:t,activeBlock:n}=e,{project:r,title:i,setMetadata:o}=(0,d.useChatMetadata)();return async()=>{var e;if(!n||!t)return(0,u.err)("Invalid chat or block");if(null==r?void 0:r.vercelProjectId)return(0,u.ok)({vercelProjectId:r.vercelProjectId});let a=h(n,i),s=await c({existingProjectId:null==r?void 0:r.projectId,projectName:a,onSuccess:()=>{},chatId:t,includeSuccessToast:!1});return s.ok&&await o({project:{projectId:s.value.id,vercelProjectId:null!=(e=s.value.vercelProjectId)?e:null,name:s.value.name,settings:{color:null,icon:"icon-wand-sparkles"},isCreator:!0,...r}}),s}}function h(e,t){var n;let r="Duplicate of ",i=null!=(n=null==e?void 0:e.meta.title)?n:t;return i.startsWith(r)&&(i=i.slice(r.length)),i}e.s(["useAutoCreateProject",()=>p],144019)},751660,e=>{"use strict";var t=e.i(509473);let n=16,r="__ADD_ID__",i="0 0 ".concat(n," ").concat(n),o="round",a={top:"text-top",bottom:"text-bottom",middle:"middle",initial:null},s=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{color:l="currentColor",size:c,width:u,height:d,viewBox:p=i}=s;return function(i){let s=Math.random().toString(36).slice(2,11),{size:h,color:f=l||"currentColor",align:m="initial",className:g,width:v,height:x,style:y,...b}=i,w=a[m],j=c||n,C=u||v,k=d||x,S=e.replace(RegExp(r,"g"),s);return(0,t.jsx)("svg",{className:g,dangerouslySetInnerHTML:{__html:S},"data-testid":"geist-icon",height:j,strokeLinejoin:o,style:{...y,verticalAlign:w||void 0,width:C||h,height:k||h,color:f},viewBox:p,width:j,...b},s)}};e.s(["withNewIcon",0,s])},194465,221871,435433,978918,e=>{"use strict";e.s(["GitSyncCreateProjectTrigger",()=>b,"GitSyncTrigger",()=>j,"GitSyncTriggerSkeleton",()=>w],194465);var t=e.i(509473),n=e.i(176248),r=e.i(639056),i=e.i(407705),o=e.i(675120),a=e.i(707827),s=e.i(743124),l=e.i(144019),c=e.i(449381);e.i(563948);var u=e.i(407562),d=t,p=e.i(751660),h=e.i(403055);let f=(0,e.i(936096).withNewIcon)('<g clip-path="url(#clip0_872_3147)">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.57879 0 7.99729C0 11.5361 2.29 14.5251 5.47 15.5847C5.87 15.6547 6.02 15.4148 6.02 15.2049C6.02 15.0149 6.01 14.3851 6.01 13.7154C4 14.0852 3.48 13.2255 3.32 12.7757C3.23 12.5458 2.84 11.836 2.5 11.6461C2.22 11.4961 1.82 11.1262 2.49 11.1162C3.12 11.1062 3.57 11.696 3.72 11.936C4.44 13.1455 5.59 12.8057 6.05 12.5957C6.12 12.0759 6.33 11.726 6.56 11.5261C4.78 11.3262 2.92 10.6364 2.92 7.57743C2.92 6.70773 3.23 5.98797 3.74 5.42816C3.66 5.22823 3.38 4.40851 3.82 3.30888C3.82 3.30888 4.49 3.09895 6.02 4.1286C6.66 3.94866 7.34 3.85869 8.02 3.85869C8.7 3.85869 9.38 3.94866 10.02 4.1286C11.55 3.08895 12.22 3.30888 12.22 3.30888C12.66 4.40851 12.38 5.22823 12.3 5.42816C12.81 5.98797 13.12 6.69773 13.12 7.57743C13.12 10.6464 11.25 11.3262 9.47 11.5261C9.76 11.776 10.01 12.2558 10.01 13.0056C10.01 14.0752 10 14.9349 10 15.2049C10 15.4148 10.15 15.6647 10.55 15.5847C12.1381 15.0488 13.5182 14.0284 14.4958 12.6673C15.4735 11.3062 15.9996 9.67293 16 7.99729C16 3.57879 12.42 0 8 0Z" fill="currentColor"/>\n  </g>\n  <defs>\n  <clipPath id="clip0_872_3147">\n  <rect width="16" height="16" fill="white"/>\n  </clipPath>\n  </defs>');e.s(["LogoGithub",0,f],221871);let m=e=>{let{status:t="none"}=e;return"none"===t?(0,d.jsx)(f,{}):(0,d.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsxs)("g",{clipPath:"url(#clip)",children:[(0,d.jsx)("path",{d:"M7.99951 0.000366211C12.4194 0.000366211 15.9994 3.57903 15.9995 7.99744C15.9993 8.73285 15.8971 9.45983 15.7007 10.1595C15.0695 9.74288 14.3134 9.50046 13.5005 9.50037C13.2446 9.50037 12.994 9.52476 12.7515 9.57068C12.9836 9.05393 13.1196 8.40228 13.1196 7.57751C13.1196 6.69794 12.8093 5.98785 12.2993 5.4281C12.3795 5.22766 12.6589 4.40796 12.2192 3.30896C12.1956 3.3017 11.5216 3.10824 10.019 4.12927C9.37924 3.94946 8.6988 3.85876 8.01904 3.85876C7.33935 3.85885 6.65875 3.94942 6.01904 4.12927C4.50987 3.11373 3.83765 3.30364 3.81982 3.30896C3.3803 4.40782 3.6596 5.2277 3.73975 5.4281C3.23003 5.98779 2.9195 6.70816 2.91943 7.57751C2.91958 10.6357 4.7794 11.3267 6.55908 11.5267C6.3294 11.7268 6.11923 12.0769 6.04932 12.5961C5.58888 12.806 4.43889 13.1448 3.71924 11.9359C3.569 11.6958 3.11926 11.1067 2.48975 11.1166C1.82056 11.1267 2.21959 11.4969 2.49951 11.6469C2.8394 11.8369 3.22974 12.5457 3.31982 12.7758C3.47988 13.2256 4.00022 14.0856 6.00928 13.7162C6.00929 14.3857 6.01904 15.0156 6.01904 15.2054C6.01876 15.4152 5.86886 15.6552 5.46924 15.5853C2.2896 14.5256 -0.000331454 11.5359 -0.000488281 7.99744C-0.000368517 3.57919 3.5798 0.000613049 7.99951 0.000366211Z",fill:"currentColor"}),(0,d.jsx)("circle",{cx:"13.5",cy:"13.5",r:"2.5",className:(0,h.cn)("transition-all duration-300","synced"===t&&"fill-green-500","syncing"===t&&"fill-gray-400","error"===t&&"fill-red-500")})]})},"git-sync-icon")},g=(0,p.withNewIcon)('<path d="M3.95326 7.55195L4.48353 8.08223L3.1349 9.43086C2.18706 10.3794 2.18681 11.9171 3.1349 12.8654C4.08338 13.8137 5.62192 13.8136 6.57045 12.8654L7.91908 11.5168L8.97962 12.5773L7.63099 13.926C6.09668 15.46 3.60862 15.4601 2.07435 13.926C0.540479 12.3918 0.540731 9.90462 2.07435 8.37031L3.42298 7.0207L3.95326 7.55195ZM13.0255 11.966L11.965 13.0266L2.97377 4.03535L4.03431 2.9748L13.0255 11.966ZM8.3683 2.07539C9.90253 0.541161 12.3906 0.541391 13.9249 2.07539C15.4589 3.60964 15.4588 6.09677 13.9249 7.63105L12.5763 8.98066L12.046 8.44941L11.5158 7.91914L12.8644 6.57051C13.8125 5.62201 13.8126 4.0844 12.8644 3.13594C11.9158 2.18773 10.3773 2.18749 9.42884 3.13594L8.08021 4.48457L7.01966 3.42402L8.3683 2.07539Z" fill="currentColor"/>');e.s(["LogoGitHubSynced",0,m,"Unlink",0,g],435433);var v=e.i(297239),x=e.i(667660),y=e.i(538553);function b(e){let{chatId:n,...r}=e,a=(0,v.useT)(),d=(0,i.getGitSyncActions)(n),p=(0,c.useActiveBlockState)(),h=(0,l.useAutoCreateProject)({chatId:n,activeBlock:p}),[f,g]=(0,s.useState)(!1),{hasVercelWritePermission:b}=(0,x.useActiveScope)(),w=(0,s.useCallback)(async()=>{if(f)return;g(!0);let e=await h();if(g(!1),!e.ok)return void u.toast.error(a("gitSync.trigger.failedToCreateProject"));d.setIsOpen(!0)},[d,h,f,a]);return(0,t.jsx)(y.RbacTooltip,{show:!b,requiredRole:"V0Builder",children:(0,t.jsx)(C,{...r,onClick:w,disabled:f||!b,tooltip:a("gitSync.trigger.connectToGitHub"),children:(0,t.jsx)(o.TransitionNode,{...o.PRESETS.buttonContent,children:(0,t.jsx)(m,{})})})})}function w(){let e=(0,v.useT)();return(0,t.jsx)(C,{disabled:!0,tooltip:{side:"bottom",content:e("gitSync.trigger.loadingGitHubConnection")},children:(0,t.jsx)(m,{})})}function j(e){let{chatId:n,projectId:l,...c}=e,u=(0,v.useT)(),d=(0,i.getGitSyncAtoms)(n,l),p=(0,r.useAtomValue)(d.asyncActionLoading),h=(0,r.useAtomValue)(d.isConnectedToGit),f=(0,r.useAtomValue)(d.currentBranch),{error:g}=(0,r.useAtomValue)(d.externalChatMeta),{hasVercelWritePermission:y}=(0,x.useActiveScope)(),b=(0,i.isInState)(p,["sign-in","install-app","create-repo"]),w="".concat(b,"-").concat(h),j=(0,s.useMemo)(()=>(0,i.isInState)(p,["sign-in","install-app","create-repo"])?(0,t.jsx)(a.Spinner,{size:16}):g?(0,t.jsx)(m,{status:"error"}):h?(0,i.isInState)(p,["pushing-to-branch","syncing-to-branch","switching-branch"])||!f?(0,t.jsx)(m,{status:"syncing"}):(0,t.jsx)(m,{status:"synced"}):(0,t.jsx)(m,{}),[p,f,g,h]);return(0,t.jsxs)(C,{tooltip:{side:"bottom",content:h&&f?u("gitSync.trigger.connectedToBranch")(f):u("gitSync.trigger.connectToBranch")},disabled:!y||c.disabled,...c,children:[(0,t.jsx)(o.TransitionNode,{...o.PRESETS.buttonContent,renderKey:w,children:j}),(0,t.jsx)("span",{className:"sr-only",children:h&&f?u("gitSync.trigger.syncedToBranch")(f):u("gitSync.trigger.connectToBranch")})]})}function C(e){let{children:r,...i}=e;return(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",className:"h-7 w-7 rounded-md",...i,children:r})}var k=t,S=h;function N(e){let{children:t,className:n}=e;return(0,k.jsx)("div",{className:(0,S.cn)("flex w-full flex-row justify-between gap-3 px-4 pb-4 *:flex-1",n),children:t})}function E(e){let{children:t,className:n,key:r}=e;return(0,k.jsx)("div",{className:(0,S.cn)("flex w-full flex-col gap-4 overflow-hidden p-4",n),children:t},r)}function D(e){let{children:t,className:n}=e;return(0,k.jsx)("div",{className:(0,S.cn)("flex flex-col gap-2",n),children:t})}e.s(["InputRow",()=>D,"PopoverActions",()=>N,"PopoverContent",()=>E],978918)},674725,e=>{"use strict";function t(e){return window.btoa(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}e.s(["encodeBase64URL",()=>t])},758057,e=>{"use strict";var t=e.i(743124);let n=(e,t)=>({left:window.screenX+(window.outerWidth-e)/2,top:window.screenY+(window.outerHeight-t)/2});function r(e){let{url:r,width:i=600,height:o=700,title:a="Authentication",onClose:s,onMessage:l,onPoll:c}=e,[u,d]=(0,t.useState)(null),[p,h]=(0,t.useState)(!1),f=(0,t.useCallback)(()=>{if(u&&!u.closed)return void u.focus();let{left:e,top:t}=n(i,o),s=window.open(r,a,"width=".concat(i,",height=").concat(o,",left=").concat(e,",top=").concat(t,",resizable=yes,scrollbars=yes,status=yes"));s?(d(s),h(!0)):console.error("Failed to open popup. It might have been blocked by the browser.")},[r,a,i,o,u,n]),m=(0,t.useCallback)(()=>{u&&!u.closed&&u.close(),d(null),h(!1)},[u]);return(0,t.useEffect)(()=>{let e=e=>{var t;l&&l(e),(null==(t=e.data)?void 0:t.type)==="auth-complete"&&m()};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[m,l]),(0,t.useEffect)(()=>{if(!u)return;let e=setInterval(()=>{u.closed&&(clearInterval(e),h(!1),d(null),s&&s())},500);return()=>{clearInterval(e)}},[u,s]),(0,t.useEffect)(()=>{if(!u||!c)return;let e=setInterval(()=>{try{c(u)}catch(t){console.warn("Error accessing popup window location, may be cross-origin:",t),clearInterval(e)}},500);return()=>{clearInterval(e)}},[u,c]),{isOpen:p,open:f,close:m,popupWindow:u}}e.s(["usePopupWindow",()=>r])},796669,e=>{"use strict";var t=e.i(358847),n=(0,t.createServerReference)("7ca764cecbf4818b49ea8271bf2c573867f4e2071c",t.callServer,void 0,t.findSourceMapURL,"forkBlock");e.s(["forkBlock",()=>n])},315331,853464,290544,528054,85641,e=>{"use strict";async function t(e){let{blockId:t,skipDeploy:n,skippedDeployWarning:r,branch:i}=e;try{return fetch("/chat/api/git/push",{method:"POST",body:JSON.stringify({blockId:t,skipDeploy:n,skippedDeployWarning:r,branch:i,from:"manual-push"})})}catch(e){throw e}}e.s(["pushChanges",()=>t],315331);var n=e.i(358847),r=(0,n.createServerReference)("40a5fe6e99ea3bb0e044a52a9b53cc95d0382166cf",n.callServer,void 0,n.findSourceMapURL,"syncGitBranchToChat");e.s(["syncGitBranchToChat",()=>r],853464);var i=n,o=(0,i.createServerReference)("609f9037c329d39d6d13d9a0d05e04c8150c741a2b",i.callServer,void 0,i.findSourceMapURL,"updateGitAutoCommit");e.s(["updateGitAutoCommit",()=>o],290544);var a=n,s=(0,a.createServerReference)("60321e2526a8b0f3b04cdede274dac2ee542288c59",a.callServer,void 0,a.findSourceMapURL,"updateGitAutoPull");e.s(["updateGitAutoPull",()=>s],528054);var l=n,c=(0,l.createServerReference)("6050bf375bea2660f8162d1e7313a80d24283eb815",l.callServer,void 0,l.findSourceMapURL,"updateGitBranchConnection");e.s(["updateGitBranchConnection",()=>c],85641)},12052,917806,e=>{"use strict";e.i(643908);let t=e=>crypto.getRandomValues(new Uint8Array(e)),n=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a="";for(;;){let t=n(i),s=i;for(;s--;)if((a+=e[t[s]&r]||"").length===o)return a}}},r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return n(e,r,t)},i=new WeakMap,o=new WeakSet,a=new WeakMap;function s(e){let t="";for(let n=0;n<e.length;n++){let r=e.charCodeAt(n).toString(16);r.length<2&&(r="0"+r),t+=r}return BigInt("0x"+t).toString(36)}function l(e,t){return e?e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").substring(0,t).replace(/^-+|-+$/g,""):""}function c(e,t){let{disableLocalhost:n=!1,isPlatformAPI:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=s(e),o=l(t||"",54-i.length),a="";if(a=r?o?"demo-".concat(o,"-").concat(i):"demo-".concat(i):o?"preview-".concat(o,"-").concat(i):"preview-".concat(i),"generated.vusercontent.net".endsWith(".vercel.sh")){let e="generated.vusercontent.net".split(".")[0].replace(/^v0-frame-/g,"");return p("".concat(i,"--").concat(e,".dev-lite.vusercontent.net"))}return p("".concat(a,".vusercontent.net"))}function u(e,t){return c("vm:".concat(e,":").concat(t))}function d(e){let{disableLocalhost:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.replace(/_/g,"--").replace(/[^a-zA-Z0-9-]/g,"").replace(/-+$/,"");if("generated.vusercontent.net".endsWith(".vercel.sh")){let e="generated.vusercontent.net".split(".")[0].replace(/^v0-frame-/g,"");return p("".concat(e,"--").concat(n,".dev.vusercontent.net"))}return p("g-".concat(n,".vusercontent.net"))}function p(e){let t=new URL("https://example.com");return t.hostname=e,t.origin}function h(e,t){if(!e)return;let n=i.get(e);n?n.push(t):i.set(e,[t]),f(e)}function f(e){if(!o.has(e))return;let t=i.get(e);if(t){for(let r of t){var n;null==(n=e.contentWindow)||n.postMessage(r,e.dataset.origin||"")}t.length=0}}let m=[];function g(e,t){let n=a.get(e)||Math.random().toString();return a.set(e,n),m.push({id:n,listener:t}),()=>{let e=m.findIndex(e=>e.listener===t);e>=0&&m.splice(e,1)}}{let e=e=>{if(!(e.origin===d("any")||e.origin.endsWith(".vusercontent.net"))||!e.source)return;let t=Array.from(document.querySelectorAll("iframe[data-v0]")).find(t=>t instanceof HTMLIFrameElement&&t.contentWindow===e.source);if(!t)return;o.add(t),f(t),window.debug&&console.log("child event handler",e.data);let n=a.get(t);for(let t of m)n===t.id&&t.listener(e.data)};window.addEventListener("message",e)}e.s(["getIframeOrigin",()=>d,"getLiteIframeOrigin",()=>c,"getVMIframeOrigin",()=>u,"listenToIframe",()=>g,"sendData",()=>h],917806);var v=e.i(858269);function x(e){return e?"v0-".concat((0,v.default)(e)):""}r("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",24),e.s(["generateRepoName",()=>x],12052)},607391,e=>{"use strict";var t=e.i(509473),n=e.i(931289),r=e.i(675120),i=e.i(707827);function o(e){let{loading:o,isLoading:a,children:s,debounceChildren:l=!1,...c}=e,u=(0,n.useDebouncedValue)(s,200);return(0,t.jsx)(r.TransitionNode,{...r.PRESETS.buttonContent,...c,style:{width:"100%",...c.style},children:(0,t.jsx)("span",{className:"flex items-center gap-2",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Spinner,{size:16}),o]}):l?u:s})})}e.s(["ActionStatus",()=>o])},241489,132666,662429,957388,54149,409267,339682,e=>{"use strict";e.s(["SignInStage",()=>_],241489);var t=e.i(509473),n=e.i(176248),r=e.i(978918);e.s(["useAsyncGitSyncActions",()=>D],132666);var i=e.i(743124),o=e.i(979865);e.i(563948);var a=e.i(407562),s=e.i(674725),l=e.i(758057),c=e.i(144019),u=e.i(449381);e.i(472428);var d=e.i(152641);e.i(904347);var p=e.i(37737),h=e.i(407705),f=e.i(639056),m=e.i(796669),g=e.i(315331),v=e.i(853464),x=e.i(92479),y=e.i(53223),b=e.i(290544),w=e.i(528054),j=e.i(85641),C=e.i(297239),k=e.i(209819);e.i(541536);var S=e.i(23474),N=e.i(183673),E=e.i(12052);function D(e){let{chatId:t,projectId:n}=e,r=(0,C.useT)(),D=(0,o.useRouter)(),{project:I}=(0,k.useChatMetadata)(),A=(0,E.generateRepoName)(null==I?void 0:I.name),T=(0,h.getGitSyncAtoms)(t,n,{defaultRepoName:A}),M=(0,h.getGitSyncActions)(t,{defaultRepoName:A}),L=(0,f.useAtomValue)(T.stage),P=(0,f.useAtomValue)(T.asyncActionLoading),R=(0,f.useAtomValue)(T.currentBranch),_=(0,f.useAtomValue)(T.createRepoName),O=(0,f.useAtomValue)(T.createBranchName),F=(0,f.useAtomValue)(T.switchBranchTarget),B=(0,f.useAtomValue)(T.isNewBranchNameValid),V=(0,f.useAtomValue)(T.isConnectedToGit),z=(0,f.useAtomValue)(T.selectedGitNamespaceName),{git:H}=(0,f.useAtomValue)(T.externalChatMeta),{verifiedGitHubUser:U}=(0,f.useAtomValue)(T.gitNamespaces),{refetchVercelProject:G}=(0,N.useVercelProject)({v0ProjectId:n}),W=(0,u.useActiveBlockState)(),q=(0,c.useAutoCreateProject)({chatId:t,activeBlock:W}),{activeForkKey:Z}=(0,x.useChatMessages)(),{revalidate:K,mutate:$}=(0,d.useServerQuerySWR)(["chat","externalMeta"],{chatId:t},{stopFetch:!0}),{revalidate:Y}=(0,d.useServerQuerySWR)(["scoped","gitNamespaces"],{},{stopFetch:!0}),{revalidate:J}=(0,d.useServerQuerySWR)(["project","latestGit"],{projectId:n},{stopFetch:!0}),Q="/chat/git/connected",X=window.location.origin+"/chat/git/callback",ee="https://vercel.com/api/registration/login-with-github?next=".concat(encodeURIComponent(X)),et={next:window.location.origin+"/github/installed"},en=(0,s.encodeBase64URL)(JSON.stringify(et)),er=U?"https://github.com/apps/vercel/installations/select_target?state=".concat(encodeURIComponent(en)):"",ei=(0,i.useCallback)(async e=>{await Promise.all([Y(),J(),K()]),null==e||e()},[Y,J,K]),{open:eo}=(0,l.usePopupWindow)({url:ee,onPoll:e=>{e.location.pathname===Q&&ei(()=>{e.close(),M.setAsyncActionLoading(null)})},onClose:()=>{M.setAsyncActionLoading(null),Y()}}),{open:ea}=(0,l.usePopupWindow)({url:er,onPoll:e=>{e.location.pathname===Q&&ei(()=>{e.close(),M.setAsyncActionLoading(null)})},onClose:()=>{M.setAsyncActionLoading(null),Y()}}),es=(0,i.useCallback)(()=>{if("sign-in"===P)return void a.toast.error(r("gitSync.toast.signInInProgress"));M.setAsyncActionLoading("sign-in"),eo()},[eo,M,P,r]),el=(0,i.useCallback)(()=>{if("install-app"===P)return void a.toast.error(r("gitSync.toast.appInstallationInProgress"));M.setAsyncActionLoading("install-app"),ea()},[ea,M,P,r]),ec=(0,i.useCallback)(async()=>{let e=null!=_?_:(0,E.generateRepoName)(null==I?void 0:I.name);try{if(!(null==I?void 0:I.vercelProjectId)){let e=await q();if(!e.ok){e.error&&a.toast.error(e.error);return}}if(!(null==W?void 0:W.id))return void a.toast.error(r("gitSync.createRepo.needBlockToCreateRepo"));if(!e)return void a.toast.error(r("gitSync.createRepo.enterRepoName"));if(!z)return void a.toast.error(r("gitSync.createRepo.selectGitScopeError"));let i=await fetch("/chat/api/git/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({owner:z,repoName:e,projectId:n,blockId:W.id,chatId:t,from:"popover"})});if(!i.ok){let e=await i.json();if("repo_alr_exists"===e.error)return void M.setCreateRepoNameError(r("gitSync.createRepo.repoAlreadyExists"));if(409===i.status&&"REPO_ALREADY_CONNECTED"===e.error){let{existingRepo:t}=e;await ei(),a.toast.default(r("gitSync.createRepo.gitHubConnected"),{description:"".concat(t.org,"/").concat(t.repo),action:t.remoteURL?{children:r("gitSync.createRepo.view"),onClick:()=>{window.open(t.remoteURL,"_blank")}}:void 0});return}G(),D.refresh();let t=r("gitSync.createRepo.failedToCreateRepo");throw Error(t)}let{remoteURL:o}=S.z.object({remoteURL:S.z.string().nullable().optional()}).parse(await i.json());await ei();let s=null!=o?o:z&&_?"https://github.com/".concat(z,"/").concat(_):void 0;a.toast.default(r("gitSync.createRepo.gitHubConnected"),{description:r("gitSync.createRepo.clickToViewRepo"),action:s?{children:r("gitSync.createRepo.view"),onClick:()=>{window.open(s,"_blank")}}:void 0})}catch(t){let e=t instanceof Error?t.message:r("gitSync.createRepo.failedToCreateRepo");a.toast.error(e)}finally{M.setAsyncActionLoading(null)}},[n,null==I?void 0:I.vercelProjectId,null==I?void 0:I.name,null==W?void 0:W.id,_,z,t,ei,r,q,G,D,M]),eu=(0,i.useCallback)(async e=>{let i=null==W?void 0:W.id;if(!i)return void a.toast.error(r("gitSync.toast.noBlockSelected"));(0,y.track)("GitSyncPushToBranch",{chatId:t,projectId:n,blockId:i,branch:e});try{await $({serverMutate:(async()=>{await (0,g.pushChanges)({blockId:i,skipDeploy:!0,branch:e})})(),optimisticData:{git:{...H,ref:e,gitConnected:!0}}}),await ei(),"create-branch"===L&&(M.setStageIntent(null),M.updateCreateBranchName(null))}catch(i){let e=i instanceof Error?i.message:r("gitSync.toast.failedToPushChanges");a.toast.error(e),(0,y.track)("GitSyncError",{chatId:t,projectId:n,action:"push-to-branch",error:e})}},[null==W?void 0:W.id,$,H,ei,L,M,t,n,r]),ed=(0,i.useCallback)(async()=>{if(!O)return void M.setCreateBranchNameError(r("gitSync.createBranch.enterBranchName"));if(!B)return void M.setCreateBranchNameError(r("gitSync.createBranch.invalidBranchName"));(0,y.track)("GitSyncCreateBranch",{chatId:t,projectId:n,blockId:null==W?void 0:W.id,branchName:O});try{if(null==W?void 0:W.id){M.setCreateBranchNameError(null);let e=await (0,m.forkBlock)(W.id);"string"==typeof e&&(M.setIsOpen(!1),M.setStageIntent(null),a.toast.success(r("gitSync.toast.forkedChatCreatingBranch")(O)),D.push("/chat/".concat(e,"?assignBranch=").concat(encodeURIComponent(O))),M.updateCreateBranchName(null))}else throw Error(r("gitSync.toast.noBlockSelected"))}catch(i){let e=i instanceof Error?i.message:r("gitSync.toast.failedToCreateBranch");M.setCreateBranchNameError(e),a.toast.error(e),(0,y.track)("GitSyncError",{chatId:t,projectId:n,action:"create-branch",error:e})}},[O,B,t,n,null==W?void 0:W.id,M,r,D]),ep=(0,i.useCallback)(async()=>{try{if(!F)return void a.toast.error(r("gitSync.toast.noBranchSelected"));(0,y.track)("GitSyncSwitchBranch",{chatId:t,projectId:n,fromBranch:R,toBranch:F}),M.resetStageOnDelay(),await $({serverMutate:(async()=>{await (0,v.syncGitBranchToChat)({chatId:t,forkKey:Z,branch:F})})(),optimisticData:{git:{...H,ref:F,gitConnected:!0}}}),await Promise.all([Y(),J()])}catch(i){M.setStageIntent("switch-branch-confirmation");let e=i instanceof Error?i.message:r("gitSync.toast.failedToSwitchBranch");a.toast.error(e),(0,y.track)("GitSyncError",{chatId:t,projectId:n,action:"switch-branch",error:e})}},[F,t,n,R,M,$,H,Y,J,Z,r]),eh=(0,i.useCallback)(async e=>{(0,y.track)("GitSyncSelectBranch",{chatId:t,projectId:n,branch:e});try{await (0,v.syncGitBranchToChat)({chatId:t,forkKey:Z,branch:e}),await ei()}catch(i){let e=i instanceof Error?i.message:r("gitSync.toast.failedToSyncToBranch");a.toast.error(e),(0,y.track)("GitSyncError",{chatId:t,projectId:n,action:"select-branch",error:e})}},[t,Z,ei,n,r]),ef=(0,i.useCallback)(async e=>{try{(0,y.track)("GitSyncToggleAutoCommit",{chatId:t,projectId:n,blockId:null==W?void 0:W.id,enabled:e}),await $({serverMutate:(async()=>{await (0,b.updateGitAutoCommit)(t,e)})(),optimisticData:{git:{...H,autoCommit:e}}}),M.setIsAutoSyncEnabled(e),await ei(),a.toast.success(e?r("gitSync.toast.autoCommitEnabled"):r("gitSync.toast.autoCommitDisabled"))}catch(i){let e=i instanceof Error?i.message:r("gitSync.toast.failedToToggleAutoCommit");a.toast.error(e),(0,y.track)("GitSyncError",{chatId:t,projectId:n,action:"toggle-auto-commit",error:e})}},[t,n,null==W?void 0:W.id,$,H,M,ei,r]),em=(0,i.useCallback)(async e=>{try{(0,y.track)("GitSyncToggleAutoPull",{chatId:t,projectId:n,blockId:null==W?void 0:W.id,enabled:e}),await $({serverMutate:(async()=>{await (0,w.updateGitAutoPull)(t,e)})(),optimisticData:{git:{...H,autoPull:e}}}),M.setIsAutoSyncEnabled(e),await ei(),a.toast.success(e?r("gitSync.toast.autoPullEnabled"):r("gitSync.toast.autoPullDisabled"))}catch(i){let e=i instanceof Error?i.message:r("gitSync.toast.failedToToggleAutoPull");a.toast.error(e),(0,y.track)("GitSyncError",{chatId:t,projectId:n,action:"toggle-auto-pull",error:e})}},[t,n,null==W?void 0:W.id,$,H,M,ei,r]),eg=(0,i.useCallback)(async e=>{try{(0,y.track)("GitSyncUnlinkBranch",{chatId:t,projectId:n,branch:R}),await $({serverMutate:(async()=>{await (0,j.updateGitBranchConnection)(t,e)})(),optimisticData:{git:{...H,gitConnected:e}}}),M.setIsOpen(!1),await ei(),a.toast.success(r("gitSync.toast.branchUnlinked"))}catch(i){let e=i instanceof Error?i.message:r("gitSync.toast.failedToUnlinkBranch");a.toast.error(e),(0,y.track)("GitSyncError",{chatId:t,projectId:n,action:"unlink-branch",error:e})}},[t,n,R,$,H,M,ei,r]),ev=(0,i.useCallback)(()=>{M.setIsOpen(!1),(0,p.openDialog)({type:"feedback",data:{feedback:r("gitSync.feedback.troubleWithGitSync")(t),sentiment:"bad"}})},[M,t,r]);function ex(e,t){return async function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];if(e===P)return(0,a.throttleById)("git-async-action-".concat(e),1e4,()=>a.toast.error(r("gitSync.toast.gitOperationInProgress")));M.setAsyncActionLoading(e);try{return await t(...i)}finally{M.setAsyncActionLoading(null)}}}return{handleRetry:(0,i.useCallback)(()=>{D.refresh()},[D]),handleReport:ev,handleSignInToGitHub:es,handleConnectAppGitHub:el,handleSyncToBranch:ex("syncing-to-branch",eh),handleSwitchBranch:ex("switching-branch",ep),handleCreateRepo:ex("create-repo",ec),handleCreateBranch:ex("creating-branch",ed),handlePushToBranch:ex("pushing-to-branch",eu),handleToggleAutoCommit:ex("toggle-auto-commit",ef),handleToggleAutoPull:ex("toggle-auto-pull",em),handleUpdateBranchConnection:ex("updating-branch-connection",eg),isConnectedToGit:V}}var I=h,A=f,T=e.i(607391),M=t,L=e.i(304649);function P(e){let{title:t,children:n,titleSuffix:r,className:i}=e;return(0,M.jsxs)("div",{className:(0,L.cn)("flex flex-col gap-1.5",i),children:[(0,M.jsxs)("span",{className:"text-label-14 flex items-center justify-between gap-2 font-medium",children:[t,r]}),(0,M.jsx)("span",{className:"text-label-14 text-v0-gray-900",children:n})]})}e.s(["PopoverHeading",()=>P],662429);var R=C;function _(e){let{chatId:i,projectId:o}=e,a=(0,R.useT)(),s=(0,I.getGitSyncAtoms)(i,o),l=(0,A.useAtomValue)(s.asyncActionLoading),{handleSignInToGitHub:c}=D({chatId:i,projectId:o}),u="sign-in"===l;function d(e){e.preventDefault(),c()}return(0,t.jsxs)("form",{id:"sign-in-form",onSubmit:d,children:[(0,t.jsx)(r.PopoverContent,{children:(0,t.jsx)(P,{title:a("gitSync.signIn.title"),children:a("gitSync.signIn.description")})}),(0,t.jsx)(r.PopoverActions,{children:(0,t.jsx)(n.Button,{size:"sm",type:"submit",disabled:u,children:(0,t.jsx)(T.ActionStatus,{isLoading:u,loading:a("gitSync.signIn.signingIn"),children:a("gitSync.signIn.signInButton")})})})]})}e.s(["InstallAppStage",()=>G],957388);var O=t,F=n,B=r,V=h,z=f,H=T,U=C;function G(e){let{chatId:t,projectId:n}=e,r=(0,U.useT)(),i=(0,V.getGitSyncAtoms)(t,n),o=(0,z.useAtomValue)(i.asyncActionLoading),{handleConnectAppGitHub:a}=D({chatId:t,projectId:n}),s="install-app"===o;function l(e){e.preventDefault(),a()}return(0,O.jsxs)("form",{id:"install-app-form",onSubmit:l,children:[(0,O.jsx)(B.PopoverContent,{children:(0,O.jsx)(P,{title:r("gitSync.installApp.title"),children:r("gitSync.installApp.description")})}),(0,O.jsx)(B.PopoverActions,{children:(0,O.jsx)(F.Button,{size:"sm",type:"submit",disabled:s,children:(0,O.jsx)(H.ActionStatus,{isLoading:s,loading:r("gitSync.installApp.installingApp"),children:r("gitSync.installApp.installVercelApp")})})})]})}e.s(["CreateRepoStage",()=>eu],54149);var W=t,q=n,Z=e.i(763480),K=e.i(707974),$=r,Y=h,J=f,Q=T,X=e.i(909270),ee=e.i(592258),et=e.i(221871),en=e.i(799912),er=e.i(230125),ei=C,eo=e.i(32170),ea=e.i(667660),es=e.i(538553),el=k,ec=E;function eu(e){var t;let{chatId:n,projectId:r}=e,i=(0,ei.useT)(),{user:o}=(0,eo.useUser)(),{activeScope:a,hasVercelWritePermission:s}=(0,ea.useActiveScope)(),{project:l}=(0,el.useChatMetadata)(n),c=(0,ec.generateRepoName)(null==l?void 0:l.name),u=(0,Y.getGitSyncAtoms)(n,r,{defaultRepoName:c}),d=(0,Y.getGitSyncActions)(n,{defaultRepoName:c}),p=(0,J.useAtomValue)(u.asyncActionLoading),h=(0,J.useAtomValue)(u.createRepoNameError),f=(0,J.useAtomValue)(u.selectedGitNamespaceName),m=(0,J.useAtomValue)(u.disableAsyncAction),{handleCreateRepo:g,handleConnectAppGitHub:v}=D({chatId:n,projectId:r}),{userNamespace:x,orgNamespaces:y}=(0,J.useAtomValue)(u.gitNamespaces),b="create-repo"===p,w=null==y?void 0:y.some(e=>e.slug===f),j=(null==o?void 0:o.scopeVercelPlan)==="hobby",C=w&&j,k=(0,J.useAtomValue)(u.createRepoName)||c,S=e=>{d.setCreateRepoName(e.target.value)},N=e=>{d.setSelectedGitNamespaceName(e)};function E(e){e.preventDefault(),s&&g()}let I=(0,W.jsx)(X.default,{href:"https://docs.github.com/en/repositories/creating-and-managing-repositories/about-repositories",className:"text-v0-blue-700 hover:underline",target:"_blank",children:i("gitSync.createRepo.privateRepository")});return(0,W.jsxs)("form",{id:"create-repo-form",onSubmit:E,children:[(0,W.jsxs)($.PopoverContent,{children:[(0,W.jsx)(P,{title:i("gitSync.createRepo.title"),children:i("gitSync.createRepo.description")(I)}),(0,W.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,W.jsxs)($.InputRow,{children:[(0,W.jsx)(K.Label,{children:i("gitSync.createRepo.gitScope")}),(0,W.jsxs)(ee.Select,{value:null!=f?f:"",disabled:b||!s,onValueChange:e=>N(e),children:[(0,W.jsx)(es.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,W.jsx)(ee.SelectTrigger,{className:"h-8 transition-colors hover:bg-v0-gray-100 px-2",children:(0,W.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,W.jsx)(et.LogoGithub,{}),null!=f?f:i("gitSync.createRepo.selectGitScope")]})})}),(0,W.jsxs)(ee.SelectContent,{children:[x&&(0,W.jsx)(ee.SelectItem,{value:x.slug,iconOnRight:!0,className:"pl-2",children:(0,W.jsxs)("div",{className:"flex items-center gap-2",children:[(0,W.jsx)(et.LogoGithub,{className:"h-4 w-4"}),x.name]})}),null==y?void 0:y.map(e=>{let t=e.name||e.slug;return(0,W.jsx)(ee.SelectItem,{value:e.slug,iconOnRight:!0,className:"pl-2",children:(0,W.jsxs)("div",{className:"flex items-center gap-2",children:[(0,W.jsx)(et.LogoGithub,{className:"h-4 w-4"}),t]})},e.id)}),(0,W.jsx)(ee.SelectSeparator,{}),(0,W.jsx)("div",{className:"relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-hidden hover:bg-v0-gray-100 hover:text-accent-foreground",onClick:()=>{v()},children:(0,W.jsxs)("div",{className:"flex items-center gap-2",children:[(0,W.jsx)(en.Plus,{size:14}),"Add GitHub Account"]})})]})]})]}),!C&&(0,W.jsxs)($.InputRow,{children:[(0,W.jsx)(K.Label,{htmlFor:"create-repo-name",children:i("gitSync.createRepo.repositoryName")}),(0,W.jsx)(es.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,W.jsx)(Z.Input,{id:"create-repo-name",size:"sm",className:"rounded-md",placeholder:i("gitSync.createRepo.repoPlaceholder"),defaultValue:k,onChange:S,disabled:b||!s,error:h})})]}),C&&(0,W.jsxs)("div",{className:"flex flex-row gap-3 items-center justify-center bg-v0-amber-200 rounded-md p-2 text-v0-amber-900",children:[(0,W.jsx)(er.Warning,{size:16,className:"shrink-0"}),(0,W.jsx)("div",{className:"flex flex-col gap-1.5",children:(0,W.jsxs)("span",{className:"text-label-14",children:["Connecting to a private GitHub Organization requires a"," ",(0,W.jsx)("a",{href:"https://vercel.com/docs/plans/pro",className:"underline",children:"Vercel Pro plan"}),". Switch to a different team, or upgrade"," ",(0,W.jsx)("span",{className:"font-medium",children:null!=(t=null==a?void 0:a.name)?t:"your current team"})," ","to a Vercel Pro plan to continue."]})})]})]})]}),!C&&(0,W.jsx)($.PopoverActions,{children:(0,W.jsx)(es.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,W.jsx)(q.Button,{size:"sm",type:"submit",form:"create-repo-form",disabled:b||!k||m||!s||!f,children:(0,W.jsx)(Q.ActionStatus,{isLoading:b,loading:i("gitSync.createRepo.creatingRepository"),children:i("gitSync.createRepo.createRepositoryButton")})})})})]})}e.s(["CreateBranchStage",()=>eX],339682);var ed=t,ep=f,eh=n,ef=r,em=h,eg=Z,ev=T,ex=i;e.s(["BranchSettingsButton",()=>e$,"CancelIntentButton",()=>eY,"CreateBranchButton",()=>eK,"LinkOutToRepoButton",()=>eW,"PullChangesButton",()=>eZ,"PushChangesButton",()=>eq],409267);var ey=t,eb=h;e.i(675120);var ew=n,ej=e.i(762585),eC=e.i(936096);let ek=(0,eC.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.74999 1.75V1H7.24999V1.75V12.4393L3.28032 8.46967L2.74999 7.93934L1.68933 9L2.21966 9.53033L7.29288 14.6036C7.68341 14.9941 8.31657 14.9941 8.7071 14.6036L13.7803 9.53033L14.3107 9L13.25 7.93934L12.7197 8.46967L8.74999 12.4393V1.75Z" fill="currentColor"/>');var eS=e.i(641913);let eN=(0,eC.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M10 0a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h.854a5.25 5.25 0 0 1-3.969 3.175 3.006 3.006 0 0 0-2.135-2.08V1h-1.5V9.095a3.001 3.001 0 1 0 3.671 3.592A6.75 6.75 0 0 0 12.447 8H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2h-4Zm.25 3.375h-.625v1.25h1.75v1.75h1.25v-1.75h1.75v-1.25h-1.75v-1.75h-1.25v1.75H10.25ZM5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" clip-rule="evenodd"/>');e.i(543017),e.i(480814);var eE=e.i(242084);let eD=(0,eC.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4 5.5C3.17157 5.5 2.5 4.82843 2.5 4C2.5 3.17157 3.17157 2.5 4 2.5C4.82843 2.5 5.5 3.17157 5.5 4C5.5 4.82843 4.82843 5.5 4 5.5ZM4.75 6.90549C6.04392 6.57245 7 5.39788 7 4C7 2.34315 5.65685 1 4 1C2.34315 1 1 2.34315 1 4C1 5.39788 1.95608 6.57245 3.25 6.90549V14.25V15H4.75V14.25V6.90549ZM9.5 3.25H8.75V4.75H9.5H11C11.1381 4.75 11.25 4.86193 11.25 5V9.09451C9.95608 9.42754 9 10.6021 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.6021 14.0439 9.42754 12.75 9.09451V5C12.75 4.0335 11.9665 3.25 11 3.25H9.5ZM10.5 12C10.5 12.8284 11.1716 13.5 12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12Z" fill="currentColor"/>');var eI=en,eA=e.i(270370);let eT=(0,eC.withNewIcon)('<path clip-rule="evenodd" d="M4.25 0C3.00736 0 2 1.00736 2 2.25V11V11.25V11.5C2 12.5252 2.61705 13.4062 3.5 13.792V11.5V11.25V11C3.5 10.4477 3.94772 10 4.5 10H12.5V11.2305V12.5H10.5V14H12.5H14V12.5V11.2305V10V8.5V0.75V0H13.25H4.25ZM12.5 8.5V1.5H4.25C3.83579 1.5 3.5 1.83579 3.5 2.25V8.70802C3.80623 8.57422 4.14445 8.5 4.5 8.5H12.5ZM5.5 11.5C5.22386 11.5 5 11.7239 5 12V16L7 14.75L9 16V12C9 11.7239 8.77614 11.5 8.5 11.5H5.5Z" fill="currentColor" fill-rule="evenodd" />');var eM=f,eL=i,eP=X,eR=y,e_=e.i(966848),eO=e.i(556355),eF=e.i(435433),eB=e.i(707827),eV=i;function ez(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{delay:t=200,disabled:n=!1}=e,[r,i]=(0,eV.useState)(n?0:-1),o=(0,eV.useRef)(null),a=()=>{o.current&&(clearTimeout(o.current),o.current=null)};return(0,eV.useEffect)(()=>(a(),o.current=setTimeout(()=>i(0),t),a),[]),{tabIndex:r}}var eH=T,eU=C,eG=e.i(996174);function eW(e){let{projectId:t,chatId:n}=e,r=(0,eb.getGitSyncAtoms)(n,t),i=(0,eM.useAtomValue)(r.currentBranch),{git:o}=(0,eM.useAtomValue)(r.externalChatMeta),a=()=>{(null==o?void 0:o.ownerName)&&o.repoName&&(0,eR.track)("GitSyncViewRepository",{chatId:n,repoName:o.repoName,ownerName:o.ownerName,branch:i||"main"})};return o?(0,ey.jsx)(ew.Button,{size:"sm",variant:"secondary",asChild:!0,type:"button",children:(0,ey.jsxs)(eP.default,{href:"https://github.com/".concat(o.ownerName,"/").concat(o.repoName).concat(i&&"main"!==i?"/tree/".concat(i):""),className:"group justify-start font-normal",target:"_blank",onClick:a,children:[(0,ey.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,ey.jsx)(eT,{}),(0,ey.jsx)("span",{className:"truncate",children:"".concat(o.ownerName,"/").concat(o.repoName)})]}),(0,ey.jsx)(eE.External,{className:"min-w-[16px] opacity-0 transition-opacity group-focus-within:opacity-100 group-hover:opacity-100 group-focus:opacity-100"})]})}):(0,ey.jsx)(ej.Skeleton,{className:"h-4 w-full"})}function eq(e){let{chatId:t,projectId:n}=e,r=(0,eU.useT)(),i=(0,eb.getGitSyncAtoms)(t,n),o=(0,eM.useAtomValue)(i.currentBranch),{handlePushToBranch:a}=D({chatId:t,projectId:n}),s=(0,eM.useAtomValue)(i.asyncActionLoading),l="pushing-to-branch"===s,c=()=>{o&&a(o)};return(0,ey.jsx)(ew.Button,{size:"sm",variant:"secondary",disabled:!!(l||s),className:"flex-1",onClick:c,children:(0,ey.jsx)(eH.ActionStatus,{isLoading:l,loading:r("gitSync.actions.pushing"),children:r("gitSync.actions.pushChanges")})})}function eZ(e){let{chatId:t,projectId:n}=e,r=(0,eU.useT)(),i=(0,eb.getGitSyncAtoms)(t,n),o=(0,eM.useAtomValue)(i.currentBranch),{handleSyncToBranch:a}=D({chatId:t,projectId:n}),s=(0,eM.useAtomValue)(i.asyncActionLoading),l=(0,eM.useAtomValue)(i.isRefreshingGitHead),c=(0,eM.useAtomValue)(i.upstreamSha),u="syncing-to-branch"===s,d=!!(u||s||l||!c),p=()=>{o&&a(o)};return(0,ey.jsx)(ew.Button,{size:"sm",variant:"secondary",disabled:d,className:"flex-1",onClick:p,children:(0,ey.jsx)(eH.ActionStatus,{isLoading:u,loading:r("gitSync.actions.pulling"),children:r("gitSync.actions.pullChanges")})})}function eK(e){let{chatId:t,projectId:n,label:r,branchIcon:i,delayFocus:o,variant:a="secondary",className:s}=e,l=(0,eU.useT)(),c=(0,eb.getGitSyncAtoms)(t,n),u=(0,eb.getGitSyncActions)(t),d=(0,eM.useAtomValue)(c.asyncActionLoading),{tabIndex:p}=ez({disabled:!o}),h=(0,eb.isInState)(d,["creating-branch","syncing-to-branch","pushing-to-branch","switching-branch"]);return(0,ey.jsx)(ew.Button,{size:"sm",tooltip:r?void 0:l("gitSync.actions.createNewBranch"),variant:a,disabled:h,type:"button",className:s,tabIndex:p,onClick:()=>u.setStageIntent("create-branch"),children:r?(0,ey.jsxs)(ey.Fragment,{children:[(0,ey.jsx)(eA.PlusCircle,{}),r]}):i?(0,ey.jsx)(eN,{}):(0,ey.jsx)(eI.Plus,{})})}function e$(e){let{chatId:t,projectId:n,variant:r="secondary",delayFocus:i=!1}=e,o=(0,eU.useT)(),a=(0,eb.getGitSyncAtoms)(t,n),{git:s}=(0,eM.useAtomValue)(a.externalChatMeta),l=(0,eM.useAtomValue)(a.asyncActionLoading),c=(0,eM.useAtomValue)(a.disableAsyncAction),u=(0,eM.useAtomValue)(a.currentBranch),{tabIndex:d}=ez({disabled:!i}),p=!!(l||c),[h,f]=(0,eL.useState)(!1),m=null==s?void 0:s.gitAutoCommitPush,g=null==s?void 0:s.gitAutoPull,v=!(null==s?void 0:s.gitConnected),{handleUpdateBranchConnection:x,handleToggleAutoCommit:y,handleToggleAutoPull:b}=D({chatId:t,projectId:n}),w=e=>{e.preventDefault(),s&&y(!m).finally(()=>{f(!1)})},j=e=>{e.preventDefault(),s&&b(!g).finally(()=>{f(!1)})},C=e=>{e.preventDefault(),x(!1).finally(()=>{f(!1)})};return(0,ey.jsxs)(eO.DropdownMenu,{open:h,onOpenChange:f,children:[(0,ey.jsx)(eO.DropdownMenuTrigger,{asChild:!0,children:(0,ey.jsx)(ew.Button,{size:"sm",variant:r,type:"button",tooltipDirection:"bottom",tooltip:o("gitSync.actions.branchOptions"),tabIndex:d,children:(0,ey.jsx)(eJ,{})})}),(0,ey.jsx)(eO.DropdownMenuContent,{align:"end",className:"w-[200px] *:cursor-pointer",side:"bottom",sideOffset:8,children:(0,ey.jsxs)(e_.MenuGroup,{children:[(0,ey.jsx)(eG.Tooltip,{content:(null==s?void 0:s.onProductionBranch)?o("gitSync.actions.autoPullDisabledTooltip"):void 0,children:(0,ey.jsx)("div",{children:(0,ey.jsx)(e_.MenuItem,{onSelect:j,disabled:(null==s?void 0:s.onProductionBranch)||p,children:(null==s?void 0:s.onProductionBranch)?(0,ey.jsx)(e_.MenuItemContent,{label:o("gitSync.actions.autoPullDisabled"),Icon:(0,ey.jsx)(ek,{})}):(0,ey.jsx)(e_.MenuItemContent,{label:o("toggle-auto-pull"===l?"gitSync.actions.updatingAutoPull":(null==s?void 0:s.gitAutoPull)?"gitSync.actions.disableAutoPull":"gitSync.actions.enableAutoPull"),Icon:"toggle-auto-pull"===l?(0,ey.jsx)(eB.Spinner,{size:16}):(0,ey.jsx)(ek,{})})})})}),(0,ey.jsx)(eG.Tooltip,{content:(null==s?void 0:s.onProductionBranch)?o("gitSync.actions.autoCommitDisabledTooltip"):void 0,children:(0,ey.jsx)("div",{children:(0,ey.jsx)(e_.MenuItem,{onSelect:w,disabled:(null==s?void 0:s.onProductionBranch)||p,children:(null==s?void 0:s.onProductionBranch)?(0,ey.jsx)(e_.MenuItemContent,{label:o("gitSync.actions.autoCommitDisabled"),Icon:(0,ey.jsx)(eS.ArrowUp,{})}):(0,ey.jsx)(e_.MenuItemContent,{label:o("toggle-auto-commit"===l?"gitSync.actions.updatingAutoCommit":(null==s?void 0:s.gitAutoCommitPush)?"gitSync.actions.disableAutoCommit":"gitSync.actions.enableAutoCommit"),Icon:"toggle-auto-commit"===l?(0,ey.jsx)(eB.Spinner,{size:16}):(0,ey.jsx)(eS.ArrowUp,{})})})})}),(0,ey.jsx)(e_.MenuItem,{disabled:v||!u||p,onSelect:C,children:(0,ey.jsx)(e_.MenuItemContent,{label:o("updating-branch-connection"===l?"gitSync.actions.unlinkingBranch":"gitSync.actions.unlinkBranch"),Icon:"updating-branch-connection"===l?(0,ey.jsx)(eB.Spinner,{size:16}):(0,ey.jsx)(eF.Unlink,{})})}),s&&!s.onProductionBranch?(0,ey.jsx)(e_.MenuItem,{onSelect:()=>window.open("https://github.com/".concat(s.ownerName,"/").concat(s.repoName,"/pull/new/").concat(u),"_blank"),children:(0,ey.jsx)(e_.MenuItemContent,{label:o("gitSync.actions.createPullRequest"),Icon:(0,ey.jsx)(eD,{})})}):null]})})]})}function eY(e){let{chatId:t,disabled:n,children:r}=e,i=(0,eU.useT)(),o=(0,eb.getGitSyncActions)(t);return(0,ey.jsx)(ew.Button,{size:"sm",variant:"secondary",type:"button",onClick:()=>o.setStageIntent(null),disabled:n,children:null!=r?r:i("gitSync.cancel")})}let eJ=(0,e.i(751660).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M10.75 5.25C11.5784 5.25 12.25 4.57843 12.25 3.75C12.25 2.92157 11.5784 2.25 10.75 2.25C9.92157 2.25 9.25 2.92157 9.25 3.75C9.25 4.57843 9.92157 5.25 10.75 5.25ZM10.75 6.75C12.1479 6.75 13.3225 5.79392 13.6555 4.5H15.25H16V3H15.25H13.6555C13.3225 1.70608 12.1479 0.75 10.75 0.75C9.35212 0.75 8.17754 1.70608 7.84451 3H0.75H0V4.5H0.75H7.84451C8.17754 5.79392 9.35212 6.75 10.75 6.75ZM15.25 13H16V11.5H15.25L8.15549 11.5C7.82245 10.2061 6.64788 9.25 5.25 9.25C3.85212 9.25 2.67755 10.2061 2.34451 11.5H0.75H0V13H0.75H2.34451C2.67755 14.2939 3.85212 15.25 5.25 15.25C6.64788 15.25 7.82246 14.2939 8.15549 13L15.25 13ZM3.75 12.25C3.75 11.4216 4.42157 10.75 5.25 10.75C6.07843 10.75 6.75 11.4216 6.75 12.25C6.75 13.0784 6.07843 13.75 5.25 13.75C4.42157 13.75 3.75 13.0784 3.75 12.25Z" fill="currentColor"/>');var eQ=C;function eX(e){let{chatId:t,projectId:n}=e,r=(0,eQ.useT)(),i=(0,em.getGitSyncAtoms)(t,n),o=(0,em.getGitSyncActions)(t),a=(0,ep.useAtomValue)(i.currentBranch),s=(0,ep.useAtomValue)(i.createBranchName),l=(0,ep.useAtomValue)(i.createBranchNameError),c=(0,ep.useAtomValue)(i.asyncActionLoading),u=(0,ep.useAtomValue)(i.disableAsyncAction),{handleCreateBranch:d,handlePushToBranch:p}=D({chatId:t,projectId:n}),h="creating-branch"===c||"pushing-to-branch"===c,f=(0,ep.useAtomValue)(i.isAbleToCreateBranch),m=(0,ex.useRef)(null);function g(e){e.preventDefault(),a?d():s?p(s):o.setCreateBranchNameError(r("gitSync.createBranch.enterBranchName"))}(0,ex.useEffect)(()=>{m.current&&m.current.focus()},[]);let v=(0,ex.useMemo)(()=>a?r("gitSync.createBranch.forkDescription"):r("gitSync.createBranch.createDescription"),[r]);return(0,ed.jsxs)("form",{id:"create-branch-form",onSubmit:g,children:[(0,ed.jsxs)(ef.PopoverContent,{children:[(0,ed.jsx)(P,{title:r("gitSync.createBranch.title"),children:v}),(0,ed.jsx)(eg.Input,{value:s||"",onChange:e=>o.updateCreateBranchName(e.target.value),placeholder:r("gitSync.createBranch.placeholder"),size:"sm",disabled:h,error:l,ref:m})]}),(0,ed.jsxs)(ef.PopoverActions,{children:[(0,ed.jsx)(eY,{chatId:t,disabled:h}),(0,ed.jsx)(eh.Button,{type:"submit",size:"sm",disabled:!f||h||u,children:(0,ed.jsx)(ev.ActionStatus,{isLoading:h,loading:r("gitSync.createBranch.creatingBranch"),children:r("gitSync.createBranch.createBranchButton")})})]})]})}},548866,e=>{"use strict";var t=e.i(509473);function n(e){let{title:n,children:i,icon:o,variant:a="default"}=e;return(0,t.jsxs)("div",{className:"border-v0-alpha-400 bg-v0-background-200 flex min-h-[200px] flex-col items-center justify-center gap-4 text-balance rounded-md border px-6 py-8 text-center",children:[o?(0,t.jsx)("div",{className:r({variant:a}),children:o}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)("span",{className:"text-label-16 font-medium",children:n}),(0,t.jsx)("span",{className:"text-label-14 text-v0-gray-900",children:i})]})]})}let r=(0,e.i(89440).cva)("bg-v0-background-100 border-v0-alpha-400 flex size-8 items-center justify-center rounded-[6px] border",{variants:{variant:{default:"text-v0-gray-1000",warning:"text-v0-amber-700",error:"text-v0-red-700",success:"text-v0-green-700"}},defaultVariants:{variant:"default"}});e.s(["EmptyState",()=>n])},681688,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 5.5V2.5H5.5V5.5H2.5ZM1 2C1 1.44772 1.44772 1 2 1H6C6.55228 1 7 1.44772 7 2V6C7 6.55228 6.55228 7 6 7H2C1.44772 7 1 6.55228 1 6V2ZM2.5 13.5V10.5H5.5V13.5H2.5ZM1 10C1 9.44772 1.44772 9 2 9H6C6.55228 9 7 9.44772 7 10V14C7 14.5523 6.55228 15 6 15H2C1.44772 15 1 14.5523 1 14V10ZM10.5 2.5V5.5H13.5V2.5H10.5ZM10 1C9.44772 1 9 1.44772 9 2V6C9 6.55228 9.44772 7 10 7H14C14.5523 7 15 6.55228 15 6V2C15 1.44772 14.5523 1 14 1H10ZM10.5 13.5V10.5H13.5V13.5H10.5ZM9 10C9 9.44772 9.44772 9 10 9H14C14.5523 9 15 9.44772 15 10V14C15 14.5523 14.5523 15 14 15H10C9.44772 15 9 14.5523 9 14V10Z" fill="currentColor" />');e.s(["GridSquare",0,t])},184645,129818,282608,795272,e=>{"use strict";e.s(["GitSyncButton",()=>tv],184645);var t=e.i(509473),n=e.i(743124),r=e.i(639056),i=e.i(574768),o=e.i(407705),a=e.i(194465),s=t,l=r,c=e.i(675120),u=n,d=o,p=e.i(241489),h=e.i(957388),f=e.i(54149),m=e.i(339682),g=t,v=e.i(978918),x=e.i(707974),y=o,b=r,w=e.i(660348),j=e.i(95642),C=e.i(548866),k=n,S=t,N=n,E=e.i(563152),D=e.i(850491),I=e.i(270370),A=e.i(176248),T=e.i(304649),M=t,L=n,P=e.i(543017),R=e.i(936096);let _=(0,R.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 7C3.5 5.067 5.067 3.5 7 3.5C8.933 3.5 10.5 5.067 10.5 7C10.5 7.88461 10.1718 8.69256 9.63058 9.30876L9.30876 9.63058C8.69256 10.1718 7.88461 10.5 7 10.5C5.067 10.5 3.5 8.933 3.5 7ZM9.96544 11.0261C9.13578 11.6382 8.11014 12 7 12C4.23858 12 2 9.76142 2 7C2 4.23858 4.23858 2 7 2C9.76142 2 12 4.23858 12 7C12 8.11014 11.6382 9.13578 11.0261 9.96544L14.0303 12.9697L14.5607 13.5L13.5 14.5607L12.9697 14.0303L9.96544 11.0261Z" fill="currentColor"/>');e.s(["MagnifyingGlassSmall",0,_],129818);var O=w,F=e.i(940393),B=T,V=e.i(758118),z=e.i(365290),H=e.i(762585),U=c;let G="flex h-7 items-center gap-2 duration-0 ";function W(e){let{items:t,getItemId:n,getItemValue:r,selectedItemId:i,error:o,renderItem:a,onItemSelect:s,placeholder:l="Search...",emptyState:c="No items found",children:u,loading:d,childClassName:p,height:h=128,filterFunction:f,hideListWhenEmpty:m,searchTerm:g,onSearchChange:v,className:x,disabled:y=!1}=e,[b,w]=(0,L.useState)(""),j=void 0!==g?g:b,C=e=>{v?v(e):w(e)},k=j?t.filter(e=>f?f(e,j):r(e).toLowerCase().includes(j.toLowerCase())):t,S=0===k.length,N=!!(m&&S&&!d);return(0,M.jsxs)(F.Command,{className:(0,B.cn)("text-label-14 flex flex-col",x),children:[(0,M.jsx)(F.CommandInput,{placeholder:l,onValueChange:C,value:j,className:"h-10",divClassName:"px-3 gap-2",disabled:y,icon:(0,M.jsx)(_,{})}),(0,M.jsx)("div",{className:"relative flex flex-col overflow-hidden",style:{height:N?0:h,...(0,V.visibleStylesIf)(!N),...(0,z.transitionStyles)(["height"])},children:d?(0,M.jsx)(F.CommandList,{tabIndex:-1,className:"overflow-y-hidden",children:(0,M.jsx)(F.CommandGroup,{children:(0,M.jsx)("div",{className:"flex h-full flex-col items-center justify-center mask-[linear-gradient(to_bottom,black,transparent)]",children:Array.from({length:6}).map((e,t)=>{let n=[50,70,90][t%3];return(0,M.jsx)("div",{className:(0,B.cn)("w-full",G),children:(0,M.jsx)(H.Skeleton,{className:"h-4",style:{width:"".concat(n,"%")}})},t)})})})}):(0,M.jsxs)(F.CommandList,{tabIndex:-1,children:[(0,M.jsx)("div",{className:(0,B.cn)("bg-v0-background-200 border-v0-alpha-400 absolute inset-2 flex items-center justify-center overflow-hidden rounded-md border p-2 text-v0-gray-900",o&&"bg-v0-red-200 text-v0-red-800"),style:{transform:S?"scale(1)":"scale(0.95)",...(0,V.visibleStylesIf)(S),...(0,z.transitionStyles)(["opacity","transform"],{delay:50*!!S,duration:200*!!S})},children:o?(0,M.jsxs)("span",{className:"flex flex-col items-center gap-2 overflow-hidden text-center",children:[(0,M.jsx)(O.Stop,{})," ",(0,M.jsx)("span",{className:"line-clamp-3 text-ellipsis",children:o})]}):c}),(0,M.jsx)(F.CommandGroup,{className:"overflow-y-scroll",children:k.map(e=>{let t=n(e),o=i===t;return(0,M.jsxs)(F.CommandItem,{value:r(e),onSelect:()=>{y||s(e)},className:(0,B.cn)(G,y&&"pointer-events-none opacity-50"),children:[(0,M.jsx)("span",{className:"truncate",children:a(e,o)}),o&&(0,M.jsx)(P.Check,{className:"ml-auto h-4 w-4 shrink-0"})]},t)})})]})}),(0,M.jsx)(U.TransitionNode,{renderKey:"".concat(!!u),childClassName:"overflow-hidden",children:u?(0,M.jsx)("div",{className:(0,B.cn)("border-t border-v0-gray-200 p-2",N&&"border-transparent",p),children:u}):null})]})}var q=t,Z=i,K=e.i(990131),$=e.i(70165),Y=T;function J(e){let{open:t,onOpenChange:n,trigger:r,children:i,contentClassName:o,drawerClassName:a="h-fit",forceMobile:s,popoverContentProps:l,drawerContentProps:c}=e,u=(0,$.useIsMobile)();return(void 0!==s?s:u)?(0,q.jsxs)(K.Drawer,{open:t,onOpenChange:n,children:[(0,q.jsx)(K.DrawerTrigger,{asChild:!0,children:r}),(0,q.jsx)(K.DrawerContent,{className:(0,Y.cn)(a),...c,children:i})]}):(0,q.jsxs)(Z.Popover,{open:t,onOpenChange:n,children:[(0,q.jsx)(Z.PopoverTrigger,{asChild:!0,children:r}),(0,q.jsx)(Z.PopoverContent,{className:(0,Y.cn)("p-0",o),align:"start",sideOffset:4,...l,children:i})]})}var Q=e.i(331968),X=o,ee=r;e.i(472428);var et=e.i(152641);e.i(563948);var en=e.i(407562),er=c,ei=e.i(297239);function eo(e){var t;let{chatId:n,projectId:r,onBranchSelect:i}=e,o=(0,ei.useT)(),[a,s]=(0,N.useState)(!1),[l,c]=(0,N.useState)(""),u=(0,X.getGitSyncAtoms)(n,r),d=(0,ee.useAtomValue)(u.selectedBranch),p=(0,ee.useAtomValue)(u.currentBranch),h=(0,ee.useAtomValue)(u.disableAsyncAction),{data:{git:f},isLoading:m}=(0,et.useServerQuerySWR)(["chat","externalMeta"],{chatId:n},{stopFetch:!0,suspense:!0}),{data:g,isLoading:v}=(0,et.useServerQuerySWR)(["project","latestGit"],{projectId:r,branch:null!=p?p:void 0},{stopFetch:!0,suspense:!0}),x=(0,X.getGitSyncActions)(n),y=(0,ee.useAtomValue)(u.asyncActionLoading),b=(0,X.isInState)(y,["creating-branch","syncing-to-branch","pushing-to-branch","switching-branch"]),w=m||v,j=(0,ee.useAtomValue)(u.allBranches),C=j.map((e,t)=>({id:String(t),name:e})),k=(0,N.useMemo)(()=>(0,Q.sanitizeBranchName)(l),[l]),M=!j.some(e=>e.toLowerCase()===(null!=k?k:"").toLowerCase()),L=(0,N.useMemo)(()=>{if(g.error)return o("gitSync.branchSwitcher.failedToLoadBranches")},[g.error,o]),P=(0,S.jsxs)(A.Button,{variant:"outline",className:"min-h-8 flex-1 justify-between font-normal",role:"combobox",type:"button",size:"sm","aria-expanded":a,disabled:b||h,children:[(0,S.jsx)(er.TransitionNode,{...er.PRESETS.inputSwitch,children:(0,S.jsx)("span",{children:d||p&&(null==f?void 0:f.gitConnected)?(0,S.jsxs)("span",{className:"flex items-center gap-2",children:[(0,S.jsx)(D.GitBranch,{}),null!=d?d:p]}):(0,S.jsx)("span",{children:o("gitSync.branchSwitcher.selectBranch")})})}),(0,S.jsx)(E.ChevronDownSmall,{})]});function R(e){i(e),s(!1)}let _=e=>{c(e)};function O(){M?(x.setStageIntent("create-branch"),x.updateCreateBranchName(k)):en.toast.error(o("gitSync.branchSwitcher.branchNameAlreadyTaken"))}let F=(0,S.jsx)(W,{items:C,error:L,getItemId:e=>e.id,getItemValue:e=>{var t;return null!=(t=(0,Q.sanitizeBranchName)(e.name))?t:""},selectedItemId:null==(t=C.find(e=>e.name===p))?void 0:t.id,loading:w,renderItem:e=>(0,S.jsx)(ea,{item:e}),onItemSelect:e=>{if(e.name===p)return void s(!1);R(e.name)},filterFunction:e=>{var t,n,r,i;return null!=(i=null==(n=(0,Q.sanitizeBranchName)(e.name))?void 0:n.toLowerCase().includes(null!=(r=null==(t=(0,Q.sanitizeBranchName)(l))?void 0:t.toLowerCase())?r:""))&&i},hideListWhenEmpty:!0,disabled:w||b,placeholder:o("gitSync.branchSwitcher.createOrSearchBranches"),childClassName:"p-1",emptyState:o("gitSync.branchSwitcher.noBranchesFound"),searchTerm:l,onSearchChange:_,children:M&&(0,S.jsxs)("button",{onClick:O,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),O())},className:(0,T.cn)("flex h-8 w-full items-center gap-2 overflow-hidden rounded-[6px] px-2 text-v0-blue-700 hover:bg-v0-gray-100 focus:bg-v0-gray-100 focus:outline-hidden "),tabIndex:0,role:"menuitem",children:[(0,S.jsx)(I.PlusCircle,{}),(0,S.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,S.jsxs)("span",{className:"whitespace-nowrap text-v0-gray-1000",children:[(0,S.jsx)("span",{children:o("gitSync.branchSwitcher.create")}),(0,S.jsx)("span",{children:" "}),(0,S.jsx)("span",{children:!k&&o("gitSync.branchSwitcher.branch")})]}),(0,S.jsx)("span",{className:"truncate text-v0-gray-900",children:k})]})]})});return(0,S.jsx)(J,{open:a,onOpenChange:s,trigger:P,contentClassName:"w-(--radix-popover-trigger-width)",children:F})}function ea(e){let{item:t}=e;return(0,S.jsx)("div",{children:t.name})}function es(e){let{children:t,className:n}=e;return(0,S.jsx)("span",{className:(0,T.cn)("text-label-13-mono w-fit shrink-0 break-all rounded-md bg-v0-gray-100 px-1.5 py-1",n),children:t})}var el=t,ec=e.i(89440),eu=T,ed=z,ep=n;let eh=(0,ec.cva)("flex h-4 w-4 items-center justify-center overflow-hidden rounded-full *:absolute *:rounded-full",{variants:{state:{queued:"[&>div]:bg-v0-gray-100 [&>div]:group-hover:bg-v0-gray-200 [&>span]:bg-v0-gray-900",ready:"[&>div]:bg-v0-blue-100 [&>div]:group-hover:bg-v0-blue-200 [&>span]:bg-v0-blue-700",error:"[&>div]:bg-v0-red-200 [&>div]:group-hover:bg-v0-red-300 [&>span]:bg-v0-red-700",building:"[&>div]:bg-v0-amber-200 [&>div]:group-hover:bg-v0-amber-300 [&>span]:bg-v0-amber-700",green:"[&>div]:bg-v0-green-100 [&>div]:group-hover:bg-v0-green-200 [&>span]:bg-v0-green-700"}}});function ef(e){let{state:t="queued",className:n,stopPing:r=!1,...i}=e,[o,a]=(0,ep.useState)(!0);return(0,ep.useEffect)(()=>{r&&setTimeout(()=>a(!1),1e3)},[r]),(0,el.jsxs)("span",{...i,className:eh({state:t,className:n}),children:[(0,el.jsx)("div",{className:"h-4 w-4 transition-colors duration-200"}),(0,el.jsx)("span",{className:"h-2 w-2"}),(0,el.jsx)("span",{className:(0,eu.cn)("h-2 w-2 animate-ping",!o&&"animate-none"),style:{...(0,ed.transitionStyles)(["opacity"],{duration:1e3})}})]})}var em=e.i(350097),eg=c,ev=et,ex=H,ey=e.i(409267),eb=ei;function ew(e){let{chatId:t,projectId:n}=e,r=(0,eb.useT)(),i=(0,y.getGitSyncAtoms)(t,n),o=(0,y.getGitSyncActions)(t),{git:a}=(0,b.useAtomValue)(i.externalChatMeta),s=(0,b.useAtomValue)(i.currentBranch),l=(0,b.useAtomValue)(i.latestProjectGit),c=(0,b.useAtomValue)(i.timeSinceLastSync),u=(0,b.useAtomValue)(i.asyncActionLoading),d=(0,b.useAtomValue)(i.upstreamSha),{isLoading:p}=(0,ev.useServerQuerySWR)(["project","latestGit"],{projectId:n,branch:null!=s?s:void 0},{stopFetch:!0}),h="pushing-to-branch"===u;function f(e){o.setStageIntent("switch-branch-confirmation"),o.setSwitchBranchTarget(e)}let m=(0,k.useMemo)(()=>{var e,t;return l.error?{icon:(0,g.jsx)(ef,{state:"error",stopPing:!0}),title:r("gitSync.status.failedToLoadGitHub"),label:null!=(e=l.message)?e:""}:a?h||"syncing-to-branch"===u||"switching-branch"===u?{icon:(0,g.jsx)(ej,{}),title:h?r("gitSync.status.syncingToBranch"):r("gitSync.status.syncingChanges"),label:(0,g.jsx)(eC,{time:c})}:d&&!a.gitAutoPull?{icon:(0,g.jsx)(ef,{state:"building",stopPing:!0}),title:r("gitSync.status.upstreamChanges"),label:(0,g.jsx)(eC,{time:c})}:{icon:(0,g.jsx)(ef,{state:"green",stopPing:!0}),title:a.onProductionBranch?r("gitSync.status.connectedToGitHub"):r("gitSync.status.syncedToGitHub"),label:(0,g.jsx)(eC,{time:c})}:{icon:(0,g.jsx)(ef,{state:"error",stopPing:!0}),title:r("gitSync.status.notConnectedToGitHub"),label:null!=(t=l.message)?t:"."}},[l.error,l.message,a,h,u,d,r,c]);return a?(0,g.jsxs)(v.PopoverContent,{className:"gap-2.5 pt-2.5",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("div",{className:"flex h-5 flex-1 items-center gap-2",children:p?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ef,{state:"queued"}),(0,g.jsx)(ex.Skeleton,{className:"h-5",style:{minWidth:"70%"}})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(eg.TransitionNode,{...eg.PRESETS.buttonContent,enter:{scale:.5},children:m.icon}),(0,g.jsx)(eg.TransitionNode,{duration:.3,delay:.15,justify:"start",renderKey:m.title,children:(0,g.jsxs)("span",{className:"text-label-14 flex gap-2 whitespace-nowrap font-medium text-v0-gray-1000",children:[m.title,(0,g.jsx)("span",{className:"truncate font-normal text-v0-gray-900",children:m.label})]})})]})}),(0,g.jsx)(ey.BranchSettingsButton,{chatId:t,projectId:n,variant:"ghost",delayFocus:!0})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,g.jsxs)(v.InputRow,{children:[(0,g.jsx)(x.Label,{children:r("gitSync.status.repository")}),(0,g.jsx)(ey.LinkOutToRepoButton,{chatId:t,projectId:n})]}),s?(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsxs)(v.InputRow,{children:[(0,g.jsx)(x.Label,{children:r("gitSync.selectBranch.activeBranch")}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(eo,{chatId:t,projectId:n,onBranchSelect:f}),(0,g.jsx)(ey.CreateBranchButton,{chatId:t,projectId:n,variant:"secondary"})]})]}),(0,g.jsx)(eg.TransitionNode,{...eg.PRESETS.popoverContent,children:!a.onProductionBranch&&a.gitAutoCommitPush&&a.gitAutoPull?(0,g.jsx)("div",{className:"text-label-13 flex items-center gap-1 pt-3 text-gray-500",children:r("gitSync.status.autoCommitInfo")}):(0,g.jsxs)("div",{className:"flex w-full items-center gap-2 pt-4",children:[!a.gitAutoPull||a.onProductionBranch?(0,g.jsx)(ey.PullChangesButton,{chatId:t,projectId:n}):null,!a.gitAutoCommitPush||a.onProductionBranch?(0,g.jsx)(ey.PushChangesButton,{chatId:t,projectId:n}):null]})})]}):null]})]}):(0,g.jsx)(C.EmptyState,{title:r("gitSync.status.notConnectedToGitHub"),icon:(0,g.jsx)(w.Stop,{}),variant:"error",children:r("gitSync.status.notConnectedDescription")})}function ej(){return(0,g.jsx)("div",{className:"flex h-4 w-4 items-center justify-center",children:(0,g.jsx)(j.RefreshClockwise,{className:"animate-spin ease-in-out",style:{animationDuration:"1.1s",animationTimingFunction:"cubic-bezier(.45,.04,.25,.99)"}})})}function eC(e){let{time:t,prefix:n}=e,r=(0,eb.useT)(),[i,o]=(0,k.useState)(0);(0,k.useEffect)(()=>{let e=setInterval(()=>{(null!=t?t:Date.now()>Date.now()-65e3)&&o(i+1)},200);return()=>clearInterval(e)},[t,i,o]);let a=null!=t?t:Date.now(),s=a>Date.now()-15e3;return(0,g.jsxs)("span",{children:[n,s?(0,g.jsx)("span",{children:r(n?"gitSync.status.justNow":"gitSync.status.justNowCapitalized")}):(0,em.timeAgo)(new Date(a),!0,Date.now(),!1)]})}var ek=t,eS=A,eN=w,eE=v,eD=C,eI=e.i(132666),eA=ei;function eT(e){let{chatId:t,projectId:n}=e,r=(0,eA.useT)(),{handleRetry:i,handleReport:o}=(0,eI.useAsyncGitSyncActions)({chatId:t,projectId:n});function a(e){e.preventDefault(),i()}return(0,ek.jsxs)("form",{id:"error-form",onSubmit:a,children:[(0,ek.jsx)(eE.PopoverContent,{children:(0,ek.jsx)(eD.EmptyState,{title:r("gitSync.error.title"),variant:"error",icon:(0,ek.jsx)(eN.Stop,{}),children:r("gitSync.error.description")})}),(0,ek.jsxs)(eE.PopoverActions,{children:[(0,ek.jsx)(eS.Button,{size:"sm",onClick:o,type:"button",variant:"secondary",children:r("gitSync.error.report")}),(0,ek.jsx)(eS.Button,{size:"sm",type:"submit",children:r("gitSync.error.reload")})]})]})}var eM=t,eL=v,eP=e.i(662429),eR=x,e_=eI,eO=A,eF=o,eB=r,eV=e.i(607391),ez=en,eH=ey,eU=n,eG=ei;function eW(e){let{chatId:t,projectId:n}=e,r=(0,eG.useT)(),i=(0,eF.getGitSyncAtoms)(t,n),o=(0,eB.useAtomValue)(i.selectedBranch),a=(0,eF.getGitSyncActions)(t),{branches:s}=(0,eB.useAtomValue)(i.latestProjectGit),{handleSyncToBranch:l}=(0,e_.useAsyncGitSyncActions)({chatId:t,projectId:n}),c=(0,eB.useAtomValue)(i.asyncActionLoading),u=(0,eB.useAtomValue)(i.disableAsyncAction),d=(0,eF.isInState)(c,["syncing-to-branch","pushing-to-branch","switching-branch","updating-branch-connection"]),p="syncing-to-branch"===c;function h(e){if(e.preventDefault(),!o)return void ez.toast.error(r("gitSync.selectBranch.pleaseSelectBranch"));l(o).then(()=>{a.setSelectedBranch(null)})}return(0,eU.useEffect)(()=>{(null==s?void 0:s.length)===1&&a.setSelectedBranch(s[0].name)},[a,s]),(0,eM.jsxs)("form",{id:"sync-to-branch-form",onSubmit:h,children:[(0,eM.jsxs)(eL.PopoverContent,{children:[(0,eM.jsx)(eP.PopoverHeading,{title:r("gitSync.selectBranch.title"),children:r("gitSync.selectBranch.description")}),(0,eM.jsxs)(eL.InputRow,{children:[(0,eM.jsx)(eR.Label,{children:r("gitSync.selectBranch.projectRepository")}),(0,eM.jsx)(eH.LinkOutToRepoButton,{chatId:t,projectId:n})]}),(0,eM.jsxs)(eL.InputRow,{children:[(0,eM.jsx)(eR.Label,{children:r("gitSync.selectBranch.activeBranch")}),(0,eM.jsxs)("span",{className:"flex items-center gap-2",children:[(0,eM.jsx)(eo,{chatId:t,projectId:n,onBranchSelect:e=>a.setSelectedBranch(e)}),(0,eM.jsx)(eH.CreateBranchButton,{chatId:t,projectId:n,branchIcon:!0})]})]})]}),(0,eM.jsx)(eL.PopoverActions,{children:(0,eM.jsx)(eO.Button,{size:"sm",disabled:!o||d||u,type:"submit",children:(0,eM.jsx)(eV.ActionStatus,{isLoading:p,loading:r("gitSync.selectBranch.settingActiveBranch"),children:r("gitSync.selectBranch.setActiveBranch")})})})]})}var eq=t,eZ=v,eK=eI,e$=A,eY=o,eJ=r,eQ=eV,eX=ey,e0=eP,e1=x,e2=e.i(909270),e5=n,e4=ei;function e3(e){let{chatId:t,projectId:n}=e,r=(0,e4.useT)(),i=(0,eY.getGitSyncAtoms)(t,n),{git:o}=(0,eJ.useAtomValue)(i.externalChatMeta),a=(0,eJ.useAtomValue)(i.currentBranch),s=(0,e5.useRef)(a).current,l=(0,eJ.useAtomValue)(i.switchBranchTarget),{handleSwitchBranch:c}=(0,eK.useAsyncGitSyncActions)({chatId:t,projectId:n}),u="switching-branch"===(0,eJ.useAtomValue)(i.asyncActionLoading);function d(e){e.preventDefault(),c()}if(!s||!l)return(0,eq.jsxs)(eq.Fragment,{children:[(0,eq.jsx)(eZ.PopoverContent,{children:(0,eq.jsx)(e0.PopoverHeading,{title:r("gitSync.switchBranch.title"),children:r("gitSync.switchBranch.noBranchFound")})}),(0,eq.jsx)(eZ.PopoverActions,{children:(0,eq.jsx)(eX.CancelIntentButton,{chatId:t,children:r("gitSync.switchBranch.okay")})})]});let p=e=>o?"https://github.com/".concat(o.ownerName,"/").concat(o.repoName,"/tree/").concat(e):"#";return(0,eq.jsxs)("form",{id:"switch-branch-form",onSubmit:d,children:[(0,eq.jsxs)(eZ.PopoverContent,{children:[(0,eq.jsx)(e0.PopoverHeading,{title:r("gitSync.switchBranch.title"),children:r("gitSync.switchBranch.description")}),(0,eq.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,eq.jsx)(e9,{title:r("gitSync.switchBranch.currentBranch"),branch:s,href:p(s)}),(0,eq.jsx)("span",{className:"w-full border-t border-v0-gray-200"}),(0,eq.jsx)(e9,{title:r("gitSync.switchBranch.newBranch"),branch:l,href:p(l)})]})]}),(0,eq.jsxs)(eZ.PopoverActions,{children:[(0,eq.jsx)(eX.CancelIntentButton,{chatId:t,disabled:u}),(0,eq.jsx)(e$.Button,{size:"sm",disabled:u,type:"submit",children:(0,eq.jsx)(eQ.ActionStatus,{isLoading:u,loading:r("gitSync.switchBranch.switchingBranch"),children:r("gitSync.switchBranch.switchBranchButton")})})]})]})}function e9(e){let{title:t,branch:n,href:r}=e;return(0,eq.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,eq.jsx)(e1.Label,{className:"whitespace-nowrap",children:t}),(0,eq.jsx)(e2.default,{href:r,target:"_blank",className:"decoration-v0-gray-500 hover:underline",children:(0,eq.jsx)(es,{children:n})})]})}var e7=e.i(53223);function e6(e){let{...t}=e,n=(0,d.getGitSyncAtoms)(t.chatId,t.projectId),r=(0,l.useAtomValue)(n.stage);(0,u.useEffect)(()=>{(0,e7.track)("GitSyncStageView",{chatId:t.chatId,stage:r,projectId:t.projectId})},[r,t.chatId,t.projectId]);let i=(0,u.useMemo)(()=>{switch(r){case"sign-in":return(0,s.jsx)(p.SignInStage,{...t});case"install-app":return(0,s.jsx)(h.InstallAppStage,{...t});case"create-repo":return(0,s.jsx)(f.CreateRepoStage,{...t});case"create-branch":return(0,s.jsx)(m.CreateBranchStage,{...t});case"switch-branch-confirmation":return(0,s.jsx)(e3,{...t});case"status":return(0,s.jsx)(ew,{...t});case"select-branch":return(0,s.jsx)(eW,{...t});case"error":return(0,s.jsx)(eT,{...t})}},[t,r]);return(0,s.jsx)(c.TransitionNode,{...c.PRESETS.popoverContent,childClassName:"overflow-hidden",children:(0,s.jsx)("div",{className:"flex flex-col overflow-hidden",children:i})})}var e8=et,te=e.i(209819),tt=n,tn=e.i(979865),tr=e.i(449381),ti=r,to=o,ta=eI;function ts(e){let{chatId:t,projectId:n}=e,r=(0,tn.useRouter)(),i=(0,tn.useSearchParams)(),o=(0,to.getGitSyncAtoms)(t,n),a=(0,tt.useRef)(!1),{handlePushToBranch:s}=(0,ta.useAsyncGitSyncActions)({chatId:t,projectId:n}),l=(0,ti.useAtomValue)(o.isConnectedToGit),c=(0,tr.useActiveBlockState)(),u=(0,ti.useAtomValue)(o.asyncActionLoading),d=(0,ti.useAtomValue)(o.currentBranch),p=(0,tt.useCallback)(()=>{let e=new URLSearchParams(i.toString());e.delete("assignBranch");let t=window.location.pathname+(e.toString()?"?".concat(e.toString()):"");r.replace(t)},[i,r]),h=(0,tt.useMemo)(()=>{let e=i.get("assignBranch");return e&&"pushing-to-branch"!==u&&l&&(null==c?void 0:c.id)&&!d&&!a.current?e:null},[i,u,l,null==c?void 0:c.id,d]);(0,tt.useEffect)(()=>{h&&!a.current&&(a.current=!0,s(h).finally(()=>{a.current=!1,p()}))},[h,s,p])}var tl=en,tc=et,tu=o,td=n,tp=r,th=eI,tf=ei;function tm(e){let{chatId:t,projectId:n}=e,r=(0,tf.useT)(),i=(0,tu.getGitSyncAtoms)(t,n),o=(0,tu.getGitSyncActions)(t),a=(0,tp.useAtomValue)(i.isOpen),{handleSyncToBranch:s}=(0,th.useAsyncGitSyncActions)({chatId:t,projectId:n}),{git:l}=(0,tp.useAtomValue)(i.externalChatMeta),c=(0,tp.useAtomValue)(i.currentBranch),u=(0,tp.useAtomValue)(i.upstreamSha),{isLoading:d,isValidating:p}=(0,tc.useServerQuerySWR)(["project","latestGit"],{projectId:n,branch:null!=c?c:void 0},{refreshInterval:6e4,stopFetch:!n}),h=(0,td.useCallback)(()=>{if(!u||!c||!l||!l.gitAutoPull||l.onProductionBranch)return;let e=s(c).then(()=>{o.addSyncedSha(u)});a||(0,tl.throttleById)("git-sync-promise",5e3,()=>tl.toast.promise({promise:e,loading:r("gitSync.toast.syncingExternalChanges"),success:r("gitSync.toast.syncedExternalChanges"),error:r("gitSync.toast.failedToSyncExternalChanges")}))},[u,c,l,s,a,o,r]);(0,td.useEffect)(()=>{h()},[u]),(0,td.useEffect)(()=>{o.updateIsRefreshingGitHead(d||p)},[o,d,p])}var tg=e7;function tv(e){let{chatId:r,asModal:i}=e,{project:o,isLoading:s}=(0,te.useChatMetadata)(r);return s?(0,t.jsx)(a.GitSyncTriggerSkeleton,{}):o?(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(a.GitSyncTriggerSkeleton,{}),children:(0,t.jsx)(tx,{chatId:r,projectId:o.projectId,asModal:i})}):(0,t.jsx)(a.GitSyncCreateProjectTrigger,{chatId:r})}function tx(e){let{chatId:n,projectId:s,asModal:l=!1}=e;(0,e8.useServerQuerySWR)(["scoped","gitNamespaces"],{}),(0,e8.useServerQuerySWR)(["chat","externalMeta"],{chatId:n}),tm({chatId:n,projectId:s}),ts({chatId:n,projectId:s});let c=(0,o.getGitSyncAtoms)(n,s),u=(0,o.getGitSyncActions)(n),d=(0,r.useAtomValue)(c.isOpen),p=(0,r.useAtomValue)(c.isConnectedToGit),h=(0,r.useAtomValue)(c.stage),f=e=>{u.setIsOpen(e),e?(0,tg.track)("GitSyncPopoverOpen",{chatId:n,projectId:s,isConnectedToGit:p}):(0,tg.track)("GitSyncPopoverClose",{chatId:n,stage:h})};return(0,t.jsxs)(i.Popover,{open:d,onOpenChange:f,modal:l,children:[(0,t.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(a.GitSyncTrigger,{chatId:n,projectId:s})}),(0,t.jsx)(i.PopoverContent,{className:"w-[400px] max-w-screen origin-top-right",align:"end",alignOffset:1,children:(0,t.jsx)(e6,{chatId:n,projectId:s})})]})}let ty=(0,R.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M3.75 0C2.50736 0 1.5 1.00736 1.5 2.25V13.744V13.75H1.50001C1.50323 14.9899 2.50935 15.994 3.75 15.994H13H14.5V14.494V13.7296V12.994V11.494V0.75V0H13.75H3.75ZM13 11.494V1.5H3.75C3.33579 1.5 3 1.83579 3 2.25V11.622C3.23458 11.5391 3.48702 11.494 3.75 11.494H13ZM3 13.744C3 14.1582 3.33579 14.494 3.75 14.494H13V13.7296V12.994H3.75C3.33579 12.994 3 13.3298 3 13.744Z" fill="currentColor"/>');e.s(["BookClosed",0,ty],282608);let tb=(0,R.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M10.7499 1H9.99987V2.5H10.7499H12.4392L1.46954 13.4697L0.939209 14L1.99987 15.0607L2.5302 14.5303L13.4987 3.56182V5.25V6H14.9987V5.25V2C14.9987 1.44772 14.551 1 13.9987 1H10.7499Z" fill="currentColor"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.0002 7.06067L5.46983 6.53038L1.4691 2.53034L0.938721 2.00005L1.99929 0.939301L2.52967 1.46959L6.5304 5.46963L7.06077 5.99992L6.0002 7.06067ZM12.4377 13.4994H10.7499H9.99994V14.9994H10.7499H13.9994C14.5517 14.9994 14.9994 14.5517 14.9994 13.9994V10.75V9.99999H13.4994V10.75V12.4398L10.5305 9.46978L10.0003 8.93934L8.93944 9.99979L9.46966 10.5302L12.4377 13.4994Z" fill="currentColor"/>');e.s(["ArrowCrossed",0,tb],795272)},646805,e=>{"use strict";e.s(["Duplicate",()=>h,"Remix",()=>d,"RemixBlockButton",()=>c]);var t=e.i(509473),n=e.i(743124),r=e.i(176248),i=e.i(304649),o=e.i(92479),a=e.i(297239),s=e.i(936096);e.i(904347);var l=e.i(37737);function c(e){let{blockId:s,className:c,canWriteToChat:u}=e,{isStreaming:p}=(0,o.useChatLoadingState)(),h=(0,a.useT)(),f=(0,n.useCallback)(()=>{(0,l.openDialog)({type:"forkBlock",data:{blockId:s,page:"chat",canWriteToChat:!!u,actionType:"remix"}})},[u,s]);return(0,t.jsxs)(r.Button,{className:(0,i.cn)("group rounded-md px-2 has-[>svg]:px-2 flex items-center gap-2 h-7",c),disabled:p,onClick:f,tooltip:{content:h("remixBlockButton.modalDescription")},size:"sm",variant:"default",children:[(0,t.jsx)(d,{"aria-hidden":"true",className:"size-3.5! md:size-4! text-v0-background-100"}),(0,t.jsx)("span",{children:h("remixBlockButton.remix")})]})}let u=(0,s.withNewIcon)('<path d="M10.8213 15.5645C10.0601 15.8123 9.28162 15.9305 8.5127 15.9287L8.51562 14.4297C9.12828 14.4312 9.74895 14.3364 10.3564 14.1387L10.8213 15.5645ZM5.55176 13.6289C6.09159 13.9408 6.67848 14.1662 7.28809 14.2969L7.13184 15.0303L6.97461 15.7637C6.21162 15.6002 5.47742 15.3181 4.80176 14.9277L5.55176 13.6289ZM8.49707 1.0498C12.6108 1.0498 15.9531 4.36694 15.9531 8.46777C15.953 10.8964 14.7795 13.0519 12.9707 14.4033L12.3691 14.8516L11.4717 13.6504L12.0723 13.2012C13.5201 12.1195 14.453 10.4013 14.4531 8.46777C14.4531 5.20336 11.7904 2.5498 8.49707 2.5498C5.74561 2.54995 3.43409 4.40342 2.74902 6.91699H4.2373V8.41699H0.800781C0.386597 8.41699 0.0508293 8.08116 0.0507812 7.66699V3.9834H1.55078V5.77051C2.63585 3.00553 5.33784 1.04994 8.49707 1.0498ZM3.38086 11.4521C3.69902 12.0068 4.0969 12.4933 4.55273 12.9033L3.54883 14.0176C2.97707 13.5031 2.47853 12.8928 2.08008 12.1982L3.38086 11.4521ZM8.53516 5.5332C8.97692 5.53321 9.33472 5.8913 9.33496 6.33301C9.33496 6.61596 9.33635 6.83074 9.36133 7.01953C9.38549 7.20145 9.42575 7.3024 9.46582 7.3623C9.51048 7.42885 9.70248 7.66696 10.6689 7.66699C11.1107 7.66701 11.4685 8.0251 11.4688 8.4668C11.4687 8.9087 11.1108 9.26659 10.6689 9.2666C10.3859 9.2666 10.1713 9.26794 9.98242 9.29297C9.80024 9.31718 9.69949 9.35732 9.63965 9.39746C9.57314 9.44209 9.33504 9.63423 9.33496 10.6006L9.33105 10.6826C9.28996 11.086 8.94936 11.4004 8.53516 11.4004C8.12104 11.4003 7.78035 11.0859 7.73926 10.6826L7.73535 10.6006L7.73145 10.2217C7.72799 10.1094 7.72148 10.0083 7.70898 9.91406C7.68476 9.73202 7.64364 9.63109 7.60352 9.57129C7.55782 9.50361 7.36403 9.2666 6.40137 9.2666C5.95955 9.26648 5.60157 8.90864 5.60156 8.4668C5.60179 8.05284 5.91619 7.71205 6.31934 7.6709L6.40137 7.66699L6.78027 7.66309C6.8927 7.65964 6.99357 7.65312 7.08789 7.64062C7.27023 7.61641 7.37081 7.57532 7.43066 7.53516C7.49789 7.48987 7.73535 7.29726 7.73535 6.33301C7.7356 5.89137 8.09349 5.53332 8.53516 5.5332Z" fill="currentColor"/>'),d=e=>(0,t.jsx)(u,{...e,"aria-hidden":"true"}),p=(0,s.withNewIcon)('\n  <path d="M13.25 4.5C14.2163 4.50024 15 5.28365 15 6.25V13.75C15 14.7164 14.2163 15.4998 13.25 15.5H6.7002C5.72932 15.4997 4.94369 14.7092 4.9502 13.7383L5.00195 6.23828C5.00854 5.27663 5.79034 4.50024 6.75195 4.5H13.25ZM6.75195 6C6.61484 6.00024 6.50302 6.11091 6.50195 6.24805L6.4502 13.748C6.44925 13.8866 6.56167 13.9997 6.7002 14H13.25C13.3879 13.9998 13.5 13.8879 13.5 13.75V6.25C13.5 6.11208 13.3879 6.00024 13.25 6H6.75195ZM10.75 9.25H12.5V10.75H10.75V12.5H9.25V10.75H7.5V9.25H9.25V7.5H10.75V9.25ZM9.21191 0.5C10.1783 0.500098 10.9619 1.28356 10.9619 2.25V3.10742H9.46191V2.25C9.46191 2.11199 9.3499 2.0001 9.21191 2H2.75C2.61193 2 2.5 2.11193 2.5 2.25V9.75C2.5 9.88807 2.61193 10 2.75 10H4.01855V11.5H2.75C1.7835 11.5 1 10.7165 1 9.75V2.25C1 1.2835 1.7835 0.5 2.75 0.5H9.21191Z" fill="currentColor" />\n'),h=e=>(0,t.jsx)(p,{...e,"aria-hidden":"true"})},363442,34630,438419,e=>{"use strict";var t=e.i(936096);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00001 0.433594L8.65845 1.64093L10.5908 5.18412L14.5577 5.92698L15.9094 6.18011L14.9646 7.17942L12.192 10.1121L12.7113 14.1144L12.8883 15.4782L11.6459 14.8884L8.00001 13.1577L4.35408 14.8884L3.11173 15.4782L3.28869 14.1144L3.80802 10.1121L1.03538 7.17942L0.0906067 6.18011L1.44233 5.92698L5.40922 5.18412L7.34156 1.64093L8.00001 0.433594ZM8.00001 3.56646L6.55565 6.21487L6.38519 6.52743L6.03525 6.59296L3.07014 7.14822L5.14259 9.34029L5.38718 9.59899L5.34137 9.95205L4.95318 12.9436L7.67838 11.65L8.00001 11.4973L8.32163 11.65L11.0468 12.9436L10.6586 9.95205L10.6128 9.59899L10.8574 9.34029L12.9299 7.14822L9.96476 6.59296L9.61482 6.52743L9.44436 6.21487L8.00001 3.56646Z" fill="currentColor"/>');e.s(["Star",0,n],363442);let r=(0,t.withNewIcon)('<path d="M7.99999 0.489502L10.5734 5.20807L15.8562 6.19736L12.1638 10.1029L12.8554 15.4329L7.99999 13.1281L3.1446 15.4329L3.83621 10.1029L0.143799 6.19736L5.42663 5.20807L7.99999 0.489502Z" fill="currentColor"/>');e.s(["StarFill",0,r],34630);var i=e.i(509473),o=e.i(127558),a=t;let s={hover:{opacity:1,y:[0,2,0],transition:{...o.DEFAULT_TRANSITION,y:{...o.DEFAULT_TRANSITION,duration:1.1,repeat:1/0}}}},l=e=>({opacity:[0,1],y:[16,0],scaleX:1,scaleY:1,interruptible:!1,transition:{ease:[.13,.65,.14,1],duration:.25,delay:e}}),c=(0,a.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V13.5H8.75011V3.56062Z" fill="currentColor"/>'),u=(0,a.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V11H8.75011V3.56062Z" fill="currentColor"/>'),d=(0,a.withNewIcon)('<path clip-rule="evenodd" d="M13.5 13.5L13.5 8.5L15 8.5L15 14C15 14.5523 14.5523 15 14 15L2 15C1.44771 15 1 14.5523 1 14L1 8.5L2.5 8.5L2.5 13.5L13.5 13.5Z" fill="currentColor" fill-rule="evenodd"/>'),p=(0,i.jsxs)(o.AnimatedIconGroup,{hideOverflow:!0,children:[(0,i.jsx)(o.AnimatedIcon,{variants:{...s,idle:{opacity:0},tap:{opacity:0,y:-16,interruptible:!1,transition:{ease:[.33,.03,.94,.42],duration:.5}}},children:(0,i.jsx)(c,{})}),(0,i.jsx)(o.AnimatedIcon,{variants:{...s,idle:{opacity:1},tap:l(.4)},children:(0,i.jsx)(u,{})}),(0,i.jsx)(o.AnimatedIcon,{variants:{hover:{opacity:0,y:4,scaleX:0,scaleY:.5,transition:o.DEFAULT_TRANSITION},idle:{opacity:1,scaleX:1,scaleY:1},tap:l(.47)},children:(0,i.jsx)(d,{})})]});e.s(["animatedShare",0,p],438419)},740292,804851,e=>{"use strict";e.s(["SuspendingChatActions",()=>P,"SuspendingFavoriteChatDropdownItem",()=>O,"SuspendingRestoreButton",()=>F],740292);var t=e.i(509473),n=e.i(743124),r=e.i(176248),i=e.i(304649),o=e.i(556355),a=e.i(53223),s=e.i(743839),l=e.i(922106),c=e.i(199551),u=e.i(363442),d=e.i(34630),p=e.i(70165),h=e.i(438419);e.i(904347);var f=e.i(37737),m=e.i(297239);e.i(563948);var g=e.i(407562),v=e.i(246300),x=e.i(979865),y=e.i(32170),b=e.i(504066),w=e.i(358847),j=(0,w.createServerReference)("40e6e24730f9bcdd903d84c25d33984f7abd7f133a",w.callServer,void 0,w.findSourceMapURL,"favoriteChat"),C=w,k=(0,C.createServerReference)("40bc5c73fde3158efb33a06650357028932113e1ad",C.callServer,void 0,C.findSourceMapURL,"unfavoriteChat"),S=e.i(783069);function N(e,t){return(0,S.toSorted)(e,(e,n)=>null===e[t]?1:null===n[t]?-1:new Date(n[t]).getTime()-new Date(e[t]).getTime())}e.s(["sortByDateKey",()=>N],804851),e.i(472428);var E=e.i(152641),D=w,I=(0,D.createServerReference)("40700545b7ae0abb98c1aa493748ef9d352de470c2",D.callServer,void 0,D.findSourceMapURL,"restoreChat"),A=e.i(211976),T=e.i(120485),M=e.i(476171);function L(e){let{chat:n}=e,{user:r}=(0,y.useUser)(),i=(0,m.useT)(),s=n.authorId===(null==r?void 0:r.id),{copyToClipboard:u}=(0,b.useCopyToClipboard)({timeout:2e3});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.DropdownMenuItem,{onSelect:()=>{u("".concat(window.location.origin,"/chat/").concat((0,M.getSluggifiedId)(n.chatId,n.title))),g.toast.success("Share link copied!")},children:[h.animatedShare,(0,t.jsx)("span",{children:i("chatActions.share")})]}),s&&(0,t.jsxs)(o.DropdownMenuItem,{onSelect:()=>{(0,a.track)("RenameChat",{targetChatId:n.chatId}),(0,f.openDialog)({type:"updateChatTitle",data:{chatId:n.chatId}})},children:[(0,t.jsx)(c.PencilEdit,{}),(0,t.jsx)("span",{children:i("chatActions.rename")})]}),s?(0,t.jsx)(O,{chat:n}):null,s&&(0,t.jsxs)(o.DropdownMenuItem,{onSelect:()=>{(0,f.openDialog)({type:"deleteChat",data:{chatId:n.chatId}})},variant:"destructive",children:[(0,t.jsx)(l.Trash,{}),(0,t.jsx)("span",{children:i("chatActions.delete")})]})]})}function P(e){let{chat:n,className:a,side:l="bottom",...c}=e,u=(0,p.useIsMobile)();return(0,t.jsxs)(o.DropdownMenu,{children:[(0,t.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{className:(0,i.cn)("relative z-10 size-7 shrink-0 rounded-md p-0 transition-none has-[>svg]:p-0 ",a),"cmdk-item-actions":"",size:"sm",variant:"ghost",...c,children:[(0,t.jsx)(s.MoreHorizontal,{}),(0,t.jsx)("span",{className:"sr-only",children:"Open chat actions"})]})}),(0,t.jsx)(o.DropdownMenuContent,{align:u?"end":"right"===l?"start":"end",side:u?"bottom":l,sideOffset:8,children:(0,t.jsx)(o.DropdownMenuGroup,{children:(0,t.jsx)(L,{chat:n,side:l})})})]})}function R(e){let{setChatHistoryData:r,setChatFavoritesData:i,chat:s}=e,l=(0,m.useT)(),c=(0,x.usePathname)(),p=(0,x.useRouter)(),{data:{favorites:h,history:f},mutate:g}=(0,E.useServerQuerySWR)(["scoped","chats"],{},{suspense:!0}),[v,y]=(0,n.useTransition)(),[b,w]=(0,n.useOptimistic)(s.favorite);return(0,t.jsxs)(o.DropdownMenuItem,{variant:b?"gold":"default",disabled:v,onSelect:async()=>{let e={...s,title:s.title||"",privacy:"private",shareable:!1,authorId:"",updatedAt:s.updatedAt||new Date,projectId:s.projectId||""};s.favorite?((0,a.track)("UnfavoriteChat",{targetChatId:s.chatId}),await g({serverMutate:k(s.chatId),optimisticData:{favorites:h.filter(e=>e.chatId!==s.chatId),history:N([...f,e],"updatedAt")}})):((0,a.track)("FavoriteChat",{targetChatId:s.chatId}),await g({serverMutate:j(s.chatId),optimisticData:{favorites:N([...h,e],"updatedAt"),history:f.filter(e=>e.chatId!==s.chatId)}})),y(()=>{w(e=>!e),s.favorite?(r(e=>{let t=e.findIndex(e=>e.updatedAt&&s.updatedAt&&e.updatedAt<s.updatedAt),n={...s,authorId:"",privacy:"private",shareable:!1,favorite:!1};return t<0?[...e,n]:[...e.slice(0,t),n,...e.slice(t)]}),i(e=>e.filter(e=>e.chatId!==s.chatId))):(r(e=>e.filter(e=>e.chatId!==s.chatId)),i(e=>{let t=e.findIndex(e=>e.updatedAt&&s.updatedAt&&e.updatedAt<s.updatedAt),n={...s,authorId:"",privacy:"private",shareable:!1,favorite:!0};return t<0?[...e,n]:[...e.slice(0,t),n,...e.slice(t)]})),"/chat/history"===c&&p.refresh()})},children:[b?(0,t.jsx)(d.StarFill,{}):(0,t.jsx)(u.Star,{}),(0,t.jsx)("span",{children:l(b?"chatActions.unfavorite":"chatActions.favorite")})]})}function _(e){let{...n}=e,{setData:r}=(0,v.useChatHistory)(),{setData:i}=(0,v.useChatFavorites)();return(0,t.jsx)(R,{...n,setChatHistoryData:r,setChatFavoritesData:i})}function O(e){let{...n}=e;return n.setChatHistoryData&&n.setChatFavoritesData?(0,t.jsx)(R,{...n,setChatHistoryData:n.setChatHistoryData,setChatFavoritesData:n.setChatFavoritesData}):(0,t.jsx)(_,{...n})}function F(e){let{chatId:r}=e,{setData:i}=(0,v.useChatHistory)(),o=(0,m.useT)(),[a,s]=(0,n.useTransition)(),l=(0,x.useRouter)(),{data:{favorites:c,history:u},mutate:d}=(0,E.useServerQuerySWR)(["scoped","chats"],{},{suspense:!0});return(0,t.jsx)(A.SpinnerButton,{variant:"outline",size:"sm",className:"relative z-20",pending:a,onClick:()=>{s(async()=>{try{let e=await d({serverMutate:I({payload:{chatId:r}}),optimisticData:{favorites:c,history:u.filter(e=>e.chatId!==r)}});if(e&&e.error)throw Error(e.error);i(e=>e.filter(e=>e.chatId!==r)),g.toast.success(o("chatCard.restoreSuccess"))}catch(e){(0,T.handleChatError)(e,l)||g.toast.error(o("chatCard.restoreError"))}})},children:o("chatCard.restore")})}},905691,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.15714 0L2.33264 9.40776L1.77252 10.5H3.00001H7.00001C7.13808 10.5 7.25001 10.6119 7.25001 10.75V16H8.84288L13.6674 6.59224L14.2275 5.5H13H9.00001C8.86194 5.5 8.75001 5.38807 8.75001 5.25V0H7.15714ZM7.00001 9H4.22749L7.25001 3.1061V5.25C7.25001 6.2165 8.03351 7 9.00001 7H11.7725L8.75001 12.8939V10.75C8.75001 9.7835 7.96651 9 7.00001 9Z" fill="currentColor"/>');e.s(["Lightning",0,t])},265266,545102,e=>{"use strict";var t=e.i(509473),n=e.i(358847),r=(0,n.createServerReference)("70c65cb80584cb87b63f91b463fda3da013a006bae",n.callServer,void 0,n.findSourceMapURL,"updateProjectSettingsIcon"),i=e.i(535050),o=t,a=e.i(304649),s=e.i(802094);function l(e){let{icon:t,size:n="sm",variant:r="default",className:i}=e;return(0,o.jsx)("div",{className:(0,a.cn)("bg-v0-background-300 relative flex size-8 shrink-0 items-center justify-center text-v0-gray-900 after:absolute after:inset-0 after:mix-blend-darken dark:after:mix-blend-lighten",{"size-5 rounded-sm after:rounded-sm [&>svg]:size-2.5 text-base after:border":"xs"===n,"size-8 rounded-lg after:rounded-lg [&>svg]:size-4 text-base after:border":"sm"===n,"size-12 rounded-xl after:rounded-xl [&>svg]:size-4 text-xl shadow-sm":"lg"===n},"menu-item"===r&&"size-4 bg-transparent text-v0-gray-900 after:hidden group-hover:text-v0-gray-1000 group-focus:text-v0-gray-1000 [&>svg]:size-4",i),children:(0,o.jsx)(s.IconPickerIcon,{name:t})})}e.s(["ProjectIcon",()=>l],545102);var c=e.i(176248),u=e.i(762585),d=a,p=e.i(651219),h=e.i(743124),f=e.i(118376);let m=(0,p.default)(()=>e.A(343828).then(e=>e.IconPicker),{loadableGenerated:{modules:[970863]},loading:()=>(0,t.jsx)(u.Skeleton,{className:"size-12 rounded-xl"})}),g=(0,p.default)(()=>e.A(343828).then(e=>e.IconPickerContent),{loadableGenerated:{modules:[970863]},loading:()=>(0,t.jsx)(i.IconPickerSkeleton,{})});function v(e){let{projectId:n,icon:i,color:o,size:a="lg",readOnly:s,isNewPage:u=!1,onSelect:p,random:v}=e,[x,y]=(0,h.useState)(!1),[b,w]=(0,h.useState)(!1),[j,C]=(0,h.useState)({name:(0,f.cleanIconName)(i),color:null!=o?o:""});return(0,h.useEffect)(()=>{C({name:(0,f.cleanIconName)(i),color:null!=o?o:""})},[i,o]),(0,t.jsx)(m,{random:v,icon:j,onValueChange:e=>{p&&p(e.name),C(e),w(!0),u||(0,h.startTransition)(()=>{r(n,e.name,e.color)})},trigger:(0,t.jsx)(c.Button,{className:(0,d.cn)("aspect-square p-0","xs"===a&&"size-5 rounded-sm","sm"===a&&"size-8 rounded-lg","lg"===a&&"size-12 rounded-xl"),"data-testid":"project-icon-picker",disabled:s,onFocus:()=>w(!!b),onMouseEnter:()=>w(!1),tooltip:s?void 0:{open:!b&&x,onOpenChange:y,content:"Change icon"},variant:"ghost",children:(0,t.jsx)(l,{color:j.color,icon:j.name,size:"lg"})}),children:(0,t.jsx)(g,{})})}e.s(["ProjectIconPicker",()=>v],265266)},912821,79776,e=>{"use strict";e.s(["ProjectPageTitle",()=>m],912821);var t=e.i(509473),n=e.i(743124),r=e.i(403055),i=e.i(543017),o=e.i(375462),a=e.i(432539),s=e.i(176248);e.i(563948);var l=e.i(407562),c=e.i(120485),u=e.i(358847),d=(0,u.createServerReference)("40e0038d6bbc5c4ca4f1fa19062471f7b2f82b574c",u.callServer,void 0,u.findSourceMapURL,"renameProject");e.s(["renameProject",()=>d],79776);var p=e.i(979865),h=e.i(183673),f=e.i(365290);function m(e){let{initialTitle:u,projectId:m,canEditProjectName:g}=e,{projectName:v,updateProjectName:x}=(0,h.useProjectName)(),[y,b]=(0,n.useState)(v||u),[w,j]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!1),[S,N]=(0,n.useState)(!1),E=(0,p.useRouter)(),D=(0,n.useRef)(v||u),I=(0,n.useRef)(null);(0,n.useEffect)(()=>{w||(b(v||u),D.current=v||u)},[v,u,w]),(0,n.useEffect)(()=>{var e;w&&(null==(e=I.current)||e.focus())},[w]);let A=()=>{g&&(j(!0),N(!1),D.current=y)},T=()=>{j(!1),N(!1),b(D.current)};async function M(e){k(!0);let t=e.get("name"),n=D.current;if(j(!1),b(t),t===n)return void k(!1);x(t),l.toast.success("Renamed project");try{let e=await d({projectId:m,name:t});if(!("success"in e)&&e.error)throw Error(e.error)}catch(e){x(n),b(n),j(!0),(0,c.handleChatError)(e,E,"Failed to rename project")||l.toast.error("Failed to rename project")}k(!1)}let L=(0,t.jsxs)("div",{className:"relative z-10 h-8 min-w-4",children:[(0,t.jsx)("input",{autoComplete:"off",className:(0,r.cn)("absolute inset-0 h-8 max-w-96 translate-y-[0.5px] whitespace-pre border-b text-xl font-semibold leading-relaxed tracking-tight focus:border-v0-gray-900! focus:outline-hidden",!w&&"hidden"),"data-1p-ignore":!0,disabled:!w,id:"name",name:"name",onChange:e=>b(e.target.value),onKeyDown:e=>{"Escape"===e.key&&T()},ref:I,value:y,maxLength:100}),(0,t.jsx)("button",{type:"button",disabled:!g,onClick:A,className:(0,r.cn)("size-fit min-w-0 max-w-72 overflow-hidden truncate text-left text-xl font-semibold leading-relaxed tracking-tight sm:max-w-96",g?"cursor-pointer":"pointer-events-none",w&&"invisible"),id:"name",children:(0,t.jsx)("h1",{className:(0,r.cn)("truncate whitespace-pre",!g&&"pointer-event-auto"),children:y})})]}),P=w?(0,t.jsxs)("div",{className:"mb-0.5 flex gap-2",style:{...(0,f.transitionStyles)(["transform","opacity"]),transform:"translateX(0)",opacity:1},children:[(0,t.jsx)("div",{children:(0,t.jsx)(s.Button,{"aria-label":"Update",className:"size-7",disabled:C,type:"submit",variant:"ghost",children:(0,t.jsx)(i.Check,{className:"size-4"})})}),(0,t.jsx)(s.Button,{"aria-label":"Cancel",className:"size-7",onClick:T,onTouchStart:T,type:"button",variant:"ghost",children:(0,t.jsx)(o.Cross,{className:"size-4"})})]}):(0,t.jsx)(s.Button,{"aria-label":"Edit Project Name",className:(0,r.cn)("absolute -right-9 mb-0.5 inline-flex size-7",!S&&"pointer-events-none"),onClick:A,type:"button",variant:"ghost",inert:!S,style:{...(0,f.transitionStyles)(["opacity","transform"]),opacity:+!!S,transform:"translateX(".concat(S?0:-28,"px)")},children:(0,t.jsx)(a.Pencil,{className:"size-3.5"})});return(0,t.jsx)("form",{"data-is-editing":w,className:(0,r.cn)("peer",S&&"pr-9"),onSubmit:async e=>{e.preventDefault();let t=new FormData(e.currentTarget);await M(t)},onBlur:e=>{!e.currentTarget.contains(e.relatedTarget)&&w&&e.currentTarget.requestSubmit()},onMouseEnter:()=>{g&&N(!0)},onMouseLeave:()=>N(!1),children:(0,t.jsxs)("div",{className:"relative flex items-center gap-2",children:[L,P]})})}},27e3,e=>{"use strict";e.s(["ProjectNameInput",()=>I,"default",()=>L],27e3);var t=e.i(509473),n=e.i(743124),r=t,i=e.i(176248),o=e.i(909270),a=e.i(572175),s=e.i(66990),l=e.i(265266),c=e.i(118376),u=e.i(230766),d=e.i(912821);function p(e){var t;let{project:n,canMakeProjectUpdates:i,projectAuthorData:o}=e;return n&&o?(0,r.jsx)("header",{className:"w-full px-4 pb-2 pt-9",children:(0,r.jsx)("div",{className:"mx-auto w-full max-w-(--breakpoint-md)",children:(0,r.jsxs)("div",{className:"flex flex-col items-start gap-3",children:[(0,r.jsx)(l.ProjectIconPicker,{color:n.color,readOnly:!i,icon:(0,c.cleanIconName)(n.icon),projectId:n.projectId}),(0,r.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,r.jsx)(d.ProjectPageTitle,{canEditProjectName:i,initialTitle:n.name,projectId:n.projectId}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(u.AvatarUser,{size:"xs",userId:o.id}),(0,r.jsx)("span",{className:"text-sm font-medium text-v0-gray-900",children:null!=(t=o.username)?t:"Vercel User"})]})]})]})})}):(0,r.jsx)(h,{})}function h(){return(0,r.jsx)("header",{className:"bg-v0-background-100 grid auto-rows-min gap-4 border-b p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"mx-auto w-full",children:[(0,r.jsxs)("div",{className:"flex h-8 items-center gap-2 sm:h-auto",children:[(0,r.jsx)(s.Separator,{className:"bg-v0-alpha-400 mr-2 h-6 sm:hidden",orientation:"vertical"}),(0,r.jsx)(i.Button,{asChild:!0,className:"font-normal text-v0-gray-900",size:"sm",variant:"link",children:(0,r.jsxs)(o.default,{href:"/chat/projects",prefetch:!0,children:[(0,r.jsx)(a.ArrowLeft,{className:"size-4"}),(0,r.jsx)("span",{children:"All Projects"})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center gap-3 pt-4",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"New Project"}),(0,r.jsx)("p",{className:"text-sm text-v0-gray-900",children:"You can attach resources and files to a project after it's been created."})]})]})})}var f=e.i(763480),m=e.i(216445),g=e.i(707974),v=e.i(979865),x=e.i(304649);e.i(541536);var y=e.i(23474);let b=y.z.object({name:y.z.string().min(2,"Name must be at least 2 characters").max(32,"Name cannot be longer than 32 characters"),description:y.z.string().max(5e3,"Description cannot be longer than 5000 characters").optional(),instructions:y.z.string().max(5e3,"Context cannot be longer than 5000 characters").optional()});var w=e.i(589910),j=e.i(397314);e.i(563948);var C=e.i(407562),k=e.i(211976),S=l,N=e.i(51940),E=e.i(667660),D=e.i(538553);let I=e=>{let{name:n,onChange:r,errors:i,placeholder:o="New sidebar",disabled:a=!1}=e;return(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(g.Label,{className:(0,x.cn)((null==i?void 0:i.name)&&"text-v0-red-700"),htmlFor:"name",children:["Name",(0,t.jsx)("span",{className:"text-v0-red-700",children:"*"})]}),(0,t.jsx)(f.Input,{autoComplete:"off",className:(0,x.cn)((null==i?void 0:i.name)&&"border-v0-red-700"),disabled:a,id:"name",maxLength:32,minLength:2,name:"name",onChange:r,placeholder:o,required:!0,value:n}),(null==i?void 0:i.name)&&(0,t.jsx)("p",{className:"text-xs text-v0-red-700",children:i.name[0]})]})},A=e=>{let{description:n,onChange:r,errors:i,disabled:o}=e;return(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(g.Label,{className:(0,x.cn)((null==i?void 0:i.description)&&"text-v0-red-700"),htmlFor:"description",children:"Description (optional)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Textarea,{asChild:!0,children:(0,t.jsx)(N.ResizableTextArea,{autoComplete:"off",className:(0,x.cn)("pb-8",(null==i?void 0:i.description)&&"border-v0-red-700"),id:"description",maxLength:5e3,name:"description",onChange:r,placeholder:"Describe what this project is going to be used for...",value:n,minHeight:120,maxHeight:384,disabled:o})}),(0,t.jsx)(w.InputCounter,{className:"absolute inset-x-1 bottom-2.5",count:n.length,max:5e3,message:"Description cannot be longer than 500 characters",messageThreshold:5e3})]}),(null==i?void 0:i.description)&&(0,t.jsx)("p",{className:"text-xs text-v0-red-700",children:i.description[0]})]})},T=e=>{let{instructions:n,onChange:r,errors:i,disabled:o}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(g.Label,{className:(0,x.cn)((null==i?void 0:i.instructions)&&"text-v0-red-700"),htmlFor:"instructions",children:"Context (optional)"})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Textarea,{asChild:!0,children:(0,t.jsx)(N.ResizableTextArea,{autoComplete:"off",className:(0,x.cn)("pb-4",(null==i?void 0:i.instructions)&&"border-v0-red-700"),id:"instructions",maxLength:5e3,name:"instructions",onChange:r,placeholder:"We're building a new sidebar for...",value:n,minHeight:120,maxHeight:384,disabled:o})}),(0,t.jsx)(w.InputCounter,{className:"absolute inset-x-1 bottom-2.5",count:n.length,max:5e3,message:"For larger context, consider using sources on the project page.",messageThreshold:5e3})]}),(null==i?void 0:i.instructions)&&(0,t.jsx)("p",{className:"text-xs text-v0-red-700",children:i.instructions[0]})]}),(0,t.jsx)(g.Label,{className:"text-v0-gray-900",children:"Guidelines or instructions the model will use to generate better responses to prompts."})]})},M=e=>{let{formData:n,disabled:r}=e,i=n.name.trim().length>0;return(0,t.jsx)(k.FormSpinnerButton,{className:"self-start",disabled:!i||r,size:"sm",type:"submit","data-testid":"create-project-button",children:"Create Project"})};function L(e){let{randomIcon:r}=e,{hasVercelWritePermission:i}=(0,E.useActiveScope)(),[o,a]=(0,n.useState)({}),[s,l]=(0,n.useState)({name:"",description:"",instructions:"",icon:r}),[c,u]=(0,n.useTransition)(),d=(0,v.useRouter)(),h=(0,n.useCallback)(e=>{let{name:t,value:n}=e.target;l(e=>({...e,[t]:n}))},[]),f=(0,n.useCallback)(e=>{if(e.preventDefault(),!i)return;a({});let{name:t,description:n,instructions:r,icon:o}=s,l=b.safeParse({name:t,description:n,instructions:r,icon:o});if(!l.success)return void a(l.error.flatten().fieldErrors);u(async()=>{let e=await (0,j.newProjectAction)({name:t,description:n,instructions:r,icon:o});if(!e.ok)return void a("fieldErrors"in e.error?e.error.fieldErrors:{name:[e.error.message]});C.toast.success("Project created successfully"),d.push("/chat/projects/".concat(e.value.id))})},[s,d,i]);return(0,t.jsxs)("div",{className:"bg-v0-background-100 flex min-h-screen flex-col",children:[(0,t.jsx)(p,{canMakeProjectUpdates:!0}),(0,t.jsx)("main",{className:"bg-v0-background-100 flex flex-1 flex-col overflow-auto p-4 sm:p-6",children:(0,t.jsx)("div",{className:"grid flex-1 auto-rows-min gap-4 lg:grid-cols-[600px_1fr] lg:gap-x-6 xl:gap-x-9",children:(0,t.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:f,children:[(0,t.jsx)(D.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(S.ProjectIconPicker,{onSelect:e=>l(t=>({...t,icon:e})),isNewPage:!0,color:null,readOnly:!i,icon:r,projectId:""})}),(0,t.jsx)(D.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(I,{errors:o,name:s.name,onChange:h,disabled:!i})}),(0,t.jsx)(D.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(A,{description:s.description,errors:o,onChange:h,disabled:!i})}),(0,t.jsx)(D.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(T,{errors:o,instructions:s.instructions,onChange:h,disabled:!i})}),(0,t.jsx)(D.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,t.jsx)(M,{formData:s,isPending:c,disabled:!i})})]})})})]})}},626119,e=>{"use strict";e.s(["QuickProjectCreateModal",()=>g,"useQuickProjectCreateDialog",()=>m]);var t=e.i(509473),n=e.i(176248),r=e.i(743124),i=e.i(914483),o=e.i(297239),a=e.i(46601),s=e.i(27e3),l=e.i(686832),c=e.i(921),u=e.i(92479),d=e.i(761033),p=e.i(979865),h=e.i(667660),f=e.i(538553);function m(){let[e,t]=(0,i.useGetSet)("showQuickProjectCreateDialog",!1);return{showQuickProjectCreateDialog:e,setShowQuickProjectCreateDialog:t}}function g(){let{hasVercelWritePermission:e}=(0,h.useActiveScope)(),{chatId:i}=(0,u.useChatId)(),g=(0,p.useRouter)(),[v,x]=(0,r.useState)({}),[y,b]=(0,r.useState)(""),{showQuickProjectCreateDialog:w,setShowQuickProjectCreateDialog:j}=m(),[C,k]=(0,r.useState)(!1),S=(0,o.useT)(),N=(0,r.useCallback)(e=>{i?(0,d.assignProjectToChat)({chatId:i,projectId:e}):g.push("/chat/projects/".concat(e))},[i,g]),E=(0,r.useCallback)(async t=>{if(t.preventDefault(),!e)return;x({}),k(!0);let n=await (0,c.createProject)({projectName:y,chatId:i,onSuccess:e=>{N(e),j(!1),b("")}});n.ok||x({name:[n.error]}),k(!1)},[y,i,N,j,e]);return(0,t.jsxs)(l.Modal,{onOpenChange:j,open:w,responsive:!1,children:[(0,t.jsx)(l.ModalHeader,{children:(0,t.jsx)(l.ModalTitle,{children:S("quickProjectCreateDialog.title")})}),(0,t.jsx)(l.ModalContent,{children:(0,t.jsx)("form",{className:"flex flex-col gap-6",onSubmit:E,children:(0,t.jsx)(f.RbacTooltip,{show:!e,requiredRole:"V0Builder",children:(0,t.jsx)(s.ProjectNameInput,{name:y,onChange:e=>b(e.target.value),errors:v,placeholder:S("quickProjectCreateDialog.inputPlaceholder"),disabled:C||!e})})})}),(0,t.jsxs)(l.ModalFooter,{children:[(0,t.jsx)(l.ModalClose,{asChild:!0,children:(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",children:S("quickProjectCreateDialog.cancel")})}),(0,t.jsx)(f.RbacTooltip,{show:!e,requiredRole:"V0Builder",children:(0,t.jsx)(n.Button,{"data-testid":"confirm-delete-message",disabled:C||!e,onClick:E,size:"sm",children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.IconSpinner,{className:"size-4"}),S("quickProjectCreateDialog.creating")]}):S("quickProjectCreateDialog.create")})})]})]})}},529660,e=>{"use strict";e.s(["NewProjectButton",()=>y]);var t=e.i(509473),n=e.i(176248),r=e.i(304649),i=e.i(909270),o=e.i(905691),a=e.i(799912),s=e.i(297239),l=e.i(206037),c=e.i(762585),u=e.i(667660),d=e.i(626119),p=e.i(696871),h=e.i(921),f=e.i(743124),m=e.i(211976);e.i(563948);var g=e.i(407562);e.i(904347);var v=e.i(37737),x=e.i(538553);function y(e){let{variant:y,onAfterClick:b,className:w,numProjects:j,quickCreate:C=!1,projectName:k,onSuccess:S,assignToChatId:N,withIcon:E,...D}=e,I=(0,s.useT)(),{activeScope:A,hasVercelWritePermission:T}=(0,u.useActiveScope)(),{planSlug:M}=(0,l.usePlanInfo)(!0,null==A?void 0:A.id),[L,P]=(0,f.useState)(!1),R=M&&("v0-level0"!==M||j<p.MAX_PROJECTS_FOR_FREE_USERS),{setShowQuickProjectCreateDialog:_}=(0,d.useQuickProjectCreateDialog)(),O=(0,f.useCallback)(async()=>{if(!k||!T)return;P(!0);let e=await (0,h.createProject)({projectName:k,onSuccess:S,chatId:N});e.ok||g.toast.error(e.error),P(!1)},[k,S,N,T]);return R||void 0!==M?R?C&&k?(0,t.jsx)(x.RbacTooltip,{show:!T,requiredRole:"V0Builder",children:(0,t.jsxs)(m.SpinnerButton,{className:(0,r.cn)(w),pending:L,onClick:O,size:"sm",variant:y,disabled:!T||D.disabled,...D,children:[E&&(0,t.jsx)(a.Plus,{}),I("project.createDialog.newProjectButton")]})}):C?(0,t.jsx)(x.RbacTooltip,{show:!T,requiredRole:"V0Builder",children:(0,t.jsxs)(n.Button,{className:(0,r.cn)(w),onClick:()=>{_(!0)},size:"sm",variant:y,disabled:!T||D.disabled,...D,children:[E&&(0,t.jsx)(a.Plus,{}),I("project.createDialog.newProjectButton")]})}):(0,t.jsx)(x.RbacTooltip,{show:!T,requiredRole:"V0Builder",children:(0,t.jsx)(n.Button,{className:(0,r.cn)(w),size:"sm",variant:y,disabled:!T||D.disabled,...D,asChild:!0,children:(0,t.jsxs)(i.default,{className:(0,r.cn)(w),href:"/chat/projects/new",onClick:b,children:[E&&(0,t.jsx)(a.Plus,{}),I("project.createDialog.newProjectButton")]})})}):(0,t.jsxs)(n.Button,{className:(0,r.cn)(w),"data-testid":"new-project-upgrade-button",onClick:()=>{(0,v.openDialog)({type:"upgradePlan"}),null==b||b()},size:"sm",type:"button",children:[(0,t.jsx)(o.Lightning,{}),I("project.createDialog.upgradePlan")]}):(0,t.jsx)(c.Skeleton,{className:(0,r.cn)("h-8 w-24",w)})}},60425,914897,e=>{"use strict";e.s(["ProjectsDropdown",()=>S],60425);var t=e.i(509473),n=e.i(743124),r=e.i(556355),i=e.i(919639),o=e.i(176248),a=e.i(529660),s=e.i(563152),l=e.i(427286),c=e.i(144258),u=e.i(276507),d=e.i(304649),p=e.i(686832),h=e.i(183673),f=e.i(53223),m=e.i(297239),g=e.i(802094),v=e.i(70165),x=e.i(118376),y=e.i(783069),b=e.i(209819),w=e.i(449381),j=e.i(479273),C=e.i(120282);function k(e){var n;let{onClose:r,quickCreate:i=!1}=e,o=(0,m.useT)(),{title:s}=(0,b.useChatMetadata)(),l=(0,w.useActiveBlockState)();return(0,t.jsx)("div",{className:"flex h-full items-center justify-center p-1 sm:p-2",children:(0,t.jsx)(u.Empty,{className:"bg-v0-background-200 w-full rounded-md border border-v0-gray-200 p-2",children:(0,t.jsxs)(u.EmptyContent,{className:"flex flex-col items-center space-y-4 p-4",children:[(0,t.jsxs)("span",{className:"flex flex-col items-center justify-between space-y-4",children:[(0,t.jsx)(u.EmptyIcon,{className:"bg-v0-background-100 mx-auto text-v0-gray-500",children:(0,t.jsx)(c.FolderClosed,{})}),(0,t.jsxs)("span",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsx)(u.EmptyTitle,{children:o("project.dropdown.noProjects")}),(0,t.jsx)(u.EmptyDescription,{className:"text-balance text-center text-v0-gray-500",children:o("project.dropdown.createProject")})]})]}),(0,t.jsx)(a.NewProjectButton,{onAfterClick:r,numProjects:0,quickCreate:i,projectName:null!=(n=null==l?void 0:l.meta.title)?n:s})]})})})}function S(e){let{projectName:c,chatId:u,disabled:b,onLoggedOutClick:w,modalClassName:S,triggerButton:N,handleProjectSelect:E,variant:D="default",className:I,quickCreate:A=!1,onSuccess:T,align:M="start"}=e,{projects:L,selectedProjectId:P,setSelectedProjectId:R}=(0,h.useProjectsForUser)(),[_,O]=(0,n.useState)(!1),[F,B]=(0,n.useState)(!1),V=(0,v.useIsMobile)(),z=(0,m.useT)(),{locale:H}=(0,j.useLocale)(),U=()=>{O(!1),B(!1)},G=e=>{R((null==e?void 0:e.projectId)||null),U(),(0,f.track)("SelectProject",{projectId:(null==e?void 0:e.projectId)||null}),null==E||E(e?{projectId:e.projectId,name:e.name,settings:{icon:e.icon||void 0,color:e.color||void 0},vercelProjectId:e.vercelProjectId,creatorId:e.creatorId}:null)},W=P&&L.find(e=>e.projectId===P),q=N||(0,t.jsx)(o.Button,{"aria-label":"Select project",className:(0,d.cn)("flex h-7 max-w-[124px] justify-start gap-0.5 rounded-md border-none bg-v0-gray-100 pr-1.5 text-[12px] transition-colors hover:bg-v0-gray-200 hover:text-v0-gray-1000 has-[>svg]:pr-1.5 sm:text-[13px]",{"text-v0-gray-900":!W},H===C.esLocaleInfo.iso639?"sm:max-w-[220px]":"sm:max-w-[200px]"),disabled:b,size:"sm",variant:"secondary",children:W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.IconPickerIcon,{name:(0,x.cleanIconName)(W.icon)}),(0,t.jsx)("span",{className:"ml-1 truncate",children:W.name}),(0,t.jsx)(s.ChevronDownSmall,{})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"sm:hidden",children:z("project.noProjectSelectedMobile")}),(0,t.jsx)("span",{className:"hidden sm:inline",children:z("project.noProjectSelected")}),(0,t.jsx)(s.ChevronDownSmall,{})]})}),Z=(0,n.useMemo)(()=>(0,y.toSorted)(L,(e,t)=>e.projectId===P?-1:+(t.projectId===P)).map(e=>(0,t.jsxs)("button",{className:"flex w-full items-center justify-between rounded-md px-2 py-2.5 hover:bg-v0-gray-100",onClick:()=>G(P===e.projectId?null:e),children:[(0,t.jsxs)("span",{className:"flex min-w-0 flex-1 items-center",children:[(0,t.jsx)("div",{className:"[&>svg]:size-4",children:(0,t.jsx)(g.IconPickerIcon,{name:(0,x.cleanIconName)(e.icon)})}),(0,t.jsx)("span",{className:"ml-2 max-w-[200px] truncate",children:e.name})]}),P===e.projectId?(0,t.jsxs)("span",{className:"flex shrink-0 items-center text-v0-gray-900",children:[(0,t.jsx)(i.Check,{className:"h-4 w-4 group-hover:hidden"}),(0,t.jsx)("span",{className:"hidden group-hover:inline",children:z("project.dropdown.unselect")})]}):(0,t.jsx)("span",{className:"hidden shrink-0 text-v0-gray-900 group-hover:inline",children:z("project.dropdown.select")})]},e.projectId)),[L,P]),K=(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsx)("div",{className:"max-h-[400px] space-y-2 overflow-y-auto text-left",children:Z}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(a.NewProjectButton,{assignToChatId:u,className:"w-full",onAfterClick:U,size:"sm",variant:"secondary",numProjects:L.length,quickCreate:A,projectName:c,onSuccess:e=>{null==T||T(e),U()}})})]}),$=0===L.length?(0,t.jsx)(k,{onClose:U,quickCreate:A}):K,Y=(0,t.jsx)(r.DropdownMenuContent,{align:M,className:"w-[350px]",side:"bottom",sideOffset:4,children:0===L.length?(0,t.jsx)(k,{onClose:U,quickCreate:A}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DropdownMenuGroup,{className:"max-h-[225px] overflow-y-auto",children:(0,y.toSorted)(L,(e,t)=>(e.projectId===P?-1:0)-(t.projectId===P?-1:0)).map(e=>(0,t.jsxs)(r.DropdownMenuItem,{className:"group pl-2 pr-3",onClick:()=>G(P===e.projectId?null:e),children:[(0,t.jsxs)("span",{className:"flex w-full max-w-[200px] items-center",children:[(0,t.jsx)(g.IconPickerIcon,{name:(0,x.cleanIconName)(e.icon)}),(0,t.jsx)("span",{className:"ml-3 min-w-0 flex-1",children:(0,t.jsx)("span",{className:"block truncate","data-testid":"project-option",children:e.name})})]}),P===e.projectId?(0,t.jsxs)("span",{className:"ml-auto flex shrink-0 items-center text-v0-gray-900",children:[(0,t.jsx)(i.Check,{className:"h-4 w-4 group-hover:hidden"}),(0,t.jsx)("span",{className:"hidden group-hover:inline",children:z("project.dropdown.unselect")})]}):(0,t.jsx)("span",{className:"ml-auto hidden shrink-0 text-v0-gray-900 group-hover:inline",children:z("project.dropdown.select")})]},e.projectId))}),(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsx)(r.DropdownMenuGroup,{className:"bg-v0-background-200",children:(0,t.jsx)(a.NewProjectButton,{onAfterClick:U,size:"sm",variant:"secondary",className:"w-full",numProjects:L.length,quickCreate:A,projectName:c,onSuccess:e=>{null==T||T(e),U()}})})]})}),J=(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",className:"relative h-7 w-4 rounded-md text-v0-gray-900",children:[(0,t.jsx)(l.ChevronUpDown,{}),(0,t.jsx)("div",{className:"absolute -inset-x-2 inset-y-0"})]});return w?(0,t.jsx)("div",{onClick:w,children:q}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,d.cn)("flex w-full min-w-0 items-center gap-1 md:hidden",I),children:["split"===D?q:null,(0,t.jsx)(p.Modal,{onOpenChange:O,open:_&&V,trigger:"split"===D?J:q,className:S,children:(0,t.jsx)(p.ModalContent,{className:(0,d.cn)("max-h-[80vh]",{"overflow-y-auto":L.length>0}),children:$})})]}),(0,t.jsx)("div",{className:(0,d.cn)("hidden w-full min-w-0 md:block",I),children:(0,t.jsxs)(r.DropdownMenu,{onOpenChange:B,open:F&&!V,children:["default"===D?(0,t.jsx)(r.DropdownMenuTrigger,{asChild:!0,className:"max-w-[200px]",children:q}):null,"split"===D?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[q,(0,t.jsx)(r.DropdownMenuTrigger,{asChild:!0,children:J})]}):null,Y]})})]})}e.s(["useReassignProject",()=>L],914897);var N=b,E=e.i(92479),D=n;e.i(563948);var I=e.i(407562),A=e.i(667660),T=e.i(120485),M=e.i(761033);function L(){let{project:e,setMetadata:t}=(0,N.useChatMetadata)(),{chatId:n}=(0,E.useChatId)(),{activeScope:r}=(0,A.useActiveScope)(),[i,o]=(0,D.useTransition)();return{reassignPending:i,handleReassignProject:(0,D.useCallback)(i=>{var a,s;if(!n||!r)return;let l=e?{...e}:void 0;t({project:i?{projectId:i.projectId,name:i.name,settings:{color:(null==(a=i.settings)?void 0:a.color)||null,icon:(null==(s=i.settings)?void 0:s.icon)||null},vercelProjectId:i.vercelProjectId,isCreator:i.creatorId===r.id}:void 0}),o(async()=>{let e=await (0,M.assignProjectToChat)({chatId:n,projectId:(null==i?void 0:i.projectId)||null});e.ok||((0,T.handleChatError)(e.error)||I.toast.error("Something went wrong. Please try again."),t({project:l}))})},[n,t,e,r])}}},184402,e=>{"use strict";var t=e.i(32170),n=e.i(403055),r=e.i(346970);let i="/chat/api/scopes/user";function o(){let{expectUser:e}=(0,t.useUser)(),{data:o,mutate:a}=(0,r.default)(e?i:null,n.fetcher);return{user:o,mutate:a}}e.s(["useVercelUser",()=>o])},491320,779647,e=>{"use strict";var t=e.i(743124),n=e.i(837062),r=e.i(184402),i=e.i(906261);function o(){let{user:e}=(0,r.useVercelUser)(),{scopes:o}=(0,n.useScopes)(),a=(0,t.useMemo)(()=>o?o.filter(e=>!(0,i.isUserScope)(e)):[],[o]);return(0,t.useMemo)(()=>{var t;return null==(t=a.find(t=>t.id===(null==e?void 0:e.defaultTeamId)))?void 0:t.slug},[a,e])}e.s(["useDefaultTeam",()=>o],491320);var a=e.i(674523),s=e.i(242759),l=e.i(375465);function c(e){let{integrationIds:t,isEnabled:n}=e,{aie:r}=(0,s.useFlags)(),i=new URLSearchParams,o=t.filter(e=>"blob"!==e);i.set("integrationIds",o.join(","));let{data:c,error:u,mutate:d}=(0,l.default)(n&&o.length?"/chat/api/integrations/marketplace/options?".concat(i.toString()):null,async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch integration options data");return t.json()});return{integrations:[...((null==c?void 0:c.integrations)||[]).filter(e=>!["upstash-vector","upstash-qstash"].includes(e.slug)&&(r||!a.INTEGRATION_NAME_TO_CATEGORY[e.name].includes("ai"))),...t.includes("blob")?[{id:"blob",slug:"blob",name:a.STORE_INFO.blob.title,description:a.STORE_INFO.blob.description,icon:a.STORE_INFO.blob.icon}]:[]],isLoading:void 0===c,error:u||null,refetch:d}}e.s(["useIntegrationOptions",()=>c],779647)},726988,e=>{"use strict";var t=e.i(346970),n=e.i(183673),r=e.i(743124);function i(e){let{vercelProjectId:i,v0ProjectId:o,refreshInterval:a=0}=e,{refetchVercelProject:s}=(0,n.useVercelProject)({v0ProjectId:o}),l=new URLSearchParams;l.set("projectId",null!=i?i:"");let{data:c,error:u,isLoading:d,mutate:p}=(0,t.default)(i?"/chat/api/integrations/marketplace/storage?".concat(l.toString()):null,async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch storage stores");return t.json()},{refreshInterval:a,revalidateOnReconnect:!0,keepPreviousData:!0});return{stores:{data:(0,r.useMemo)(()=>({marketplaceStores:(null==c?void 0:c.marketplaceStores)||[],nativeStores:(null==c?void 0:c.nativeStores)||[]}),[null==c?void 0:c.marketplaceStores,null==c?void 0:c.nativeStores]),isLoading:d,error:u||null,refetch:async()=>{await Promise.all([p(),s()])}},isLoading:d,error:u||null,refetch:async()=>await Promise.all([p(),s()])}}e.s(["useConnectedIntegrations",()=>i])},481498,983893,448199,710227,433743,434673,950955,309811,e=>{"use strict";e.s(["IntegrationOptions",()=>eZ,"IntegrationOptionsSkeleton",()=>eq],481498);var t=e.i(509473),n=e.i(376346),r=e.i(176248),i=e.i(992879),o=e.i(779647),a=e.i(726988),s=e.i(743124),l=e.i(674523),c=e.i(242759),u=e.i(762585),d=e.i(660348),p=e.i(230125),h=e.i(276507),f=e.i(53223),m=e.i(304649);e.s(["IntegrationSplitButton",()=>eC],433743);var g=t,v=r,x=i,y=e.i(245294),b=e.i(799912),w=e.i(270370),j=e.i(556355);e.i(563948);var C=e.i(407562),k=c,S=e.i(211976),N=a,E=e.i(209819),D=e.i(92479),I=e.i(921),A=e.i(183673),T=e.i(196269),M=e.i(472166),L=l,P=f;e.s(["default",()=>en,"useEnvModal",()=>et],448199);var R=t,_=s,O=e.i(686832),F=e.i(763480),B=e.i(358847),V=(0,B.createServerReference)("407426fb90f756d4eaf0e3e55841d834cf980d81ff",B.callServer,void 0,B.findSourceMapURL,"createEnvVars");e.s(["createEnvVars",()=>V],983893);var z=e.i(346970),H=S,U=A,G=D,W=e.i(583965),q=r,Z=b,K=e.i(922106),$=E,Y=C,J=e.i(667660),Q=e.i(538553),X=e.i(120485);let ee={create:"Add Environment Variables",edit:"Edit Environment Variables",missing:"Missing Environment Variables"};function et(){var e;let{data:t,mutate:n}=(0,z.default)("showEnvModal",null,{fallbackData:!1}),{data:r,mutate:i}=(0,z.default)("envModalData",null,{fallbackData:{mode:"create",projectId:"",variables:[{key:"",value:""}]}}),o=null!=(e=null==r?void 0:r.variables)?e:[{key:"",value:""}],a=e=>{var t;i({...r,projectId:null!=(t=null==r?void 0:r.projectId)?t:"",variables:e})};return{showEnvModal:t,setShowEnvModal:n,envModalData:r,setEnvModalData:i,envVars:o,setEnvVars:a}}function en(e){let{v0ProjectId:t}=e,{hasVercelWritePermission:n}=(0,J.useActiveScope)(),{project:r,title:i}=(0,$.useChatMetadata)(),o=null!=t?t:null==r?void 0:r.projectId,{showEnvModal:a,setShowEnvModal:s,envModalData:l,setEnvModalData:c,envVars:u,setEnvVars:d}=et(),p=null==l?void 0:l.mode,{refetchVercelProject:h}=(0,U.useVercelProject)({v0ProjectId:o}),[f,m]=(0,_.useTransition)(),{refresh:g}=(0,W.useBrowserFrame)(),{chatId:v}=(0,G.useChatId)(),[x,y]=(0,_.useState)(!1),b=async e=>{y(!0);try{let t=await fetch("/chat/api/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Generated from v0.app chat"})});if(!t.ok)throw Error("Failed to generate API key");let n=await t.json();Y.toast.success("API key generated successfully"),w(e,"value",n.fullKey)}catch(e){console.error("Error generating API key:",e),Y.toast.error("Failed to generate API key")}finally{y(!1)}},w=(e,t,n)=>{let r=[...u];r[e]={...r[e],[t]:n},d(r)},j=e=>{d([...u,{key:"",value:""}])},C=e=>{let t=[...u];t.splice(e,1),d(t.length?t:[{key:"",value:""}])},k=e=>{let t=e.split(/\r?\n/).filter(e=>e.trim()&&!e.trim().startsWith("#")),n=[];for(let e of t){let t=e.match(/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/);if(t){let[,e,r=""]=t;(r&&r.startsWith('"')&&r.endsWith('"')||r.startsWith("'")&&r.endsWith("'"))&&(r=r.substring(1,r.length-1)),n.push({key:e,value:r})}}return n.length?n:t.map(e=>({key:e,value:""}))},S=(e,t,n)=>{let r=e.clipboardData.getData("text");if("key"===n){e.preventDefault();let n=k(r);if(n.length>0){let e=[...u];e.splice(t,1,...n),d(e)}}},N=()=>{m(async()=>{if(!l||!n)return;let e=u.filter(e=>""!==e.key.trim());if(0===e.length)return void Y.toast.error("At least one environment variable with a key is required");let t=await V({envVars:e,v0ProjectId:l.projectId,autoCreateVercelProject:!0,chatId:v,autoCreateV0Project:!0,autoCreateV0ProjectName:(null==r?void 0:r.name)||i});if(t.success){var a;Y.toast.success("Environment variables saved successfully"),null==(a=l.onSave)||a.call(l,e)}else{(0,X.handleChatError)(t.error)||Y.toast.error(t.error);return}h(),s(!1),c({mode:"create",projectId:o,variables:[{key:"",value:""}]}),d([{key:"",value:""}]),g()})};return(0,R.jsx)(O.Modal,{open:a,onOpenChange:()=>{s(!a),d([{key:"",value:""}]),c({mode:"create",projectId:o,variables:[{key:"",value:""}]})},children:(0,R.jsxs)("form",{action:N,children:[(0,R.jsxs)(O.ModalHeader,{children:[(0,R.jsx)(O.ModalTitle,{className:"flex items-center gap-2 text-xl font-medium",children:(0,R.jsx)("span",{children:p?(0,R.jsx)("span",{children:ee[p]}):(0,R.jsx)("span",{children:"Add Environment Variables"})})}),"create"===p&&(0,R.jsx)(O.ModalDescription,{className:"text-v0-gray-900 text-left",children:"Environment variables will be encrypted and stored securely on Vercel."})]}),(0,R.jsxs)(O.ModalContent,{children:["missing"===p&&(0,R.jsx)("p",{className:"text-v0-gray-900 mb-4 text-[15px]",children:"The functionality of this app will be limited without the following environment variables:"}),(0,R.jsx)("div",{className:"max-h-[60vh] space-y-3 overflow-y-auto pr-2",children:u.map((e,t)=>{let r="V0_API_KEY"===e.key&&""===e.value;return(0,R.jsxs)("div",{className:"flex items-start gap-3",children:[(0,R.jsx)("div",{className:"flex-1",children:(0,R.jsx)(Q.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,R.jsx)(F.Input,{value:e.key,onChange:e=>w(t,"key",e.target.value),onPaste:e=>S(e,t,"key"),placeholder:"API_KEY",className:"h-9",disabled:!n})})}),(0,R.jsx)("div",{className:"flex-1",children:(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(Q.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,R.jsx)(F.Input,{value:e.value,onChange:e=>w(t,"value",e.target.value),onPaste:e=>S(e,t,"value"),placeholder:"my-api-key",className:"h-9",disabled:x||!n,type:"password"})}),r&&(0,R.jsx)(Q.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,R.jsx)(H.SpinnerButton,{type:"button",variant:"outline",size:"sm",onClick:()=>b(t),pending:x,className:"absolute right-1 top-1 h-7 text-xs px-2",disabled:!n,children:"Generate"})})]})}),(0,R.jsx)(Q.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,R.jsx)(q.Button,{type:"button",variant:"ghost",size:"sm",onClick:e=>{e.shiftKey?d([{key:"",value:""}]):C(t)},className:"h-9 w-9 shrink-0",disabled:x||!n,children:(0,R.jsx)(K.Trash,{className:"text-v0-gray-900 h-4 w-4"})})})]},t)})}),(0,R.jsx)("div",{className:"flex justify-between pt-2",children:(0,R.jsx)(Q.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,R.jsxs)(q.Button,{type:"button",variant:"outline",size:"sm",onClick:j,className:"flex items-center gap-1",disabled:!n,children:[(0,R.jsx)(Z.Plus,{className:"h-4 w-4"}),"Add Variable"]})})})]}),(0,R.jsx)(O.ModalFooter,{className:"border-v0-gray-300 bg-v0-background-200 flex border-t p-4!",children:(0,R.jsx)(Q.RbacTooltip,{show:!n,requiredRole:"V0Builder",children:(0,R.jsx)(H.SpinnerButton,{size:"sm",pending:f,disabled:!n,children:"Save"})})})]})})}var er=s,ei=u,eo=W,ea=s;function es(){let[e,t]=(0,ea.useState)(!1);return(0,ea.useEffect)(()=>{t(navigator.userAgent.toLocaleLowerCase().includes("safari")&&!navigator.userAgent.toLocaleLowerCase().includes("chrome"))},[]),e}var el=e.i(620678),ec=e.i(639056),eu=B,ed=(0,eu.createServerReference)("40899401a841786fe7170f892b8763d877477a06e9",eu.callServer,void 0,eu.findSourceMapURL,"addIntrospectionMessages"),ep=e.i(753533),eh=e.i(142219),ef=e.i(490293);let em=new Map,eg=(0,ep.cacheResultById)(em,()=>({integrationTimeouts:(0,ef.atom)({})}));function ev(e){let t=eg(e);return{startTimeout:(e,n)=>{let r=eh.store.get(t.integrationTimeouts);r[e]&&window.clearTimeout(r[e]);let i=window.setTimeout(()=>{n();let r={...eh.store.get(t.integrationTimeouts)};delete r[e],eh.store.set(t.integrationTimeouts,r)},6e4);eh.store.set(t.integrationTimeouts,{...r,[e]:i})},clearTimeout:e=>{let n=eh.store.get(t.integrationTimeouts);if(n[e]){window.clearTimeout(n[e]);let r={...n};delete r[e],eh.store.set(t.integrationTimeouts,r)}}}}(0,ep.cacheResultById)(new Map,e=>({...eg(e)})),e.s(["getProjectSettingsActions",()=>ev],710227),e.i(168204);var ex=e.i(225695),ey=e.i(44337),eb=e.i(403055),ew=J,ej=Q;function eC(e){var t,n;let{integration:r,allTeamStores:i,onConnect:o,status:a,vercelProjectId:s,onStatusChange:l,source:c,starter:u,disabled:d,sendFollowUp:p=!0,stepIndex:h,envVarKeys:f,disableIntrospection:m=!1,agentStyling:R}=e,{hasVercelWritePermission:_}=(0,ew.useActiveScope)(),{es:O}=(0,k.useFlags)(),{stores:F}=(0,N.useConnectedIntegrations)({vercelProjectId:null!=s?s:void 0,refreshInterval:0}),{activeForkKey:B}=(0,D.useChatMessages)(),V=(0,E.useChatMetadata)(),z=window.location.pathname.includes("/projects/"),H=null!=(n=null==(t=V.project)?void 0:t.projectId)?n:z&&1?window.location.pathname.split("/").pop():void 0,{startTimeout:U,clearTimeout:G}=ev(null!=H?H:""),{chatId:W}=(0,D.useChatId)(),{vercelProjectWithDashboard:q,refetchVercelProject:Z}=(0,A.useVercelProject)({v0ProjectId:H}),{submit:K}=(0,M.useV0Chat)(),{refresh:$}=(0,eo.useBrowserFrame)(),{showEnvModal:Y,setShowEnvModal:J,setEnvModalData:Q}=et(),X=es(),ee=(0,ec.useSetAtom)(el.isSettingsSheetOpenAtom);(0,er.useEffect)(()=>{"manual"!==r.slug||Y||"linking_integration"!==a||l(null!=h?h:r.slug,"none")},[Y,a,r.slug,l,h]);let en=async e=>{if(d||!_)return null;if(H&&q)return{projectId:H,vercelProjectWithDashboard:q};l(null!=h?h:e,"creating_project");let t=await (0,I.createProject)({projectName:V.title,existingProjectId:H,chatId:W||"",onSuccess:()=>{},includeSuccessToast:!1});if(!t.ok)return C.toast.error(t.error),l(null!=h?h:e,"none"),null;await V.setMetadata({...V,project:{projectId:t.value.id,vercelProjectId:t.value.vercelProjectId||null,name:V.title,settings:{icon:"icon-wand-sparkles",color:null},isCreator:!0}});let n=await Z();return n?{projectId:t.value.id,vercelProjectWithDashboard:n}:(C.toast.error("Failed to fetch project data. Please try again."),l(null!=h?h:e,"none"),null)},ea=async e=>{if(!d&&_)try{l(null!=h?h:r.slug,"linking_integration");let n=await en(r.slug);if(!n)return;let{projectId:i,vercelProjectWithDashboard:o}=n,a=o.project.id;if([...F.data.marketplaceStores,...F.data.nativeStores].some(t=>t.id===e&&t.projectsMetadata.some(e=>e.projectId===a))){l(null!=h?h:r.slug,"connected_integration"),C.toast.success("Store is already connected to this project");return}let s=L.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(e=>e.has(r.slug)&&F.data.marketplaceStores.find(t=>e.has(t.product.slug))),d=await fetch("/chat/api/integrations/marketplace/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({integrationId:e,projectId:a,envVarPrefix:s?r.slug.toUpperCase():void 0})});if(!d.ok){var t;let e=await d.json();throw Error(null!=(t=e.error)?t:"Failed to connect integration")}if(F.refetch(),Z(),$(),l(null!=h?h:r.slug,"connected_integration"),(0,P.track)("ConnectExistingIntegration",{integrationId:r.id,integrationName:r.name,projectId:o.project.id}),z)return;if(m)return void l(null!=h?h:r.slug,"connected_integration");if(!p){if(l(null!=h?h:r.slug,"introspecting_db"),(0,ey.isSqlExecProviderName)(r.name)&&W){let t=await (0,T.doSqlExecution)({props:{language:"sql",source:"SQL_SCHEMA_QUERY",meta:{file:"",transaction:"false"},closed:!1,originalCode:void 0},v0ProjectId:i,initialVercelProjectId:a,operationId:"".concat(e,"-").concat(i),sqlExecProvider:r.name});if("error"in t){console.error("Failed to introspect DB:",t),l(null!=h?h:r.slug,"none");return}let n=t.stdout.join("\n");ed({chatId:W,schemaContent:n,forkKey:B})}l(null!=h?h:r.slug,"connected_integration");return}if((0,ey.isSqlExecProviderName)(r.name)){let t=await (0,T.doSqlExecution)({props:{language:"sql",source:"SQL_SCHEMA_QUERY",meta:{file:"",transaction:"false"},closed:!1,originalCode:void 0},v0ProjectId:i,initialVercelProjectId:a,operationId:"".concat(e,"-").concat(i),sqlExecProvider:r.name});C.toast.success("Integration connected successfully"),ee(!1),"error"in t?await K({action:"new",attachments:[],content:(0,ex.createMDXMessageContent)("The ".concat(r.name," instance has been connected to the [Vercel Project](").concat(o.project.url,"). We were unable to query the schema for the newly connected ").concat(r.name," instance.")),type:"added-integration",revalidateVercelEnvAndIntegrations:!0}):await K({action:"new",attachments:[],content:(0,ex.createMDXMessageContent)("The ".concat(r.name," instance has been connected to the [Vercel Project](").concat(o.project.url,"). The schema for this instance is ").concat(t.stdout.join("\n"))),type:"added-integration",workflowState:u?"add-existing-sql-db-starter":"add-existing-sql-db",revalidateVercelEnvAndIntegrations:!0})}else C.toast.success("Integration connected successfully"),ee(!1),await K({action:"new",attachments:[],content:(0,ex.createMDXMessageContent)("The ".concat(r.name," instance has been connected to the [Vercel Project](").concat(o.project.url,").")),type:"added-integration",workflowState:u||"settings"===c?"add-starter-integration":L.AI_INTEGRATION_NAMES.includes(r.name)?"add-ai":"add-nonsql-store",revalidateVercelEnvAndIntegrations:!0})}catch(e){l(null!=h?h:r.slug,"none"),C.toast.error(e instanceof Error?e.message:"Failed to connect integration")}},eu=[...i.data.marketplaceStores.filter(e=>e.product.name===r.name),...i.data.nativeStores.filter(e=>e.type===r.slug)],ep=R?"h-7 px-2":"",eh=R?"w-7 h-7 px-0":"";switch(a){case"introspecting_db":return(0,g.jsx)(S.SpinnerButton,{pending:!0,disabled:!0,variant:"secondary",size:"sm",className:ep,children:"Introspecting"});case"creating_project":return(0,g.jsx)(S.SpinnerButton,{pending:!0,disabled:!0,variant:"secondary",size:"sm",className:ep,children:"Creating project"});case"linking_integration":return(0,g.jsx)(S.SpinnerButton,{pending:!0,disabled:!0,variant:"secondary",size:"sm",className:ep,children:"manual"===r.slug?"Adding":"Connecting"});case"added_env_vars":return(0,g.jsx)(v.Button,{disabled:!0,variant:"secondary",size:"sm",className:ep,children:"Added"});case"connected_integration":return(0,g.jsx)(v.Button,{disabled:!0,variant:"secondary",size:"sm",className:ep,children:"Connected"})}return"manual"===r.slug?(0,g.jsx)(v.Button,{size:"sm",variant:"secondary",className:eh,onClick:async()=>{(0,P.track)("ClickAddIntegration",{integration:r});let e=await en(r.slug);if(!e)return void l(null!=h?h:r.slug,"none");l(null!=h?h:r.slug,"linking_integration"),await Q({mode:"missing",projectId:e.projectId,variables:(null==f?void 0:f.map(e=>({key:e,value:""})))||[],onSave:e=>{l(null!=h?h:r.slug,"added_env_vars"),(0,P.track)("AddIntegration",{integrationSlug:r.slug,source:c,chatId:W||"",envVars:e.map(e=>e.key)}),p&&!z&&K({action:"new",attachments:[],content:(0,ex.createMDXMessageContent)("The ".concat(e.map(e=>e.key).join(", ")," environment variables have been added to this project.")),type:"added-integration",workflowState:"add-env-vars",revalidateVercelEnvAndIntegrations:!0})}}),J(!0)},children:(0,g.jsx)(b.Plus,{className:"size-4"})}):i.isLoading?(0,g.jsx)(ei.Skeleton,{className:(0,eb.cn)("h-8 w-20 rounded-md",ep)}):(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)(ej.RbacTooltip,{show:!_,requiredRole:"V0Builder",children:(0,g.jsx)(v.Button,{disabled:d||!_,size:"sm",variant:"secondary",className:(0,eb.cn)("w-full\n          ".concat(eu.length>0&&O?"w-[calc(100%-34px)] rounded-r-none border-r-0":"","\n        "),ep),onClick:async()=>{l(null!=h?h:r.slug,"linking_integration"),U(r.name,()=>{l(null!=h?h:r.slug,"none")});let e=null;"blob"!==r.slug&&X&&(e=window.open("","_blank","width=1200,height=800"));let t=await en(r.slug);if(!t||!t.vercelProjectWithDashboard.dashboardProject)return void G(r.name);await o(r,t.projectId,t.vercelProjectWithDashboard.dashboardProject,e,h)},children:"Create"})}),eu.length>0&&O?(0,g.jsxs)(j.DropdownMenu,{children:[(0,g.jsx)(ej.RbacTooltip,{show:!_,requiredRole:"V0Builder",children:(0,g.jsx)(j.DropdownMenuTrigger,{asChild:!0,children:(0,g.jsx)(v.Button,{size:"sm",variant:"secondary",className:(0,eb.cn)("w-[34px] rounded-l-none px-2",eh),disabled:d||!_,children:(0,g.jsx)(y.ChevronDown,{className:"h-4 w-4"})})})}),(0,g.jsxs)(j.DropdownMenuContent,{className:"max-h-[200px] overflow-y-auto",align:"end",children:[(0,g.jsx)(ej.RbacTooltip,{show:!_,requiredRole:"V0Builder",children:(0,g.jsxs)(j.DropdownMenuItem,{onClick:async()=>{let e=window.open("","_blank","width=1200,height=800");l(null!=h?h:r.slug,"linking_integration"),U(r.name,()=>{l(null!=h?h:r.slug,"none")});let t=await en(r.slug);if(!t||!t.vercelProjectWithDashboard.dashboardProject)return void G(r.name);await o(r,t.projectId,t.vercelProjectWithDashboard.dashboardProject,e,h)},className:"gap-3 px-3",disabled:!_,children:[(0,g.jsx)(w.PlusCircle,{className:"size-4"}),(0,g.jsx)("span",{children:"Create new"})]})}),eu.map(e=>(0,g.jsx)(ej.RbacTooltip,{show:!_,requiredRole:"V0Builder",children:(0,g.jsxs)(j.DropdownMenuItem,{className:"gap-3 px-3",onClick:()=>ea(e.id),disabled:!_,children:[(0,g.jsx)(x.default,{src:L.INTEGRATION_NAME_TO_SVG[r.name]||"/placeholder.svg",alt:e.name,width:16,height:16}),(0,g.jsx)("span",{children:e.name||"Unnamed Instance"})]})},e.id))]})]}):null]})}var ek=z;function eS(){let{data:e,error:t,isLoading:n,mutate:r}=(0,ek.default)("/chat/api/integrations/marketplace/storage",async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch storage stores");return t.json()},{revalidateOnReconnect:!0});return{stores:{data:{marketplaceStores:(null==e?void 0:e.marketplaceStores)||[],nativeStores:(null==e?void 0:e.nativeStores)||[]},isLoading:n,error:t||null,refetch:r},isLoading:n,error:t||null,refetch:async()=>{await Promise.all([r()])}}}e.s(["useAllTeamIntegrations",()=>eS],434673);var eN=E,eE=e.i(449381),eD=e.i(725415),eI=t,eA=r,eT=e.i(707974),eM=e.i(743839),eL=b,eP=e.i(611176),eR=e.i(996174),e_=h,eO=u,eF=e.i(297239),eB=m;function eV(e){let{children:t,label:n,badge:r,onAdd:i,info:o,className:a}=e,s=(0,eF.useT)();return(0,eI.jsxs)("div",{className:(0,eB.cn)("flex flex-col gap-2",a),children:[(0,eI.jsxs)("div",{className:"flex h-7 items-center justify-between",children:[(0,eI.jsxs)("div",{className:"flex items-center gap-1",children:[(0,eI.jsxs)(eT.Label,{className:"text-sm font-medium text-v0-gray-1000",children:[n,r]}),o&&(0,eI.jsx)(eR.Tooltip,{content:(0,eI.jsx)("div",{className:"text-center",children:o}),children:(0,eI.jsx)(eP.InformationFillSmall,{className:"h-3 w-3",color:"gray-400"})})]}),i&&(0,eI.jsx)(eA.Button,{"aria-label":s("projectSettings.add")(n),className:"size-7 text-v0-gray-900",size:"sm",variant:"ghost",onClick:i,tooltip:{side:"bottom",content:"Add ".concat(n)},children:(0,eI.jsx)(eL.Plus,{})})]}),t]})}function ez(e){let{title:t,subtitle:n,children:r,className:i}=e;return(0,eI.jsx)(e_.Empty,{className:(0,eB.cn)("relative h-[156px] rounded-md border border-dashed border-v0-gray-300 px-8",i),children:(0,eI.jsxs)(e_.EmptyContent,{children:[t&&(0,eI.jsx)(e_.EmptyTitle,{className:"text-sm text-v0-gray-1000",children:t}),n&&(0,eI.jsx)(e_.EmptyDescription,{className:"text-pretty text-sm text-v0-gray-900",children:n}),r]})})}function eH(e){let{className:t,label:n,onClick:r,disabled:i}=e,o=(0,eF.useT)(),a=n||o("projectSettings.moreOptions"),s=r?eA.Button:"div";return(0,eI.jsxs)(s,{className:(0,eB.cn)("flex size-6 items-center justify-center text-v0-gray-900",t),size:"sm",variant:"ghost",disabled:i,onClick:r,"cmdk-item-actions":"",children:[(0,eI.jsx)(eM.MoreHorizontal,{}),(0,eI.jsx)("span",{className:"sr-only",children:a})]})}function eU(e){let{children:t,suffix:n,className:r}=e;return(0,eI.jsxs)("div",{className:(0,eB.cn)("odd:bg-v0-background-200 flex h-[58px] w-full items-center justify-between gap-2 rounded-lg p-2",r),children:[t,n]})}function eG(e){let{title:t}=e;return(0,eI.jsxs)(eV,{label:t,onAdd:()=>{},children:[(0,eI.jsxs)("div",{children:[(0,eI.jsx)(eU,{suffix:(0,eI.jsx)(eH,{}),children:(0,eI.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,eI.jsx)(eO.Skeleton,{className:"h-3 w-40"}),(0,eI.jsx)(eO.Skeleton,{className:"h-3 w-16"})]})}),(0,eI.jsx)(eU,{suffix:(0,eI.jsx)(eH,{}),children:(0,eI.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(0,eI.jsx)(eO.Skeleton,{className:"h-3 w-40"}),(0,eI.jsx)(eO.Skeleton,{className:"h-3 w-16"})]})})]}),(0,eI.jsx)(eA.Button,{size:"sm",variant:"secondary",disabled:!0,children:"Show More"})]})}e.s(["EmptyState",()=>ez,"MoreButton",()=>eH,"Section",()=>eV,"SectionListSkeleton",()=>eG],950955);var eW=e.i(66990);function eq(e){let{count:n=4}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col p-4 pb-0",children:(0,t.jsx)("div",{className:"flex h-7 w-36 items-center",children:(0,t.jsx)(u.Skeleton,{className:"h-5 w-full"})})}),(0,t.jsx)("div",{className:"flex flex-col gap-3 p-4",style:{maskImage:"linear-gradient(to bottom, black 20%, transparent 100%)"},children:Array.from({length:n}).map((e,n)=>(0,t.jsxs)("div",{className:"border-v0-alpha-400 shadow-base flex items-center justify-between gap-3 rounded-lg border-0 p-3.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Skeleton,{className:"h-8 w-8 rounded-full"}),(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsx)(u.Skeleton,{className:"h-[12px] w-24"}),(0,t.jsx)(u.Skeleton,{className:"h-[10px] w-40"})]})]}),(0,t.jsx)(u.Skeleton,{className:"h-7 w-[74px]"})]},n))})]})}function eZ(e){let{vercelProjectId:u,onIntegrationClick:g,vercelProjectName:v,teamSlug:x,isV3:y}=e,{mi:b,scp:w}=(0,c.useFlags)(),[j,C]=(0,s.useState)({}),{stores:k}=eS(),{title:S,project:N}=(0,eN.useChatMetadata)(),E=(0,eE.useActiveBlockState)(),D=window.location.pathname.includes("/projects/"),I=(e,t)=>{C(n=>({...n,[e]:t}))},{integrations:A,refetch:T}=(0,o.useIntegrationOptions)({integrationIds:l.RECOMMENDED_INTEGRATION_SLUGS,isEnabled:b||y}),{stores:M,isLoading:L,error:P,refetch:R}=(0,a.useConnectedIntegrations)({vercelProjectId:u,v0ProjectId:null==N?void 0:N.projectId,refreshInterval:0}),{connectedIntegrationItems:_,unconnectedIntegrationItems:O,missingIntegrationsItems:F}=(0,s.useMemo)(()=>{if(L)return{connectedIntegrationItems:[],unconnectedIntegrationItems:[],missingIntegrationsItems:[]};let e=new Map;M.data.marketplaceStores.forEach(t=>{t.product&&e.set(t.product.slug,{url:"https://vercel.com/".concat(x,"/").concat(v,"/stores/integration/").concat(t.id,"/settings"),type:"store"})}),M.data.nativeStores.forEach(t=>{e.set(t.type,{url:"https://vercel.com/".concat(x,"/~/stores/").concat(t.type,"/").concat(t.id,"/browser"),type:"native-store"})});let t=(null==E?void 0:E.source)?(0,eD.findIntegrationsInString)(E.source):[],n=[],r=[],i=[];return A.forEach(o=>{let a=e.get(o.slug);a?n.push({...o,connectionUrl:a.url,type:a.type}):t.includes(o.name)?i.push(o):r.push(o)}),{connectedIntegrationItems:n,unconnectedIntegrationItems:r,missingIntegrationsItems:i}},[L,M.data.marketplaceStores,M.data.nativeStores,null==E?void 0:E.source,A,x,v]);return P?(0,t.jsx)("div",{className:"flex size-full items-center justify-center p-4",children:(0,t.jsx)(h.Empty,{children:(0,t.jsxs)(h.EmptyContent,{children:[(0,t.jsx)(h.EmptyIcon,{className:"[&>svg]:text-v0-red-800!",children:(0,t.jsx)(d.Stop,{})}),(0,t.jsx)(h.EmptyTitle,{children:"Error Loading Integrations"}),(0,t.jsx)(h.EmptyDescription,{children:null==P?void 0:P.message}),(0,t.jsx)(r.Button,{size:"sm",onClick:()=>{R(),T()},children:"Retry"})]})})}):L?(0,t.jsx)(eq,{}):(0,t.jsxs)("div",{className:(0,m.cn)("grid",y&&"p-0! grid-cols-1"),children:[F.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eV,{label:"Missing Integrations",info:"These integrations are required for this project.",className:"gap-3 p-4",children:F.map(e=>(0,t.jsxs)(n.Card,{className:y?"w-full shadow-none":"",children:[(0,t.jsxs)(n.CardHeader,{className:"bg-v0-background-200 border-v0-alpha-400 flex items-center gap-2 rounded-t-lg border-b px-3 py-2 font-medium text-v0-amber-800 ",children:[(0,t.jsx)(p.Warning,{})," ",(0,t.jsx)("span",{className:"text-sm",children:"Required"})]}),(0,t.jsx)(n.CardContent,{className:(0,m.cn)("flex flex-col gap-4 p-3",y&&"gap-0"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"relative h-8 w-8 overflow-hidden rounded-full",children:(0,t.jsx)(i.default,{src:e.icon,alt:e.name,fill:!0,className:"select-none object-cover"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-v0-gray-900",children:e.description})]})]}),(0,t.jsx)(eC,{allTeamStores:k,integration:e,onConnect:async(e,t,n,r)=>{let i=l.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.slug)&&_.some(e=>t.has(e.slug)));await g(e,i,t,n,r),M.refetch(),(0,f.track)("ClickAddIntegration",{integration:e})},status:j[e.slug],vercelProjectId:u,onStatusChange:I,source:"settings",starter:S.toLowerCase().includes("starter"),sendFollowUp:!D&&!w})]})})]},e.id))}),(0,t.jsx)(eW.Separator,{})]}),_.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eV,{label:"Connected Integrations",info:"Integrations that are already connected to this project.",className:"gap-3 p-4",children:_.map(e=>(0,t.jsx)(n.Card,{className:y?"shadow-none! w-full":"",children:(0,t.jsx)(n.CardContent,{className:"border-none! flex flex-col gap-4 p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"relative h-8 w-8 overflow-hidden rounded-full",children:(0,t.jsx)(i.default,{src:e.icon,alt:e.name,fill:!0,className:"select-none object-cover"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-v0-gray-900",children:e.description})]})]}),(0,t.jsx)("a",{target:"_blank",href:e.connectionUrl,children:(0,t.jsx)(r.Button,{variant:"outline",size:"sm",children:"Manage"})})]})})},e.id))}),O.length>0&&(0,t.jsx)(eW.Separator,{})]}),O.length>0&&(0,t.jsx)(eV,{label:"Available Integrations",info:"Integrations that are available to connect to this project.",className:"gap-3 p-4",children:O.map(e=>(0,t.jsx)(n.Card,{className:y?"w-full shadow-none":"",children:(0,t.jsx)(n.CardContent,{className:(0,m.cn)("flex flex-col gap-4 p-3",y&&"gap-0"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"relative h-8 w-8 overflow-hidden rounded-full",children:(0,t.jsx)(i.default,{src:e.icon,alt:e.name,fill:!0,className:"select-none object-cover"})}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-v0-gray-900",children:e.description})]})]}),(0,t.jsx)(eC,{allTeamStores:k,integration:e,onConnect:async(e,t,n,r)=>{let i=l.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.slug)&&_.some(e=>t.has(e.slug)));await g(e,i,t,n,r),M.refetch(),(0,f.track)("ClickAddIntegration",{integration:e})},status:j[e.slug],vercelProjectId:u,onStatusChange:I,source:"settings",starter:S.toLowerCase().includes("starter"),sendFollowUp:!D&&!w})]})})},e.id))})]})}var eK=B,e$=(0,eK.createServerReference)("403403b036e39c06f323e5d0bc59a12b161719ed27",eK.callServer,void 0,eK.findSourceMapURL,"createIntegrationLinkAction");e.s(["createIntegrationLinkAction",()=>e$],309811)},967472,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.02168 4.76932C6.11619 2.33698 9.88374 2.33698 11.9783 4.76932L14.7602 7.99999L11.9783 11.2307C9.88374 13.663 6.1162 13.663 4.02168 11.2307L1.23971 7.99999L4.02168 4.76932ZM13.1149 3.79054C10.422 0.663244 5.57797 0.663247 2.88503 3.79054L-0.318359 7.5106V8.48938L2.88503 12.2094C5.57797 15.3367 10.422 15.3367 13.1149 12.2094L16.3183 8.48938V7.5106L13.1149 3.79054ZM6.49997 7.99999C6.49997 7.17157 7.17154 6.49999 7.99997 6.49999C8.82839 6.49999 9.49997 7.17157 9.49997 7.99999C9.49997 8.82842 8.82839 9.49999 7.99997 9.49999C7.17154 9.49999 6.49997 8.82842 6.49997 7.99999ZM7.99997 4.99999C6.34311 4.99999 4.99997 6.34314 4.99997 7.99999C4.99997 9.65685 6.34311 11 7.99997 11C9.65682 11 11 9.65685 11 7.99999C11 6.34314 9.65682 4.99999 7.99997 4.99999Z" fill="currentColor"/>');e.s(["Eye",0,t])},182659,e=>{"use strict";let t=(0,e.i(121793).default)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);e.s(["default",()=>t])},892815,e=>{"use strict";var t=e.i(182659);e.s(["Link2",()=>t.default])},387885,e=>{"use strict";let t=(0,e.i(121793).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>t])},177661,(e,t,n)=>{"use strict";var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))a.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e},l=e=>s(r({},"__esModule",{value:!0}),e),c={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(c,{SYMBOL_FOR_REQ_CONTEXT:()=>u,getContext:()=>d}),t.exports=l(c);let u=Symbol.for("@vercel/request-context");function d(){var e,t,n;return null!=(n=null==(t=globalThis[u])||null==(e=t.get)?void 0:e.call(t))?n:{}}},702758,(e,t,n)=>{"use strict";var r=e.i(643908),i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,l=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))s.call(e,l)||l===n||i(e,l,{get:()=>t[l],enumerable:!(r=o(t,l))||r.enumerable});return e},c=e=>l(i({},"__esModule",{value:!0}),e),u={};((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(u,{getVercelOidcToken:()=>p,getVercelOidcTokenSync:()=>h}),t.exports=c(u);var d=e.r(177661);async function p(){return h()}function h(){var e,t;let n=null!=(t=null==(e=(0,d.getContext)().headers)?void 0:e["x-vercel-oidc-token"])?t:r.default.env.VERCEL_OIDC_TOKEN;if(!n)throw Error("The 'x-vercel-oidc-token' header is missing from the request. Do you have the OIDC option enabled in the Vercel project settings?");return n}},410978,(e,t,n)=>{"use strict";var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))a.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e},l=e=>s(r({},"__esModule",{value:!0}),e),c={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(c,{getVercelOidcToken:()=>u.getVercelOidcToken,getVercelOidcTokenSync:()=>u.getVercelOidcTokenSync}),t.exports=l(c);var u=e.r(702758)},179169,(e,t,n)=>{"use strict";Object.create;var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames;Object.getPrototypeOf;var a=Object.prototype.hasOwnProperty,s=(e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))a.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e},l=e=>s(r({},"__esModule",{value:!0}),e),c={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(c,{awsCredentialsProvider:()=>d}),t.exports=l(c);var u=e.r(410978);function d(t){return async()=>{let{fromWebToken:n}=await e.A(46999);return n({...t,webIdentityToken:(0,u.getVercelOidcTokenSync)()})()}}},47101,(e,t,n)=>{"use strict";var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,n,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))a.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(s=i(t,l))||s.enumerable});return e},l=e=>s(r({},"__esModule",{value:!0}),e),c={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(c,{awsCredentialsProvider:()=>u.awsCredentialsProvider,getVercelOidcToken:()=>d.getVercelOidcToken,getVercelOidcTokenSync:()=>d.getVercelOidcTokenSync}),t.exports=l(c);var u=e.r(179169),d=e.r(410978)},155893,670895,132783,692581,170160,e=>{"use strict";e.s(["EnvVars",()=>eh],155893);var t=e.i(509473),n=e.i(743124);e.i(563948);var r=e.i(407562),i=e.i(176248),o=e.i(480814),a=e.i(967472),s=e.i(417220),l=e.i(799912),c=t,u=e.i(892815),d=e.i(5848),p=e.i(919639),h=e.i(387885),h=h,f=e.i(199098);e.i(868275),e.i(541536);var m=e.i(23474);m.z.object({teamId:m.z.string().optional(),scope:m.z.string().optional(),saml:m.z.boolean().optional(),enforced:m.z.boolean().optional()}),m.z.object({limit:m.z.object({remaining:m.z.number(),reset:m.z.number(),resetMs:m.z.number(),total:m.z.number()})}),m.z.union([m.z.object({error:m.z.object({message:m.z.string().optional().default(""),code:m.z.string().optional().default("")}).catchall(m.z.any())}),m.z.object({message:m.z.string().optional().default(""),code:m.z.string().optional().default("")}).catchall(m.z.any())]),e.i(386496),e.i(891831),e.i(47101),function(e){e.Production="production",e.Preview="preview",e.Development="development"}({});var g=function(e){return e.Plain="plain",e.Secret="secret",e.System="system",e.Encrypted="encrypted",e.Sensitive="sensitive",e}({}),v=i,x=n,y=e.i(743839),b=e.i(456915),w=e.i(846722),j=e.i(979865),C=e.i(358847),k=(0,C.createServerReference)("401ba24c557fe75b4908dbee628f4a727872371892",C.callServer,void 0,C.findSourceMapURL,"linkVercelProject");e.s(["linkVercelProject",()=>k],670895);var S=C,N=(0,S.createServerReference)("40196115da97fbc08f117273e2859ce30545f3ad3d",S.callServer,void 0,S.findSourceMapURL,"unlinkVercelProject");e.s(["unlinkVercelProject",()=>N],132783);var E=e.i(667660),D=e.i(686832),I=e.i(403055),A=e.i(346970);function T(){let{data:e,isLoading:t}=(0,A.default)("/chat/api/projects",I.fetcher);return{projects:e,isReady:!t&&void 0!==e}}e.s(["useVercelProjects",()=>T],692581);var M=e.i(276507),L=e.i(304649),P=e.i(556355),R=e.i(763480),_=e.i(187283),O=e.i(716360),F=e.i(529693),B=e.i(992771),V=r,z=e.i(211976),H=e.i(32170),U=e.i(762585);function G(e){let{envVar:t}=e;return(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium",children:"Key"}),(0,c.jsx)("p",{className:"text-v0-gray-900 break-all",children:null==t?void 0:t.key})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium",children:"Value"}),(0,c.jsx)("p",{className:"text-v0-gray-900 break-all",children:(null==t?void 0:t.type)===g.Encrypted?t.decrypted?t.value:"*** Encrypted ***":null==t?void 0:t.value})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium",children:"Targets"}),(0,c.jsx)("p",{className:"text-v0-gray-900 break-words",children:Array.isArray(null==t?void 0:t.target)?t.target.join(", "):null==t?void 0:t.target})]}),(null==t?void 0:t.comment)&&(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-medium",children:"Comment"}),(0,c.jsx)("p",{className:"text-v0-gray-900 break-words",children:t.comment})]})]})}function W(e){let{v0ProjectId:t,onClose:n,open:r,onProjectCreated:i}=e,[o,a]=(0,x.useState)(""),{activeScopeSlug:s}=(0,E.useActiveScope)(),l=(0,j.useRouter)();return t?(0,c.jsx)(D.Modal,{onOpenChange:n,open:r,children:(0,c.jsxs)("form",{action:async()=>{let e=await (0,B.createNewVercelProject)(t,o);return e.ok?"error"in await k({v0ProjectId:t,vercelProjectId:e.value.id})?void V.toast.error("Failed to link project"):void(i({id:e.value.id,name:o,url:"https://vercel.com/".concat(s,"/").concat(o),env:[]}),V.toast.success("Project created and linked successfully"),l.refresh(),n()):void V.toast.error("Failed to create project")},children:[(0,c.jsx)(D.ModalHeader,{children:(0,c.jsx)(D.ModalTitle,{children:"Create New Vercel Project"})}),(0,c.jsx)(D.ModalContent,{children:(0,c.jsx)(R.Input,{autoFocus:!0,onChange:e=>a(e.target.value),placeholder:"Project Name",required:!0,value:o})}),(0,c.jsxs)(D.ModalFooter,{children:[(0,c.jsx)(D.ModalClose,{asChild:!0,children:(0,c.jsx)(v.Button,{onClick:n,size:"sm",variant:"secondary",children:"Cancel"})}),(0,c.jsx)(z.FormSpinnerButton,{size:"sm",variant:"default",children:"Create"})]})]})}):null}function q(e){let{filteredProjects:t,searchQuery:n,setSearchQuery:r,isLoading:i,selectedProject:o,handleLinkProject:a,setShowCreateModal:s,onCreateModalOpen:l}=e,{user:h}=(0,H.useUser)(),f=(null==h?void 0:h.v0plan)==="v0-enterprise";return(0,c.jsxs)("div",{className:"flex size-full flex-col",children:[!f&&(0,c.jsxs)("div",{className:"border-v0-gray-300 flex w-full items-center border-b py-1.5 pl-4 pr-3.5",children:[(0,c.jsx)("span",{className:"text-v0-gray-900",children:(0,c.jsx)(w.MagnifyingGlass,{})}),(0,c.jsx)(R.Input,{className:"flex-1 border-none bg-inherit",onChange:e=>r(e.target.value),placeholder:"Search projects...",value:n}),(0,c.jsx)(O.AnimatePresence,{mode:"wait",children:n&&(0,c.jsx)(F.motion.button,{animate:{opacity:1},className:"sp-1 focus:outline-hidden text-v0-gray-900 hover:text-v0-gray-900",exit:{opacity:0},initial:{opacity:0},onClick:()=>r(""),children:(0,c.jsx)(_.X,{size:16})})})]}),!f&&(0,c.jsx)("div",{className:"relative flex max-h-[225px] min-h-[225px] flex-1 flex-col overflow-y-auto p-2",onWheel:e=>{e.stopPropagation()},onTouchMove:e=>{e.stopPropagation()},children:(0,c.jsx)(O.AnimatePresence,{children:i?(0,c.jsx)(K,{}):0===t.length?(0,c.jsx)(Z,{title:"No Projects Found"}):t.map(e=>(0,c.jsxs)(P.DropdownMenuItem,{className:(0,L.cn)("group flex items-center justify-between md:px-2","w-full rounded-md p-2 hover:bg-v0-gray-100 md:w-auto"),onClick:()=>a((null==o?void 0:o.id)===e.id?null:e),children:[(0,c.jsxs)("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,c.jsx)(u.Link2,{className:"size-4"}),(0,c.jsx)("span",{className:"max-w-[200px] truncate",children:e.name})]}),(null==o?void 0:o.id)===e.id?(0,c.jsxs)("span",{className:"flex shrink-0 items-center text-v0-gray-900",children:[(0,c.jsx)(p.Check,{className:"h-4 w-4 group-hover:hidden"}),(0,c.jsx)("span",{className:"hidden group-hover:inline",children:"Unlink"})]}):(0,c.jsx)("span",{className:"hidden shrink-0 font-medium text-v0-gray-900 group-hover:inline",children:"Link"})]},e.id))})}),f&&(0,c.jsx)("div",{className:"flex flex-col gap-2 p-4 text-center text-sm",children:(0,c.jsx)("span",{className:"font-medium text-v0-gray-900",children:"Enterprise customers can't connect existing Vercel projects at the moment."})}),(0,c.jsx)("div",{className:"sticky bottom-0 w-full border-t p-1.5",children:(0,c.jsxs)(v.Button,{onClick:()=>{s(!0),null==l||l()},className:"w-full gap-0.5",variant:"secondary",children:[(0,c.jsx)(d.Plus,{className:"size-4 shrink-0"}),(0,c.jsx)("span",{className:"px-1.5",children:"New Project"})]})})]})}function Z(e){let{title:t}=e;return(0,c.jsx)(M.Empty,{className:"bg-v0-background-200 flex-1 rounded-lg",children:(0,c.jsx)(M.EmptyContent,{children:(0,c.jsx)(M.EmptyTitle,{className:"text-sm text-v0-gray-900",children:t})})})}function K(){return(0,c.jsx)(c.Fragment,{children:Array.from({length:10}).map((e,t)=>(0,c.jsx)(P.DropdownMenuItem,{className:(0,L.cn)("group flex items-center justify-between md:px-2","w-full rounded-md p-2 hover:bg-v0-gray-100 md:w-auto"),disabled:!0,children:(0,c.jsxs)("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,c.jsx)(u.Link2,{className:"size-4"}),(0,c.jsx)(U.Skeleton,{className:"h-4 w-full"})]})},t))})}function $(e){let{v0ProjectId:t,currentProject:n,projects:r,readOnly:i,size:o="default",alias:a,children:s}=e,[l,u]=(0,x.useState)(n),[d,p]=(0,x.useState)(""),[m,g]=(0,x.useState)(!1),[w,C]=(0,x.useState)(!1),[S,E]=(0,x.useState)(!1),D=(0,j.useRouter)(),I=e=>{u(e),C(!1)},A=async e=>{if(!i){if(!e)return T();g(!0);try{let n=await k({v0ProjectId:t,vercelProjectId:e.id});"error"in n||!n.success||(u(e),V.toast.success("Project linked successfully"))}catch(e){V.toast.error("Failed to link project. Please try again.")}finally{C(!1),g(!1),D.refresh()}}},T=async()=>{if(!i){g(!0),u(void 0);try{let e=await N({v0ProjectId:t});"error"in e||!e.success?(u(n),V.toast.error("Failed to unlink project. Please try again.")):V.toast.success("Project unlinked successfully")}catch(e){u(n),V.toast.error("Failed to unlink project. Please try again.")}finally{C(!1),g(!1),D.refresh()}}},M=r.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())),R=l?(0,c.jsx)("div",{className:"rounded-lg p-2 text-sm sm:p-0",children:(0,c.jsxs)("div",{className:"bg-v0-background-200 flex flex-col rounded-lg text-sm",children:[s,(0,c.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsxs)("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm hover:underline",children:[(0,c.jsx)("span",{className:"font-medium",children:l.name}),(0,c.jsx)(b.ExternalSmall,{className:"size-4"})]}),a?(0,c.jsx)("a",{href:(0,L.addProtocol)(a),target:"_blank",rel:"noopener noreferrer",className:"text-v0-gray-900 flex items-center gap-1 text-sm hover:underline",children:a}):null]}),(0,c.jsxs)(P.DropdownMenu,{children:[(0,c.jsx)(P.DropdownMenuTrigger,{asChild:!0,children:(0,c.jsxs)(v.Button,{className:"relative size-8",size:"sm",variant:"ghost",disabled:i,tooltip:i?"You don't have permission to modify this project":void 0,children:[(0,c.jsx)(y.MoreHorizontal,{className:"h-4 w-4"}),(0,c.jsx)("span",{className:"sr-only",children:"Open project actions"})]})}),(0,c.jsx)(P.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:(0,c.jsxs)(P.DropdownMenuGroup,{children:[(0,c.jsx)(P.DropdownMenuItem,{asChild:!0,children:(0,c.jsxs)("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[(0,c.jsx)(h.default,{}),(0,c.jsx)("span",{children:"View on Vercel"})]})}),(0,c.jsxs)(P.DropdownMenuItem,{variant:"destructive",onClick:T,disabled:i,children:[(0,c.jsx)(f.Trash,{}),(0,c.jsx)("span",{children:"Unlink Vercel Project"})]})]})})]})]})]})}):(0,c.jsx)("div",{className:"p-2 md:p-0",children:(0,c.jsx)(v.Button,{className:"w-full","aria-label":"Add a Vercel Project",variant:"outline",disabled:m||i,size:o,type:"button",children:(0,c.jsx)("span",{children:"Add Vercel Project"})})});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(W,{v0ProjectId:t,onClose:()=>E(!1),open:S,onProjectCreated:I}),(0,c.jsx)("div",{className:"w-full min-w-0",children:l||i?R:(0,c.jsxs)(P.DropdownMenu,{onOpenChange:C,open:w,children:[(0,c.jsx)(P.DropdownMenuTrigger,{asChild:!0,children:R}),(0,c.jsx)(P.DropdownMenuContent,{align:"center",className:"w-[400px]",side:"bottom",children:(0,c.jsx)(q,{filteredProjects:M,searchQuery:d,setSearchQuery:p,isLoading:m,selectedProject:l,handleLinkProject:A,setShowCreateModal:E,onCreateModalOpen:()=>C(!1)})})]})})]})}e.s(["CreateProjectModal",()=>W,"EnvironmentVariableDetails",()=>G,"ProjectList",()=>q,"VercelProjectSelector",()=>$],170160);var Y=D,J=z,Q=C,X=(0,Q.createServerReference)("40d5024224603205ec90a53f7a60bfed4dfb6f0077",Q.callServer,void 0,Q.findSourceMapURL,"deleteEnvVars"),ee=e.i(448199),et=e.i(297239),en=e.i(950955),er=e.i(183673),ei=e.i(92479),eo=e.i(583965),ea=e.i(376346),es=L,el=E,ec=e.i(538553),eu=H;let ed="••••••••••••••••••";function ep(e){let{envVar:l,setOpenDetailsModal:c,setSelectedEnvVar:u,className:d}=e,[p,h]=(0,n.useState)(!1),f=(0,et.useT)();return(0,t.jsxs)("div",{className:(0,es.cn)("flex w-full items-center justify-between gap-2 p-3",d),children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-0.5 text-[13px] leading-5",children:[(0,t.jsx)("span",{className:"max-w-[200px] truncate font-mono sm:max-w-[300px]",children:l.key}),(0,t.jsxs)("span",{className:"inline-flex items-center",children:[p?(0,t.jsx)("code",{className:"max-w-[300px] truncate rounded-md bg-v0-gray-200 px-1",children:l.value}):(0,t.jsx)("span",{className:"tracking-widest",children:ed}),(0,t.jsx)(i.Button,{variant:"ghost",className:"ml-1 size-5 text-v0-gray-900",onClick:()=>h(!p),"aria-label":f(p?"projectSettings.hideValue":"projectSettings.showValue"),children:p?(0,t.jsx)(s.EyeOff,{}):(0,t.jsx)(a.Eye,{})}),(0,t.jsx)(i.Button,{variant:"ghost",className:"size-5 text-v0-gray-900",onClick:()=>{navigator.clipboard.writeText(l.value),r.toast.success("Copied value of ".concat(l.key," to clipboard"))},"aria-label":"Copy",children:(0,t.jsx)(o.Copy,{})})]})]}),(0,t.jsx)(en.MoreButton,{onClick:()=>{c(!0),u(l)}})]})}function eh(e){let{setSaving:o,vercelProjectId:a,v0ProjectId:s}=e,[c,u]=(0,n.useState)(null),[d,p]=(0,n.useState)(!1),{envVars:h,isLoading:f,refetchVercelProject:m}=(0,er.useVercelProject)({v0ProjectId:null!=s?s:void 0}),g=h?Object.keys(h).length:0,[v,x]=(0,n.useTransition)(),{setEnvModalData:y,setShowEnvModal:b}=(0,ee.useEnvModal)(),w=(0,et.useT)(),j=(0,er.useCanMakeProjectUpdates)(),{chatId:C}=(0,ei.useChatId)(),{refresh:k}=(0,eo.useBrowserFrame)(),{hasVercelWritePermission:S}=(0,el.useActiveScope)(),{user:N}=(0,eu.useUser)(),E=null==N?void 0:N.isImpersonation,D=(0,n.useCallback)(()=>{c&&s&&a&&(o(!0),x(async()=>{(await X({envVarId:c.id,v0ProjectId:s,vercelProjectId:a,chatId:C})).success?r.toast.success(w("projectSettings.envVarDeleteSuccess")(c.key)):r.toast.error(w("projectSettings.envVarDeleteError")(c.key)),p(!1),m(),k()}))},[c,s,a,o,C,m,k,w]),I=(0,n.useCallback)(()=>{s&&(y({mode:"create",projectId:s}),b(!0))},[y,b,s]),A=(0,n.useMemo)(()=>h?Object.values(h).sort((e,t)=>{let n=e.updatedAt||e.createdAt;return(t.updatedAt||t.createdAt)-n}):[],[h]);return f?(0,t.jsx)(en.SectionListSkeleton,{title:w("projectSettings.environmentVariables")}):(0,t.jsxs)(t.Fragment,{children:[0===g?E?(0,t.jsx)(en.EmptyState,{title:"Additional Permissions Required",subtitle:"You are impersonating a user. You do not have permission to view Environment Variables of this project.",className:"h-full"}):(0,t.jsx)(en.EmptyState,{title:w("projectSettings.noEnvVars"),subtitle:w("projectSettings.envVarSubtitle")(a),className:"h-full",children:(0,t.jsx)(ec.RbacTooltip,{show:!S,requiredRole:"V0Builder",children:(0,t.jsxs)(i.Button,{size:"sm",variant:"secondary",onClick:()=>{I()},disabled:!S,children:[(0,t.jsx)(l.Plus,{}),"Add Variables"]})})}):(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[j&&a&&(0,t.jsx)(ec.RbacTooltip,{show:!S,requiredRole:"V0Builder",children:(0,t.jsxs)(i.Button,{variant:"secondary",size:"sm",onClick:I,disabled:!S,children:[(0,t.jsx)(l.Plus,{}),"Add"]})}),(0,t.jsx)(ea.Card,{children:A.map((e,n)=>(0,t.jsx)(ep,{envVar:e,setOpenDetailsModal:p,setSelectedEnvVar:u,className:n>0?"border-t":""},e.id))})]}),(0,t.jsxs)(Y.Modal,{open:d,onOpenChange:p,children:[(0,t.jsx)(Y.ModalHeader,{children:(0,t.jsx)(Y.ModalTitle,{className:"flex items-center gap-2",children:w("projectSettings.envVarDetails")})}),(0,t.jsx)(Y.ModalContent,{children:(0,t.jsx)(G,{envVar:c})}),j&&(0,t.jsx)(Y.ModalFooter,{className:"border-v0-gray-300 bg-v0-background-200 flex border-t p-4!",children:(0,t.jsx)(ec.RbacTooltip,{show:!S,requiredRole:"V0Builder",children:(0,t.jsx)(J.SpinnerButton,{size:"sm",pending:v,variant:"destructive",onClick:D,disabled:v||!S,children:w("projectSettings.delete")})})})]})]})}},889661,e=>{"use strict";var t=e.i(743124),n=e.i(560270);function r(e){return{formRef:(0,t.useRef)(null),onKeyDown:(0,t.useCallback)(t=>{if(n.isMobile)return;let r=t.currentTarget.value.trim(),i=""===r&&(null==e?void 0:e.localFileInfos)&&e.localFileInfos.length>0;if("Enter"===t.key&&!t.shiftKey&&!t.nativeEvent.isComposing){if(n.isSafari&&n.isDesktop&&229===t.keyCode)return;t.preventDefault(),i?e.submitMessage():r.length>0&&(null==e||e.submitMessage())}},[e])}}e.s(["useEnterSubmit",()=>r])},471173,e=>{"use strict";e.s(["Instructions",()=>j],471173);var t=e.i(509473),n=e.i(176248),r=e.i(183673),i=e.i(762585),o=e.i(950955),a=t,s=e.i(743124),l=e.i(376346),c=e.i(211976);e.i(563948);var u=e.i(407562),d=e.i(979865),p=e.i(889661),h=e.i(589910),f=e.i(358847),m=(0,f.createServerReference)("608122b095e3cc31f4b41097ab5315ca9a611e2165",f.callServer,void 0,f.findSourceMapURL,"updateProjectSettingsInstructions"),g=e.i(120485),v=e.i(51940),x=e.i(216445),y=e.i(297239),b=r;function w(e){let{readOnly:t,projectId:n,initialInstructions:r,textAreaMinHeight:i,buttonVariant:o,onSubmit:f,onFinish:w}=e,[j,C]=(0,s.useState)(r),[k,S]=(0,s.useState)(!1),N=(0,d.useRouter)(),[E,D]=(0,s.useState)(!1),I=(0,y.useT)(),{updateInstructions:A}=(0,b.useProjectInstructions)(n),T=(0,s.useCallback)(async e=>{if(e&&e.preventDefault(),!t){S(!0),null==f||f();try{let e=await m(n,j);if(!0===e)A(j),u.toast.success("Project Instructions updated"),D(!0),setTimeout(()=>D(!1),1e3),N.refresh();else throw Error(e.error)}catch(e){(0,g.handleChatError)(e,N,"An error occurred while updating instructions")||u.toast.error("Error",{description:"An error occurred while updating instructions."})}finally{S(!1),null==w||w()}}},[t,f,n,j,A,N,w]),{formRef:M,onKeyDown:L}=(0,p.useEnterSubmit)({submitMessage:T,localFileInfos:[]});return(0,a.jsx)(l.Card,{className:"bg-v0-background-100 flex flex-col border-0 shadow-none",children:(0,a.jsx)("form",{className:"flex flex-1 flex-col",onSubmit:T,ref:M,children:(0,a.jsxs)(l.CardContent,{className:"flex flex-1 flex-col gap-3 p-0",children:[(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,a.jsx)("div",{className:"flex flex-1 flex-col",children:(0,a.jsx)(x.Textarea,{asChild:!0,children:(0,a.jsx)(v.ResizableTextArea,{className:"pointer-events-auto!",disabled:t,id:"instructions",maxLength:5e3,minHeight:i,onChange:e=>C(e.target.value),onKeyDown:L,placeholder:I("projectInstructions.placeholder"),value:j})})}),(0,a.jsx)(h.InputCounter,{count:j.length,max:5e3,message:"For larger context, consider using sources.",messageThreshold:5e3})]}),!t&&(0,a.jsx)(c.SpinnerButton,{className:"ml-auto w-full","data-testid":"save-instructions-button",disabled:E||j===r||k,pending:k,variant:o,children:"Save Changes"})]})})})}function j(e){let{setSaving:a,projectId:s}=e,{instructions:l,isLoading:c}=(0,r.useProjectInstructions)(s),u=(0,r.useCanMakeProjectUpdates)();return s?(0,t.jsx)(o.Section,{label:"Project Instructions",info:"Custom instructions and guidelines for v0 to follow in responses.",className:"gap-3 border-b p-4",children:c?(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(i.Skeleton,{className:"h-36 w-full"}),(0,t.jsx)(n.Button,{disabled:!0,variant:"secondary",size:"sm",children:"Save Changes"})]}):(0,t.jsx)(w,{readOnly:!u,projectId:s,initialInstructions:l,textAreaMinHeight:144,buttonVariant:"secondary",onSubmit:()=>{a(!0)},onFinish:()=>{a(!1)}})}):null}},918823,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4.875C1.5 3.01104 3.01104 1.5 4.875 1.5C6.20018 1.5 7.34838 2.26364 7.901 3.37829C8.1902 3.96162 8.79547 4.5 9.60112 4.5H12.25C13.4926 4.5 14.5 5.50736 14.5 6.75C14.5 7.42688 14.202 8.03329 13.7276 8.44689L13.1622 8.93972L14.1479 10.0704L14.7133 9.57758C15.5006 8.89123 16 7.8785 16 6.75C16 4.67893 14.3211 3 12.25 3H9.60112C9.51183 3 9.35322 2.93049 9.2449 2.71201C8.44888 1.1064 6.79184 0 4.875 0C2.18261 0 0 2.18261 0 4.875V6.40385C0 7.69502 0.598275 8.84699 1.52982 9.59656L2.11415 10.0667L3.0545 8.89808L2.47018 8.42791C1.87727 7.95083 1.5 7.22166 1.5 6.40385V4.875ZM7.29289 7.39645C7.68342 7.00592 8.31658 7.00592 8.70711 7.39645L11.7803 10.4697L12.3107 11L11.25 12.0607L10.7197 11.5303L8.75 9.56066V15.25V16H7.25V15.25V9.56066L5.28033 11.5303L4.75 12.0607L3.68934 11L4.21967 10.4697L7.29289 7.39645Z" fill="currentColor"/>');e.s(["CloudUpload",0,t])},970210,(e,t,n)=>{function r(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n)if(!this._cachedTimeouts)return!1;else this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,a=(e[o]||0)+1;e[o]=a,a>=n&&(t=i,n=a)}return t}},731238,(e,t,n)=>{var r=e.r(970210);n.operation=function(e){return new r(n.timeouts(e),{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},n.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<t.retries;i++)r.push(this.createTimeout(i,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(i,t)),r.sort(function(e,t){return e-t}),r},n.createTimeout=function(e,t){var n=Math.round((t.randomize?Math.random()+1:1)*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(n,t.maxTimeout)},n.wrap=function(e,t,r){if(t instanceof Array&&(r=t,t=null),!r)for(var i in r=[],e)"function"==typeof e[i]&&r.push(i);for(var o=0;o<r.length;o++){var a=r[o],s=e[a];e[a]=(function(r){var i=n.operation(t),o=Array.prototype.slice.call(arguments,1),a=o.pop();o.push(function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),a.apply(this,arguments))}),i.attempt(function(){r.apply(e,o)})}).bind(e,s),e[a].options=t}}},629103,(e,t,n)=>{t.exports=e.r(731238)},452172,(e,t,n)=>{var r=e.r(629103);t.exports=function(e,t){return new Promise(function(n,i){var o,a=t||{};function s(e){i(e||Error("Aborted"))}function l(e,t){if(e.bail)return void s(e);o.retry(e)?a.onRetry&&a.onRetry(e,t):i(o.mainError())}function c(t){var r;try{r=e(s,t)}catch(e){l(e,t);return}Promise.resolve(r).then(n).catch(function(e){l(e,t)})}"randomize"in a||(a.randomize=!0),(o=r.operation(a)).attempt(c)})}},655263,(e,t,n)=>{"use strict";t.exports=s,t.exports.format=l,t.exports.parse=c;var r=/\B(?=(\d{3})+(?!\d))/g,i=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1024,mb:1048576,gb:0x40000000,tb:0x10000000000,pb:0x4000000000000},a=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,t){return"string"==typeof e?c(e):"number"==typeof e?l(e,t):null}function l(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),a=t&&t.thousandsSeparator||"",s=t&&t.unitSeparator||"",l=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,c=!!(t&&t.fixedDecimals),u=t&&t.unit||"";u&&o[u.toLowerCase()]||(u=n>=o.pb?"PB":n>=o.tb?"TB":n>=o.gb?"GB":n>=o.mb?"MB":n>=o.kb?"KB":"B");var d=(e/o[u.toLowerCase()]).toFixed(l);return c||(d=d.replace(i,"$1")),a&&(d=d.split(".").map(function(e,t){return 0===t?e.replace(r,a):e}).join(".")),d+s+u}function c(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=a.exec(e),r="b";return(n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),isNaN(t))?null:Math.floor(o[r]*t)}},906202,(e,t,n)=>{t.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},547763,228495,230252,e=>{"use strict";e.i(386496);var t,n,r=e.i(643908);let i=globalThis.fetch.bind(globalThis);var o=e.i(452172),a=e.i(655263);let s={toWeb(){throw Error("Vercel Blob: Sorry, we cannot get a Readable stream in this environment. If you see this message please open an issue here: https://github.com/vercel/storage/ with details on your environment.")}};var l=e.i(906202);function c(e){if(null==e?void 0:e.token)return e.token;if(r.default.env.BLOB_READ_WRITE_TOKEN)return r.default.env.BLOB_READ_WRITE_TOKEN;throw new u("No token found. Either configure the `BLOB_READ_WRITE_TOKEN` environment variable, or pass a `token` option to your calls.")}var u=class extends Error{constructor(e){super("Vercel Blob: ".concat(e))}};function d(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}var p=!1;try{((null==(t=r.default.env.DEBUG)?void 0:t.includes("blob"))||(null==(n=r.default.env.NEXT_PUBLIC_DEBUG)?void 0:n.includes("blob")))&&(p=!0)}catch(e){}function h(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];p&&console.debug("vercel-blob: ".concat(e),...n)}var f=950,m=class extends u{constructor(){super("Access denied, please provide a valid token for this resource.")}},g=class extends u{constructor(e){super("Content type mismatch, ".concat(e))}},v=class extends u{constructor(){super("This store does not exist.")}},x=class extends u{constructor(){super("This store has been suspended.")}},y=class extends u{constructor(){super("Unknown error, please visit https://vercel.com/help.")}},b=class extends u{constructor(){super("The requested blob does not exist")}},w=class extends u{constructor(){super("The blob service is currently not available. Please try again.")}},j=class extends u{constructor(e){super("Too many requests please lower the number of concurrent requests ".concat(e?" - try again in ".concat(e," seconds"):"",".")),this.retryAfter=null!=e?e:0}},C=class extends u{constructor(){super("The request was aborted.")}},k=7;function S(){let e=null;try{e=r.default.env.VERCEL_BLOB_API_VERSION_OVERRIDE||r.default.env.NEXT_PUBLIC_VERCEL_BLOB_API_VERSION_OVERRIDE}catch(e){}return"".concat(null!=e?e:k)}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null;try{t=r.default.env.VERCEL_BLOB_API_URL||r.default.env.NEXT_PUBLIC_VERCEL_BLOB_API_URL}catch(e){}return"".concat(t||"https://blob.vercel-storage.com").concat(e)}function E(){try{let e=r.default.env.VERCEL_BLOB_RETRIES||"10";return parseInt(e,10)}catch(e){return 10}}function D(e){let t=e.headers.get("retry-after");return new j(t?parseInt(t,10):void 0)}async function I(e){var t,n,r;let i,o,a;try{let a=await e.json();i=null!=(n=null==(t=a.error)?void 0:t.code)?n:"unknown_error",o=null==(r=a.error)?void 0:r.message}catch(e){i="unknown_error"}switch((null==o?void 0:o.includes("contentType"))&&o.includes("is not allowed")&&(i="content_type_not_allowed"),i){case"store_suspended":a=new x;break;case"forbidden":a=new m;break;case"content_type_not_allowed":a=new g(o);break;case"not_found":a=new b;break;case"store_not_found":a=new v;break;case"bad_request":a=new u(null!=o?o:"Bad request");break;case"service_unavailable":a=new w;break;case"rate_limited":a=D(e);break;default:a=new y}return{code:i,error:a}}async function A(e,t,n){let r=S(),a=c(n),s=T(),[,,,l=""]=a.split("_"),u="".concat(l,":").concat(Date.now(),":").concat(Math.random().toString(16).slice(2)),d=0,p=await (0,o.default)(async n=>{let o;try{o=await i(N(e),{...t,headers:{"x-api-blob-request-id":u,"x-api-blob-request-attempt":String(d),"x-api-version":r,authorization:"Bearer ".concat(a),...s,...t.headers}})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return void n(new C);throw e}if(o.ok)return o;let{code:l,error:c}=await I(o);if("unknown_error"===l||"service_unavailable"===l||"internal_server_error"===l)throw c;n(c)},{retries:E(),onRetry:t=>{h("retrying API request to ".concat(e),t.message),d+=1}});if(!p)throw new y;return await p.json()}function T(){let e={};try{"VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API"in r.default.env?e["x-proxy-through-alternative-api"]=r.default.env.VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API:"NEXT_PUBLIC_VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API"in r.default.env&&(e["x-proxy-through-alternative-api"]=r.default.env.NEXT_PUBLIC_VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API)}catch(e){}return e}var M={cacheControlMaxAge:"x-cache-control-max-age",addRandomSuffix:"x-add-random-suffix",contentType:"x-content-type"};function L(e,t){let n={};return e.includes("contentType")&&t.contentType&&(n[M.contentType]=t.contentType),e.includes("addRandomSuffix")&&void 0!==t.addRandomSuffix&&(n[M.addRandomSuffix]=t.addRandomSuffix?"1":"0"),e.includes("cacheControlMaxAge")&&void 0!==t.cacheControlMaxAge&&(n[M.cacheControlMaxAge]=t.cacheControlMaxAge.toString()),n}async function P(e){let{pathname:t,options:n,extraChecks:r,getToken:i}=e;if(!t)throw new u("pathname is required");if(t.length>f)throw new u("pathname is too long, maximum length is ".concat(f));if(!n)throw new u("missing options, see usage");if("public"!==n.access)throw new u('access must be "public"');return r&&r(n),i&&(n.token=await i(t,n)),n}function R(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async(e,i,o)=>{let a=await P({pathname:e,options:o,extraChecks:r,getToken:n}),s=L(t,a);return _({uploadId:a.uploadId,key:a.key,pathname:e,headers:s,options:a,parts:i})}}async function _(e){let{uploadId:t,key:n,pathname:r,parts:i,headers:o,options:a}=e;try{let e=await A("/mpu/".concat(r),{method:"POST",headers:{...o,"content-type":"application/json","x-mpu-action":"complete","x-mpu-upload-id":t,"x-mpu-key":encodeURI(n)},body:JSON.stringify(i),signal:a.abortSignal},a);return h("mpu: complete",e),e}catch(e){if(e instanceof TypeError&&("Failed to fetch"===e.message||"fetch failed"===e.message))throw new w;throw e}}function O(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async(e,i)=>{let o=await P({pathname:e,options:i,extraChecks:r,getToken:n}),a=L(t,o),s=await F(e,a,o);return{key:s.key,uploadId:s.uploadId}}}async function F(e,t,n){h("mpu: create","pathname:",e);try{let r=await A("/mpu/".concat(e),{method:"POST",headers:{...t,"x-mpu-action":"create"},signal:n.abortSignal},n);return h("mpu: create",r),r}catch(e){if(e instanceof TypeError&&("Failed to fetch"===e.message||"fetch failed"===e.message))throw new w;throw e}}function B(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async(e,i,o)=>{let a=await P({pathname:e,options:o,extraChecks:r,getToken:n}),s=L(t,a);if(d(i))throw new u("Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.");return{etag:(await V({uploadId:a.uploadId,key:a.key,pathname:e,part:{blob:i,partNumber:a.partNumber},headers:s,options:a})).etag,partNumber:a.partNumber}}}async function V(e){var t,n,r;let{uploadId:i,key:o,pathname:a,headers:s,options:l,internalAbortController:c=new AbortController,part:u}=e,d=A("/mpu/".concat(a),{signal:c.signal,method:"POST",headers:{...s,"x-mpu-action":"upload","x-mpu-key":encodeURI(o),"x-mpu-upload-id":i,"x-mpu-part-number":u.partNumber.toString()},body:u.blob,duplex:"half"},l);function p(){c.abort()}(null==(t=l.abortSignal)?void 0:t.aborted)?p():null==(n=l.abortSignal)||n.addEventListener("abort",p);let h=await d;return null==(r=l.abortSignal)||r.removeEventListener("abort",p),h}var z="undefined"!=typeof window?6:8,H=8388608,U=8388608*z*2;function G(e){let{uploadId:t,key:n,pathname:r,stream:i,headers:o,options:s}=e;h("mpu: upload init","key:",n);let l=new AbortController;return new Promise((e,c)=>{let u=[],d=[],p=i.getReader(),f=0,m=!1,g=1,v=!1,x=0,y=!1,b=0,j=[],C=0;async function k(){for(h("mpu: upload read start","activeUploads:",f,"currentBytesInMemory:","".concat((0,a.default)(x),"/").concat((0,a.default)(U)),"bytesSent:",(0,a.default)(b)),m=!0;x<U&&!v;)try{let{value:e,done:t}=await p.read();if(t){y=!0,h("mpu: upload read consumed the whole stream"),j.length>0&&(u.push({partNumber:g++,blob:new Blob(j,{type:"application/octet-stream"})}),N()),m=!1;return}x+=e.byteLength;let n=0;for(;n<e.byteLength;){let t=H-C,r=Math.min(n+t,e.byteLength),i=e.slice(n,r);j.push(i),C+=i.byteLength,n=r,C===H&&(u.push({partNumber:g++,blob:new Blob(j,{type:"application/octet-stream"})}),j=[],C=0,N())}}catch(e){E(e)}h("mpu: upload read end","activeUploads:",f,"currentBytesInMemory:","".concat((0,a.default)(x),"/").concat((0,a.default)(U)),"bytesSent:",(0,a.default)(b)),m=!1}async function S(i){f++,h("mpu: upload send part start","partNumber:",i.partNumber,"size:",i.blob.size,"activeUploads:",f,"currentBytesInMemory:","".concat((0,a.default)(x),"/").concat((0,a.default)(U)),"bytesSent:",(0,a.default)(b));try{let c=await V({uploadId:t,key:n,pathname:r,headers:o,options:s,internalAbortController:l,part:i});if(h("mpu: upload send part end","partNumber:",i.partNumber,"activeUploads",f,"currentBytesInMemory:","".concat((0,a.default)(x),"/").concat((0,a.default)(U)),"bytesSent:",(0,a.default)(b)),v)return;if(d.push({partNumber:i.partNumber,etag:c.etag}),x-=i.blob.size,f--,b+=i.blob.size,u.length>0&&N(),y){0===f&&(p.releaseLock(),e(d));return}m||k().catch(E)}catch(e){E(e)}}function N(){if(!v)for(h("send parts","activeUploads",f,"partsToUpload",u.length);f<z&&u.length>0;){let e=u.shift();e&&S(e)}}function E(e){v||(v=!0,l.abort(),p.releaseLock(),e instanceof TypeError&&("Failed to fetch"===e.message||"fetch failed"===e.message)?c(new w):c(e))}k().catch(E)})}function W(e){let t;return e instanceof ReadableStream?e:e instanceof Blob?e.stream():q(e)?s.toWeb(e):(t=e instanceof ArrayBuffer?e:K(e)?e.buffer:Z(e),new ReadableStream({start(e){e.enqueue(t),e.close()}}))}function q(e){return"object"==typeof e&&"function"==typeof e.pipe&&e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState}function Z(e){return new TextEncoder().encode(e)}function K(e){return(0,l.default)(e)}async function $(e,t,n,r){h("mpu: init","pathname:",e,"headers:",n);let i=W(t),o=await F(e,n,r),a=await G({uploadId:o.uploadId,key:o.key,pathname:e,stream:i,headers:n,options:r});return await _({uploadId:o.uploadId,key:o.key,pathname:e,parts:a,headers:n,options:r})}function Y(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async function(e,i,o){if(!i)throw new u("body is required");if(d(i))throw new u("Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.");let a=await P({pathname:e,options:o,extraChecks:r,getToken:n}),s=L(t,a);if(!0===a.multipart)return $(e,i,s,a);let l=await A("/".concat(e),{method:"PUT",body:i,headers:s,duplex:"half",signal:a.abortSignal},a);return{url:l.url,downloadUrl:l.downloadUrl,pathname:l.pathname,contentType:l.contentType,contentDisposition:l.contentDisposition}}}function J(e){let{allowedOptions:t,getToken:n,extraChecks:r}=e;return async(e,i)=>{let o=await P({pathname:e,options:i,extraChecks:r,getToken:n}),a=L(t,o),s=await F(e,a,o);return{key:s.key,uploadId:s.uploadId,async uploadPart(t,n){if(d(n))throw new u("Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.");return{etag:(await V({uploadId:s.uploadId,key:s.key,pathname:e,part:{partNumber:t,blob:n},headers:a,options:o})).etag,partNumber:t}},complete:async t=>_({uploadId:s.uploadId,key:s.key,pathname:e,parts:t,headers:a,options:o})}}}async function Q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.endsWith("/")?e:"".concat(e,"/"),r={};r[M.addRandomSuffix]="0";let i=await A("/".concat(n),{method:"PUT",headers:r,signal:t.abortSignal},t);return{url:i.url,pathname:i.pathname}}function X(e){return function(t){if("undefined"==typeof window)throw new u("".concat(e," must be called from a client environment"));if(!t.token.startsWith("vercel_blob_client_"))throw new u("".concat(e," must be called with a client token"));if(void 0!==t.addRandomSuffix||void 0!==t.cacheControlMaxAge)throw new u("".concat(e," doesn't allow addRandomSuffix and cacheControlMaxAge. Configure these options at the server side when generating client tokens."))}}e.s(["BlobContentTypeNotAllowed",()=>g,"BlobError",()=>u,"createCompleteMultipartUploadMethod",()=>R,"createCreateMultipartUploadMethod",()=>O,"createCreateMultipartUploaderMethod",()=>J,"createFolder",()=>Q,"createPutMethod",()=>Y,"createUploadPartMethod",()=>B,"getTokenFromOptionsOrEnv",()=>c],228495),Y({allowedOptions:["contentType"],extraChecks:X("client/`put`")}),O({allowedOptions:["contentType"],extraChecks:X("client/`createMultipartUpload`")}),J({allowedOptions:["contentType"],extraChecks:X("client/`createMultipartUpload`")}),B({allowedOptions:["contentType"],extraChecks:X("client/`multipartUpload`")}),R({allowedOptions:["contentType"],extraChecks:X("client/`completeMultipartUpload`")});var ee=Y({allowedOptions:["contentType"],extraChecks(e){if("undefined"==typeof window)throw new u("client/`upload` must be called from a client environment");if(void 0===e.handleUploadUrl)throw new u("client/`upload` requires the 'handleUploadUrl' parameter");if(void 0!==e.addRandomSuffix||void 0!==e.cacheControlMaxAge)throw new u("client/`upload` doesn't allow addRandomSuffix and cacheControlMaxAge. Configure these options at the server side when generating client tokens.")},async getToken(e,t){var n,r;return en({handleUploadUrl:t.handleUploadUrl,pathname:e,clientPayload:null!=(n=t.clientPayload)?n:null,multipart:null!=(r=t.multipart)&&r})}}),et={generateClientToken:"blob.generate-client-token"};async function en(e){let{handleUploadUrl:t,pathname:n}=e,r=ei(t)?t:er(t),o={type:et.generateClientToken,payload:{pathname:n,callbackUrl:r,clientPayload:e.clientPayload,multipart:e.multipart}},a=await i(r,{method:"POST",body:JSON.stringify(o),headers:{"content-type":"application/json"},signal:e.abortSignal});if(!a.ok)throw new u("Failed to  retrieve the client token");try{let{clientToken:e}=await a.json();return e}catch(e){throw new u("Failed to retrieve the client token")}}function er(e){return new URL(e,window.location.href).href}function ei(e){try{return new URL(e),!0}catch(e){return!1}}e.s(["upload",()=>ee],547763);var eo=e.i(358847),ea=(0,eo.createServerReference)("40b12414b2e2433846d03a68f7d431538d0575ac07",eo.callServer,void 0,eo.findSourceMapURL,"importChat");e.s(["importChat",()=>ea],230252)},577745,e=>{"use strict";function t(e){return e.startsWith("image/")&&!e.includes("svg")}function n(e){return(e/1048576).toFixed(2).replace(/\.?0+$/,"")+"MB"}let r=["text/plain","text/markdown","text/html","application/json","text/csv","text/x-python","application/typescript","text/tsx","text/jsx","text/markdown","text/html","text/css","application/yaml","application/yml","application/sql","application/x-sql","application/xml","message/rfc822"],i=["txt","md","json","csv","py","ts","tsx","js","jsx","log","html","css","yml","yaml","mermaid","mjs","mts","sql","map","xml","eml"];function o(e,t){return r.includes(e)||i.includes(t)}e.s(["TEXT_EXTENSIONS",0,i,"bytesToMB",()=>n,"isConvertedToText",()=>o,"isInlinableImageType",()=>t])},599568,e=>{e.v(e.b(["static/chunks/d460a422ace39e7b.js","static/chunks/turbopack-497dfd7ba68527a3.js"]))},966455,890374,924804,342220,79259,921431,666425,196606,687785,995570,e=>{"use strict";e.s(["Sources",()=>X],966455);var t=e.i(509473),n=e.i(743124);e.i(563948);var r=e.i(407562),i=e.i(176248),o=e.i(556355),a=e.i(922106),s=e.i(735234),l=e.i(230125),c=e.i(199551),u=e.i(113654),d=e.i(918823),p=e.i(183673),h=e.i(950955),f=e.i(276507),m=e.i(297239),g=e.i(304649);e.s(["buildUploadPayload",()=>U,"default",()=>z],79259);var v=n,x=e.i(323194),y=r,b=e.i(547763),w=e.i(564997),j=e.i(979865),C=e.i(230252),k=e.i(246300),S=e.i(577745);function N(e){return E(e,!0)}function E(e,t){return Math.floor(.297*("string"==typeof e?e.length:e.charCount)+1379.14*!t)}function D(e){return Math.round(4*e*(1/.9))}function I(e){return Math.round(e/1048576*1334)}function A(e){return I("number"==typeof e?e:e.size)}e.s(["estimateChars",()=>D,"estimateTokensForImageAttachments",()=>A,"estimateTokensForSmallString",()=>N,"estimateTokensForString",()=>E],890374);var T=e.i(346970);let M={attachmentMaxSizeBytes:3932160,contextWindow:199999,image:{maxSizeBytes:3932160,maxDimensionsPixels:{short:8e3,long:8e3},maxPerChat:20}};function L(){let{data:e}=(0,T.default)("model-config");return null!=e?e:M}e.s(["useModelConfig",()=>L],924804);var P=e.i(53223),R=e.i(342681),_=e.i(228495);e.s(["BlobContentTypeNotAllowedError",()=>_.BlobContentTypeNotAllowed],342220);var _=_,O=e.i(667660);let F=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function B(e){for(let{bytes:t,mimeType:n}of F)if(e.length>=t.length&&t.every((t,n)=>e[n]===t))return n}function V(t,n,r,i){return new Promise((o,a)=>{let s=new Worker(e.r(599568));s.onmessage=e=>{let{blob:n,error:r}=e.data;r?a(Error(r)):n&&o(new File([n],t.name,{type:n.type})),s.terminate()},s.onerror=e=>{a(Error(e.message)),s.terminate()},s.postMessage({file:t,quality:n,shortLimit:r,longLimit:i})})}let z=e=>{let{isSignedIn:t,dragContainerRef:n,projectId:r,onFinish:i,onSuccess:o,onError:a,canUpload:s,onUploadStart:l,disablePaste:c,disableDrag:u}=e,d=r?"project-source":"prompt-attachment",[p,h]=(0,v.useState)(!1),[f,m]=(0,v.useState)(!1),g=(0,v.useRef)(null),{user:E}=(0,O.useActiveScope)(),D=L(),{revalidate:I}=(0,k.useChatHistory)(),T=(0,j.useRouter)(),{setShowSignInDialog:M}=(0,x.useSignInDialog)(),F=null!=a?a:e=>y.toast.error(e),B=(0,v.useCallback)(async e=>{m(!0);let n=5,a=[];try{if(!t)return void M({content:!1});let i=s(e);if(!i.ok){var c;F(null!=(c=i.message)?c:"Failed to upload files","");return}let p=[],h=[];async function u(e){let t,n,i=await W({file:e,config:D}),o=(0,R.generateFileId)();if(i.name.startsWith(w.V0_CHAT_FILE_PREFIX)&&(null==E?void 0:E.isAdminMode)&&!r){let e=await (0,C.importChat)({payload:{file:i}});return"error"in e?(F(e.error,o),{status:"error",message:e.error}):(I(),y.toast.success("Chat imported successfully"),T.push("/chat/".concat(e.chatId)),{status:"success"})}if("application/zip"===i.type||"application/x-zip-compressed"===i.type){let e=await i.arrayBuffer(),t={id:o,name:i.name,size:i.size,isImage:!1,tokens:0,v0Type:"zip",url:"",contentType:i.type,content:e,status:"done"};return p.push(t),{status:"success"}}if((0,S.isInlinableImageType)(i.type)){let e=D.image.maxSizeBytes,{short:t,long:n}=D.image.maxDimensionsPixels;if(i.size>e)return F("".concat(i.name," is larger than ").concat((0,S.bytesToMB)(e)),o),{status:"error",message:"".concat(i.name," is larger than ").concat((0,S.bytesToMB)(e))};let r=await G(i),a=Math.max(r.width||0,r.height||0),s=Math.min(r.width||0,r.height||0);if(a>n||s>t)return F("".concat(i.name," exceeds the maximum dimensions. Long side must be less than or equal to ").concat(n,"px and short side must be less than or equal to ").concat(t,"px."),o),{status:"error",message:"".concat(i.name," exceeds the maximum dimensions. Long side must be less than or equal to ").concat(n,"px and short side must be less than or equal to ").concat(t,"px.")}}(0,S.isConvertedToText)(i.type,i.name.split(".").pop())&&(t=await i.text());let a=i.type.startsWith("image/")?A(i):N(t||""),s={id:o,name:i.name,url:URL.createObjectURL(i),content:t,status:"uploading",size:i.size,isImage:i.type.startsWith("image/"),tokens:a,v0Type:i.v0Type};null==l||l(s);let{pathname:c,clientPayload:u}=await U({file:i,component:d});try{n=await (0,b.upload)(c,i,{access:"public",handleUploadUrl:"/chat/api/chat/upload",clientPayload:JSON.stringify(u)})}catch(t){(0,P.track)("FileUploadError",{fileName:i.name,fileType:i.type,errorMsg:String(t)}),console.error("Failed to upload ".concat(i.name,": ").concat(String(t)));let e="Failed to upload file "+i.name;return t instanceof _.BlobContentTypeNotAllowed&&(e="File type not allowed"),F(e,o),{status:"error",message:e}}if(r){var f;(0,P.track)("UploadSource",{projectId:r,extension:null==(f=i.name.split(".").pop())?void 0:f.toLowerCase(),type:i.type});let e={projectId:r,filename:i.name,url:n.url},t=await fetch("/chat/api/projects/sources",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(!t.ok){let e;try{e=(await t.json()).error}catch(t){e="Failed to start file indexing"}return F(e,o),{status:"error",message:e}}}let m={...n,name:i.name,size:i.size,v0Type:i.v0Type},g={...s,status:"done",url:n.url,contentType:n.contentType};return h.push(m),p.push(g),{status:"success"}}for(let t=0;t<e.length;t+=n){let r=e.slice(t,t+n),i=await Promise.allSettled(r.map(u));a.push(...i)}for(let e of a){if("rejected"===e.status){F("Failed to upload file","");continue}if("error"===e.value.status){F(e.value.message,"");continue}}(p.length>0||h.length>0)&&await (null==o?void 0:o(h,p))}catch(e){F("Unexpected error while uploading files","")}finally{m(!1)}null==i||i()},[i,t,d,M,F,D,null==E?void 0:E.isAdminMode,r,l,I,T,o,s]),V=(0,v.useCallback)(async e=>{if(h(!1),e.preventDefault(),e.stopPropagation(),!e.dataTransfer)return;if(!t)return void M({content:!1});let{files:n,items:r}=e.dataTransfer,i=r?await H(Array.from(r)):await H(Array.from(n));i.ok&&await B(i.value)},[t,M,B,h]);return(0,v.useEffect)(()=>{if(c)return;let e=async e=>{if(e.clipboardData){let t=e.clipboardData.items,n=[],r=async()=>{for(let e of t)if("file"===e.kind){let t=e.getAsFile();t&&n.push(t)}n.length>0&&await B(n)};await r()}};return window.addEventListener("paste",e),()=>{window.removeEventListener("paste",e)}},[D.image.maxSizeBytes,t,M,B,c]),(0,v.useEffect)(()=>{let e=document.documentElement;if(u)return;let t=(null==n?void 0:n.current)||window,r=()=>{h(!0)},i=()=>{h(!1)},o=e=>{e.preventDefault(),e.stopPropagation()};return t.addEventListener("dragenter",r),e.addEventListener("mouseleave",i),t.addEventListener("dragover",o),t.addEventListener("drop",V),()=>{t.removeEventListener("dragenter",r),e.removeEventListener("mouseleave",i),t.removeEventListener("dragover",o),t.removeEventListener("drop",V)}},[V,n,u,h]),{isDraggingFile:p,isUploading:f,inputFileRef:g,onInputChange:async e=>{if(!e.target.files)return;let t=await H(Array.from(e.target.files));t.ok&&(await B(t.value),e.target.value="")},uploadFiles:B}};async function H(e){let t=[];if(!(null==e?void 0:e.length))return{ok:!1};let n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.isFile)return[await new Promise(t=>e.file(t))];if(e.isDirectory){let r=e.createReader(),i=await new Promise(e=>r.readEntries(e));return(await Promise.all(i.map(r=>n(r,t+e.name+"/")))).flat()}return[]},r=[];for(let n of e)if("webkitGetAsEntry"in n){let e=n.webkitGetAsEntry();e&&r.push(e)}else t.push(n);for(let e of r){let r=await n(e);t.push(...r)}let i=[];for(let e=0;e<t.length;e++){var o;let n=null==(o=t[e].name.split(".").pop())?void 0:o.toLowerCase();if(".DS_Store"!==t[e].name){if(!n)return y.toast.error("Unsupported file type "+n),{ok:!1};i.push(t[e])}}return{ok:!0,value:i}}async function U(e){var t,n;let{file:r,component:i}=e,o=r.name,a=r.type,s=null==(t=r.name.split(".").pop())?void 0:t.toLowerCase();if(r.type.startsWith("image/")){let e=B(new Uint8Array(await r.arrayBuffer()));a=null!=e?e:r.type,s=null!=(n=null==e?void 0:e.split("/")[1])?n:s,o=r.name.endsWith(".".concat(s))?r.name:"".concat(r.name,".").concat(s)}return{pathname:o,clientPayload:{component:i,fileType:a,extension:s}}}let G=e=>new Promise((t,n)=>{let r=new Image;r.onload=()=>{t({width:r.naturalWidth,height:r.naturalHeight})},r.onerror=()=>{n(Error("Failed to load image"))},r.src=URL.createObjectURL(e)});async function W(e){let{file:t,config:n}=e;if(!(0,S.isInlinableImageType)(t.type))return t;let r=n.image.maxSizeBytes;if(t.size<=r)return t;let i=r/t.size+.1,o=null;for(;null===o;)try{let e=await V(t,i,n.image.maxDimensionsPixels.short,n.image.maxDimensionsPixels.long);if(e.size>r)throw Error("File size still too large");(o=e).v0Type=t.v0Type}catch(e){i<=0?o=t:i-=.1}return o}var q=e.i(818711),Z=e.i(281808),K=e.i(707827),$=e.i(376346),Y=e.i(696871);function J(e){let{size:n,status:r,isUploaded:i,progress:o,showSuccess:a}=e,c=(0,m.useT)();if("processing"===r)return(0,t.jsxs)("div",{className:"inline-flex items-center gap-1 text-v0-gray-900",children:[i?(0,t.jsx)("span",{className:"text-[13px] leading-[18px]",children:c("projectSettings.isIndexing")}):(0,t.jsx)("span",{className:"text-[13px] leading-[18px]",children:c("projectSettings.isUploading")}),o?(0,t.jsxs)("span",{className:"text-[13px] leading-[18px]",children:["(",Math.round(100*o),"%)"]}):null]});if(a)return(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 text-[13px] leading-[18px] text-v0-blue-700",children:[(0,t.jsx)(s.CheckCircle,{size:12}),c("projectSettings.uploaded")]});if("error"===r)return(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 text-[13px] leading-[18px] text-v0-red-700",children:[(0,t.jsx)(l.Warning,{size:12}),c("projectSettings.uploadError")]});let u=n?n>1048576?"".concat((n/1048576).toFixed(2),"MB"):"".concat((n/1024).toFixed(2),"KB"):"---";return(0,t.jsx)("div",{className:"inline-flex items-center text-[13px] leading-[18px] text-v0-gray-900",children:u})}function Q(e){let{source:s,className:l}=e,{metadata:d,url:f,sourceId:v,status:x,title:y,finishedAt:b,isOptimistic:w,progress:j}=s,C=!w,k=y||"---",[S,N]=(0,n.useState)(!1),E=(0,m.useT)(),D=(0,p.useCanMakeProjectUpdates)(),[I,A]=(0,q.useDeleteSourceModal)(),{setSource:T}=(0,Z.useRenameSourceModal)();(0,n.useEffect)(()=>{if("success"===x&&b&&Date.now()-new Date(b).getTime()<5e3){N(!0);let e=setTimeout(()=>{N(!1)},5e3);return()=>{clearTimeout(e)}}},[b,x]);let[M,L]=(0,n.useTransition)(),P=(0,n.useCallback)(()=>{f&&L(async()=>{try{let e=new URLSearchParams({url:f,type:"blob"}),t=await fetch("/chat/api/chat/download?".concat(e.toString())),n=await t.blob(),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=k,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(r)}catch(e){r.toast.error(E("projectSettings.downloadSourceError")(e instanceof Error?e.message:void 0))}})},[f,k,E]),R=(0,n.useMemo)(()=>"processing"!==x&&"error"===x?(0,t.jsx)(i.Button,{onClick:()=>{A(v)},size:"sm",variant:"destructive",children:E("projectSettings.delete")}):(0,t.jsxs)(o.DropdownMenu,{children:[(0,t.jsx)(o.DropdownMenuTrigger,{children:(0,t.jsx)(h.MoreButton,{label:E("projectSettings.openSourceActions")})}),(0,t.jsx)(o.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:(0,t.jsxs)(o.DropdownMenuGroup,{children:[D&&(0,t.jsxs)(o.DropdownMenuItem,{onSelect:()=>{T({sourceId:v,sourceName:k})},children:[(0,t.jsx)(c.PencilEdit,{}),(0,t.jsx)("span",{children:E("projectSettings.rename")})]}),f?(0,t.jsxs)(o.DropdownMenuItem,{onSelect:P,disabled:M,children:[(0,t.jsx)(u.Download,{}),(0,t.jsx)("span",{children:E("projectSettings.download")}),M?(0,t.jsx)(K.Spinner,{}):null]}):null,D&&(0,t.jsxs)(o.DropdownMenuItem,{onSelect:()=>{A(v)},variant:"destructive",children:[(0,t.jsx)(a.Trash,{}),(0,t.jsx)("span",{children:E("projectSettings.delete")})]})]})})]}),[x,E,f,P,M,A,v,T,k,D]);return(0,t.jsxs)("div",{className:(0,g.cn)("flex w-full items-center justify-between gap-2 p-3","processing"===x&&"animate-pulse",l),children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-0.5 leading-5",children:[(0,t.jsx)("span",{className:"max-w-[200px] truncate text-sm font-medium sm:max-w-[300px]",children:k}),(0,t.jsx)(J,{size:null==d?void 0:d.size,status:x,isUploaded:C,progress:j,showSuccess:S})]}),D||f?R:null]})}function X(e){let{setSaving:r,projectId:o}=e,a=(0,m.useT)(),{sources:s,isLoading:l,revalidateSources:c,setSources:u}=(0,p.useProjectSources)(o),g=(0,p.useCanMakeProjectUpdates)(),v=s.length||0,x=(0,n.useRef)(null),{inputFileRef:y,onInputChange:b,isUploading:w,isDraggingFile:j}=z({isSignedIn:!0,disablePaste:!0,dragContainerRef:x,canUpload:e=>{let t=Y.ALLOWED_FILE_COUNT["project-source"];return e.length>t?{ok:!1,message:"You can only upload up to ".concat(t," sources")}:{ok:!0}},onUploadStart:e=>{r(!0),u(t=>[{sourceId:e.id,title:e.name,type:"attachment",url:e.url,content:null,description:null,metadata:null,isOptimistic:!0,status:"processing",progress:null,finishedAt:null},...t||[]],{revalidate:!1})},projectId:o||void 0,onFinish:()=>{r(!1),c()}}),C=(0,n.useMemo)(()=>j?(0,t.jsxs)("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center gap-2 rounded-lg border border-dashed border-v0-blue-700 bg-v0-blue-100 shadow-none",children:[(0,t.jsx)(f.EmptyTitle,{className:"text-sm text-v0-blue-700",children:a("projectSettings.dropHere")}),(0,t.jsx)(f.EmptyDescription,{className:"text-sm text-v0-blue-700",children:a("projectSettings.dropHereDescription")})]}):null,[j,a]);return o?l?(0,t.jsx)(h.SectionListSkeleton,{title:a("projectSettings.sources")}):(0,t.jsxs)(h.Section,{label:a("projectSettings.sources"),info:"Sources let v0 use your files and information in responses.",className:"gap-3 p-4",children:[(0,t.jsxs)("div",{className:"relative flex flex-col gap-3",ref:x,"data-sources-drop-container":!0,children:[C,0===v?(0,t.jsx)("div",{className:"transition-all",ref:x,children:(0,t.jsx)(h.EmptyState,{title:a("projectSettings.noSources"),subtitle:a("projectSettings.noSourcesDescription"),className:"h-56",children:(0,t.jsxs)(i.Button,{size:"sm",variant:"secondary",onClick:()=>{var e;null==(e=y.current)||e.click()},children:[(0,t.jsx)(d.CloudUpload,{}),"Upload Files"]})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Button,{variant:"secondary",size:"sm",onClick:()=>{if(g){var e;null==(e=y.current)||e.click()}},children:[(0,t.jsx)(d.CloudUpload,{}),"Upload Files"]}),(0,t.jsx)($.Card,{className:"transition-all",children:s.map((e,n)=>(0,t.jsx)(Q,{source:e,className:n>0?"border-t":""},e.sourceId))}),(0,t.jsx)(Z.default,{projectId:o}),(0,t.jsx)(q.default,{projectId:o})]})]}),(0,t.jsx)("input",{className:"sr-only","data-enable-grammarly":"false","data-gramm":"false","data-gramm_editor":"false",disabled:w,multiple:!0,onChange:e=>{b(e)},ref:y,type:"file"})]}):null}var ee=t,et=n,en=r,er=i,ei=o,eo=e.i(563152),ea=e.i(242084),es=e.i(967472),el=e.i(850491),ec=e.i(486011),eu=e.i(481828);let ed=(0,e.i(936096).withNewIcon)('<path d="M12 8C12 10.2091 10.2091 12 8 12C5.79086 12 4 10.2091 4 8C4 5.79086 5.79086 4 8 4C10.2091 4 12 5.79086 12 8Z" fill="currentColor"/>');var ep=a,eh=p,ef=e.i(692581),em=e.i(670895),eg=e.i(132783),ev=e.i(170160),ex=m,ey=e.i(242759),eb=j,ew=e.i(796669),ej=O,eC=e.i(909270),ek=e.i(762585),eS=e.i(538553);function eN(e){let{setSaving:t,vercelProjectWithDashboard:n,isLoading:r,v0ProjectId:i,closeSettingsSheet:o}=e;return r?(0,ee.jsx)(eA,{}):(0,ee.jsx)(eE,{vercelProjectWithDashboard:n,setSaving:t,v0ProjectId:i,closeSettingsSheet:o})}function eE(e){let{vercelProjectWithDashboard:t,setSaving:n,v0ProjectId:r,closeSettingsSheet:i}=e,{vercelProject:o}=(0,et.useMemo)(()=>{var e,n,r,i;return{vercelProject:null==t?void 0:t.project,deploymentId:null==t||null==(n=t.dashboardProject)||null==(e=n.productionDeployment)?void 0:e.id,alias:null==t||null==(r=t.dashboardProject)?void 0:r.domain,prodBlockInfo:null==t?void 0:t.prodBlockInfo,allAliases:null==t||null==(i=t.dashboardProject)?void 0:i.aliases}},[t]);return(0,ee.jsxs)("div",{className:"border-v0-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,ee.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ee.jsx)(eT,{}),(0,ee.jsxs)("div",{className:"flex flex-col",children:[(0,ee.jsx)("p",{className:"text-sm font-medium text-v0-gray-1000",children:"Vercel"}),(0,ee.jsx)("p",{className:"text-sm text-v0-gray-900",children:t?null==o?void 0:o.name:(0,ee.jsx)("span",{className:"text-v0-gray-900",children:"This project is not connected to Vercel."})})]})]}),t?(0,ee.jsx)(eD,{vercelProjectWithDashboard:t,setSaving:n,v0ProjectId:r,closeSettingsSheet:i}):(0,ee.jsx)(eI,{setSaving:n,v0ProjectId:r})]})}function eD(e){var t;let{vercelProjectWithDashboard:n,setSaving:r,v0ProjectId:i,closeSettingsSheet:o}=e,{activeScopeSlug:a,hasVercelWritePermission:s}=(0,ej.useActiveScope)(),[l,c]=(0,et.useTransition)(),{refetchVercelProject:u}=(0,eh.useVercelProject)({v0ProjectId:i}),d=(0,ex.useT)(),p=(0,ey.useFlags)(),h=(0,eh.useCanMakeProjectUpdates)(),f=null==(t=n.dashboardProject)?void 0:t.link,m=(0,et.useCallback)(()=>{r(!0),c(async()=>{try{let e=await (0,eg.unlinkVercelProject)({v0ProjectId:i});"error"in e||!e.success?en.toast.error(d("projectSettings.projectUnlinkError")):(en.toast.success(d("projectSettings.projectUnlinkSuccess")),await u())}catch(e){en.toast.error(d("projectSettings.projectUnlinkError"))}finally{c(()=>{r(!1)})}})},[i,r,d,u]),g=(0,eb.useRouter)(),{vercelProject:v,prodBlockInfo:x}=(0,et.useMemo)(()=>{var e,t,r,i;return{vercelProject:n.project,deploymentId:null==(t=n.dashboardProject)||null==(e=t.productionDeployment)?void 0:e.id,alias:null==(r=n.dashboardProject)?void 0:r.domain,prodBlockInfo:n.prodBlockInfo,allAliases:null==(i=n.dashboardProject)?void 0:i.aliases}},[n]),y=(0,et.useCallback)(()=>{let e=null==x?void 0:x.blockId;if(e)try{c(async()=>{let t=await (0,ew.forkBlock)(e);if(!t||"string"!=typeof t)return void en.toast.error("error");g.push("/chat/".concat(t)),o()})}catch(e){console.log(e),en.toast.error("error")}},[o,null==x?void 0:x.blockId,g]);return(0,ee.jsxs)(ei.DropdownMenu,{children:[(0,ee.jsx)(ei.DropdownMenuTrigger,{asChild:!0,children:(0,ee.jsxs)(er.Button,{variant:"secondary",size:"sm",children:[(0,ee.jsx)(ed,{className:"text-v0-green-700!"}),"Connected",(0,ee.jsx)(eo.ChevronDownSmall,{})]})}),(0,ee.jsx)(ei.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:(0,ee.jsxs)(ei.DropdownMenuGroup,{children:[p.ppe&&x?(0,ee.jsx)(eC.default,{href:"/chat/".concat(x.chatId,"?b=").concat(x.blockId,"&f=0"),onClick:e=>{e.metaKey||o()},children:(0,ee.jsxs)(ei.DropdownMenuItem,{children:[(0,ee.jsx)(es.Eye,{}),(0,ee.jsx)("span",{children:d("blockActions.openInChat")})]})}):null,!f&&x?(0,ee.jsxs)(ei.DropdownMenuItem,{onSelect:y,children:[(0,ee.jsx)(el.GitBranch,{}),(0,ee.jsx)("span",{children:d("blockActions.fork")})]}):null,(0,ee.jsx)(ei.DropdownMenuItem,{asChild:!0,children:(0,ee.jsxs)("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[(0,ee.jsx)(ea.External,{className:"size-3"}),(0,ee.jsx)("span",{children:d("projectSettings.viewOnVercel")})]})}),p.ppe&&h&&s?(0,ee.jsx)(ei.DropdownMenuItem,{asChild:!0,children:(0,ee.jsxs)("a",{href:"https://vercel.com/".concat(a,"/").concat(v.name,"/settings/domains"),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[(0,ee.jsx)(ec.Globe,{className:"size-3"}),(0,ee.jsx)("span",{children:d("projectSettings.setCustomDomain")})]})}):null,h&&s&&(0,ee.jsxs)(ei.DropdownMenuItem,{variant:"destructive",disabled:l,onClick:m,children:[(0,ee.jsx)(ep.Trash,{}),(0,ee.jsx)("span",{children:d("projectSettings.unlinkVercelProject")})]})]})})]})}function eI(e){let{setSaving:t,v0ProjectId:n}=e,r=(0,ex.useT)(),{setSelectedProjectId:i}=(0,eh.useProjectsForUser)(),{projects:o,isReady:a}=(0,ef.useVercelProjects)(),{hasVercelWritePermission:s}=(0,ej.useActiveScope)(),[l,c]=(0,et.useTransition)(),[u,d]=(0,et.useState)(!1),[p,h]=(0,et.useState)(""),f=(0,et.useMemo)(()=>(null==o?void 0:o.length)&&o.length>0,[o]),m=(null==o?void 0:o.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())))||[],g=(0,et.useCallback)(e=>{i(e.id)},[i]),v=(0,et.useCallback)(e=>{e&&(t(!0),c(async()=>{try{let t=await (0,em.linkVercelProject)({v0ProjectId:n,vercelProjectId:e.id});"error"in t||!t.success||en.toast.success(r("projectSettings.projectLinkSuccess"))}catch(e){en.toast.error(r("projectSettings.projectLinkError"))}finally{c(()=>{t(!1)})}}))},[n,t,r]);return(0,ee.jsxs)(ee.Fragment,{children:[f?(0,ee.jsxs)(ei.DropdownMenu,{children:[(0,ee.jsx)(eS.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,ee.jsx)(ei.DropdownMenuTrigger,{asChild:!0,disabled:l||!a||!s,children:(0,ee.jsx)(er.Button,{variant:"secondary",size:"sm",children:"Connect"})})}),(0,ee.jsx)(ei.DropdownMenuContent,{align:"end",className:"w-[calc(100vw-32px)] overflow-y-auto md:max-w-[467px]",side:"bottom",children:(0,ee.jsx)(ev.ProjectList,{filteredProjects:m,searchQuery:p,setSearchQuery:h,isLoading:!a,selectedProject:void 0,handleLinkProject:v,setShowCreateModal:d})})]}):(0,ee.jsx)(eS.RbacTooltip,{show:!s,requiredRole:"V0Builder",children:(0,ee.jsx)(er.Button,{variant:"secondary",size:"sm",disabled:l||!a||!s,onClick:()=>{s&&d(!0)},children:"Connect"})}),(0,ee.jsx)(ev.CreateProjectModal,{v0ProjectId:n,onClose:()=>d(!1),open:u,onProjectCreated:g})]})}function eA(){return(0,ee.jsxs)("div",{className:"border-v0-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,ee.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ee.jsx)(eT,{}),(0,ee.jsxs)("div",{className:"flex flex-col",children:[(0,ee.jsx)("p",{className:"text-sm font-medium text-v0-gray-1000",children:"Deploy to Vercel"}),(0,ee.jsx)(ek.Skeleton,{className:"my-1 h-4 w-36"})]})]}),(0,ee.jsx)(ek.Skeleton,{className:"h-7 w-24"})]})}function eT(){return(0,ee.jsx)("div",{className:"border-v0-alpha-400 flex size-11 items-center justify-center rounded-lg border bg-[#000000]",children:(0,ee.jsx)(eu.LogoVercel,{color:"background-100",className:"size-3.5"})})}e.s(["VercelProject",()=>eN],921431),e.s(["Git",()=>eJ],666425);var eM=t,eL=n,eP=i,eR=e.i(690733),e_=r,eO=eo,eF=ea,eB=e.i(221871),eV=e.i(389905),ez=el,eH=ek,eU=m,eG=o,eW=e.i(358847),eq=(0,eW.createServerReference)("4068d546280edc137d4953a8270f720975c0e8ba01",eW.callServer,void 0,eW.findSourceMapURL,"startChatFromGit"),eZ=j;e.i(904347);var eK=e.i(37737),e$=O,eY=eS;function eJ(e){var t;let{vercelProjectWithDashboard:n,isLoading:r,v0ProjectId:i,closeSettingsSheet:o,chatId:a,latestBlockId:s}=e;return r?(0,eM.jsx)(e0,{}):(null==n||null==(t=n.dashboardProject)?void 0:t.link)?(0,eM.jsx)(eQ,{dashboardProject:n.dashboardProject,vercelProject:n.project,link:n.dashboardProject.link,v0ProjectId:i,closeSettingsSheet:o}):(0,eM.jsx)(eX,{vercelProjectWithDashboard:n,chatId:a,latestBlockId:s})}function eQ(e){var t,n;let{dashboardProject:r,vercelProject:i,link:o,v0ProjectId:a,closeSettingsSheet:s}=e,l=(0,eU.useT)(),[c,u]=(0,eL.useTransition)(),d=r.link,p=(0,eZ.useRouter)(),h=(0,eL.useCallback)(()=>{if(d)try{u(async()=>{let{chatId:e}=await eq({projectId:a});if(!e||"string"!=typeof e)return void e_.toast.error("error");p.push("/chat/".concat(e)),s()})}catch(e){console.log(e),e_.toast.error("error")}},[d,a,p,s]);return(0,eM.jsxs)("div",{className:"border-v0-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,eM.jsxs)("div",{className:"flex items-center gap-3",children:[(0,eM.jsx)(e1,{}),(0,eM.jsxs)("div",{className:"flex flex-col",children:[(0,eM.jsx)("p",{className:"text-sm font-medium text-v0-gray-1000",children:"GitHub"}),(0,eM.jsx)("p",{className:"text-sm text-v0-gray-900",children:o.repo})]})]}),(0,eM.jsxs)(eG.DropdownMenu,{children:[(0,eM.jsx)(eG.DropdownMenuTrigger,{asChild:!0,disabled:c,children:(0,eM.jsxs)(eP.Button,{variant:"secondary",size:"sm",children:[(0,eM.jsx)(ed,{className:"text-v0-green-700!"}),"Connected",(0,eM.jsx)(eO.ChevronDownSmall,{})]})}),(0,eM.jsx)(eG.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:(0,eM.jsxs)(eG.DropdownMenuGroup,{children:[d?(0,eM.jsxs)(eG.DropdownMenuItem,{onSelect:h,children:[(0,eM.jsx)(ez.GitBranch,{}),(0,eM.jsx)("span",{children:l("projectSettings.forkMainBranch")})]}):null,(0,eM.jsx)(eG.DropdownMenuItem,{asChild:!0,children:(0,eM.jsx)("a",{href:"https://github.com/".concat(null==(t=r.link)?void 0:t.org,"/").concat(null==(n=r.link)?void 0:n.repo),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between",children:(0,eM.jsxs)("span",{className:"flex items-center gap-3",children:[(0,eM.jsx)(eF.External,{className:"size-3"}),(0,eM.jsx)("span",{children:l("projectSettings.viewOnGitHub")})]})})}),(0,eM.jsx)(eG.DropdownMenuItem,{asChild:!0,children:(0,eM.jsx)("a",{href:"".concat(i.url,"/settings/git"),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between",children:(0,eM.jsxs)("span",{className:"flex items-center gap-3",children:[(0,eM.jsx)(eF.External,{className:"size-3"}),(0,eM.jsx)("span",{children:l("projectSettings.manageGit")})]})})})]})})]})]})}function eX(e){let{vercelProjectWithDashboard:t,chatId:n,latestBlockId:r}=e,{hasVercelWritePermission:i}=(0,e$.useActiveScope)(),o=null==t?void 0:t.project;return(0,eM.jsxs)("div",{className:"border-v0-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,eM.jsxs)("div",{className:"flex items-center gap-3",children:[(0,eM.jsx)(e1,{}),(0,eM.jsxs)("div",{className:"flex flex-col",children:[(0,eM.jsx)("p",{className:"text-sm font-medium text-v0-gray-1000",children:"GitHub"}),(0,eM.jsx)("p",{className:"text-sm text-v0-gray-900",children:"This project is not connected to GitHub."})]})]}),(0,eM.jsx)(eR.TooltipProvider,{children:(0,eM.jsxs)(eR.Tooltip,{children:[(0,eM.jsx)(eR.TooltipTrigger,{asChild:!0,children:(0,eM.jsx)("span",{className:"flex items-center justify-center",tabIndex:-1,children:(0,eM.jsx)(eY.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,eM.jsx)(eP.Button,{asChild:!0,type:"button",variant:"secondary",size:"sm",disabled:!o||!i,onClick:()=>{o&&i&&(0,eK.openDialog)({type:"connectRepo",data:{chatId:n,latestBlockId:r}})},children:(0,eM.jsxs)("div",{className:"flex items-center gap-2",children:[!o&&(0,eM.jsx)(eV.LockClosed,{}),(0,eM.jsx)("span",{children:"Connect"})]})})})})}),!o&&(0,eM.jsx)(eR.TooltipContent,{children:"Connect to Vercel to enable GitHub Integration."})]})})]})}function e0(){return(0,eM.jsxs)("div",{className:"border-v0-alpha-400 flex items-center justify-between gap-3 rounded-lg border p-3",children:[(0,eM.jsxs)("div",{className:"flex items-center gap-3",children:[(0,eM.jsx)(e1,{}),(0,eM.jsxs)("div",{className:"flex flex-col",children:[(0,eM.jsx)("p",{className:"text-sm font-medium text-v0-gray-1000",children:"GitHub"}),(0,eM.jsx)(eH.Skeleton,{className:"my-1 h-4 w-36"})]})]}),(0,eM.jsx)(eH.Skeleton,{className:"h-7 w-24"})]})}function e1(){return(0,eM.jsx)("div",{className:"border-v0-alpha-400 flex size-11 items-center justify-center rounded-lg border bg-v0-white",children:(0,eM.jsx)(eB.LogoGithub,{})})}var e2=t,e5=e.i(992879),e4=$,e3=e.i(707974),e9=e.i(216445),e7=e.i(51940);e.i(541536);var e6=e.i(23474),e8=e6;e8.z.object({id:e8.z.string(),title:e8.z.string(),description:e8.z.string().min(3,"Please provide a description.").max(1e3,"Description cannot be longer than 1000 characters"),source:e8.z.object({title:e8.z.string(),url:e8.z.string(),description:e8.z.string().optional()}),code:e8.z.string(),createdAt:e8.z.string().or(e8.z.number()),meta:e8.z.object({project:e8.z.string(),file:e8.z.string()})}).pick({id:!0,title:!0,description:!0,source:!0,code:!0,createdAt:!0,meta:!0});let te=e8.z.enum(["registry:style","registry:lib","registry:example","registry:block","registry:component","registry:ui","registry:hook","registry:theme","registry:page","registry:file","registry:internal","registry:item"]),tt=e8.z.discriminatedUnion("type",[e8.z.object({path:e8.z.string(),content:e8.z.string().optional(),type:e8.z.enum(["registry:file","registry:page"]),target:e8.z.string()}),e8.z.object({path:e8.z.string(),content:e8.z.string().optional(),type:te.exclude(["registry:file","registry:page"]),target:e8.z.string().optional()})]),tn=e8.z.object({config:e8.z.object({content:e8.z.array(e8.z.string()).optional(),theme:e8.z.record(e8.z.string(),e8.z.any()).optional(),plugins:e8.z.array(e8.z.string()).optional()}).optional()}),tr=e8.z.object({light:e8.z.record(e8.z.string(),e8.z.string()).optional(),dark:e8.z.record(e8.z.string(),e8.z.string()).optional()}),ti=e8.z.object({$schema:e8.z.string().optional(),name:e8.z.string(),type:te,title:e8.z.string().optional(),author:e8.z.string().min(2).optional(),description:e8.z.string().optional(),dependencies:e8.z.array(e8.z.string()).optional(),devDependencies:e8.z.array(e8.z.string()).optional(),registryDependencies:e8.z.array(e8.z.string()).optional(),files:e8.z.array(tt).optional(),tailwind:tn.optional(),cssVars:tr.optional(),meta:e8.z.record(e8.z.string(),e8.z.any()).optional(),docs:e8.z.string().optional(),categories:e8.z.array(e8.z.string()).optional()});e8.z.object({version:e8.z.literal(2),id:e8.z.string(),payload:ti,source:e8.z.object({title:e8.z.string(),url:e8.z.string(),description:e8.z.string().optional()}),createdAt:e8.z.string().or(e8.z.number()),meta:e8.z.object({project:e8.z.string(),file:e8.z.string()})}).pick({id:!0,version:!0,payload:!0,source:!0,createdAt:!0,meta:!0}),ti.extend({meta:e6.z.object({blockId:e6.z.string().optional(),templateId:e6.z.string().optional(),images:e6.z.array(e6.z.object({url:e6.z.string(),name:e6.z.string(),size:e6.z.number()})).optional(),author:e6.z.string().min(2,"Author is required and must be at least 2 characters long."),env:e6.z.array(e6.z.object({name:e6.z.string(),url:e6.z.string().optional()})).optional()})}),e6.z.object({filename:e6.z.string().min(1).max(100),file:e6.z.instanceof(ArrayBuffer).refine(e=>e.byteLength>0).refine(e=>e.byteLength/1048576<=5)});let to=1e4;e6.z.object({blockId:e6.z.string(),description:e6.z.string().max(to,"Description must be less than ".concat(to," characters.")).optional(),imageUrl:e6.z.string().url("Please upload an image for your template.").optional().or(e6.z.literal("")),category:e6.z.enum(["apps-and-games","components","forms","dashboards","landing-pages","login-and-sign-up","blog-and-portfolio","ecommerce","ai"],{required_error:"Category is required",invalid_type_error:"Category is invalid"}),envVarKeys:e6.z.array(e6.z.string()).optional()}).extend({imageUrl:e6.z.string().url("Please upload an image for your template.").nullable().optional()});var ta=e.i(592258),ts=e.i(132440),tl=i,tc=d,tu=a,td=e.i(211976),tp=ek;function th(e){let{isPending:t,values:n,setValues:r,files:i,uploading:o,removeFile:a,inputFileRef:s,onInputChange:l,awaitingThumbnail:c}=e;return(0,e2.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,e2.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,e2.jsx)("div",{className:"text-label-14 text-v0-gray-900",children:"Thumbnail (1920 x 1080 recommended)"}),c?(0,e2.jsx)(tp.Skeleton,{className:"aspect-video w-full"}):i.length>0&&i[0].url&&!o?(0,e2.jsxs)(e4.Card,{className:"relative aspect-video w-full overflow-hidden rounded-lg",children:[(0,e2.jsx)(tl.Button,{disabled:t,variant:"secondary",className:"absolute right-2 top-2 z-10 size-7 rounded-md",onClick:()=>{var e;return a(null==(e=i[0])?void 0:e.id)},tooltip:{content:"Remove thumbnail",side:"bottom"},children:(0,e2.jsx)(tu.Trash,{})}),(0,e2.jsx)(e5.default,{src:i[0].url,alt:"Template thumbnail",className:"pointer-events-none z-0 object-cover",fill:!0})]}):(0,e2.jsx)(e4.Card,{className:"bg-v0-background-200 relative aspect-video w-full",children:(0,e2.jsxs)("label",{className:"flex size-full flex-col items-center justify-center gap-3",children:[(0,e2.jsx)(tc.CloudUpload,{className:"size-4 text-v0-gray-900!"}),(0,e2.jsx)("div",{className:"text-label-14 text-v0-gray-900",children:"Drop or upload a thumbnail here"}),(0,e2.jsx)(td.SpinnerButton,{variant:"secondary",pending:o,onClick:e=>{var t;e.preventDefault(),e.stopPropagation(),null==(t=s.current)||t.click()},children:o?"Uploading":"Upload"}),(0,e2.jsx)("input",{accept:"image/*",className:"sr-only",max:1,type:"file",onChange:l,ref:s,disabled:t||o})]})})]}),(0,e2.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,e2.jsxs)(e3.Label,{htmlFor:"category",className:"text-label-14 text-v0-gray-900",children:["Category",(0,e2.jsx)("span",{className:"text-v0-red-700",children:"*"})]}),(0,e2.jsxs)(ta.Select,{value:(0,ts.getTemplateCategory)(n.category),disabled:t,onValueChange:e=>r(t=>({...t,category:e})),required:!0,children:[(0,e2.jsx)(ta.SelectTrigger,{id:"category",className:"disabled:border-v0-alpha-400 disabled:bg-v0-gray-100 disabled:text-v0-gray-500 disabled:opacity-100 disabled:ring-0",children:(0,e2.jsx)(ta.SelectValue,{placeholder:"Select a category"})}),(0,e2.jsx)(ta.SelectContent,{children:ts.templateCategories.map(e=>(0,e2.jsx)(ta.SelectItem,{value:e.value,children:e.text},e.value))})]})]}),(0,e2.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,e2.jsx)(e3.Label,{htmlFor:"description",className:"text-label-14 text-v0-gray-900",children:"Description"}),null===n.description?(0,e2.jsx)(tp.Skeleton,{className:"h-48 w-full"}):(0,e2.jsx)(e9.Textarea,{asChild:!0,children:(0,e2.jsx)(e7.ResizableTextArea,{maxHeight:192,minHeight:80,disabled:t,id:"description",maxLength:to,name:"description",placeholder:"Describe your template...",spellCheck:!1,onChange:e=>r(t=>({...t,description:e.target.value})),value:n.description||""})})]})]})}e.s(["CommunityDetails",()=>th],196606);var tf=eW,tm=(0,tf.createServerReference)("4024906ce3f28a6bb7e7f1ed16111a42850c018b6e",tf.callServer,void 0,tf.findSourceMapURL,"editTemplateAction");e.s(["editTemplateAction",()=>tm],687785);var tg=eW,tv=(0,tg.createServerReference)("60e45ab5d58a22d30293aa12b6aa115d175a38103a",tg.callServer,void 0,tg.findSourceMapURL,"updateProjectSettingsCommunityEnabled");e.s(["updateProjectSettingsCommunityEnabled",()=>tv],995570)},484569,e=>{"use strict";var t=e.i(358847),n=(0,t.createServerReference)("402672cac7dbdc2ee7b895049d78ce7758a8b6353f",t.callServer,void 0,t.findSourceMapURL,"uploadAssetAction"),r=e.i(743124);e.i(563948);var i=e.i(407562);let o="1 MB",a=1,s=["png","jpg","jpeg","webp"],l=1048576,c=e=>{let{initialImages:t,disableDrag:c=!1,containerRef:d}=e,p=r.useRef(null),[h,f]=r.useState(!1),[m,g]=r.useState(!1),[v,x]=r.useState(()=>{var e;return null!=(e=null==t?void 0:t.map(e=>({id:crypto.randomUUID(),file:new File([],e.name),size:e.size,status:"success",url:e.url})))?e:[]}),y=r.useCallback(e=>{x(e.map(e=>({id:crypto.randomUUID(),file:new File([],e.name),size:e.size,status:"success",url:e.url})))},[]),b=r.useCallback(async e=>{var t;let r=1===a&&1===v.length&&e.length>=1,c=r?0:v.length;if(r&&(null==(t=v[0])?void 0:t.url))try{URL.revokeObjectURL(v[0].url)}catch(e){}if(c+e.length>a)return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),i.toast.error("File limit exceeded",{description:"You can only upload up to ".concat(a," images.")});if(e.find(e=>{var t;let n=null==(t=e.name.split(".").pop())?void 0:t.toLowerCase();return!n||!s.includes(n)}))return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),i.toast.error("Invalid file type",{description:"Allowed file types: ".concat(s.join(", "))});let u=e.find(e=>e.size>l);if(u)return e.forEach(e=>{URL.revokeObjectURL(URL.createObjectURL(e))}),i.toast.error("File too large",{description:"The file ".concat(u.name," is larger than ").concat(o,".")});f(!0);let d=e.map(e=>({id:crypto.randomUUID(),file:e,status:"pending",url:URL.createObjectURL(e),size:e.size}));for(let e of(x(e=>r?[...d]:[...e,...d]),d)){x(t=>t.map(t=>t.id===e.id?{...t,status:"uploading"}:t));try{let t=new FormData;t.append("file",e.file,e.file.name);let r=await n(t);if(r.error){x(t=>t.map(t=>t.id===e.id?{...t,status:"error",error:r.error}:t)),i.toast.error("Failed to upload file",{description:r.error});continue}let o=r.url;x(t=>t.map(t=>t.id===e.id?{...t,status:"success",url:o}:t))}catch(t){x(t=>t.map(t=>t.id===e.id?{...t,status:"error",error:"Upload failed"}:t))}}f(!1)},[v.length]),w=r.useCallback(async e=>{if(g(!1),h||(e.preventDefault(),e.stopPropagation(),!e.dataTransfer))return;let{files:t}=e.dataTransfer;u(t)&&await b(Array.from(t))},[b,h]);r.useEffect(()=>{if(c)return;let e=()=>g(!0),t=()=>g(!1),n=e=>{e.preventDefault(),e.stopPropagation()},r=e=>{w(e).catch(console.error)},i=(null==d?void 0:d.current)||window;return i.addEventListener("dragenter",e),document.documentElement.addEventListener("mouseleave",t),i.addEventListener("dragover",n),i.addEventListener("drop",r),()=>{i.removeEventListener("dragenter",e),document.documentElement.removeEventListener("mouseleave",t),i.removeEventListener("dragover",n),i.removeEventListener("drop",r)}},[c,w,b,d]);let j=async e=>{u(e.target.files)&&e.target.files&&await b(Array.from(e.target.files))},C=r.useCallback(e=>{x(t=>{let n=t.find(t=>t.id===e);return(null==n?void 0:n.url)&&URL.revokeObjectURL(n.url),t.filter(t=>t.id!==e)})},[]);return{files:v,setFiles:x,setInitialFiles:y,uploading:h,isDraggingFile:m,inputFileRef:p,onInputChange:j,removeFile:C}};function u(e){if(!(null==e?void 0:e.length))return!1;if(e.length>a)return i.toast.error("File limit exceeded",{description:"You can only upload up to ".concat(a," images at a time.")}),!1;for(let t of e)if(!t.type.startsWith("image/"))return i.toast.error("Invalid file type",{description:"Please upload image files only"}),!1;return!0}e.s(["useTemplateFileUpload",()=>c],484569)},723073,689253,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(196606),i=e.i(183673),o=e.i(687785);e.i(563948);var a=e.i(407562),s=e.i(211976),l=e.i(990453),c=e.i(707974),u=e.i(502398),d=e.i(242084),p=e.i(297239),h=e.i(995570),f=e.i(484569),m=e.i(376346),g=e.i(762585),v=e.i(132440);function x(e){var x;let{projectId:y,containerRef:b}=e,w=(0,p.useT)(),{data:j,mutate:C}=(0,i.useCommunityProject)(y),k=(0,i.useCanMakeProjectUpdates)(),[S,N]=(0,n.useTransition)(),[E,D]=(0,n.useState)(!1),[I,A]=(0,n.useState)(!1),[T,M]=(0,n.useOptimistic)(!!((null==j?void 0:j.templateCanonId)&&!j.deletedAt)),L=(null==j?void 0:j.templateVersion)?j.templateVersion.description:null,[P,R]=(0,n.useState)({description:L,category:null!=(x=(0,v.getTemplateCategory)(null==j?void 0:j.category))?x:null}),_=(null==j?void 0:j.category)!==null&&(null==j?void 0:j.templateVersion.description)!==null&&(null==j?void 0:j.templateVersion.imageUrl)!==null,{files:O,uploading:F,removeFile:B,inputFileRef:V,onInputChange:z,setInitialFiles:H}=(0,f.useTemplateFileUpload)({initialImages:(null==j?void 0:j.templateVersion)&&j.templateVersion.imageUrl?[{url:j.templateVersion.imageUrl,name:"Current Image"}]:[],disableDrag:!1,containerRef:b}),U=()=>j?P.category?O.length&&"success"===O[0].status?void N(async()=>{var e;let t=await (0,o.editTemplateAction)({blockId:j.templateVersion.blockId,description:P.description||"",category:null!=(e=P.category)?e:void 0,imageUrl:O[0].url});if(t.error)return void a.toast.error(t.error);a.toast.success("Update successful")}):void a.toast.error("Please add a thumbnail image"):void a.toast.error("Please select a category"):void a.toast.error("Template not found");(0,n.useEffect)(()=>{j&&"templateVersionId"in j&&!j.templateVersionId.startsWith("none-")&&(R(e=>{var t;return{description:j.templateVersion.description||e.description,category:null!=(t=(0,v.getTemplateCategory)(j.category||e.category))?t:null}}),j.templateVersion.imageUrl?(H([{url:j.templateVersion.imageUrl,name:"Current Image"}]),A(!1)):A(!0))},[j,H,I]);let G=e=>{S||(e&&D(!0),(0,n.startTransition)(async()=>{try{M(e);let t=await (0,h.updateProjectSettingsCommunityEnabled)(y,e);await C(),e?void 0!==t&&"templateVersionId"in t&&!t.templateVersionId.startsWith("none-")?a.toast.success("Your project has been enabled for v0 Community"):a.toast.success("Your project will be enabled for v0 Community after the next successful deployment"):a.toast.success("Your project is no longer visible on v0 Community")}catch(e){a.toast.error("Failed to update Community Status")}finally{D(!1)}}))},W=j&&"templateVersionId"in j&&!j.templateVersionId.startsWith("none-");return(0,t.jsxs)("div",{className:"flex size-full flex-col",children:[(0,t.jsxs)("div",{className:"z-0 flex grow flex-col gap-4 overflow-y-auto p-4",children:[(0,t.jsxs)("div",{className:"bg-v0-background-300 border-v0-alpha-400 flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)(c.Label,{className:"flex cursor-pointer flex-col gap-1",htmlFor:"project-community-switch",children:[(0,t.jsxs)("span",{className:"flex gap-2 font-medium leading-[16px] text-v0-gray-1000",children:[(0,t.jsx)("span",{children:w("projectCommunity.title")}),(null==j?void 0:j.templateCanonId)&&!j.templateVersionId.startsWith("none-")&&(0,t.jsx)(u.Link,{href:"/community/".concat(j.templateCanonId),target:"_blank",children:(0,t.jsx)(d.External,{})})]}),(0,t.jsx)("span",{className:"text-v0-gray-900",children:w("projectCommunity.description")()})]}),(0,t.jsx)(l.Switch,{id:"project-community-switch",checked:T,onCheckedChange:G,disabled:!k})]}),T&&(E?(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"text-label-14 text-v0-gray-900",children:"Thumbnail (1920 x 1080 recommended)"}),(0,t.jsx)(g.Skeleton,{className:"aspect-video w-full"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)(c.Label,{htmlFor:"category",className:"text-label-14 text-v0-gray-900",children:["Category",(0,t.jsx)("span",{className:"text-v0-red-700",children:"*"})]}),(0,t.jsx)(g.Skeleton,{className:"h-10 w-full"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(c.Label,{htmlFor:"description",className:"text-label-14 text-v0-gray-900",children:"Description"}),(0,t.jsx)(g.Skeleton,{className:"h-48 w-full"})]})]}):W?(0,t.jsx)(r.CommunityDetails,{isPending:S,values:P,setValues:R,files:O,uploading:F,removeFile:B,inputFileRef:V,onInputChange:z,awaitingThumbnail:I}):(0,t.jsxs)(m.Card,{className:"bg-v0-background-200 flex aspect-video w-full flex-col items-center justify-center gap-2",children:[(0,t.jsx)("div",{className:"text-label-14 font-medium",children:"No Template Version"}),(0,t.jsx)("div",{className:"text-label-14 text-pretty text-center text-v0-gray-900",children:"Your project will be enabled for v0 Community after the next successful deployment"})]}))]}),T&&W&&(0,t.jsx)("div",{className:"bg-v0-background-200 shrink-0 border-t p-4",children:(0,t.jsx)(s.SpinnerButton,{className:"w-full",size:"sm",pending:S,disabled:F||!_,onClick:U,children:S?"Saving":"Save Changes"})})]})}e.s(["default",()=>x],723073);var y=t,b=n,w=e.i(89440),j=e.i(548866),C=e.i(660348),k=g,S=n;e.i(472428);var N=e.i(152641);let E=new Map;function D(e){let{deploymentId:t}=e,[n,r]=(0,S.useState)(void 0),{data:i}=(0,N.useServerQuerySWR)(["deployment","logs"],{deploymentId:t,since:n},{refreshInterval:1e3,keepPreviousData:!0}),[o,a]=(0,S.useState)([]),s=(0,S.useRef)(new Map);return(0,S.useEffect)(()=>{E.has(t)||E.set(t,new Map),s.current=E.get(t)},[t]),(0,S.useEffect)(()=>{var e;r(null==i?void 0:i.nextSince),(null!=(e=null==i?void 0:i.logs)?e:[]).forEach(e=>{e.id&&s.current.set(e.id,e)}),a(Array.from(s.current.values()))},[i]),{logs:o,data:i}}var I=n;function A(){let e=(0,I.useRef)(null),t=(0,I.useRef)(!0);return(0,I.useEffect)(()=>{let n=e.current;if(!n)return;let r=()=>{let{scrollHeight:e,scrollTop:r,clientHeight:i}=n;t.current=e-r-i<200},i=()=>{if(e.current&&t.current){let{scrollHeight:t,scrollTop:n,clientHeight:r}=e.current,i=t-n-r;e.current.scrollTo({top:e.current.scrollHeight,behavior:i>700?"auto":"smooth"})}},o=new ResizeObserver(i),a=new MutationObserver(i);return n.addEventListener("scroll",r),o.observe(n),a.observe(n,{childList:!0,subtree:!0,characterData:!0}),i(),()=>{n.removeEventListener("scroll",r),o.disconnect(),a.disconnect()}},[]),e}function T(e){let{deploymentId:t}=e,n=A(),{logs:r,data:i}=D({deploymentId:t}),o=(0,b.useMemo)(()=>0===r.length?(0,y.jsx)(k.Skeleton,{className:"h-full w-full"}):(null==i?void 0:i.logs)?(0,y.jsx)("div",{className:"text-[7px] font-mono flex flex-col",children:r.map(e=>{var t;return(0,y.jsx)("span",{className:M({level:null!=(t=e.level)?t:"info"}),children:(0,y.jsx)("span",{className:"overflow-wrap-anywhere break-all",children:e.text})},e.id)})}):(0,y.jsx)(j.EmptyState,{title:"Unable to fetch logs",variant:"error",icon:(0,y.jsx)(C.Stop,{}),children:"There was an error deploying your chat. Please try again."}),[i,r]);return(0,y.jsx)("div",{className:"no-scrollbar flex h-full w-full flex-col overflow-y-scroll",ref:n,children:o})}let M=(0,w.cva)("relative flex flex-row items-start px-2 py-[2px] first:pt-1 last:pb-1",{variants:{level:{info:"text-v0-gray-900",error:"bg-v0-red-200 text-v0-red-900",warning:"bg-v0-amber-300 text-v0-amber-900"}}});e.s(["DeploymentLogs",()=>T],689253)},373998,e=>{"use strict";var t=e.i(490293),n=e.i(753533),r=e.i(142219),i=e.i(819969),o=e.i(470259);let a=new Map,s=(0,n.cacheResultById)(a,()=>({isOpen:(0,t.atom)(!1),openLocation:(0,t.atom)(null),selectedEnvironment:(0,t.atom)(null),protection:(0,t.atom)("public"),newBranchName:(0,t.atom)(null),newBranchNameError:(0,t.atom)(null),protectionPassword:(0,t.atom)(null),stageIntent:(0,t.atom)(null),newDomain:(0,t.atom)(null),passingState:(0,t.atom)(null),deployWarning:(0,t.atom)(null),hasDeployableChanges:(0,t.atom)(!1),domainError:(0,t.atom)(null),domainErrorRedirect:(0,t.atom)(null),asyncActionLoading:(0,t.atom)(null),activeBlockVersionNumber:(0,t.atom)(null),deployButtonClickedAtTimestamp:(0,t.atom)(null),deployCreationStartTimestamp:(0,t.atom)(null),deployCreationEndTimestamp:(0,t.atom)(null),selectedTemplate:(0,t.atom)(null),templateAction:(0,t.atom)(null),templateEntryChoice:(0,t.atom)(null)})),l=new Map,c=(0,n.cacheResultById)(l,e=>{let n=s(e),r=(0,i.getChatAtoms)(e),a=(0,t.atom)(e=>["not-deployed","deployed","git-pushed-no-deploy","failed"].includes(e(r.deploymentState))&&!e(r.isStreaming)),l=(0,t.atom)(e=>e(a)&&"deploy"!==e(n.asyncActionLoading)),c=(0,t.atom)(e=>"preview"===e(n.selectedEnvironment)?e(a)&&!!e(n.newBranchName):e(a)&&"pushing"!==e(n.asyncActionLoading));return{...n,externalMeta:r.externalMeta,deploymentState:r.deploymentState,isAbleToDeploy:l,isAbleToPushChanges:c,stage:(0,t.atom)(e=>{var t;let i=e(r.externalMeta);if(i.error){if(i.error===o.MISSING_MFA_SCOPE)return"two-factor-error";if(i.error!==o.NOT_FOUND)return"error"}if(e(n.deployWarning))return"deploy-warning";let a=e(n.stageIntent);return a||((null==(t=i.deployment)?void 0:t.id)?"deployment":"create")}),statusDotVariant:(0,t.atom)(e=>{if(e(n.passingState))return null;if(e(n.hasDeployableChanges))switch(e(r.deploymentState)){case"not-deployed":case"deployed":return"success";case"failed":return"error"}return null}),buttonVariant:(0,t.atom)(e=>{let t=e(n.passingState);if(t)switch(t){case"passing-deployed":return"secondary";case"passing-error":return"red"}let i=e(r.deploymentState);if(e(n.hasDeployableChanges)&&"failed"===i)return"primary";if(!e(n.hasDeployableChanges)&&"failed"===i)return"red";if("error"===i)return"secondary";switch(i){case"deployed":case"not-deployed":return"primary";default:return"secondary"}}),isNewDomainValid:(0,t.atom)(e=>{let t=e(n.newDomain);return!!t&&/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$/.test(t)}),asyncActionLoadingLabel:(0,t.atom)(e=>{let t=e(n.asyncActionLoading),r={deploy:"Deploying","assigning-domain":"Assigning Domain",pushing:"Pushing","auto-fixing-errors":"Auto-fixing Errors","auto-fixing-warning":"Auto-fixing Warning"};return t?r[t]:null})}});function u(e){let t=s(e);return{setIsOpenForLocation:(e,n)=>{e?(r.store.set(t.openLocation,n),r.store.set(t.isOpen,!0)):(r.store.set(t.isOpen,!1),r.store.set(t.openLocation,null))},setStageIntent:e=>r.store.set(t.stageIntent,e),setAsyncActionLoading:e=>r.store.set(t.asyncActionLoading,e),updateNewBranchName:e=>{let n=null==e?void 0:e.replace(/\s+/g,"-");r.store.set(t.newBranchName,null!=n?n:null),r.store.set(t.newBranchNameError,null)},setActiveBlockVersionNumber:e=>{r.store.set(t.activeBlockVersionNumber,e)},setDeployButtonClickedAtTimestamp:e=>{r.store.set(t.deployButtonClickedAtTimestamp,e)},setDeployCreationStartTimestamp:e=>{r.store.set(t.deployCreationStartTimestamp,e)},setDeployCreationEndTimestamp:e=>{r.store.set(t.deployCreationEndTimestamp,e)},setSelectedEnvironment:e=>r.store.set(t.selectedEnvironment,e),setProtection:e=>r.store.set(t.protection,e),setProtectionPassword:e=>r.store.set(t.protectionPassword,e),setNewBranchNameError:e=>r.store.set(t.newBranchNameError,e),clearBranchNameError:()=>r.store.set(t.newBranchNameError,null),triggerPassingState:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return r.store.set(t.passingState,e),setTimeout(()=>{r.store.set(t.passingState,null)},n)},setDeployWarning:e=>r.store.set(t.deployWarning,e),setHasDeployableChanges:e=>r.store.set(t.hasDeployableChanges,e),setNewDomain:e=>r.store.set(t.newDomain,e),setDomainError:e=>r.store.set(t.domainError,e),setDomainErrorRedirect:e=>r.store.set(t.domainErrorRedirect,e),setSelectedTemplate:e=>r.store.set(t.selectedTemplate,e),setTemplateAction:e=>r.store.set(t.templateAction,e),setTemplateEntryChoice:e=>r.store.set(t.templateEntryChoice,e)}}e.s(["getChatDeploymentActions",()=>u,"getChatDeploymentAtoms",0,c])},633035,582010,369218,e=>{"use strict";var t=e.i(509473),n=e.i(660348),r=e.i(762585),i=e.i(992879),o=e.i(639056),a=e.i(743124),s=e.i(470259),l=e.i(452703),c=e.i(689253);e.i(528517);var u=e.i(435106),d=e.i(373998);function p(e){let{deploymentId:p}=e,h=(0,l.getDeploymentAtoms)(p),{deployment:f,error:m}=(0,o.useAtomValue)(h.status),g=(0,o.useAtomValue)(h.state),v=(0,o.useAtomValue)((0,u.getUserInputAtoms)().isPointerDown),x=(0,d.getChatDeploymentAtoms)(p),y=(0,o.useAtomValue)(x.hasDeployableChanges),b=(0,a.useMemo)(()=>{if(m&&m!==s.NOT_FOUND)return(0,t.jsx)(n.Stop,{className:"size-4 !text-v0-red-700"});switch(g){case"queued":case"deploying":return(0,t.jsx)("div",{className:"text-label-14 flex items-center justify-center gap-2 text-v0-gray-900",children:"Loading..."});case"building":case"failed":case"error":if(!f)return null;return(0,t.jsx)("div",{className:"group relative h-full w-full",children:(0,t.jsx)(c.DeploymentLogs,{deploymentId:f.id})});case"deployed":case"not-deployed":return(0,t.jsx)("div",{className:"group relative flex h-full w-full items-center justify-center overflow-hidden",children:(null==f?void 0:f.screenshotUrl)?(0,t.jsx)(i.default,{src:f.screenshotUrl,alt:"Deployment Card Preview",width:480,height:360,className:"absolute h-full w-full object-cover transition-all duration-300 group-hover:scale-105"}):(0,t.jsx)(r.Skeleton,{})});default:return(0,t.jsx)(n.Stop,{className:"size-4 !text-v0-red-700"})}},[m,g,v,f,y]);return(0,a.useMemo)(()=>m?"error":g,[m,g]),(0,t.jsx)("div",{className:"border-v0-alpha-400 bg-v0-background-200 relative flex h-[88px] w-[130px] items-center justify-center overflow-hidden rounded-md border",children:b})}e.s(["DeploymentPreview",()=>p],633035);var h=t,f=r,m=e.i(403055);function g(e){let{title:t,children:n,className:r,...i}=e;return(0,h.jsxs)("div",{className:(0,m.cn)("flex min-w-0 flex-col items-start gap-1 overflow-hidden",r),...i,children:[t?(0,h.jsx)(g.Title,{children:t}):null,n]})}g.Title=function(e){let{children:t}=e;return(0,h.jsx)("span",{className:"text-label-14 text-v0-gray-900",children:t})},g.Item=function(e){let{children:t,Icon:n,mono:r=!1,className:i,...o}=e;return(0,h.jsxs)("div",{className:(0,m.cn)("flex h-5 w-full min-w-0 items-center gap-2 *:truncate [&_a:hover]:underline",r?"text-label-13-mono":"text-label-14",i),...o,children:[n?(0,h.jsx)("span",{className:"min-w-4 text-v0-gray-900",children:(0,h.jsx)(n,{className:"flex-none"})}):null,t]})},g.ItemSkeleton=function(e){let{width:t}=e;return(0,h.jsx)(g.Item,{children:(0,h.jsx)(f.Skeleton,{className:"h-4 w-full",style:{width:t}})})},e.s(["Attribute",()=>g],582010);let v="LOADING_SKELETON";e.s(["LOADING_SKELETON",0,v],369218)},455690,e=>{"use strict";function t(e){return"v0[bot]"===e.meta.githubCommitAuthorLogin}e.s(["isGithubCommitByV0Bot",()=>t])},251198,749709,319543,e=>{"use strict";e.s(["Deployment",()=>ey,"NewDeployment",()=>ew],251198);var t=e.i(509473),n=e.i(633035),r=e.i(762585),i=e.i(743124),o=t,a=e.i(639056),s=i,l=e.i(996174),c=e.i(304649),u=e.i(452703),d=e.i(582010),p=e.i(456915),h=e.i(850491),f=e.i(669589),m=e.i(909270),g=r,v=e.i(369218),x=e.i(675120),y=e.i(230766),b=e.i(350097),w=e.i(455690);function j(e){let{deploymentId:t}=e,n=(0,u.getDeploymentAtoms)(t),{deployment:r}=(0,a.useAtomValue)(n.status),i=(0,s.useMemo)(()=>{if(!r)return(0,o.jsx)(d.Attribute,{children:(0,o.jsx)(d.Attribute.Item,{children:"No domains available"})});let e=r.filteredAliases.filter(e=>e.alias!==r.bestDomain);return(0,o.jsx)(d.Attribute,{title:r.git?"Domain":"",children:(0,o.jsx)(d.Attribute.Item,{children:r.bestDomain!==v.LOADING_SKELETON&&r.bestDomain?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m.default,{href:(0,c.addProtocol)(r.bestDomain),target:"_blank",children:r.bestDomain}),(0,o.jsx)(p.ExternalSmall,{className:"-ml-1 min-w-4"}),e.length?(0,o.jsx)(l.Tooltip,{delayDuration:200,disableHoverableContent:!1,content:(0,o.jsx)("div",{className:"flex flex-col gap-1 px-1.5",children:(0,o.jsx)("ul",{children:e.map(e=>(0,o.jsxs)("li",{className:"flex items-center justify-center space-x-1 text-[11px]",children:[(0,o.jsx)("a",{href:(0,c.addProtocol)(e.alias),target:"_blank",className:"hover:underline",children:e.alias}),(0,o.jsx)(p.ExternalSmall,{className:"min-w-4"})]},e.alias))})}),children:(0,o.jsxs)("span",{className:"flex h-6 w-6 cursor-default select-none items-center justify-center rounded-full bg-v0-gray-100 text-[10px] font-medium text-v0-gray-900",children:["+",e.length]})}):null]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.Skeleton,{className:"h-4 w-[180px]"}),(0,o.jsx)(p.ExternalSmall,{className:"-ml-1 min-w-4"})]})})})},[r]),y=(0,s.useMemo)(()=>{let e=null==r?void 0:r.git;if(e){let n=e.ref,r=e.sha,i="https://github.com/".concat(e.ownerName,"/").concat(e.repoName),a="".concat(i,"/tree/").concat(n),s="".concat(i,"/commit/").concat(r),l=(0,o.jsx)("span",{className:"text-label-13-mono",children:r.substring(0,7)});return(0,o.jsxs)(d.Attribute,{title:"Source",children:[(0,o.jsx)(d.Attribute.Item,{Icon:h.GitBranch,children:(0,o.jsx)(m.default,{href:a,target:"_blank",className:"text-label-13-mono",children:n})}),(0,o.jsxs)(d.Attribute.Item,{Icon:f.GitCommit,children:[r===v.LOADING_SKELETON?(0,o.jsx)(g.Skeleton,{className:"h-4 select-none text-transparent",children:l}):(0,o.jsx)(m.default,{href:s,target:"_blank",className:"inline-flex gap-2",children:l}),(0,o.jsx)("span",{children:"•"}),(0,o.jsx)(C,{shortHand:!0,deploymentId:t})]})]})}return(0,o.jsx)(d.Attribute,{children:(0,o.jsx)(d.Attribute.Item,{children:(0,o.jsx)(C,{deploymentId:t})})})},[null==r?void 0:r.git,t]);return(0,o.jsx)(x.TransitionNode,{...x.PRESETS.fade,renderKey:t,childClassName:"overflow-hidden",children:(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[i,y]})})}function C(e){let{deploymentId:t,shortHand:n=!1}=e,r=(0,u.getDeploymentAtoms)(t),{deployment:i}=(0,a.useAtomValue)(r.status),[l,c]=(0,s.useState)(0);return((0,s.useEffect)(()=>{if(!(null==i?void 0:i.createdAt))return;let e=setInterval(()=>{i.createdAt>Date.now()-65e3&&c(l+1)},200);return()=>clearInterval(e)},[i,l,c]),i&&i.creator)?(0,o.jsxs)("div",{className:"text-label-14 flex items-center gap-1.5 tabular-nums",children:[(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{children:n?null:"Last updated "}),(0,o.jsx)("span",{children:0===i.createdAt?"Just now":(0,b.timeAgo)(new Date(i.createdAt),!0,Date.now(),!1)})]}),(0,w.isGithubCommitByV0Bot)(i)?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y.AvatarUser,{userId:i.creator.uid,rounded:!0,size:"xs"}),(0,o.jsx)("span",{className:"font-medium",children:i.creator.username})]})]}):null}e.i(472428);var k=e.i(152641),S=t,N=a,E=u,D=x,I=e.i(373998),A=t,T=e.i(690733),M=e.i(226092);let L=e=>{let{title:t,icon:n,onClick:r,label:i,disabled:o,disabledReason:a,badge:s}=e;return(0,A.jsx)(T.TooltipProvider,{children:(0,A.jsxs)(T.Tooltip,{delayDuration:0,children:[(0,A.jsx)(T.TooltipTrigger,{asChild:!0,children:(0,A.jsxs)("button",{className:"group disabled:cursor-not-allowed w-full flex flex-row justify-between items-center disabled:hover:bg-transparent hover:bg-v0-gray-100 rounded-[6px] transition-all duration-200 px-2 h-9",onClick:r,disabled:o,type:"button",children:[(0,A.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,A.jsx)("span",{style:{color:o?"var(--color-gray-500)":"inherit"},children:n}),(0,A.jsx)("span",{className:"text-label-14 group-disabled:text-v0-gray-900",children:t}),(0,A.jsx)("div",{className:"mb-0.5",children:s})]}),(0,A.jsxs)("div",{className:"flex flex-row justify-center items-center gap-x-1",children:[i&&(0,A.jsx)("span",{className:"text-label-14 text-v0-gray-900",children:i}),(0,A.jsx)(M.ChevronRightSmall,{className:"!text-v0-gray-900 size-4"})]})]})}),o&&a&&(0,A.jsx)(T.TooltipContent,{side:"left",children:a})]})})};e.s(["default",0,L],749709);var P=k;e.i(904347);var R=e.i(37737),_=e.i(199551),O=e.i(486011),F=e.i(967472);let B=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1 1V12.75C1 13.9926 2.00736 15 3.25 15H15V13.5H3.25C2.83579 13.5 2.5 13.1642 2.5 12.75V1H1ZM14.2971 6.01303L14.8101 5.46596L13.716 4.43989L13.2029 4.98697L9.98259 8.42099L7.707 6.14629C7.31646 5.75589 6.6834 5.75595 6.29293 6.14642L4.21967 8.21967L3.68934 8.75L4.75 9.81066L5.28033 9.28033L7.0001 7.56057L9.28723 9.84681C9.68667 10.2461 10.3373 10.2356 10.7236 9.82361L14.2971 6.01303Z" fill="currentColor"/>');var V=e.i(242759),z=l,H=e.i(751660),U=e.i(794593),G=e.i(346970),W=e.i(403055),q=r;function Z(e){var t,n,r,i;let{deploymentId:o,chatId:a}=e,s=(0,E.getDeploymentAtoms)(o),{deployment:l}=(0,N.useAtomValue)(s.status),c=(0,I.getChatDeploymentAtoms)(a),u=(0,N.useAtomValue)(c.deploymentState),{git:d}=(0,N.useAtomValue)(c.externalMeta),p=(0,N.useAtomValue)(c.hasDeployableChanges),{setStageIntent:h,setTemplateAction:f}=(0,I.getChatDeploymentActions)(a),{data:m}=(0,P.useServerQuerySWR)(["chat","template"],{chatId:a},{suspense:!0}),{data:g}=(0,P.useServerQuerySWR)(["chat","project"],{chatId:a},{suspense:!0}),v="error"in g?null:g,x=(null==d?void 0:d.onProductionBranch)||!d,{dpe:y}=(0,V.useFlags)(),{data:b,isLoading:w}=(0,G.default)((null==v?void 0:v.vercelProjectId)?"/api/chat/deployment/analytics/aggregate?vercelProjectId=".concat(v.vercelProjectId):null,{fetcher:W.fetcher,refreshInterval:3e4,revalidateOnFocus:!0,revalidateOnReconnect:!0});if(!["deployed","not-deployed","queued","deploying","building"].includes(u))return null;let j=m&&"templateCanonId"in m;return(0,S.jsx)(D.TransitionNode,{...D.PRESETS.fade,renderKey:o,childClassName:"overflow-hidden",children:(0,S.jsxs)("div",{className:"flex flex-col gap-1 p-3",children:[(0,S.jsx)(L,{title:"Customize Domain",disabled:!x,icon:(0,S.jsx)(_.PencilEdit,{className:"!text-v0-gray-900 size-4"}),onClick:()=>{h("assign-domain")}}),(0,S.jsx)(L,{title:"Feature on Community",disabled:p,disabledReason:"Your changes must be published to feature your generation on the community.",icon:(0,S.jsx)(O.Globe,{className:"!text-v0-gray-900 size-4"}),badge:K(null==m?void 0:m.templateVersion.publishedToCommunity),onClick:()=>{let e;m&&"templateCanonId"in m?(f("updated"),e=j?"publish-template-changes":"submit-as-template"):(f("created"),e="template-entry"),(0,R.openDialog)({type:"templateWizard",data:{chatId:a,initialStage:e}})},label:j?"Update":void 0}),(0,S.jsx)(L,{title:"Visibility",icon:(0,S.jsx)(F.Eye,{className:"!text-v0-gray-900 size-4"}),onClick:()=>{h("password-protection")},label:(null==v||null==(n=v.vercelProject)||null==(t=n.project.passwordProtection)?void 0:t.deploymentType)==="all"?"Password Protected":(null==v||null==(i=v.vercelProject)||null==(r=i.project.ssoProtection)?void 0:r.deploymentType)==="all"?"SSO Protected":"Public",disabled:!y}),(0,S.jsx)(L,{title:"Inspect on Vercel",icon:(0,S.jsx)($,{className:"!text-v0-gray-900 size-4"}),disabled:!l,onClick:()=>l?window.open(l.inspectorUrl,"_blank"):null}),(0,S.jsx)(L,{title:"Analytics",badge:(null==b?void 0:b.enabled)||w?(0,S.jsx)(U.Badge,{variant:(null==b?void 0:b.visitors)?"blue":"gray",children:w?(0,S.jsx)(q.Skeleton,{}):"".concat((null==b?void 0:b.visitors)||0," ").concat((null==b?void 0:b.visitors)===1?"visitor":"visitors")}):void 0,icon:(0,S.jsx)(B,{className:"!text-v0-gray-900 size-4"}),disabled:!l,onClick:()=>{let e=(null==l?void 0:l.inspectorUrl)?l.inspectorUrl.replace(/\/[^\/]*$/,"/analytics"):null;return e?window.open(e,"_blank"):null}})]})})}let K=e=>{let t=e=>{let{children:t,content:n}=e;return(0,S.jsx)(z.Tooltip,{delayDuration:0,content:(0,S.jsx)("div",{className:"max-w-[300px]",children:n}),children:t})};switch(e){case"approved":return(0,S.jsx)(t,{content:"Your generation is live on the Community.",children:(0,S.jsx)(U.Badge,{variant:"blue",children:"Live"})});case"pending":return(0,S.jsx)(t,{content:"Your community submission is under approval. Once approved, it will be live.",children:(0,S.jsx)(U.Badge,{variant:"amber",children:"Pending"})});case"rejected":return(0,S.jsx)(t,{content:"Your community submission was rejected. Please update your submission and resubmit.",children:(0,S.jsx)(U.Badge,{variant:"red",children:"Rejected"})});case"private":return(0,S.jsx)(t,{content:"Your community submission is private. It will not be visible to the public.",children:(0,S.jsx)(U.Badge,{variant:"gray",children:"Private"})});default:return(0,S.jsx)(t,{content:"Featuring your app in the community will allow people to view the generation and fork it.",children:(0,S.jsx)(U.Badge,{variant:"gray",children:"Not Featured"})})}},$=(0,H.withNewIcon)('<path d="M2.5 11.25C2.5 12.4926 3.50736 13.5 4.75 13.5H6.5V15H4.75C2.67893 15 1 13.3211 1 11.25V9.5H2.5V11.25ZM15 11.25C15 13.3211 13.3211 15 11.25 15H9.5V13.5H11.25C12.4926 13.5 13.5 12.4926 13.5 11.25V9.5H15V11.25ZM11 4C11.5523 4 12 4.44772 12 5V11C12 11.5523 11.5523 12 11 12H5C4.44772 12 4 11.5523 4 11V5C4 4.44772 4.44772 4 5 4H11ZM5.5 10.5H10.5V5.5H5.5V10.5ZM6.5 2.5H4.75C3.50736 2.5 2.5 3.50736 2.5 4.75V6.5H1V4.75C1 2.67893 2.67893 1 4.75 1H6.5V2.5ZM11.25 1C13.3211 1 15 2.67893 15 4.75V6.5H13.5V4.75C13.5 3.50736 12.4926 2.5 11.25 2.5H9.5V1H11.25Z" fill="currentColor"/>');var Y=t,J=i,Q=d,X=r,ee=v,et=t,en=l,er=m;function ei(e){let{bestDomain:t,filteredAliases:n,className:r="",loading:i=!1}=e,o=e=>{window.open(e,"_blank")};return(0,et.jsxs)("div",{className:"relative flex items-center gap-2 ".concat(r," w-full"),children:[(0,et.jsx)("div",{className:"relative flex-1 w-full min-w-0",children:(0,et.jsx)(er.default,{href:"https://".concat(t),target:"_blank",children:(0,et.jsx)("div",{className:"pl-0.5 focus:outline-none box-border w-full text-[14px] transition-all duration-200 cursor-pointer truncate hover:underline",children:t})})}),n.length>0&&(0,et.jsx)(en.Tooltip,{content:(0,et.jsx)("div",{children:n.map((e,t)=>(0,et.jsx)("button",{onClick:()=>o(e.alias),className:"w-full px-2 py-1.5 text-left text-xs hover:bg-v0-background-200 hover:text-v0-gray-1000 transition-colors",children:e.alias},t))}),children:(0,et.jsx)("span",{className:"flex justify-center items-center text-xs font-medium text-v0-gray-900 w-5 aspect-square hover:bg-v0-gray-100 rounded-full transition-all duration-200 cursor-pointer",children:(0,et.jsxs)("div",{children:["+",n.length]})})})]})}var eo=a,ea=u;let es=e=>{let{deploymentId:t}=e,n=(0,ea.getDeploymentAtoms)(t),{deployment:r}=(0,eo.useAtomValue)(n.status),i=(0,eo.useAtomValue)(n.state),o="deploying"===i||"queued"===i||"building"===i;return(0,J.useMemo)(()=>{if(!r)return(0,Y.jsx)(Q.Attribute,{children:(0,Y.jsx)(Q.Attribute.Item,{children:"No domains available"})});let e=r.filteredAliases.filter(e=>e.alias!==r.bestDomain);return r.bestDomain!==ee.LOADING_SKELETON&&r.bestDomain?(0,Y.jsx)(ei,{bestDomain:r.bestDomain,filteredAliases:e,loading:o}):(0,Y.jsx)(X.Skeleton,{className:"h-[21px] w-full rounded-[6px] pl-2"})},[r,o])};var el=t,ec=h,eu=e.i(315266),ed=y,ep=w,eh=a,ef=u,em=i,eg=c;let ev=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),ex=e=>{var t,n,r;let{deploymentId:i}=e,o=(0,ef.getDeploymentAtoms)(i),{deployment:a}=(0,eh.useAtomValue)(o.status),s=null==a||null==(t=a.git)?void 0:t.ref,l=(0,em.useMemo)(()=>{switch(null==a?void 0:a.readyState){case"READY":return(0,el.jsx)("div",{className:"w-4 h-4 rounded-full bg-v0-green-100 flex items-center justify-center",children:(0,el.jsx)("div",{className:"w-2 h-2 rounded-full bg-v0-green-700"})});case"BUILDING":case"QUEUED":case"INITIALIZING":return(0,el.jsxs)("div",{className:"relative w-4 h-4 rounded-full bg-v0-amber-200 flex items-center justify-center",children:[(0,el.jsx)("div",{className:"w-2 h-2 rounded-full bg-v0-amber-700"}),(0,el.jsx)("div",{className:"absolute w-2 h-2 top-1 left-1 rounded-full bg-v0-amber-700 animate-ping opacity-80",style:{animationDuration:"1s"}})]});case"CANCELED":case"ERROR":case"NOTREADY":return(0,el.jsx)("div",{className:"w-4 h-4 rounded-full bg-v0-red-200 flex items-center justify-center",children:(0,el.jsx)("div",{className:"w-2 h-2 rounded-full bg-v0-red-700"})});default:return(0,el.jsx)("div",{className:"w-4 h-4 rounded-full bg-v0-gray-100 flex items-center justify-center",children:(0,el.jsx)("div",{className:"w-2 h-2 rounded-full bg-v0-gray-900"})})}},[null==a?void 0:a.readyState]);return a?(0,el.jsxs)(el.Fragment,{children:[(0,el.jsxs)("div",{className:"text-[14px] flex flex-row justify-start items-center gap-x-1 w-full overflow-hidden",children:[a&&!(0,ep.isGithubCommitByV0Bot)(a)?(0,el.jsx)(ed.AvatarUser,{userId:null==(n=a.creator)?void 0:n.uid,rounded:!0,size:"xs"}):(0,el.jsx)(eu.User,{className:"text-v0-gray-900 w-4 aspect-square"})," ",(0,el.jsxs)("span",{className:"whitespace-nowrap shrink-0",children:["Updated"," ",a.bootedAt?(0,eg.formatDate)(new Date(a.bootedAt),Intl.DateTimeFormat().resolvedOptions().timeZone):null]}),s&&(0,el.jsxs)("div",{className:"flex items-center gap-x-1 flex-1 min-w-0 overflow-hidden",children:[(0,el.jsx)("span",{className:"text-v0-gray-900 shrink-0",children:"•"}),(0,el.jsx)(ec.GitBranch,{className:"w-4 h-4 shrink-0"}),(0,el.jsx)("span",{className:"truncate",children:s})]})]}),(0,el.jsxs)("div",{className:"text-[14px] flex flex-row justify-start items-center gap-x-1",children:[l,(0,el.jsx)("span",{children:ev(null!=(r=a.readyState)?r:"")})]})]}):null};function ey(e){let{deploymentId:n,stopFetch:o=!1}=e;return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(r.Skeleton,{className:"h-[200px] w-full"}),children:(0,t.jsx)(eb,{deploymentId:n,stopFetch:o})})}function eb(e){let{deploymentId:r,stopFetch:i=!0}=e;return(0,k.useServerQuerySWR)(["deployment","status"],{deploymentId:r},{stopFetch:i}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(n.DeploymentPreview,{deploymentId:r}),(0,t.jsx)(j,{deploymentId:r})]})}function ew(e){let{deploymentId:o,stopFetch:a=!0,chatId:s}=e;return(0,k.useServerQuerySWR)(["deployment","status"],{deploymentId:o},{stopFetch:a}),(0,k.useServerQuerySWR)(["scoped","editableTemplates"],{}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"px-2.5 py-1.5 border-b",children:(0,t.jsx)("div",{className:"h-8 flex items-center pl-2 text-sm font-medium",children:"Published App"})}),(0,t.jsx)("div",{className:"p-4 w-full border-b border-v0-alpha-400",children:(0,t.jsxs)("div",{className:"w-full flex flex-row justify-start items-start h-[88px]",children:[(0,t.jsx)(n.DeploymentPreview,{deploymentId:o}),(0,t.jsxs)("div",{className:"flex flex-col justify-between items-start h-full pl-3 flex-1 w-[258px]",children:[(0,t.jsx)(es,{deploymentId:o}),(0,t.jsx)(ex,{deploymentId:o})]})]})}),(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(r.Skeleton,{className:"h-10 w-full"}),children:(0,t.jsx)(Z,{deploymentId:o,chatId:s})})]})}var ej=e.i(358847),eC=(0,ej.createServerReference)("60bfc459f12cc1fcfe824432960fa6f95ae6f1effa",ej.callServer,void 0,ej.findSourceMapURL,"updateProjectShowV0Button");e.s(["updateProjectShowV0Button",()=>eC],319543)},618262,324141,520605,404836,917772,306283,714249,907116,365449,867160,344290,857371,14791,416959,270084,930597,280419,348327,332991,251016,479963,e=>{"use strict";let t,n;e.s(["SuspendingSettingsButton",()=>ty],618262);var r=e.i(509473),i=e.i(209819),o=e.i(53223),a=e.i(199551),s=e.i(922106),l=e.i(28683),c=e.i(486011),u=e.i(282608),d=e.i(389905),p=e.i(681688),h=e.i(795272),f=e.i(646805),m=e.i(556355),g=e.i(176248),v=e.i(297239),x=e.i(740292),y=e.i(246300),b=e.i(743124);e.s(["ProjectSettings",()=>ej,"createAddIntegrationUrl",()=>eb],324141);var w=r,j=b,C=g,k=e.i(187511),S=e.i(799912),N=e.i(532567),E=e.i(144258),D=e.i(375462),I=e.i(242084),A=e.i(183673),T=e.i(276507),M=v,L=e.i(60425),P=e.i(914897),R=e.i(92479),_=e.i(491320),O=e.i(242759),F=e.i(909270),B=e.i(979865),V=e.i(481498),z=e.i(667660),H=e.i(309811),U=e.i(906261);e.i(563948);var G=e.i(407562),W=e.i(761033),q=o,Z=e.i(639056),K=e.i(620678),$=e.i(472166),Y=e.i(644471),J=e.i(155893),Q=e.i(471173),X=e.i(966455),ee=e.i(921431),et=e.i(666425),en=e.i(304649),er=e.i(723073),ei=e.i(251198),eo=e.i(301331),ea=r,es=e.i(319543),el=A,ec=e.i(707974),eu=e.i(990453),ed=G,ep=e.i(32170),eh=e.i(676069);e.i(904347);var ef=e.i(37737),em=b,eg=v,ev=o;function ex(e){let{v0ProjectId:t}=e,n=(0,eg.useT)(),{showV0Button:r,mutate:i}=(0,el.useProjectShowV0Button)(t),{user:o}=(0,ep.useUser)(),a=(0,em.useMemo)(()=>{var e;return(0,eh.isFreePlan)(null!=(e=null==o?void 0:o.v0plan)?e:"")},[null==o?void 0:o.v0plan]),s=(0,em.useCallback)(async e=>{if(a)return void(0,ef.openDialog)({type:"upgradePlan"});i(e),(0,ev.track)("ToggleBuiltWithV0Button",{v0ProjectId:t,value:e});try{let r=await (0,es.updateProjectShowV0Button)(t,e);if("object"==typeof r&&"error"in r)throw Error(r.error);ed.toast.success(n("projectSettings.showV0Button.success")(e?n("projectSettings.showV0Button.success.shown"):n("projectSettings.showV0Button.success.hidden")))}catch(t){i(!e),ed.toast.error(n("projectSettings.showV0Button.error"))}},[a,i,n,t]),l=(0,em.useMemo)(()=>!!a||r,[a,r]);return(0,ea.jsxs)("div",{className:"bg-v0-background-300 border-v0-alpha-400 flex items-center gap-2 justify-between rounded-lg border p-3",children:[(0,ea.jsxs)(ec.Label,{className:"flex cursor-pointer flex-col gap-1",htmlFor:"show-v0-button-switch",children:[(0,ea.jsx)("span",{className:"flex gap-2 font-medium leading-[16px] text-v0-gray-1000",children:n("projectSettings.showV0Button.label")}),(0,ea.jsx)("span",{className:"leading-[16px] text-v0-gray-900",children:n("projectSettings.showV0Button.description")})]}),(0,ea.jsx)(eu.Switch,{id:"show-v0-button-switch",checked:l,onCheckedChange:s})]})}e.i(168204);var ey=e.i(225695);async function eb(e){let{v0ProjectId:t,chatId:n,integration:r,dashboardProject:i,teamSlug:o,source:a,messageId:s,needPrefix:l}=e;if(!t)return"";let c=await (0,H.createIntegrationLinkAction)({projectId:t,chatId:n||null,integrationId:r.id,integrationName:r.name,source:a,messageId:s});if(!c.success)return G.toast.error("Failed to start integration setup process."),"";let u=r.parentSlug||r.slug,d=new URLSearchParams;return(d.set("v0pid",t),d.set("token",c.token),l&&d.set("needPrefix","true"),r.parentSlug&&d.set("productId",r.id),i)?"https://vercel.com/v0/".concat(o,"/").concat(i.name,"/").concat(u,"?").concat(d.toString()):"https://vercel.com/v0/".concat(o,"/").concat(u,"?").concat(d.toString())}let ew=[{value:"overview",label:"Overview"},{value:"integrations",label:"Integrations"},{value:"env",label:"Environment Variables"},{value:"knowledge",label:"Knowledge"},{value:"community",label:"Community"}];function ej(e){var t,n,r;let{v0ProjectId:i,chatTitle:o,isSheetOpen:a,onOpenChange:s,initiatePolling:l,sheetOnly:c}=e,{cpe:u,bwvb:d}=(0,O.useFlags)(),p=(0,M.useT)(),h=(0,B.usePathname)(),{allBlocks:f}=(0,eo.useBlockHistory)({searchAll:!1}),m=(0,j.useMemo)(()=>{var e;return null==(e=f.findLast(e=>"code-project"===e.type))?void 0:e.id},[f]),{vercelProjectWithDashboard:g,isLoading:v}=(0,A.useVercelProject)({v0ProjectId:i}),{activeScope:x}=(0,z.useActiveScope)(),y=(0,_.useDefaultTeam)(),{reassignPending:b,handleReassignProject:H}=(0,P.useReassignProject)(),{chatId:en}=(0,R.useChatId)(),[ea,es]=(0,j.useState)(!1),[el,ec]=(0,j.useState)(!1),{activeScopeSlug:eu}=(0,z.useActiveScope)(),{refetchVercelProject:ed}=(0,A.useVercelProject)({v0ProjectId:i}),ep=(0,Z.useSetAtom)(K.isSettingsSheetOpenAtom),{submit:eh}=(0,$.useV0Chat)(),[ef,em]=(0,Z.useAtom)(K.settingsSheetTabAtom),eg=(0,Z.useSetAtom)(K.settingsSheetTabAtom),ev=(0,j.useRef)(null),ej=null==g||null==(n=g.dashboardProject)||null==(t=n.productionDeployment)?void 0:t.id,ek=void 0!==a?a:ea,eS=(0,j.useCallback)(e=>{s?s(e):es(e),setTimeout(()=>{e||eg("overview")},200)},[s,eg]),eN=(0,j.useMemo)(()=>h.split("/").includes("projects"),[h]),eE=(0,j.useCallback)(e=>{e.preventDefault(),e.target instanceof Element&&e.target.closest("[data-sources-drop-container]")||e.stopPropagation()},[]);return(0,w.jsxs)(k.Sheet,{open:ek,onOpenChange:eS,children:[c?null:(0,w.jsx)(k.SheetTrigger,{asChild:!0,children:(0,w.jsx)(C.Button,{"aria-label":p("projectSettings.label"),className:"size-7 rounded-md px-1 py-1.5 text-v0-gray-1000",size:"sm",variant:"ghost",tooltip:{side:"bottom",content:"Project Settings"},children:(0,w.jsx)(N.SettingsGear,{})})}),(0,w.jsx)(k.SheetContent,{className:"sm:max-w-[550px]! pointer-events-auto flex w-screen flex-col gap-0 overflow-hidden p-0 data-[state=closed]:duration-300 data-[state=open]:duration-300","aria-describedby":void 0,onInteractOutside:e=>{el&&e.preventDefault()},onDragEnter:e=>{e.preventDefault(),e.stopPropagation()},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onMouseLeave:e=>{e.preventDefault(),e.stopPropagation()},onCloseAutoFocus:e=>{e.preventDefault()},onDrop:eE,side:"right",showClose:!1,ref:ev,children:i?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(k.SheetHeader,{className:"sticky gap-1 p-4 text-left",children:(0,w.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,w.jsx)(k.SheetTitle,{className:"text-base",children:p("projectSettings.label")}),(0,w.jsxs)("div",{className:"flex gap-2",children:[!eN&&(0,w.jsx)(C.Button,{variant:"outline",className:"h-7 rounded-md",size:"sm",asChild:!0,children:(0,w.jsxs)(F.default,{href:"/chat/projects/".concat(i),target:"_blank",children:["View Project ",(0,w.jsx)(I.External,{})]})}),(0,w.jsx)(k.SheetClose,{asChild:!0,children:(0,w.jsx)(C.Button,{variant:"outline",className:"size-7 rounded-md",size:"sm",children:(0,w.jsx)(D.Cross,{})})})]})]})}),(0,w.jsxs)(Y.Tabs,{variant:"underline",value:ef,onValueChange:e=>{"overview"===e&&ed(),em(e)},className:"relative z-0 flex grow flex-col overflow-hidden",children:[(0,w.jsx)("div",{className:"from-background bg-linear-to-r pointer-events-none absolute -left-px top-0 z-10 h-[31px] w-6 to-transparent"}),(0,w.jsx)("div",{className:"from-background bg-linear-to-l pointer-events-none absolute -right-px top-0 z-10 h-[31px] w-6 to-transparent"}),(0,w.jsx)(Y.TabsList,{className:"no-scrollbar z-0 w-full shrink-0 overflow-x-auto px-2",children:ew.map(e=>(0,w.jsx)(Y.TabsTrigger,{value:e.value,children:e.label},e.value))}),(0,w.jsx)(eC,{value:"overview",children:(0,w.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,w.jsx)(ee.VercelProject,{setSaving:ec,vercelProjectWithDashboard:g,isLoading:v,v0ProjectId:i,closeSettingsSheet:()=>eS(!1)}),(0,w.jsx)(et.Git,{vercelProjectWithDashboard:g,isLoading:v,v0ProjectId:i,closeSettingsSheet:()=>eS(!1),chatId:en,latestBlockId:m}),d&&(0,w.jsx)(ex,{v0ProjectId:i}),i&&ej&&(0,w.jsx)(ei.Deployment,{deploymentId:ej})]})}),(0,w.jsx)(eC,{value:"integrations",children:(0,w.jsx)(j.Suspense,{fallback:(0,w.jsx)(V.IntegrationOptionsSkeleton,{}),children:(0,w.jsx)(V.IntegrationOptions,{isV3:!1,vercelProjectId:null==g?void 0:g.project.id,onIntegrationClick:async(e,t,n,r,i)=>{if("blob"===e.slug)return void((await fetch("/chat/api/integrations/marketplace/storage/create-blob",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(null==g?void 0:g.project.name,"-blob"),projectId:null==g?void 0:g.project.id})})).ok?(G.toast.success("Blob storage connected successfully"),(0,q.track)("AddIntegration",{integrationSlug:"blob",chatId:en||"",source:"settings"}),ep(!1),eN||await eh({action:"new",attachments:[],content:(0,ey.createMDXMessageContent)("A blob store has been added to the [Vercel Project](".concat(null==g?void 0:g.project.url,").")),type:"added-integration",workflowState:"ask-user-for-next-steps",revalidateVercelEnvAndIntegrations:!0})):G.toast.error("Failed to connect blob storage"));let o=await eb({v0ProjectId:n||"",chatId:en||"",integration:e,dashboardProject:r,teamSlug:x&&(0,U.isUserScope)(x)?null!=y?y:"":null!=eu?eu:"",source:"settings",needPrefix:t});null==l||l(),o&&i?i.location.href=o:o&&window.open(o,"_blank")},vercelProjectName:null!=(r=null==g?void 0:g.project.name)?r:"",teamSlug:x&&(0,U.isUserScope)(x)?null!=y?y:"":null!=eu?eu:""})})}),(0,w.jsx)(eC,{value:"env",className:"p-4",children:(0,w.jsx)(J.EnvVars,{setSaving:ec,vercelProjectId:null==g?void 0:g.project.id,v0ProjectId:i})}),(0,w.jsxs)(eC,{value:"knowledge",children:[(0,w.jsx)(Q.Instructions,{setSaving:ec,projectId:i}),(0,w.jsx)(X.Sources,{setSaving:ec,projectId:i})]}),u&&(0,w.jsx)(eC,{value:"community",className:"overflow-hidden",children:(0,w.jsx)(er.default,{projectId:i,containerRef:ev})})]})]}):(0,w.jsxs)("div",{className:"bg-v0-background-200 flex grow flex-col items-center justify-center gap-3 rounded-md px-9 py-12",children:[(0,w.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,w.jsx)(T.EmptyIcon,{children:(0,w.jsx)(E.FolderClosed,{})}),(0,w.jsx)("p",{className:"font-medium text-v0-gray-1000",children:"Add to a Project"}),(0,w.jsx)("p",{className:"text-center text-sm text-v0-gray-900",children:"Add this chat to a project to add instructions, sources, environment variables, integrations, and more."})]}),(0,w.jsx)(L.ProjectsDropdown,{className:"w-auto",handleProjectSelect:H,projectName:o,onSuccess:e=>{en&&(0,W.assignProjectToChat)({chatId:en,projectId:e})},quickCreate:!0,align:"center",triggerButton:(0,w.jsxs)(C.Button,{size:"sm",variant:"secondary",disabled:b,children:[(0,w.jsx)(S.Plus,{}),"Add Project"]}),disabled:b})]})})]})}function eC(e){let{value:t,className:n,children:r}=e;return(0,w.jsx)(Y.TabsContent,{value:t,className:(0,en.cn)("grow overflow-y-auto",n),children:r})}var ek=b,eS=e.i(346970),eN=R,eE=O;function eD(e,t){let{mi:n}=(0,eE.useFlags)(),{chatId:r}=(0,eN.useChatId)(),i=(0,ek.useRef)(null),o=new URLSearchParams;r&&o.set("chatId",r),o.set("source",e.source),e.messageId&&o.set("messageId",e.messageId);let{data:a,mutate:s,isLoading:l}=(0,eS.default)(r&&n?"/chat/api/integrations/marketplace/link?".concat(o.toString()):null,async e=>{let t=await fetch(e);if(!t.ok){if(401===t.status){let e=await t.json();if((null==e?void 0:e.error)==="Unauthorized to edit this chat")return console.error("Not authorized to edit this chat"),{activeLinks:[],connectedLinks:null,shouldContinuePolling:!1}}throw Error("Failed to fetch integration links")}return await t.json()},{refreshInterval:e=>3e3*(null!=e&&!!e.shouldContinuePolling),revalidateOnFocus:!0,onSuccess:e=>{let{activeLinks:n}=e;if(0!==n.length){if(i.current){let e=i.current,r=[];for(let t of n){let n=e.find(e=>e.integrationLinkId===t.integrationLinkId);n&&!n.connected&&t.connected&&r.push(t)}r.length>0&&t(r)}i.current=n}}});return{connectedLinks:null==a?void 0:a.connectedLinks,refetchLinks:s,isLoading:l}}e.s(["useIntegrationLinks",()=>eD],520605);var eI=A,eA=ef,eT=Z,eM=e.i(449381),eL=e.i(296046),eP=e.i(729602),eR=K,e_=r,eO=eL;e.i(142219);var eF=r;function eB(){return(0,eF.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eF.jsx)("path",{d:"M0 8C0 3.58172 3.58172 0 8 0V0C12.4183 0 16 3.58172 16 8V8C16 12.4183 12.4183 16 8 16V16C3.58172 16 0 12.4183 0 8V8Z",fill:"#18181B"}),(0,eF.jsx)("path",{d:"M12.1998 9.32958C12.1998 6.90643 10.3194 4.10002 7.9998 4.10002C5.68021 4.10002 3.7998 6.90643 3.7998 9.32958C3.7998 11.7527 5.68021 11.9 7.9998 11.9C10.3194 11.9 12.1998 11.7527 12.1998 9.32958Z",stroke:"#D97706",strokeWidth:"1.5"})]})}function eV(){return(0,eF.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eF.jsx)("path",{d:"M0 8.00001C0 3.58193 3.58192 0.000366211 8 0.000366211V0.000366211C12.4181 0.000366211 16 3.58193 16 8.00001V8.00001C16 12.4181 12.4181 15.9997 8 15.9997V15.9997C3.58192 15.9997 0 12.4181 0 8.00001V8.00001Z",fill:"#18181B"}),(0,eF.jsx)("path",{d:"M11.6702 4.24481C10.0485 2.58555 7.41938 2.58555 5.79776 4.24481C4.17614 5.90408 4.17614 8.59428 5.79776 10.2536L6.5318 9.50247C5.3156 8.25801 5.3156 6.24035 6.5318 4.99592C7.74802 3.75146 9.7199 3.75146 10.9361 4.99592L11.6702 4.24481Z",fill:"black"}),(0,eF.jsx)("path",{d:"M10.2025 5.7474C9.39174 4.91778 8.07712 4.91778 7.26632 5.7474C6.4555 6.57705 6.4555 7.92214 7.26632 8.75176L8.00037 8.00068C7.59496 7.58586 7.59496 6.91332 8.00037 6.49849C8.40577 6.08367 9.06305 6.08367 9.46848 6.49849L10.2025 5.7474Z",fill:"black"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.202 11.7552C8.58039 13.4144 5.95122 13.4144 4.32959 11.7552L5.06364 11.0041C6.27986 12.2486 8.25174 12.2486 9.46795 11.0041C10.6842 9.75966 10.6842 7.742 9.46795 6.49754L10.202 5.74646C11.8236 7.40573 11.8236 10.0959 10.202 11.7552ZM8.73479 10.2531C7.92396 11.0827 6.60939 11.0827 5.79858 10.2531L6.53263 9.50197C6.93803 9.91678 7.59532 9.91678 8.00074 9.50197C8.40614 9.08714 8.40614 8.41459 8.00074 7.99978L8.73479 7.2487C9.54559 8.07832 9.54559 9.42343 8.73479 10.2531Z",fill:"#58C591"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.79825 4.24499C7.41987 2.58573 10.049 2.58573 11.6707 4.24499L10.9366 4.9961C9.72039 3.75164 7.74851 3.75164 6.53229 4.9961C5.31609 6.24054 5.31609 8.25819 6.53229 9.50265L5.79825 10.2537C4.17662 8.59447 4.17662 5.90426 5.79825 4.24499ZM7.26632 5.74753C8.07712 4.91791 9.39174 4.91791 10.2025 5.74753L9.46848 6.49862C9.06305 6.0838 8.40577 6.0838 8.00037 6.49862C7.59496 6.91345 7.59496 7.586 8.00037 8.00081L7.26632 8.75189C6.4555 7.92227 6.4555 6.57718 7.26632 5.74753Z",fill:"#84DBBD"})]})}function ez(){return(0,eF.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eF.jsx)("rect",{x:"0",width:"16",height:"16",rx:"8",fill:"#18181B"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.60645 5.13072C3.60645 4.29017 4.28784 3.60876 5.12838 3.60876H10.9117C11.7523 3.60876 12.4336 4.29017 12.4336 5.13072V10.0495C12.4336 10.9191 11.3332 11.2965 10.7995 10.6099L9.13105 8.46362V11.0663C9.13105 11.8228 8.51779 12.4361 7.76132 12.4361H5.12838C4.28784 12.4361 3.60645 11.7547 3.60645 10.9141V5.13072ZM5.12838 4.82633C4.96027 4.82633 4.82399 4.96261 4.82399 5.13072V10.9141C4.82399 11.0822 4.96027 11.2185 5.12838 11.2185H7.80699C7.89102 11.2185 7.9135 11.1504 7.9135 11.0663V7.57609C7.9135 6.70648 9.01392 6.32907 9.54761 7.01564L11.2161 9.16197V5.13072C11.2161 4.96261 11.232 4.82633 11.0639 4.82633H5.12838Z",fill:"#12FFF7"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.60645 5.13072C3.60645 4.29017 4.28784 3.60876 5.12838 3.60876H10.9117C11.7523 3.60876 12.4336 4.29017 12.4336 5.13072V10.0495C12.4336 10.9191 11.3332 11.2965 10.7995 10.6099L9.13105 8.46362V11.0663C9.13105 11.8228 8.51779 12.4361 7.76132 12.4361H5.12838C4.28784 12.4361 3.60645 11.7547 3.60645 10.9141V5.13072ZM5.12838 4.82633C4.96027 4.82633 4.82399 4.96261 4.82399 5.13072V10.9141C4.82399 11.0822 4.96027 11.2185 5.12838 11.2185H7.80699C7.89102 11.2185 7.9135 11.1504 7.9135 11.0663V7.57609C7.9135 6.70648 9.01392 6.32907 9.54761 7.01564L11.2161 9.16197V5.13072C11.2161 4.96261 11.232 4.82633 11.0639 4.82633H5.12838Z",fill:"url(#paint0_linear_6519_11262)"}),(0,eF.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.60645 5.13072C3.60645 4.29017 4.28784 3.60876 5.12838 3.60876H10.9117C11.7523 3.60876 12.4336 4.29017 12.4336 5.13072V10.0495C12.4336 10.9191 11.3332 11.2965 10.7995 10.6099L9.13105 8.46362V11.0663C9.13105 11.8228 8.51779 12.4361 7.76132 12.4361H5.12838C4.28784 12.4361 3.60645 11.7547 3.60645 10.9141V5.13072ZM5.12838 4.82633C4.96027 4.82633 4.82399 4.96261 4.82399 5.13072V10.9141C4.82399 11.0822 4.96027 11.2185 5.12838 11.2185H7.80699C7.89102 11.2185 7.9135 11.1504 7.9135 11.0663V7.57609C7.9135 6.70648 9.01392 6.32907 9.54761 7.01564L11.2161 9.16197V5.13072C11.2161 4.96261 11.232 4.82633 11.0639 4.82633H5.12838Z",fill:"url(#paint1_linear_6519_11262)"}),(0,eF.jsx)("path",{d:"M10.9121 3.60876C11.7527 3.60876 12.4341 4.29017 12.4341 5.13072V10.0495C12.4341 10.9191 11.3336 11.2965 10.7999 10.6099L9.13145 8.46362V11.0663C9.13145 11.8228 8.51822 12.4361 7.76172 12.4361C7.84578 12.4361 7.91393 12.3679 7.91393 12.2839V7.57609C7.91393 6.70648 9.01432 6.32907 9.54802 7.01564L11.2165 9.16197V3.91315C11.2165 3.74504 11.0802 3.60876 10.9121 3.60876Z",fill:"#B9FFB3"}),(0,eF.jsxs)("defs",{children:[(0,eF.jsxs)("linearGradient",{id:"paint0_linear_6519_11262",x1:"12.4336",y1:"12.4361",x2:"4.67168",y2:"3.60887",gradientUnits:"userSpaceOnUse",children:[(0,eF.jsx)("stop",{stopColor:"#B9FFB3"}),(0,eF.jsx)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,eF.jsxs)("linearGradient",{id:"paint1_linear_6519_11262",x1:"12.4336",y1:"12.4361",x2:"7.19057",y2:"10.3967",gradientUnits:"userSpaceOnUse",children:[(0,eF.jsx)("stop",{stopColor:"#1A1A1A",stopOpacity:"0.9"}),(0,eF.jsx)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})}function eH(){return(0,eF.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eF.jsx)("rect",{x:"0",width:"16",height:"16",rx:"8",fill:"#18181B"}),(0,eF.jsxs)("g",{clipPath:"url(#clip0_6503_14101)",children:[(0,eF.jsx)("path",{d:"M8.78261 12.8805C8.53205 13.2061 8.02401 13.0277 8.01797 12.612L7.92969 6.53137H11.8921C12.6097 6.53137 13.01 7.38672 12.5637 7.9667L8.78261 12.8805Z",fill:"url(#paint0_linear_6503_14101)"}),(0,eF.jsx)("path",{d:"M8.78261 12.8805C8.53205 13.2061 8.02401 13.0277 8.01797 12.612L7.92969 6.53137H11.8921C12.6097 6.53137 13.01 7.38672 12.5637 7.9667L8.78261 12.8805Z",fill:"url(#paint1_linear_6503_14101)",fillOpacity:"0.2"}),(0,eF.jsx)("path",{d:"M7.17088 3.09614C7.42145 2.77051 7.9295 2.94893 7.93553 3.36467L7.97422 9.44525H4.06144C3.34373 9.44525 2.94344 8.5899 3.38974 8.00992L7.17088 3.09614Z",fill:"#3ECF8E"})]}),(0,eF.jsxs)("defs",{children:[(0,eF.jsxs)("linearGradient",{id:"paint0_linear_6503_14101",x1:"7.92969",y1:"7.87959",x2:"11.4836",y2:"9.32409",gradientUnits:"userSpaceOnUse",children:[(0,eF.jsx)("stop",{stopColor:"#249361"}),(0,eF.jsx)("stop",{offset:"1",stopColor:"#3ECF8E"})]}),(0,eF.jsxs)("linearGradient",{id:"paint1_linear_6503_14101",x1:"6.36839",y1:"5.6738",x2:"8.05436",y2:"8.74958",gradientUnits:"userSpaceOnUse",children:[(0,eF.jsx)("stop",{}),(0,eF.jsx)("stop",{offset:"1",stopOpacity:"0"})]}),(0,eF.jsx)("clipPath",{id:"clip0_6503_14101",children:(0,eF.jsx)("rect",{width:"9.60018",height:"10.182",fill:"white",transform:"translate(3.2002 2.90906)"})})]})]})}e.s(["BlobIcon",()=>eB,"NeonIcon",()=>ez,"SupabaseIcon",()=>eH,"UpstashIcon",()=>eV],404836);var eU=e.i(675120),eG=e.i(70165),eW=N,eq=e.i(529693),eZ=e.i(490293),eK=Z,e$=b;let eY=(0,eZ.atom)(!1);function eJ(){let e=(0,eK.useAtomValue)(eY),t=(0,eG.useIsMobile)(),n=(0,eO.useIsChatPage)()&&e&&!t;return(0,e_.jsx)(eU.TransitionNode,{duration:e0,delay:eX,justify:"center",children:n?(0,e_.jsx)(eQ,{}):(0,e_.jsx)(eW.SettingsGear,{})})}function eQ(){let e=(0,eK.useAtomValue)(eY),[t,n]=(0,e$.useState)(!1),r=(0,e$.useRef)(null);return(0,e$.useEffect)(()=>(r.current&&clearTimeout(r.current),e?r.current=setTimeout(()=>{n(!0)},tt):n(!1),()=>{r.current&&clearTimeout(r.current)}),[e]),(0,e_.jsxs)("div",{className:"flex items-center px-1.5",children:[(0,e_.jsx)("div",{className:"flex [&>*:not(:first-child)]:ml-[-4px]",children:[(0,e_.jsx)(eH,{},"supabase"),(0,e_.jsx)(ez,{},"neon"),(0,e_.jsx)(eV,{},"upstash")].map((e,t)=>(0,e_.jsx)(eq.motion.div,{className:"border-v0-background-100 rounded-full border",initial:{opacity:0,x:8,scale:1.3},animate:{opacity:1,x:0,scale:1},transition:ti(e1,e4,te(t)),children:e},t))}),(0,e_.jsx)(eq.motion.div,{initial:{width:0},animate:{width:t?"auto":0,marginLeft:6*!!t},transition:ti(e3,e9,tn),children:(0,e_.jsx)(eq.motion.div,{initial:{opacity:0,scale:.9,filter:"blur(2px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},className:"flex items-center gap-1",transition:ti(e7,e6,tr),children:"Add Integration"})})]},"integrations")}let eX=.4,e0=.6,e1=.4,e2=-.5,e5=.2,e4=.7,e3=.2,e9=.9,e7=.05,e6=.7,e8=1,te=e=>e8+e2+e5*e,tt=.7+e8+3*e5,tn=tt+-.65,tr=tt+-.65+.9+-.5,ti=(e,t,n)=>({type:"spring",bounce:e,delay:n,duration:t});var to=r,ta=r,ts=e.i(758118),tl=e.i(365290),tc=b;function tu(e){let{shouldMarch:t=!1,numberOfVisibleChildren:n=3,overlap:r=4,size:i=16,waitMs:o=500,stepDurationMs:a=700,children:s,animation:l,direction:c="horizontal"}=e,u=(0,tc.useRef)(null),[d,p]=(0,tc.useState)(0),[h,f]=(0,tc.useState)(!1),m=(0,tc.useRef)(0);if(tc.Children.count(s)<n+1)throw Error("children must be at least ".concat(n+1," items"));let g=(0,tc.useMemo)(()=>tc.Children.toArray(s),[s]),v=(0,tc.useMemo)(()=>[...g,...g.slice(0,n)],[g,n]),x=(0,tc.useCallback)(()=>{if(!u.current)return;let e=m.current;e===v.length-n?(f(!0),e=0):(f(!1),e+=1),p(e),m.current=e},[v.length,n]),y=(0,tc.useRef)(null),b=(0,tc.useRef)(null);(0,tc.useEffect)(()=>(t&&(b.current=setTimeout(()=>{x(),y.current=setInterval(()=>{x()},a)},o)),()=>{clearTimeout(b.current),clearInterval(y.current)}),[x,t,a,o]);let w=(0,tc.useMemo)(()=>{let e=d*i-d*r;return"horizontal"===c?"translateX(-".concat(e,"px)"):"translateY(-".concat(e,"px)")},[d,r,i,c]),j={duration:400,timingFunction:[.27,.04,.27,.97]};return(0,ta.jsx)("div",{className:"relative overflow-visible",style:{width:"horizontal"===c?i*n-r*(n-1):i,height:"horizontal"===c?i:i*n-r*(n-1)},children:(0,ta.jsx)("div",{ref:u,className:"horizontal"===c?"absolute flex":"absolute flex flex-col",style:{transform:w,...h?{}:(0,tl.transitionStyles)(["transform"],j)},children:tc.Children.map(v,(e,t)=>{var o;let a=t<d+n&&t>d-1;return(0,ta.jsx)("div",{className:"absolute rounded-full",style:{width:i,height:i,..."horizontal"===c?{left:t*i-t*r}:{top:t*i-t*r},transform:a?"scale(1)":"scale(".concat(null!=(o=null==l?void 0:l.scale)?o:.5,")"),...(0,ts.visibleStylesIf)(a),...h?{}:(0,tl.transitionStyles)(["opacity","transform"],j)},children:e},"".concat(t,"-marching-child"))})})})}e.s(["MarchingChildren",()=>tu],917772);var td=eU;let tp=(0,e.i(936096).withNewIcon)('<path d="M12.25 14.25V10L12.9212 10.1119C14.1403 10.315 15.25 9.37496 15.25 8.13908V7.86092C15.25 6.62504 14.1403 5.68496 12.9212 5.88813L12.25 6V1.75H8.235L8.30764 2.50382C8.41075 3.57386 7.56957 4.5 6.49457 4.5C5.42349 4.5 4.58361 3.58031 4.68058 2.51362L4.75 1.75H0.75V14.25H12.25Z" stroke="currentColor" fill="transparent" stroke-width="1.5"/>');e.s(["Puzzle",0,tp],306283);var th=b;function tf(e){let{showIcons:t}=e,n=(0,th.useMemo)(()=>[ez,eH,eV,eB].map((e,t)=>(0,to.jsx)(e,{},t)),[]);return(0,to.jsx)(td.TransitionNode,{className:"h-4 w-4",enter:{y:16},exit:{y:-16},duration:.3,delay:.1,children:t?(0,to.jsx)(tu,{shouldMarch:!0,size:16,stepDurationMs:1e3,direction:"vertical",numberOfVisibleChildren:1,overlap:-12,waitMs:1e3,animation:{scale:.85,transformMultiplier:.5},children:n}):(0,to.jsx)(tp,{})})}var tm=z,tg=e.i(206037),tv=e.i(403055),tx=e.i(794593);function ty(e){let{projectId:t}=e,n=(0,eP.useChatId)(),w=(0,eM.useActiveBlockState)(),[j,C]=(0,b.useState)(!1),k=(0,eT.useAtomValue)(eY),[S,N]=(0,b.useState)(!1),{data:E}=(0,y.useChatFavorites)(),D=(0,b.useMemo)(()=>null==E?void 0:E.find(e=>e.chatId===n),[E,n]),{title:I}=(0,i.useChatMetadata)(),A=(0,v.useT)(),{setData:T}=(0,y.useChatHistory)(),[M,L]=(0,eT.useAtom)(eR.isSettingsSheetOpenAtom),P=(0,eT.useSetAtom)(eR.settingsSheetTabAtom),{refetchVercelProject:R}=(0,eI.useVercelProject)({v0ProjectId:t}),{refetchLinks:_}=eD({source:"settings"},async e=>{L(!1),e.forEach(e=>{(0,o.track)("AddIntegration",{integrationSlug:e.integrationName,chatId:e.chatId||"",source:e.source})}),t&&R()}),O=S||k,F=(0,eL.useIsChatPage)(),{activeScope:B,hasVercelWritePermission:V}=(0,tm.useActiveScope)(),{planSlug:z}=(0,tg.usePlanInfo)(!0,null==B?void 0:B.id),H="v0-enterprise"===z;function U(e){t&&((0,o.track)("OpenSettingsSheet",{projectId:t,tab:e}),P(e),L(!0))}let G=[{type:"item",Icon:(0,r.jsx)(p.GridSquare,{}),label:"Overview",onSelect:()=>{U("overview")}},{type:"item",Icon:(0,r.jsx)(tf,{showIcons:O}),label:"Integrations",onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),onSelect:()=>{U("integrations")}},{type:"item",Icon:(0,r.jsx)(l.Variable,{}),label:"Env. Variables",onSelect:()=>{U("env")}},{type:"item",Icon:(0,r.jsx)(u.BookClosed,{}),label:"Knowledge",onSelect:()=>{U("knowledge")}},...H?[{type:"item",Icon:(0,r.jsx)(d.LockClosed,{}),label:"Password Protection",onSelect:()=>{t&&(0,eA.openDialog)({type:"passwordProtection",data:{projectId:t}})}}]:[],{type:"item",Icon:(0,r.jsx)(c.Globe,{}),label:"Community",onSelect:()=>{U("community")}},...V?[{type:"item",Icon:(0,r.jsx)(h.ArrowCrossed,{}),label:"Transfer Project",onSelect:()=>{(0,eA.openDialog)({type:"transferProject",data:{projectId:t}})}}]:[]],W=[{type:"item",Icon:(0,r.jsx)(a.PencilEdit,{}),label:A("chatOptionsDropdown.renameChat"),onSelect:()=>{n&&((0,o.track)("RenameChat",{targetChatId:n}),(0,eA.openDialog)({type:"updateChatTitle",data:{chatId:n}}))}},{type:"item",Icon:(0,r.jsx)(h.ArrowCrossed,{}),label:"Reassign Project",onSelect:()=>{n&&(0,eA.openDialog)({type:"reassignProject",data:{chatId:n}})}},{type:"component",component:(0,r.jsx)(x.SuspendingFavoriteChatDropdownItem,{chat:{chatId:n||"NO_CHAT_ID",title:I||"",favorite:!!D,updatedAt:(null==D?void 0:D.updatedAt)||null},setChatHistoryData:T})},{type:"item",Icon:(0,r.jsx)(f.Duplicate,{}),label:A("duplicateBlockButton.duplicate"),onSelect:()=>{w&&n&&((0,o.track)("ClickForkBlock"),(0,eA.openDialog)({type:"forkBlock",data:{blockId:w.id,page:"chat",canWriteToChat:!0,actionType:"duplicate"}}))}},{type:"item",Icon:(0,r.jsx)(s.Trash,{}),label:A("chatOptionsDropdown.deleteChat"),onSelect:()=>{n&&(0,eA.openDialog)({type:"deleteChat",data:{chatId:n}})},variant:"destructive"}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.DropdownMenu,{onOpenChange:C,open:j,children:[(0,r.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,r.jsxs)(g.Button,{size:"sm",className:(0,tv.cn)("h-7 min-w-7 overflow-hidden rounded-[6px] px-0",!F&&"border-none"),variant:"secondary",tooltip:"Settings",tooltipDirection:"bottom",children:[(0,r.jsx)(eJ,{}),(0,r.jsx)("span",{className:"sr-only",children:"Settings"})]})}),(0,r.jsxs)(m.DropdownMenuContent,{align:"end",children:[t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.DropdownMenuGroup,{children:[(0,r.jsx)(m.DropdownMenuLabel,{children:"Project Settings"}),(0,r.jsx)(tb,{items:G})]}),(0,r.jsx)(m.DropdownMenuSeparator,{})]}):null,F?(0,r.jsxs)(m.DropdownMenuGroup,{children:[(0,r.jsx)(m.DropdownMenuLabel,{children:"Chat Settings"}),(0,r.jsx)(tb,{items:W})]}):null]})]}),(0,r.jsx)(ej,{v0ProjectId:t,chatTitle:I,isSheetOpen:M,onOpenChange:L,initiatePolling:_,sheetOnly:!0})]})}function tb(e){let{items:t}=e;return(0,r.jsx)(r.Fragment,{children:t.map(e=>{if("type"in e&&"component"===e.type)return e.component;if("type"in e&&"item"===e.type){let{isNew:t,...n}=e;return(0,r.jsxs)(m.DropdownMenuItem,{className:"cursor-pointer overflow-hidden",variant:e.variant,...n,children:[e.Icon,e.label,e.isNew?(0,r.jsx)(tx.Badge,{variant:"blue",children:"New"}):null]},String(e.label))}return null})})}e.s(["ChatShareButton",()=>nY],344290);var tw=r,tj=e.i(574768),tC=b;e.s(["ChatSharePopoverContent",()=>ng],907116);var tk=r,tS=e.i(611176),tN=e.i(682916),tE=e.i(543017),tD=F,tI=b,tA=g,tT=ec,tM=v,tL=e.i(504066),tP=G,tR=r,t_=eS,tO=e.i(912106),tF=tv,tB=ep,tV=e.i(230766),tz=R,tH=e.i(762585),tU=b,tG=G,tW=tE,tq=e.i(245294),tZ=e.i(120485),tK=en,t$=m,tY=g;function tJ(){let{chatId:e}=(0,tz.useChatId)(),{data:t,isLoading:n,mutate:r}=(0,t_.default)(e?"/api/chat/".concat(e,"/permissions"):null,tF.fetcher),i=(0,tU.useRef)(null),[o,a]=(0,tU.useState)(!1),[s,l]=(0,tU.useState)(!1);return((0,tU.useEffect)(()=>{let e=i.current;if(!e)return;let t=()=>{a(e.scrollTop>0),l(e.scrollHeight-e.scrollTop>e.clientHeight+1)};return t(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[n]),n)?(0,tR.jsxs)("div",{className:"flex items-center gap-2 h-10",children:[(0,tR.jsx)(tH.Skeleton,{className:"rounded-full size-8"}),(0,tR.jsxs)("div",{children:[(0,tR.jsx)("div",{className:"h-5 flex items-center",children:(0,tR.jsx)(tH.Skeleton,{className:"h-4 w-32"})}),(0,tR.jsx)("div",{className:"h-5 flex items-center",children:(0,tR.jsx)(tH.Skeleton,{className:"h-4 w-48"})})]})]}):(0,tR.jsxs)("div",{className:"relative max-h-72",children:[(0,tR.jsx)("div",{className:(0,tK.cn)("pointer-events-none absolute top-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-b from-background via-background/30 to-transparent",o?"opacity-100":"opacity-0")}),(0,tR.jsx)("div",{className:"max-h-72 overflow-y-auto space-y-2",ref:i,children:null==t?void 0:t.map(e=>(0,tR.jsx)(tQ,{permission:e,mutate:r},"author"===e.type?"author":e.permissionId))}),(0,tR.jsx)("div",{className:(0,tK.cn)("pointer-events-none absolute bottom-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-t from-background via-background/30 to-transparent",s?"opacity-100":"opacity-0")})]})}function tQ(e){let{permission:t,mutate:n}=e,{user:r}=(0,tB.useUser)(),{chatId:i}=(0,tz.useChatId)(),o=(0,tU.useCallback)(e=>{n(async n=>{if(!i||"author"===t.type)throw Error();let r=await fetch("/api/chat/".concat(i,"/permissions/").concat(t.permissionId),{method:"remove"===e?"DELETE":"PATCH",headers:{"Content-Type":"application/json"},body:"remove"===e?void 0:JSON.stringify({permission:e})});if(!r.ok){let e=Error(await r.text());throw(0,tZ.handleChatError)(e)||tG.toast.error("Failed to update permission"),e}return((0,tO.mutate)(e=>"string"==typeof e&&e.startsWith("/api/chat/".concat(i,"/permissions/search")),void 0,{revalidate:!1}),"remove"===e)?null==n?void 0:n.filter(e=>"author"===e.type||e.permissionId!==t.permissionId):null==n?void 0:n.map(n=>"author"===n.type||n.permissionId!==t.permissionId?n:{...n,permission:e})},{optimisticData:n=>n?"author"===t.type?n:"remove"===e?n.filter(e=>"author"===e.type||e.permissionId!==t.permissionId):n.map(n=>"author"===n.type||n.permissionId!==t.permissionId?n:{...n,permission:e}):[]})},[i,n,t]);return(0,tR.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tR.jsxs)("div",{className:"grow flex items-center gap-2",children:[(0,tR.jsx)(tV.AvatarUser,{userId:t.userId,rounded:!0}),(0,tR.jsxs)("div",{children:[(0,tR.jsxs)("div",{className:"text-sm font-medium",children:[(0,tR.jsx)("span",{children:t.name||t.username}),t.userId===(null==r?void 0:r.id)?(0,tR.jsx)("span",{children:" (you)"}):null]}),(0,tR.jsx)("div",{className:"text-sm text-v0-gray-900",children:t.email})]})]}),(0,tR.jsxs)(t$.DropdownMenu,{children:[(0,tR.jsx)(t$.DropdownMenuTrigger,{disabled:"author"===t.type,asChild:!0,children:(0,tR.jsxs)(tY.Button,{variant:"outline",size:"xs",className:"font-normal gap-1 rounded-sm",children:[(0,tR.jsx)("span",{children:tX(t)}),(0,tR.jsx)("div",{className:(0,tK.cn)("size-4 flex items-center justify-center text-v0-gray-900","author"===t.type&&"text-v0-gray-500"),children:(0,tR.jsx)(tq.ChevronDown,{className:"size-3"})})]})}),(0,tR.jsx)(t$.DropdownMenuContent,{align:"end",children:"author"===t.type?null:(0,tR.jsxs)(tR.Fragment,{children:[(0,tR.jsxs)(t$.DropdownMenuGroup,{className:"p-1.5",children:[(0,tR.jsxs)(t$.DropdownMenuItem,{onSelect:()=>o("view"),className:"px-2 py-1.5 h-auto gap-8",children:[(0,tR.jsxs)("div",{children:[(0,tR.jsx)("div",{className:"font-medium",children:"Can View"}),(0,tR.jsx)("div",{className:"text-v0-gray-900",children:"View chat and project information"})]}),"view"===t.permission?(0,tR.jsx)(tW.Check,{className:"size-4"}):null]}),(0,tR.jsxs)(t$.DropdownMenuItem,{onSelect:()=>o("edit"),className:"px-2 py-1.5 h-auto gap-8",children:[(0,tR.jsxs)("div",{children:[(0,tR.jsx)("div",{className:"font-medium",children:"Can Edit"}),(0,tR.jsx)("div",{className:"text-v0-gray-900",children:"Edit chat and project information"})]}),"edit"===t.permission?(0,tR.jsx)(tW.Check,{className:"size-4"}):null]})]}),(0,tR.jsx)(t$.DropdownMenuSeparator,{}),(0,tR.jsx)(t$.DropdownMenuGroup,{className:"p-1.5",children:(0,tR.jsx)(t$.DropdownMenuItem,{variant:"destructive",onSelect:()=>o("remove"),className:"px-2 py-1.5 h-auto",children:"Remove"})})]})})]})]})}function tX(e){if("author"===e.type)return"Owner";switch(e.permission){case"view":return"Can View";case"edit":return"Can Edit"}}var t0=r,t1=c,t2=tN,t5=d,t4=b,t3=tV,t9=e.i(592258),t7=e.i(358847),t6=(0,t7.createServerReference)("406015724658d2bf342c3bcbff42dc4e1d51ab1d3d",t7.callServer,void 0,t7.findSourceMapURL,"updateChatPrivacy"),t8=z,ne=tZ,nt=G,nn=i,nr=R,ni=o,no=ep,na=tv,ns=eS;function nl(){let{user:e}=(0,no.useUser)(),{data:t,mutate:n,isLoading:r}=(0,ns.default)((null==e?void 0:e.teamId)?"/api/teams/".concat(e.teamId,"/settings"):null,na.fetcher);return{settings:t,mutate:n,isLoading:r}}function nc(){let{isTeam:e,activeScope:t}=(0,t8.useActiveScope)(),{chatId:n}=(0,nr.useChatId)(),{chatPrivacy:r,setChatPrivacy:i}=(0,nn.useChatPrivacy)(),{settings:o}=nl(),a=(0,t4.useCallback)(e=>{!async function(){if(n)try{await i(async()=>{("public"===e||"team"===e)&&(0,ni.track)("ShareChat",{targetChatId:n,team:"team"===e});let t=await t6({chatId:n,privacy:e});if(!t.success)throw Error(t.error);return e},{optimisticData:e}),nt.toast.success("Chat privacy updated")}catch(e){(0,ne.handleChatError)(e)||nt.toast.error("Failed to update chat visibility")}}()},[i,n]);return(0,t0.jsxs)(t9.Select,{value:"team-edit"===r?"team":r,onValueChange:a,children:[(0,t0.jsx)(t9.SelectTrigger,{className:"grow h-8 [&_svg]:text-v0-gray-1000! px-2 hover:border-v0-alpha-500",children:(0,t0.jsx)(t9.SelectValue,{})}),(0,t0.jsxs)(t9.SelectContent,{children:[(0,t0.jsx)(t9.SelectItem,{value:"private",iconOnRight:!0,className:"text-v0-gray-1000 data-[state=checked]:text-primary data-highlighted:text-v0-gray-1000 px-2",children:(0,t0.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t0.jsx)(t5.LockClosed,{}),(0,t0.jsx)("span",{className:"text-v0-gray-1000",children:e?"Only people with access":"Private"})]})}),e&&(0,t0.jsx)(t9.SelectItem,{value:"team",iconOnRight:!0,className:"px-2",children:(0,t0.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t0.jsx)(t3.AvatarUser,{size:"xs",rounded:!0,teamId:null==t?void 0:t.id}),(0,t0.jsxs)("div",{className:"grow text-start max-w-52 truncate",children:["Everyone"," ",(null==t?void 0:t.name)?(0,t0.jsxs)(t0.Fragment,{children:["at ",t.name]}):(0,t0.jsx)(t0.Fragment,{children:"on team"})]})]})}),!(null==o?void 0:o.disablePublicSharing)&&(0,t0.jsxs)(t0.Fragment,{children:[(0,t0.jsx)(t9.SelectItem,{value:"unlisted",iconOnRight:!0,className:"text-v0-gray-1000 data-[state=checked]:text-primary data-highlighted:text-v0-gray-1000 px-2",children:(0,t0.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t0.jsx)(t2.Link,{}),(0,t0.jsx)("span",{className:"text-v0-gray-1000",children:"Anyone with the link"})]})}),(0,t0.jsx)(t9.SelectItem,{value:"public",iconOnRight:!0,className:"text-v0-gray-1000 data-[state=checked]:text-primary data-highlighted:text-v0-gray-1000 px-2",children:(0,t0.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t0.jsx)(t1.Globe,{}),(0,t0.jsx)("span",{className:"text-v0-gray-1000",children:"Anyone on the web"})]})})]})]})]})}e.s(["useTeamSettings",()=>nl],714249);var nu=z,nd=r,np=e.i(107296),nh=e.i(799058);function nf(){return(0,nd.jsxs)(np.Alert,{variant:"default",className:"relative flex flex-row gap-1 rounded-md border-none bg-v0-gray-100 px-2 py-1.5",children:[(0,nd.jsx)("div",{className:"absolute left-[9px] top-1/2 -translate-y-1/2 text-v0-gray-900",children:(0,nd.jsx)(nh.Information,{className:"h-4 w-4"})}),(0,nd.jsx)(np.AlertDescription,{className:"ml-6 text-v0-gray-1000",children:"Viewers will have access to all code and assets in this chat. Public chats may appear in search results."})]})}var nm=i;function ng(e){let{onSearch:t}=e,n=(0,tM.useT)(),{copyToClipboard:r,isCopied:i}=(0,tL.useCopyToClipboard)({timeout:2e3}),{isTeam:o}=(0,nu.useActiveScope)(),{chatPrivacy:a}=(0,nm.useChatPrivacy)(),s=(0,tI.useCallback)(()=>{r(window.location.href),tP.toast.success("Share link copied!")},[r]);return(0,tk.jsx)("div",{className:"p-4 space-y-4",children:(0,tk.jsxs)("div",{className:"space-y-2",children:[o&&(0,tk.jsx)("button",{className:"border w-full h-8 rounded-md text-left text-v0-gray-500 text-label-14 px-2 hover:border-v0-alpha-500",onClick:t,children:"Search for a user"}),(0,tk.jsxs)("div",{className:"space-y-2",children:[(0,tk.jsx)(tT.Label,{className:"h-[30px] flex items-center font-medium",asChild:!0,children:(0,tk.jsx)("div",{children:"People with access"})}),(0,tk.jsx)(tJ,{})]}),(0,tk.jsx)(tT.Label,{className:"h-[30px] flex items-center font-medium",asChild:!0,children:(0,tk.jsx)("div",{children:"Visibility"})}),(0,tk.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tk.jsx)(nc,{}),(0,tk.jsxs)(tA.Button,{variant:"secondary",onClick:s,className:"h-8 rounded-md px-1.5 gap-0",children:[i?(0,tk.jsx)(tE.Check,{}):(0,tk.jsx)(tN.Link,{}),(0,tk.jsx)("span",{className:"px-1.5",children:n("shareDialog.copyLink")})]})]}),"public"===a&&(0,tk.jsx)(nf,{}),(0,tk.jsxs)("div",{className:"flex items-center gap-1",children:[(0,tk.jsx)(tS.InformationFillSmall,{className:"text-v0-gray-900"}),(0,tk.jsx)(tD.default,{href:"/docs/teams#sharing-projects",target:"_blank",className:"text-sm text-v0-gray-900 hover:text-v0-gray-1000",children:"How does sharing chats work?"})]})]})})}var nv=g,nx=e.i(84151),ny=v;e.s(["ChatPermissionsSearch",()=>nG],867160);var nb=r,nw=e.i(972011),nj=e.i(600500),nC=g,nk=R,nS=e.i(827728),nN=eS,nE=tO,nD=t9,nI=b,nA=tv,nT=tV,nM=tH,nL=e.i(707827),nP=G,nR=tZ,n_=tx,nO=en,nF=r,nB=e.i(435082),nV=g;let nz=e=>{let{onBack:t,title:n}=e;return(0,nF.jsx)("div",{className:"px-2.5 py-1.5 border-b",children:(0,nF.jsxs)(nV.Button,{size:"sm",variant:"ghost",onClick:t,className:"hover:bg-transparent px-0!",children:[(0,nF.jsx)(nB.ChevronLeft,{}),n]})})};e.s(["default",0,nz],365449);var nH=e.i(563152);function nU(e){let{className:t}=e;return(0,nb.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:t,children:[(0,nb.jsx)("g",{clipPath:"url(#clip0_13783_5431)",children:(0,nb.jsx)("path",{d:"M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5Z",fill:"currentColor"})}),(0,nb.jsx)("defs",{children:(0,nb.jsx)("clipPath",{id:"clip0_13783_5431",children:(0,nb.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]})}function nG(e){let{onBack:t}=e,{chatId:n}=(0,nk.useChatId)(),[r,i]=(0,nI.useState)(""),[o]=(0,nS.useDebounceValue)(r,500),a=new URLSearchParams;o&&a.set("q",o);let{data:s,isLoading:l,mutate:c}=(0,nN.default)(n?"/api/chat/".concat(n,"/permissions/search?").concat(a.toString()):null,nA.fetcher),u=(0,nI.useRef)(null),[d,p]=(0,nI.useState)("view"),[h,f]=(0,nI.useState)([]),[m,g]=(0,nI.useState)(!1),v=(0,nI.useCallback)(async()=>{g(!0);let e=await fetch("/api/chat/".concat(n,"/permissions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h.map(e=>{let{userId:t}=e;return{userId:t,permission:d}}))});if(!e.ok){g(!1);let t=Error(await e.text());(0,nR.handleChatError)(t)||nP.toast.error("Failed to send invite");return}await Promise.all([(0,nE.mutate)(e=>"string"==typeof e&&e==="/api/chat/".concat(n,"/permissions"),e=>(null!=e?e:[]).concat(...h.map(e=>({permissionId:"optimistic-".concat(e.userId),type:"user",userId:e.userId,name:e.name,username:e.username,email:e.email,avatarUrl:e.avatarUrl,permission:d})))),c(void 0,{revalidate:!1})]),t()},[n,h,d,c,t]),x=(0,nI.useRef)(null),[y,b]=(0,nI.useState)(!1),[w,j]=(0,nI.useState)(!1);return(0,nI.useEffect)(()=>{let e=x.current;if(!e)return;let t=()=>{b(e.scrollTop>0),j(e.scrollHeight-e.scrollTop>e.clientHeight+1)};return t(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[l]),(0,nb.jsxs)("div",{children:[(0,nb.jsx)(nz,{onBack:t,title:"Invite Users"}),(0,nb.jsxs)("div",{className:"space-y-2 px-4 py-4",children:[(0,nb.jsxs)("div",{className:"flex gap-2",children:[(0,nb.jsx)("div",{className:"grow",children:(0,nb.jsx)(nW,{search:r,setSearch:i,selectedUsers:h,onRemove:e=>{f(h.filter(t=>t.userId!==e))},inputRef:u})}),(0,nb.jsx)("div",{className:"flex-shrink-0",children:(0,nb.jsxs)(nD.Select,{value:d,onValueChange:p,children:[(0,nb.jsxs)(nD.SelectTrigger,{className:"h-8 rounded-md gap-2 pr-1.5 w-auto min-w-fit",hideChevron:!0,children:[(0,nb.jsx)(nD.SelectValue,{}),(0,nb.jsx)(nH.ChevronDownSmall,{})]}),(0,nb.jsxs)(nD.SelectContent,{children:[(0,nb.jsx)(nD.SelectItem,{value:"view",children:"Can View"}),(0,nb.jsx)(nD.SelectItem,{value:"edit",children:"Can Edit"})]})]})})]}),(0,nb.jsx)("div",{className:"pb-2",children:l?(0,nb.jsx)("div",{className:"space-y-2",children:[,,,,,].fill(null).map((e,t)=>(0,nb.jsxs)("div",{className:"flex items-center gap-2",children:[(0,nb.jsx)(nM.Skeleton,{className:"size-8 rounded-full"}),(0,nb.jsxs)("div",{children:[(0,nb.jsx)("div",{className:"h-5 flex items-center",children:(0,nb.jsx)(nM.Skeleton,{className:"h-4 w-32"})}),(0,nb.jsx)("div",{className:"h-5 flex items-center",children:(0,nb.jsx)(nM.Skeleton,{className:"h-4 w-48"})})]})]},t))}):(null==s?void 0:s.length)?(0,nb.jsxs)("div",{className:"relative max-h-[232px]",children:[(0,nb.jsx)("div",{className:(0,nO.cn)("pointer-events-none absolute top-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-b from-background via-background/30 to-transparent",y?"opacity-100":"opacity-0")}),(0,nb.jsx)("div",{ref:x,className:"max-h-[232px] overflow-y-auto space-y-2",children:s.map(e=>(0,nb.jsxs)("button",{className:"flex items-center justify-between w-full text-left",onClick:()=>{if(h.some(t=>t.userId===e.userId))f(h.filter(t=>t.userId!==e.userId));else{var t;f(h.concat(e)),i(""),null==(t=u.current)||t.focus()}},children:[(0,nb.jsxs)("div",{className:"flex items-center gap-2 h-10",children:[(0,nb.jsx)(nT.AvatarUser,{userId:e.userId,rounded:!0}),(0,nb.jsxs)("div",{className:"text-sm",children:[(0,nb.jsx)("div",{className:"font-medium",children:e.name||e.username}),(0,nb.jsx)("div",{className:"text-v0-gray-900",children:e.email})]})]}),h.some(t=>t.userId===e.userId)?(0,nb.jsx)(nw.CheckCircleFill,{className:"!text-v0-blue-700"}):(0,nb.jsx)(nU,{className:"text-v0-gray-300"})]},e.userId))}),(0,nb.jsx)("div",{className:(0,nO.cn)("pointer-events-none absolute bottom-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-t from-background via-background/30 to-transparent",w?"opacity-100":"opacity-0")})]}):(0,nb.jsx)("div",{className:"mt-5 text-sm text-v0-gray-900",children:"No results"})})]}),(0,nb.jsx)("div",{className:"bg-v0-background-200 border-t p-4",children:(0,nb.jsxs)(nC.Button,{disabled:0===h.length||m,size:"sm",className:"w-full",onClick:v,children:[m&&(0,nb.jsx)(nL.Spinner,{}),(0,nb.jsx)("span",{children:"Invite"})]})})]})}function nW(e){let{search:t,setSearch:n,selectedUsers:r,onRemove:i,inputRef:o}=e;return(0,nb.jsxs)("div",{className:"bg-v0-background-100 focus-within:border-v0-alpha-500 disabled:border-v0-alpha-400 flex flex-wrap gap-0.5 w-full shrink-0 items-center rounded-md border p-0.5 outline-hidden transition-all disabled:pointer-events-none disabled:bg-v0-gray-100 disabled:text-v0-gray-500 h-auto min-h-8",children:[r.map(e=>(0,nb.jsx)(n_.Badge,{prefix:(0,nb.jsx)("button",{className:"p-1 cursor-pointer",onClick:()=>i(e.userId),children:(0,nb.jsx)(nj.CrossSmall,{})}),children:e.name||e.email},e.userId)),(0,nb.jsx)("input",{className:"text-label-14 bg-transparent outline-hidden file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-v0-gray-500 disabled:cursor-not-allowed disabled:text-v0-gray-500 flex-1 min-w-20 h-6 px-1.5",placeholder:0===r.length?"Search for a user":"",value:t,onChange:e=>n(e.target.value),autoFocus:!0,ref:o})]})}var nq=tL,nZ=G,nK=i;function n$(){let e=(0,ny.useT)(),{copyToClipboard:t}=(0,nq.useCopyToClipboard)({timeout:2e3}),n=(0,tC.useCallback)(()=>{t(window.location.href),nZ.toast.success("Share link copied!")},[t]);return(0,tw.jsx)(nv.Button,{variant:"secondary",className:"h-7 rounded-md px-2",size:"sm",onClick:n,children:e("shareDialog.share")})}function nY(){let e=(0,ny.useT)(),{canWriteToChat:t}=(0,nK.useChatMetadata)(),[n,r]=(0,tC.useState)(!1);return t?(0,tw.jsxs)(tj.Popover,{onOpenChange:e=>{e&&r(!1)},children:[(0,tw.jsx)(tj.PopoverTrigger,{asChild:!0,children:(0,tw.jsxs)(nv.Button,{className:"h-7 rounded-md sm:px-2 sm:w-fit w-7",size:"sm","data-testid":"share-block-button",variant:"secondary",children:[(0,tw.jsx)("span",{className:"sm:block hidden",children:e("shareDialog.share")}),(0,tw.jsx)("span",{className:"sm:hidden block",children:(0,tw.jsx)(nx.Share,{})})]})}),(0,tw.jsx)(tj.PopoverContent,{className:"w-[440px] max-w-screen origin-top-right",align:"end",alignOffset:1,children:n?(0,tw.jsx)(nG,{onBack:()=>r(!1)}):(0,tw.jsx)(ng,{onSearch:()=>r(!0)})})]}):(0,tw.jsx)(n$,{})}var nJ=r,nQ=e.i(89440),nX=Z,n0=tl,n1=e.i(660348),n2=e.i(481828),n5=nw,n4=e.i(270726),n3=c,n9=nL,n7=tv,n6=e.i(470259),n8=b,re=eU,rt=e.i(373998),rn=b,rr=e.i(40455);function ri(e,t){let n=(0,rn.useRef)({value:e,prev:void 0}),r=n.current.value;return(t?t(e,r):(0,rr.default)(e,r))||(n.current={value:e,prev:r}),n.current.prev}e.s(["usePreviousValue",()=>ri],857371);var ro=o,ra=e.i(996174),rs=v;let rl=(0,nQ.cva)("group relative flex h-7 cursor-pointer! items-center justify-center overflow-hidden whitespace-nowrap rounded-[6px] border px-0 w-7 sm:w-fit sm:px-2 sm:pr-2.5 font-medium",{variants:{variant:{primary:"text-v0-background-100 border-v0-gray-1000 bg-v0-gray-1000 hover:border-v0-gray-1000 hover:bg-v0-gray-1000",secondary:"bg-v0-background-300 hover:border-v0-alpha-400 border-v0-gray-200 text-v0-gray-1000 hover:bg-v0-gray-200",blue:"text-v0-background-100 border-v0-blue-700 bg-v0-blue-700",red:"text-v0-background-100 border-v0-red-700 bg-v0-red-700"}}});function rc(e){let{chatId:t,...n}=e,r=(0,rt.getChatDeploymentAtoms)(t),i=(0,nX.useAtomValue)(r.buttonVariant),o=(0,rs.useT)();return(0,nJ.jsx)("div",{className:"text-label-14 relative",children:(0,nJ.jsx)(ra.Tooltip,{side:"bottom",content:o("deployBlockPopover.deployToVercel"),children:(0,nJ.jsx)("button",{"data-testid":"deploy-block-button",className:(0,n7.cn)(rl({variant:i}),n.className),style:{...(0,n0.transitionStyles)(["background","color","border-color"]),...n.style},...n,children:(0,nJ.jsx)(rd,{chatId:t})})})})}function ru(e){let{chatId:t}=e,n=(0,rt.getChatDeploymentAtoms)(t),r=(0,nX.useAtomValue)(n.deploymentState),i=ri(r),{deployment:o,git:a}=(0,nX.useAtomValue)(n.externalMeta),s=(0,nX.useAtomValue)(n.deployButtonClickedAtTimestamp),l=(0,nX.useAtomValue)(n.deployCreationStartTimestamp),c=(0,nX.useAtomValue)(n.deployCreationEndTimestamp);(0,n8.useEffect)(()=>{if(!s||!l||!c||!i||"building"!==r||!(null==o?void 0:o.id))return;let e=Date.now();(0,ro.track)("DeployStartedBuild",{msSinceDeployClick:e-s,msStepPreDeploy:l-s,msStepDeploy:c-l,msStepPostDeploy:e-c,deploymentState:r,previousDeploymentState:i,targetDeploymentId:o.id,deploymentSource:a&&"sha"in a?"git":"api"})},[i,r,s,l,c,null==o?void 0:o.id,a])}function rd(e){let{chatId:t}=e,n=(0,rt.getChatDeploymentAtoms)(t),r=(0,nX.useAtomValue)(n.deploymentState),i=(0,nX.useAtomValue)(n.passingState),o=(0,nX.useAtomValue)(n.hasDeployableChanges),{error:a}=(0,nX.useAtomValue)(n.externalMeta),s=(0,rs.useT)();ru({chatId:t});let l=(0,n8.useMemo)(()=>{if(a&&a!==n6.NOT_FOUND)return{icon:(0,nJ.jsx)("span",{className:"text-v0-red-700",children:(0,nJ.jsx)(n4.StopFill,{})}),text:s("deployBlockPopover.deploy")};if(i)switch(i){case"passing-deployed":return{icon:(0,nJ.jsx)("span",{className:"text-v0-blue-700",children:(0,nJ.jsx)(n5.CheckCircleFill,{})}),text:s("deployBlockPopover.deploy")};case"passing-error":return{icon:(0,nJ.jsx)("span",{className:"text-v0-background-100 flex items-center justify-center",children:(0,nJ.jsx)(n1.Stop,{})}),text:void 0}}switch(r){case"not-deployed":case"deployed":case"failed":if(!o&&"failed"===r)return{icon:(0,nJ.jsx)(n1.Stop,{}),text:s("deployBlockPopover.deploy")};return{icon:void 0,text:s("deployBlockPopover.deploy")};case"deploying":case"queued":case"building":return{icon:(0,nJ.jsx)(n9.Spinner,{size:16}),text:s("deployBlockPopover.deploy")}}},[r,a,o,i,s]);return(0,nJ.jsx)(re.TransitionNode,{...re.PRESETS.buttonContent,children:(0,nJ.jsxs)("span",{className:"flex items-center justify-center",children:[(0,nJ.jsx)("span",{className:"sm:hidden",children:(null==l?void 0:l.icon)||(0,nJ.jsx)(n3.Globe,{})}),(0,nJ.jsxs)("span",{className:"hidden sm:flex items-center gap-1.5 ",children:[null==l?void 0:l.icon,null==l?void 0:l.text]})]})})}(0,nQ.cva)("border-v0-background-200 h-3 min-h-3 w-3 min-w-3 rounded-full border-[1.5px]",{variants:{variant:{success:"bg-v0-blue-700",error:"bg-v0-red-700"}}}),e.s(["ChatDeploymentTrigger",()=>rc],14791),e.s(["DeploymentStage",()=>iT],251016);var rp=r,rh=Z,rf=g,rm=b,rg=I,rv=c,rx=n1,ry=r,rb=g,rw=tv,rj=F;function rC(e){let{link:t,children:n,className:r}=e;return(0,ry.jsxs)("div",{className:(0,rw.cn)("flex flex-row justify-between gap-3 p-3 border-t border-v0-alpha-400 bg-v0-background-200",t&&"pl-1.5"),children:[t?(0,ry.jsx)(rb.Button,{variant:"ghost",size:"sm",className:"shrink-0",asChild:!0,children:(0,ry.jsx)(rj.default,{href:t.href,target:"_blank",className:"text-label-14 flex items-center gap-2",children:t.label})}):null,(0,ry.jsx)("span",{className:(0,rw.cn)("flex flex-1 items-center justify-end gap-3",t?"":"*:flex-1",r),children:n})]})}function rk(e){let{children:t,className:n,key:r}=e;return(0,ry.jsx)("div",{className:(0,rw.cn)("flex w-full flex-col overflow-hidden p-4",n),children:t},r)}e.s(["PopoverActions",()=>rC,"PopoverContent",()=>rk],416959);var rS=ei,rN=e.i(548866),rE=rt,rD=n6;e.s(["DeployOrPushButton",()=>iS,"FixDeploymentErrorsButton",()=>ik,"FixDeploymentWarningButton",()=>iC],332991);var rI=r,rA=e.i(616216),rT=e.i(607391),rM=rN,rL=rt;e.s(["useAsyncChatDeploymentActions",()=>ir],348327);var rP=Z,rR=b,r_=B,rO=t7,rF=(0,rO.createServerReference)("4032e159c81368aece56f6006876c56a6c82c4dfc1",rO.callServer,void 0,rO.findSourceMapURL,"configureDeploymentProtectionAction");e.s(["configureDeploymentProtectionAction",()=>rF],270084);var rB=$,rV=G;e.i(472428);var rz=e.i(152641),rH=t7,rU=(0,rH.createServerReference)("40853c49593a5402e2355093d71b9c7ac5c2c28c73",rH.callServer,void 0,rH.findSourceMapURL,"assignVercelAlias"),rG=n6,rW=e.i(696871),rq=o,rZ=rt,rK=eM,r$=e.i(144019),rY=ep,rJ=e.i(369218),rQ=ef,rX=e.i(315331),r0=O,r1=i,r2=z,r5=ey;e.s(["usePrewarmDeployWarnings",()=>it],280419);var r4=Z,r3=b,r9=rt,r7=ep,r6=eM,r8=t7,ie=(0,r8.createServerReference)("406db002490fdd15d7a432e77003cb2ed52bb9a96e",r8.callServer,void 0,r8.findSourceMapURL,"collectBlockDeployWarnings");function it(e){let{chatId:r}=e,i=(0,r9.getChatDeploymentAtoms)(r),o=(0,r4.useAtomValue)(i.deployWarning),{setDeployWarning:a}=(0,r9.getChatDeploymentActions)(r),{user:s}=(0,r7.useUser)(),l=(0,r6.useActiveBlockState)(),c=(0,r3.useCallback)(async e=>{let{blockId:i,fromGitProject:s}=e,l="".concat(r,"-").concat(i,"-").concat(s);return(l!==n&&(t=void 0,n=l),o)?{set:!1,skippedDeployWarning:o.commonDeployError}:t||(t=(async()=>{try{let e=await ie({blockId:i,fromGitProject:s});if(!("warning"in e))return{set:!1};return a({...e,from:"deploy"}),{set:!0}}catch(e){return{set:!1,skippedDeployWarning:void 0}}})())},[o,a,r]);return{prewarmDeployWarning:(0,r3.useCallback)(e=>{let t=null==l?void 0:l.id;t&&s&&c({blockId:t,fromGitProject:e})},[c,null==l?void 0:l.id,s]),maybeSetDeployWarning:c}}function ir(e){var t,n,r,i;let{chatId:o}=e,a=(0,r_.useRouter)(),s=(0,rZ.getChatDeploymentAtoms)(o),l=(0,rP.useAtomValue)(s.externalMeta),{user:c}=(0,rY.useUser)(),{mutate:u}=(0,rz.useServerQuerySWR)(["chat","externalMeta"],{chatId:o}),{submit:d}=(0,rB.useV0Chat)(),p=(0,rK.useActiveBlockState)(),h=(0,r$.useAutoCreateProject)({chatId:o,activeBlock:p}),{isTeam:f,isNewV0Rbac:m,hasVercelWritePermission:g}=(0,r2.useActiveScope)(),v=!!(m?g:c&&["OWNER","MEMBER"].includes(null!=(r=c.teamRole)?r:"")),{data:x}=(0,rz.useServerQuerySWR)(["scoped","team"],{},{stopFetch:!f,revalidateNever:!0}),y=!!f&&null!=(i=null==x||null==(n=x.enabledInvoiceItems)||null==(t=n.passwordProtection)?void 0:t.enabled)&&i,{setIsOpenForLocation:b,setStageIntent:w,setNewDomain:j,setDeployWarning:C,setDomainError:k,setDomainErrorRedirect:S,setAsyncActionLoading:N,setDeployButtonClickedAtTimestamp:E,setDeployCreationStartTimestamp:D,setDeployCreationEndTimestamp:I}=(0,rZ.getChatDeploymentActions)(o),A=(0,rP.useAtomValue)(s.asyncActionLoading),T=(0,rP.useAtomValue)(s.isAbleToDeploy),M=(0,rP.useAtomValue)(s.isAbleToPushChanges),L=(0,rP.useAtomValue)(s.isNewDomainValid),P=(0,rP.useAtomValue)(s.newDomain),R=(0,rP.useAtomValue)(s.newBranchName),_=(0,rP.useAtomValue)(s.deployWarning),{project:O}=(0,r1.useChatMetadata)(),{deployment:F,git:B}=l,{gbs:V,dpe:z}=(0,r0.useFlags)(),H=(0,rP.useAtomValue)(s.protection),U=(0,rP.useAtomValue)(s.protectionPassword),{maybeSetDeployWarning:G}=it({chatId:o}),W=(0,rR.useMemo)(()=>{var e;return null!=(e=null!=R?R:null==B?void 0:B.ref)?e:"main"},[R,B]),q=(0,rR.useMemo)(()=>({...is,...F,...ia(c)}),[F,c]),Z=(0,rR.useMemo)(()=>({...ic,...B,...il(W)}),[B,W]),K=async()=>{let e=await h();return e.ok||rV.toast.error("Unable to create project. Error: ".concat(e.error)),e},$=async()=>{try{E(Date.now());let e=null==p?void 0:p.id;if(!T||!e||!c)return void rV.toast.error("Unable to deploy");let t=await G({blockId:e,fromGitProject:!1});if(t.set)return;if(z&&"public"!==H&&"password"===H){if(!y)return void rV.toast.error("Your plan does not include Password-Protected Deployments");if(v&&!(null==U?void 0:U.trim()))return void rV.toast.error("Please enter a password")}await u({serverMutate:(async()=>{if(await K(),"password"===H&&v&&(null==O?void 0:O.projectId)&&z){let e=await rF({projectId:O.projectId,kind:"password",password:U.trim()});if(!0!==e)throw Error("Failed to configure password protection")}if("team"===H&&v&&(null==O?void 0:O.projectId)&&z){let e=await rF({projectId:O.projectId,kind:"sso",enabled:!0});if(!0!==e)throw Error("Failed to configure team protection")}D(Date.now());let n=await ii({blockId:e,skippedDeployWarning:t.skippedDeployWarning});"error"in n&&rV.toast.error("An error occurred while deploying: ".concat(n.error)),I(Date.now()),C(null)})(),optimisticData:{git:void 0,error:void 0,deployment:q}})}catch(e){rV.toast.error("An error occurred while deploying")}},Y=async()=>{try{let e=null==p?void 0:p.id;if(!M||!e||!c)return void rV.toast.error("Unable to push changes");let t=await G({blockId:e,fromGitProject:!0});if(t.set)return;if(z&&"public"!==H&&"password"===H){if(!y)return void rV.toast.error("Your plan does not include Password-Protected Deployments");if(v&&!(null==U?void 0:U.trim()))return void rV.toast.error("Please enter a password")}await u({serverMutate:(async()=>{if(await K(),"password"===H&&v&&(null==O?void 0:O.projectId)&&z){let e=await rF({projectId:O.projectId,kind:"password",password:U.trim()});if(!0!==e)throw Error("Failed to configure password protection")}if("team"===H&&v&&(null==O?void 0:O.projectId)&&z){let e=await rF({projectId:O.projectId,kind:"sso",enabled:!0});if(!0!==e)throw Error("Failed to configure team protection")}await io({blockId:e,branch:W,skippedDeployWarning:t.skippedDeployWarning,onProductionBranch:null==B?void 0:B.onProductionBranch,gitBidirectionalSyncOn:!!V}),C(null)})(),optimisticData:{error:void 0,deployment:{...q,git:Z},git:Z}})}catch(e){if(e instanceof Error)return void rV.toast.error(e.message);rV.toast.error("An error occurred while pushing changes")}},J=async()=>{if(!L||!P)return void k("Invalid domain");let e=null==O?void 0:O.vercelProjectId;if(!e){var t;let n=await K();if(!n.ok||!(null==(t=n.value)?void 0:t.vercelProjectId))return void rV.toast.error("An error occurred creating Vercel project: ".concat(n.ok?"An unknown error occurred":n.error));e=n.value.vercelProjectId}try{k(null),S(null),await u({serverMutate:(async()=>{let t=await rU({deploymentId:null==F?void 0:F.id,alias:P,vercelProjectId:e});if(!t.success){let e=t.errorCode||rG.UNEXPECTED_ERROR,n=rW.ALIAS_ERROR_MAP[e]||t.errorMessage;k(n||"Failed to assign domain"),t.redirectTo&&S(t.redirectTo),rV.toast.error(n||"Failed to assign domain");return}rV.toast.success("Domain assigned successfully"),w(null),j(null),k(null),S(null)})(),optimisticData:{...l,deployment:null!=F?F:void 0}})}catch(t){let e=t instanceof Error?t.message:"An error occurred while assigning domain";k(e),rV.toast.error(e)}},Q=(0,rR.useCallback)(()=>{b(!1,null),(0,rQ.openDialog)({type:"feedback",data:{feedback:"I'm having trouble loading my deployment. \nChat: ".concat(o," \nError: ").concat(l.error),sentiment:"bad"}})},[b,o,l.error]),X=(0,rR.useCallback)(()=>{a.refresh()},[a]),ee=async()=>{_&&(p&&(0,rq.track)("FixDeployWarning",{blockId:p.id,warning:_.warning}),en(),await d({action:"fix-with-v0",type:"fix-with-v0",content:(0,r5.createMDXMessageContent)("An error occurred during deployment. Please fix:\n\n".concat(iu(_.prompt),"\n"))}),C(null))},et=async e=>{en(),await d({action:"fix-with-v0",type:"fix-with-v0",content:(0,r5.createMDXMessageContent)("An error occurred during deployment. Please fix:\n\n".concat(iu(e)))})},en=(0,rR.useCallback)(()=>{setTimeout(()=>{b(!1,null)},2e3)},[b]);function er(e,t){return async function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];if(e===A)return rV.toast.error("Unable to perform deployment action");N(e);try{return await t(...r)}finally{N(null)}}}return{handleRetry:X,handleReport:Q,handleDeploy:er("deploy",$),handlePushChanges:er("pushing",Y),handleAssignDomain:er("assigning-domain",J),handleFixDeployWarning:er("auto-fixing-warning",ee),handleFixWithV0:er("auto-fixing-errors",et)}}async function ii(e){var t;let{blockId:n,skippedDeployWarning:r,passwordProtection:i}=e,o=await fetch("/chat/b/".concat(n,"/deploy"),{method:"POST",body:JSON.stringify({skippedDeployWarning:r,passwordProtection:i})}),a=await o.json();return o.ok?a:{error:null!=(t=a.errorMsg)?t:a.error}}async function io(e){let t,{blockId:n,skippedDeployWarning:r,branch:i,onProductionBranch:o,gitBidirectionalSyncOn:a}=e;t=a&&!o?await fetch("/chat/b/".concat(n,"/deploy"),{method:"POST",body:JSON.stringify({skippedDeployWarning:r,target:o?"production":"preview"})}):await (0,rX.pushChanges)({blockId:n,skippedDeployWarning:r,branch:i});let s=await t.json();if(!t.ok){var l;throw Error(null!=(l=s.errorMsg)?l:"An error occurred while pushing changes")}return s}e.s(["collectBlockDeployWarnings",()=>ie],930597);let ia=e=>({readyState:"INITIALIZING",createdAt:0,creator:e?{uid:e.id,username:e.username,avatar:e.avatar}:void 0}),is={id:"loading",inspectorUrl:"",name:"",projectId:"",customAlias:{alias:rJ.LOADING_SKELETON,uid:"",created:"",redirect:null,updatedAt:0},screenshotUrl:null,project:void 0,automaticAliases:[],filteredAliases:[],git:void 0,meta:{},url:rJ.LOADING_SKELETON,ownerId:"",readyState:"INITIALIZING",createdAt:0,bestDomain:rJ.LOADING_SKELETON},il=e=>({ref:e,sha:rJ.LOADING_SKELETON,commitMessage:rJ.LOADING_SKELETON}),ic={ownerName:"",repoName:"",ref:"",sha:"",commitMessage:"",type:"github",prId:null,repoId:0,refs:[],onProductionBranch:!0,gitConnected:!0,gitAutoCommitPush:!1,gitAutoPull:!1};function iu(e){return e.includes("```")?e:" ```\n".concat(e,"\n``` ")}var id=g,ip=v,ih=z,im=rz,ig=A,iv=i,ix=Z,iy=n2,ib=K,iw=b,ij=e.i(538553);function iC(e){let{chatId:t}=e,n=(0,rL.getChatDeploymentAtoms)(t),r="auto-fixing-warning"===(0,ix.useAtomValue)(n.asyncActionLoading),{hasVercelWritePermission:i}=(0,ih.useActiveScope)(),{handleFixDeployWarning:o}=ir({chatId:t}),a=(0,iw.useCallback)(()=>{o()},[o]),s=(0,iw.useMemo)(()=>({disabled:!i||r,isLoading:r,loadingText:"Fixing warning"}),[i,r]);return(0,rI.jsx)(ij.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,rI.jsx)(id.Button,{size:"sm",variant:"default",onClick:a,disabled:s.disabled,children:(0,rI.jsxs)(rT.ActionStatus,{isLoading:s.isLoading,loading:s.loadingText,children:["Fix with ",(0,rI.jsx)(rA.V0LoadableLogo,{invert:!s.disabled})]})})})}function ik(e){let{chatId:t,deploymentId:n,variant:r="default"}=e,i=(0,rL.getChatDeploymentAtoms)(t),o="auto-fixing-errors"===(0,ix.useAtomValue)(i.asyncActionLoading),{data:a}=(0,im.useServerQuerySWR)(["deployment","errors"],{deploymentId:n}),{handleFixWithV0:s}=ir({chatId:t}),{hasVercelWritePermission:l}=(0,ih.useActiveScope)(),c=(0,iw.useMemo)(()=>null!=a&&!!a.fullErrorText,[a]),u=(0,iw.useCallback)(()=>{(null==a?void 0:a.fullErrorText)&&s(a.fullErrorText)},[null==a?void 0:a.fullErrorText,s]),d=(0,iw.useMemo)(()=>{let e="Collecting errors";c&&(e="Auto-fixing errors");let t=!l||!c||o;return{onClick:u,isLoading:t,loadingText:e,disabled:t}},[u,l,c,o]);return(0,rI.jsx)(ij.RbacTooltip,{show:!l,requiredRole:"V0Builder",children:(0,rI.jsx)(id.Button,{size:"sm",onClick:d.onClick,disabled:d.disabled,variant:r,children:(0,rI.jsxs)(rT.ActionStatus,{isLoading:d.isLoading,loading:d.loadingText,children:["Fix with"," ",(0,rI.jsx)(rA.V0LoadableLogo,{invert:"default"===r&&!d.disabled,loading:d.disabled})]})})})}function iS(e){let{chatId:t,variant:n="default",...r}=e,i=(0,rL.getChatDeploymentAtoms)(t),o=(0,ix.useAtomValue)(i.externalMeta),a=(0,ix.useAtomValue)(i.deployWarning),s=(0,ix.useAtomValue)(i.isAbleToPushChanges),l=(0,ix.useAtomValue)(i.isAbleToDeploy),c=(0,ix.useAtomValue)(i.hasDeployableChanges),u=(0,ix.useAtomValue)(i.selectedEnvironment),d=(0,ix.useAtomValue)(i.asyncActionLoading),p=(0,ix.useAtomValue)(i.asyncActionLoadingLabel),h=(0,ix.useAtomValue)(i.activeBlockVersionNumber),{handlePushChanges:f,handleDeploy:m}=ir({chatId:t}),{hasVercelWritePermission:g}=(0,ih.useActiveScope)(),v=(0,ip.useT)(),{project:x}=(0,iv.useChatMetadata)(),{vercelProjectWithDashboard:y}=(0,ig.useVercelProject)({v0ProjectId:null==x?void 0:x.projectId}),b=!!y,w=(0,ix.useSetAtom)(ib.isSettingsSheetOpenAtom),j=(0,ix.useSetAtom)(ib.settingsSheetTabAtom),{setIsOpenForLocation:C}=(0,rL.getChatDeploymentActions)(t),k=(0,iw.useCallback)(e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),C(!1,null),j("overview"),w(!0)},[C,j,w]),S=(0,iw.useMemo)(()=>{var e;let t=!!(null==(e=o.deployment)?void 0:e.id),n=!!(null==a?void 0:a.warning),{git:r}=o,i="Publish to Production";if("preview"===u&&(i="Publish to a Preview"),t&&(i="Republish v".concat(h),c&&(i="Publish Changes")),n&&(i=v("deployBlockPopover.deploy")),r){let e="pushing"===d;return{onClick:f,disabled:!g||!s||e,text:i,isLoading:e,loadingText:p}}{let e="deploy"===d;return{onClick:m,disabled:!g||!l||e,text:i,isLoading:e,loadingText:p}}},[o,null==a?void 0:a.warning,u,h,c,d,s,f,p,l,m,g,v]);function N(e){e.preventDefault(),S.onClick()}return(null==x?void 0:x.vercelProjectId)&&!b?(0,rI.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,rI.jsx)(rM.EmptyState,{title:"Connect to Vercel to publish",icon:(0,rI.jsx)(iy.LogoVercel,{}),children:"Connect your project to Vercel to publish your changes."}),(0,rI.jsx)(id.Button,{type:"button",size:"sm",variant:"secondary",onClick:k,children:"Open Project Settings"})]}):(0,rI.jsx)(ij.RbacTooltip,{show:!g,requiredRole:"V0Builder",children:(0,rI.jsx)(id.Button,{size:"sm",onClick:S.onClick,disabled:S.disabled,variant:n,onSubmit:N,...r,children:(0,rI.jsx)(rT.ActionStatus,{isLoading:S.isLoading,loading:S.loadingText,children:S.text})})})}var iN=eU,iE=z,iD=ij,iI=e.i(66990),iA=rJ;function iT(e){let{chatId:t}=e,n=(0,rE.getChatDeploymentAtoms)(t),r=(0,rh.useAtomValue)(n.deploymentState),i=(0,rh.useAtomValue)(n.hasDeployableChanges),{deployment:o,error:a}=(0,rh.useAtomValue)(n.externalMeta),{handleRetry:s}=ir({chatId:t}),{hasVercelWritePermission:l}=(0,iE.useActiveScope)(),c=(0,rm.useMemo)(()=>{if(a&&a!==rD.NOT_FOUND)return{content:(0,rp.jsx)(rk,{children:(0,rp.jsx)(rN.EmptyState,{title:"Failed to load deployment",variant:"error",icon:(0,rp.jsx)(rx.Stop,{}),children:"There was an error loading your deployment."})}),actions:(0,rp.jsx)(rC,{children:(0,rp.jsx)(iD.RbacTooltip,{show:!l,requiredRole:"V0Builder",children:(0,rp.jsx)(rf.Button,{size:"sm",onClick:s,disabled:!l,children:"Reload"})})})};if(!o)return{content:(0,rp.jsx)(rk,{children:(0,rp.jsx)(iM,{})}),actions:null};let e=o.inspectorUrl?{href:o.inspectorUrl,label:"Inspect on Vercel"}:void 0,n=(0,rp.jsxs)(rC,{link:e,className:"".concat(i&&"flex-row-reverse"),children:[(0,rp.jsx)(iS,{variant:i?"default":"secondary",chatId:t}),(0,rp.jsx)(ik,{variant:i?"secondary":"default",chatId:t,deploymentId:o.id})]}),c=(0,rp.jsxs)("div",{className:"grid grid-cols-2 gap-3 p-3 w-full",children:[(0,rp.jsx)(iS,{chatId:t,className:"w-full",variant:"secondary"}),(0,rp.jsxs)(rf.Button,{size:"sm",className:"w-full",onClick:()=>{window.open("https://".concat(o.bestDomain),"_blank")},disabled:o.bestDomain===iA.LOADING_SKELETON,children:["Visit Site",(0,rp.jsx)(rg.External,{className:"w-4 h-4"})]})]}),u=null;return"failed"===r&&(u=n),"deployed"===r&&(u=c),{content:(0,rp.jsx)(rk,{className:"p-0",children:(0,rp.jsx)(rS.NewDeployment,{deploymentId:o.id,stopFetch:!0,chatId:t})}),actions:u}},[a,o,i,t,r,s,l]);return(0,rp.jsx)(iN.TransitionNode,{...iN.PRESETS.popoverContent,renderKey:"".concat(r,"-").concat(c.actions?"withActions":"noActions"),children:(0,rp.jsxs)("div",{className:"flex flex-col",children:[c.content,(0,rp.jsx)(iI.Separator,{}),c.actions]})})}function iM(){return(0,rp.jsx)(rN.EmptyState,{title:"No deployment found",icon:(0,rp.jsx)(rv.Globe,{}),children:"This chat has not been deployed yet."})}e.s(["AssignDomainStage",()=>iG],479963);var iL=r,iP=Z,iR=g,i_=e.i(763480),iO=rT,iF=rt,iB=F,iV=b,iz=z,iH=ij,iU=rJ;function iG(e){let{chatId:t}=e,n=(0,iF.getChatDeploymentAtoms)(t),{handleAssignDomain:r}=ir({chatId:t}),{setNewDomain:i,setStageIntent:o,setDomainError:a,setDomainErrorRedirect:s}=(0,iF.getChatDeploymentActions)(t),{deployment:l}=(0,iP.useAtomValue)(n.externalMeta),c=(0,iP.useAtomValue)(n.newDomain),u=(0,iP.useAtomValue)(n.asyncActionLoading),d=(0,iP.useAtomValue)(n.asyncActionLoadingLabel),p=(0,iP.useAtomValue)(n.domainError),h=(0,iP.useAtomValue)(n.domainErrorRedirect),{hasVercelWritePermission:f}=(0,iz.useActiveScope)(),m="assigning-domain"===u;function g(e){e.preventDefault(),f&&r()}let v=(0,iV.useMemo)(()=>p?h?(0,iL.jsx)(iB.default,{href:h,children:p}):p:null,[p,h]);return(0,iL.jsxs)(iL.Fragment,{children:[(0,iL.jsx)(nz,{onBack:()=>{i(null),a(null),s(null),o(null)},title:"Add a Custom Domain"}),(0,iL.jsxs)("form",{id:"assign-domain-form",onSubmit:g,children:[(0,iL.jsxs)(rk,{className:"gap-4",children:[(0,iL.jsx)("span",{className:"text-label-14 text-v0-gray-900",children:"Assign a custom vercel.app subdomain to make your project more memorable."}),(0,iL.jsx)("div",{className:"flex flex-col gap-2",children:(0,iL.jsx)(i_.Input,{placeholder:(null==l?void 0:l.bestDomain)&&l.bestDomain!==iU.LOADING_SKELETON?iW(l.bestDomain):"your-domain",value:null!=c?c:"",onChange:e=>{i(e.target.value),a(null),s(null)},disabled:m,className:"pr-0",style:{maskImage:"linear-gradient(to right, black calc(100% - 48px), transparent)"},error:v,suffix:(0,iL.jsx)("span",{className:"text-label-14 pr-2 text-v0-gray-900",children:".vercel.app"})})})]}),(0,iL.jsx)(rC,{children:(0,iL.jsx)(iH.RbacTooltip,{show:!f,requiredRole:"V0Builder",children:(0,iL.jsx)(iR.Button,{size:"sm",type:"submit",form:"assign-domain-form",disabled:!f||m,children:(0,iL.jsx)(iO.ActionStatus,{isLoading:m,loading:d,children:"Add Domain"})})})})]})]})}function iW(e){return e.replace(/\.(vercel\.app)$/,"")}},246185,e=>{e.v({choiceBoxItem:"choice-box-module__9Hhm3a__choiceBoxItem"})},386688,e=>{"use strict";var t=e.i(509473),n=e.i(338157),r=e.i(304649),i=e.i(246185);let o=e=>{let{label:i,direction:o="column",value:a,onChange:s,className:l,children:c,...u}=e;return(0,t.jsxs)("div",{className:(0,r.cn)("space-y-2",l),children:[i&&(0,t.jsx)("div",{className:"text-sm font-medium",children:i}),(0,t.jsx)(n.RadioGroup,{value:null!=a?a:void 0,onValueChange:s,className:(0,r.cn)("gap-2","row"===o?"flex":"flex flex-col"),...u,children:c})]})};o.Item=function(e){let{title:o,description:a,value:s,Icon:l,disabled:c}=e;return(0,t.jsxs)("label",{htmlFor:s,className:(0,r.cn)("flex w-full cursor-pointer items-center justify-between rounded-md border border-v0-gray-200 p-3 text-v0-gray-1000 transition-colors",!c&&"hover:bg-v0-background-200",i.default.choiceBoxItem),children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[l&&(0,t.jsx)("div",{"data-icon":!0,className:"text-v0-gray-900",children:l}),(0,t.jsxs)("div",{className:"text-label-14 flex flex-col gap-1 font-medium",children:[(0,t.jsx)("span",{"data-title":!0,children:o}),(0,t.jsx)("span",{className:"font-normal text-v0-gray-900","data-description":!0,children:a})]})]}),(0,t.jsx)(n.RadioGroupItem,{value:s,id:s,disabled:c})]})},e.s(["ChoiceBoxGroup",()=>o])},510266,924843,348841,e=>{"use strict";e.s(["SuspendingChatDeploymentPopoverContent",()=>eL],510266);var t=e.i(509473),n=e.i(639056),r=e.i(251016),i=e.i(479963),o=e.i(675120),a=e.i(743124),s=t,l=n,c=e.i(416959),u=e.i(386688),d=e.i(763480),p=o,h=e.i(486011),f=e.i(389905);let m=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.02174 4.76932C6.11625 2.33698 9.8838 2.33698 11.9783 4.76932L14.7603 7.99999L13.6664 9.27031L14.6934 10.3764L16.3184 8.48938V7.5106L13.115 3.79054C10.422 0.663244 5.57803 0.663247 2.88509 3.79054L-0.318298 7.5106V8.48938L2.88509 12.2094C4.7342 14.3568 7.59749 15.0297 10.0822 14.2281L8.9183 12.9747C7.16767 13.2832 5.28865 12.7019 4.02174 11.2307L1.23978 7.99999L4.02174 4.76932ZM8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6ZM4.5 8C4.5 6.067 6.067 4.5 8 4.5C9.933 4.5 11.5 6.067 11.5 8C11.5 8.63488 11.331 9.23028 11.0354 9.74364L14.0496 12.9897L14.5599 13.5393L13.4607 14.5599L12.9504 14.0103L10.0223 10.857C9.4512 11.262 8.7534 11.5 8 11.5C6.067 11.5 4.5 9.933 4.5 8Z" fill="currentColor"/>');e.s(["PreviewEye",0,m],924843);var g=e.i(199551),v=e.i(967472),x=e.i(707974),y=e.i(373998),b=e.i(332991),w=a,j=e.i(242759),C=e.i(662429),k=e.i(749709);function S(e){let{chatId:t}=e,n=(0,y.getChatDeploymentAtoms)(t),{git:r}=(0,l.useAtomValue)(n.externalMeta),i=(0,l.useAtomValue)(n.activeBlockVersionNumber),o=(0,l.useAtomValue)(n.newBranchName),a=(0,l.useAtomValue)(n.selectedEnvironment),S=(0,l.useAtomValue)(n.protection),N=e=>{switch(e){case"public":default:return"Public";case"team":return"Team Only";case"password":return"Password Protected"}},{setSelectedEnvironment:E,updateNewBranchName:D,setStageIntent:I}=(0,y.getChatDeploymentActions)(t),A=!!(0,l.useAtomValue)(n.asyncActionLoading),T=(0,w.useMemo)(()=>(null==r?void 0:r.ref)?r.onProductionBranch?(E("production"),{shouldForce:!0,previewDisabled:!0,productionDisabled:!1,branchName:r.ref,branchInputDisabled:!0}):(E("preview"),D(r.ref),{shouldForce:!0,previewDisabled:!1,productionDisabled:!0,branchName:r.ref,branchInputDisabled:!0}):{shouldForce:!1,previewDisabled:!1,productionDisabled:!1,branchName:o,branchInputDisabled:!1},[null==r?void 0:r.ref,null==r?void 0:r.onProductionBranch,o,E,D]),M=T.previewDisabled||A,L=T.productionDisabled||A,P=T.branchInputDisabled||A,R=T.branchName,{gbs:_,dpe:O}=(0,j.useFlags)();return(0,w.useEffect)(()=>{L||E("production")},[]),(0,s.jsxs)("form",{children:[(0,s.jsxs)(c.PopoverContent,{className:"p-0",children:[_&&r?(0,s.jsxs)(C.PopoverHeading,{title:"Select a Branch",className:"p-4 border-b border-v0-alpha-400",children:[(0,s.jsxs)(u.ChoiceBoxGroup,{value:a,onChange:e=>{E(e)},className:"flex flex-col gap-2",children:[(0,s.jsx)(u.ChoiceBoxGroup.Item,{disabled:L,Icon:(0,s.jsx)(h.Globe,{}),title:"Production",description:T.productionDisabled?"Only main can be to deployed to production.":"Make your changes live to all users.",value:"production"}),(0,s.jsx)(u.ChoiceBoxGroup.Item,{disabled:M,Icon:(0,s.jsx)(m,{}),title:"Preview",description:"Test your changes on a branch before going live.",value:"preview"})]}),(0,s.jsx)(p.TransitionNode,{...p.PRESETS.popoverContent,renderKey:null!=a?a:"",children:"preview"===a?(0,s.jsxs)("div",{className:"flex flex-col gap-2 pt-3",children:[(0,s.jsx)(x.Label,{htmlFor:"branch-name",children:"Branch name"}),(0,s.jsx)(d.Input,{prefix:T.shouldForce?(0,s.jsx)("span",{className:"text-v0-gray-900",children:(0,s.jsx)(f.LockClosed,{})}):void 0,disabled:P,id:"branch-name",placeholder:"your-branch-name",value:null!=R?R:"",onChange:e=>D(e.target.value)})]}):null})]}):(0,s.jsx)(C.PopoverHeading,{title:"Publish to the Web",className:"p-4 border-b border-v0-alpha-400",children:(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{children:"Publish "}),i?(0,s.jsxs)("span",{className:"font-medium",children:["version ",i]}):(0,s.jsx)("span",{children:"your app"}),(0,s.jsxs)("span",{children:[" ","to the web using Vercel. After you publish your app, you can feature it in the community as a template."]})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 p-3",children:[(0,s.jsx)(k.default,{title:"Customize Domain",icon:(0,s.jsx)(g.PencilEdit,{className:"!text-v0-gray-900 size-4"}),onClick:()=>{I("assign-domain")},disabledReason:"You can only set a custom domain after publishing your app.",disabled:!O||"preview"===a}),(0,s.jsx)(k.default,{title:"Visibility",icon:(0,s.jsx)(v.Eye,{className:"!text-v0-gray-900 size-4"}),onClick:()=>{I("password-protection")},disabledReason:"You can only set visibility after publishing your app.",label:N(S),disabled:!O||"preview"===a})]})]}),(0,s.jsx)(c.PopoverActions,{children:(0,s.jsx)(b.DeployOrPushButton,{chatId:t})})]})}var N=y,E=t,D=n,I=e.i(543017),A=e.i(660348),T=e.i(230125),M=c,L=e.i(548866),P=y,R=a,_=b,O=o;function F(e){let{chatId:t}=e,n=(0,P.getChatDeploymentAtoms)(t),r=(0,D.useAtomValue)(n.deployWarning),i=(0,R.useMemo)(()=>{if(!r)return{content:(0,E.jsx)(L.EmptyState,{title:"No deployment warnings",variant:"success",icon:(0,E.jsx)(I.Check,{}),children:"The source has been checked and no deployment warnings were found."}),actions:(0,E.jsx)(_.DeployOrPushButton,{chatId:t})};let{isSecurityRisk:e,warning:n}=r;return{content:(0,E.jsx)(M.PopoverContent,{children:(0,E.jsx)(L.EmptyState,{title:e?"Security Risk Found":"Deployment Warning",variant:e?"error":"warning",icon:e?(0,E.jsx)(A.Stop,{}):(0,E.jsx)(T.Warning,{}),children:n})}),actions:(0,E.jsxs)(M.PopoverActions,{children:[(0,E.jsx)(_.FixDeploymentWarningButton,{chatId:t}),(0,E.jsx)(_.DeployOrPushButton,{variant:"secondary",chatId:t})]})}},[t,r]);return(0,E.jsx)(O.TransitionNode,{...O.PRESETS.popoverContent,children:(0,E.jsxs)("div",{className:"flex flex-col gap-2",children:[i.content,i.actions]})})}var B=t,V=e.i(176248),z=A,H=c,U=L,G=e.i(979865),W=e.i(691175),q=e.i(667660);function Z(e){let{chatId:t}=e,n=(0,G.useRouter)(),{activeScopeSlug:r,isTeam:i}=(0,q.useActiveScope)();return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(H.PopoverContent,{children:(0,B.jsx)(U.EmptyState,{title:"Failed to load deployment",variant:"error",icon:(0,B.jsx)(z.Stop,{}),children:"You must set up two-factor authentication before accessing this deployment."})}),i&&r?(0,B.jsx)(H.PopoverActions,{children:(0,B.jsx)(V.Button,{size:"sm",onClick:()=>n.push((0,W.getTwoFactorRequiredUrlClient)({slug:r,path:"/chat/".concat(t)})),children:"Enable"})}):null]})}var K=t,$=V,Y=A,J=c,Q=L,X=e.i(348327);function ee(e){let{chatId:t}=e,{handleRetry:n,handleReport:r}=(0,X.useAsyncChatDeploymentActions)({chatId:t});return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(J.PopoverContent,{children:(0,K.jsx)(Q.EmptyState,{title:"Failed to load deployment",variant:"error",icon:(0,K.jsx)(Y.Stop,{}),children:"An issue occurred with our servers or your network connection. Please reload or report the problem if it persists."})}),(0,K.jsxs)(J.PopoverActions,{children:[(0,K.jsx)($.Button,{size:"sm",onClick:r,variant:"secondary",children:"Report"}),(0,K.jsx)($.Button,{size:"sm",onClick:n,children:"Reload"})]})]})}var et=t,en=V,er=c,ei=e.i(607391),eo=e.i(365449),ea=y,es=t,el=d,ec=h,eu=f,ed=x,ep=e.i(592258),eh=e.i(230766),ef=a,em=y,eg=n;e.i(472428);var ev=e.i(152641),ex=e.i(32170),ey=q,eb=j;function ew(e){let{value:t,icon:n,title:r,description:i,disabled:o,disabledReason:a}=e;return o?(0,es.jsx)("div",{className:"px-3 py-1 w-full group relative cursor-not-allowed opacity-50 focus:bg-v0-gray-100 focus:text-accent-foreground flex select-none items-center rounded-sm text-sm outline-hidden",title:a,"aria-disabled":!0,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,es.jsxs)("div",{className:"flex items-center gap-3 min-w-72",children:[(0,es.jsx)("span",{className:"text-v0-gray-900",children:n}),(0,es.jsxs)("div",{className:"flex flex-col text-left w-full",children:[(0,es.jsx)("span",{className:"text-sm font-medium w-full",children:r}),a?(0,es.jsxs)("span",{className:"h-4 overflow-hidden block w-full relative",children:[(0,es.jsx)("span",{className:"absolute inset-x-0 top-0 transition-transform duration-200 group-hover:-translate-y-full text-xs text-v0-gray-900 whitespace-nowrap w-full",children:i}),(0,es.jsx)("span",{className:"absolute inset-x-0 top-full transition-transform duration-200 group-hover:-translate-y-full text-xs text-v0-gray-900 whitespace-nowrap w-full",children:a})]}):(0,es.jsx)("span",{className:"text-xs text-v0-gray-900",children:i})]})]})}):(0,es.jsx)(ep.SelectItem,{value:t,title:r,className:"px-3 py-1 w-full group relative",iconOnRight:!0,children:(0,es.jsxs)("div",{className:"flex items-center gap-3 min-w-72",children:[(0,es.jsx)("span",{className:"text-v0-gray-900",children:n}),(0,es.jsxs)("div",{className:"flex flex-col text-left w-full",children:[(0,es.jsx)("span",{className:"text-sm font-medium w-full",children:r}),(0,es.jsx)("span",{className:"text-xs text-v0-gray-900",children:i})]})]})})}let ej=e=>{var t,n,r,i,o,a,s,l;let{chatId:c}=e,{dpe:u}=(0,eb.useFlags)(),d=(0,em.getChatDeploymentAtoms)(c),p=(0,eg.useAtomValue)(d.selectedEnvironment),h=(0,eg.useAtomValue)(d.protection),f=(0,eg.useAtomValue)(d.protectionPassword),{setProtection:m,setProtectionPassword:g}=(0,em.getChatDeploymentActions)(c),{user:v}=(0,ex.useUser)(),{isNewV0Rbac:x,hasVercelWritePermission:y}=(0,ey.useActiveScope)(),b=!!(x?y:v&&["OWNER","MEMBER"].includes(null!=(s=v.teamRole)?s:"")),{data:w}=(0,ev.useServerQuerySWR)(["scoped","team"],{},{revalidateNever:!0,stopFetch:!u}),j=!!w&&null!=(l=null==(n=w.enabledInvoiceItems)||null==(t=n.passwordProtection)?void 0:t.enabled)&&l,{data:C}=(0,ev.useServerQuerySWR)(["chat","project"],{chatId:c},{stopFetch:!u,suspense:!0}),k=null==w||null==(r=w.defaultDeploymentProtection)?void 0:r.passwordProtection,S=null==k?void 0:k.deploymentType,N=null==w||null==(i=w.defaultDeploymentProtection)?void 0:i.ssoProtection,E=null==N?void 0:N.deploymentType,D=e=>!!e&&("all"===e||("preview"===e?"preview"===p:"prod_deployment_urls_and_all_previews"===e?"preview"===p||"production"===p:"all_except_custom_domains"===e&&"preview"===p)),I=w&&p?k&&D(S)?"password":N&&D(E)?"team":"public":"public",A="all"===S||"all_except_custom_domains"===S&&"preview"===p,T="all"===E||"all_except_custom_domains"===E&&"preview"===p,M=A?"password":T?"team":null,L="password"===M?!b:!b||!j;(0,ef.useEffect)(()=>{M&&h!==M&&m(M)},[M,h,m]);let P="error"in C||!C.vercelProject?"public":(null==(o=C.vercelProject.project.passwordProtection)?void 0:o.deploymentType)==="all"?"password":(null==(a=C.vercelProject.project.ssoProtection)?void 0:a.deploymentType)==="all"?"team":"public";(0,ef.useEffect)(()=>{if(M)return;let e="public"!==P?P:I;h!==e&&m(e)},[P,M,I]);let R=(0,ef.useCallback)(e=>{switch(e){case"public":return M?"Enforced by team policy":b?void 0:x?"Requires builder permission":"Requires Owner or Member role";case"team":return"password"===M?"Enforced by team policy":j?b?void 0:x?"Requires builder permission":"Requires Owner or Member role":"Not included in your plan";case"password":return"team"===M?"Enforced by team policy":j?b?void 0:x?"Requires v0 Builder permission":"Requires Owner or Member role":"Not included in your plan"}},[M,b,x,j]);return u?(0,es.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,es.jsx)(ed.Label,{htmlFor:"deployment-protection",children:"Visibility"}),(0,es.jsxs)(ep.Select,{value:h,onValueChange:e=>{b&&(!M||e===M)&&("password"!==e&&"team"!==e||j)&&(m(e),"password"!==e&&g(null))},children:[(0,es.jsx)(ep.SelectTrigger,{id:"deployment-protection",className:"h-8 rounded-md",children:(0,es.jsx)(ep.SelectValue,{children:(0,es.jsxs)("span",{className:"flex items-center gap-2",children:["team"===h?(0,es.jsx)(eh.AvatarUser,{teamId:null==w?void 0:w.id,rounded:!0,size:"xs"}):"password"===h?(0,es.jsx)(eu.LockClosed,{className:"text-v0-gray-900"}):(0,es.jsx)(ec.Globe,{className:"text-v0-gray-900"}),(0,es.jsx)("span",{children:"team"===h?"Everyone in ".concat((null==w?void 0:w.name)||"team"):"password"===h?"Password Protected":"Public"})]})})}),(0,es.jsxs)(ep.SelectContent,{children:[(0,es.jsx)(ew,{value:"public",icon:(0,es.jsx)(ec.Globe,{}),title:"Public",description:"Anyone with the URL can view your app",disabled:!!M||!b,disabledReason:R("public")}),w&&(0,es.jsx)(ew,{value:"team",icon:(0,es.jsx)(eh.AvatarUser,{teamId:w.id,rounded:!0,size:"xs"}),title:"Everyone in ".concat(w.name),description:"Anyone in the ".concat(w.name," team can view your app"),disabled:"password"===M||!b||!j,disabledReason:R("team")}),(0,es.jsx)(ew,{value:"password",icon:(0,es.jsx)(eu.LockClosed,{}),title:"Password Protected",description:"Anyone with the password can view your app",disabled:L||"team"===M,disabledReason:R("password")})]})]}),"password"===h&&(0,es.jsxs)("div",{className:"flex flex-col gap-2 pt-2",children:[(0,es.jsx)(ed.Label,{htmlFor:"deployment-password",children:"Password"}),(0,es.jsx)(el.Input,{id:"deployment-password",placeholder:"password"!==M||b?"Enter password":"Default password already set",type:"password",value:null!=f?f:"",onChange:e=>g(e.target.value),disabled:L})]})]}):null};var eC=n,ek=a;e.i(563948);var eS=e.i(407562),eN=e.i(270084),eE=ev,eD=e.i(144019),eI=e.i(449381),eA=e.i(762585),eT=e.i(111412);function eM(e){let{chatId:t}=e,{setStageIntent:n}=(0,ea.getChatDeploymentActions)(t),r=(0,ea.getChatDeploymentAtoms)(t),i=(0,eC.useAtomValue)(r.protection),o=(0,eC.useAtomValue)(r.protectionPassword),[a,s]=(0,ek.useState)(!1),l=(0,eI.useActiveBlockState)(),c=(0,eD.useAutoCreateProject)({chatId:t,activeBlock:l}),{data:u,mutate:d}=(0,eE.useServerQuerySWR)(["chat","project"],{},{suspense:!0});if("error"in u)return(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)(eo.default,{title:"Visibility",onBack:()=>{n(null)}}),(0,et.jsx)(er.PopoverContent,{className:"gap-4",children:(0,et.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,et.jsx)(eT.Label,{htmlFor:"deployment-protection",children:"Visibility"}),(0,et.jsx)(eA.Skeleton,{className:"h-[32px] w-full"})]})}),(0,et.jsxs)(er.PopoverActions,{children:[(0,et.jsx)(en.Button,{size:"sm",variant:"outline",disabled:!0,type:"button",children:"Cancel"}),(0,et.jsx)(en.Button,{size:"sm",disabled:!0,children:"Save"})]})]});let p=u.projectId,h=async()=>{if(!p)return void eS.toast.error("Project not found");if(!u.vercelProjectId){s(!0);let e=await c();if(!e.ok){eS.toast.error("Unable to create project: ".concat(e.error)),s(!1);return}}s(!0);let e=!1;try{"password"===i?(e=await (0,eN.configureDeploymentProtectionAction)({projectId:p,kind:"password",password:null!=o?o:void 0}),await d({serverMutate:Promise.resolve(!0),optimisticData:{...u,vercelProject:u.vercelProject?{...u.vercelProject,project:{...u.vercelProject.project,passwordProtection:{deploymentType:"all"}}}:null}})):"team"===i?(e=await (0,eN.configureDeploymentProtectionAction)({projectId:p,kind:"sso",enabled:!0}),await d({serverMutate:Promise.resolve(!0),optimisticData:{...u,vercelProject:u.vercelProject?{...u.vercelProject,project:{...u.vercelProject.project,ssoProtection:{deploymentType:"all"}}}:null}})):((e=await (0,eN.configureDeploymentProtectionAction)({projectId:p,kind:"password",password:null}))&&await (0,eN.configureDeploymentProtectionAction)({projectId:p,kind:"sso",enabled:!1}),await d({serverMutate:Promise.resolve(!0),optimisticData:{...u,vercelProject:u.vercelProject?{...u.vercelProject,project:{...u.vercelProject.project,passwordProtection:void 0,ssoProtection:void 0}}:null}})),e?(eS.toast.success("Deployment protection updated"),n(null)):eS.toast.error("Failed to update protection")}catch(e){eS.toast.error("Failed to update protection")}finally{s(!1)}};return(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)(eo.default,{title:"Visibility",onBack:()=>{n(null)}}),(0,et.jsx)(er.PopoverContent,{className:"gap-4",children:(0,et.jsx)(ej,{chatId:t})}),(0,et.jsxs)(er.PopoverActions,{children:[(0,et.jsx)(en.Button,{size:"sm",variant:"outline",onClick:()=>n(null),disabled:a,type:"button",children:"Cancel"}),(0,et.jsx)(en.Button,{size:"sm",onClick:h,disabled:a,children:(0,et.jsx)(ei.ActionStatus,{isLoading:a,loading:a,children:"Save"})})]})]})}function eL(e){let{chatId:s}=e,l=(0,N.getChatDeploymentAtoms)(s),c=(0,n.useAtomValue)(l.stage),u=(0,a.useMemo)(()=>{switch(c){case"create":return(0,t.jsx)(S,{chatId:s});case"deployment":return(0,t.jsx)(r.DeploymentStage,{chatId:s});case"assign-domain":return(0,t.jsx)(i.AssignDomainStage,{chatId:s});case"deploy-warning":return(0,t.jsx)(F,{chatId:s});case"two-factor-error":return(0,t.jsx)(Z,{chatId:s});case"error":return(0,t.jsx)(ee,{chatId:s});case"password-protection":return(0,t.jsx)(eM,{chatId:s})}},[s,c]);return(0,t.jsx)(o.TransitionNode,{...o.PRESETS.popoverContent,children:(0,t.jsx)("div",{className:"flex flex-col",children:u})})}var eP=e.i(452703),eR=ev,e_=a,eO=ev;function eF(e,t){return(0,eO.useServerQuerySWR)(["deployment","screenshot"],{deploymentId:e},{refreshInterval:t&&e?3e3:void 0,stopFetch:!t})}function eB(e){var t,n,r;let{chatId:i}=e,[o,a]=(0,e_.useState)(void 0),{data:s}=(0,eR.useServerQuerySWR)(["chat","externalMeta"],{chatId:i},{refreshInterval:o,suspense:!0});(0,e_.useEffect)(()=>{var e,t;let n,r=null==(e=s.deployment)?void 0:e.readyState,i=null==(t=s.deployment)?void 0:t.id;if(!r||!i)return;let{setDeploymentStatus:o}=(0,eP.getDeploymentActions)(i);o({error:void 0,deployment:s.deployment}),["QUEUED","INITIALIZING","NOTREADY"].includes(r)&&(n=500),["BUILDING"].includes(r)&&(n=2e3),"READY"===r&&(n=void 0),a(n)},[s,a]);let l=null==(t=s.deployment)?void 0:t.id,c=(null==(n=s.deployment)?void 0:n.readyState)==="READY"&&!s.deployment.screenshotUrl,{data:u}=eF(null==(r=s.deployment)?void 0:r.id,c);return(0,e_.useEffect)(()=>{if((null==u?void 0:u.url)&&l&&s.deployment){let{setDeploymentStatus:e}=(0,eP.getDeploymentActions)(l);e({error:void 0,deployment:{...s.deployment,screenshotUrl:u.url}})}},[null==u?void 0:u.url,l,s.deployment]),{externalMeta:s}}e.s(["useSuspenseIntervalExternalMeta",()=>eB],348841)},626085,e=>{"use strict";var t=e.i(743124);function n(e){let n=(0,t.useRef)(void 0);return(0,t.useEffect)(()=>{n.current=e}),n.current}e.s(["usePrevious",()=>n])},613922,e=>{"use strict";e.s(["DeploymentButton",()=>S],613922);var t=e.i(509473),n=e.i(14791),r=e.i(574768),i=e.i(762585),o=e.i(743124),a=e.i(510266),s=e.i(348841),l=o,c=e.i(449381),u=e.i(373998),d=e.i(639056),p=e.i(370912),h=e.i(301331);function f(e){let{chatId:t}=e,n=(0,c.useActiveBlockState)(),{getBlockCreatedAt:r}=(0,p.useBlockCreatedAt)(),{currentBlockIndex:i}=(0,h.useBlockHistory)({blockId:null==n?void 0:n.id,searchAll:!0}),o=(0,u.getChatDeploymentAtoms)(t),{deployment:a}=(0,d.useAtomValue)(o.externalMeta),{setActiveBlockVersionNumber:s,setHasDeployableChanges:f}=(0,u.getChatDeploymentActions)(t),m=e=>e?new Date(e).getTime():0,g=(0,l.useMemo)(()=>!!n&&(m(n.lastEditedAt)>m(null==a?void 0:a.createdAt)||m(r(n.id))>m(null==a?void 0:a.createdAt)),[n,a,r]),v=(0,l.useMemo)(()=>i+1,[i]);return(0,l.useLayoutEffect)(()=>{let e=requestAnimationFrame(()=>{f(g),s(v)});return()=>cancelAnimationFrame(e)},[g,f,s,v]),{hasDeployableChanges:g}}var m=d,g=o;e.i(563948);var v=e.i(407562),x=u,y=e.i(626085);function b(e){let{chatId:t}=e,n=(0,x.getChatDeploymentAtoms)(t),{deployment:r}=(0,m.useAtomValue)(n.externalMeta),i=(0,m.useAtomValue)(n.isOpen),o=(0,m.useAtomValue)(n.deploymentState),{triggerPassingState:a}=(0,x.getChatDeploymentActions)(t),s=(0,y.usePrevious)(o),l=(0,g.useCallback)(()=>{!i&&(null==r?void 0:r.id)&&v.toast.deployment({id:r.id})},[i,null==r?void 0:r.id]);(0,g.useEffect)(()=>{(null==r?void 0:r.id)&&s&&(["queued","failed","error","not-deployed","deploying"].includes(s)&&"building"===o&&l(),"building"===s&&"failed"===o&&(a("passing-error",3e3),l()),"building"===s&&"deployed"===o&&(a("passing-deployed"),l()))},[null==r?void 0:r.id,s,o,l,a])}e.i(472428);var w=e.i(152641),j=d,C=u,k=e.i(280419);function S(e){let{chatId:n}=e;return(0,t.jsx)(o.Suspense,{fallback:(0,t.jsx)(N,{}),children:(0,t.jsx)(E,{chatId:n})})}function N(){return(0,t.jsx)(i.Skeleton,{className:"h-7 w-[69px] rounded-[6px]"})}function E(e){let{chatId:i}=e;(0,s.useSuspenseIntervalExternalMeta)({chatId:i}),f({chatId:i}),b({chatId:i}),(0,w.useServerQuerySWR)(["scoped","team"],{});let o=(0,C.getChatDeploymentAtoms)(i),l=(0,C.getChatDeploymentActions)(i),c=(0,j.useAtomValue)(o.openLocation),{prewarmDeployWarning:u}=(0,k.usePrewarmDeployWarnings)({chatId:i});return(0,t.jsxs)(r.Popover,{open:"chat-header"===c,onOpenChange:e=>{l.setIsOpenForLocation(e,"chat-header")},children:[(0,t.jsx)(r.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(n.ChatDeploymentTrigger,{chatId:i,onMouseOver:()=>{u(!1)}})}),(0,t.jsx)(r.PopoverContent,{className:"w-[440px] max-w-screen origin-top-right",align:"end",alignOffset:1,children:(0,t.jsx)(a.SuspendingChatDeploymentPopoverContent,{chatId:i})})]})}},519738,e=>{"use strict";e.s(["useBlockVersionInfo",()=>r]);var t=e.i(743124),n=e.i(301331);function r(e){let{history:r,currentBlockIndex:i,latestBlock:o}=(0,n.useBlockHistory)({blockId:e,searchAll:!0}),a=(0,t.useMemo)(()=>!o||!e||o.id===e,[o,e]),s=(0,t.useMemo)(()=>i+1,[i]),l=(0,t.useMemo)(()=>r.length,[r]);return{isLatest:a,currentVersion:s,latestVersion:l,totalVersions:r.length,versionsBehind:a?0:l-s}}},262553,e=>{"use strict";e.s(["useReadOnlyMode",()=>a]);var t=e.i(743124),n=e.i(519738),r=e.i(209819),i=e.i(92479),o=e.i(449381);function a(){let e=(0,o.useActiveBlockState)(),{isLatest:a}=(0,n.useBlockVersionInfo)(null==e?void 0:e.id),{chatId:s}=(0,i.useChatId)(),{canWriteToChat:l}=(0,r.useChatMetadata)(s);return{isReadOnlyMode:(0,t.useMemo)(()=>!a&&l,[a,l]),isLatest:a,canWriteToChat:l}}},975479,e=>{"use strict";e.s(["OldBlockVersionButtons",()=>u]);var t=e.i(509473),n=e.i(92479),r=e.i(449381),i=e.i(301331),o=e.i(176248),a=e.i(76866),s=e.i(534607),l=e.i(743124),c=e.i(127169);function u(e){let{currentVersion:u,latestVersion:d}=e,p=(0,r.useActiveBlockState)(),{history:h}=(0,i.useBlockHistory)({blockId:null==p?void 0:p.id,searchAll:!0}),{restoreCurrentBlock:f,exitToLatest:m,isRestoring:g}=(0,a.useRestoreBlockVersion)(null==p?void 0:p.id),{isStreaming:v,isContinuing:x,isLoading:y,isRestoring:b,isSyncing:w}=(0,n.useChatLoadingState)(),j=(0,l.useMemo)(()=>v||x||y||b||w,[v,x,y,b,w]),C=(0,s.useMac)(),k=(0,l.useCallback)(()=>{p&&m(p)},[m,p]),S=(0,l.useCallback)(()=>{f()},[f]);return(0,c.useShortcut)(e=>{"KeyQ"===e.code&&(e.altKey||e.metaKey)&&(e.preventDefault(),k())},[k]),(0,t.jsxs)("div",{className:"flex items-center gap-[6px]",children:[(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",tooltip:{content:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["Go to latest version",(0,t.jsxs)("div",{className:"font-mono flex items-center gap-1",children:[(0,t.jsx)("div",{className:"text-label-12-mono size-5 bg-alpha-white-400 text-v0-white rounded-sm flex items-center justify-center",children:C?"⌥":"Alt"}),(0,t.jsx)("div",{className:"text-label-12-mono size-5 bg-alpha-white-400 text-v0-white rounded-sm flex items-center justify-center",children:"Q"})]})]})},onClick:k,disabled:!p||0===h.length||j||g,className:"flex items-center gap-2 h-7 rounded-[6px] px-2",children:[(0,t.jsx)("span",{className:"hidden sm:flex",children:"Back to Latest"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Latest"})]}),(0,t.jsx)(o.Button,{variant:"blue",size:"sm",tooltip:"Restore v".concat(u),onClick:S,disabled:!p||j||g,className:"h-7 rounded-[6px] px-2",children:g?"Restoring...":"Restore"})]})}},244760,(e,t,n)=>{!function(n,r){t.exports=r(e.r(743124))}(e.e,e=>(()=>{"use strict";var t={729:e=>{var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(p=1,l=Array(d-1);p<d;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},639:t=>{t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r.r(i),r.d(i,{createEvent:()=>D});var t,n=r(729),o=r.n(n),a=r(639),s=!("undefined"==typeof window||null==(t=window.document)||!t.createElement),l=s?a.useLayoutEffect:a.useEffect,c=function(e){var t=(0,a.useRef)(function(){throw Error("Cannot call an event handler during the first render.")});return l(function(){t.current=e}),(0,a.useCallback)(function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return null==(e=t.current)?void 0:e.apply(null,r)},[])},u=function(e){var t=c(e);l(function(){return window.addEventListener("storage",t),function(){window.removeEventListener("storage",t)}},[t])},d=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},p="react-event-hook:undefined",h=Error("The input value could not be serialized"),f=function e(t){try{var n=d(t),r=JSON.stringify(t,function(e,t){return void 0===t?p:t}),i=m(r);if(d(i)!==n)throw h;return"object"===n&&Object.values(t).forEach(function(t){return e(t)}),"array"===n&&t.forEach(function(t){return e(t)}),r}catch(e){throw h}},m=function(e){return JSON.parse(e,function(e,t){if(t!==p)return t})},g=function(){return"".concat(Date.now(),":").concat(parseInt(Math.random().toString().replace(".",""),10))},v=function(e,t){return f({id:g(),name:e,payload:t})},x=function(e){var t=m(e);return{name:t.name,payload:t.payload}},y="react-event-hook";function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=function(e){var t;return[null==(t=e[0])?void 0:t.toUpperCase(),e.slice(1)].join("")},C=["-","_",":","/","."," "],k=function(e){return j(e.toLowerCase())},S=function e(t){var n=w(t.split(new RegExp("[".concat(C.join(""),"](.*)"))),2),r=n[0],i=n[1];return void 0!==r&&void 0!==i?"".concat(k(r)).concat(e(i)):!function(e){return e.toUpperCase()===e&&e.toLowerCase()!==e}(t)?j(t):k(t)},N=new(o()),E=new Map,D=function(t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.crossTab,o=void 0!==i&&i,a=t.trim(),d=S(a),p="use".concat(d,"Listener"),h="emit".concat(d),f=g(),m=function(){E.has(a)&&E.get(a),E.set(a,f)},b=function(e){var t=c(e);u(function(t){if(o&&t.newValue&&t.key===y){var n=x(t.newValue);n.name===a&&e(n.payload)}}),l(function(){return N.addListener(a,t),function(){N.removeListener(a,t)}},[t])},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.broadcast,r=void 0!==n&&n;if(s&&(m(),r||N.emit(a,e),o))try{var i=v(a,e);try{window.localStorage.setItem(y,i)}catch(e){}}catch(e){throw Error('Could not emit "'.concat(a,'" event. The event payload might contain values that cannot be serialized.'))}},j=function(e){return w(e)};return j.broadcast=function(e){return w(e,{broadcast:!0})},e(n={},p,b),e(n,h,j),n}}})(),i})())},18547,e=>{"use strict";let{useChatMessageFinishedListener:t,emitChatMessageFinished:n}=(0,e.i(244760).createEvent)("chatMessageFinished")();e.s(["emitChatMessageFinished",0,n,"useChatMessageFinishedListener",0,t])},589429,620678,e=>{"use strict";e.s(["MissingEnvDialog",()=>en],589429);var t=e.i(509473),n=e.i(926788),r=e.i(304649),i=e.i(375462),o=e.i(180131),a=e.i(674523),s=e.i(176248),l=e.i(992879),c=e.i(743124),u=e.i(92479),d=e.i(921097),p=e.i(28683),h=e.i(242759),f=e.i(639056);e.s(["ChatHeaderActions",()=>G,"isSettingsSheetOpenAtom",()=>H,"settingsSheetTabAtom",()=>U],620678);var m=t,g=c,v=e.i(762585),x=e.i(564997),y=e.i(209819),b=e.i(625402),w=e.i(667660),j=e.i(449381),C=e.i(697856),k=e.i(499282),S=e.i(490293),N=e.i(5894),E=e.i(296046),D=e.i(729602),I=e.i(805214),A=e.i(184645),T=e.i(618262),M=e.i(344290),L=e.i(613922),P=e.i(262553),R=e.i(519738),_=e.i(975479),O=j,F=e.i(280419),B=e.i(18547);function V(e){let{chatId:t}=e,n=(0,O.useActiveBlockState)(),{prewarmDeployWarning:r}=(0,F.usePrewarmDeployWarnings)({chatId:t});(0,B.useChatMessageFinishedListener)(()=>{t&&(null==n?void 0:n.id)&&"code-project"===n.type&&r(!1)})}var z=e.i(646805);let H=(0,S.atom)(!1),U=(0,S.atom)("overview");function G(){let{user:e}=(0,w.useActiveScope)(),{canWriteToChat:t,project:n}=(0,y.useChatMetadata)(),r=(0,j.useActiveBlockState)(),{chatPrivacy:i}=(0,y.useChatPrivacy)(),o=(0,D.useChatId)(),a=(0,E.useIsChatPage)(),{getBlockShared:s}=(0,C.useSharedBlocks)(),{isReadOnlyMode:l,isLatest:c}=(0,P.useReadOnlyMode)(),{currentVersion:u,latestVersion:d}=(0,R.useBlockVersionInfo)(null==r?void 0:r.id);V({chatId:o||""});let p=(0,g.useMemo)(()=>!t&&("public"===i||"unlisted"===i||"team"===i),[t,i]),h=(0,g.useMemo)(()=>r&&(0,k.canBeDeployed)(r),[r]),f=(0,g.useMemo)(()=>!!r&&s(r.id),[r,s]),x=(0,g.useMemo)(()=>null==e?void 0:e.isImpersonation,[null==e?void 0:e.isImpersonation]),b=(0,g.useMemo)(()=>!l&&t||x?(0,m.jsx)(g.Suspense,{fallback:(0,m.jsx)(v.Skeleton,{className:"size-7"}),children:(0,m.jsx)(T.SuspendingSettingsButton,{projectId:null==n?void 0:n.projectId})}):null,[t,l,null==n?void 0:n.projectId,x]),S=(0,g.useMemo)(()=>{if(p&&r)return(0,m.jsx)(N.FlagBlockButton,{variant:"secondary",blockId:r.id})},[p,r]),O=(0,g.useMemo)(()=>{if(t&&!l&&r&&o&&h&&!f)return(0,m.jsx)("div",{className:"hidden sm:block",children:(0,m.jsx)(A.GitSyncButton,{chatId:o})})},[t,l,r,o,h,f]),F=(0,g.useMemo)(()=>{if((!t||c)&&o)return(0,m.jsx)(M.ChatShareButton,{})},[t,c,o]),B=(0,g.useMemo)(()=>{if(t&&c&&o&&h&&!f)return(0,m.jsx)(L.DeploymentButton,{chatId:o})},[t,c,o,h,f]),H=(0,g.useMemo)(()=>{if(l)return(0,m.jsx)(_.OldBlockVersionButtons,{currentVersion:u,latestVersion:d})},[l,u,d]),U=(0,g.useMemo)(()=>t||!r?null:(0,m.jsx)(z.RemixBlockButton,{blockId:r.id,canWriteToChat:t}),[r,t]);return a?(0,m.jsxs)("div",{className:"flex items-center gap-1.5",children:[b,(0,m.jsx)(W,{}),S,O,H,F,U,B,(0,m.jsx)(I.HeaderUserMenu,{})]}):null}function W(){let e=(0,D.useChatId)(),{user:t}=(0,w.useActiveScope)();return(null==t?void 0:t.isAdminMode)&&e?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(b.OpenInInternalButton,{chatId:e,className:"sm:hidden md:flex"}),(0,m.jsx)(x.ExportChatButton,{className:"hidden md:flex"})]}):null}var q=y,Z=j,K=e.i(979865),$=e.i(921),Y=e.i(796669);e.i(563948);var J=e.i(407562),Q=e.i(211976),X=w,ee=e.i(44337);function et(e){let{integrationNames:n,standaloneEnvs:i}=e,{scp:o}=(0,h.useFlags)();if(!i&&0===n.length||i&&0===n.length&&0===i.length)return null;let s=[...n,...i&&i.length>0?["manual"]:[]];return(0,t.jsx)("div",{className:(0,r.cn)("flex w-full",!o&&"justify-center"),children:(0,t.jsx)("div",{className:"flex",children:s.map((e,n)=>(0,t.jsx)("div",{className:"relative h-12 w-12 rounded-full border border-v0-gray-900 bg-v0-black",style:{marginLeft:0===n?0:"-12px",zIndex:n},children:(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"relative h-7 w-7",children:"manual"===e?(0,t.jsx)(p.Variable,{className:"h-7 w-7 text-v0-white!"}):(0,t.jsx)(l.default,{src:a.INTEGRATION_NAME_TO_SVG[e]||"/placeholder.svg",alt:e,fill:!0,className:"rounded-sm object-contain"})})})},e))})})}function en(e){let{open:a,setOpen:l,missingEnvs:p}=e,{chatId:m}=(0,u.useChatId)(),{addToDontShowAgain:g}=(0,d.useDontShowAgain)(m),{scp:v}=(0,h.useFlags)(),[x,y]=(0,c.useState)(!1),[b,w]=(0,c.useState)(!1),j=(0,K.useRouter)(),C=(0,f.useSetAtom)(H),k=(0,f.useSetAtom)(U),S=(0,Z.useActiveBlockState)(),{project:N,title:E,canWriteToChat:D}=(0,q.useChatMetadata)(),I=(0,q.useChatMetadata)(),{hasVercelWritePermission:A}=(0,X.useActiveScope)(),{integrationsNeeded:T,standaloneEnvs:M}=(0,c.useMemo)(()=>{let e=new Set,t=[];for(let n of p){let r=!1;for(let[t,i]of ee.INTEGRATION_NAME_TO_ENV_VARS.entries())if(i.includes(n)){e.add(t),r=!0;break}r||t.push(n)}return{integrationsNeeded:Array.from(e),standaloneEnvs:t}},[p]);return T.length>0||M.length>0?v?(0,t.jsx)("div",{className:(0,r.cn)("absolute inset-0",!a&&"pointer-events-none"),children:(0,t.jsxs)(n.Dialog,{open:a,modal:!1,onOpenChange:l,children:[(0,t.jsx)("div",{"data-state":a?"open":"closed",className:(0,r.cn)("bg-v0-alpha-600 dark:bg-v0-alpha-1000 absolute inset-0 z-50 transition-opacity data-[state=closed]:pointer-events-none data-[state=closed]:opacity-0 data-[state=open]:opacity-100"),onClick:()=>{a&&l(!1)}}),(0,t.jsxs)(n.DialogContent,{showClose:!1,onEscapeKeyDown:()=>{var e;return null==(e=document.getElementById("env-warning-trigger"))?void 0:e.focus()},className:"max-h-[400px] max-w-[min(540px,90vw)] gap-2.5 overflow-y-scroll p-6 shadow-sm",omitPortal:!0,onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsxs)(n.DialogClose,{onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},tabIndex:1,className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,t.jsx)(i.Cross,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)(et,{integrationNames:T,standaloneEnvs:M}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,t.jsx)(n.DialogTitle,{className:"flex w-full justify-start text-xl",children:(0,t.jsxs)("span",{children:["This generation uses"," ",(0,t.jsx)("span",{children:T.length+M.length>1?"integrations":T.length>0?T[0]:"an integration"})]})}),(0,t.jsx)(n.DialogDescription,{className:"flex w-full justify-start text-sm text-v0-gray-900",children:"Complete the steps in chat to ensure the generation works correctly."})]}),(0,t.jsx)("div",{className:"flex w-full justify-end",children:(0,t.jsx)(s.Button,{onClick:async()=>{await g(p,T),l(!1)},variant:"secondary",size:"sm",children:"Don't show again"})})]})]})]})}):(0,t.jsx)("div",{className:(0,r.cn)("absolute inset-0",!a&&"pointer-events-none"),children:(0,t.jsxs)(n.Dialog,{open:a,modal:!1,onOpenChange:l,children:[(0,t.jsx)("div",{"data-state":a?"open":"closed",className:(0,r.cn)("bg-v0-alpha-600 dark:bg-v0-alpha-1000 absolute inset-0 z-50 transition-opacity data-[state=closed]:pointer-events-none data-[state=closed]:opacity-0 data-[state=open]:opacity-100"),onClick:()=>{a&&l(!1)}}),(0,t.jsxs)(n.DialogContent,{showClose:!1,onEscapeKeyDown:()=>{var e;return null==(e=document.getElementById("env-warning-trigger"))?void 0:e.focus()},className:"max-h-[400px] max-w-[min(440px,90vw)] gap-2.5 overflow-y-scroll p-6 shadow-sm",omitPortal:!0,onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsxs)(n.DialogClose,{onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},tabIndex:1,className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,t.jsx)(i.Cross,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),T.length>0?(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[(0,t.jsx)(et,{integrationNames:T}),(0,t.jsx)(n.DialogTitle,{className:"text-xl",children:(0,t.jsxs)("span",{children:["This generation uses"," ",(0,t.jsx)("span",{children:T.length>1?"integrations":T[0]}),"."]})}),(0,t.jsxs)(n.DialogDescription,{className:"text-md text-v0-gray-900",children:["Add the required integration",(0,t.jsx)("span",{children:T.length>1&&"s"})," in chat or from the Settings panel."," ",D?!(null==N?void 0:N.projectId)&&(0,t.jsx)("span",{children:"You'll need to create a project first."}):(0,t.jsx)("span",{children:"You'll need to fork this chat first."})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(s.Button,{onClick:async()=>{await g(p,T),l(!1)},variant:"secondary",size:"sm",children:"Don't show again"}),x||b?(0,t.jsx)(Q.SpinnerButton,{variant:"default",pending:!0,size:"sm",children:x?"Creating Project":"Forking Block"}):(0,t.jsx)(s.Button,{onClick:async()=>{if(!D||!A){if(!S)return void J.toast.error("Failed to fork chat");w(!0);let e=await (0,Y.forkBlock)(S.id);if(!e||"string"!=typeof e){J.toast.error("Failed to fork chat"),w(!1);return}return j.push("/chat/".concat(e)),J.toast.success("Chat forked successfully"),void w(!1)}if(!(null==N?void 0:N.projectId)){y(!0);let e=await (0,$.createProject)({projectName:E,chatId:m||"",includeSuccessToast:!1});if(!e.ok)return J.toast.error(e.error),null;await I.setMetadata({...I,project:{projectId:e.value.id,vercelProjectId:e.value.vercelProjectId||null,name:E,settings:{icon:"icon-wand-sparkles",color:null},isCreator:!0}}),y(!1)}C(!0),k("integrations")},variant:"default",size:"sm",children:D&&A?(null==N?void 0:N.projectId)?"Open Settings":"Create Project":"Fork Block"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.DialogHeader,{className:"items-start text-start",children:[(0,t.jsxs)(n.DialogTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(o.WarningFill,{className:"text-v0-amber-700!"}),(0,t.jsx)("span",{children:"Missing Environment Variables"})]}),(0,t.jsx)(n.DialogDescription,{className:"text-v0-gray-1000 text-sm",children:"This generation may have limited functionality without the following environment variables:"})]}),p.map(e=>(0,t.jsx)("p",{className:"w-fit max-w-full truncate rounded-sm bg-v0-gray-200 px-[3px] py-0.5 font-mono text-[13px] leading-none",children:e},e)),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(s.Button,{onClick:async()=>{await g(p,[]),l(!1)},variant:"secondary",size:"sm",className:"w-fit",children:"Don't show again"})})]})]})]})}):null}},101486,e=>{"use strict";var t=e.i(743124),n=e.i(346970),r=e.i(375465);function i(e){let{enabled:r,bid:i,cid:o}=e,[a,s]=(0,t.useState)(800),{data:l,error:c,mutate:u}=(0,n.default)(r&&i&&o?"/chat/api/vm/status?bid=".concat(i,"&cid=").concat(o):null,async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch VM status");return t.json()},{refreshInterval:a});return(0,t.useEffect)(()=>{(null==l?void 0:l.status)==="running"&&s(5e3)},[null==l?void 0:l.status]),{subdomain:null==l?void 0:l.subdomain,status:null==l?void 0:l.status,error:c,refresh:u}}function o(e){let{enabled:t,bid:n,cid:i}=e,{data:o,error:a,mutate:s}=(0,r.default)(t&&n&&i?"/chat/api/vm/preview?bid=".concat(n,"&cid=").concat(i):null,async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch VM status");return t.json()});return{subdomain:null==o?void 0:o.subdomain,status:null==o?void 0:o.status,error:a,refresh:s}}e.s(["useVMPreviewSubdomain",()=>o,"useVMStatus",()=>i])},84079,668435,245555,756954,154032,293060,e=>{"use strict";e.s(["BrowserFrame",()=>J,"sendToIframeFromBlockId",()=>$],84079);var t=e.i(509473),n=e.i(743124),r=e.i(942371),i=e.i(458016),o=e.i(226092),a=e.i(456915),s=e.i(295224),l=e.i(566274),c=e.i(304649),u=e.i(899488),d=e.i(180131),p=e.i(589429),h=e.i(583965),f=e.i(921097),m=e.i(729602),g=e.i(577247),v=e.i(242759),x=e.i(101486),y=e.i(768619),b=e.i(914483),w=e.i(936096),j=e.i(204575),C=t,k=u,S=e.i(675120),N=e.i(556355),E=e.i(758118),D=e.i(365290),I=e.i(543017),A=w,T=e.i(639056),M=n;let L=(0,w.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2C0 1.44772 0.447715 1 1 1H15C15.5523 1 16 1.44772 16 2V10.5C16 11.0523 15.5523 11.5 15 11.5H8.75V14.5H9.75H10.5V16H9.75H6.25H5.5V14.5H6.25H7.25V11.5H1C0.447714 11.5 0 11.0523 0 10.5V2ZM1.5 2.5V10H14.5V2.5H1.5Z" fill="currentColor"/>');e.s(["DeviceDesktop",0,L],668435);let P=(0,w.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.75 0C1.7835 0 1 0.783501 1 1.75V14.25C1 15.2165 1.7835 16 2.75 16H13.25C14.2165 16 15 15.2165 15 14.25V1.75C15 0.783502 14.2165 0 13.25 0H2.75ZM2.5 1.75C2.5 1.61193 2.61193 1.5 2.75 1.5H13.25C13.3881 1.5 13.5 1.61193 13.5 1.75V14.25C13.5 14.3881 13.3881 14.5 13.25 14.5H2.75C2.61193 14.5 2.5 14.3881 2.5 14.25V1.75ZM4.75 4.75C5.30228 4.75 5.75 4.30228 5.75 3.75C5.75 3.19772 5.30228 2.75 4.75 2.75C4.19772 2.75 3.75 3.19772 3.75 3.75C3.75 4.30228 4.19772 4.75 4.75 4.75Z" fill="currentColor"/>');e.s(["TabletDevice",0,P],245555);let R=(0,w.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 0C3.73122 0 2.5 1.23122 2.5 2.75V13.25C2.5 14.7688 3.73122 16 5.25 16H10.75C12.2688 16 13.5 14.7688 13.5 13.25V2.75C13.5 1.23122 12.2688 0 10.75 0H5.25ZM4 2.75C4 2.05964 4.55964 1.5 5.25 1.5H10.75C11.4404 1.5 12 2.05964 12 2.75V13.25C12 13.9404 11.4404 14.5 10.75 14.5H5.25C4.55964 14.5 4 13.9404 4 13.25V2.75ZM6.25 4.75C6.80228 4.75 7.25 4.30228 7.25 3.75C7.25 3.19772 6.80228 2.75 6.25 2.75C5.69772 2.75 5.25 3.19772 5.25 3.75C5.25 4.30228 5.69772 4.75 6.25 4.75Z" fill="currentColor"/>');e.s(["DevicePhone",0,R],756954);var _=e.i(385671),O=n;function F(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:150,[t,n]=(0,O.useState)(!1);return(0,O.useEffect)(()=>{let t,r=()=>{n(!0),clearTimeout(t),t=setTimeout(()=>{n(!1)},e)};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),clearTimeout(t)}},[e]),t}e.s(["useIsWindowResizing",()=>F],154032);var B=c;function V(){let{atoms:e}=(0,_.useChatLayout)(),[t,n]=(0,M.useState)(!1),{label:r,SmallIcon:i}=U((0,T.useAtomValue)(e.previewSize));return(0,C.jsxs)(N.DropdownMenu,{open:t,onOpenChange:n,children:[(0,C.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,C.jsx)(k.CodeBlockButton,{tooltip:"Previewing on ".concat(r),tooltipDirection:"bottom",children:(0,C.jsx)(S.TransitionNode,{...S.PRESETS.buttonContent,renderKey:r,children:(0,C.jsx)(i,{})})})}),(0,C.jsx)(N.DropdownMenuContent,{align:"start",className:"w-[150px] cursor-pointer",side:"bottom",sideOffset:8,children:(0,C.jsx)(N.DropdownMenuGroup,{children:["desktop","tablet","phone"].map(e=>(0,C.jsx)(z,{previewSize:e},e))})})]})}function z(e){let{previewSize:t}=e,{actions:n,atoms:r}=(0,_.useChatLayout)(),i=t===(0,T.useAtomValue)(r.previewSize),{label:o,Icon:a}=U(t);return(0,C.jsxs)(N.DropdownMenuItem,{onSelect:()=>n.setPreviewSize(t),className:"justify-between",children:[(0,C.jsxs)("span",{className:"flex items-center gap-2",children:[(0,C.jsx)(a,{}),o]}),(0,C.jsx)(I.Check,{style:{...(0,E.visibleStylesIf)(i),...(0,D.transitionStyles)(["opacity"])}})]})}function H(e){let{children:t,forceFullscreen:n}=e,{atoms:r}=(0,_.useChatLayout)(),i=(0,T.useAtomValue)(r.previewSize),o=(0,T.useAtomValue)(r.isResizing),a=F(),s=(0,T.useAtomValue)(r.deviceStyles),l=o||a;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("style",{children:"@media(max-width: 639px) {\n          .device-view {\n            width: 100%!important;\n            height: 100%!important;\n            border-radius: 0px!important;\n            box-shadow: none!important;\n            background: transparent!important;\n          }\n        }\n      "}),(0,C.jsx)("div",{className:(0,B.cn)("device-view","desktop"!==i&&!n&&"material-modal"),style:{margin:"auto 0px",...s,...n?{width:"100%",height:"100%"}:{},...(0,D.transitionStyles)(["width","height","border-radius","background","box-shadow","margin"],{duration:l||n?0:200})},children:t})]})}function U(e){switch(e){case"phone":return{SmallIcon:q,Icon:R,label:"Phone"};case"tablet":return{SmallIcon:W,Icon:P,label:"Tablet"};case"desktop":return{SmallIcon:G,Icon:L,label:"Desktop"}}}let G=(0,A.withNewIcon)('\n<path d="M12 2.25C12.9665 2.25 13.75 3.0335 13.75 4V9C13.75 9.9665 12.9665 10.75 12 10.75H8.75V12.25H10V13.75H6V12.25H7.25V10.75H4C3.0335 10.75 2.25 9.9665 2.25 9V4C2.25 3.0335 3.0335 2.25 4 2.25H12ZM4 3.75C3.86193 3.75 3.75 3.86193 3.75 4V9C3.75 9.13807 3.86193 9.25 4 9.25H12C12.1381 9.25 12.25 9.13807 12.25 9V4C12.25 3.86193 12.1381 3.75 12 3.75H4Z" fill="currentColor"/>\n'),W=(0,A.withNewIcon)('\n<path d="M11.3975 2C12.3636 2.00037 13.1475 2.78373 13.1475 3.75V11.75C13.1475 12.7163 12.3636 13.4996 11.3975 13.5H4.75C3.7835 13.5 3 12.7165 3 11.75V3.75C3 2.7835 3.7835 2 4.75 2H11.3975ZM4.75 3.5C4.61193 3.5 4.5 3.61193 4.5 3.75V11.75C4.5 11.8881 4.61193 12 4.75 12H11.3975C11.5352 11.9996 11.6475 11.8878 11.6475 11.75V3.75C11.6475 3.61216 11.5352 3.50037 11.3975 3.5H4.75ZM8.76758 9.50391C9.14577 9.54232 9.44141 9.86168 9.44141 10.25C9.44141 10.6383 9.14577 10.9577 8.76758 10.9961L8.69141 11H7.45605C7.04184 11 6.70605 10.6642 6.70605 10.25C6.70605 9.83579 7.04184 9.5 7.45605 9.5H8.69141L8.76758 9.50391Z" fill="currentColor"/>\n'),q=(0,A.withNewIcon)('\n<path d="M10.75 2C11.7165 2 12.5 2.7835 12.5 3.75V11.75C12.5 12.7165 11.7165 13.5 10.75 13.5H5.75C4.7835 13.5 4 12.7165 4 11.75V3.75C4 2.7835 4.7835 2 5.75 2H10.75ZM5.75 3.5C5.61193 3.5 5.5 3.61193 5.5 3.75V11.75C5.5 11.8881 5.61193 12 5.75 12H10.75C10.8881 12 11 11.8881 11 11.75V3.75C11 3.61193 10.8881 3.5 10.75 3.5H5.75ZM8.75 9.5C9.16421 9.5 9.5 9.83579 9.5 10.25C9.5 10.6642 9.16421 11 8.75 11H7.75C7.33579 11 7 10.6642 7 10.25C7 9.83579 7.33579 9.5 7.75 9.5H8.75Z" fill="currentColor"/>\n');e.s(["DeviceContainer",()=>H,"DeviceDropdown",()=>V],293060);var Z=e.i(183673);let K=(0,w.withNewIcon)('<path d="M8.19 3.08c1.68 0 3.17.84 4.06 2.12V3.75h1.5V7.5c0 .41-.34.75-.75.75H9.25v-1.5h2.14A3.44 3.44 0 0 0 4.75 8a3.44 3.44 0 0 0 6.23 2l.44-.6 1.21.88-.44.6A4.94 4.94 0 0 1 3.25 8a4.93 4.93 0 0 1 4.94-4.92Z" fill="currentColor" />');function $(e,t){let n=(0,j.getBlockIframeId)(e),r=document.getElementById(n);r&&r.contentWindow&&Y(r.contentWindow,t)}function Y(e,t){e.postMessage({__v0_remote__:1,...t},"*")}function J(e){let{iframeId:w,blockId:j,devTools:C,isV3:k}=e,{fullScreenResult:S}=(0,l.useFullscreenResult)(),[N,E]=(0,n.useState)(!1),{projectId:D}=(0,Z.useProjectId)(),I=(0,m.useChatId)(),{dontShowAgain:A,isLoading:T}=(0,f.useDontShowAgain)(I),{envVars:M,isLoading:L,error:P}=(0,Z.useVercelProject)({v0ProjectId:D,chatId:I},{revalidateOnMount:!0}),[R,_]=(0,n.useState)(new Map),O=(0,n.useMemo)(()=>{var e;return T?[]:(null!=(e=R.get(w))?e:[]).filter(e=>!(null==A?void 0:A.includes(e)))},[w,R,A,T]),[F,B]=(0,n.useState)(!0),z=(0,n.useMemo)(()=>F&&O.length>0,[F,O]),{canGoBack:H,canGoForward:U,href:G,setHref:W,iframe:q,latestHref:$,loading:J,setLoading:X,refresh:ee,temporalHref:et,setTemporalHref:en}=(0,h.useBrowserFrame)(j),er=(0,n.useMemo)(()=>{if(!G)return"";let e=new URL(G);return e.pathname+e.search+e.hash},[G]),ei=(0,s.useLatest)(et),{vr:eo}=(0,v.useFlags)();(0,g.useMessage)(e=>{let{data:t}=e;if(t&&"object"==typeof t&&t.__v0_remote__)switch(t.type){case"missing-envs":let n=Array.isArray(t.names)&&t.names.every(e=>"string"==typeof e);_(new Map(R.set(w,n?t.names:[]))),B(t.show);break;case"devtools_state":E(t.enabled);break;case"frame_ready":if((null==q?void 0:q.contentWindow)&&M){let e=Object.values(M).map(e=>({key:e.key,value:e.value}));Y(q.contentWindow,{type:"env_vars",envVars:e})}}},[w,R,_,B,E,q,M]);let ea=(0,n.useCallback)(()=>{if(!q)return;let e=new URL(window.location.href);e.searchParams.set("b",w),e.searchParams.set("f","1"),e.searchParams.set("path",er),window.open(e.toString(),"_blank","noreferrer,noopener")},[q,w,er]),es=(0,n.useCallback)(()=>{q&&q.contentWindow&&(Y(q.contentWindow,{type:"navigate_back"}),en(null))},[q,en]),el=(0,n.useCallback)(()=>{q&&q.contentWindow&&(Y(q.contentWindow,{type:"navigate_forward"}),en(null))},[q,en]),ec=(0,n.useCallback)(()=>{var e;q&&q.contentWindow&&(Y(q.contentWindow,{type:"navigate_to",href:null===ei.current?$.current:new URL(null!=(e=ei.current)?e:"",$.current).href}),X(!0))},[q,$,ei,X]),eu=(0,n.useMemo)(()=>{let e=null!==et?et:er;if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},[et,er]),[ed,ep]=(0,n.useState)(!1),eh=(0,n.useCallback)(()=>{if(!eo)return;let e=document.querySelector("iframe[data-v0]");if(!e||!e.contentWindow)return;e.setAttribute("src",(0,y.getIframeSrc)(e)),ep(!0);let t=setTimeout(()=>{ep(!1)},500);return()=>clearTimeout(t)},[eo]),[ef,em]=(0,n.useState)(!1),{refresh:eg}=(0,x.useVMStatus)({enabled:eo,cid:I,bid:j}),ev=(0,n.useCallback)(async()=>{if(eo){em(!0);try{if(!(await fetch("/chat/api/vm/actions?cid=".concat(I,"&bid=").concat(j,"&type=recreate"),{method:"POST"})).ok)throw Error("Failed to recreate VM");eg()}catch(e){console.error("Error recreating VM:",e)}em(!1)}},[eo,I,j,eg]),ex=(0,b.useGet)("iframe-src:"+w);(0,n.useEffect)(()=>{eo&&en(ex)},[eo,ex]);let ey=e=>{"Enter"===e.key?(ec(),W(new URL(null!=et?et:"",G).href),en(null),e.stopPropagation(),e.currentTarget.blur()):"Escape"===e.key&&(en(null),e.stopPropagation(),e.currentTarget.blur())},eb=e=>{e.currentTarget.select()},ew=(eo?ed:J)?(0,t.jsx)(Q,{}):(0,t.jsx)(K,{}),ej=(0,t.jsxs)("div",{className:(0,c.cn)("relative flex items-center flex-1 bg-v0-gray-100 min-w-0 border border-v0-alpha-400 rounded-md h-7 max-w-[300px]"),children:[(0,t.jsxs)("div",{className:"items-center pl-1 hidden sm:flex",children:[(0,t.jsx)(u.CodeBlockButton,{disabled:!H,onClick:es,browserBar:!0,children:(0,t.jsx)(i.ChevronLeftSmall,{})}),(0,t.jsx)(u.CodeBlockButton,{disabled:!U,onClick:el,browserBar:!0,children:(0,t.jsx)(o.ChevronRightSmall,{})}),(0,t.jsx)(V,{})]}),(0,t.jsx)("input",{type:"text",className:(0,c.cn)("flex-1 min-w-0 h-full pr-2 text-sm bg-transparent border-0 outline-none pl-3 sm:pl-2",S&&"pl-7"),value:eu,onKeyDown:ey,onChange:e=>void en(e.currentTarget.value),onFocus:eb,spellCheck:!1}),(0,t.jsxs)("div",{className:"flex items-center pr-1",children:[(0,t.jsx)(u.CodeBlockButton,{className:"hidden sm:flex",onClick:ea,browserBar:!0,tooltip:{side:"bottom",content:(0,t.jsx)("div",{className:"flex flex-col items-center",children:(0,t.jsx)("span",{children:"Open in new tab"})})},children:(0,t.jsx)(a.ExternalSmall,{})}),(0,t.jsx)(u.CodeBlockButton,{onClick:eo?eh:ee,browserBar:!0,tooltip:{side:"bottom",content:"Refresh"},children:ew}),eo?(0,t.jsx)(u.CodeBlockButton,{onClick:ev,browserBar:!0,tooltip:{side:"bottom",content:"Kill & Restart VM"},children:ef?(0,t.jsx)(Q,{}):(0,t.jsx)(r.CrossCircleFill,{className:"w-3 h-3"})}):null]})]}),eC=O.length>0&&(0,t.jsx)(u.CodeBlockButton,{className:"text-v0-amber-700",id:"env-warning-trigger",tooltipDirection:"bottom",tooltip:"Missing Environment Variables",onClick:()=>B(!z),children:(0,t.jsx)(d.WarningFill,{})});return(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-1 justify-center",children:[ej,eC,(0,t.jsx)(p.MissingEnvDialog,{open:z,setOpen:B,missingEnvs:O})]})}function Q(){return(0,t.jsx)("svg",{className:"browserframe-loading-spinner",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",style:{width:"12px",height:"12px"},children:(0,t.jsx)("circle",{fill:"none",stroke:"currentColor",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})})}},230905,e=>{"use strict";e.s(["UnsavedChanges",()=>P,"useUnsavedChanges",()=>_],230905);var t=e.i(509473),n=e.i(230125),r=e.i(176248),i=e.i(743124),o=e.i(449381),a=e.i(297239),s=e.i(53223);e.i(563948);var l=e.i(407562),c=e.i(529693),u=e.i(716360),d=e.i(707827),p=e.i(301331),h=e.i(455552),f=e.i(926224),m=e.i(443265),g=e.i(827728),v=e.i(534607),x=e.i(661385),y=e.i(304649),b=e.i(92479),w=e.i(120282),j=e.i(479273),C=e.i(487581),k=e.i(490293),S=e.i(639056),N=e.i(84079),E=e.i(418929),D=e.i(668887);e.i(472428);var I=e.i(152641),A=e.i(358847),T=(0,A.createServerReference)("7ffd15aa23cc96e4bf192d416a475b905b532dbcea",A.callServer,void 0,A.findSourceMapURL,"setDesignSystemOnChat"),M=e.i(355805);let L=(0,k.atom)(!1);function P(e){let{mergedFromBlockId:p,hasUnsavedChanges:h,overrideBlockId:f,resetValue:x,onSave:C,clearEditValueMap:k,isV3:I}=e,[A,T]=(0,S.useAtom)(L),[M,P]=(0,i.useState)(!1),[_,O]=(0,i.useState)(!0),F=(0,o.useActiveBlockState)(),B=(0,a.useT)(),V=(0,v.useMac)(),{chatId:z}=(0,b.useChatId)(),{actions:H,atoms:U}=(0,D.useCurrentBlockDesignMode)(),G=(0,S.useAtomValue)(U.pendingDesignSystem);(0,g.useEventListener)("code-editor-saved",async()=>{h&&await C({setSaving:T,setForceHide:P})}),(0,g.useEventListener)("code-editor-reset",()=>{h&&$()}),R(h);let{locale:W}=(0,j.useLocale)(),q=()=>O(!1),Z=()=>O(!0);(0,g.useEventListener)("hide-saved-changes",q),(0,g.useEventListener)("show-saved-changes",Z);let K=null!=p?p:(null==F?void 0:F.id)||f;if(!K)return null;let $=()=>{(0,s.track)("ResetUnsavedEditCode",{blockId:K}),T(!0);try{x(),z&&(0,E.getPromptActions)(z).clearRefinementElementSelected(),H.setPendingDesignSystem({isPending:!1,designSystemId:null}),K&&(0,N.sendToIframeFromBlockId)(K,{type:"devtools_revert_design"}),l.toast.success(B("codeBlockActions.resetChanges"),{position:"bottom-right"}),setTimeout(()=>P(!1),2e3),k()}catch(e){l.toast.error(B("codeBlockActions.failedToResetChanges"),{position:"bottom-right"})}T(!1),window.dispatchEvent(new CustomEvent("inline-edit-cleanup-decorations"))};return(0,t.jsx)(u.AnimatePresence,{children:(h||G.isPending)&&!M&&_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center"},"unsaved-changes-bg"),(0,t.jsx)(c.motion.div,{initial:{opacity:0,y:20,scale:.95,width:W===w.esLocaleInfo.iso639?370:320},animate:{opacity:1,y:0,scale:1,width:A?W===w.esLocaleInfo.iso639?136:112:W===w.esLocaleInfo.iso639?370:320},exit:{opacity:0},transition:{duration:.15,ease:"easeOut",width:{type:"spring",stiffness:300,damping:30}},className:(0,y.cn)("shadow-modal bg-v0-background-100 absolute inset-x-0 z-50 mx-auto flex h-11 items-center justify-between gap-2 rounded-full p-2 pl-3 text-sm font-medium",I?"bottom-16":"bottom-3"),children:A?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-v0-gray-900",children:[(0,t.jsx)(d.Spinner,{size:16}),B("codeBlockActions.saving")]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Warning,{className:"text-v0-gray-900!"}),B("codeBlockActions.unsavedChanges")]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Button,{size:"sm",className:"h-7",rounded:!0,variant:"secondary",disabled:A,onClick:$,children:B("codeBlockActions.reset")}),(0,t.jsx)(r.Button,{tooltip:{content:(0,t.jsxs)(t.Fragment,{children:[B("codeBlockActions.save")," ",(0,t.jsxs)(m.KbdGroup,{children:[(0,t.jsx)(m.Kbd,{children:V?"⌘":"Ctrl"}),(0,t.jsx)(m.Kbd,{children:"S"})]})]})},size:"sm",className:"h-7",rounded:!0,variant:"blue",disabled:A,onClick:()=>{C({setSaving:T,setForceHide:P})},children:B("codeBlockActions.save")})]})]})},"unsaved-changes-island")]}):null})}function R(e){(0,i.useEffect)(()=>{let t=t=>{e&&(t.preventDefault(),t.returnValue="")};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},[e])}function _(e){let{blockId:t,editValueMap:n,source:r,meta:c,files:u,clearEditValueMap:d,isAdminSaving:m,onSaveSuccess:g}=e,v=(0,a.useT)(),y=(0,o.useActiveBlockState)(),w=(0,o.useSetActiveBlockState)(),{updateBlockData:j}=(0,p.useBlockHistory)({blockId:t}),{chatId:k}=(0,b.useChatId)(),{atoms:N,actions:E}=(0,D.useCurrentBlockDesignMode)(),A=(0,S.useAtomValue)(N.pendingDesignSystem),{setPendingDesignSystem:L}=E,{data:P,mutate:R}=(0,I.useServerQuerySWR)(["chat","attributes"],{chatId:k},{stopFetch:!k}),_=(0,S.useSetAtom)(C.previewBlockErrorsAtom);return{onSave:async e=>{let{setSaving:i,setForceHide:o}=e,a=t;if((0,s.track)("SaveEditCode",{blockId:a,chatId:k||""}),m&&!window.confirm("[V0 ADMIN] Are you sure you want to save these changes to the user's block?"))return;let u=Object.entries(n||{});if(!n||u.length<1||!u.some(e=>{let[t,n]=e;return!!n}))return(0,s.track)("SaveEditCodeError",{blockId:a,chatId:k||"",error:"no-edits"}),l.toast.error(v("codeBlockActions.failedToSaveChanges"),{position:"bottom-right"});let d=u[0][1]||r,p=[];if("code-project"===c.type){for(let e of p=(0,f.parseMultiFileSource)({source:r,blockType:"code-project",blockId:a})){let t=n[e.meta.file||""];t&&(e.source=t)}for(let e of u){let t=p.find(t=>t.meta.file===e[0]);if(t)t.source=e[1]||"";else{let t=e[0].split(".").pop(),n={source:e[1]||"",meta:{file:e[0]},blockId:a,lang:(0,M.cleanLangNoCustom)(t),isDeleted:!1,isEdit:!1,isMerged:!1,isMoved:!1,isRecovered:!1,isLocked:!1,isFixed:!1,isQuickEdit:!1,isTerminated:!1,isAttachmentQuickEdit:!1,isUserEdit:!0};p.push(n)}}d=(0,h.createMultiFileSource)({files:p,blockType:"code-project"})}i(!0);let b=(0,x.updateCodeBlockSource)({blockId:a,source:d}),C=A.isPending?R({serverMutate:T({chatId:k||"",designSystemId:A.designSystemId}),optimisticData:{...P,designSystemId:A.designSystemId}}):Promise.resolve(),[S]=await Promise.all([b,C]);A.isPending&&((0,s.track)("SaveAppliedDesignSystem",{blockId:a,chatId:k||"",designSystemId:A.designSystemId}),L({isPending:!1,designSystemId:null})),i(!1),_([]),S.success?(y&&a===y.id&&(w({...y,hasSourceBeenEdited:!0,source:d,lastEditedAt:new Date().toISOString()}),null==g||g(p)),j({blockId:a,data:{hasSourceBeenEdited:!0,source:d,lastEditedAt:new Date().toISOString(),sourceVersionKey:S.sourceVersionKey}}),window.dispatchEvent(new CustomEvent("inline-edit-cleanup-decorations")),o(!0),setTimeout(()=>o(!1),2e3),l.toast.success(v("codeBlockActions.savedChanges"),{position:"bottom-right"})):((0,s.track)("SaveEditCodeError",{blockId:a,chatId:k||"",error:"failed-to-save"}),l.toast.error(v("codeBlockActions.failedToSaveChanges")))},hasUnsavedChanges:(0,i.useMemo)(()=>{if(!n)return!1;for(let e of u){let t=n[e.meta.file||""];if(t&&t.trimEnd()!==e.source.trimEnd())return!0}for(let e of Object.keys(n))if(!u.some(t=>t.meta.file===e))return!0;return!1},[n,u]),clearEditValueMap:d}}},227308,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(186638),i=e.i(716360),o=e.i(529693),a=e.i(647217),s=e.i(304649),l=e.i(162061);let c=(0,n.createContext)(void 0),u=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("useResizableContext must be used within a FileTreeProvider");return e};function d(e){let{className:n,...i}=e,{leftId:o,rightId:a,groupId:l,panelGroupRef:c}=u();return(0,t.jsxs)(r.PanelResizeHandle,{onDragging:()=>{var e,t,n,i;let s=null==(e=r.getPanelElement(o))?void 0:e.offsetWidth,u=null==(t=r.getPanelElement(a))?void 0:t.offsetWidth,d=null==(n=r.getPanelGroupElement(l))?void 0:n.offsetWidth;if(!s||!u||!d)return;let p=s/d*100,h=u/d*100;null==(i=c.current)||i.setLayout([p,h])},className:(0,s.cn)("group relative z-20 w-0 overflow-visible! outline-hidden! ring-0!",n),...i,children:[(0,t.jsx)("div",{className:"absolute inset-0 h-full w-3 translate-x-[-50%] outline-0! ring-0!"}),(0,t.jsx)("div",{className:"absolute inset-0 h-full w-0 translate-x-[-50%] outline-0! ring-0! transition-all duration-200 group-data-[resize-handle-active=keyboard]:w-[3px] group-data-[resize-handle-state=drag]:w-[3px] group-data-[resize-handle-state=hover]:w-[3px] group-data-[resize-handle-active=keyboard]:bg-gray-400 group-data-[resize-handle-state=drag]:bg-gray-400 group-data-[resize-handle-state=hover]:bg-gray-300 group-data-[resize-handle-active=keyboard]:outline-hidden"})]})}let p=(0,n.forwardRef)((e,i)=>((0,n.useEffect)(()=>{let t=document.getElementById(e.id);t&&i&&("function"==typeof i?i(t):i.current=t)},[e.id,i]),(0,t.jsx)(r.Panel,{...e})));p.displayName="ForwardPanel";let h=o.motion.create(p);function f(e){let t=r.getPanelElement(e);if(!t)return 100;let n=parseFloat(getComputedStyle(t).minWidth);return isNaN(n)?100:n}function m(e){let{isFallbackSize:i,collapseSide:o,leftId:a,rightId:s,defaultSizeRef:u,cookie:d,id:p,...h}=e,m=(0,n.useRef)(null),g=(0,n.useRef)(!1),v=(0,n.useMemo)(()=>({leftId:a,rightId:s,panelGroupRef:m,groupId:p}),[a,s,p,m]);return(0,t.jsx)(c.Provider,{value:v,children:(0,t.jsx)(r.PanelGroup,{id:p,ref:m,onLayout:e=>{var t,n;if(e.length<2)return;let[c,h]=e;if(g.current)return g.current=!1;if(!h||!c)return;let v="right"===o?h:c,x="right"===o?c:h;u.current=v,i||l.default.set(d,v.toString(),{expires:30});let y=r.getPanelElement(a),b=r.getPanelElement(s),w=r.getPanelGroupElement(p);if(!y||!b||!w)return;let j=f("right"===o?s:a),C=f("right"===o?a:s);if(v/100*w.offsetWidth<j){let e=j/w.offsetWidth*100;g.current=!0;let n="right"===o?[100-e,e]:[e,100-e];null==(t=m.current)||t.setLayout(n)}else if(x/100*w.offsetWidth<C){let e=C/w.offsetWidth*100;g.current=!0;let t="right"===o?[e,100-e]:[100-e,e];null==(n=m.current)||n.setLayout(t)}},...h})})}function g(e){let{collapseSide:n,isOpen:l,order:c,defaultSize:u,className:p,innerContainerClassname:f,handleTestId:m,handleClassName:g,collapseId:v,children:x}=e,y=(0,a.useMotionValue)(0),b=(0,a.useMotionValue)(1),w={hidden:{flex:"0 1 0px",minWidth:0,overflow:"visible",transition:{when:"beforeChildren",duration:0}}},j={initial:{width:"100%",display:"absolute",opacity:0,x:"right"===n?"100%":"-100%"},visible:()=>({width:["100%","100%"],opacity:[b.get(),1],display:["absolute","block"],x:[y.get(),0],transition:{type:"spring",damping:60,stiffness:1100}}),hidden:()=>{var e,t;return{width:null!=(t=null==(e=r.getPanelElement(v))?void 0:e.offsetWidth)?t:0,display:"absolute",opacity:0,x:"right"===n?"100%":"-100%",transition:{type:"spring",damping:60,stiffness:800}}}};return(0,t.jsx)(i.AnimatePresence,{initial:!1,mode:"wait",children:l?(0,t.jsxs)(t.Fragment,{children:["right"===n?(0,t.jsx)(d,{"data-testid":m,className:(0,s.cn)("sticky top-0",g)},"resize-handle"):null,(0,t.jsx)(h,{transition:{duration:0},variants:w,exit:"hidden",id:v,order:c,defaultSize:u,style:{overflow:"clip"},className:(0,s.cn)("relative",p),children:(0,t.jsx)(o.motion.div,{style:{x:y,opacity:b,willChange:"auto"},variants:j,initial:"initial",animate:"visible",exit:"hidden",className:(0,s.cn)("border-v0-alpha-400 absolute inset-y-0 right-0 h-full w-full","right"===n?"right-0 border-l":"left-0 border-r",f),children:x})},"right-panel"),"left"===n?(0,t.jsx)(d,{"data-testid":m,className:"sticky top-0"},"resize-handle"):null]}):(0,t.jsx)(r.Panel,{order:c,defaultSize:0},"zero-panel")})}function v(e){let{initialSize:t,fallbackSize:r=50}=e,[i,o]=(0,n.useState)("number"==typeof t?t:r),a=(0,n.useRef)(i),s=(0,n.useRef)(!0),[l,c]=(0,n.useState)("number"!=typeof t);return(0,n.useEffect)(()=>{"number"!=typeof t&&t.then(e=>{o(e),c(!1),s.current&&(a.current=e,s.current=!1)})},[t]),{initialSize:i,defaultSizeRef:a,isFallbackSize:l}}e.s(["CollapsiblePanel",()=>g,"PanelGroup",()=>m,"usePanelSize",()=>v])},431843,e=>{"use strict";class t{diff(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"function"==typeof r?(n=r,r={}):"callback"in r&&(n=r.callback);let i=this.castInput(e,r),o=this.castInput(t,r),a=this.removeEmpty(this.tokenize(i,r)),s=this.removeEmpty(this.tokenize(o,r));return this.diffWithOptionsObj(a,s,r,n)}diffWithOptionsObj(e,t,n,r){var i;let o=e=>(e=this.postProcess(e,n),r)?void setTimeout(function(){r(e)},0):e,a=t.length,s=e.length,l=1,c=a+s;null!=n.maxEditLength&&(c=Math.min(c,n.maxEditLength));let u=null!=(i=n.timeout)?i:1/0,d=Date.now()+u,p=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(p[0],t,e,0,n);if(p[0].oldPos+1>=s&&h+1>=a)return o(this.buildValues(p[0].lastComponent,t,e));let f=-1/0,m=1/0,g=()=>{for(let r=Math.max(f,-l);r<=Math.min(m,l);r+=2){let i,l=p[r-1],c=p[r+1];l&&(p[r-1]=void 0);let u=!1;if(c){let e=c.oldPos-r;u=c&&0<=e&&e<a}let d=l&&l.oldPos+1<s;if(!u&&!d){p[r]=void 0;continue}if(i=!d||u&&l.oldPos<c.oldPos?this.addToPath(c,!0,!1,0,n):this.addToPath(l,!1,!0,1,n),h=this.extractCommon(i,t,e,r,n),i.oldPos+1>=s&&h+1>=a)return o(this.buildValues(i.lastComponent,t,e))||!0;p[r]=i,i.oldPos+1>=s&&(m=Math.min(m,r-1)),h+1>=a&&(f=Math.max(f,r+1))}l++};if(r)!function e(){setTimeout(function(){if(l>c||Date.now()>d)return r(void 0);g()||e()},0)}();else for(;l<=c&&Date.now()<=d;){let e=g();if(e)return e}}addToPath(e,t,n,r,i){let o=e.lastComponent;return o&&!i.oneChangePerToken&&o.added===t&&o.removed===n?{oldPos:e.oldPos+r,lastComponent:{count:o.count+1,added:t,removed:n,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:t,removed:n,previousComponent:o}}}extractCommon(e,t,n,r,i){let o=t.length,a=n.length,s=e.oldPos,l=s-r,c=0;for(;l+1<o&&s+1<a&&this.equals(n[s+1],t[l+1],i);)l++,s++,c++,i.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return c&&!i.oneChangePerToken&&(e.lastComponent={count:c,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=s,l}equals(e,t,n){return n.comparator?n.comparator(e,t):e===t||!!n.ignoreCase&&e.toLowerCase()===t.toLowerCase()}removeEmpty(e){let t=[];for(let n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}castInput(e,t){return e}tokenize(e,t){return Array.from(e)}join(e){return e.join("")}postProcess(e,t){return e}get useLongestToken(){return!1}buildValues(e,t,n){let r,i=[];for(;e;)i.push(e),r=e.previousComponent,delete e.previousComponent,e=r;i.reverse();let o=i.length,a=0,s=0,l=0;for(;a<o;a++){let e=i[a];if(e.removed)e.value=this.join(n.slice(l,l+e.count)),l+=e.count;else{if(!e.added&&this.useLongestToken){let r=t.slice(s,s+e.count);r=r.map(function(e,t){let r=n[l+t];return r.length>e.length?r:e}),e.value=this.join(r)}else e.value=this.join(t.slice(s,s+e.count));s+=e.count,e.added||(l+=e.count)}}return i}}class n extends t{equals(e,t,n){return n.ignoreWhitespace?(n.newlineIsToken&&e.includes("\n")||(e=e.trim()),n.newlineIsToken&&t.includes("\n")||(t=t.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(e.endsWith("\n")&&(e=e.slice(0,-1)),t.endsWith("\n")&&(t=t.slice(0,-1))),super.equals(e,t,n)}constructor(){super(...arguments),this.tokenize=o}}let r=new n;function i(e,t,n){return r.diff(e,t,n)}function o(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));let n=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(let e=0;e<r.length;e++){let i=r[e];e%2&&!t.newlineIsToken?n[n.length-1]+=i:n.push(i)}return n}e.s(["diffLines",()=>i],431843)},892887,593567,638041,e=>{"use strict";var t=e.i(936096);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.25136V4.2487L0.463236 4.05702L7.71324 1.05702L8 0.938354L8.28676 1.05702L15.5368 4.05702L16 4.2487V5.25136L15.5368 5.44304L8.28676 8.44304L8 8.5617L7.71324 8.44304L0.463236 5.44304L0 5.25136ZM0 8.45825V6.83491L0.536764 7.05702L8 10.1453L15.4632 7.05702L16 6.83491V8.45825L8.28676 11.6499L8 11.7686L7.71324 11.6499L0 8.45825ZM0 11.7083V10.0849L0.536764 10.307L8 13.3953L15.4632 10.307L16 10.0849V11.7083L8.28676 14.8999L8 15.0186L7.71324 14.8999L0 11.7083ZM8 6.93835L2.71154 4.75003L8 2.5617L13.2885 4.75003L8 6.93835Z" fill="currentColor"/>');e.s(["Layers",0,n],892887);let r=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14 6V4.5C14 3.39543 13.1046 2.5 12 2.5C10.8954 2.5 10 3.39543 10 4.5V6H10.5H12V7.5V12.5C12 13.8807 10.8807 15 9.5 15H2.5C1.11929 15 0 13.8807 0 12.5V7.5V6H1.5H8.5V4.5C8.5 2.567 10.067 1 12 1C13.933 1 15.5 2.567 15.5 4.5V6H14ZM10.5 7.5H10H8.5H1.5V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H9.5C10.0523 13.5 10.5 13.0523 10.5 12.5V7.5Z" fill="currentColor"/>');e.s(["LockOpen",0,r],593567);var i=e.i(431843);let o=(e,t)=>{let n=e.split("\n"),r=t.split("\n");if(n.length>2e3||r.length>2e3)return{diffs:[],addedCount:Math.max(r.length-n.length,0),removedCount:Math.max(n.length-r.length,0)};let o=i.diffLines(e.trim(),t.trim(),{ignoreWhitespace:!0});return{addedCount:o.filter(e=>e.added).length,removedCount:o.filter(e=>e.removed).length,diffs:o}};e.s(["getDiff",0,o],638041)},238120,e=>{"use strict";let t=(0,e.i(121793).default)("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);e.s(["default",()=>t])},161911,788018,e=>{"use strict";var t=e.i(238120);e.s(["FileEdit",()=>t.default],161911);var n=e.i(509473);function r(e){return(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 13.5V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V8H3V1.5H8V5V6.5H9.5H13V13.5C13 14.0523 12.5523 14.5 12 14.5H6V16H12C13.3807 16 14.5 14.8807 14.5 13.5ZM9.5 5V2.12132L12.3787 5H9.5ZM2.31885 12.8194H0V11.3194H2.31885V9H3.81885V11.3194H6.13775V12.8194H3.81885V15.1377H2.31885V12.8194Z",fill:"currentColor"})})}e.s(["FilePlus",()=>r],788018)},223215,e=>{"use strict";var t=e.i(509473);function n(){return(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M11.3333 8H2",stroke:"currentcolor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M7.33325 12L11.3333 8L7.33325 4",stroke:"currentcolor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M14 3.33203V12.6654",stroke:"currentcolor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}e.s(["CollapseArrow",()=>n])},894906,e=>{"use strict";e.s(["useUpdateBlockData",()=>a]);var t=e.i(455552),n=e.i(661385),r=e.i(301331),i=e.i(743124),o=e.i(449381);function a(e){let a=(0,o.useActiveBlockState)(),{updateBlockData:s}=(0,r.useBlockHistory)({blockId:e}),l=(0,o.useSetActiveBlockState)();return(0,i.useCallback)(async function(r,i){let o=(0,t.createMultiFileSource)({files:r,blockType:"code-project"}),c=await (0,n.updateCodeBlockSource)({blockId:e,source:o,movedFile:null==i?void 0:i.moveFile});return c.transformedSource&&(o=c.transformedSource),a&&e===a.id&&l({...a,hasSourceBeenEdited:!0,source:o,sourceVersionKey:c.sourceVersionKey}),s({blockId:e,data:{sourceVersionKey:c.sourceVersionKey,hasSourceBeenEdited:!0,source:o,lastEditedAt:new Date().toISOString()}}),c},[e,a,s,l])}},313595,44756,934994,804089,e=>{"use strict";e.s(["NewFileDialog",()=>f,"createFile",()=>h,"useNewFileDialog",()=>p],313595);var t=e.i(509473),n=e.i(176248),r=e.i(743124),i=e.i(297239),o=e.i(355805),a=e.i(46601);e.i(563948);var s=e.i(407562),l=e.i(686832),c=e.i(763480),u=e.i(894906),d=e.i(914483);function p(){let[e,t]=(0,d.useGetSet)("showNewFileDialog",!1),[n,r]=(0,d.useGetSet)("newFileDialogData",{folderName:""});return{newFileDialogData:n,setNewFileDialogData:r,showNewFileDialog:e,setShowNewFileDialog:t}}async function h(e,t,n,r,i,a){let s="".concat(n.folderName,"/").concat(r);n.folderName||(s=r);let l=r.split(".").pop(),c={source:i,meta:{file:s},blockId:e,lang:(0,o.cleanLangNoCustom)(l),isDeleted:!1,isEdit:!1,isMerged:!1,isMoved:!1,isRecovered:!1,isLocked:!1,isFixed:!1,isQuickEdit:!1,isTerminated:!1,isAttachmentQuickEdit:!1,isUserEdit:!0};if(!(await a([...t,c])).success)throw Error("Failed")}function f(e){let{blockId:o,sourceFiles:d,onSuccess:f}=e,{newFileDialogData:m,showNewFileDialog:g,setShowNewFileDialog:v}=p(),x=(0,u.useUpdateBlockData)(o),[y,b]=(0,r.useState)(!1),[w,j]=(0,r.useState)(""),C=(0,i.useT)();(0,r.useEffect)(()=>{g&&j("")},[g]);let k=(0,r.useCallback)(async e=>{e.preventDefault();try{b(!0),await h(o,d,m,w,"",x),null==f||f()}catch(e){s.toast.error(C("fileTreeActions.newFileNotificationError"))}finally{b(!1)}},[o,d,m,f,C,x,w]);return(0,t.jsxs)(l.Modal,{onOpenChange:v,open:g,responsive:!1,children:[(0,t.jsx)(l.ModalHeader,{children:(0,t.jsx)(l.ModalTitle,{children:C("fileTreeActions.newFile")})}),(0,t.jsx)(l.ModalContent,{children:(0,t.jsx)("form",{className:"flex flex-col gap-6",onSubmit:k,children:(0,t.jsx)(c.Input,{onChange:e=>j(e.target.value),disabled:y,value:w})})}),(0,t.jsxs)(l.ModalFooter,{children:[(0,t.jsx)(l.ModalClose,{asChild:!0,children:(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",children:C("fileTreeActions.cancel")})}),(0,t.jsx)(n.Button,{"data-testid":"confirm-delete-message",disabled:y,onClick:k,size:"sm",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.IconSpinner,{className:"size-4"}),C("fileTreeActions.creating")]}):C("fileTreeActions.create")})]})]})}e.s(["DeleteFileDialog",()=>N,"deleteFile",()=>S,"useDeleteFileDialog",()=>k],44756);var m=t,g=n,v=r,x=i,y=a,b=s,w=l,j=u,C=d;function k(){let[e,t]=(0,C.useGetSet)("showDeleteFileDialog",!1),[n,r]=(0,C.useGetSet)("deleteFileDialogData",{fileName:""});return{showDeleteFileDialog:e,setShowDeleteFileDialog:t,deleteFileDialogData:n,setDeleteFileDialogData:r}}async function S(e,t,n){let r=[...e];for(let e of r)if(e.meta.file===t.fileName){e.isDeleted=!0,e.isUserEdit=!0,e.isMerged=!1,e.moveToEnd=!0;break}if(!(await n(r)).success)throw Error("Failed")}function N(e){let{blockId:t,sourceFiles:n,onSuccess:r}=e,{showDeleteFileDialog:i,setShowDeleteFileDialog:o,deleteFileDialogData:a}=k(),s=(0,j.useUpdateBlockData)(t),[l,c]=(0,v.useState)(!1),u=(0,x.useT)(),d=(0,v.useCallback)(async()=>{try{c(!0),await S(n,a,s),r()}catch(e){b.toast.error(u("fileTreeActions.fileDeletedNotificationError"))}finally{c(!1)}},[a,n,r,s,u]);return(0,m.jsxs)(w.Modal,{onOpenChange:o,open:i,responsive:!1,children:[(0,m.jsx)(w.ModalHeader,{children:(0,m.jsx)(w.ModalTitle,{children:u("fileTreeActions.deleteFile")})}),(0,m.jsx)(w.ModalContent,{children:(0,m.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,m.jsx)("span",{className:"font-bold",children:a.fileName}),"?"]})}),(0,m.jsxs)(w.ModalFooter,{children:[(0,m.jsx)(w.ModalClose,{asChild:!0,children:(0,m.jsx)(g.Button,{size:"sm",variant:"secondary",children:u("fileTreeActions.cancel")})}),(0,m.jsx)(g.Button,{"data-testid":"confirm-delete-message",disabled:l,onClick:d,size:"sm",variant:"destructive",children:l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(y.IconSpinner,{className:"size-4"}),u("fileTreeActions.deleting")]}):u("fileTreeActions.delete")})]})]})}e.s(["DeleteFolderDialog",()=>F,"deleteFolder",()=>O,"useDeleteFolderDialog",()=>_],934994);var E=t,D=n,I=r,A=i,T=a,M=s,L=l,P=u,R=d;function _(){let[e,t]=(0,R.useGetSet)("showDeleteFolderDialog",!1),[n,r]=(0,R.useGetSet)("deleteFolderDialogData",{folderName:"",source:""});return{deleteFolderDialogData:n,setDeleteFolderDialogData:r,showDeleteFolderDialog:e,setShowDeleteFolderDialog:t}}async function O(e,t,n){let r=[...e];for(let e of r)e.meta.file.startsWith(t.folderName+"/")&&(e.isDeleted=!0,e.isUserEdit=!0,e.isMerged=!1,e.moveToEnd=!0);if(!(await n(r)).success)throw Error("Failed")}function F(e){let{blockId:t,sourceFiles:n,onSuccess:r}=e,{deleteFolderDialogData:i,showDeleteFolderDialog:o,setShowDeleteFolderDialog:a}=_(),s=(0,P.useUpdateBlockData)(t),[l,c]=(0,I.useState)(!1),u=(0,A.useT)(),d=(0,I.useCallback)(async()=>{try{c(!0),await O(n,i,s),r()}catch(e){M.toast.error(u("fileTreeActions.folderDeletedNotificationError"))}finally{c(!1)}},[i,n,r,s,u]);return(0,E.jsxs)(L.Modal,{onOpenChange:a,open:o,responsive:!1,children:[(0,E.jsx)(L.ModalHeader,{children:(0,E.jsx)(L.ModalTitle,{children:u("fileTreeActions.deleteFolder")})}),(0,E.jsx)(L.ModalContent,{children:(0,E.jsxs)("p",{className:"mb-2",children:["Are you sure you want to delete"," ",(0,E.jsx)("span",{className:"font-bold",children:i.folderName}),"?"]})}),(0,E.jsxs)(L.ModalFooter,{children:[(0,E.jsx)(L.ModalClose,{asChild:!0,children:(0,E.jsx)(D.Button,{size:"sm",variant:"secondary",children:u("fileTreeActions.cancel")})}),(0,E.jsx)(D.Button,{"data-testid":"confirm-delete-message",disabled:l,onClick:d,size:"sm",variant:"destructive",children:l?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(T.IconSpinner,{className:"size-4"}),u("fileTreeActions.deleting")]}):u("fileTreeActions.delete")})]})]})}var B=t,V=n,z=r,H=i,U=a,G=l,W=c,q=d;function Z(){let[e,t]=(0,q.useGetSet)("showNewFolderDialog",!1),[n,r]=(0,q.useGetSet)("newFolderDialogData",{folderName:""});return{newFolderDialogData:n,setNewFolderDialogData:r,showNewFolderDialog:e,setShowNewFolderDialog:t}}function K(e){let{blockId:t}=e,[n,r]=(0,q.useGetSet)("tempFolders-".concat(t),[]);return{tempFolders:n,setTempFolders:r}}function $(e){let{onSuccess:t}=e,{newFolderDialogData:n,showNewFolderDialog:r,setShowNewFolderDialog:i}=Z(),[o,a]=(0,z.useState)(!1),[s,l]=(0,z.useState)(""),c=(0,H.useT)();(0,z.useEffect)(()=>{r&&l("")},[r]);let u=(0,z.useCallback)(e=>{e.preventDefault(),a(!0),t(n.folderName?"".concat(n.folderName,"/").concat(s):s),a(!1)},[n,t,s]);return(0,B.jsxs)(G.Modal,{onOpenChange:i,open:r,responsive:!1,children:[(0,B.jsx)(G.ModalHeader,{children:(0,B.jsx)(G.ModalTitle,{children:c("fileTreeActions.newFolder")})}),(0,B.jsx)(G.ModalContent,{children:(0,B.jsx)("form",{className:"flex flex-col gap-6",onSubmit:u,children:(0,B.jsx)(W.Input,{onChange:e=>l(e.target.value),disabled:o,value:s})})}),(0,B.jsxs)(G.ModalFooter,{children:[(0,B.jsx)(G.ModalClose,{asChild:!0,children:(0,B.jsx)(V.Button,{size:"sm",variant:"secondary",children:c("fileTreeActions.cancel")})}),(0,B.jsx)(V.Button,{"data-testid":"confirm-delete-message",disabled:o,onClick:u,size:"sm",children:o?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(U.IconSpinner,{className:"size-4"}),c("fileTreeActions.creating")]}):c("fileTreeActions.create")})]})]})}e.s(["NewFolderDialog",()=>$,"useNewFolderDialog",()=>Z,"useTempFolders",()=>K],804089)},811140,e=>{"use strict";e.s(["RenameFileDialog",()=>h,"renameFile",()=>p,"useRenameFileDialog",()=>d]);var t=e.i(509473),n=e.i(176248),r=e.i(743124),i=e.i(297239),o=e.i(46601);e.i(563948);var a=e.i(407562),s=e.i(686832),l=e.i(763480),c=e.i(894906),u=e.i(914483);function d(){let[e,t]=(0,u.useGetSet)("showRenameFileDialog",!1),[n,r]=(0,u.useGetSet)("renameFileDialogData",{fileName:""});return{renameFileDialogData:n,setRenameFileDialogData:r,showRenameFileDialog:e,setShowRenameFileDialog:t}}async function p(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[...e],a=o.findIndex(e=>e.meta.file===t.fileName);if(-1===a)throw Error("File not found");let s=t.fileName.split("/").slice(0,-1).join("/"),l=i?n:s?"".concat(s,"/").concat(n):n;if(o[a].meta.file=l,o[a].isMoved=!0,o[a].isUserEdit=!0,!(await r([...o],{moveFile:{from:t.fileName,to:l}})).success)throw Error("Failed");return l}function h(e){let{blockId:u,sourceFiles:h,onSuccess:f}=e,{renameFileDialogData:m,showRenameFileDialog:g,setShowRenameFileDialog:v}=d(),x=(0,c.useUpdateBlockData)(u),[y,b]=(0,r.useState)(!1),[w,j]=(0,r.useState)(""),C=(0,i.useT)();(0,r.useEffect)(()=>{j(m.fileName.split("/").slice(-1)[0])},[m.fileName]);let k=(0,r.useCallback)(async e=>{e.preventDefault();try{b(!0);let e=await p(h,m,w,x);f(e)}catch(e){a.toast.error(C("fileTreeActions.renameFileNotificationError"))}finally{b(!1)}},[h,f,m,C,x,w]);return(0,t.jsxs)(s.Modal,{onOpenChange:v,open:g,responsive:!1,children:[(0,t.jsx)(s.ModalHeader,{children:(0,t.jsx)(s.ModalTitle,{children:C("fileTreeActions.renameFile")})}),(0,t.jsx)(s.ModalContent,{children:(0,t.jsx)("form",{className:"flex flex-col gap-6",onSubmit:k,children:(0,t.jsx)(l.Input,{onChange:e=>j(e.target.value),disabled:y,value:w})})}),(0,t.jsxs)(s.ModalFooter,{children:[(0,t.jsx)(s.ModalClose,{asChild:!0,children:(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",children:C("fileTreeActions.cancel")})}),(0,t.jsx)(n.Button,{"data-testid":"confirm-delete-message",disabled:y,onClick:k,size:"sm",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.IconSpinner,{className:"size-4"}),C("fileTreeActions.renaming")]}):C("fileTreeActions.rename")})]})]})}},380105,818845,222199,e=>{"use strict";e.s(["MultiFileCode",()=>er],380105);var t=e.i(509473),n=e.i(900050),r=e.i(227308),i=e.i(696871),o=e.i(186638),a=e.i(743124),s=e.i(176248),l=e.i(846978),c=e.i(892887),u=e.i(389905),d=e.i(593567),p=e.i(922106),h=e.i(918823),f=e.i(304649),m=e.i(926224),g=e.i(695444),v=e.i(638041),x=e.i(161911),y=e.i(788018),b=e.i(223215),w=e.i(313595),j=e.i(44756),C=e.i(934994),k=e.i(804089),S=e.i(811140),N=t,E=f;function D(e){let{className:t,...n}=e;return(0,N.jsxs)("svg",{className:(0,E.cn)("h-4 w-4",t),fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...n,children:[(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 10.4V11.2H10.6V10.4C10.6 9.73726 11.1373 9.2 11.8 9.2C12.4627 9.2 13 9.73726 13 10.4ZM9.4 11.2V10.4C9.4 9.07452 10.4745 8 11.8 8C13.1255 8 14.2 9.07452 14.2 10.4V11.2H15V14.8C15 15.4627 14.4627 16 13.8 16H9.8C9.13726 16 8.6 15.4627 8.6 14.8V11.2H9.4Z",fill:"currentColor"}),(0,N.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 7V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V13.5C1.5 14.8807 2.61929 16 4 16H7V14.5H4C3.44772 14.5 3 14.0523 3 13.5V1.5H8V5V6.5H9.5H13V7H14.5ZM9.5 5V2.12132L12.3787 5H9.5Z",fill:"currentColor"})]})}var I=t,A=f;function T(e){let{className:t,...n}=e;return(0,I.jsxs)("svg",{className:(0,A.cn)("h-4 w-4",t),fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...n,children:[(0,I.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.39997 10.7499C9.39997 10.1148 8.8851 9.5999 8.24997 9.5999C7.61485 9.5999 7.09997 10.1148 7.09997 10.7499V11.1428H5.89997V10.7499C5.89997 9.45203 6.95211 8.3999 8.24997 8.3999C9.54784 8.3999 10.6 9.45203 10.6 10.7499V11.2H15V14.8C15 15.4627 14.4627 16 13.8 16H9.8C9.13725 16 8.59999 15.4627 8.59999 14.8V11.2H9.39997V10.7499Z",fill:"currentColor"}),(0,I.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 10V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V13.5C1.5 14.8807 2.61929 16 4 16H7V14.5H4C3.44772 14.5 3 14.0523 3 13.5V1.5H8V5V6.5H9.5H13V10H14.5ZM9.5 5V2.12132L12.3787 5H9.5Z",fill:"currentColor"})]})}e.s(["useToggleFileLock",()=>O],818845),e.i(563948);var M=e.i(407562),L=e.i(894906),P=e.i(297239),R=a,_=e.i(53223);let O=e=>{let{blockId:t,sourceFiles:n,onChange:r}=e,i=(0,L.useUpdateBlockData)(t),o=(0,P.useT)(),[a,s]=(0,R.useState)(null);return{handleToggleFileLock:(0,R.useCallback)(async e=>{let a,l,c=[...n],u="locking";for(let t of c)if(("single-file"!==e.variant||t.meta.file===e.fileNameToEdit)&&("folder"!==e.variant||t.meta.file.startsWith(e.folderName+"/"))){if(("single-file"===e.variant&&t.isLocked||"all-files"===e.variant&&"unlock"===e.mode||"folder"===e.variant&&"unlock"===e.mode)&&(u="unlocking"),"single-file"===e.variant?t.isLocked=!t.isLocked:t.isLocked="lock"===e.mode,"single-file"===e.variant)break;"other-files"===e.variant&&(t.meta.file===e.fileNameToNotLock?t.isLocked=!1:t.isLocked=!0)}"all-files"===e.variant?s({type:"locking"===u?"locking-all":"unlocking-all"}):"folder"===e.variant?s({type:"locking"===u?"locking-folder":"unlocking-folder",folderName:e.folderName}):s({type:u,fileName:"single-file"===e.variant?e.fileNameToEdit:e.fileNameToNotLock});try{a=await i(c)}catch(e){a={success:!1}}l="single-file"===e.variant?"locking"===u?"fileTreeActions.fileLockedNotification":"fileTreeActions.fileUnlockNotification":"locking"===u?"fileTreeActions.filesLockedNotification":"fileTreeActions.filesUnlockedNotification",s(null),a.success?((0,_.track)("LockFiles",{variant:e.variant,state:u,blockId:t}),M.toast.success(o(l),{position:"bottom-right"}),r()):((0,_.track)("LockFilesError",{variant:e.variant,state:u,blockId:t}),console.error(a),M.toast.error(o("fileTreeActions.fileLockNotificationError"),{position:"bottom-right"}))},[n,i,o,r,t]),lockingStatus:a}};var F=L,B=e.i(355805),V=t,z=f;function H(e){let{className:t,...n}=e;return(0,V.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,className:(0,z.cn)("h-4 w-4",t),children:[(0,V.jsx)("path",{d:"M6.74884 6.75L2.24884 2.25M5.99884 1.5H1.75C1.61193 1.5 1.5 1.61193 1.5 1.75V6",stroke:"#717179",strokeWidth:"1.5",strokeLinecap:"square",strokeLinejoin:"round"}),(0,V.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0001 9.4V10.2H10.6001V9.4C10.6001 8.73726 11.1374 8.2 11.8001 8.2C12.4628 8.2 13.0001 8.73726 13.0001 9.4ZM9.4001 10.2V9.4C9.4001 8.07452 10.4746 7 11.8001 7C13.1256 7 14.2001 8.07452 14.2001 9.4V10.2H15.0001V13.8C15.0001 14.4627 14.4628 15 13.8001 15H9.8001C9.13736 15 8.6001 14.4627 8.6001 13.8V10.2H9.4001Z",fill:"#717179"})]})}var U=e.i(519738),G=e.i(449381);e.s(["createFileInput",()=>Q,"uploadFilesToFileTree",()=>$],222199);var W=B,q=e.i(547763),Z=e.i(79259),K=e.i(342220);async function $(e){let{files:t,targetDirectory:n,blockId:r,existingFiles:i=[]}=e;try{let e=[],o=0xa00000;for(let a of Array.from(t)){let t;if(a.size>o)return{success:!1,error:"File ".concat(a.name," is too large. Maximum size is ").concat(o/1048576,"MB")};if(!a.name||""===a.name.trim())return{success:!1,error:"File name cannot be empty"};if(a.name.match(/[<>:"/\\|?*]/))return{success:!1,error:'File name "'.concat(a.name,'" contains invalid characters')};let s=n?"".concat(n,"/").concat(a.name):a.name;if(i.some(e=>e.meta.file===s))return{success:!1,error:'File "'.concat(a.name,'" already exists in this directory')};let l=a.name.split(".").pop()||"",c=(0,W.cleanLangNoCustom)(l),u=Y(a.name,a.type),d="",p={file:s};if(u)try{let{pathname:e,clientPayload:n}=await (0,Z.buildUploadPayload)({file:a,component:"project-source"}),r=await (0,q.upload)(e,a,{access:"public",handleUploadUrl:"/chat/api/chat/upload",clientPayload:JSON.stringify(n)});t=r.url,p.url=r.url}catch(t){let e="Failed to upload binary file ".concat(a.name);return t instanceof K.BlobContentTypeNotAllowedError?e="File type not allowed for ".concat(a.name):t instanceof Error&&(e=t.message),{success:!1,error:e}}else d=await J(a);let h={source:d,meta:p,blockId:r,lang:c,blobUrl:t,isDeleted:!1,isEdit:!1,isMerged:!1,isMoved:!1,isRecovered:!1,isLocked:!1,isFixed:!1,isQuickEdit:!1,isTerminated:!1,isAttachmentQuickEdit:!1,isUserEdit:!0};e.push(h)}return{success:!0,files:e}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to upload files"}}}function Y(e,t){let n=e.toLowerCase(),r=[".jpg",".jpeg",".png",".gif",".bmp",".svg",".ico",".webp",".tiff",".tif",".mp4",".mp3",".wav",".avi",".mov",".mkv",".flv",".webm",".ogg",".aac",".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".zip",".rar",".7z",".tar",".gz",".bz2",".exe",".dll",".so",".dylib",".app",".bin",".dat",".db",".sqlite"].some(e=>n.endsWith(e)),i=t.startsWith("image/")||t.startsWith("audio/")||t.startsWith("video/")||t.startsWith("application/")&&!t.includes("text")||"application/octet-stream"===t;return r||i}async function J(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{let e=r.result;"string"==typeof e?t(e):n(Error("Failed to read file content"))},r.onerror=()=>{n(Error("Failed to read file"))},r.readAsText(e)})}function Q(e){let{multiple:t=!0,accept:n,onFilesSelected:r}=e,i=document.createElement("input");return i.type="file",i.multiple=t,n&&(i.accept=n),i.onchange=e=>{let t=e.target;t.files&&t.files.length>0&&r(t.files),i.value=""},i}var X=M;let ee="file-tree-panel-group",et="file-tree-panel-right",en="file-tree-panel-left";function er(e){let{showDiffInfo:N,activeFilePath:E,initialFileTreeSize:I,setActiveFile:A,children:M,files:L,loadingPath:P,blockId:R,source:_,onChange:V}=e,[z,W]=(0,a.useState)(!!((null==L?void 0:L.length)&&L.length>1)),{defaultSizeRef:q,isFallbackSize:Z}=(0,r.usePanelSize)({initialSize:I,fallbackSize:15}),K=(0,a.useRef)(!1),{setDeleteFileDialogData:Y,setShowDeleteFileDialog:J}=(0,j.useDeleteFileDialog)(),{setDeleteFolderDialogData:er,setShowDeleteFolderDialog:ei}=(0,C.useDeleteFolderDialog)(),{setRenameFileDialogData:eo,setShowRenameFileDialog:ea}=(0,S.useRenameFileDialog)(),{setNewFileDialogData:es,setShowNewFileDialog:el}=(0,w.useNewFileDialog)(),{setNewFolderDialogData:ec,setShowNewFolderDialog:eu}=(0,k.useNewFolderDialog)(),{tempFolders:ed,setTempFolders:ep}=(0,k.useTempFolders)({blockId:R}),eh=(0,F.useUpdateBlockData)(R),ef=(0,G.useActiveBlockState)(),{isLatest:em}=(0,U.useBlockVersionInfo)(null==ef?void 0:ef.id);(0,a.useEffect)(()=>{!K.current&&(null==L?void 0:L.length)&&L.length>1&&W(!!L.length)},[L]);let eg=(0,a.useMemo)(()=>{let e=L?L.map(e=>["file"in e.meta?e.meta.file:"",e]):[];for(let t of ed||[])e.push([t,null]);let t=[];for(let[n,r]of e){let e=n.split("/"),i=t;for(let[t,n]of e.entries()){let o=t===e.length-1&&null!==r,a=e.slice(0,t+1).join("/"),s=i.find(e=>e.title===n);if(!s){let e={title:n,value:a,isLocked:(null==r?void 0:r.isLocked)||!1,type:o?r.meta.url?"binary":"text":"directory"},t=null==r?void 0:r.originalCode,l=null==r?void 0:r.source;if(o)if(N&&t&&t!==l&&l){let{addedCount:n,removedCount:r}=(0,v.getDiff)(t,l);e.addedCount=n,e.removedCount=r}else N&&l&&!t&&(e.addedCount=l.split("\n").length,e.removedCount=0);else e.items=[];i.push(e),s=e}o||(i=s.items||[])}}return t},[L,N,ed]),ev=(0,a.useMemo)(()=>(0,m.parseMultiFileSource)({source:_,blockType:"code-project",blockId:R}),[_,R]),{handleToggleFileLock:ex,lockingStatus:ey}=O({sourceFiles:ev,blockId:R,onChange:V}),eb=(0,a.useCallback)(e=>{let{targetDirectory:t}=e;Q({multiple:!0,onFilesSelected:async e=>{try{let n=await $({files:e,targetDirectory:t,blockId:R,existingFiles:ev});if(n.success&&n.files){let e=[...ev,...n.files];await eh(e),V(),X.toast.success("Uploaded ".concat(n.files.length," file(s) to ").concat(t||"root"))}else X.toast.error(n.error||"Failed to upload files")}catch(e){X.toast.error("An unexpected error occurred while uploading files"),console.error("File upload error:",e)}}}).click()},[ev,eh,V,R]),ew=(0,a.useCallback)(e=>{let{item:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({fileNameToEdit:n.value,variant:"single-file"}),children:[n.isLocked?(0,t.jsx)(d.LockOpen,{}):(0,t.jsx)(u.LockClosed,{}),(0,t.jsx)("span",{children:n.isLocked?"Unlock":"Lock"})]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"lock",variant:"all-files"}),children:[(0,t.jsx)(D,{}),"Lock All"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"unlock",variant:"all-files"}),children:[(0,t.jsx)(T,{}),"Unlock All"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"lock",variant:"other-files",fileNameToNotLock:n.value}),children:[(0,t.jsx)(H,{}),"Lock Other Files"]}),em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.ContextMenuSeparator,{}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{ea(!0),eo({fileName:n.value})},children:[(0,t.jsx)(x.FileEdit,{}),"Rename"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{let e=n.value,t=e.lastIndexOf("/");eb({targetDirectory:t>0?e.substring(0,t):""})},children:[(0,t.jsx)(h.CloudUpload,{}),"Upload Files"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:async()=>{try{let e,t=ev.find(e=>e.meta.file===n.value);if(!t)throw Error("File not found");let r=t.meta.file.split("/"),i=r[r.length-1],o=r.length>1?r.slice(0,-1).join("/"):"",a=i.split("."),s=a.reverse().pop()||"",l=a.reverse().join("."),c=s.match(/-copy(-(\d+))?$/),u=s,d=c?c[2]?parseInt(c[2])+1:2:1;do u=c?s.replace(/-copy(-\d+)?$/,"-copy-".concat(d)):"".concat(s,"-copy").concat(d>1?"-".concat(d):""),e="".concat(o?"".concat(o,"/"):"").concat(u).concat(l?".".concat(l):""),d++;while(ev.some(t=>t.meta.file===e))let p={source:t.source,meta:{file:e},blockId:R,lang:(0,B.cleanLangNoCustom)(l),isDeleted:!1,isEdit:!1,isMerged:!1,isMoved:!1,isRecovered:!1,isFixed:!1,isQuickEdit:!1,isTerminated:!1,isAttachmentQuickEdit:!1,isLocked:!1,isUserEdit:!0};if((await eh([...ev,p])).success)V();else throw Error("Failed")}catch(e){throw Error("Failed")}},children:[(0,t.jsx)(c.Layers,{}),(0,t.jsx)("span",{children:"Duplicate"})]})]}),em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.ContextMenuSeparator,{}),(0,t.jsxs)(g.ContextMenuItem,{variant:"destructive",onSelect:()=>{J(!0),Y({fileName:n.value})},children:[(0,t.jsx)(p.Trash,{}),"Delete"]})]})]})},[em,R,V,Y,eo,J,ea,ex,ev,eh,eb]),ej=(0,a.useCallback)(e=>{let{item:n}=e;return(0,t.jsxs)(t.Fragment,{children:[em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{es({folderName:n.value}),el(!0)},children:[(0,t.jsx)(y.FilePlus,{}),"New File"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{ec({folderName:n.value}),eu(!0)},children:[(0,t.jsx)(l.FolderPlus,{}),"New Folder"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>eb({targetDirectory:n.value}),children:[(0,t.jsx)(h.CloudUpload,{}),"Upload Files"]}),(0,t.jsx)(g.ContextMenuSeparator,{})]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({variant:"folder",mode:"lock",folderName:n.value}),children:[(0,t.jsx)(D,{}),"Lock Folder"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({variant:"folder",mode:"unlock",folderName:n.value}),children:[(0,t.jsx)(T,{}),"Unlock Folder"]}),em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.ContextMenuSeparator,{}),(0,t.jsxs)(g.ContextMenuItem,{variant:"destructive",onSelect:()=>{ep(e=>(e||[]).filter(e=>e!==n.value)),ei(!0),er({folderName:n.value,source:_})},children:[(0,t.jsx)(p.Trash,{}),"Delete"]})]})]})},[em,er,es,ec,ei,ep,eu,ex,el,_,eb]),eC=(0,a.useCallback)(()=>(0,t.jsxs)(t.Fragment,{children:[em&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{el(!0),es({folderName:""})},children:[(0,t.jsx)(y.FilePlus,{}),"New File"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>{eu(!0),ec({folderName:""})},children:[(0,t.jsx)(l.FolderPlus,{}),"New Folder"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>eb({targetDirectory:""}),children:[(0,t.jsx)(h.CloudUpload,{}),"Upload Files"]}),(0,t.jsx)(g.ContextMenuSeparator,{})]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"lock",variant:"all-files"}),children:[(0,t.jsx)(D,{}),"Lock All"]}),(0,t.jsxs)(g.ContextMenuItem,{onSelect:()=>ex({mode:"unlock",variant:"all-files"}),children:[(0,t.jsx)(T,{}),"Unlock All"]})]}),[em,el,ex,es,eu,ec,eb]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.PanelGroup,{isFallbackSize:Z,collapseSide:"left",cookie:i.FILE_TREE_RESIZE_COOKIE,id:ee,className:"h-screen w-screen",direction:"horizontal",leftId:en,rightId:et,defaultSizeRef:q,children:[(0,t.jsx)(r.CollapsiblePanel,{className:"z-10 h-full min-w-[160px]",collapseSide:"left",isOpen:z,order:1,defaultSize:q.current,collapseId:en,children:(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)("div",{className:"bg-v0-background-200 flex h-full flex-col",children:(0,t.jsx)(n.FileTree,{loading:P,active:E,onSelect:A,lockingStatus:ey,className:"w-full flex-1 overflow-y-auto p-1.5 pb-12",items:eg,FileActions:ew,FolderActions:ej,TreeActions:eC})})})}),(0,t.jsx)(o.Panel,{id:et,order:2,defaultSize:z?100-q.current:100,className:"h-full min-w-[200px]",children:M}),(0,t.jsx)(s.Button,{tooltip:"".concat(z?"Close":"Open"," File Tree"),className:(0,f.cn)("absolute bottom-2 left-2 z-20 size-7 transition-all",z?"-scale-x-100":""),variant:"secondary",size:"sm",onClick:()=>{K.current=!0,W(!z)},children:(0,t.jsx)(b.CollapseArrow,{},"arrow")},"button")]}),(0,t.jsx)(j.DeleteFileDialog,{blockId:R,sourceFiles:ev,onSuccess:()=>{J(!1),V()}}),(0,t.jsx)(C.DeleteFolderDialog,{blockId:R,sourceFiles:ev,onSuccess:()=>{ei(!1),V()}}),(0,t.jsx)(w.NewFileDialog,{blockId:R,sourceFiles:ev,onSuccess:()=>{el(!1),V()}}),(0,t.jsx)(k.NewFolderDialog,{onSuccess:e=>{ep(t=>Array.from(new Set([...t||[],e]))),eu(!1),V()}}),(0,t.jsx)(S.RenameFileDialog,{blockId:R,sourceFiles:ev,onSuccess:e=>{e&&A(e),ea(!1),V()}})]})}},745587,e=>{"use strict";var t=e.i(743124),n=e.i(346970);function r(e){let{blockId:r,loadingPath:i,files:o}=e,{data:a,mutate:s}=(0,n.default)(["block:activeFile",r]),{data:l,mutate:c}=(0,n.default)(["block:autoSwitch",r]),u=void 0===l||l,d=(0,t.useMemo)(()=>{var e,t;let n=null==o||null==(e=o.findLast(e=>!e.isMerged))?void 0:e.meta.file;return n||(null==o||null==(t=o[0])?void 0:t.meta.file)},[o,r]),p=a;return u&&i&&(p=i),p||(p=d),{activeFilePath:p,setActiveFilePath:s,autoSwitch:u,setAutoSwitch:c}}function i(e){let{blockId:t}=e,{mutate:r}=(0,n.default)(["block:activeFile",t]);return r}e.s(["useActiveFile",()=>r,"useSetActiveFile",()=>i])},343258,e=>{"use strict";var t=e.i(346970);function n(e){let{blockId:n}=e,{data:r,mutate:i}=(0,t.default)(["block:editValueMap",n],{fallbackData:{}});return{editValueMap:r||{},setEditValueMap:i}}e.s(["useEditValueMap",()=>n])},280738,e=>{"use strict";var t=e.i(509473),n=e.i(304649);function r(e){let{className:r,children:i,bottomBorder:o,onePixelShorter:a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex w-full shrink-0 items-center pl-3 pr-2 text-[13px] font-medium text-v0-gray-900",a?"h-[calc(2.25rem-1px)]":"h-9",o&&"border-v0-alpha-400 border-b",r),"data-slot":"block-tab-header",children:i})}e.s(["BlockTabHeader",()=>r])},382559,e=>{"use strict";var t=e.i(743124),n=e.i(346970);function r(e){let{data:r,mutate:i}=(0,n.default)(["block:file-editing-status",e],{fallbackData:!1});return[r,(0,t.useCallback)(e=>{i(e)},[i])]}e.s(["useFileEditingStatus",()=>r])},871701,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(152076);let i=null,{min:o,max:a,abs:s,floor:l}=Math,c=(e,t,n)=>o(n,a(t,e)),u=e=>[...e].sort((e,t)=>e-t),d="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)},p=e=>{let t,n;return()=>(t||(t=!0,n=e()),n)},h=-1,f=(e,t,n)=>{let r=n?"unshift":"push";for(let n=0;n<t;n++)e[r](h);return e},m=(e,t)=>{let n=e.t[t];return n===h?e.o:n},g=(e,t,n)=>{let r=e.t[t]===h;return e.t[t]=n,e.i=o(t,e.i),r},v=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let n=e.i,r=e.u[n];for(;n<t;)r+=m(e,n),e.u[++n]=r;return e.i=t,r},x=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.l-1;for(;n<=r;){let i=l((n+r)/2),o=v(e,i);if(o<=t){if(o+m(e,i)>t)return i;n=i+1}else r=i-1}return c(n,0,e.l-1)},y=(e,t,n)=>{let r=t-e.l;return e.i=n?-1:o(t-1,e.i),e.l=t,r>0?(f(e.u,r),f(e.t,r,n),e.o*r):(e.u.splice(r),(n?e.t.splice(0,-r):e.t.splice(r)).reduce((t,n)=>t-(n===h?e.o:n),0))},b="undefined"!=typeof window,w=()=>document.documentElement,j=e=>e.ownerDocument,C=e=>e.defaultView,k=p(()=>!!b&&"rtl"===getComputedStyle(w()).direction),S=p(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),N=p(()=>"scrollBehavior"in w().style),E=e=>a(e.h(),e.v()),D=e=>!!e.v(),I=function(e){let t,n,r,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,p=arguments.length>4?arguments[4]:void 0,b=arguments.length>5&&void 0!==arguments[5]&&arguments[5],w=!!d,j=1,C=0,k=0,N=0,E=0,D=0,I=0,A=0,T=0,M=w?[0,a(d-1,0)]:i,L=[0,0],P=0,R=(t=e,n=l,{o:(r=p)?r[1]:n,t:r&&r[0]?f(r[0].slice(0,o(t,r[0].length)),a(0,t-r[0].length)):f([],t),l:t,i:-1,u:f([],t)}),_=new Set,O=()=>N-k,F=()=>O()+D+E,B=e=>((e,t,n,r)=>{if(r=o(r,e.l-1),v(e,r)<=t){let i=x(e,t+n,r);return[x(e,t,r,i),i]}{let i=x(e,t,void 0,r);return[i,x(e,t+n,i)]}})(R,e,C,L[0]),V=()=>{let e;return(e=R).l?v(e,e.l-1)+m(e,e.l-1):0},z=e=>v(R,e)-D,H=e=>m(R,e),U=e=>{e&&(S()&&0!==A?D+=e:E+=e)};return{p:()=>j,_:()=>{let e;return[(e=R).t.slice(),e.o]},m:()=>{let e,t;return I?[e,t]=L:([e,t]=L=B(a(0,F())),M&&(e=o(e,M[0]),t=a(t,M[1]))),1!==A&&(e-=a(0,c)),2!==A&&(t+=a(0,c)),[a(e,0),o(t,R.l-1)]},S:()=>x(R,F()),$:()=>x(R,F()+C),I:e=>R.t[e]===h,k:()=>!!M&&R.t.slice(a(0,M[0]-1),o(R.l-1,M[1]+1)+1).includes(h),T:z,R:H,M:()=>R.l,C:()=>N,H:()=>0!==A,v:()=>C,W:()=>k,h:V,B:()=>(I=E,E=0,[I,2===T||O()+C>=V()]),J:(e,t)=>{let n=[e,t];return _.add(n),()=>{_.delete(n)}},O:(e,t)=>{let n,r,o=0;switch(e){case 1:{let e=I;I=0;let n=t-N,a=s(n);e&&a<s(e)+1||0!==T||(A=n<0?2:1),w&&(M=i,w=!1),N=t,o=4;let l=O();l>=-C&&l<=V()&&(o+=1,r=a>C);break}case 2:o=8,0!==A&&(n=!0,o+=1),A=0,T=0,M=i;break;case 3:{let e=t.filter(e=>{let[t,n]=e;return R.t[t]!==n});if(!e.length)break;for(let[t,n]of(U(e.reduce((e,t)=>{let[n,r]=t;return(2===T||(M?!w&&n<M[0]:z(n)+(0===A&&0===T?H(n):0)<O()))&&(e+=r-H(n)),e},0)),e)){let e=H(t),r=g(R,t,n);b&&(P+=r?n:n-e)}b&&C&&P>C&&(U(((e,t)=>{let n=0,r=[];e.t.forEach((e,i)=>{e!==h&&(r.push(e),i<t&&n++)}),e.i=-1;let i=u(r),o=i.length,s=o/2|0,l=o%2==0?(i[s-1]+i[s])/2:i[s],c=e.o;return((e.o=l)-c)*a(t-n,0)})(R,x(R,F()))),b=!1),o=3,r=!0;break}case 4:C!==t&&(C=t,o=3);break;case 5:t[1]?(U(y(R,t[0],!0)),T=2):y(R,t[0]),o=1;break;case 6:k=t;break;case 7:T=1;break;case 8:M=B(t),o=1}o&&(j=1+(0x7fffffff&j),n&&D&&(E+=D,D=0),_.forEach(e=>{let[t,n]=e;o&t&&n(r)}))}}},A=setTimeout,T=(e,t)=>t&&k()?-e:e,M=(e,t,n,r,o,a)=>{let s=Date.now,l=0,c=!1,u=!1,d=!1,p=!1,h=(()=>{let t,n=()=>{t!=i&&clearTimeout(t)},r=()=>{n(),t=A(()=>{t=i,(()=>{if(c||u)return c=!1,h();d=!1,e.O(2)})()},150)};return r.L=n,r})(),f=()=>{l=s(),d&&(p=!0),a&&e.O(6,a()),e.O(1,r()),h()},m=t=>{if(c||!e.H()||t.ctrlKey)return;let r=s()-l;150>r&&50<r&&(n?t.deltaX:t.deltaY)&&(c=!0)},g=()=>{u=!0,d=p=!1},v=()=>{u=!1,S()&&(d=!0)};return t.addEventListener("scroll",f),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",g,{passive:!0}),t.addEventListener("touchend",v,{passive:!0}),{P:()=>{t.removeEventListener("scroll",f),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",g),t.removeEventListener("touchend",v),h.L()},A:()=>{let[t,i]=e.B();t&&(o(T(t,n),i,p),p=!1,i&&e.v()>e.h()&&e.O(1,r()))}}},L=(e,t)=>{let n,r,i,o=t?"scrollLeft":"scrollTop",a=t?"overflowX":"overflowY",s=async(r,a)=>{if(!n)return void d(()=>s(r,a));i&&i();let l=()=>{let t;return[new Promise((n,r)=>{t=n,i=r,D(e)&&A(r,150)}),e.J(2,()=>{t&&t()})]};if(a&&N()){for(;e.O(8,r()),e.k();){let[e,t]=l();try{await e}catch(e){return}finally{t()}}n.scrollTo({[t?"left":"top"]:T(r(),t),behavior:"smooth"})}else for(;;){let[i,a]=l();try{n[o]=T(r(),t),e.O(7),await i}catch(e){return}finally{a()}}};return{V(s){n=s,r=M(e,s,t,()=>T(s[o],t),(t,n,r)=>{if(r){let e=s.style,t=e[a];e[a]="hidden",A(()=>{e[a]=t})}n?(s[o]=e.C()+t,i&&i()):s[o]+=t})},X(){r&&r.P()},Y(e){s(()=>e)},j(t){t+=e.C(),s(()=>t)},q(t){let{align:n,smooth:r,offset:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=c(t,0,e.M()-1),"nearest"===n){let r=e.T(t),i=e.C();if(r<i)n="start";else{if(!(r+e.R(t)>i+e.v()))return;n="end"}}s(()=>i+e.W()+e.T(t)+("end"===n?e.R(t)-e.v():"center"===n?(e.R(t)-e.v())/2:0),r)},D:()=>{r&&r.A()}}},P=(e,t)=>{let n,r,i,o=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=r?"offsetLeft":"offsetTop",s=i+(r&&k()?n.innerWidth-e[a]-e.offsetWidth:e[a]),l=e.offsetParent;return e!==t&&l?o(l,t,n,r,s):s},a=async(r,o)=>{if(!n)return void d(()=>a(r,o));i&&i();let s=()=>{let t;return[new Promise((n,r)=>{t=n,i=r,D(e)&&A(r,150)}),e.J(2,()=>{t&&t()})]},l=C(j(n));if(o&&N()){for(;e.O(8,r()),e.k();){let[e,t]=s();try{await e}catch(e){return}finally{t()}}l.scroll({[t?"left":"top"]:T(r(),t),behavior:"smooth"})}else for(;;){let[n,i]=s();try{l.scroll({[t?"left":"top"]:T(r(),t)}),e.O(7),await n}catch(e){return}finally{i()}}};return{V(i){n=i;let a=t?"scrollX":"scrollY",s=j(i),l=C(s),c=s.body;r=M(e,l,t,()=>T(l[a],t),(n,r)=>{r?l.scroll({[t?"left":"top"]:e.C()+n}):l.scrollBy(t?n:0,t?0:n)},()=>o(i,c,l,t))},X(){r&&r.P(),n=void 0},D:()=>{r&&r.A()},q(r){let{align:i,smooth:s,offset:l=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n)return;if(r=c(r,0,e.M()-1),"nearest"===i){let t=e.T(r),n=e.C();if(t<n)i="start";else{if(!(t+e.R(r)>n+e.v()))return;i="end"}}let u=j(n),d=C(u),p=u.documentElement,h=()=>e.v()-(t?p.clientWidth:p.clientHeight);a(()=>l+o(n,u.body,d,t)+e.T(r)+("end"===i?e.R(r)-(e.v()-h()):"center"===i?(e.R(r)-(e.v()-h()))/2:0),s)}}},R=(e,t)=>{let n=L(e,!1),r=L(t,!0);return{V(e){n.V(e),r.V(e)},X(){n.X(),r.X()},Y(e,t){n.Y(t),r.Y(e)},j(e,t){n.j(t),r.j(e)},q(e,t){n.q(t),r.q(e)},D(){n.D(),r.D()}}},_=e=>{let t;return{U(n){(t||(t=new(C(j(n))).ResizeObserver(e))).observe(n)},F(e){t.unobserve(e)},P(){t&&t.disconnect()}}},O=(e,t)=>{let n,r=t?"width":"height",o=new WeakMap,a=_(t=>{let a=[];for(let{target:s,contentRect:l}of t)if(s.offsetParent)if(s===n)e.O(4,l[r]);else{let e=o.get(s);e!=i&&a.push([e,l[r]])}a.length&&e.O(3,a)});return{G(e){a.U(n=e)},K:(e,t)=>(o.set(e,t),a.U(e),()=>{o.delete(e),a.F(e)}),X:a.P}},F=(e,t)=>{let n,r=t?"width":"height",o=t?"innerWidth":"innerHeight",a=new WeakMap,s=_(t=>{let n=[];for(let{target:e,contentRect:o}of t){if(!e.offsetParent)continue;let t=a.get(e);t!=i&&n.push([t,o[r]])}n.length&&e.O(3,n)});return{G(t){let r=C(j(t)),i=()=>{e.O(4,r[o])};r.addEventListener("resize",i),i(),n=()=>{r.removeEventListener("resize",i)}},K:(e,t)=>(a.set(e,t),s.U(e),()=>{a.delete(e),s.F(e)}),X(){n&&n(),s.P()}}},B=(e,t)=>{let n,r="height",i="width",o=new WeakMap,s=new Set,l=new Set,c=new Map,u=(e,t)=>"".concat(e,"-").concat(t),d=_(d=>{let p=new Set,h=new Set;for(let{target:a,contentRect:s}of d)if(a.offsetParent)if(a===n)e.O(4,s[r]),t.O(4,s[i]);else{let e=o.get(a);if(e){let t,n,[o,a]=e,l=u(o,a),d=c.get(l),f=[s[r],s[i]];d?(d[0]!==f[0]&&(t=!0),d[1]!==f[1]&&(n=!0)):t=n=!0,t&&p.add(o),n&&h.add(a),(t||n)&&c.set(l,f)}}if(p.size){let t=[];p.forEach(e=>{let n=0;l.forEach(t=>{let r=c.get(u(e,t));r&&(n=a(n,r[0]))}),n&&t.push([e,n])}),e.O(3,t)}if(h.size){let e=[];h.forEach(t=>{let n=0;s.forEach(e=>{let r=c.get(u(e,t));r&&(n=a(n,r[1]))}),n&&e.push([t,n])}),t.O(3,e)}});return{G(e){d.U(n=e)},K:(e,t,n)=>(o.set(e,[t,n]),s.add(t),l.add(n),d.U(e),()=>{o.delete(e),d.F(e)}),X:d.P}},V=b?n.useLayoutEffect:n.useEffect,z="current",H=(e,t)=>{if(Array.isArray(e))for(let n of e)H(n,t);else null==e||"boolean"==typeof e||t.push(e)},U=(e,t)=>{let n=e.key;return null!=n?n:"_"+t},G=e=>{let t=(0,n.useRef)();return t[z]||(t[z]=e())},W=e=>{let t=(0,n.useRef)(e);return V(()=>{t[z]=e},[e]),t},q=(0,n.memo)(e=>{let{N:r,Z:i,ee:o,te:a,ne:s,oe:l,re:c,ie:u}=e,d=(0,n.useRef)(null);V(()=>i(d[z],o),[o]);let p=(0,n.useMemo)(()=>{let e={position:s&&u?void 0:"absolute",[c?"height":"width"]:"100%",[c?"top":"left"]:0,[c?k()?"right":"left":"top"]:a,visibility:!s||u?"visible":"hidden"};return c&&(e.display="flex"),e},[a,s,u,c]);return(0,t.jsx)(l,"string"==typeof l?{ref:d,style:p,children:r}:{ref:d,style:p,index:o,children:r})}),Z=(e,t)=>(0,n.useMemo)(()=>{if("function"==typeof e)return[e,t||0];let n=(e=>{let t=[];return H(e,t),t})(e);return[e=>n[e],n.length]},[e,t]),K=(0,n.forwardRef)((e,i)=>{let{children:o,count:a,overscan:s,itemSize:l,shift:c,horizontal:p,keepMounted:h,cache:f,startMargin:m=0,ssrCount:g,as:v="div",item:x="div",scrollRef:y,onScroll:b,onScrollEnd:w}=e,[j,C]=Z(o,a),k=(0,n.useRef)(null),S=(0,n.useRef)(!!g),N=W(b),D=W(w),[A,T,M,P]=G(()=>{let e=!!p,t=I(C,l,s,g,f,!l);return[t,O(t,e),L(t,e),e]});C!==A.M()&&A.O(5,[C,c]),m!==A.W()&&A.O(6,m);let[R,_]=(0,n.useReducer)(A.p,void 0,A.p),[F,B]=A.m(),H=A.H(),K=A.h(),$=[],Y=e=>{let n=j(e);return(0,t.jsx)(q,{Z:T.K,ee:e,te:A.T(e),ne:A.I(e),oe:x,N:n,re:P,ie:S[z]},U(n,e))};V(()=>{S[z]=!1;let e=A.J(1,e=>{e?(0,r.flushSync)(_):_()}),t=A.J(4,()=>{N[z]&&N[z](A.C())}),n=A.J(8,()=>{D[z]&&D[z]()}),i=e=>{T.G(e),M.V(e)};return y?d(()=>i(y[z])):i(k[z].parentElement),()=>{e(),t(),n(),T.X(),M.X()}},[]),V(()=>{M.D()},[R]),(0,n.useImperativeHandle)(i,()=>({get cache(){return A._()},get scrollOffset(){return A.C()},get scrollSize(){return E(A)},get viewportSize(){return A.v()},findStartIndex:A.S,findEndIndex:A.$,getItemOffset:A.T,getItemSize:A.R,scrollToIndex:M.q,scrollTo:M.Y,scrollBy:M.j}),[]);for(let e=F,t=B;e<=t;e++)$.push(Y(e));if(h){let e=[],t=[];u(h).forEach(n=>{n<F&&e.push(Y(n)),n>B&&t.push(Y(n))}),$.unshift(...e),$.push(...t)}return(0,t.jsx)(v,{ref:k,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:P?K:"100%",height:P?"100%":K,pointerEvents:H?"none":void 0},children:$})}),$=((e,r)=>{let{children:i,count:o,overscan:a,itemSize:s,shift:l,horizontal:c,keepMounted:u,reverse:d,cache:p,ssrCount:h,item:f,onScroll:m,onScrollEnd:g,style:v,...x}=e,y=(0,n.useRef)(null),b=d&&!c,w=(0,t.jsx)(K,{ref:r,scrollRef:b?y:void 0,count:o,overscan:a,itemSize:s,shift:l,horizontal:c,keepMounted:u,cache:p,ssrCount:h,item:f,onScroll:m,onScrollEnd:g,children:i});return b&&(w=(0,t.jsx)("div",{style:{visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:w})),(0,t.jsx)("div",{ref:y,...x,style:{display:c?"inline-block":"block",[c?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...v},children:w})},(e,t)=>"".concat(e,"-").concat(t)),Y=(0,n.memo)(e=>{let{N:r,Z:i,se:o,le:a,ce:s,de:l,fe:c,ue:u,ne:d,ae:p}=e,h=(0,n.useRef)(null);return V(()=>i.K(h[z],o,a),[a,o]),(0,t.jsx)(p,{ref:h,style:(0,n.useMemo)(()=>({display:"grid",position:"absolute",top:s,[k()?"right":"left"]:l,visibility:d?"hidden":"visible",minHeight:c,minWidth:u}),[s,l,u,c,d]),children:r})});(e,i)=>{let{children:o,row:a,col:s,cellHeight:l=40,cellWidth:c=100,overscan:u=2,initialRowCount:d,initialColCount:p,item:h="div",onScroll:f,onScrollEnd:m,style:g,...v}=e,[x,y,b,w]=G(()=>{let e=I(a,l,u,d),t=I(s,c,u,p);return[e,t,B(e,t),R(e,t)]});a!==x.M()&&x.O(5,[a]),s!==y.M()&&y.O(5,[s]);let[j,C]=(0,n.useReducer)(x.p,void 0,x.p),[k,S]=(0,n.useReducer)(y.p,void 0,y.p),[N,D]=x.m(),[A,T]=y.m(),M=x.H(),L=y.H(),P=E(x),_=E(y),O=(0,n.useRef)(null),F=W(f),H=W(m);V(()=>{let e=O[z],t=x.J(1,e=>{e?(0,r.flushSync)(C):C()}),n=y.J(1,e=>{e?(0,r.flushSync)(S):S()}),i=x.J(4,()=>{F[z]&&F[z](x.C())}),o=x.J(8,()=>{H[z]&&H[z]()});return b.G(e),w.V(e),()=>{t(),n(),b.X(),w.X(),i(),o()}},[]),V(()=>{w.D()},[j,k]),(0,n.useImperativeHandle)(i,()=>({get scrollTop(){return x.C()},get scrollLeft(){return y.C()},get scrollHeight(){return E(x)},get scrollWidth(){return E(y)},get viewportHeight(){return x.v()},get viewportWidth(){return y.v()},scrollToIndex:w.q,scrollTo:w.Y,scrollBy:w.j}),[]);let U=(0,n.useMemo)(()=>{let e=new Map;return(t,n)=>{let r=e.get($(t,n));return r||e.set($(t,n),r=o({rowIndex:t,colIndex:n})),r}},[o]),q=[];for(let e=N;e<=D;e++)for(let n=A;n<=T;n++)q.push((0,t.jsx)(Y,{Z:b,se:e,le:n,ce:x.T(e),de:y.T(n),fe:x.R(e),ue:y.R(n),ne:x.I(e)||y.I(n),ae:h,N:U(e,n)},$(e,n)));return(0,t.jsx)("div",{ref:O,...v,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",...g},children:(0,t.jsx)("div",{style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:_,height:P,pointerEvents:M||L?"none":void 0},children:q})})},e.s(["Virtualizer",()=>K])},282931,e=>{"use strict";var t=e.i(509473),n=e.i(66920),r=e.i(996174),i=e.i(304649),o=e.i(745197),a=e.i(297239);let s="scroll-down-button";function l(e){let{scrollToBottom:l,hidden:c,className:u,...d}=e,p=(0,a.useT)(),{showBannerLimit:h,showBannerGeneral:f}=(0,o.useShowUpgradeBanner)(),m=h||f;return(0,t.jsx)("div",{id:s,"aria-hidden":c,className:(0,i.cn)("animate-in fade-in slide-in-from-bottom absolute inset-x-0 -top-12 z-10 m-auto flex w-fit items-center justify-center group-has-data-[slot=prompt-actions-container]/form-container:-top-20",c&&"animate-out fade-out slide-out-to-bottom fill-mode-forwards pointer-events-none",m&&"-top-16",u),...d,children:(0,t.jsx)(r.Tooltip,{content:!c&&(0,t.jsx)(r.TooltipContent,{side:"top",sideOffset:14,children:p("scrollDownButton.scrollToBottom")}),children:(0,t.jsx)("button",{className:(0,i.cn)("animate-slow-bounce shadow-base bg-v0-background-100 hover:bg-v0-background-200 flex size-7 items-center justify-center rounded-full text-v0-gray-900 drop-shadow-md",c&&"hidden"),onClick:e=>{e.stopPropagation(),l()},type:"button",children:(0,t.jsx)(n.ChevronDownIcon,{className:"size-5"})})})})}e.s(["SCROLL_DOWN_BUTTON_ID",0,s,"ScrollDownButton",()=>l])},360174,(e,t,n)=>{var r=e.r(987325),i=e.r(791606),o="Expected a function";t.exports=function(e,t,n){var a=!0,s=!0;if("function"!=typeof e)throw TypeError(o);return i(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:a,maxWait:t,trailing:s})}},807260,e=>{"use strict";e.s(["useVirtualScroll",()=>c]);var t=e.i(509473),n=e.i(743124),r=e.i(92479),i=e.i(449381),o=e.i(979865),a=e.i(209819),s=e.i(282931),l=e.i(360174);function c(e){let{count:c,pushToBottom:u}=e,d=(0,n.useRef)(null),p=(0,n.useRef)(null),h=(0,n.useRef)(null),{messages:f,activeForkKey:m}=(0,r.useChatMessages)(),{hashMessageId:g}=(0,r.useChatHashNavigation)(),v=(0,i.useActiveBlockView)(),x=(0,o.usePathname)(),{setMetadata:y}=(0,a.useChatMetadata)(),{chatId:b}=(0,r.useChatId)(),[w,j]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!0),S=(0,n.useCallback)((e,t,n)=>{var r;let i=!n&&e>=(null!=t?t:c)-1;null==(r=h.current)||r.scrollToIndex(e,{align:i?"end":"start",smooth:!0}),setTimeout(()=>{i&&p.current&&p.current.scrollTo({top:p.current.scrollHeight-p.current.clientHeight+1,behavior:"smooth"})},0)},[c]),N=(0,n.useRef)(null),E=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!n){if(N.current===e)return;N.current=e}let i=new Set(null!=r?r:m||[]),o=f.filter(e=>i.has(e.id)).findIndex(t=>t.id===e);-1!==o&&setTimeout(()=>S(o,null==r?void 0:r.length,n),t)},[f,S,m]),D=(0,n.useCallback)(()=>!!h.current&&h.current.scrollOffset+h.current.viewportSize+20>h.current.scrollSize,[]),I=(0,n.useCallback)(()=>{k(D())},[D]),A=(0,l.default)(I,100);(0,n.useEffect)(()=>{let e=e=>{e.preventDefault();let t=window.location.hash.slice(1);t&&E(t)},t=e=>{var t;let n=e.target.closest("a");if(n&&(null==(t=n.getAttribute("href"))?void 0:t.startsWith("#"))){e.preventDefault(),e.stopPropagation();let t=n.getAttribute("href").slice(1);window.history.pushState(null,"","".concat(x,"#").concat(t)),window.scrollTo(0,0),E(t)}},n=d.current;window.addEventListener("hashchange",e),null==n||n.addEventListener("click",t);let r=p.current?new ResizeObserver(A):void 0;return null==r||r.observe(p.current),window.location.hash?E(window.location.hash.slice(1),250*!!v):g&&E(g,0),()=>{window.removeEventListener("hashchange",e),null==n||n.removeEventListener("click",t),null==r||r.disconnect()}},[v,x,E,y,g,A]);let T=(0,n.useCallback)(()=>{S(c-1),setTimeout(()=>{S(c)},150)},[c,S]),M=(0,n.useRef)(!0),L=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(!h.current||!M.current||window.location.hash&&N.current!==window.location.hash)return;let e="".concat(c,"-").concat(b);L.current!==e&&(L.current=e,S(c))},[c,b,S]),(0,n.useEffect)(()=>{var e;u&&(null==(e=h.current)||e.scrollToIndex(c,{align:"end"}))},[c,u]);let P=C||w;return{containerRef:p,vlistRef:h,scrollToBottom:T,scrollToHash:E,scrollDownButton:(0,n.useMemo)(()=>(0,t.jsx)(s.ScrollDownButton,{hidden:P,scrollToBottom:()=>{j(!0),S(c-1),j(!1)}}),[P,S,c]),handleScroll:I}}},265281,e=>{"use strict";e.s(["ConsoleViewer",()=>w]);var t=e.i(509473),n=e.i(743124);e.i(541536);var r=e.i(23474),i=e.i(176248),o=e.i(304649),a=e.i(280738),s=e.i(638200),l=e.i(230902),c=e.i(485370),u=e.i(449381),d=e.i(70165),p=e.i(110909),h=e.i(53223),f=e.i(504066),m=e.i(871701),g=e.i(807260),v=e.i(65151),x=e.i(418929);function y(e){let{event:n,canWriteToChat:r,onAskV0:o}=e;return(0,t.jsxs)("div",{className:"flex items-start gap-4 px-2 py-1 font-mono text-sm",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("time",{className:"text-[13px]",children:[(0,l.format)(new Date(n.timestamp),"HH:mm:ss.SSS"),"Z"]}),n.isServer&&(0,t.jsx)("span",{className:"rounded-full bg-v0-gray-100 px-2 py-0.5 text-xs font-medium text-v0-gray-900",children:"[SERVER]"})]}),(0,t.jsx)("div",{className:"w-full flex-1 whitespace-pre-wrap text-[13px]",children:n.message}),r&&"error"===n.method&&(0,t.jsx)("div",{className:"absolute right-3 top-0.5 opacity-0 transition-opacity group-hover:opacity-100",children:(0,t.jsxs)(i.Button,{onClick:()=>o(n),size:"sm",variant:"secondary",className:"h-[24px] gap-0.5 rounded-md border-none px-1.5 py-0.5 font-sans text-[13px] font-medium shadow-sm",children:["Ask ",(0,t.jsx)(c.LogoV0,{className:"ml-0.5 h-3 w-3"})]})})]})}function b(e){let{event:r,activeFilePath:i,setActiveFilePath:o}=e,a=n.default.useMemo(()=>{try{let e=JSON.parse(r.content);return"string"==typeof e?e:r.content}catch(e){return r.content}},[r.content]),{isCopied:s,copyToClipboard:l,copyImageToClipboard:c}=(0,f.useCopyToClipboard)({timeout:2e3}),u=async e=>{if(s)return;if(r.attachment){let{mimeType:e,data:t}=r.attachment;return e.startsWith("image/")?await c(t,e):await l(t),(0,h.track)("CopyOutputExecutable",{output:"".concat(e," attachment")})}let t=(0,v.getOutputString)(e);return await l(t),(0,h.track)("CopyOutputExecutable",{output:t})},d=async()=>{if(!r.attachment)return(0,v.downloadAsFile)(m());{let{mimeType:e,data:t}=r.attachment;return(0,v.downloadAttachment)(e,t)}},m=()=>({stdout:"stdout"===r.method?[[a]]:[],stderr:"stderr"===r.method?[[a]]:[]}),g=()=>{if(!r.attachment)return(0,t.jsx)(t.Fragment,{});let{mimeType:e,data:n}=r.attachment;if(e.startsWith("image/")){let r="image/svg+xml"===e?"data:".concat(e,",").concat(encodeURIComponent(n)):"data:".concat(e,";base64,").concat(n);return(0,t.jsx)("div",{className:"mt-2 max-w-lg",children:(0,t.jsx)("img",{src:r,alt:"Execution output",className:"max-h-96 w-full rounded-md border object-contain",style:{imageRendering:"auto"}})})}return(0,t.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:n})};return(0,t.jsxs)(p.CodeOutputMessage,{fileName:r.fileName,isCopied:s,handleCopy:()=>void u(m()),handleDownload:()=>void d(),handleFileOpen:()=>{i!==r.fileName&&(null==o||o(r.fileName))},children:["string"==typeof a?(0,t.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:a}):(0,t.jsx)(p.JsonRowView,{src:a,className:"[&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-v0-gray-900 [&_.jv-indent]:pl-4",style:"stderr"===r.method?{color:"rgb(192,27,93)"}:void 0}),g()]})}function w(e){let{consoleEvents:n,clearLogs:r,canWriteToChat:l,hideHeader:c,className:h,activeFilePath:f,setActiveFilePath:v}=e,{actions:w}=(0,x.useCurrentChatPrompt)(),{handleInputChange:j,focusPrompt:C}=w,k=(0,u.useSetActiveBlockView)(),{containerRef:S,vlistRef:N,handleScroll:E,scrollDownButton:D}=(0,g.useVirtualScroll)({count:n.length,pushToBottom:!0}),I=e=>{j({initialValue:"The code has the following ".concat(e.method,":\n```\n").concat("console"===e.type?e.message:e.content,"\n```\nRevise the code to address this issue."),force:!0,save:!0}),C(),(0,d.getIsMobile)()&&k(!1)};return(0,t.jsxs)("div",{className:(0,o.cn)("bg-v0-background-200 flex size-full flex-col items-stretch overflow-hidden",h),children:[!c&&(0,t.jsxs)(a.BlockTabHeader,{className:"justify-between gap-1",bottomBorder:!0,children:[(0,t.jsx)("h3",{className:"text-[13px] font-medium",children:"Console"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsxs)("div",{className:"text-xs",children:[(0,t.jsxs)("span",{children:[n.length," "]}),(0,t.jsx)("span",{children:1===n.length?"event":"events"})]}),(0,t.jsx)("div",{className:"ml-1 h-[16px] w-px bg-v0-gray-200","aria-hidden":!0}),(0,t.jsx)(i.Button,{variant:"ghost",size:"xs",className:"text-v0-gray-900",tooltip:"Clear console output",onClick:r,disabled:0===n.length,children:(0,t.jsx)(s.AnimatedTrash,{})})]})]}),(0,t.jsxs)("div",{className:"relative size-full",style:{contain:"strict"},children:[(0,t.jsx)("div",{className:"h-full w-full overflow-y-auto",ref:S,style:{overflowAnchor:"none"},children:(0,t.jsx)("div",{className:"mx-auto w-full",children:0===n.length?(0,t.jsx)("div",{className:"flex h-full items-center justify-center p-8",children:(0,t.jsx)("div",{className:"text-center text-sm text-v0-gray-900",children:"No logs available to display"})}):(0,t.jsx)(m.Virtualizer,{scrollRef:S,ref:N,onScroll:E,children:n.map((e,n)=>(0,t.jsx)("div",{className:(0,o.cn)("group relative flex min-h-[24px] items-center",(0,p.getEventStyle)(e.method)),children:"console"===e.type?(0,t.jsx)(y,{event:e,canWriteToChat:l,onAskV0:I}):(0,t.jsx)(b,{event:e,activeFilePath:f,setActiveFilePath:v})},"".concat(e.timestamp,"-").concat(n)))})})}),n.length>0?(0,t.jsx)("div",{className:"sticky inset-x-0 bottom-2 z-50 flex justify-center",children:D}):null]})]})}r.z.object({type:r.z.literal("output"),blockId:r.z.string(),fileName:r.z.string(),content:r.z.string(),timestamp:r.z.string(),method:r.z.enum(["stdout","stderr"]),attachment:r.z.object({mimeType:r.z.string(),data:r.z.string()}).optional()})},298450,e=>{"use strict";var t=e.i(743124),n=e.i(346970);function r(e){let{data:r,mutate:i}=(0,n.default)(["block:consoleEvents",e],{fallbackData:{}});return{blockStatus:null!=r?r:{},flagNewEvent:(0,t.useCallback)(t=>i(n=>({...n,[e]:n&&"error"===n[e]?"error":t})),[e,i]),clearEvents:(0,t.useCallback)(()=>i(t=>{let n={...t};return n[e]=null,n}),[e,i])}}e.s(["useNewConsoleEvents",()=>r])},359783,e=>{"use strict";var t=e.i(509473),n=e.i(743124);let r=(0,n.createContext)({});function i(e){let{children:n}=e;return(0,t.jsx)(r.Provider,{value:{},children:n})}function o(){return(0,n.use)(r)}e.s(["DataProvider",()=>i,"useClientGlobalData",()=>o])},930293,e=>{"use strict";var t=e.i(375465),n=e.i(359783);let r=e=>{let r=(0,n.useClientGlobalData)(),i=r.globalSessionTokenCache||(r.globalSessionTokenCache=new Map),{data:o,error:a}=(0,t.default)(e?"frame-token:".concat(e):null,async()=>{let t=await fetch("/chat/api/chat/frame-token?cid=".concat(e));if(!t.ok)throw Error("Failed to fetch session token");return t.text()});return"string"!=typeof o||"string"!=typeof e||i.has(e)||i.set(e,o),{token:e?i.get(e):void 0,error:a}};e.s(["useSessionTokenForFrame",0,r])},805374,e=>{"use strict";e.s(["PreviewBlockTitleActions",()=>v]);var t=e.i(509473),n=e.i(743124),r=e.i(836826),i=e.i(967472),o=e.i(417220),a=e.i(284546),s=e.i(297239),l=e.i(707827),c=e.i(92479),u=e.i(242759),d=e.i(235009),p=e.i(996174),h=e.i(127169),f=e.i(176248),m=e.i(519738),g=e.i(385671);function v(e){let{blockId:v,closed:x}=e,{actions:{setActiveTabIntent:y}}=(0,g.useChatLayout)(),{activeTab:b,previewMeta:w}=(0,a.useActiveTab)(),j=(0,s.useT)(),{isStreaming:C}=(0,c.useChatLoadingState)(),{bl:k}=(0,u.useFlags)(),{isLatest:S}=(0,m.useBlockVersionInfo)(v),{canShowPreviewTab:N}=(0,a.useActiveTab)(),E=!1===N,D=(0,n.useMemo)(()=>{let e=j("previewBlock.preview"),n=w;"error"===n.type&&(e=n.error),x||!C||k||(e=j("previewBlock.previewIsStreaming"));let r=(0,t.jsx)(i.Eye,{});return E&&(r=!x&&C?(0,t.jsx)(l.Spinner,{size:16}):(0,t.jsx)(o.EyeOff,{})),{icon:r,tooltip:e}},[k,x,E,C,j,w]),I=(0,n.useMemo)(()=>({icon:(0,t.jsx)(r.CodeWrap,{}),tooltip:j("previewBlock.code")(!S)}),[j,S]);function A(){y("preview"===b?"code":"preview")}return(0,h.useShortcut)(e=>{"c"===e.key&&e.shiftKey&&e.metaKey&&(e.preventDefault(),A())},[b,A]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.TabsToggle,{className:"hidden sm:flex",defaultValue:"preview",value:b,onValueChange:e=>{"code"===e?y(e):"preview"===e&&y(e)},children:[(0,t.jsx)(p.Tooltip,{content:D.tooltip,children:(0,t.jsx)(d.TabsToggleTrigger,{value:"preview",square:!0,disabled:E,children:D.icon})}),(0,t.jsx)(p.Tooltip,{content:I.tooltip,children:(0,t.jsx)(d.TabsToggleTrigger,{value:"code",square:!0,children:I.icon})})]}),(0,t.jsx)(f.Button,{size:"sm",variant:"secondary",className:"sm:hidden px-0 size-7",onClick:A,children:"preview"===b?I.icon:D.icon})]})}},881460,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 6.5V13.5C13.5 14.0523 13.0523 14.5 12.5 14.5H9V12.5H7V10.5H9V8.5H7V6.5H5V8.5H7V10.5H5V12.5H7V14.5H4.5C3.94772 14.5 3.5 14.0523 3.5 13.5V1.5H8V5V6.5H9.5H13.5ZM12.8787 5L9.5 1.62132V5H12.8787ZM8 0H9.58579C9.851 0 10.1054 0.105357 10.2929 0.292893L14.7071 4.70711C14.8946 4.89464 15 5.149 15 5.41421V13.5C15 14.8807 13.8807 16 12.5 16H4.5C3.11929 16 2 14.8807 2 13.5V1.5V0H3.5H8Z" fill="currentColor"/>');e.s(["FileZip",0,t])},160769,632082,604865,622661,868948,395542,e=>{"use strict";e.s(["BlockActionDownloadZip",()=>u],160769);var t=e.i(509473),n=e.i(881460),r=e.i(743124);function i(e,t){var n;return!!((null==(n=e.data)?void 0:n.source)&&e.data.lang&&t.includes(e.data.lang))}let o=["ts","typescript","typescriptreact","tsx","javascript","javascriptreact","jsx"];var a=e.i(301331),s=e.i(297239),l=e.i(556355);let c=[...o,"svelte","plaintext"];function u(o){let{blockId:u,lang:d,source:p}=o,h=i({data:{lang:d,source:p}},c),{projectBlocks:f,project:m}=(0,a.useBlockHistory)({blockId:u}),g=f.find(e=>e.id===u),v=(null==g?void 0:g.type)==="code-project",x=(0,r.useCallback)(async()=>{let t=[];if(v)window.open("/chat/api/download-zip?id=".concat(u),"_blank");else{t=f.map(e=>[{name:"".concat(m||"v0-project","/index.tsx"),input:e.source||""}]).flat();let n=(await e.A(950081)).downloadZip,r=await n(t).blob(),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download="".concat(m||"v0-project",".zip"),i.click(),i.remove()}},[u,v,m,f]),y=(0,s.useT)();return u&&h?(0,t.jsxs)(l.DropdownMenuItem,{onSelect:x,children:[(0,t.jsx)(n.FileZip,{}),y("blockActionDownloadZip.downloadZip")]}):null}var d=t,p=e.i(836826),h=r,f=e.i(209819),m=e.i(696871),g=e.i(667660),v=e.i(346970),x=e.i(32170);function y(e){let{expectUser:t}=(0,x.useUser)(),{activeScopeSlug:n}=(0,g.useActiveScope)(),{chatPrivacy:r}=(0,f.useChatPrivacy)(),i="public"===r||"unlisted"===r,{data:o,mutate:a,isValidating:s}=(0,v.default)(["/chat/b/[id]/token",e,i,n],async()=>{if(i||"@remote"===e||!n)return{token:null};let t=await fetch("/chat/b/".concat(e,"/token?scope=").concat(n));return await t.json()},{revalidateOnMount:!0,revalidateOnReconnect:!1,revalidateOnFocus:!1,refreshWhenHidden:!1,refreshInterval:m.CLI_TOKEN_EXPIRATION_MS});return{token:null==o?void 0:o.token,refreshToken:a,isRefreshing:s||t&&!n}}var b=e.i(390695),w=s,j=l;let C="latest";function k(e){let{blockId:t,lang:n,source:r}=e,{token:a,isRefreshing:s}=y(t),l=(0,w.useT)();return i({data:{lang:n,source:r}},o)?(0,d.jsxs)(j.DropdownMenuItem,{svgStyling:!1,className:"flex h-fit max-w-[270px] flex-col items-start gap-2 px-2 py-1.5 hover:bg-transparent! focus:bg-transparent focus-visible:bg-v0-gray-100",onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null==(t=document.getElementById("cli-command-button"))||t.focus())},children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(p.CodeWrap,{className:"text-v0-gray-900!"}),(0,d.jsx)("h3",{className:"text-sm",children:l("blockActionCli.addToCodebase")})]}),(0,d.jsx)("p",{className:"text-sm",children:l("blockActionCli.runInConsole")}),(0,d.jsx)(S,{id:"cli-command-button",blockId:t,isRefreshing:s,token:a})]}):null}function S(e){let{blockId:t,token:n,isRefreshing:r,id:i}=e,{command:o,displayedUrl:a}=N(t,n);return(0,d.jsx)(b.LinkCopy,{id:i,className:"font-mono",disabled:r,displayLink:'npx shadcn add "'.concat(a,'";'),link:o,showToast:!0,successMessage:"Command copied",errorMessage:"Failed to copy command",loadingMessage:"Copying command..."})}function N(e,t){let[n,r]=(0,h.useMemo)(()=>{let n=new URL("".concat(window.location.origin,"/chat/b/").concat(e)),r="".concat(n.protocol,"//").concat(n.hostname,"/chat/b/").concat(e);return t&&(n.searchParams.set("token",t),r="".concat(r,"?token=").concat(t.substring(0,32),"...")),[n,r]},[e,t]);return{command:"npx shadcn@".concat(C,' add "').concat(n.toString(),'"'),url:n,displayedUrl:r}}e.s(["BlockActionCli",()=>k],632082);var E=t;let D=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5H14.5V9.75501L1.5 9.755V2.5ZM1.5 11.005V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V11.005L1.5 11.005ZM0 1H1.5H14.5H16V2.5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1Z" fill="currentColor"/>');e.s(["Footer",0,D],604865);let I=e=>{let{dotColor:t,className:n}=e;return(0,E.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:[(0,E.jsx)("circle",{cx:"13.5",cy:"2.5",r:"2.5",className:t}),(0,E.jsx)("path",{d:"M9.79199 1C9.60438 1.46333 9.5 1.96939 9.5 2.5H1.5V9.75488H14.5V6.37402C15.0563 6.23084 15.565 5.96998 16 5.62109V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.20566 15 0.140824 14.0164 0.0126953 12.7559L0 12.5V1H9.79199ZM1.5 11.0049V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V11.0049H1.5Z",className:"fill-current"})]})};function A(e){let{status:t,isExpanded:n}=e;return!t||n?(0,E.jsx)(D,{className:"text-v0-gray-900"}):(0,E.jsx)(I,{className:"text-v0-gray-900",dotColor:"error"===t?"fill-red-600":"fill-blue-600"})}e.s(["default",()=>A],622661),e.s(["ErrorBanner",()=>G,"cleanBlockError",()=>W],868948);var T=t,M=e.i(176248),L=e.i(485370),P=e.i(600500),R=e.i(504066),_=e.i(449381),O=e.i(70165),F=e.i(236699),B=e.i(92479),V=r,z=e.i(304649),H=e.i(472166);e.i(168204);var U=e.i(225695);function G(e){let{error:t,onDismiss:n}=e,{submit:r}=(0,H.useV0Chat)(),{isAuthor:i}=(0,B.useChatPermissions)(),o=(0,_.useSetActiveBlockView)(),{isCopied:a,copyToClipboard:s}=(0,R.useCopyToClipboard)({timeout:2e3}),[l,c]=(0,V.useState)(!1);if(!t)return null;let u=()=>{s(t)},d=()=>{let e="The code returns the following error:\n```\n".concat(t,"\n```\nRevise the code to address the error.");(0,O.getIsMobile)()&&o(!1),r({type:"fix-with-v0",action:"fix-with-v0",content:(0,U.createMDXMessageContent)(e)})};return(0,T.jsx)("div",{className:"light absolute bottom-0 left-0 z-10 max-w-[400px] p-4",children:(0,T.jsxs)("div",{className:"text-v0-background-100 flex min-w-[300px] flex-col items-center gap-3 rounded-[8px] bg-v0-red-700 p-2 text-sm",role:"alert",children:[(0,T.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,T.jsxs)("div",{className:"flex w-full items-center justify-between font-semibold",children:[(0,T.jsx)("span",{children:"Error"})," ",(0,T.jsxs)(M.Button,{className:"text text-v0-background-100 m-[-4px] hover:text-v0-gray-200",onClick:n,size:"xs",variant:"ghost",children:[(0,T.jsx)(P.CrossSmall,{}),(0,T.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,T.jsx)("div",{className:"flex w-full",children:(0,T.jsx)("span",{className:(0,z.cn)("font-small text-v0-background-100 cursor-pointer overflow-hidden whitespace-pre-wrap font-mono text-[11px]",{"line-clamp-2":!l}),onClick:()=>c(!l),children:t})})]}),i&&(0,T.jsxs)("div",{className:"flex w-full justify-end gap-2 align-middle",children:[(0,T.jsx)(M.Button,{className:"border-v0-background-100 text-v0-background-100 bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:u,size:"sm",variant:"link",children:(0,T.jsx)(F.CopyCheck,{isCopied:a})}),(0,T.jsx)("div",{className:"border-v0-alpha-400 border-l"}),(0,T.jsxs)(M.Button,{className:"h-6 rounded-md px-1.5 py-0.5 text-xs",onClick:d,size:"sm",variant:"secondary",children:["Fix with ",(0,T.jsx)(L.LogoV0,{})]})]})]})})}function W(e,t){let n=isNaN(parseInt(e))?e:"An unexpected error occurred (".concat(e,")");return t?"".concat(n,"\n\n").concat(t):n.replace("FatalRendererError: ","")}var q=e.i(926224);let Z={LIGHTNING_WEB_COMPONENTS_UNSUPPORTED:"v0 does not currently support previewing LWC",LAYOUT_UNSUPPORTED:"v0 cannot currently preview Next.js layouts",SERVER_ACTION_UNSUPPORTED:"Server Actions cannot be previewed",RSC_UNSUPPORTED:"v0 cannot currently preview React Server Components",API_KEY_UNSUPPORTED:"v0 cannot currently preview components with API keys",REACT_NATIVE_UNSUPPORTED:"v0 cannot currently preview React Native components",ELECTRON_UNSUPPORTED:"v0 cannot currently preview Electron apps",EXPO_UNSUPPORTED:"v0 cannot currently preview Expo components",CLERK_UNSUPPORTED:"v0 does not currently support previewing Clerk",PRISMA_UNSUPPORTED:"v0 does not currently support previewing @prisma/client",BETTER_SQLITE_3_UNSUPPORTED:"v0 does not currently support previewing better-sqlite3",NEXT_INTL_UNSUPPORTED:"v0 does not currently support previewing next-intl",INERTIA_UNSUPPORTED:"v0 does not currently support previewing Inertia.js",EXPRESS_UNSUPPORTED:"v0 does not currently support previewing Express.js",FS_NOT_SUPPORTED:"v0 does not currently support previews with file system access",REMIX_UNSUPPORTED:"v0 does not currently support previewing Remix",REACT_ROUTER_UNSUPPORTED:"v0 does not currently support previewing react-router",MONGODB_UNSUPPORTED:"v0 does not currently support previewing MongoDB",ROUTE_HANDLER_UNSUPPORTED:"v0 cannot preview Route Handlers",REACT_HOOKS:"React hooks cannot be previewed",NON_JS_TS_FILE_UNSUPPORTED:"v0 can not preview this file",TEST_FILES_UNSUPPORTED:"v0 does not currently support previewing tests",NODE_APIS:"v0 does not currently support previewing Node.js APIs",CHAKRA_UNSUPPORTED:"v0 does not currently support previewing Chakra UI",REACT_PDF_UNSUPPORTED:"v0 does not currently support previewing @react-pdf/renderer",SWIPER_UNSUPPORTED:"v0 does not currently support previewing swiper/css",SENDGRID_UNSUPPORTED:"v0 does not currently support previewing @sendgrid/mail",GOOGLEAPIS_UNSUPPORTED:"v0 does not currently support previewing code using googleapis",ANGULAR_UNSUPPORTED:"v0 does not currently support previewing Angular",MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED:"v0 does not currently support previewing @mui/x-date-pickers/AdapterDateFns",PLAYWRIGHT_UNSUPPORTED:"v0 does not currently support previewing Playwright",INSTRUMENTATION_UNSUPPORTED:"v0 does not support previewing instrumentation.ts",LARAVEL_UNSUPPORTED:"v0 does not currently support previewing Laravel",MONGOOSE_UNSUPPORTED:"v0 does not currently support previewing Mongoose"},K={MATERIAL_UI_UTILS_WARNING:"v0 is currently investigating an issue with @mui/utils. We appreciate your patience."},$=[["@clerk/nextjs",Z.CLERK_UNSUPPORTED],["@clerk/clerk-react",Z.CLERK_UNSUPPORTED],["next-intl",Z.NEXT_INTL_UNSUPPORTED],["react-native",Z.REACT_NATIVE_UNSUPPORTED],["@prisma/client",Z.PRISMA_UNSUPPORTED],["better-sqlite3",Z.BETTER_SQLITE_3_UNSUPPORTED],["@sendgrid/mail",Z.SENDGRID_UNSUPPORTED],["@inertiajs/react",Z.INERTIA_UNSUPPORTED],["@chakra-ui/react",Z.CHAKRA_UNSUPPORTED],["@react-pdf/renderer",Z.REACT_PDF_UNSUPPORTED],["swiper/css",Z.SWIPER_UNSUPPORTED],["swiper/css/navigation",Z.SWIPER_UNSUPPORTED],["@playwright/test",Z.PLAYWRIGHT_UNSUPPORTED],["angular/router",Z.ANGULAR_UNSUPPORTED],["angular/core",Z.ANGULAR_UNSUPPORTED],["@angular/router",Z.ANGULAR_UNSUPPORTED],["@angular/core",Z.ANGULAR_UNSUPPORTED],["@angular/common",Z.ANGULAR_UNSUPPORTED],["@mui/x-date-pickers/AdapterDateFns",Z.MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED],["@react-navigation/native",Z.EXPO_UNSUPPORTED],["@react-navigation/stack",Z.EXPO_UNSUPPORTED],["expo-router",Z.EXPO_UNSUPPORTED],["express",Z.EXPRESS_UNSUPPORTED],["expo-file-system",Z.EXPO_UNSUPPORTED],["googleapis",Z.GOOGLEAPIS_UNSUPPORTED],["fs",Z.FS_NOT_SUPPORTED],["fs/promises",Z.FS_NOT_SUPPORTED],["bcrypt",Z.NODE_APIS],["@remix-run/node",Z.REMIX_UNSUPPORTED],["mongodb",Z.MONGODB_UNSUPPORTED],["react-router-dom",Z.REACT_ROUTER_UNSUPPORTED],["lwc",Z.LIGHTNING_WEB_COMPONENTS_UNSUPPORTED]],Y=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"];function J(e){return Y.some(t=>new RegExp("export (default )?async function ".concat(t,"\\(")).test(e)||new RegExp("export const ".concat(t," =")).test(e))}let Q=["tsx","html","jsx","js","ts"];function X(e,t){if(t){if(t.startsWith("use-"))return Z.REACT_HOOKS;if("instrumentation.ts"===t)return Z.INSTRUMENTATION_UNSUPPORTED;let e=t.split("."),n=e[e.length-1],r=e.length>2?e[e.length-2]:void 0;if(n&&!Q.some(e=>n===e))return Z.NON_JS_TS_FILE_UNSUPPORTED;if(r&&("test"===r||"spec"===r))return Z.TEST_FILES_UNSUPPORTED}for(let[t,n]of $)if(new RegExp("from ['\"]".concat(t.replace("/","/"),"['\"]")).test(e))return n;return/\<ClerkProvider/.test(e)?Z.CLERK_UNSUPPORTED:/export default function (Root)?Layout/.test(e)?Z.LAYOUT_UNSUPPORTED:/(^|\n)['"]use server['"]/.test(e)?Z.SERVER_ACTION_UNSUPPORTED:/export default async function/.test(e)?Z.RSC_UNSUPPORTED:/(API_KEY|_SECRET) =/.test(e)||/YOUR_API_KEY/.test(e)?Z.API_KEY_UNSUPPORTED:!J(e)||Z.ROUTE_HANDLER_UNSUPPORTED}let ee={NON_SUPPORTED_FILES:"v0 can not detect a page to preview",NO_EXPORTED_COMPONENT:"No exported component found"};function et(e){return"v0 does not currently support ".concat(e)}let en={"next-intl":Z.NEXT_INTL_UNSUPPORTED,"react-native":Z.REACT_NATIVE_UNSUPPORTED,electron:Z.ELECTRON_UNSUPPORTED,"@chakra-ui/react":Z.CHAKRA_UNSUPPORTED,"better-sqlite3":Z.BETTER_SQLITE_3_UNSUPPORTED,lwc:Z.LIGHTNING_WEB_COMPONENTS_UNSUPPORTED,"@playwright/test":Z.PLAYWRIGHT_UNSUPPORTED,"angular/router":Z.ANGULAR_UNSUPPORTED,"angular/core":Z.ANGULAR_UNSUPPORTED,"@angular/router":Z.ANGULAR_UNSUPPORTED,"@angular/core":Z.ANGULAR_UNSUPPORTED,"@angular/common":Z.ANGULAR_UNSUPPORTED,"@mui/x-date-pickers/AdapterDateFns":Z.MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED,"@react-navigation/native":Z.EXPO_UNSUPPORTED,"@react-navigation/stack":Z.EXPO_UNSUPPORTED,"expo-router":Z.EXPO_UNSUPPORTED,express:Z.EXPRESS_UNSUPPORTED,"expo-file-system":Z.EXPO_UNSUPPORTED,googleapis:Z.GOOGLEAPIS_UNSUPPORTED,"@remix-run/node":Z.REMIX_UNSUPPORTED,mongodb:Z.MONGODB_UNSUPPORTED,"react-router-dom":Z.REACT_ROUTER_UNSUPPORTED,"laravel-mix":Z.LARAVEL_UNSUPPORTED,mongoose:Z.MONGOOSE_UNSUPPORTED,"discord-player":et("discord-player"),"fluent-ffmpeg":et("fluent-ffmpeg"),hono:et("hono"),undici:et("undici"),http2:et("http2"),payload:et("payload"),"@nestjs/mongoose":et("@nestjs/mongoose"),"@nestjs/core":et("@nestjs/core"),"@ionic/angular":et("@ionic/angular"),"firebase-admin/database":et("firebase-admin/database"),"firebase-admin":et("firebase-admin"),"firebase-functions":et("firebase-functions"),"puppeteer-core":et("puppeteer-core"),"coffee-script":et("coffee-script"),msw:et("msw"),"msw/node":et("msw/node"),mysql2:et("mysql2"),"mysql2/promise":et("mysql2"),"@worldcoin/idkit":et("@worldcoin/idkit"),"discord.js":et("discord.js"),nativewind:et("nativewind"),commander:et("commander"),cosmiconfig:et("cosmiconfig"),"react-native-svg":et("react-native-svg"),"google-auth-library":et("google-auth-library"),nextra:et("nextra")},er=Object.keys(en).join("|"),ei=new RegExp("from ['\"](".concat(er,")['\"]")),eo=new RegExp("import ['\"](".concat(er,")['\"]")),ea=new RegExp("import\\(['\"](".concat(er,")['\"]\\)")),es=new RegExp("require\\(['\"](".concat(er,")['\"]\\)")),el={"@mui/utils":K.MATERIAL_UI_UTILS_WARNING},ec=Object.keys(el).join("|"),eu=new RegExp("from ['\"](".concat(ec,")['\"]")),ed=new RegExp("import ['\"](".concat(ec,")['\"]")),ep=new RegExp("import\\(['\"](".concat(ec,")['\"]\\)")),eh=new RegExp("require\\(['\"](".concat(ec,")['\"]\\)"));function ef(e){let t=/\.(ts|tsx|js|jsx|mjs|mts|cjs)$/i,n=e.filter(e=>!e.isDeleted);if(!n||0===n.length)return ee.NON_SUPPORTED_FILES;let r=!1;if(!n.some(e=>e.meta.file&&(e.meta.file.endsWith(".tsx")||e.meta.file.endsWith(".jsx")||e.meta.file.endsWith("route.ts")&&e.source.includes("GET"))))return ee.NON_SUPPORTED_FILES;let i=n.filter(e=>e.meta.file&&t.test(e.meta.file));if(!i.length)return ee.NON_SUPPORTED_FILES;for(let{source:e}of i){let t=e.split("\n").filter(e=>e.trim().startsWith("import")).join("\n"),n=t.match(ei)||t.match(eo)||e.match(ea)||e.match(es);if(n)return en[n[1]];let i=t.match(eu)||t.match(ed)||e.match(ep)||e.match(eh);if(i)return{warning:el[i[1]]};e.includes("export")&&(r=!0)}return!!r||ee.NO_EXPORTED_COMPONENT}function em(e,t){let n;return ef(n="code-project"===t.type?(0,q.parseMultiFileSource)({source:e,blockType:"code-project",blockId:"fake-block-id"}):[{source:e,meta:t,isDeleted:!1}])}e.s(["hasVisibleNextLiteContent",()=>em,"hasVisibleReactContent",()=>X],395542)},696825,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(743124);function i(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:o}=(0,n.default)(["block:forked-from",e]);return{getBlockForked:(0,r.useCallback)(e=>{var t;return null!=(t=null==i?void 0:i.get(e))?t:void 0},[i]),setBlockForked:(0,r.useCallback)((e,t)=>{o(new Map(null==i?void 0:i.set(e,t)))},[i,o])}}e.s(["useForkedBlocks",()=>i])},597932,988094,797173,117803,827511,230222,102246,889938,513529,e=>{"use strict";e.s(["default",()=>te],597932);var t=e.i(509473),n=e.i(696871),r=e.i(375462),i=e.i(176248),o=e.i(483962),a=e.i(265281),s=e.i(743124),l=e.i(638200),c=e.i(298450),u=e.i(763480),d=e.i(297239),p=e.i(987630);e.i(563948);var h=e.i(407562),f=e.i(230902),m=e.i(639056);e.s(["NextLiteBlockLogic",()=>e8,"consoleVisibilityAtom",()=>e6],513529);var g=e.i(868275),v=t,x=s,y=e.i(204575),b=e.i(476371),w=e.i(284546),j=e.i(845210),C=e.i(917806),k=e.i(930293),S=e.i(84079),N=e.i(472166),E=e.i(295224),D=e.i(92479),I=e.i(805374),A=e.i(556355),T=e.i(160769),M=e.i(632082),L=i,P=e.i(743839),R=e.i(923605),_=e.i(899488),O=e.i(622661),F=c,B=e.i(566274),V=e.i(562489),z=m,H=e.i(868948),U=e.i(53223),G=e.i(470259),W=e.i(395542),q=e.i(696825);e.s(["ErrorsBanner",()=>ec],988094);var Z=t,K=i,$=e.i(694640),Y=e.i(499030),J=e.i(485370),Q=e.i(600500),X=e.i(504066),ee=e.i(449381),et=e.i(70165),en=e.i(236699),er=s,ei=e.i(304649),eo=N;e.i(168204);var ea=e.i(225695),es=e.i(487581),el=m;function ec(e){let{errors:t,onDismiss:n,blockId:r,canWriteToChat:i}=e,{submit:o}=(0,eo.useV0Chat)(),a=(0,ee.useSetActiveBlockView)(),[s,l]=(0,er.useState)(!1),[c]=(0,el.useAtom)(es.previewBlockDisplayedErrorsVersion),u=(0,er.useMemo)(()=>t.filter(e=>e.blockId===(c||r)),[t,c,r]),{isCopied:d,copyToClipboard:p}=(0,X.useCopyToClipboard)({timeout:2e3}),[h,f]=(0,er.useState)(0),[m,g]=(0,er.useState)(!1),v=(0,er.useMemo)(()=>u.find(e=>e.isFatal),[u]),x=(0,er.useCallback)(()=>{h<=0?f(u.length-1):f(h-1)},[u,h]),y=(0,er.useCallback)(()=>{h>=u.length-1?f(0):f(h+1)},[u,h]);if(!u.length)return null;let b=()=>{var e;p(null!=(e=null==v?void 0:v.text)?e:u[h].text)},w=()=>{var e;l(!0),v||n();let t=v?v.currentURL:u[h].currentURL,r="The code returns the following error:\n```\n".concat(null!=(e=null==v?void 0:v.text)?e:u[h].text,"\n```\nRevise the code to address the error. ").concat(t?"\n\nI was previewing: ".concat(t):"");(0,et.getIsMobile)()&&a(!1),o({type:"fix-with-v0",action:"fix-with-v0",content:(0,ea.createMDXMessageContent)(r)})};return v?(0,Z.jsx)("div",{className:"absolute flex justify-center w-full h-full z-50",children:(0,Z.jsx)("div",{className:"text-v0-gray-1000 absolute z-10 flex min-h-full max-w-4xl flex-col items-center justify-center px-10",children:(0,Z.jsxs)("div",{className:"flex items-center",children:[(0,Z.jsx)("h1",{className:"text-nowrap text-2xl font-semibold",children:"Runtime Error"}),(0,Z.jsxs)("div",{className:"border-l-alpha-600 ml-5 flex flex-col gap-2 border-l pl-5",children:[(0,Z.jsx)("h2",{className:"text-sm",children:v.text}),i&&(0,Z.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,Z.jsx)(K.Button,{className:"border-v0-background-100 text-v0-gray-1000 bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:b,size:"sm",variant:"link",children:(0,Z.jsx)(en.CopyCheck,{isCopied:d})}),(0,Z.jsxs)(K.Button,{className:"h-6 rounded-md px-1.5 py-0.5 text-xs",onClick:w,size:"sm",variant:"secondary",disabled:s,children:["Fix with ",(0,Z.jsx)(J.LogoV0,{})]})]})]})]})})}):(0,Z.jsx)("div",{className:"light absolute bottom-0 left-0 z-10 max-w-[400px] p-4",children:(0,Z.jsxs)("div",{className:"text-v0-background-100 flex min-w-[300px] flex-col items-center gap-3 rounded-[8px] bg-v0-red-700 p-2 text-sm",role:"alert",children:[(0,Z.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,Z.jsxs)("div",{className:"flex w-full items-center justify-between font-semibold",children:[(0,Z.jsxs)("span",{children:[(0,Z.jsx)("span",{children:u[h].isServer?"Server":null})," Error"]})," ",(0,Z.jsxs)(K.Button,{className:"text text-v0-background-100 m-[-4px] hover:text-v0-gray-200",onClick:n,size:"xs",variant:"ghost",children:[(0,Z.jsx)(Q.CrossSmall,{}),(0,Z.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,Z.jsx)("div",{className:"flex w-full",children:(0,Z.jsx)("span",{className:(0,ei.cn)("font-small text-v0-background-100 cursor-pointer overflow-hidden whitespace-pre-wrap font-mono text-[11px]",{"line-clamp-2":!m}),onClick:()=>g(!m),children:u[h].text})})]}),(0,Z.jsxs)("div",{className:"flex w-full justify-between gap-2 align-middle",children:[(0,Z.jsx)("div",{className:"flex items-center gap-2 align-middle",children:u.length>1&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(K.Button,{className:"border-v0-background-100 text-v0-background-100 bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:x,variant:"link",children:(0,Z.jsx)($.ChevronLeft,{})}),(0,Z.jsx)(K.Button,{className:"border-v0-background-100 text-v0-background-100 bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:y,variant:"link",children:(0,Z.jsx)(Y.ChevronRight,{})}),(0,Z.jsxs)("span",{className:"text-xs",children:[h+1," of ",u.length]})]})}),(0,Z.jsx)("div",{className:"flex items-center gap-2 align-middle",children:i&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(K.Button,{className:"border-v0-background-100 text-v0-background-100 bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:b,size:"sm",variant:"link",children:(0,Z.jsx)(en.CopyCheck,{isCopied:d})}),(0,Z.jsx)("div",{className:"border-v0-alpha-400 border-l"}),(0,Z.jsxs)(K.Button,{className:"h-6 rounded-md px-1.5 py-0.5 text-xs",onClick:w,size:"sm",variant:"secondary",children:["Fix with ",(0,Z.jsx)(J.LogoV0,{})]})]})})]})]})})}var eu=e.i(209819),ed=e.i(242759);e.s(["useBlockFiles",()=>em],797173);var ep=e.i(926224),eh=s,ef=e.i(301331);function em(e){let{projectBlocks:t,projectBlockIndex:n}=(0,ef.useBlockHistory)({blockId:e.blockId,includeNonVersionedBlocks:!e.closed}),r=(0,eh.useMemo)(()=>{if("code-project"===e.meta.type)return(0,ep.parseMultiFileSource)({source:e.source,blockType:"code-project",blockId:e.blockId})},[e.source,e.blockId,e.meta.type]),i=(0,eh.useMemo)(()=>{if(e.closed||!r||!r.length)return;let t=r[r.length-1];if("file"in t.meta&&!t.isDeleted)return t.meta.file},[r,e.closed]);return{files:(0,eh.useMemo)(()=>{if(!r)return;let i=[],o=new Map,a=t.slice(0,n),s=new Map;for(let e of a){let t=(0,ep.parseMultiFileSource)({source:e.source,blockType:"code-project",blockId:e.id});i.push(...t)}i.push(...r);let l=new Set(e.closed?r.map(e=>e.meta.file):i.map(e=>e.meta.file));for(let e of i){let t=o.get(e.meta.file);t?o.set(e.meta.file,{...e,originalCode:t.source}):o.set(e.meta.file,{...e,originalCode:e.isQuickEdit&&!e.source?"// ".concat(e.isAttachmentQuickEdit?"Reading from":"Generating"," ").concat(e.meta.file):void 0}),s.has(e.meta.file)||s.set(e.meta.file,s.size)}return Array.from(o.values()).filter(e=>!e.isDeleted&&l.has(e.meta.file))},[n,t,r,e.closed]),loadingPath:i}}var eg=es,ev=e.i(577247);e.s(["useDesignModeEffects",()=>eP,"useDesignModeSelectedItem",()=>eR,"useDesignModeToggle",()=>e_],117803);var ex=s,ey=e.i(490293),eb=m,ew=S,ej=ee,eC=U,ek=eu,eS=et,eN=e.i(127169),eE=ev,eD=e.i(418929),eI=e.i(668887),eA=e.i(262553),eT=w,eM=e.i(142219);let eL=(0,ey.atom)(void 0);function eP(){let{atoms:e,actions:t}=(0,eI.useCurrentBlockDesignMode)(),n=(0,eb.useAtomValue)(e.designModeEnabled),r=(0,ej.useActiveBlockState)(),i=null==r?void 0:r.id,o=(0,eb.useAtomValue)(eL),{isReadOnlyMode:a}=(0,eA.useReadOnlyMode)(),s=(0,eS.useIsMobile)(),{selectedElement:l}=eR(),{activeTab:c}=(0,eT.useActiveTab)(),{setDesignModeEnabled:u}=e_();(0,ex.useEffect)(()=>{s&&u(!1)},[s,u]),(0,ex.useEffect)(()=>{a&&n&&u(!1)},[a,n,u]),(0,ex.useEffect)(()=>{i!==o&&u(!1),eM.store.set(eL,i)},[i,u,o]),(0,eN.useShortcut)(e=>{"KeyD"===e.code&&(e.altKey||e.metaKey)&&(e.preventDefault(),u(!n))},[u,n]);let d=(0,ex.useCallback)(()=>{if(l&&i)return void(0,ew.sendToIframeFromBlockId)(i,{type:"devtools_deselect"});t.setDesignModeEnabled(!1)},[l,i,t]);return(0,eE.useMessage)(e=>{let{data:t}=e;if(t&&"object"==typeof t&&t.__v0_remote__)switch(t.type){case"devtools_state":"boolean"==typeof t.enabled&&u(t.enabled);break;case"escape_key_event":var n,r;(null==(n=t.event)?void 0:n.type)==="keydown"&&(null==(r=t.event)?void 0:r.key)==="Escape"&&d()}},[t,l,u]),(0,ex.useEffect)(()=>{i&&(0,ew.sendToIframeFromBlockId)(i,{type:"devtools_enable",enabled:n})},[i,n]),(0,ex.useEffect)(()=>(n&&!l&&"preview"===c?document.body.classList.add("design-mode-enabled"):document.body.classList.remove("design-mode-enabled"),()=>document.body.classList.remove("design-mode-enabled")),[n,l,c]),(0,eN.useShortcut)(e=>{if("Escape"!==e.key||!n)return;let t=e.target;(!t||t.closest("#prompt-form")||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&"SELECT"!==t.tagName&&("BUTTON"!==t.tagName||"tab"===t.role)&&("DIV"!==t.tagName||"option"!==t.role)&&!t.isContentEditable)&&(e.preventDefault(),d())},[d]),{setDesignModeEnabled:u}}function eR(){let{atoms:e}=(0,eD.useCurrentChatPrompt)(),[t]=(0,eb.useAtom)(e.refinementElementSelected);return{selectedElement:t}}function e_(){let{atoms:e,actions:t}=(0,eI.useCurrentBlockDesignMode)(),n=(0,eb.useAtomValue)(e.designModeEnabled),{canWriteToChat:r}=(0,ek.useChatMetadata)(),i=(0,ej.useActiveBlockState)(),o=null==i?void 0:i.id,a=(0,ex.useCallback)(e=>{r&&(t.setDesignModeEnabled(e),o&&e&&(0,eC.track)("DesignModeToggled",{enabled:e}))},[r,t,o]),s=(0,ex.useCallback)(()=>{a(!n)},[a,n]),l=s;return{setDesignModeEnabled:a,toggleDesignMode:s,toggleSelectElement:l}}var eO=e.i(101486);e.s(["VMIframe",()=>e$,"VMPending",()=>eK],230222);var eF=t,eB=s,eV=t,ez=e.i(167343);function eH(e){let{chatId:t,stale:n}=e,{data:r}=(0,ez.default)("logs:".concat(t),(e,n)=>{let{next:r}=n,i=null;async function o(){try{let e=await fetch("/chat/api/vm/logs?cid=".concat(t));if(e.ok){let{logs:t}=await e.json();if(null===t)return void r(null,{rows:[]});let n=t.split("\n").map(e=>{try{let t=JSON.parse(e);return{timestamp:t[0],data:t[1]}}catch(t){return{timestamp:0,data:e}}});r(null,{rows:n})}else r(Error("Failed to fetch logs"))}catch(e){r(e)}i=setTimeout(o,500)}return o(),()=>{null!==i&&clearTimeout(i)}});if(!r||n)return(0,eV.jsx)("div",{className:"p-2 text-xs text-v0-gray-500",children:"Loading logs..."});let{rows:i}=r;return 0===i.length?(0,eV.jsx)("div",{className:"p-2 text-xs text-v0-gray-500",children:"Waiting for logs..."}):(0,eV.jsx)("div",{className:"absolute w-full h-full overflow-auto text-v0-gray-900 flex flex-col-reverse",children:(0,eV.jsx)("pre",{className:"p-2 w-full whitespace-break-spaces text-sm",style:{fontFamily:'GeistMono, "Apple Color Emoji", ui-monospace, SFMono-Regular, Roboto Mono, Menlo, Monaco, Liberation Mono, DejaVu Sans Mono, Courier New, monospace'},children:i.map((e,t)=>(0,eV.jsxs)("span",{className:"mb-1 flex gap-2",children:[(0,eV.jsx)("span",{className:"text-v0-gray-500 shrink-0",children:e.timestamp?new Date(e.timestamp).toLocaleTimeString():"    "}),(0,eV.jsx)("span",{className:"min-w-0",children:e.data.trim()})]},t))})})}e.s(["VMLogs",()=>eH],827511);var eU=eO,eG=ei,eW=e.i(210045),eq=C;function eZ(e){let{children:t}=e;return(0,eF.jsxs)("div",{className:"relative border-orange-500 border h-full w-full overflow-auto",children:[(0,eF.jsx)("div",{className:"absolute top-6 left-6 -translate-x-1/2 -translate-y-1/2 -rotate-45 bg-orange-500 text-v0-white text-xs font-medium px-4 select-none shadow z-50",children:"VM Mode"}),t]})}function eK(e){let{blockId:t,chatId:n}=e,{status:r}=(0,eU.useVMStatus)({enabled:!0,bid:t,cid:n}),[i,o]=(0,eB.useState)(!1);return"error"===r?(0,eF.jsxs)("div",{className:"text-v0-red-700 flex-1 flex flex-col items-center justify-center gap-1",children:[(0,eF.jsx)("span",{children:"The VM encountered an error. Please try to restart it."}),(0,eF.jsx)("a",{className:(0,eG.cn)("underline",i?"pointer-events-none":"cursor-pointer"),onClick:async()=>{o(!0);try{if(!(await fetch("/chat/api/vm/actions?cid=".concat(n,"&bid=").concat(t,"&type=recreate"),{method:"POST"})).ok)throw Error("Failed to recreate VM")}catch(e){console.error("Error recreating VM:",e)}finally{o(!1)}},children:i?"Restarting...":"Restart VM"})]}):"empty"===r?(0,eF.jsx)("div",{className:"text-v0-gray-900 flex-1 flex items-center justify-center",children:"Creating VM..."}):"initializing"===r?(0,eF.jsx)("div",{className:"text-v0-gray-900 flex-1 flex items-center justify-center",children:"Initializing..."}):r?(0,eF.jsxs)("div",{className:"text-v0-gray-900 flex-1 flex items-center justify-center",children:["VM Status: ",r]}):(0,eF.jsx)("div",{className:"text-v0-gray-900 flex-1 flex items-center justify-center",children:"Setting up VM..."})}function e$(e){let{noBadge:t=!1,status:n,blockId:r,chatId:i,isPreviewable:o,iframeProps:a}=e,{status:s,subdomain:l}=(0,eU.useVMStatus)({enabled:!0,bid:r,cid:i}),c=t?eB.Fragment:eZ;return"running"!==n&&"running"!==s?(0,eF.jsx)(c,{children:(0,eF.jsxs)("div",{className:"flex flex-col gap-2 h-full w-full items-center justify-center overflow-auto",children:[(0,eF.jsx)(eK,{blockId:r,chatId:i}),(0,eF.jsx)("div",{className:"relative border-t w-full h-1/3",children:(0,eF.jsx)(eH,{chatId:i,stale:!s&&("empty"===n||"stopped"===n)})})]})}):(0,eF.jsx)(c,{children:(0,eF.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,eF.jsx)("div",{className:"flex-1",children:o&&l?(0,eF.jsx)(eW.Iframe,{...a,origin:(0,eq.getVMIframeOrigin)(l,r)}):null}),(0,eF.jsx)("div",{className:"relative border-t w-full h-1/3",children:(0,eF.jsx)(eH,{chatId:i,stale:!1})})]})})}var eY=s;function eJ(e,t){(0,eY.useEffect)(()=>{if(!e)return;let n=null,r=r=>{if(!e||r.origin!==t)return;let i="chat:ls:".concat(e);if("localStorage-update"===r.data.type)window.localStorage.setItem(i,JSON.stringify(r.data.map));else if("localStorage-init-request"===r.data.type){var o;let e=window.localStorage.getItem(i),a=e?new Map(JSON.parse(e)):new Map;n=r.source,null==(o=r.source)||o.postMessage({type:"localStorage-store-update",map:Array.from(a.entries())},{targetOrigin:t})}},i=r=>{if(!e||r.key!=="chat:ls:".concat(e))return;let i=window.localStorage.getItem(r.key),o=i?new Map(JSON.parse(i)):new Map;null==n||n.postMessage({type:"localStorage-store-update",map:Array.from(o.entries())},{targetOrigin:t})};return window.addEventListener("message",r),window.addEventListener("storage",i),()=>{window.removeEventListener("message",r),window.removeEventListener("storage",i)}},[e,t])}var eQ=e.i(35590),eX=e.i(358847),e0=(0,eX.createServerReference)("40bc0c164eaf72f3ff9a933c4363557ebe476f6ead",eX.callServer,void 0,eX.findSourceMapURL,"updateAgentRuntimeErrors");e.s(["updateAgentRuntimeErrors",()=>e0],102246);let e1=e=>({type:"refinement-element",...e}),e2=e=>{if(!e.parts)return null;let t=[];for(let n of e.parts)"refinement-element"===n.type&&n.componentName&&t.push(n.componentName);return t.length>0?t:null},e5=e=>{var t;let{event:n,file:r}=e,i=r.source.split("\n"),o=n.data.line,a=n.data.column;for(;i[o-1].length<a;)a-=i[o-1].length,o++;for(;a-1<i[o-1].length&&/\s/.test(i[o-1][a-1]);)a++;let s=i.slice(Math.max(0,o-4),o-1),l=i[o-1],c=i.slice(o,o+3),u=null==(t=l.substring(a).match(/^[\w.]+/))?void 0:t[0];return{sourceContext:u?(o>4?"...\n":"")+s.join("\n")+"\n"+l+"\n"+(" ".repeat(a)+"^".repeat(u.length))+"\n"+c.join("\n")+"\n"+(o+3<i.length?"...\n":""):l,componentName:u}};e.s(["createRefinementPart",0,e1,"getRefinementElementLabelsFromContent",0,e2,"structureRefinementData",0,e5],889938);var e4=e.i(768619),e3=e.i(979865),e9=eM,e7=e.i(32170);let e6=(0,V.atomWithStorage)("console-visible",!1);class e8{static Render(e){let{isPublished:t}=(0,j.usePublishedPage)(),{activeForkKey:n}=(0,D.useChatMessages)(),{isStreaming:r,chatId:i}=(0,D.useChatLoadingState)(),{canWriteToChat:o,project:a,ownerId:s}=(0,eu.useChatMetadata)(),{user:l}=(0,e7.useUser)(),[c,u]=(0,z.useAtom)(eg.previewBlockErrorsAtom),[d]=(0,z.useAtom)(e6),{token:p,error:h}=(0,k.useSessionTokenForFrame)(i),{isBlockPreviewable:f,canShowPreviewTab:m}=(0,w.useActiveTab)(),g=(0,x.useRef)(f),{getBlockForked:I}=(0,q.useForkedBlocks)(),{vr:A,age:T}=(0,ed.useFlags)(),M=(0,e3.useSearchParams)(),L=(0,x.useRef)(M.get("path"));(0,x.useEffect)(()=>{u([])},[e.blockId,u]);let{files:P,loadingPath:R}=em({blockId:e.blockId,closed:e.closed,source:e.source,meta:e.meta}),_=(0,E.useLatest)(P),O=(0,y.getBlockIframeId)(e.blockId),{submit:F}=(0,N.useV0Chat)(),{setDesignModeEnabled:B}=e_();(0,ev.useMessage)(t=>{if(t.data&&"object"==typeof t.data&&t.data.__v0_remote__){if("generation_logs"===t.data.type){var i;let n=(t.data.logs||[]).join("\n\n"),o=e9.store.get(eg.previewBlockCollectedErrorsVersion),a=e9.store.get(eg.previewBlockDisplayedErrorsVersion)||e.blockId,s=(null==(i=e9.store.get(eg.previewBlockPreloadingSuccessCallback))?void 0:i.callback)||null;if(o&&o!==a&&s&&!n){null==s||s(),e9.store.set(eg.previewBlockPreloadingSuccessCallback,null);return}T&&r&&e0({blockId:t.data.id||e.blockId,fullErrorMessage:n}).catch(n=>{(0,U.track)("FailedToUpdateBlockRuntimeErrors",{blockId:t.data.id||e.blockId,error:n instanceof Error?n.message:String(n)})})}if("error"===t.data.type){let n=(0,H.cleanBlockError)(t.data.error,t.data.stack);u(r=>r.some(e=>e.text===n)||!g.current?r:((0,U.track)(t.data.isFatal?"V0BlockPreviewError":"V0BlockPreviewSoftError",{messageId:e.messageId,blockId:e.blockId,from:void 0!==e.meta.isQuickEdit?"quick-edit":void 0,forkedFromBlockId:I(e.blockId),resultId:e.resultId||""},{errorMsg:n,errorCode:G.V0_BLOCK_PREVIEW_ERROR}),r.concat({isFatal:t.data.isFatal,isServer:t.data.isServer,blockId:e9.store.get(eg.previewBlockCollectedErrorsVersion)||e.blockId,text:n,currentURL:t.data.currentURL})))}if("frame_onload"===t.data.type){let e=document.getElementById(O);e&&(0,e4.markIframeAsLoaded)(e),u([])}if(("refine"===t.data.type||"add-refinement-element"===t.data.type)&&(B(!1),_.current)){let r=_.current.find(e=>e.meta.file===t.data.file);if(!r)return void alert("File not found");let{componentName:i,sourceContext:o}=e5({event:t,file:r});if("refine"===t.data.type){let a={version:1,parts:[e1({file:r.meta.file,componentName:i||"",sourceContext:o,line:t.data.line,column:t.data.column}),{type:"mdx",content:t.data.prompt}]},s=(null==n?void 0:n.indexOf(e.messageId))||-1;n&&s>0&&s<n.length-1?F({action:"edit",content:a,userMessageId:n[s+1],type:"refinement"}):F({action:"new",content:a,attachments:[],type:"refinement"})}}}},[O,F,n,u,e.messageId,_,i,e.blockId,r,g,e.meta.isQuickEdit,I,e.resultId,B]);let V=null,{status:W}=(0,eO.useVMPreviewSubdomain)({enabled:!!(A&&i),bid:e.blockId,cid:i}),Z=(0,C.getLiteIframeOrigin)(e.blockId,e.title);eJ(i,Z);let{theme:K}=(0,eQ.useTheme)(),$=(0,x.useCallback)(()=>{let e=document.getElementById(O);if(!(null==e?void 0:e.contentWindow))return;let t=document.documentElement.classList.contains("dark");e.contentWindow.postMessage({type:"theme_change",isDark:t},"*")},[O]);if((0,x.useEffect)(()=>{$()},[K,$]),e.blockId&&f&&(p||h)){var Y,J,Q,X;let n=new URLSearchParams;t&&n.set("mql","true"),h||!p?n.set("__v0",""):p&&(l&&(l.teamId&&l.teamId===s||s===l.id)&&n.set("__v0_token",p),a&&n.set("__v0_vercel_project_id",a.vercelProjectId||"")),e.isV3&&n.set("isV3","true"),V=A&&i?(0,v.jsx)(e$,{blockId:e.blockId,chatId:i,status:W,isPreviewable:f,iframeProps:{iframeId:O,isPublished:t,src:(null==(Y=L.current)?void 0:Y.startsWith("/"))?L.current:"/".concat(null!=(J=L.current)?J:"")}}):(0,v.jsx)(e4.CachedNextLiteIframe,{chatId:i,blockId:e.blockId,iframeId:O,isPublished:t,origin:Z,src:"".concat((null==(Q=L.current)?void 0:Q.startsWith("/"))?L.current:"/".concat(null!=(X=L.current)?X:""),"?").concat(n.toString()),onLoad:$}),"code-project"===e.meta.type&&(V=(0,v.jsx)("div",{className:"size-full","data-slot":"browser-content",children:V}))}return(0,v.jsxs)(b.PreviewBlock,{initialFileTreeSize:e.initialFileTreeSize,...e,resultId:void 0,loadingPath:R,files:P,blockType:"code-project"===e.meta.type?"code-project":"v0",language:"typescriptreact",allowRefresh:"code-project"!==e.meta.type,allowFullScreen:"code-project"!==e.meta.type,isV3:e.isV3,initialConsoleSize:e.initialConsoleSize,initialConsoleExpanded:e.initialConsoleExpanded,hideConsole:!d,browserControls:"code-project"===e.meta.type?(0,v.jsx)(S.BrowserFrame,{blockId:e.blockId,iframeId:O}):void 0,children:[c.length?(0,v.jsx)(ec,{errors:c,blockId:e.blockId,onDismiss:()=>{u([])},canWriteToChat:o}):null,V]})}}function te(e){let{children:g,blockId:v,consoleEvents:x=[],clearLogs:y,canWriteToChat:b,activeFilePath:w,setActiveFilePath:j,initialSize:C,initialExpanded:k,onShouldExpand:S,hide:N}=e,[E,D]=(0,s.useState)(""),{blockStatus:I,clearEvents:A}=(0,c.useNewConsoleEvents)(v);I[v];let[,T]=(0,m.useAtom)(e6),M=(0,s.useRef)(null),L=(0,s.useMemo)(()=>{if(!E)return x;let e=E.toLowerCase();return x.filter(t=>"console"===t.type?t.message.toLowerCase().includes(e):t.content.toLowerCase().includes(e))},[x,E]),P=(0,s.useCallback)(e=>{e.stopPropagation(),navigator.clipboard.writeText(L.map(e=>"console"===e.type?"".concat((0,f.format)(new Date(e.timestamp),"HH:mm:ss.SSS"),"Z	").concat(e.isServer?"[SERVER]	":"").concat(e.message):null).filter(e=>!!e).join("\n")),h.toast.default("Copied to clipboard")},[L]),R=(0,d.useT)();return(0,t.jsxs)("div",{className:"relative flex size-full min-h-0 flex-1 flex-col",children:[g,N?null:(0,t.jsx)(o.Resizable,{animated:!1,axis:"y",cookieName:n.CONSOLE_RESIZE_COOKIE,dotsHandle:!1,initialSize:null!=C?C:n.INITIAL_CONSOLE_SIZE,minSizePx:n.CONSOLE_MIN_SIZE_PX,minNegativeSpace:144,show:!0,side:"start",className:"z-20",ref:M,children:(0,t.jsxs)("div",{className:"bg-v0-background-200 group/log-panel-header relative flex size-full flex-col border-t",children:[(0,t.jsxs)("div",{className:"flex h-9 w-full shrink-0 items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-1.5 px-3 text-sm text-v0-gray-1000",children:(0,t.jsx)("span",{children:R("logPanel.console")})}),(0,t.jsxs)("div",{className:"flex gap-0.5 pr-2",children:[(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(u.Input,{placeholder:"Filter...",size:"xs",className:"w-44 rounded-md px-2 text-[13px] mr-2",value:E,onChange:e=>D(e.target.value),onClick:e=>e.stopPropagation()}),(0,t.jsx)(i.Button,{variant:"ghost",size:"xs",className:"text-v0-gray-900",tooltip:{side:"bottom",content:"Copy logs"},onClick:P,disabled:0===x.length,children:(0,t.jsx)(p.AnimatedCopy,{})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"xs",className:"text-v0-gray-900",tooltip:{side:"bottom",content:"Clear logs"},onClick:e=>{e.stopPropagation(),null==y||y()},disabled:0===x.length,children:(0,t.jsx)(l.AnimatedTrash,{})})]}),(0,t.jsx)(i.Button,{tooltip:{side:"bottom",content:"Hide console"},variant:"ghost",className:"text-v0-gray-900",size:"xs",onClick:e=>{e.stopPropagation(),T(!1)},children:(0,t.jsx)(r.Cross,{})})]})]}),(0,t.jsx)(a.ConsoleViewer,{hideHeader:!0,consoleEvents:L,clearLogs:y||(()=>{}),canWriteToChat:b,className:"bg-transparent",activeFilePath:w,setActiveFilePath:j})]})})]})}(0,g._)(e8,"getIsPreviewable",e=>{let{closed:t,source:n,meta:r}=e;if(!t)return!1;let i=(0,W.hasVisibleNextLiteContent)(n,r);return"string"==typeof i?{error:i}:i}),(0,g._)(e8,"Actions",x.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,v.jsx)(I.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,g._)(e8,"BrowserControls",x.default.memo(e=>{let{blockId:t}=e;return(0,v.jsx)(S.BrowserFrame,{blockId:t,iframeId:(0,y.getBlockIframeId)(t)})})),(0,g._)(e8,"ConsoleToggle",x.default.memo(e=>{let{blockId:t}=e,[n,r]=(0,z.useAtom)(e6),{blockStatus:i,clearEvents:o}=(0,F.useNewConsoleEvents)(t),a=i[t],s=()=>{let e=!n;r(e),e&&o()};return(0,v.jsx)(_.CodeBlockButton,{onClick:s,tooltip:{side:"bottom",content:n?"Hide Console":"Show Console"},className:"size-7 rounded-md text-v0-gray-900 hidden sm:flex",children:(0,v.jsx)(O.default,{status:a,isExpanded:n})})})),(0,g._)(e8,"MoreMenu",x.default.memo(e=>{let{blockId:t,blockLanguage:n,blockSource:r}=e,{fullScreenResult:i,setFullscreenResult:o}=(0,B.useFullscreenResult)(),[a,s]=(0,z.useAtom)(e6),{blockStatus:l,clearEvents:c}=(0,F.useNewConsoleEvents)(t),u=l[t],{activeTab:d}=(0,w.useActiveTab)(),p=()=>{let e=!a;s(e),e&&c()};return(0,v.jsxs)(A.DropdownMenu,{children:[(0,v.jsx)(A.DropdownMenuTrigger,{asChild:!0,children:(0,v.jsx)(L.Button,{variant:"ghost",className:"size-7 rounded-md text-v0-gray-900",size:"sm",children:(0,v.jsx)(P.MoreHorizontal,{})})}),(0,v.jsxs)(A.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:["code"!==d&&(0,v.jsxs)(A.DropdownMenuGroup,{children:[(0,v.jsxs)(A.DropdownMenuItem,{onSelect:()=>o(!i,t),children:[(0,v.jsx)(R.Fullscreen,{}),(0,v.jsx)("span",{children:i?"Exit fullscreen":"Fullscreen"})]}),(0,v.jsxs)(A.DropdownMenuItem,{className:"sm:hidden",onSelect:()=>{p()},children:[(0,v.jsx)(O.default,{status:u,isExpanded:a}),(0,v.jsx)("span",{children:a?"Hide Console":"Show Console"})]})]}),(0,v.jsx)(A.DropdownMenuSeparator,{}),(0,v.jsxs)(A.DropdownMenuGroup,{children:[(0,v.jsx)(M.BlockActionCli,{blockId:t||"",lang:n,source:r}),(0,v.jsx)(T.BlockActionDownloadZip,{blockId:t,lang:n,source:r})]})]})]})}))},43116,e=>{"use strict";e.s(["VSCodeEditorWrapper",()=>v,"loadVSCodeEditor",()=>m]);var t=e.i(509473),n=e.i(743124),r=e.i(651219),i=e.i(811140),o=e.i(313595),a=e.i(894906),s=e.i(44756),l=e.i(934994),c=e.i(926224),u=e.i(295224),d=e.i(92479),p=e.i(222199);e.i(563948);var h=e.i(407562),f=e.i(262553);function m(){return e.A(3178).then(async e=>(await e.init(),e.VSCodeEditor))}let g=(0,r.default)(m,{ssr:!1});function v(e){let{blockId:r,source:m,files:v,activeFilePath:x,editValueMap:y,onEdit:b,reloadIframe:w}=e,j=(0,n.useRef)(void 0),{isReadOnlyMode:C}=(0,f.useReadOnlyMode)(),k=(0,u.useLatest)((0,a.useUpdateBlockData)(r)),S=(0,n.useRef)(m),N=(0,n.useRef)(r),{isStreaming:E}=(0,d.useChatLoadingState)(),[D,I]=(0,n.useState)(()=>{let e=Promise.resolve();return t=>{e=e.then(()=>t((0,c.parseMultiFileSource)({source:S.current,blockType:"code-project",blockId:N.current})))}}),A=(0,n.useMemo)(()=>({onRename:(e,t)=>{C||D(async n=>{await (0,i.renameFile)(n,{fileName:e},t,k.current,!0),w()})},onDeleteFolder(e){C||D(async t=>{await (0,l.deleteFolder)(t,{folderName:e},k.current),w()})},onDeleteFile(e){C||D(async t=>{await (0,s.deleteFile)(t,{fileName:e},k.current),w()})},onNewFolder:e=>{},onNewFile:(e,t,n)=>{C||D(async r=>{r.some(n=>n.meta.file==="".concat(e,"/").concat(t))||(await (0,o.createFile)(N.current,r,{folderName:e},t,n,k.current),w())})},onUpload:e=>{C||(S.current=m,N.current=r,(0,p.createFileInput)({multiple:!0,onFilesSelected:async t=>{try{let n=(0,c.parseMultiFileSource)({source:S.current,blockType:"code-project",blockId:N.current}),r=await (0,p.uploadFilesToFileTree)({files:t,targetDirectory:e,blockId:N.current,existingFiles:n});if(r.success&&r.files){let t=[...n,...r.files];await k.current(t),I(()=>{let e=Promise.resolve();return n=>{e=e.then(()=>n(t))}}),w(),h.toast.success("Uploaded ".concat(r.files.length," file(s) to ").concat(e||"root"))}else h.toast.error(r.error||"Failed to upload files")}catch(e){h.toast.error("An unexpected error occurred while uploading files"),console.error("File upload error:",e)}}}).click())}}),[C,D,w,m,r,k]);return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(g,{onEdit:b,diffOriginalCode:null,disabled:!1,readOnly:E||C,files:v,editValueMap:y,activeFilePath:x,ref:j,blockId:r,eventCallbacks:A})})}},988118,e=>{"use strict";let t={current:null};e.s(["designModeInlineEditRef",0,t])},90177,e=>{"use strict";var t=e.i(509473),n=e.i(355030);function r(){return(0,t.jsx)("div",{className:"bg-v0-background-200 flex aspect-square w-full items-center justify-center rounded-xl",children:(0,t.jsxs)("div",{className:"relative flex size-12 items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-v0-gray-200"}),(0,t.jsx)("div",{className:"animate-spin-slow absolute inset-0 rounded-full border-2 border-transparent border-t-gray-500"}),(0,t.jsx)("div",{className:"text-3xl text-v0-gray-500",children:(0,t.jsx)(n.Image,{})})]})})}e.s(["LoadingImage",()=>r])},554912,e=>{"use strict";e.s(["useConsole",()=>d,"useUploadActiveBlockLogs",()=>u],554912);var t=e.i(743124),n=e.i(346970),r=e.i(298450),i=e.i(449381),o=e.i(53223),a=e.i(242759),s=e.i(358847),l=(0,s.createServerReference)("40a53efcfc185ca70923aa5649f24f3862c05422aa",s.callServer,void 0,s.findSourceMapURL,"saveAgentLogs");function c(){let e=(0,i.useActiveBlockState)(),{consoleEvents:n}=d((null==e?void 0:e.id)||"");return{logs:(0,t.useMemo)(()=>{if(!e||0===n.length)return null;let t=n.filter(e=>"console"===e.type).filter(e=>e.message.startsWith("[v0]")||"error"===e.method).map(e=>{let t=e.message.split(/\r?\n/).map(e=>e.length>500?e.slice(0,500)+"...":e);return"---\n".concat(e.isServer?"[SERVER]":"[CLIENT]","\n---\n").concat(t.join("\n"))}).join("\n");return t.length<1e4?t:t.slice(-1e4)+"\n\n[...truncated to last 10K characters...]"},[n,e]),activeBlockId:(null==e?void 0:e.id)||""}}function u(){let{logs:e,activeBlockId:n}=c(),{sal:r}=(0,a.useFlags)();return{uploadActiveBlockLogs:(0,t.useCallback)(async t=>{let{chatId:i,userMessageId:a}=t;if(e&&r)try{await l({chatId:i,userMessageId:a,logs:e}),(0,o.track)("DebugLogsAttachment",{blockId:n})}catch(e){(0,o.track)("DebugLogsAttachmentError",{blockId:n})}},[e,n,r])}}function d(e){let{data:i=[],mutate:o}=(0,n.default)(["consoleEvents",e],{fallbackData:[]}),{data:a,mutate:s}=(0,n.default)(["expandConsole",e],{fallbackData:null}),{flagNewEvent:l}=(0,r.useNewConsoleEvents)(e),c=(0,t.useCallback)(e=>{o(t=>[...t||[],e]),"message"in e&&e.message.includes("[Fast Refresh]")||("error"===e.method||"stderr"===e.method?l("error"):l("log"))},[o,l]);return{consoleEvents:i,appendConsoleEvent:c,appendCodeOutputEvents:(0,t.useCallback)(e=>{if(o(t=>[...t||[],...e]),e.some(e=>"stderr"===e.method))return void l("error");l("log")},[o,l]),clearConsoleEvents:(0,t.useCallback)(()=>{o([])},[o]),expandConsole:a,setExpandConsole:s}}},487230,e=>{e.v({blur:"block-view-loader-module__aUjaiG__blur",content:"block-view-loader-module__aUjaiG__content"})},427619,(e,t,n)=>{t.exports=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},615529,(e,t,n)=>{var r=e.r(427619),i=e.r(394370);t.exports=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=i(n))==n?n:0),void 0!==t&&(t=(t=i(t))==t?t:0),r(i(e),t,n)}},480450,e=>{"use strict";e.s(["BlockViewLoader",()=>x]);var t=e.i(509473),n=e.i(707827),r=e.i(770858),i=e.i(745587),o=e.i(743124),a=e.i(797173),s=e.i(487230),l=e.i(403055),c=e.i(365290),u=e.i(615529),d=e.i(360174),p=e.i(675120),h=e.i(762585),f=e.i(529693);let m=200,g=[...Array(200)].map(()=>"".concat(Math.floor(80*Math.random())+20,"%"));function v(){return(0,t.jsxs)("div",{className:"flex w-full",children:[(0,t.jsx)("div",{className:"flex flex-col gap-2 px-[11px]",children:[...Array(m)].map((e,n)=>(0,t.jsx)(h.Skeleton,{className:"size-4"},n))}),(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-2",children:[...Array(m)].map((e,n)=>(0,t.jsx)(h.Skeleton,{className:"h-4",style:{width:g[n]}},n))})]})}function x(e){let{blockId:c,closed:u,source:h,meta:m,switchToCode:g}=e,{files:x,loadingPath:b}=(0,a.useBlockFiles)({blockId:c,closed:u,source:h,meta:m}),{activeFilePath:w}=(0,i.useActiveFile)({blockId:c,files:x,loadingPath:b}),j=(null==x?void 0:x.length)?x.find(e=>e.meta.file===w)||x[0]:void 0,[C,k]=(0,o.useState)((null==j?void 0:j.source)||""),S=(0,o.useRef)((0,d.default)(e=>{k(e)},500)),N=e=>{if(!e)return"";let t=32;return e.length>t?"...".concat(e.slice(-(t-3))):e},E="Generating".concat((null==j?void 0:j.meta.file)?" ".concat(N(j.meta.file)):"");(0,o.useEffect)(()=>{S.current((null==j?void 0:j.source)||"")},[null==j?void 0:j.source]);let D=j&&C.split("\n").length>=9,I=(0,o.useMemo)(()=>C?C.split("\n").map(e=>{var t;let n=Math.floor(((null==(t=e.match(/^\s*/))?void 0:t[0])||"").length/2);return e.slice(n).replaceAll("<CHANGE>","")}).filter(e=>!e.includes("... existing code ...")).join("\n"):"",[C]);return(0,t.jsx)(f.motion.div,{className:"relative m-auto",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},children:(0,t.jsx)(p.TransitionNode,{renderKey:E,duration:.4,exit:{scale:.98},delay:.1,enter:{scale:1.02},children:(0,t.jsxs)("button",{className:"relative flex flex-1 flex-col items-start justify-center gap-3 overflow-hidden",onClick:g,children:[(0,t.jsxs)("div",{className:"text-heading-16 flex h-5 items-center gap-2 px-[11px]",children:[(0,t.jsx)(n.Spinner,{size:16}),E]}),(0,t.jsx)(p.TransitionNode,{renderKey:D?"showSource":"hideSource",duration:.4,exit:{scale:.98},delay:.1,enter:{scale:1.02},children:(0,t.jsx)("div",{className:(0,l.cn)(s.default.content,"relative h-[200px] w-[400px] overflow-hidden"),children:(0,t.jsx)(y,{height:200,children:D?(0,t.jsx)(r.MemorizedHighlighter,{isTabbed:!1,minLineNumberChars:3,language:j.lang,showLineNumbers:!0,value:I,wrapLongLines:!0,style:{padding:0}}):(0,t.jsx)(v,{})},"".concat(D,"-").concat(null==j?void 0:j.meta.file))})})]})})})}function y(e){let{children:n,baseScrollIncrementPx:r=20,height:i=0}=e,a=(0,o.useRef)(null),[s,l]=(0,o.useState)(0);return(0,o.useEffect)(()=>{let e=setInterval(()=>{var e;let t=null==(e=a.current)?void 0:e.getBoundingClientRect().height;t&&l(e=>{let n=t-i,o=(Math.floor((n-e)/2/r)+1)*r;return(0,u.default)(e+o,0,n)})},700);return()=>clearInterval(e)},[r,i]),(0,t.jsx)("div",{ref:a,className:"pointer-events-none relative flex-1 overflow-auto text-sm",style:{transform:"translateY(-".concat(s,"px)"),...(0,c.transitionStyles)(["transform"],{duration:600})},children:n})}},944542,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6 1V1.75V5C6 5.55229 5.55228 6 5 6H1.75H1V4.5H1.75H4.5V1.75V1H6ZM14.25 6H15V4.5H14.25H11.5V1.75V1H10V1.75V5C10 5.55228 10.4477 6 11 6H14.25ZM10 14.25V15H11.5V14.25V11.5H14.29H15.04V10H14.29H11C10.4477 10 10 10.4477 10 11V14.25ZM1.75 10H1V11.5H1.75H4.5V14.25V15H6V14.25V11C6 10.4477 5.55229 10 5 10H1.75Z" fill="currentColor"/>');e.s(["FullscreenClose",0,t])},931194,e=>{"use strict";function t(e,t){return{...e,...t}}function n(e,n){return{...n,...e,common:t(n.common,e.common),light:t(n.light,e.light),dark:t(n.dark,e.dark)}}e.s(["mergePartialShadcnStylesWithDefaults",()=>n])},471964,e=>{"use strict";let t={common:{radius:"0.5rem"},light:{background:"oklch(1 0 0)",foreground:"oklch(0.1450 0 0)",card:"oklch(1 0 0)","card-foreground":"oklch(0.1450 0 0)",popover:"oklch(1 0 0)","popover-foreground":"oklch(0.1450 0 0)",primary:"oklch(0.2050 0 0)","primary-foreground":"oklch(0.9850 0 0)",secondary:"oklch(0.9700 0 0)","secondary-foreground":"oklch(0.2050 0 0)",muted:"oklch(0.9700 0 0)","muted-foreground":"oklch(0.5560 0 0)",accent:"oklch(0.9700 0 0)","accent-foreground":"oklch(0.2050 0 0)",destructive:"oklch(0.5770 0.2450 27.3250)","destructive-foreground":"oklch(1 0 0)",border:"oklch(0.9220 0 0)",input:"oklch(0.9220 0 0)",ring:"oklch(0.7080 0 0)","chart-1":"oklch(0.8100 0.1000 252)","chart-2":"oklch(0.6200 0.1900 260)","chart-3":"oklch(0.5500 0.2200 263)","chart-4":"oklch(0.4900 0.2200 264)","chart-5":"oklch(0.4200 0.1800 266)",sidebar:"oklch(0.9850 0 0)","sidebar-foreground":"oklch(0.1450 0 0)","sidebar-primary":"oklch(0.2050 0 0)","sidebar-primary-foreground":"oklch(0.9850 0 0)","sidebar-accent":"oklch(0.9700 0 0)","sidebar-accent-foreground":"oklch(0.2050 0 0)","sidebar-border":"oklch(0.9220 0 0)","sidebar-ring":"oklch(0.7080 0 0)"},dark:{background:"oklch(0.1450 0 0)",foreground:"oklch(0.9850 0 0)",card:"oklch(0.2050 0 0)","card-foreground":"oklch(0.9850 0 0)",popover:"oklch(0.2690 0 0)","popover-foreground":"oklch(0.9850 0 0)",primary:"oklch(0.9220 0 0)","primary-foreground":"oklch(0.2050 0 0)",secondary:"oklch(0.2690 0 0)","secondary-foreground":"oklch(0.9850 0 0)",muted:"oklch(0.2690 0 0)","muted-foreground":"oklch(0.7080 0 0)",accent:"oklch(0.3710 0 0)","accent-foreground":"oklch(0.9850 0 0)",destructive:"oklch(0.7040 0.1910 22.2160)","destructive-foreground":"oklch(0.9850 0 0)",border:"oklch(0.2750 0 0)",input:"oklch(0.3250 0 0)",ring:"oklch(0.5560 0 0)","chart-1":"oklch(0.8100 0.1000 252)","chart-2":"oklch(0.6200 0.1900 260)","chart-3":"oklch(0.5500 0.2200 263)","chart-4":"oklch(0.4900 0.2200 264)","chart-5":"oklch(0.4200 0.1800 266)",sidebar:"oklch(0.2050 0 0)","sidebar-foreground":"oklch(0.9850 0 0)","sidebar-primary":"oklch(0.4880 0.2430 264.3760)","sidebar-primary-foreground":"oklch(0.9850 0 0)","sidebar-accent":"oklch(0.2690 0 0)","sidebar-accent-foreground":"oklch(0.9850 0 0)","sidebar-border":"oklch(0.2750 0 0)","sidebar-ring":"oklch(0.4390 0 0)"}};e.s(["initialStyles",0,t])},829732,948020,476371,205795,238580,139615,44366,e=>{"use strict";e.s(["CodeExecutionBlockLogic",()=>e1],829732);var t=e.i(868275),n=e.i(509473),r=e.i(743124),i=e.i(770858),o=e.i(110909),a=e.i(65836),s=e.i(53223),l=e.i(346970),c=e.i(543017),u=e.i(483962),d=e.i(899488),p=e.i(504066),h=e.i(407211),f=e.i(636139),m=e.i(304649),g=e.i(696871),v=e.i(845210),x=e.i(192670),y=e.i(987630),b=e.i(638200),w=e.i(969116),j=e.i(87467),C=e.i(827728);e.s(["FileContent",()=>eK,"PreviewBlock",()=>eZ,"updatePreviewImmediate",()=>eH],476371);var k=n,S=e.i(284546),N=e.i(914483),E=i,D=e.i(7284),I=v,A=e.i(204575),T=w,M=e.i(226092),L=e.i(417220),P=e.i(277018),R=j,_=e.i(780752),O=e.i(658252),F=e.i(481556),B=C,V=r,z=e.i(297239),H=e.i(707827),U=e.i(242828),G=e.i(651219),W=e.i(218139),q=e.i(455552),Z=e.i(926224),K=e.i(276221),$=e.i(671908),Y=e.i(230905),J=e.i(380105),Q=e.i(745587),X=e.i(343258),ee=e.i(295224),et=e.i(280738),en=e.i(382559),er=e.i(209819),ei=e.i(32170),eo=e.i(597932),ea=e.i(403055),es=e.i(583965),el=e.i(242759),ec=e.i(43116),eu=e.i(70165),ed=e.i(988118),ep=e.i(90177),eh=e.i(554912),ef=e.i(480450),em=e.i(92479),eg=s,ev=e.i(566274),ex=d,ey=e.i(485370),eb=e.i(909270),ew=e.i(944542),ej=e.i(577247);e.s(["designSystemUnsavedChangesAtom",()=>eP,"useDesignSystemUnsavedChanges",()=>eR],948020);var eC=r,ek=e.i(490293),eS=e.i(639056);e.i(472428);var eN=e.i(152641);e.i(904347);var eE=e.i(37737),eD=e.i(931194),eI=e.i(471964),eA=$,eT=el,eM=em;async function eL(e,t){try{let n=await fetch("/api/design-systems/check-unsaved-changes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({designSystemId:t,globalsCss:e})});if(!n.ok)return!1;let r=await n.json();return!!r.hasUnsavedChanges&&(0,eD.mergePartialShadcnStylesWithDefaults)(r.styles,eI.initialStyles)}catch(e){return!1}}let eP=(0,ek.atom)({hasUnsavedChanges:!1});function eR(){let e=(0,eM.assertChatId)((0,eM.useChatId)().chatId);(0,eN.useServerQuerySWR)(["scoped","designSystems"],{});let t=(0,eC.useCallback)(e=>{let t=(0,eA.getGlobalsCssFromFiles)(e);return{files:e,globalsCssFile:t}},[]),{data:n}=(0,eN.useServerQuerySWR)(["chat","attributes"],{chatId:e},{stopFetch:!e}),r=(null==n?void 0:n.designSystemId)||null,i=(0,eS.useSetAtom)(eP),o=(0,eC.useCallback)(e=>{(0,eE.openDialog)({type:"createDesignSystem",data:{shadcnStyle:e,onSuccess(){i({hasUnsavedChanges:!1})}}})},[i]),[a,s]=(0,eC.useState)(null),{dse:l}=(0,eT.useFlags)(),c=(0,eC.useCallback)(async()=>{if(!l||!r||!a)return;let e=await eL(a,r);e?i({hasUnsavedChanges:!0,currentShadcnStyle:e,onSaveAsNew:()=>{o(e)},clearUnsavedChanges:()=>{i({hasUnsavedChanges:!1}),s(null)}}):(i({hasUnsavedChanges:!1}),s(null))},[r,a,i,o,l]);return(0,eC.useEffect)(()=>{c()},[c]),{setFiles:e=>{var n;let{globalsCssFile:r}=t(e);s(null!=(n=null==r?void 0:r.source)?n:null)}}}function e_(e){return e.includes("app/globals.css")||e.includes("src/app/globals.css")}var eO=e.i(668887),eF=e.i(385671);let eB=V.default.memo(e=>{let{pictureInPictureLoaderEnabled:t,blockLoaderEnabled:n,children:r,closed:i,isStreaming:o,blockId:a,source:s,switchToCode:l,designModeEnabled:c,meta:u,messagesLength:d,isBlockPreviewable:p}=e;return t||!n||i||!o||p?r:(0,k.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,k.jsx)(ef.BlockViewLoader,{switchToCode:l,blockId:a,closed:i,source:s,meta:u})})});eB.displayName="PreviewBlockChildren";let eV=(0,G.default)(()=>e.A(781679).then(e=>e.MultiFileLocalCodeBlock),{loadableGenerated:{modules:[454437]},ssr:!1}),ez=(e,t,n,r)=>{if(e){var i;null==(i=e.contentWindow)||i.postMessage({type:"preview_code_delta",file:t,source:n,version:r},"*")}},eH=(e,t,n)=>{if(e){var r;null==(r=e.contentWindow)||r.postMessage({type:"preview_code",code:t,version:n},"*")}},eU=eH,eG=(0,U.default)(eH,300);function eW(e){let[t,n]=(0,V.useState)(null),r=(0,V.useRef)(null);return(0,V.useEffect)(()=>{function t(){let i=document.getElementById(e);i?(n(i),r.current&&(clearTimeout(r.current),r.current=null)):r.current=setTimeout(t,1e3)}return t(),()=>{r.current&&(clearTimeout(r.current),r.current=null)}},[e,n]),t}function eq(e){let{children:t,blockType:n,browserControls:r,blockId:i}=e,{fullScreenResult:o,setFullscreenResult:a}=(0,ev.useFullscreenResult)(),{canWriteToChat:s}=(0,er.useChatMetadata)();return"code-project"===n&&o&&r?(0,k.jsx)(F.FullscreenContainer,{allowOnMobile:!0,children:(0,k.jsxs)("div",{className:"flex size-full flex-col",children:[(0,k.jsxs)("div",{className:"flex h-12 w-full shrink-0 items-center gap-2 px-3 border-b border-v0-gray-300 bg-v0-background-100",children:[(0,k.jsx)("div",{className:"flex-1 flex items-center justify-start",children:!s&&(0,k.jsxs)("div",{className:"flex items-center gap-2 text-v0-gray-900",children:[(0,k.jsx)(eb.default,{href:"/",children:(0,k.jsx)(ey.LogoV0,{className:"h-4 w-4"})}),(0,k.jsx)("span",{className:"text-xs",children:"User-generated content"})]})}),(0,k.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,k.jsx)("div",{className:"min-w-0 max-w-full",children:r})}),(0,k.jsx)("div",{className:"flex-1 flex items-center justify-end",children:(0,k.jsx)(ex.CodeBlockButton,{onClick:()=>a(!o,i),tooltip:{side:"bottom",content:"Exit fullscreen"},children:(0,k.jsx)(ew.FullscreenClose,{})})})]}),(0,k.jsx)("div",{className:"w-full flex-1 overflow-y-auto overflow-x-hidden",children:t})]})}):(0,k.jsx)(F.FullscreenContainer,{children:t})}function eZ(e){var t;let{children:n,allowRefresh:r,allowFullScreen:i=!0,initialFileTreeSize:o,resultId:a,language:s,remoteInfo:l,meta:c,source:u,blockId:d,blockType:p,closed:h,hasSourceBeenEdited:f,onEdit:m,files:g,loadingPath:v,originalCode:x,isV3:y,initialConsoleSize:b,initialConsoleExpanded:w,hideConsole:j=!1,browserControls:C}=e,{activeFilePath:E,setActiveFilePath:F,setAutoSwitch:G}=(0,Q.useActiveFile)({blockId:d,files:g,loadingPath:v}),{getFullIframeHref:ep}=(0,es.useBrowserFrame)(d),{ve:ef,bl:ev,pipl:ex}=(0,el.useFlags)(),{isStreaming:ey}=(0,em.useChatLoadingState)(),{actions:{setActiveTabIntent:eb}}=(0,eF.useChatLayout)(),{editValueMap:ew,setEditValueMap:eC}=(0,X.useEditValueMap)({blockId:d}),{consoleEvents:ek,appendConsoleEvent:eS,appendCodeOutputEvents:eN,clearConsoleEvents:eE,expandConsole:eD,setExpandConsole:eI}=(0,eh.useConsole)(d),eA=(0,B.useIsMounted)(),{isPublished:eT}=(0,I.usePublishedPage)(),{canWriteToChat:eM}=(0,er.useChatMetadata)(),eL=(0,z.useT)(),[eP,eV]=(0,N.useGetSet)("remote:accepted:".concat(d),null!=(t=null==l?void 0:l.accepted)&&t),{messagesLength:eZ}=(0,em.useChatMessagesLength)(),e$=eW((0,A.getBlockIframeId)(null!=a?a:d)),eY=(0,ee.useLatest)(ew),eJ=(0,eO.useDesignModeEnabled)(),eQ=(0,ee.useLatest)(g),eX=(0,V.useCallback)(e=>{let t=(0,$.getGlobalsCssFromFiles)(e),n=(0,$.getGlobalsCssPathFromFiles)(e);return!t&&e_(Object.keys(ew))?[...e,(0,Z.createNewFile)((0,K.createDefaultGlobals)(),n,"css",d)]:e},[ew,d]),[e0,e1]=(0,V.useState)(),{isBlockPreviewable:e2,canShowPreviewTab:e5,previewMeta:e4,activeTab:e3}=(0,S.useActiveTab)(),e9=(0,k.jsx)(eB,{pictureInPictureLoaderEnabled:!!ex,blockLoaderEnabled:!!ev,closed:h,isStreaming:ey,isBlockPreviewable:e2,blockId:d,designModeEnabled:eJ,switchToCode:()=>eb("code"),source:u,meta:c,messagesLength:eZ,children:n}),e7=(0,V.useCallback)((e,t,n,r)=>{if(!h)return;let i={...eY.current,[t]:e};if(eC(i),null==m||m(e),e$)if("code-project"===p)r?ez(e$,t,e,n):eU(e$,(0,q.getMultiFileSourceMap)((0,q.updateFilesInFileList)(i,eQ.current||[])),n);else if("v0"===p)eG(e$,e);else{var o;null==(o=e$.contentWindow)||o.postMessage({type:s.toUpperCase()+"_RENDER",source:e},e$.dataset.origin||"")}},[e$,h,eY,eC,m,p,eQ,s]),e6=(0,V.useCallback)((e,t,n,r,i,o,a,s)=>{var l;if(!eQ.current)return;let c=eQ.current.findIndex(t=>t.meta.file===e);if(-1===c)return void e7(i,e,o,!0);let u=null!=(l=null!=a?a:eY.current[e])?l:eQ.current[c].source;if(s){let[e,t]=s;u=u.substring(0,e)+i+u.substring(t)}else{let e=u.split("\n"),o=0;for(let n=0;n<t-1;n++)o+=e[n].length+1;u=u.substring(0,o+n-1)+i+u.substring(o+n-1+r)}e7(u,e,o,!0)},[eQ,eY,e7]);(0,V.useEffect)(()=>{ed.designModeInlineEditRef.current={inlineEdit:(0,U.default)(e6,50,{leading:!0,trailing:!0}),getContent(e){var t;if(!eQ.current)return;let n=eQ.current.findIndex(t=>t.meta.file===e);if(-1!==n)return null!=(t=eY.current[e])?t:eQ.current[n].source},jumpToFile(e,t,n){eb("code"),F(e),e1([t,n])},postMessage:e=>{if(e$){var t;null==(t=e$.contentWindow)||t.postMessage({__v0_remote__:!0,...e},"*")}}}},[e6,eb,e$]),(0,ej.useMessage)(e=>{if(e$&&e.data&&"object"==typeof e.data&&e.data.__v0_remote__)switch(e.data.type){case"frame_ready":if("code-project"===p){var t;if(!(null==(t=eQ.current)?void 0:t.length))return;let e=Object.keys(eY.current).length>0;e&&eU(e$,(0,q.getMultiFileSourceMap)((0,q.updateFilesInFileList)(eY.current,eQ.current)));let n=Object.keys(eY.current),r=eQ.current.map(e=>e.meta.file);(e&&e_(n)||e_(r))&&ti.setFiles(eQ.current)}break;case"inline_edit":e6(e.data.file,e.data.line,e.data.column,e.data.len,e.data.replace,e.data.version);break;case"console":eS(e.data);break;case"browser_event":(0,eg.track)("BrowserEvent",{type:e.data.event.type})}},[e$,p,eQ,e7,eY,eS,e6]);let e8=g||[{source:u,meta:c,originalCode:x,lang:s,isQuickEdit:!!c.isQuickEdit,blockId:d}],te=(0,V.useCallback)(()=>{eC({})},[eC]),{user:tt}=(0,ei.useUser)(),tn=(0,eu.useIsMobile)(),tr=(0,V.useCallback)(()=>{e$&&(e$.contentDocument?e$.contentDocument.location.reload():e$.src=ep(e$))},[e$,ep]),ti=eR(),to=(0,Y.useUnsavedChanges)({blockId:d,editValueMap:ew,isAdminSaving:!eM&&!!(null==tt?void 0:tt.isAdminMode),source:u,meta:c,files:e8,clearEditValueMap:te,onSaveSuccess:e=>{e_(Object.keys(ew))&&ti.setFiles(e)}}),[,ta]=(0,en.useFileEditingStatus)(d),ts=to.hasUnsavedChanges;(0,V.useEffect)(()=>{ta(ts)},[ts,ta]);let tl=h&&(!!eM||!!(null==tt?void 0:tt.isAdminMode));if(eT)return(0,k.jsx)("div",{className:(0,D.default)("bg-v0-background-200 h-full min-h-0 overflow-hidden","preview"===e3&&"border-v0-alpha-400",!eA&&"opacity-0"),children:e9});if("code-project"===p){if(!o)throw Error("code-project block is missing initialFileTreeSize");let e=e8.length?e8.find(e=>e.meta.file===E)||e8[0]:void 0,t=e?[{key:"preview",content:e5?(0,k.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(i||r)&&(0,k.jsxs)(et.BlockTabHeader,{className:"bg-v0-background-200 justify-end gap-1",bottomBorder:!0,children:[i?(0,k.jsx)(O.FullscreenButton,{}):null,r?(0,k.jsx)(_.RefreshPreview,{blockId:a||d}):null]}),(0,k.jsx)("div",{className:"w-full flex-1 overflow-y-auto overflow-x-hidden",children:(0,k.jsx)(eq,{blockType:p,browserControls:C,blockId:d,children:e9})})]}):null},y?null:{key:"code",content:ef&&!1===tn?(0,k.jsx)(ec.VSCodeEditorWrapper,{blockId:d,source:u,reloadIframe:tr,onEdit:(e,t)=>{e7(t,e)},files:g||[],activeFilePath:E,editValueMap:ew}):(0,k.jsx)(J.MultiFileCode,{showDiffInfo:h,loadingPath:v,activeFilePath:E,setActiveFile:e=>{G&&G(!1),F(e)},initialFileTreeSize:o,files:g,source:u,blockId:d,onChange:tr,children:(0,k.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,k.jsxs)(et.BlockTabHeader,{className:"justify-between gap-2",onePixelShorter:!0,children:[(0,k.jsx)("div",{className:"flex min-w-0 items-center gap-1 overflow-x-auto",children:E&&E.split("/").map((e,t)=>(0,k.jsxs)(V.default.Fragment,{children:[(0,k.jsx)("div",{className:"whitespace-nowrap font-medium nth-last-2:text-v0-gray-1000",children:e},"part-".concat(e,"-").concat(t)),(0,k.jsx)("div",{className:"last:hidden",children:(0,k.jsx)(M.ChevronRightSmall,{})},"chevron-".concat(e,"-").concat(t))]},"part-".concat(e,"-").concat(t)))}),(0,k.jsx)("div",{className:"flex items-center gap-1",children:(0,k.jsx)(R.CodeBlockActions,{closed:h,additionalHeaderActions:void 0,allowClose:!1,blockId:d,allowCopyCode:!0,allowDownloadCode:!0,originalCode:e.originalCode,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:ew[c.file||""]||e.source,isExecutable:e.meta.file.includes("scripts")&&"code"===e3,transactionMeta:e.meta.transaction,language:e.lang,onExecutionComplete:e=>{eN(e),null==eD||eD()}})})]}),(0,k.jsx)("div",{className:"w-full flex-1 overflow-y-auto overflow-x-hidden",children:(0,k.jsx)(eK,{blockType:p,remoteInfo:l,isMultiFile:!0,closed:h,blockId:d,setEditValueMap:eC,language:e.lang,editValueMap:ew,hasSourceBeenEdited:f,handleEdit:e7,file:e,editable:tl,location:e0,appendCodeOutputEvents:eN})})]})})}].filter(ea.isNonNullable):[];return(0,k.jsx)(eo.default,{hide:j||!!ev&&!h&&ey,blockId:d,consoleEvents:ek,clearLogs:eE,canWriteToChat:eM,activeFilePath:E,setActiveFilePath:F,initialSize:b,initialExpanded:w,onShouldExpand:e=>eI(()=>e),children:(0,k.jsxs)("div",{className:"relative min-h-0 w-full flex-1 grow",children:[(0,k.jsx)(T.TabContent,{tabFiles:t,activeTabKey:e3}),tl?(0,k.jsx)(Y.UnsavedChanges,{...to,resetValue:()=>{if(!e$)return;window.dispatchEvent(new CustomEvent("editor-reset-changes"));let e=eX(eQ.current||[]);eH(e$,(0,q.getMultiFileSourceMap)((0,q.updateFilesInFileList)({},e)))},mergedFromBlockId:d,isV3:y}):null]})})}let tc=e8.map(e=>({key:void 0!==g?c.file+"code":"code",display:c.file||"Untitled",content:(0,k.jsx)(eK,{blockType:p,remoteInfo:l,closed:h,blockId:d,setEditValueMap:eC,language:s,editValueMap:ew,hasSourceBeenEdited:f,handleEdit:e7,file:e,editable:tl,appendCodeOutputEvents:eN}),actions:(0,k.jsx)(R.CodeBlockActions,{closed:h,additionalHeaderActions:void 0,allowClose:!1,blockId:d,allowCopyCode:!0,allowDownloadCode:!0,originalCode:e.originalCode,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:ew[c.file||""]||e.source})})),tu={key:"preview",disabled:!e5,tooltip:"error"===e4.type?e4.error:ev||h||!ey?void 0:eL("previewBlock.previewIsStreaming"),display:(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)(P.Window,{className:"group-disabled:hidden"}),(0,k.jsx)("div",{className:"hidden group-disabled:block",children:h?(0,k.jsx)(L.EyeOff,{}):(0,k.jsx)(H.Spinner,{size:16})}),eL("previewBlock.preview")]}),content:(0,k.jsx)(eq,{blockType:p,browserControls:C,blockId:d,children:e9}),actions:(0,k.jsxs)(k.Fragment,{children:[i?(0,k.jsx)(O.FullscreenButton,{}):null,r?(0,k.jsx)(_.RefreshPreview,{blockId:a||d}):null]})};return(0,k.jsxs)(k.Fragment,{children:["local"!==p||"@remote"===d||g?null:(0,k.jsx)(W.UnappliedChanges,{blockId:d,hasUnappliedChanges:!!(!0!==eP||ew[c.file||""]&&ew[c.file||""]!==u),source:ew[c.file||""]||u,onApply:()=>{eV(!0)},showFadeOut:"code"===e3}),tl?(0,k.jsx)(Y.UnsavedChanges,{...to,resetValue:()=>{if(e$)if(window.dispatchEvent(new CustomEvent("editor-reset-changes")),"v0"===p)eH(e$,e8[0].source);else{var e;null==(e=e$.contentWindow)||e.postMessage({type:s.toUpperCase()+"_RENDER",source:e8[0].source},e$.dataset.origin||"")}},mergedFromBlockId:d,isV3:y}):null,(0,k.jsx)(T.TabFileViewer,{activeTabKey:e3,isLoading:!h,setActiveTabKey:e=>{"code"===e?eb("code"):"preview"===e&&eb("preview")},tabFiles:[tu,...tc]})]})}function eK(e){let{blockType:t,remoteInfo:n,closed:r,blockId:i,setEditValueMap:o,isMultiFile:a,language:s,editValueMap:l,hasSourceBeenEdited:c,handleEdit:u,file:d,location:p,editable:h,className:f,appendCodeOutputEvents:m}=e,{source:g,meta:v,originalCode:x,isQuickEdit:y}=d;return"local"===t?(0,k.jsx)(V.Suspense,{fallback:null,children:(0,k.jsx)(eV,{remoteInfo:n,blockId:i,source:g,onEdit:e=>{r&&o(t=>({...t||{},[v.file||""]:e}))},closed:r})}):d.meta.url&&!d.source.trim().length?(0,k.jsx)("div",{className:"p-4",children:(0,k.jsx)(eY,{url:d.meta.url,file:d.meta.file,isTempFile:d.isTempFile})}):(0,k.jsx)(E.CodeBlock,{isMultiFile:a,allowQuoting:!0,closed:r,caller:"v0",originalCode:x,showQuickEditAnimation:!r&&y,className:(0,D.default)("not-prose flex-1 grow",f),editable:h,fixingBadLines:d.fixingBadLines,fileName:v.file,language:s,blockId:i,editValue:l[v.file||""],hasSourceBeenEdited:c,onEdit:e=>u(e,v.file||""),runnable:!0,showLineNumbers:!0,value:g,type:v.type,location:p,onExecutionComplete:m})}let e$=(e,t)=>{var n;if(t)return t;let r=(null==(n=e.split(".").pop())?void 0:n.toLowerCase())||"";return["jpg","jpeg","png","gif","svg","webp","avif","ico"].includes(r)?"image":["glb","gltf"].includes(r)?"3d":["mp3","wav","ogg","flac"].includes(r)?"audio":["mp4","webm","ogv"].includes(r)?"video":"pdf"===r?"pdf":"unknown"};function eY(e){let{url:t,mimeType:n,file:r,isTempFile:i}=e,[o,a]=(0,V.useState)(null),s=e$(t,n);(0,V.useEffect)(()=>{a(null)},[t]);let l=()=>{a("Failed to load ".concat(s," from ").concat(t))};if(o)return(0,k.jsx)("div",{className:"rounded border border-v0-red-300 bg-v0-red-200 p-4 text-v0-red-700",children:o});switch(s){case"image":if(i)return(0,k.jsx)(ep.LoadingImage,{});return(0,k.jsx)("img",{src:t||"/placeholder.svg",className:"h-auto max-w-full",onError:l,alt:"Preview of ".concat(r)});case"3d":return(0,k.jsx)("div",{className:"h-[400px] w-full",children:"Previewing 3D models is not currently supported."});case"audio":return(0,k.jsxs)("audio",{controls:!0,className:"w-full",onError:l,children:[(0,k.jsx)("source",{src:t}),"Your browser does not support the audio element."]});case"video":return(0,k.jsxs)("video",{controls:!0,className:"h-auto max-w-full",onError:l,children:[(0,k.jsx)("source",{src:t}),"Your browser does not support the video element."]});case"pdf":return(0,k.jsxs)("div",{className:"rounded border bg-v0-background-200 p-4",children:[(0,k.jsxs)("p",{className:"mb-2",children:["PDF document:"," ",(0,k.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-v0-blue-500 hover:underline",children:"Open PDF"})]}),(0,k.jsx)("iframe",{src:"".concat(t,"#view=FitH"),className:"h-[500px] w-full",onError:l})]});default:return(0,k.jsx)("div",{className:"rounded border bg-v0-background-200 p-4",children:(0,k.jsxs)("p",{children:["Unknown file type."," ",(0,k.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-v0-blue-500 hover:underline",children:"Download file"})]})})}}var eJ=Y,eQ=X,eX=e.i(65151),e0=er;class e1{static Render(e){var t;let{isPublished:k}=(0,v.usePublishedPage)(),S=(0,C.useIsMounted)(),{isCopied:N,copyToClipboard:E}=(0,p.useCopyToClipboard)({timeout:2e3}),{editValueMap:D,setEditValueMap:I}=(0,eQ.useEditValueMap)({blockId:e.blockId}),{canWriteToChat:A}=(0,e0.useChatMetadata)(),{data:T,mutate:M}=(0,l.default)(["block:output",e.blockId]),{data:L}=(0,l.default)("block:output:initial");(0,r.useEffect)(()=>{(null==L?void 0:L.id)===e.blockId&&L.result.then(e=>{e&&M(t=>t||e.value)})},[L,e.blockId,M]);let P=T;if(void 0===P&&(null==L?void 0:L.id)===e.blockId&&L){let e=(0,r.use)(L.result);e&&(P=e.value)}let R=async()=>{if(N)return;let e=(0,eX.getOutputString)(P);return await E(e),(0,s.track)("CopyOutputExecutable",{output:e})},_=(0,r.useMemo)(()=>f.runnableLanguages.includes(e.language)&&f.runnableExtensions.some(t=>{var n;return null==(n=e.meta.file)?void 0:n.endsWith(t)}),[e.language,e.meta.file]),O=(0,eJ.useUnsavedChanges)({blockId:e.blockId,editValueMap:D,source:e.source,meta:e.meta,files:[{source:e.source,meta:e.meta}],clearEditValueMap:()=>I({})}),F=k?g.OUTPUT_RESIZE_PUBLISHED_COOKIE:g.OUTPUT_RESIZE_COOKIE,B=[{key:"code",display:e.meta.file,content:(0,n.jsxs)(n.Fragment,{children:[e.closed&&A?(0,n.jsx)(eJ.UnsavedChanges,{...O,resetValue:()=>{},mergedFromBlockId:e.blockId}):null,(0,n.jsx)(eK,{blockType:e.meta.type,remoteInfo:void 0,isMultiFile:!0,closed:e.closed,blockId:e.blockId,className:O.hasUnsavedChanges?"pb-14":"",setEditValueMap:I,language:e.language,editValueMap:D,hasSourceBeenEdited:e.hasSourceBeenEdited,handleEdit:t=>{t&&e.closed&&I(n=>({...n,[e.meta.file||""]:t}))},file:{source:e.source,meta:e.meta,lang:e.language,blockId:e.blockId,isQuickEdit:!!e.meta.isQuickEdit},editable:!!(e.closed&&A)},e.blockId)]}),actions:(0,n.jsx)(j.CodeBlockActions,{additionalHeaderActions:void 0,allowClose:!1,allowCopyCode:!0,allowDownloadCode:!0,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:D[e.meta.file||""]||e.source,originalCode:e.originalCode,blockId:e.blockId,closed:e.closed,language:e.language})}],V=k?(0,n.jsx)(i.CodeBlock,{originalCode:e.originalCode,showQuickEditAnimation:!e.closed&&!!e.meta.isQuickEdit,closed:e.closed,blockId:e.blockId,allowQuoting:!0,caller:"executable",className:"min-h-52 flex-1 rounded-md",editable:!1,fileName:e.meta.file,language:e.language,runnable:_,showLineNumbers:!0,value:e.source}):(0,n.jsx)(w.TabFileViewer,{isLoading:!e.closed,activeTabKey:"code",className:"min-h-52 w-full flex-1",setActiveTabKey:()=>{},tabFiles:B});return(0,n.jsxs)("div",{className:(0,m.cn)("not-prose flex h-full w-full flex-col",k&&"bg-v0-background-200 overflow-hidden rounded-md border",!S&&"opacity-0"),children:[V,_&&(0,n.jsx)(u.Resizable,{animated:!1,axis:"y",cookieName:F,dotsHandle:!1,initialSize:null!=(t=e.initialOutputSize)?t:33,minSizePx:200,show:!0,side:"start",children:(0,n.jsx)("div",{className:"border-alpha-400 flex size-full min-h-0 flex-1 flex-col items-center justify-center border-t",children:P?(0,n.jsxs)("div",{className:"flex size-full flex-col items-stretch",children:[(0,n.jsxs)("div",{className:(0,m.cn)("flex items-center justify-between border-b px-2 py-1"),children:[(0,n.jsx)("h3",{className:"select-none text-sm font-medium text-v0-gray-900",children:"Output"}),(0,n.jsxs)("div",{className:"flex select-none items-center gap-1",children:[(0,n.jsx)(h.CodeExecutionRunButton,{buttonText:"Run",codeExecutionBlockProps:e,editedValue:D[e.meta.file||""]||void 0,execute:a.doExecution,setOutput:M,variant:"ghost"}),(0,n.jsx)("div",{className:"bg-v0-alpha-400 h-4 w-px"}),(0,n.jsx)(d.CodeBlockButton,{"aria-label":"Clear",onClick:()=>M(void 0),tooltip:"Clear",children:(0,n.jsx)("span",{"aria-hidden":!0,children:(0,n.jsx)(b.AnimatedTrash,{})})}),(0,n.jsx)(d.CodeBlockButton,{"aria-label":"Download",disabled:"error"in P,onClick:()=>(0,eX.downloadAsFile)(P),tooltip:"Download",children:(0,n.jsx)("span",{"aria-hidden":!0,children:(0,n.jsx)(x.AnimatedDownload,{})})}),(0,n.jsx)(d.CodeBlockButton,{disabled:"error"in P,onClick:R,tooltip:"Copy",children:(0,n.jsx)("span",{"aria-hidden":!0,children:N?(0,n.jsx)(c.Check,{}):(0,n.jsx)(y.AnimatedCopy,{})})})]})]}),(0,n.jsx)(o.CodeOutput,{className:"h-full",value:P})]}):(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("p",{className:"mb-2 text-base font-medium text-v0-gray-1000",children:"No Output"}),(0,n.jsx)("p",{className:"mb-6 text-sm text-v0-gray-900",children:e.closed?"Run the code to generate an output.":"You can execute the code after it has finished streaming."}),(0,n.jsx)(h.CodeExecutionRunButton,{codeExecutionBlockProps:e,disabled:!e.closed,editedValue:D[e.meta.file||""]||void 0,execute:a.doExecution,setOutput:M})]})})})]})}static Actions(e){return null}}(0,t._)(e1,"getIsPreviewable",()=>!1),(0,t._)(e1,"TitleActions",null),(0,t._)(e1,"BrowserControls",null),(0,t._)(e1,"MoreMenu",null),(0,t._)(e1,"ConsoleToggle",null),e.s(["V0BlockLogic",()=>tl],205795);var e2=t,e5=n,e4=e.i(917806),e3=r,e9=A,e7=e.i(395542),e6=s,e8=e.i(470259),te=e.i(301331),tt=v,tn=em,tr=e.i(210045),ti=e.i(868948),to=e.i(696825),ta=e.i(805374),ts=S;class tl{}(0,e2._)(tl,"getIsPreviewable",e=>{let{source:t,closed:n,meta:r}=e,i=(0,e7.hasVisibleReactContent)(t,r.file);return"string"==typeof i?{error:i}:!!i&&n}),(0,e2._)(tl,"Render",e3.default.memo(e=>{let t=(0,tn.useSetChatState)(),{isPublished:n}=(0,tt.usePublishedPage)(),{chatId:r}=(0,tn.useChatId)(),{getBlockForked:i}=(0,to.useForkedBlocks)(),{projectBlocks:o,projectBlockIndex:a,allBlocks:s}=(0,te.useBlockHistory)({blockId:e.blockId}),{isBlockPreviewable:l,canShowPreviewTab:c}=(0,ts.useActiveTab)(),u=(0,e3.useMemo)(()=>{var e;let t={},n=(null==(e=o[a])?void 0:e.meta.file)||".";for(let e of s)e.resultId&&e.meta.file&&(t[e.meta.file]=e.resultId);for(let e=0;e<=a;e++){let n=o[e],r=n.meta.file;r&&n.resultId&&(t[r]=n.resultId)}return{mapping:t,rootFileName:n}},[s,o,a]),d=(0,e3.useRef)(null),[p,h]=(0,e3.useState)(null);return(0,e3.useEffect)(()=>{if(d.current)return(0,e4.listenToIframe)(d.current,t=>{switch(t.type){case"set_loading":d.current&&((0,e4.sendData)(d.current,{type:"parent_ready"}),(0,e4.sendData)(d.current,{type:"sync_file_mapping",data:u}));break;case"error":case"runtime-error":{let n=(0,ti.cleanBlockError)(t.error);t.resultId===e.resultId&&h(r=>(r!==n&&l&&(0,e6.track)("V0BlockPreviewError",{messageId:e.messageId,blockId:e.blockId,resultId:t.resultId,from:e.meta.isQuickEdit?"quick-edit":void 0,forkedFromBlockId:i(e.blockId)},{errorMsg:n,errorCode:e8.V0_BLOCK_PREVIEW_ERROR}),n))}}})},[i,e,l,e.blockId,e.meta.from,e.resultId,u,t]),(0,e3.useEffect)(()=>{h(null)},[e.blockId]),(0,e5.jsxs)(eZ,{allowRefresh:!0,...e,blockType:"v0",language:"typescriptreact",children:[p?(0,e5.jsx)(ti.ErrorBanner,{error:p,onDismiss:()=>{h(null)}}):null,e.resultId&&l?(0,e5.jsx)(tr.Iframe,{iframeId:(0,e9.getBlockIframeId)(e.resultId),iframeRef:d,isPublished:n,onLoad:()=>{d.current&&(0,e4.sendData)(d.current,{type:"sync_file_mapping",data:u})},origin:(0,e4.getIframeOrigin)(r||e.blockId),src:"/p/".concat(e.resultId,"?c=1&flags=1&bid=").concat(e.blockId)}):null]})})),(0,e2._)(tl,"Actions",e3.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,e5.jsx)(ta.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,e2._)(tl,"BrowserControls",null),(0,e2._)(tl,"MoreMenu",null),(0,e2._)(tl,"ConsoleToggle",null),e.s(["CodeBlockLogic",()=>tp],238580);var tc=t,tu=n,td=r;class tp{static Actions(){return null}}(0,tc._)(tp,"getIsPreviewable",()=>!1),(0,tc._)(tp,"Render",td.default.memo(e=>(0,tu.jsx)(eZ,{hidePreviewPane:!0,...e,blockType:"code"}))),(0,tc._)(tp,"BrowserControls",null),(0,tc._)(tp,"MoreMenu",null),(0,tc._)(tp,"ConsoleToggle",null),e.s(["HTMLBlockLogic",()=>tN],44366);var th=t,tf=n,tm=r,tg=A,tv=v,tx=r,ty=ee;function tb(e,t,n){let[r,i]=(0,tx.useState)(!1),o=(0,ty.useLatest)(r),a=(0,ty.useLatest)(t);(0,tx.useEffect)(()=>{let t=document.getElementById(n),r=n=>{if(n.origin===t.dataset.origin&&n.data.type===e+"_READY"&&(i(!0),a.current)){var r;null==(r=t.contentWindow)||r.postMessage({type:e+"_RENDER",source:a.current},t.dataset.origin||"")}};return window.addEventListener("message",r),()=>{window.removeEventListener("message",r)}},[e,n,a]),(0,tx.useEffect)(()=>{let r=document.getElementById(n);if(r){var i,a;o.current?null==(i=r.contentWindow)||i.postMessage({type:e+"_RENDER",source:t},r.dataset.origin||""):null==(a=r.contentWindow)||a.postMessage({type:e+"_PING"},r.dataset.origin||"")}},[t,e,n,o])}e.s(["useIframeAutoRender",()=>tb],139615);var tw=e4,tj=em,tC=tr,tk=ta;let tS=RegExp("<!DOCTYPE html>.*?<\\/html>","s");class tN{static Render(e){let{isPublished:t}=(0,tv.usePublishedPage)(),{chatId:n}=(0,tj.useChatId)(),r=(0,tg.getBlockIframeId)(e.blockId);return tb("HTML",e.source,r),(0,tf.jsx)(eZ,{...e,blockType:"html",language:"html",children:(0,tf.jsx)(tC.Iframe,{iframeId:r,isPublished:t,origin:(0,tw.getIframeOrigin)(n||e.blockId),src:"/render/html"})})}}(0,th._)(tN,"getIsPreviewable",e=>{let{source:t,closed:n}=e;return n||tS.test(t)}),(0,th._)(tN,"Actions",tm.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,tf.jsx)(tk.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,th._)(tN,"BrowserControls",null),(0,th._)(tN,"MoreMenu",null),(0,th._)(tN,"ConsoleToggle",null)},430957,e=>{"use strict";var t=e.i(509473),n=e.i(304649);function r(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("prose prose-sm prose-gray min-w-0 break-words",r),...i})}e.s(["Prose",()=>r])},622449,e=>{"use strict";e.i(168204),e.i(225695);let t=e=>"user"===e.role?e.id:e.continuingMessageId||e.id;e.s(["getUIMessageKey",0,t])},816220,e=>{"use strict";function t(e,t){let n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}e.s(["stringify",()=>t])},158206,e=>{"use strict";let t=/[ \t\n\f\r]/g;function n(e){return"object"==typeof e?"text"===e.type&&r(e.value):r(e)}function r(e){return""===e.replace(t,"")}e.s(["whitespace",()=>n])},722365,e=>{"use strict";function t(e){return e.join(" ").trim()}e.s(["stringify",()=>t])},6809,(e,t,n)=>{var r=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,i=/\n/g,o=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,u=/^\s+|\s+$/g,d="\n",p="/",h="*",f="",m="comment",g="declaration";function v(e){return e?e.replace(u,f):f}t.exports=function(e,t){if("string"!=typeof e)throw TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,u=1;function x(e){var t=e.match(i);t&&(n+=t.length);var r=e.lastIndexOf(d);u=~r?e.length-r:u+e.length}function y(){var e={line:n,column:u};return function(t){return t.position=new b(e),k(),t}}function b(e){this.start=e,this.end={line:n,column:u},this.source=t.source}b.prototype.content=e;var w=[];function j(r){var i=Error(t.source+":"+n+":"+u+": "+r);if(i.reason=r,i.filename=t.source,i.line=n,i.column=u,i.source=e,t.silent)w.push(i);else throw i}function C(t){var n=t.exec(e);if(n){var r=n[0];return x(r),e=e.slice(r.length),n}}function k(){C(o)}function S(e){var t;for(e=e||[];t=N();)!1!==t&&e.push(t);return e}function N(){var t=y();if(p==e.charAt(0)&&h==e.charAt(1)){for(var n=2;f!=e.charAt(n)&&(h!=e.charAt(n)||p!=e.charAt(n+1));)++n;if(n+=2,f===e.charAt(n-1))return j("End of comment missing");var r=e.slice(2,n-2);return u+=2,x(r),e=e.slice(n),u+=2,t({type:m,comment:r})}}function E(){var e=y(),t=C(a);if(t){if(N(),!C(s))return j("property missing ':'");var n=C(l),i=e({type:g,property:v(t[0].replace(r,f)),value:n?v(n[0].replace(r,f)):f});return C(c),i}}function D(){var e,t=[];for(S(t);e=E();)!1!==e&&(t.push(e),S(t));return t}return k(),D()}},518043,(e,t,n)=>{"use strict";var r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var i=r(e.r(6809));n.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var r=(0,i.default)(e),o="function"==typeof t;return r.forEach(function(e){if("declaration"===e.type){var r=e.property,i=e.value;o?t(r,i,e):i&&((n=n||{})[r]=i)}}),n}},897802,417798,842965,352446,722259,12105,212470,872238,346863,540795,434036,759239,941392,820667,403010,75615,983691,576597,e=>{"use strict";function t(){}function n(){}e.s(["ok",()=>t,"unreachable",()=>n],897802);var r=e.i(816220);RegExp("[$_\\p{ID_Start}]","u"),RegExp("[$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u"),RegExp("[-$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u");let i=RegExp("^[$_\\p{ID_Start}][$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),o=RegExp("^[$_\\p{ID_Start}][-$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),a={};function s(e,t){return((t||a).jsx?o:i).test(e)}var l=e.i(158206);function c(e){return e.toLowerCase()}class u{constructor(e,t){this.property=e,this.attribute=t}}u.prototype.space=null,u.prototype.boolean=!1,u.prototype.booleanish=!1,u.prototype.overloadedBoolean=!1,u.prototype.number=!1,u.prototype.commaSeparated=!1,u.prototype.spaceSeparated=!1,u.prototype.commaOrSpaceSeparated=!1,u.prototype.mustUseProperty=!1,u.prototype.defined=!1;let d=0,p=y(),h=y(),f=y(),m=y(),g=y(),v=y(),x=y();function y(){return 2**++d}e.s(["boolean",0,p,"booleanish",0,h,"commaOrSpaceSeparated",0,x,"commaSeparated",0,v,"number",0,m,"overloadedBoolean",0,f,"spaceSeparated",0,g],360827);var b=e.i(360827);let w=Object.keys(b);class j extends u{constructor(e,t,n,r){let i=-1;if(super(e,t),C(this,"space",r),"number"==typeof n)for(;++i<w.length;){let e=w[i];C(this,w[i],(n&b[e])===b[e])}}}function C(e,t,n){n&&(e[t]=n)}j.prototype.defined=!0;let k=/^data[-\w.:]+$/i,S=/-[a-z]/g,N=/[A-Z]/g;function E(e,t){let n=c(t),r=t,i=u;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&k.test(t)){if("-"===t.charAt(4)){let e=t.slice(5).replace(S,I);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=t.slice(4);if(!S.test(e)){let n=e.replace(N,D);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=j}return new i(r,t)}function D(e){return"-"+e.toLowerCase()}function I(e){return e.charAt(1).toUpperCase()}let A={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};class T{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function M(e,t){let n={},r={},i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new T(n,r,t)}T.prototype.property={},T.prototype.normal={},T.prototype.space=null;let L={}.hasOwnProperty;function P(e){let t,n={},r={};for(t in e.properties)if(L.call(e.properties,t)){let i=e.properties[t],o=new j(t,e.transform(e.attributes||{},t),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(t)&&(o.mustUseProperty=!0),n[t]=o,r[c(t)]=t,r[c(o.attribute)]=t}return new T(n,r,e.space)}let R=P({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),_=P({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function O(e,t){return t in e?e[t]:t}function F(e,t){return O(e,t.toLowerCase())}let B=P({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:F,properties:{xmlns:null,xmlnsXLink:null}}),V=P({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:h,ariaAutoComplete:null,ariaBusy:h,ariaChecked:h,ariaColCount:m,ariaColIndex:m,ariaColSpan:m,ariaControls:g,ariaCurrent:null,ariaDescribedBy:g,ariaDetails:null,ariaDisabled:h,ariaDropEffect:g,ariaErrorMessage:null,ariaExpanded:h,ariaFlowTo:g,ariaGrabbed:h,ariaHasPopup:null,ariaHidden:h,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:g,ariaLevel:m,ariaLive:null,ariaModal:h,ariaMultiLine:h,ariaMultiSelectable:h,ariaOrientation:null,ariaOwns:g,ariaPlaceholder:null,ariaPosInSet:m,ariaPressed:h,ariaReadOnly:h,ariaRelevant:null,ariaRequired:h,ariaRoleDescription:g,ariaRowCount:m,ariaRowIndex:m,ariaRowSpan:m,ariaSelected:h,ariaSetSize:m,ariaSort:null,ariaValueMax:m,ariaValueMin:m,ariaValueNow:m,ariaValueText:null,role:null}}),z=P({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:F,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:v,acceptCharset:g,accessKey:g,action:null,allow:null,allowFullScreen:p,allowPaymentRequest:p,allowUserMedia:p,alt:null,as:null,async:p,autoCapitalize:null,autoComplete:g,autoFocus:p,autoPlay:p,capture:p,charSet:null,checked:p,cite:null,className:g,cols:m,colSpan:null,content:null,contentEditable:h,controls:p,controlsList:g,coords:m|v,crossOrigin:null,data:null,dateTime:null,decoding:null,default:p,defer:p,dir:null,dirName:null,disabled:p,download:f,draggable:h,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:p,formTarget:null,headers:g,height:m,hidden:p,high:m,href:null,hrefLang:null,htmlFor:g,httpEquiv:g,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:p,itemId:null,itemProp:g,itemRef:g,itemScope:p,itemType:g,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:p,low:m,manifest:null,max:null,maxLength:m,media:null,method:null,min:null,minLength:m,multiple:p,muted:p,name:null,nonce:null,noModule:p,noValidate:p,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:p,optimum:m,pattern:null,ping:g,placeholder:null,playsInline:p,poster:null,preload:null,readOnly:p,referrerPolicy:null,rel:g,required:p,reversed:p,rows:m,rowSpan:m,sandbox:g,scope:null,scoped:p,seamless:p,selected:p,shape:null,size:m,sizes:null,slot:null,span:m,spellCheck:h,src:null,srcDoc:null,srcLang:null,srcSet:null,start:m,step:null,style:null,tabIndex:m,target:null,title:null,translate:null,type:null,typeMustMatch:p,useMap:null,value:h,width:m,wrap:null,align:null,aLink:null,archive:g,axis:null,background:null,bgColor:null,border:m,borderColor:null,bottomMargin:m,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:p,declare:p,event:null,face:null,frame:null,frameBorder:null,hSpace:m,leftMargin:m,link:null,longDesc:null,lowSrc:null,marginHeight:m,marginWidth:m,noResize:p,noHref:p,noShade:p,noWrap:p,object:null,profile:null,prompt:null,rev:null,rightMargin:m,rules:null,scheme:null,scrolling:h,standby:null,summary:null,text:null,topMargin:m,valueType:null,version:null,vAlign:null,vLink:null,vSpace:m,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:p,disableRemotePlayback:p,prefix:null,property:null,results:m,security:null,unselectable:null}}),H=P({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:O,properties:{about:x,accentHeight:m,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:m,amplitude:m,arabicForm:null,ascent:m,attributeName:null,attributeType:null,azimuth:m,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:m,by:null,calcMode:null,capHeight:m,className:g,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:m,diffuseConstant:m,direction:null,display:null,dur:null,divisor:m,dominantBaseline:null,download:p,dx:null,dy:null,edgeMode:null,editable:null,elevation:m,enableBackground:null,end:null,event:null,exponent:m,externalResourcesRequired:null,fill:null,fillOpacity:m,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:v,g2:v,glyphName:v,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:m,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:m,horizOriginX:m,horizOriginY:m,id:null,ideographic:m,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:m,k:m,k1:m,k2:m,k3:m,k4:m,kernelMatrix:x,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:m,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:m,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:m,overlineThickness:m,paintOrder:null,panose1:null,path:null,pathLength:m,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:g,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:m,pointsAtY:m,pointsAtZ:m,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:x,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:x,rev:x,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:x,requiredFeatures:x,requiredFonts:x,requiredFormats:x,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:m,specularExponent:m,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:m,strikethroughThickness:m,string:null,stroke:null,strokeDashArray:x,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:m,strokeOpacity:m,strokeWidth:null,style:null,surfaceScale:m,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:x,tabIndex:m,tableValues:null,target:null,targetX:m,targetY:m,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:x,to:null,transform:null,u1:null,u2:null,underlinePosition:m,underlineThickness:m,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:m,values:null,vAlphabetic:m,vMathematical:m,vectorEffect:null,vHanging:m,vIdeographic:m,version:null,vertAdvY:m,vertOriginX:m,vertOriginY:m,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:m,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),U=M([_,R,B,V,z],"html"),G=M([_,R,B,V,H],"svg");var W=e.i(722365),q=e.i(518043);let Z=q.default.default||q.default,K=Y("end"),$=Y("start");function Y(e){return t;function t(t){let n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function J(e){let t=$(e),n=K(e);if(t&&n)return{start:t,end:n}}function Q(e){return e&&"object"==typeof e?"position"in e||"type"in e?ee(e.position):"start"in e||"end"in e?ee(e):"line"in e||"column"in e?X(e):"":""}function X(e){return et(e&&e.line)+":"+et(e&&e.column)}function ee(e){return X(e&&e.start)+"-"+X(e&&e.end)}function et(e){return e&&"number"==typeof e?e:1}e.s(["pointEnd",0,K,"pointStart",0,$,"position",()=>J],417798);class en extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",i={},o=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!i.cause&&e&&(o=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"==typeof n){let e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){let e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}let a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=a?a.line:void 0,this.name=Q(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&"string"==typeof i.cause.stack?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}en.prototype.file="",en.prototype.name="",en.prototype.reason="",en.prototype.message="",en.prototype.stack="",en.prototype.column=void 0,en.prototype.line=void 0,en.prototype.ancestors=void 0,en.prototype.cause=void 0,en.prototype.fatal=void 0,en.prototype.place=void 0,en.prototype.ruleId=void 0,en.prototype.source=void 0,e.s(["VFileMessage",()=>en],842965);let er={}.hasOwnProperty,ei=new Map,eo=/[A-Z]/g,ea=/-([a-z])/g,es=new Set(["table","tbody","thead","tfoot","tr"]),el=new Set(["td","th"]),ec="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function eu(e,t){let n;if(!t||void 0===t.Fragment)throw TypeError("Expected `Fragment` in options");let r=t.filePath||void 0;if(t.development){if("function"!=typeof t.jsxDEV)throw TypeError("Expected `jsxDEV` in options when `development: true`");n=ew(r,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw TypeError("Expected `jsxs` in production options");n=eb(r,t.jsx,t.jsxs)}let i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?G:U,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},o=ed(i,e,void 0);return o&&"string"!=typeof o?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function ed(e,t,n){return"element"===t.type?ep(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?eh(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?em(e,t,n):"mdxjsEsm"===t.type?ef(e,t):"root"===t.type?eg(e,t,n):"text"===t.type?ev(e,t):void 0}function ep(e,t,n){let r=e.schema;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(e.schema=G),e.ancestors.push(t);let i=eE(e,t.tagName,!1),o=ej(e,t),a=ek(e,t);return es.has(t.tagName)&&(a=a.filter(function(e){return"string"!=typeof e||!(0,l.whitespace)(e)})),ex(e,o,i,t),ey(o,a),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function eh(e,n){if(n.data&&n.data.estree&&e.evaluater){let r=n.data.estree.body[0];return t("ExpressionStatement"===r.type),e.evaluater.evaluateExpression(r.expression)}eD(e,n.position)}function ef(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);eD(e,t.position)}function em(e,t,n){let r=e.schema;"svg"===t.name&&"html"===r.space&&(e.schema=G),e.ancestors.push(t);let i=null===t.name?e.Fragment:eE(e,t.name,!0),o=eC(e,t),a=ek(e,t);return ex(e,o,i,t),ey(o,a),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function eg(e,t,n){let r={};return ey(r,ek(e,t)),e.create(t,e.Fragment,r,n)}function ev(e,t){return t.value}function ex(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function ey(e,t){if(t.length>0){let n=t.length>1?t:t[0];n&&(e.children=n)}}function eb(e,t,n){return r;function r(e,r,i,o){let a=Array.isArray(i.children)?n:t;return o?a(r,i,o):a(r,i)}}function ew(e,t){return n;function n(n,r,i,o){let a=Array.isArray(i.children),s=$(n);return t(r,i,o,a,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}function ej(e,t){let n,r,i={};for(r in t.properties)if("children"!==r&&er.call(t.properties,r)){let o=eS(e,r,t.properties[r]);if(o){let[r,a]=o;e.tableCellAlignToStyle&&"align"===r&&"string"==typeof a&&el.has(t.tagName)?n=a:i[r]=a}}return n&&((i.style||(i.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=n),i}function eC(e,n){let r={};for(let i of n.attributes)if("mdxJsxExpressionAttribute"===i.type)if(i.data&&i.data.estree&&e.evaluater){let n=i.data.estree.body[0];t("ExpressionStatement"===n.type);let o=n.expression;t("ObjectExpression"===o.type);let a=o.properties[0];t("SpreadElement"===a.type),Object.assign(r,e.evaluater.evaluateExpression(a.argument))}else eD(e,n.position);else{let o,a=i.name;if(i.value&&"object"==typeof i.value)if(i.value.data&&i.value.data.estree&&e.evaluater){let n=i.value.data.estree.body[0];t("ExpressionStatement"===n.type),o=e.evaluater.evaluateExpression(n.expression)}else eD(e,n.position);else o=null===i.value||i.value;r[a]=o}return r}function ek(e,t){let n=[],r=-1,i=e.passKeys?new Map:ei;for(;++r<t.children.length;){let o,a=t.children[r];if(e.passKeys){let e="element"===a.type?a.tagName:"mdxJsxFlowElement"===a.type||"mdxJsxTextElement"===a.type?a.name:void 0;if(e){let t=i.get(e)||0;o=e+"-"+t,i.set(e,t+1)}}let s=ed(e,a,o);void 0!==s&&n.push(s)}return n}function eS(e,t,n){let i=E(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?(0,r.stringify)(n):(0,W.stringify)(n)),"style"===i.property){let t="object"==typeof n?n:eN(e,String(n));return"css"===e.stylePropertyNameCase&&(t=eI(t)),["style",t]}return["react"===e.elementAttributeNameCase&&i.space?A[i.property]||i.property:i.attribute,n]}}function eN(e,t){let n={};try{Z(t,r)}catch(t){if(!e.ignoreInvalidStyle){let n=t,r=new en("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=ec+"#cannot-parse-style-attribute",r}}return n;function r(e,t){let r=e;"--"!==r.slice(0,2)&&("-ms-"===r.slice(0,4)&&(r="ms-"+r.slice(4)),r=r.replace(ea,eT)),n[r]=t}}function eE(e,n,r){let i;if(r)if(n.includes(".")){let e,r=n.split("."),o=-1;for(;++o<r.length;){let t=s(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};e=e?{type:"MemberExpression",object:e,property:t,computed:!!(o&&"Literal"===t.type),optional:!1}:t}t(e,"always a result"),i=e}else i=s(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};else i={type:"Literal",value:n};if("Literal"===i.type){let t=i.value;return er.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(i);eD(e)}function eD(e,t){let n=new en("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ec+"#cannot-handle-mdx-estrees-without-createevaluater",n}function eI(e){let t,n={};for(t in e)er.call(e,t)&&(n[eA(t)]=e[t]);return n}function eA(e){let t=e.replace(eo,eM);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function eT(e,t){return t.toUpperCase()}function eM(e){return"-"+e.toLowerCase()}e.s(["toJsxRuntime",()=>eu],352446);let eL={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]};e.s(["urlAttributes",0,eL],722259);let eP={};function eR(e,t){let n=t||eP;return e_(e,"boolean"!=typeof n.includeImageAlt||n.includeImageAlt,"boolean"!=typeof n.includeHtml||n.includeHtml)}function e_(e,t,n){if(eF(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return eO(e.children,t,n)}return Array.isArray(e)?eO(e,t,n):""}function eO(e,t,n){let r=[],i=-1;for(;++i<e.length;)r[i]=e_(e[i],t,n);return r.join("")}function eF(e){return!!(e&&"object"==typeof e)}function eB(e,t,n,r){let i,o=e.length,a=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)(i=r.slice(a,a+1e4)).unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function eV(e,t){return e.length>0?(eB(e,e.length,0,t),e):t}e.s(["toString",()=>eR],12105),e.s(["push",()=>eV,"splice",()=>eB],212470);let ez={}.hasOwnProperty;function eH(e){let t={},n=-1;for(;++n<e.length;)eU(t,e[n]);return t}function eU(e,t){let n;for(n in t){let r,i=(ez.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];if(o)for(r in o){ez.call(i,r)||(i[r]=[]);let e=o[r];eG(i[r],Array.isArray(e)?e:e?[e]:[])}}}function eG(e,t){let n=-1,r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);eB(e,0,0,r)}function eW(e){let t={},n=-1;for(;++n<e.length;)eq(t,e[n]);return t}function eq(e,t){let n;for(n in t){let r,i=(ez.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];if(o)for(r in o)i[r]=o[r]}}e.s(["combineExtensions",()=>eH,"combineHtmlExtensions",()=>eW],872238);let eZ=e3(/[A-Za-z]/),eK=e3(/[\dA-Za-z]/),e$=e3(/[#-'*+\--9=?A-Z^-~]/);function eY(e){return null!==e&&(e<32||127===e)}let eJ=e3(/\d/),eQ=e3(/[\dA-Fa-f]/),eX=e3(/[!-/:-@[-`{-~]/);function e0(e){return null!==e&&e<-2}function e1(e){return null!==e&&(e<0||32===e)}function e2(e){return -2===e||-1===e||32===e}let e5=e3(RegExp("\\p{P}|\\p{S}","u")),e4=e3(/\s/);function e3(e){return t;function t(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function e9(e,t,n,r){let i=r?r-1:1/0,o=0;return a;function a(r){return e2(r)?(e.enter(n),s(r)):t(r)}function s(r){return e2(r)&&o++<i?(e.consume(r),s):(e.exit(n),t(r))}}e.s(["asciiAlpha",0,eZ,"asciiAlphanumeric",0,eK,"asciiAtext",0,e$,"asciiControl",()=>eY,"asciiDigit",0,eJ,"asciiHexDigit",0,eQ,"asciiPunctuation",0,eX,"markdownLineEnding",()=>e0,"markdownLineEndingOrSpace",()=>e1,"markdownSpace",()=>e2,"unicodePunctuation",0,e5,"unicodeWhitespace",0,e4],346863),e.s(["factorySpace",()=>e9],540795);let e7={tokenize:e6};function e6(e){let t,n=e.attempt(this.parser.constructs.contentInitial,r,i);return n;function r(t){return null===t?void e.consume(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e9(e,n,"linePrefix"))}function i(t){return e.enter("paragraph"),o(t)}function o(n){let r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,a(n)}function a(t){if(null===t){e.exit("chunkText"),e.exit("paragraph"),e.consume(t);return}return e0(t)?(e.consume(t),e.exit("chunkText"),o):(e.consume(t),a)}}let e8={tokenize:tt},te={tokenize:tn};function tt(e){let t,n,r,i=this,o=[],a=0;return s;function s(t){if(a<o.length){let n=o[a];return i.containerState=n[1],e.attempt(n[0].continuation,l,c)(t)}return c(t)}function l(e){if(a++,i.containerState._closeFlow){let n;i.containerState._closeFlow=void 0,t&&x();let r=i.events.length,o=r;for(;o--;)if("exit"===i.events[o][0]&&"chunkFlow"===i.events[o][1].type){n=i.events[o][1].end;break}v(a);let s=r;for(;s<i.events.length;)i.events[s][1].end=Object.assign({},n),s++;return eB(i.events,o+1,0,i.events.slice(r)),i.events.length=s,c(e)}return s(e)}function c(n){if(a===o.length){if(!t)return p(n);if(t.currentConstruct&&t.currentConstruct.concrete)return f(n);i.interrupt=!!(t.currentConstruct&&!t._gfmTableDynamicInterruptHack)}return i.containerState={},e.check(te,u,d)(n)}function u(e){return t&&x(),v(a),p(e)}function d(e){return i.parser.lazy[i.now().line]=a!==o.length,r=i.now().offset,f(e)}function p(t){return i.containerState={},e.attempt(te,h,f)(t)}function h(e){return a++,o.push([i.currentConstruct,i.containerState]),p(e)}function f(r){if(null===r){t&&x(),v(0),e.consume(r);return}return t=t||i.parser.flow(i.now()),e.enter("chunkFlow",{contentType:"flow",previous:n,_tokenizer:t}),m(r)}function m(t){if(null===t){g(e.exit("chunkFlow"),!0),v(0),e.consume(t);return}return e0(t)?(e.consume(t),g(e.exit("chunkFlow")),a=0,i.interrupt=void 0,s):(e.consume(t),m)}function g(e,o){let s=i.sliceStream(e);if(o&&s.push(null),e.previous=n,n&&(n.next=e),n=e,t.defineSkip(e.start),t.write(s),i.parser.lazy[e.start.line]){let e,n,o=t.events.length;for(;o--;)if(t.events[o][1].start.offset<r&&(!t.events[o][1].end||t.events[o][1].end.offset>r))return;let s=i.events.length,l=s;for(;l--;)if("exit"===i.events[l][0]&&"chunkFlow"===i.events[l][1].type){if(e){n=i.events[l][1].end;break}e=!0}for(v(a),o=s;o<i.events.length;)i.events[o][1].end=Object.assign({},n),o++;eB(i.events,l+1,0,i.events.slice(s)),i.events.length=o}}function v(t){let n=o.length;for(;n-- >t;){let t=o[n];i.containerState=t[1],t[0].exit.call(i,e)}o.length=t}function x(){t.write([null]),n=void 0,t=void 0,i.containerState._closeFlow=void 0}}function tn(e,t,n){return e9(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}let tr={tokenize:ti,partial:!0};function ti(e,t,n){return r;function r(t){return e2(t)?e9(e,i,"linePrefix")(t):i(t)}function i(e){return null===e||e0(e)?t(e):n(e)}}e.s(["blankLine",0,tr],434036);class to{get(e){if(e<0||e>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){let n=null==t?1/0:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){let r=t||0;this.setCursor(Math.trunc(e));let i=this.right.splice(this.right.length-r,1/0);return n&&ta(this.left,n),i.reverse()}pop(){return this.setCursor(1/0),this.left.pop()}push(e){this.setCursor(1/0),this.left.push(e)}pushMany(e){this.setCursor(1/0),ta(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ta(this.right,e.reverse())}setCursor(e){if(e!==this.left.length&&(!(e>this.left.length)||0!==this.right.length)&&(!(e<0)||0!==this.left.length))if(e<this.left.length){let t=this.left.splice(e,1/0);ta(this.right,t.reverse())}else{let t=this.right.splice(this.left.length+this.right.length-e,1/0);ta(this.left,t.reverse())}}constructor(e){this.left=e?[...e]:[],this.right=[]}}function ta(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ts(e){let t,n,r,i,o,a,s,l={},c=-1,u=new to(e);for(;++c<u.length;){for(;c in l;)c=l[c];if(t=u.get(c),c&&"chunkFlow"===t[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&((r=0)<(a=t[1]._tokenizer.events).length&&"lineEndingBlank"===a[r][1].type&&(r+=2),r<a.length&&"content"===a[r][1].type))for(;++r<a.length&&"content"!==a[r][1].type;)"chunkText"===a[r][1].type&&(a[r][1]._isInFirstContentOfListItem=!0,r++);if("enter"===t[0])t[1].contentType&&(Object.assign(l,tl(u,c)),c=l[c],s=!0);else if(t[1]._container){for(r=c,n=void 0;r--;)if("lineEnding"===(i=u.get(r))[1].type||"lineEndingBlank"===i[1].type)"enter"===i[0]&&(n&&(u.get(n)[1].type="lineEndingBlank"),i[1].type="lineEnding",n=r);else break;n&&(t[1].end=Object.assign({},u.get(n)[1].start),(o=u.slice(n,c)).unshift(t),u.splice(n,c-n+1,o))}}return eB(e,0,1/0,u.slice(0)),!s}function tl(e,t){let n,r,i=e.get(t)[1],o=e.get(t)[2],a=t-1,s=[],l=i._tokenizer||o.parser[i.contentType](i.start),c=l.events,u=[],d={},p=-1,h=i,f=0,m=0,g=[0];for(;h;){for(;e.get(++a)[1]!==h;);s.push(a),!h._tokenizer&&(n=o.sliceStream(h),h.next||n.push(null),r&&l.defineSkip(h.start),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(n),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),r=h,h=h.next}for(h=i;++p<c.length;)"exit"===c[p][0]&&"enter"===c[p-1][0]&&c[p][1].type===c[p-1][1].type&&c[p][1].start.line!==c[p][1].end.line&&(m=p+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(l.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),p=g.length;p--;){let t=c.slice(g[p],g[p+1]),n=s.pop();u.push([n,n+t.length-1]),e.splice(n,2,t)}for(u.reverse(),p=-1;++p<u.length;)d[f+u[p][0]]=f+u[p][1],f+=u[p][1]-u[p][0]-1;return d}let tc={tokenize:tp,resolve:td},tu={tokenize:th,partial:!0};function td(e){return ts(e),e}function tp(e,t){let n;return r;function r(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(t)}function i(t){return null===t?o(t):e0(t)?e.check(tu,a,o)(t):(e.consume(t),i)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function th(e,t,n){let r=this;return i;function i(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e9(e,o,"linePrefix")}function o(i){if(null===i||e0(i))return n(i);let o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}let tf={tokenize:tm};function tm(e){let t=this,n=e.attempt(tr,r,e.attempt(this.parser.constructs.flowInitial,i,e9(e,e.attempt(this.parser.constructs.flow,i,e.attempt(tc,i)),"linePrefix")));return n;function r(r){return null===r?void e.consume(r):(e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n)}function i(r){return null===r?void e.consume(r):(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n)}}let tg={resolveAll:tb()},tv=ty("string"),tx=ty("text");function ty(e){return{tokenize:t,resolveAll:tb("text"===e?tw:void 0)};function t(t){let n=this,r=this.parser.constructs[e],i=t.attempt(r,o,a);return o;function o(e){return l(e)?i(e):a(e)}function a(e){return null===e?void t.consume(e):(t.enter("data"),t.consume(e),s)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;let t=r[e],i=-1;if(t)for(;++i<t.length;){let e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}function tb(e){return t;function t(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function tw(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){let r,i=e[n-1][1],o=t.sliceStream(i),a=o.length,s=-1,l=0;for(;a--;){let e=o[a];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)r=!0,l++;else if(-1===e);else{a++;break}}if(l){let o={type:n===e.length||r||l<2?"lineSuffix":"hardBreakTrailing",start:{line:i.end.line,column:i.end.column-l,offset:i.end.offset-l,_index:i.start._index+a,_bufferIndex:a?s:i.start._bufferIndex+s},end:Object.assign({},i.end)};i.end=Object.assign({},o.start),i.start.offset===i.end.offset?Object.assign(i,o):(e.splice(n,0,["enter",o,t],["exit",o,t]),n+=2)}n++}return e}function tj(e,t,n){let r=[],i=-1;for(;++i<e.length;){let o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}function tC(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},o=[],a=[],s=[],l={consume:x,enter:y,exit:b,attempt:C(w),check:C(j),interrupt:C(j,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:p,now:f,defineSkip:m,write:d},u=t.tokenize.call(c,l);return t.resolveAll&&o.push(t),c;function d(e){return(a=eV(a,e),g(),null!==a[a.length-1])?[]:(k(t,0),c.events=tj(o,c.events,c),c.events)}function p(e,t){return tS(h(e),t)}function h(e){return tk(a,e)}function f(){let{line:e,column:t,offset:n,_index:i,_bufferIndex:o}=r;return{line:e,column:t,offset:n,_index:i,_bufferIndex:o}}function m(e){i[e.line]=e.column,N()}function g(){let e;for(;r._index<a.length;){let t=a[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)v(t.charCodeAt(r._bufferIndex));else v(t)}}function v(e){u=u(e)}function x(e){e0(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,N()):-1!==e&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=e}function y(e,t){let n=t||{};return n.type=e,n.start=f(),c.events.push(["enter",n,c]),s.push(n),n}function b(e){let t=s.pop();return t.end=f(),c.events.push(["exit",t,c]),t}function w(e,t){k(e,t.from)}function j(e,t){t.restore()}function C(e,t){return n;function n(n,r,i){let o,a,s,u;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):d(n);function d(e){return t;function t(t){let n=null!==t&&e[t],r=null!==t&&e.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}function p(e){return(o=e,a=0,0===e.length)?i:h(e[a])}function h(e){return n;function n(n){return(u=S(),s=e,e.partial||(c.currentConstruct=e),e.name&&c.parser.constructs.disable.null.includes(e.name))?m(n):e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,f,m)(n)}}function f(t){return e(s,u),r}function m(e){return(u.restore(),++a<o.length)?h(o[a]):i}}}function k(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&eB(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function S(){let e=f(),t=c.previous,n=c.currentConstruct,i=c.events.length,o=Array.from(s);return{restore:a,from:i};function a(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=i,s=o,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function tk(e,t){let n,r=t.start._index,i=t.start._bufferIndex,o=t.end._index,a=t.end._bufferIndex;if(r===o)n=[e[r].slice(i,a)];else{if(n=e.slice(r,o),i>-1){let e=n[0];"string"==typeof e?n[0]=e.slice(i):n.shift()}a>0&&n.push(e[o].slice(0,a))}return n}function tS(e,t){let n,r=-1,i=[];for(;++r<e.length;){let o,a=e[r];if("string"==typeof a)o=a;else switch(a){case -5:o="\r";break;case -4:o="\n";break;case -3:o="\r\n";break;case -2:o=t?" ":"	";break;case -1:if(!t&&n)continue;o=" ";break;default:o=String.fromCharCode(a)}n=-2===a,i.push(o)}return i.join("")}function tN(e){return null===e||e1(e)||e4(e)?1:e5(e)?2:void 0}e.s(["resolveAll",()=>tj],759239),e.s(["classifyCharacter",()=>tN],941392);let tE={name:"attention",tokenize:tI,resolveAll:tD};function tD(e,t){let n,r,i,o,a,s,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close){for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;let d=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);tA(d,-s),tA(p,s),o={type:s>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[n][1].end=Object.assign({},o.start),e[u][1].start=Object.assign({},a.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=eV(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=eV(l,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=eV(l,tj(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=eV(l,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=eV(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,eB(e,n-1,u-n+3,l),u=n+l.length-c-2;break}}for(u=-1;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}function tI(e,t){let n,r=this.parser.constructs.attentionMarkers.null,i=this.previous,o=tN(i);return a;function a(t){return n=t,e.enter("attentionSequence"),s(t)}function s(a){if(a===n)return e.consume(a),s;let l=e.exit("attentionSequence"),c=tN(a),u=!c||2===c&&o||r.includes(a),d=!o||2===o&&c||r.includes(i);return l._open=!!(42===n?u:u&&(o||!d)),l._close=!!(42===n?d:d&&(c||!u)),t(a)}}function tA(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}let tT={name:"autolink",tokenize:tM};function tM(e,t,n){let r=0;return i;function i(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(t){return eZ(t)?(e.consume(t),a):64===t?n(t):c(t)}function a(e){return 43===e||45===e||46===e||eK(e)?(r=1,s(e)):c(e)}function s(t){return 58===t?(e.consume(t),r=0,l):(43===t||45===t||46===t||eK(t))&&r++<32?(e.consume(t),s):(r=0,c(t))}function l(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||eY(r)?n(r):(e.consume(r),l)}function c(t){return 64===t?(e.consume(t),u):e$(t)?(e.consume(t),c):n(t)}function u(e){return eK(e)?d(e):n(e)}function d(n){return 46===n?(e.consume(n),r=0,u):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):p(n)}function p(t){if((45===t||eK(t))&&r++<63){let n=45===t?p:d;return e.consume(t),n}return n(t)}}let tL={name:"blockQuote",tokenize:tP,continuation:{tokenize:tR},exit:t_};function tP(e,t,n){let r=this;return i;function i(t){if(62===t){let n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o}return n(t)}function o(n){return e2(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}function tR(e,t,n){let r=this;return i;function i(t){return e2(t)?e9(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):o(t)}function o(r){return e.attempt(tL,t,n)(r)}}function t_(e){e.exit("blockQuote")}let tO={name:"characterEscape",tokenize:tF};function tF(e,t,n){return r;function r(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),i}function i(r){return eX(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}let tB=document.createElement("i");function tV(e){let t="&"+e+";";tB.innerHTML=t;let n=tB.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&n!==t&&n}let tz={name:"characterReference",tokenize:tH};function tH(e,t,n){let r,i,o=this,a=0;return s;function s(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),l}function l(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),r=31,i=eK,u(t))}function c(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,i=eQ,u):(e.enter("characterReferenceValue"),r=7,i=eJ,u(t))}function u(s){if(59===s&&a){let r=e.exit("characterReferenceValue");return i!==eK||tV(o.sliceSerialize(r))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return i(s)&&a++<r?(e.consume(s),u):n(s)}}let tU={tokenize:tq,partial:!0},tG={name:"codeFenced",tokenize:tW,concrete:!0};function tW(e,t,n){let r,i=this,o={tokenize:w,partial:!0},a=0,s=0;return l;function l(e){return c(e)}function c(t){let n=i.events[i.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,r=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(t)}function u(t){return t===r?(s++,e.consume(t),u):s<3?n(t):(e.exit("codeFencedFenceSequence"),e2(t)?e9(e,d,"whitespace")(t):d(t))}function d(n){return null===n||e0(n)?(e.exit("codeFencedFence"),i.interrupt?t(n):e.check(tU,m,b)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return null===t||e0(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(t)):e2(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),e9(e,h,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),p)}function h(t){return null===t||e0(t)?d(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||e0(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(t)):96===t&&t===r?n(t):(e.consume(t),f)}function m(t){return e.attempt(o,b,g)(t)}function g(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),v}function v(t){return a>0&&e2(t)?e9(e,x,"linePrefix",a+1)(t):x(t)}function x(t){return null===t||e0(t)?e.check(tU,m,b)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||e0(t)?(e.exit("codeFlowValue"),x(t)):(e.consume(t),y)}function b(n){return e.exit("codeFenced"),t(n)}function w(e,t,n){let o=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),e2(t)?e9(e,c,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===r?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===r?(o++,e.consume(t),u):o>=s?(e.exit("codeFencedFenceSequence"),e2(t)?e9(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||e0(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}}function tq(e,t,n){let r=this;return i;function i(t){return null===t?n(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o)}function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}let tZ={name:"codeIndented",tokenize:t$},tK={tokenize:tY,partial:!0};function t$(e,t,n){let r=this;return i;function i(t){return e.enter("codeIndented"),e9(e,o,"linePrefix",5)(t)}function o(e){let t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?a(e):n(e)}function a(t){return null===t?l(t):e0(t)?e.attempt(tK,a,l)(t):(e.enter("codeFlowValue"),s(t))}function s(t){return null===t||e0(t)?(e.exit("codeFlowValue"),a(t)):(e.consume(t),s)}function l(n){return e.exit("codeIndented"),t(n)}}function tY(e,t,n){let r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):e0(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):e9(e,o,"linePrefix",5)(t)}function o(e){let o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):e0(e)?i(e):n(e)}}let tJ={name:"codeText",tokenize:t0,resolve:tQ,previous:tX};function tQ(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[3][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type)){for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}}for(t=i-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):(t===r||"lineEnding"===e[t][1].type)&&(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function tX(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}function t0(e,t,n){let r,i,o=0;return a;function a(t){return e.enter("codeText"),e.enter("codeTextSequence"),s(t)}function s(t){return 96===t?(e.consume(t),o++,s):(e.exit("codeTextSequence"),l(t))}function l(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),l):96===t?(i=e.enter("codeTextSequence"),r=0,u(t)):e0(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(t))}function c(t){return null===t||32===t||96===t||e0(t)?(e.exit("codeTextData"),l(t)):(e.consume(t),c)}function u(n){return 96===n?(e.consume(n),r++,u):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",c(n))}}function t1(e,t,n,r,i,o,a,s,l){let c=l||1/0,u=0;return d;function d(t){return 60===t?(e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),p):null===t||32===t||41===t||eY(t)?n(t):(e.enter(r),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),m(t))}function p(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(s),p(t)):null===t||60===t||e0(t)?n(t):(e.consume(t),92===t?f:h)}function f(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function m(i){return!u&&(null===i||41===i||e1(i))?(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(i)):u<c&&40===i?(e.consume(i),u++,m):41===i?(e.consume(i),u--,m):null===i||32===i||40===i||eY(i)?n(i):(e.consume(i),92===i?g:m)}function g(t){return 40===t||41===t||92===t?(e.consume(t),m):m(t)}}function t2(e,t,n,r,i,o){let a,s=this,l=0;return c;function c(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),u}function u(c){return l>999||null===c||91===c||93===c&&!a||94===c&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):93===c?(e.exit(o),e.enter(i),e.consume(c),e.exit(i),e.exit(r),t):e0(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),d(c))}function d(t){return null===t||91===t||93===t||e0(t)||l++>999?(e.exit("chunkString"),u(t)):(e.consume(t),a||(a=!e2(t)),92===t?p:d)}function p(t){return 91===t||92===t||93===t?(e.consume(t),l++,d):d(t)}}function t5(e,t,n,r,i,o){let a;return s;function s(t){return 34===t||39===t||40===t?(e.enter(r),e.enter(i),e.consume(t),e.exit(i),a=40===t?41:t,l):n(t)}function l(n){return n===a?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),c(n))}function c(t){return t===a?(e.exit(o),l(a)):null===t?n(t):e0(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e9(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===a||null===t||e0(t)?(e.exit("chunkString"),c(t)):(e.consume(t),92===t?d:u)}function d(t){return t===a||92===t?(e.consume(t),u):u(t)}}function t4(e,t){let n;return r;function r(i){return e0(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):e2(i)?e9(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function t3(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}e.s(["normalizeIdentifier",()=>t3],820667);let t9={name:"definition",tokenize:t6},t7={tokenize:t8,partial:!0};function t6(e,t,n){let r,i=this;return o;function o(t){return e.enter("definition"),a(t)}function a(t){return t2.call(i,e,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}function s(t){return(r=t3(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===t)?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),l):n(t)}function l(t){return e1(t)?t4(e,c)(t):c(t)}function c(t){return t1(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function u(t){return e.attempt(t7,d,d)(t)}function d(t){return e2(t)?e9(e,p,"whitespace")(t):p(t)}function p(o){return null===o||e0(o)?(e.exit("definition"),i.parser.defined.push(r),t(o)):n(o)}}function t8(e,t,n){return r;function r(t){return e1(t)?t4(e,i)(t):n(t)}function i(t){return t5(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function o(t){return e2(t)?e9(e,a,"whitespace")(t):a(t)}function a(e){return null===e||e0(e)?t(e):n(e)}}let ne={name:"hardBreakEscape",tokenize:nt};function nt(e,t,n){return r;function r(t){return e.enter("hardBreakEscape"),e.consume(t),i}function i(r){return e0(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}let nn={name:"headingAtx",tokenize:ni,resolve:nr};function nr(e,t){let n,r,i=e.length-2,o=3;return"whitespace"===e[3][1].type&&(o+=2),i-2>o&&"whitespace"===e[i][1].type&&(i-=2),"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4),i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},eB(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]])),e}function ni(e,t,n){let r=0;return i;function i(t){return e.enter("atxHeading"),o(t)}function o(t){return e.enter("atxHeadingSequence"),a(t)}function a(t){return 35===t&&r++<6?(e.consume(t),a):null===t||e1(t)?(e.exit("atxHeadingSequence"),s(t)):n(t)}function s(n){return 35===n?(e.enter("atxHeadingSequence"),l(n)):null===n||e0(n)?(e.exit("atxHeading"),t(n)):e2(n)?e9(e,s,"whitespace")(n):(e.enter("atxHeadingText"),c(n))}function l(t){return 35===t?(e.consume(t),l):(e.exit("atxHeadingSequence"),s(t))}function c(t){return null===t||35===t||e1(t)?(e.exit("atxHeadingText"),s(t)):(e.consume(t),c)}}let no=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],na=["pre","script","style","textarea"],ns={name:"htmlFlow",tokenize:nd,resolveTo:nu,concrete:!0},nl={tokenize:nh,partial:!0},nc={tokenize:np,partial:!0};function nu(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function nd(e,t,n){let r,i,o,a,s,l=this;return c;function c(e){return u(e)}function u(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),d}function d(a){return 33===a?(e.consume(a),p):47===a?(e.consume(a),i=!0,m):63===a?(e.consume(a),r=3,l.interrupt?t:_):eZ(a)?(e.consume(a),o=String.fromCharCode(a),g):n(a)}function p(i){return 45===i?(e.consume(i),r=2,h):91===i?(e.consume(i),r=5,a=0,f):eZ(i)?(e.consume(i),r=4,l.interrupt?t:_):n(i)}function h(r){return 45===r?(e.consume(r),l.interrupt?t:_):n(r)}function f(r){let i="CDATA[";return r===i.charCodeAt(a++)?(e.consume(r),a===i.length)?l.interrupt?t:D:f:n(r)}function m(t){return eZ(t)?(e.consume(t),o=String.fromCharCode(t),g):n(t)}function g(a){if(null===a||47===a||62===a||e1(a)){let s=47===a,c=o.toLowerCase();return!s&&!i&&na.includes(c)?(r=1,l.interrupt?t(a):D(a)):no.includes(o.toLowerCase())?(r=6,s)?(e.consume(a),v):l.interrupt?t(a):D(a):(r=7,l.interrupt&&!l.parser.lazy[l.now().line]?n(a):i?x(a):y(a))}return 45===a||eK(a)?(e.consume(a),o+=String.fromCharCode(a),g):n(a)}function v(r){return 62===r?(e.consume(r),l.interrupt?t:D):n(r)}function x(t){return e2(t)?(e.consume(t),x):N(t)}function y(t){return 47===t?(e.consume(t),N):58===t||95===t||eZ(t)?(e.consume(t),b):e2(t)?(e.consume(t),y):N(t)}function b(t){return 45===t||46===t||58===t||95===t||eK(t)?(e.consume(t),b):w(t)}function w(t){return 61===t?(e.consume(t),j):e2(t)?(e.consume(t),w):y(t)}function j(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,C):e2(t)?(e.consume(t),j):k(t)}function C(t){return t===s?(e.consume(t),s=null,S):null===t||e0(t)?n(t):(e.consume(t),C)}function k(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||e1(t)?w(t):(e.consume(t),k)}function S(e){return 47===e||62===e||e2(e)?y(e):n(e)}function N(t){return 62===t?(e.consume(t),E):n(t)}function E(t){return null===t||e0(t)?D(t):e2(t)?(e.consume(t),E):n(t)}function D(t){return 45===t&&2===r?(e.consume(t),M):60===t&&1===r?(e.consume(t),L):62===t&&4===r?(e.consume(t),O):63===t&&3===r?(e.consume(t),_):93===t&&5===r?(e.consume(t),R):e0(t)&&(6===r||7===r)?(e.exit("htmlFlowData"),e.check(nl,F,I)(t)):null===t||e0(t)?(e.exit("htmlFlowData"),I(t)):(e.consume(t),D)}function I(t){return e.check(nc,A,F)(t)}function A(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),T}function T(t){return null===t||e0(t)?I(t):(e.enter("htmlFlowData"),D(t))}function M(t){return 45===t?(e.consume(t),_):D(t)}function L(t){return 47===t?(e.consume(t),o="",P):D(t)}function P(t){if(62===t){let n=o.toLowerCase();return na.includes(n)?(e.consume(t),O):D(t)}return eZ(t)&&o.length<8?(e.consume(t),o+=String.fromCharCode(t),P):D(t)}function R(t){return 93===t?(e.consume(t),_):D(t)}function _(t){return 62===t?(e.consume(t),O):45===t&&2===r?(e.consume(t),_):D(t)}function O(t){return null===t||e0(t)?(e.exit("htmlFlowData"),F(t)):(e.consume(t),O)}function F(n){return e.exit("htmlFlow"),t(n)}}function np(e,t,n){let r=this;return i;function i(t){return e0(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):n(t)}function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}function nh(e,t,n){return r;function r(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(tr,t,n)}}let nf={name:"htmlText",tokenize:nm};function nm(e,t,n){let r,i,o,a=this;return s;function s(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),l}function l(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),w):63===t?(e.consume(t),y):eZ(t)?(e.consume(t),k):n(t)}function c(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),i=0,f):eZ(t)?(e.consume(t),x):n(t)}function u(t){return 45===t?(e.consume(t),h):n(t)}function d(t){return null===t?n(t):45===t?(e.consume(t),p):e0(t)?(o=d,L(t)):(e.consume(t),d)}function p(t){return 45===t?(e.consume(t),h):d(t)}function h(e){return 62===e?M(e):45===e?p(e):d(e)}function f(t){let r="CDATA[";return t===r.charCodeAt(i++)?(e.consume(t),i===r.length?m:f):n(t)}function m(t){return null===t?n(t):93===t?(e.consume(t),g):e0(t)?(o=m,L(t)):(e.consume(t),m)}function g(t){return 93===t?(e.consume(t),v):m(t)}function v(t){return 62===t?M(t):93===t?(e.consume(t),v):m(t)}function x(t){return null===t||62===t?M(t):e0(t)?(o=x,L(t)):(e.consume(t),x)}function y(t){return null===t?n(t):63===t?(e.consume(t),b):e0(t)?(o=y,L(t)):(e.consume(t),y)}function b(e){return 62===e?M(e):y(e)}function w(t){return eZ(t)?(e.consume(t),j):n(t)}function j(t){return 45===t||eK(t)?(e.consume(t),j):C(t)}function C(t){return e0(t)?(o=C,L(t)):e2(t)?(e.consume(t),C):M(t)}function k(t){return 45===t||eK(t)?(e.consume(t),k):47===t||62===t||e1(t)?S(t):n(t)}function S(t){return 47===t?(e.consume(t),M):58===t||95===t||eZ(t)?(e.consume(t),N):e0(t)?(o=S,L(t)):e2(t)?(e.consume(t),S):M(t)}function N(t){return 45===t||46===t||58===t||95===t||eK(t)?(e.consume(t),N):E(t)}function E(t){return 61===t?(e.consume(t),D):e0(t)?(o=E,L(t)):e2(t)?(e.consume(t),E):S(t)}function D(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,I):e0(t)?(o=D,L(t)):e2(t)?(e.consume(t),D):(e.consume(t),A)}function I(t){return t===r?(e.consume(t),r=void 0,T):null===t?n(t):e0(t)?(o=I,L(t)):(e.consume(t),I)}function A(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||e1(t)?S(t):(e.consume(t),A)}function T(e){return 47===e||62===e||e1(e)?S(e):n(e)}function M(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function L(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),P}function P(t){return e2(t)?e9(e,R,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),o(t)}}let ng={name:"labelEnd",tokenize:nj,resolveTo:nw,resolveAll:nb},nv={tokenize:nC},nx={tokenize:nk},ny={tokenize:nS};function nb(e){let t=-1;for(;++t<e.length;){let n=e[t][1];("labelImage"===n.type||"labelLink"===n.type||"labelEnd"===n.type)&&(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}function nw(e,t){let n,r,i,o,a=e.length,s=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=a);let l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[i-2][1].start)};return o=eV(o=[["enter",l,t],["enter",c,t]],e.slice(r+1,r+s+3)),o=eV(o,[["enter",u,t]]),o=eV(o,tj(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),o=eV(o,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),o=eV(o,e.slice(i+1)),o=eV(o,[["exit",l,t]]),eB(e,r,e.length,o),e}function nj(e,t,n){let r,i,o=this,a=o.events.length;for(;a--;)if(("labelImage"===o.events[a][1].type||"labelLink"===o.events[a][1].type)&&!o.events[a][1]._balanced){r=o.events[a][1];break}return s;function s(t){return r?r._inactive?d(t):(i=o.parser.defined.includes(t3(o.sliceSerialize({start:r.end,end:o.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l):n(t)}function l(t){return 40===t?e.attempt(nv,u,i?u:d)(t):91===t?e.attempt(nx,u,i?c:d)(t):i?u(t):d(t)}function c(t){return e.attempt(ny,u,d)(t)}function u(e){return t(e)}function d(e){return r._balanced=!0,n(e)}}function nC(e,t,n){return r;function r(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),i}function i(t){return e1(t)?t4(e,o)(t):o(t)}function o(t){return 41===t?u(t):t1(e,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return e1(t)?t4(e,l)(t):u(t)}function s(e){return n(e)}function l(t){return 34===t||39===t||40===t?t5(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):u(t)}function c(t){return e1(t)?t4(e,u)(t):u(t)}function u(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}function nk(e,t,n){let r=this;return i;function i(t){return t2.call(r,e,o,a,"reference","referenceMarker","referenceString")(t)}function o(e){return r.parser.defined.includes(t3(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function a(e){return n(e)}}function nS(e,t,n){return r;function r(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),i}function i(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}let nN={name:"labelStartImage",tokenize:nE,resolveAll:ng.resolveAll};function nE(e,t,n){let r=this;return i;function i(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),o}function o(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}let nD={name:"labelStartLink",tokenize:nI,resolveAll:ng.resolveAll};function nI(e,t,n){let r=this;return i;function i(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),o}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}let nA={name:"lineEnding",tokenize:nT};function nT(e,t){return n;function n(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),e9(e,t,"linePrefix")}}let nM={name:"thematicBreak",tokenize:nL};function nL(e,t,n){let r,i=0;return o;function o(t){return e.enter("thematicBreak"),a(t)}function a(e){return r=e,s(e)}function s(o){return o===r?(e.enter("thematicBreakSequence"),l(o)):i>=3&&(null===o||e0(o))?(e.exit("thematicBreak"),t(o)):n(o)}function l(t){return t===r?(e.consume(t),i++,l):(e.exit("thematicBreakSequence"),e2(t)?e9(e,s,"whitespace")(t):s(t))}}let nP={name:"list",tokenize:nO,continuation:{tokenize:nF},exit:nV},nR={tokenize:nz,partial:!0},n_={tokenize:nB,partial:!0};function nO(e,t,n){let r=this,i=r.events[r.events.length-1],o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(t){let i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:eJ(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(nM,n,c)(t):c(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(t)}return n(t)}function l(t){return eJ(t)&&++a<10?(e.consume(t),l):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),c(t)):n(t)}function c(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(tr,r.interrupt?n:u,e.attempt(nR,p,d))}function u(e){return r.containerState.initialBlankLine=!0,o++,p(e)}function d(t){return e2(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),p):n(t)}function p(n){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}function nF(e,t,n){let r=this;return r.containerState._closeFlow=void 0,e.check(tr,i,o);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,e9(e,t,"listItemIndent",r.containerState.size+1)(n)}function o(n){return r.containerState.furtherBlankLines||!e2(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(n_,t,a)(n))}function a(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,e9(e,e.attempt(nP,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}function nB(e,t,n){let r=this;return e9(e,i,"listItemIndent",r.containerState.size+1);function i(e){let i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}}function nV(e){e.exit(this.containerState.type)}function nz(e,t,n){let r=this;return e9(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(e){let i=r.events[r.events.length-1];return!e2(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}}let nH={name:"setextUnderline",tokenize:nG,resolveTo:nU};function nU(e,t){let n,r,i,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(r=o)}else"content"===e[o][1].type&&e.splice(o,1),i||"definition"!==e[o][1].type||(i=o);let a={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",a,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=a,e.push(["exit",a,t]),e}function nG(e,t,n){let r,i=this;return o;function o(t){let o,s=i.events.length;for(;s--;)if("lineEnding"!==i.events[s][1].type&&"linePrefix"!==i.events[s][1].type&&"content"!==i.events[s][1].type){o="paragraph"===i.events[s][1].type;break}return!i.parser.lazy[i.now().line]&&(i.interrupt||o)?(e.enter("setextHeadingLine"),r=t,a(t)):n(t)}function a(t){return e.enter("setextHeadingLineSequence"),s(t)}function s(t){return t===r?(e.consume(t),s):(e.exit("setextHeadingLineSequence"),e2(t)?e9(e,l,"lineSuffix")(t):l(t))}function l(r){return null===r||e0(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}let nW={42:nP,43:nP,45:nP,48:nP,49:nP,50:nP,51:nP,52:nP,53:nP,54:nP,55:nP,56:nP,57:nP,62:tL},nq={91:t9},nZ={[-2]:tZ,[-1]:tZ,32:tZ},nK={35:nn,42:nM,45:[nH,nM],60:ns,61:nH,95:nM,96:tG,126:tG},n$={38:tz,92:tO},nY={[-5]:nA,[-4]:nA,[-3]:nA,33:nN,38:tz,42:tE,60:[tT,nf],91:nD,92:[ne,tO],93:ng,95:tE,96:tJ},nJ={null:[tE,tg]},nQ={null:[42,95]},nX={null:[]};e.s(["attentionMarkers",0,nQ,"contentInitial",0,nq,"disable",0,nX,"document",0,nW,"flow",0,nK,"flowInitial",0,nZ,"insideSpan",0,nJ,"string",0,n$,"text",0,nY],945011);var n0=e.i(945011);function n1(e){let t={defined:[],lazy:{},constructs:eH([n0,...(e||{}).extensions||[]]),content:n(e7),document:n(e8),flow:n(tf),string:n(tv),text:n(tx)};return t;function n(e){return n;function n(n){return tC(t,e,n)}}}function n2(e){for(;!ts(e););return e}let n5=/[\0\t\n\r]/g;function n4(){let e,t=1,n="",r=!0;return i;function i(i,o,a){let s,l,c,u,d,p=[];for(i=n+("string"==typeof i?i.toString():new TextDecoder(o||void 0).decode(i)),c=0,n="",r&&(65279===i.charCodeAt(0)&&c++,r=void 0);c<i.length;){if(n5.lastIndex=c,u=(s=n5.exec(i))&&void 0!==s.index?s.index:i.length,d=i.charCodeAt(u),!s){n=i.slice(c);break}if(10===d&&c===u&&e)p.push(-3),e=void 0;else switch(e&&(p.push(-5),e=void 0),c<u&&(p.push(i.slice(c,u)),t+=u-c),d){case 0:p.push(65533),t++;break;case 9:for(l=4*Math.ceil(t/4),p.push(-2);t++<l;)p.push(-1);break;case 10:p.push(-4),t=1;break;default:e=!0,t=1}c=u+1}return a&&(e&&p.push(-5),n&&p.push(n),p.push(null)),p}}function n3(e,t){let n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(65535&n)==65535||(65535&n)==65534||n>1114111?"�":String.fromCodePoint(n)}let n9=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function n7(e){return e.replace(n9,n6)}function n6(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){let e=n.charCodeAt(1),t=120===e||88===e;return n3(n.slice(t?2:1),t?16:10)}return tV(n)||e}let n8={}.hasOwnProperty;function re(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),rt(n)(n2(n1(n).document().write(n4()(e,t,!0))))}function rt(e){let t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(en),autolinkProtocol:S,autolinkEmail:S,atxHeading:o(J),blockQuote:o(q),characterEscape:S,characterReference:S,codeFenced:o(Z),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(Z,a),codeText:o(K,a),codeTextData:S,data:S,codeFlowValue:S,definition:o($),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(Y),hardBreakEscape:o(X),hardBreakTrailing:o(X),htmlFlow:o(ee,a),htmlFlowData:S,htmlText:o(ee,a),htmlTextData:S,image:o(et),label:a,link:o(en),listItem:o(ei),listItemValue:p,listOrdered:o(er,d),listUnordered:o(er),paragraph:o(eo),reference:B,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(J),strong:o(ea),thematicBreak:o(el)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:W,autolinkProtocol:G,blockQuote:l(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:z,characterReferenceMarkerNumeric:z,characterReferenceValue:H,characterReference:U,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:f,codeFlowValue:N,codeIndented:l(v),codeText:l(T),codeTextData:N,data:N,definition:l(),definitionDestinationString:b,definitionLabelString:x,definitionTitleString:y,emphasis:l(),hardBreakEscape:l(D),hardBreakTrailing:l(D),htmlFlow:l(I),htmlFlowData:N,htmlText:l(A),htmlTextData:N,image:l(L),label:R,labelText:P,lineEnding:E,link:l(M),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:V,resourceDestinationString:_,resourceTitleString:O,resource:F,setextHeading:l(k),setextHeadingLineSequence:C,setextHeadingText:j,strong:l(),thematicBreak:l()}};rr(t,(e||{}).mdastExtensions||[]);let n={};return r;function r(e){let r={type:"root",children:[]},o={stack:[r],tokenStack:[],config:t,enter:s,exit:c,buffer:a,resume:u,data:n},l=[],d=-1;for(;++d<e.length;)("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)&&("enter"===e[d][0]?l.push(d):d=i(e,l.pop(),d));for(d=-1;++d<e.length;){let n=t[e[d][0]];n8.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},o),e[d][1])}if(o.tokenStack.length>0){let e=o.tokenStack[o.tokenStack.length-1];(e[1]||ro).call(o,void 0,e[0])}for(r.position={start:rn(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:rn(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function i(e,t,n){let r,i,o,a,s=t-1,l=-1,c=!1;for(;++s<=n;){let t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||a||l||o||(o=s),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=s;for(i=void 0;a--;){let t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=a}else if("linePrefix"===t[1].type||"blockQuotePrefix"===t[1].type||"blockQuotePrefixWhitespace"===t[1].type||"blockQuoteMarker"===t[1].type||"listItemIndent"===t[1].type);else break}o&&(!i||o<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){let i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(s,0,["enter",i,t[2]]),s++,n++,o=void 0,a=!0}}}return e[t][1]._spread=c,n}function o(e,t){return n;function n(n){s.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:rn(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){let n=this.stack.pop(),r=this.tokenStack.pop();if(r)r[0].type!==e.type&&(t?t.call(this,e,r[0]):(r[1]||ro).call(this,e,r[0]));else throw Error("Cannot close `"+e.type+"` ("+Q({start:e.start,end:e.end})+"): it’s not open");n.position.end=rn(e.end)}function u(){return eR(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function p(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)}function h(){let e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){let e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function x(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=t3(this.sliceSerialize(e)).toLowerCase()}function y(){let e=this.resume();this.stack[this.stack.length-1].title=e}function b(){let e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){let t=this.stack[this.stack.length-1];t.depth||(t.depth=this.sliceSerialize(e).length)}function j(){this.data.setextHeadingSlurpLineEnding=!0}function C(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){let t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n=es()).position={start:rn(e.start),end:void 0},t.push(n)),this.stack.push(n)}function N(e){let t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=rn(e.end)}function E(e){let n=this.stack[this.stack.length-1];if(this.data.atHardBreak){n.children[n.children.length-1].position.end=rn(e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),N.call(this,e))}function D(){this.data.atHardBreak=!0}function I(){let e=this.resume();this.stack[this.stack.length-1].value=e}function A(){let e=this.resume();this.stack[this.stack.length-1].value=e}function T(){let e=this.resume();this.stack[this.stack.length-1].value=e}function M(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function L(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function P(e){let t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=n7(t),n.identifier=t3(t).toLowerCase()}function R(){let e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];this.data.inReference=!0,"link"===n.type?n.children=e.children:n.alt=t}function _(){let e=this.resume();this.stack[this.stack.length-1].url=e}function O(){let e=this.resume();this.stack[this.stack.length-1].title=e}function F(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function V(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=t3(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function z(e){this.data.characterReferenceType=e.type}function H(e){let t,n=this.sliceSerialize(e),r=this.data.characterReferenceType;r?(t=n3(n,"characterReferenceMarkerNumeric"===r?10:16),this.data.characterReferenceType=void 0):t=tV(n);let i=this.stack[this.stack.length-1];i.value+=t}function U(e){this.stack.pop().position.end=rn(e.end)}function G(e){N.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){N.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function q(){return{type:"blockquote",children:[]}}function Z(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function $(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Y(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:0,children:[]}}function X(){return{type:"break"}}function ee(){return{type:"html",value:""}}function et(){return{type:"image",title:null,url:"",alt:null}}function en(){return{type:"link",title:null,url:"",children:[]}}function er(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ei(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function eo(){return{type:"paragraph",children:[]}}function ea(){return{type:"strong",children:[]}}function es(){return{type:"text",value:""}}function el(){return{type:"thematicBreak"}}}function rn(e){return{line:e.line,column:e.column,offset:e.offset}}function rr(e,t){let n=-1;for(;++n<t.length;){let r=t[n];Array.isArray(r)?rr(e,r):ri(e,r)}}function ri(e,t){let n;for(n in t)if(n8.call(t,n))switch(n){case"canContainEols":{let r=t[n];r&&e[n].push(...r);break}case"transforms":{let r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{let r=t[n];r&&Object.assign(e[n],r)}}}function ro(e,t){if(e)throw Error("Cannot close `"+e.type+"` ("+Q({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Q({start:t.start,end:t.end})+") is open");throw Error("Cannot close document, a token (`"+t.type+"`, "+Q({start:t.start,end:t.end})+") is still open")}function ra(e){let t=this;function n(n){return re(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}t.parser=n}e.s(["default",()=>ra],403010);let rs=-1,rl=0,rc=1,ru=2,rd=3,rp=4,rh=5,rf=6,rm=7,rg=8,rv="object"==typeof self?self:globalThis,rx=(e,t)=>{let n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);let[o,a]=t[i];switch(o){case rl:case rs:return n(a,i);case rc:{let e=n([],i);for(let t of a)e.push(r(t));return e}case ru:{let e=n({},i);for(let[t,n]of a)e[r(t)]=r(n);return e}case rd:return n(new Date(a),i);case rp:{let{source:e,flags:t}=a;return n(new RegExp(e,t),i)}case rh:{let e=n(new Map,i);for(let[t,n]of a)e.set(r(t),r(n));return e}case rf:{let e=n(new Set,i);for(let t of a)e.add(r(t));return e}case rm:{let{name:e,message:t}=a;return n(new rv[e](t),i)}case rg:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{let{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new rv[o](a),i)};return r},ry=e=>rx(new Map,e)(0),rb="",{toString:rw}={},{keys:rj}=Object,rC=e=>{let t=typeof e;if("object"!==t||!e)return[rl,t];let n=rw.call(e).slice(8,-1);switch(n){case"Array":return[rc,rb];case"Object":return[ru,rb];case"Date":return[rd,rb];case"RegExp":return[rp,rb];case"Map":return[rh,rb];case"Set":return[rf,rb];case"DataView":return[rc,n]}return n.includes("Array")?[rc,n]:n.includes("Error")?[rm,n]:[ru,n]},rk=e=>{let[t,n]=e;return t===rl&&("function"===n||"symbol"===n)},rS=(e,t,n,r)=>{let i=(e,t)=>{let i=r.push(e)-1;return n.set(t,i),i},o=r=>{if(n.has(r))return n.get(r);let[a,s]=rC(r);switch(a){case rl:{let t=r;switch(s){case"bigint":a=rg,t=r.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+s);t=null;break;case"undefined":return i([rs],r)}return i([a,t],r)}case rc:{if(s){let e=r;return"DataView"===s?e=new Uint8Array(r.buffer):"ArrayBuffer"===s&&(e=new Uint8Array(r)),i([s,[...e]],r)}let e=[],t=i([a,e],r);for(let t of r)e.push(o(t));return t}case ru:{if(s)switch(s){case"BigInt":return i([s,r.toString()],r);case"Boolean":case"Number":case"String":return i([s,r.valueOf()],r)}if(t&&"toJSON"in r)return o(r.toJSON());let n=[],l=i([a,n],r);for(let t of rj(r))(e||!rk(rC(r[t])))&&n.push([o(t),o(r[t])]);return l}case rd:return i([a,r.toISOString()],r);case rp:{let{source:e,flags:t}=r;return i([a,{source:e,flags:t}],r)}case rh:{let t=[],n=i([a,t],r);for(let[n,i]of r)(e||!(rk(rC(n))||rk(rC(i))))&&t.push([o(n),o(i)]);return n}case rf:{let t=[],n=i([a,t],r);for(let n of r)(e||!rk(rC(n)))&&t.push(o(n));return n}}let{message:l}=r;return i([a,{name:s,message:l}],r)};return o},rN=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return rS(!(t||n),!!t,new Map,r)(e),r},rE="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?ry(rN(e,t)):structuredClone(e):(e,t)=>ry(rN(e,t));e.s(["default",0,rE],75615);let rD={'"':"quot","&":"amp","<":"lt",">":"gt"};function rI(e){return e.replace(/["&<>]/g,t);function t(e){return"&"+rD[e]+";"}}function rA(e,t){let n=rI(rT(e||""));if(!t)return n;let r=n.indexOf(":"),i=n.indexOf("?"),o=n.indexOf("#"),a=n.indexOf("/");return r<0||a>-1&&r>a||i>-1&&r>i||o>-1&&r>o||t.test(n.slice(0,r))?n:""}function rT(e){let t=[],n=-1,r=0,i=0;for(;++n<e.length;){let o=e.charCodeAt(n),a="";if(37===o&&eK(e.charCodeAt(n+1))&&eK(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){let t=e.charCodeAt(n+1);o<56320&&t>56319&&t<57344?(a=String.fromCharCode(o,t),i=1):a="�"}else a=String.fromCharCode(o);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function rM(e,t){let n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function rL(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function rP(e){let t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||rM,r=e.options.footnoteBackLabel||rL,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[],l=-1;for(;++l<e.footnoteOrder.length;){let i=e.footnoteById.get(e.footnoteOrder[l]);if(!i)continue;let o=e.all(i),a=String(i.identifier).toUpperCase(),c=rT(a.toLowerCase()),u=0,d=[],p=e.footnoteCounts.get(a);for(;void 0!==p&&++u<=p;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,u);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}let h=o[o.length-1];if(h&&"element"===h.type&&"p"===h.tagName){let e=h.children[h.children.length-1];e&&"text"===e.type?e.value+=" ":h.children.push({type:"text",value:" "}),h.children.push(...d)}else o.push(...d);let f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(o,!0)};e.patch(i,f),s.push(f)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...rE(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}e.s(["normalizeUri",()=>rT,"sanitizeUri",()=>rA],983691),e.s(["footer",()=>rP],576597)},939049,249548,e=>{"use strict";let t=function(e){if(null==e)return a;if("function"==typeof e)return o(e);if("object"==typeof e)return Array.isArray(e)?n(e):r(e);if("string"==typeof e)return i(e);throw Error("Expected function, string, or object as test")};function n(e){let n=[],r=-1;for(;++r<e.length;)n[r]=t(e[r]);return o(i);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let i=-1;for(;++i<n.length;)if(n[i].apply(this,t))return!0;return!1}}function r(e){let t=e;return o(n);function n(n){let r,i=n;for(r in e)if(i[r]!==t[r])return!1;return!0}}function i(e){return o(t);function t(t){return t&&t.type===e}}function o(e){return t;function t(t,n,r){return!!(s(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function a(){return!0}function s(e){return null!==e&&"object"==typeof e&&"type"in e}function l(e){return e}e.s(["convert",0,t],249548);let c=[],u=!0,d=!1,p="skip";function h(e,n,r,i){let o;"function"==typeof n&&"function"!=typeof r?(i=r,r=n):o=n;let a=t(o),s=i?-1:1;function u(e,t,o){let h=e&&"object"==typeof e?e:{};if("string"==typeof h.type){let t="string"==typeof h.tagName?h.tagName:"string"==typeof h.name?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+l(e.type+(t?"<"+t+">":""))+")"})}return m;function m(){let l,h,m,g=c;if((!n||a(e,t,o[o.length-1]||void 0))&&(g=f(r(e,o)))[0]===d)return g;if("children"in e&&e.children){let t=e;if(t.children&&g[0]!==p)for(h=(i?t.children.length:-1)+s,m=o.concat(t);h>-1&&h<t.children.length;){if((l=u(t.children[h],h,m)())[0]===d)return l;h="number"==typeof l[1]?l[1]:h+s}}return g}}u(e,void 0,[])()}function f(e){return Array.isArray(e)?e:"number"==typeof e?[u,e]:null==e?c:[e]}e.s(["EXIT",0,d,"visitParents",()=>h],939049)},975609,(e,t,n)=>{"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},l=function(e){if(!e||"[object Object]"!==i.call(e))return!1;var t,n=r.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!o)return!1;for(t in e);return void 0===t||r.call(e,t)},c=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},u=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;else if(a)return a(e,t).value}return e[t]};t.exports=function e(){var t,n,r,i,o,a,d=arguments[0],p=1,h=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<h;++p)if(t=arguments[p],null!=t)for(n in t)r=u(d,n),d!==(i=u(t,n))&&(f&&i&&(l(i)||(o=s(i)))?(o?(o=!1,a=r&&s(r)?r:[]):a=r&&l(r)?r:{},c(d,{name:n,newValue:e(f,a,i)})):void 0!==i&&c(d,{name:n,newValue:i}));return d}},438819,(e,t,n)=>{"use strict";var r=e.e&&e.e.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=e.e&&e.e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var o=e.r(509473),a=e.r(743124);function s(e){return function(t){var n=t.defaultOrigin,s=void 0===n?"":n,l=t.allowedLinkPrefixes,c=void 0===l?[]:l,u=t.allowedImagePrefixes,d=void 0===u?[]:u,p=t.components,h=i(t,["defaultOrigin","allowedLinkPrefixes","allowedImagePrefixes","components"]),f=c.length&&!c.every(function(e){return"*"===e}),m=d.length&&!d.every(function(e){return"*"===e});if(!s&&(f||m))throw Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");var g=function(e){if("string"!=typeof e)return null;try{var t=new URL(e);return t}catch(n){if(s)try{var t=new URL(e,s);return t}catch(e){}return null}},v=function(e){return"string"==typeof e&&e.startsWith("/")},x=function(e,t){if(!e||!g(e))return null;if(t.includes("*")){var n=v(e),r=g(e);return r?n?r.pathname+r.search+r.hash:r.href:null}var i=v(e),o=g(e);return o&&t.some(function(e){var t=g(e);return!!t&&t.origin===o.origin&&o.href.startsWith(t.href)})?i?o.pathname+o.search+o.hash:o.href:null},y={a:function(e){var t=e.href,n=e.children,s=e.node,l=i(e,["href","children","node"]),u=x(t,c);return null!==u?(null==p?void 0:p.a)?(0,a.createElement)(p.a,r({href:u,children:n,node:s,target:"_blank",rel:"noopener noreferrer"},l)):(0,o.jsx)("a",r({href:u},l,{target:"_blank",rel:"noopener noreferrer",children:n})):(0,o.jsxs)("span",{className:"text-gray-500",title:"Blocked URL: ".concat(t),children:[n," [blocked]"]})},img:function(e){var t=e.src,n=e.alt,s=e.node,l=i(e,["src","alt","node"]),c=x(t,d);return null!==c?(null==p?void 0:p.img)?(0,a.createElement)(p.img,r({src:c,alt:n,node:s},l)):(0,o.jsx)("img",r({src:c,alt:n},l)):(0,o.jsxs)("span",{className:"inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",children:["[Image blocked: ",n||"No description","]"]})}},b=r(r({},p),y),w=r(r({},h),{components:b});return(0,a.createElement)(e,w)}}},194945,446207,694686,e=>{"use strict";var t=e.i(897802),n=e.i(352446),r=e.i(722259),i=e.i(509473),o=e.i(403010),a=t,s=e.i(576597),l=e.i(75615),c=e.i(939049);function u(e,t,n,r){let i,o,a;function s(e,t){let n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return a(e,r,n)}"function"==typeof t&&"function"!=typeof n?(o=void 0,a=t,i=n):(o=t,a=n,i=r),(0,c.visitParents)(e,o,s,i)}e.s(["visit",()=>u],446207);var d=e.i(417798);function p(e,t){let n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function h(e,t){let n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]}function f(e,t){let n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i={type:"element",tagName:"pre",properties:{},children:[i=e.applyData(t,i)]},e.patch(t,i),i}function m(e,t){let n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function g(e,t){let n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}var v=e.i(983691);function x(e,t){let n,r="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),o=(0,v.normalizeUri)(i.toLowerCase()),a=e.footnoteOrder.indexOf(i),s=e.footnoteCounts.get(i);void 0===s?(s=0,e.footnoteOrder.push(i),n=e.footnoteOrder.length):n=a+1,s+=1,e.footnoteCounts.set(i,s);let l={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+o,id:r+"fnref-"+o+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(n)}]};e.patch(t,l);let c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}var y=v;function b(e,t){let n=t.referenceType,r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];let i=e.all(t),o=i[0];o&&"text"===o.type?o.value="["+o.value:i.unshift({type:"text",value:"["});let a=i[i.length-1];return a&&"text"===a.type?a.value+=r:i.push({type:"text",value:r}),i}var w=v,j=v,C=v;function k(e){let t=!1;if("list"===e.type){t=e.spread||!1;let n=e.children,r=-1;for(;!t&&++r<n.length;)t=S(n[r])}return t}function S(e){let t=e.spread;return null==t?e.children.length>1:t}var N=d;let E=9,D=32;function I(e){let t=String(e),n=/\r?\n|\r/g,r=n.exec(t),i=0,o=[];for(;r;)o.push(A(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(A(t.slice(i),i>0,!1)),o.join("")}function A(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;t===E||t===D;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;t===E||t===D;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}let T={blockquote:p,break:h,code:f,delete:m,emphasis:g,footnoteReference:x,heading:function(e,t){let n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){let n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){let n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return b(e,t);let i={src:(0,y.normalizeUri)(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(i.title=r.title);let o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){let n={src:(0,w.normalizeUri)(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);let r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){let n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);let r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){let n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return b(e,t);let i={href:(0,j.normalizeUri)(r.url||"")};null!==r.title&&void 0!==r.title&&(i.title=r.title);let o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){let n={href:(0,C.normalizeUri)(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);let r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){let r=e.all(t),i=n?k(n):S(t),o={},a=[];if("boolean"==typeof t.checked){let e,n=r[0];n&&"element"===n.type&&"p"===n.tagName?e=n:(e={type:"element",tagName:"p",properties:{},children:[]},r.unshift(e)),e.children.length>0&&e.children.unshift({type:"text",value:" "}),e.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<r.length;){let e=r[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?a.push(e):a.push(...e.children)}let l=r[r.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});let c={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){let n={},r=e.all(t),i=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){let e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}let o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){let n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){let n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){let n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){let n=e.all(t),r=n.shift(),i=[];if(r){let n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){let r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=(0,N.pointStart)(t.children[1]),a=(0,N.pointEnd)(t.children[t.children.length-1]);o&&a&&(r.position={start:o,end:a}),i.push(r)}let o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)},tableCell:function(e,t){let n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){let r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,a=o?o.length:t.children.length,s=-1,l=[];for(;++s<a;){let n=t.children[s],r={},a=o?o[s]:void 0;a&&(r.align=a);let c={type:"element",tagName:i,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}let c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){let n={type:"text",value:I(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){let n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:M,yaml:M,definition:M,footnoteDefinition:M};function M(){}let L={}.hasOwnProperty,P={};function R(e,t){let n=t||P,r=new Map,i=new Map,o={all:s,applyData:O,definitionById:r,footnoteById:i,footnoteCounts:new Map,footnoteOrder:[],handlers:{...T,...n.handlers},one:a,options:n,patch:_,wrap:B};return u(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){let t="definition"===e.type?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),o;function a(e,t){let n=e.type,r=o.handlers[n];if(L.call(o.handlers,n)&&r)return r(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){let{children:t,...n}=e,r=(0,l.default)(n);return r.children=o.all(e),r}return(0,l.default)(e)}return(o.options.unknownHandler||F)(o,e,t)}function s(e){let t=[];if("children"in e){let n=e.children,r=-1;for(;++r<n.length;){let i=o.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=V(i.value)),!Array.isArray(i)&&"element"===i.type)){let e=i.children[0];e&&"text"===e.type&&(e.value=V(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t}}function _(e,t){e.position&&(t.position=(0,d.position)(e))}function O(e,t){let n=t;if(e&&e.data){let t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;"string"==typeof t&&("element"===n.type?n.tagName=t:n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}),"element"===n.type&&i&&Object.assign(n.properties,(0,l.default)(i)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function F(e,t){let n=t.data||{},r="value"in t&&!(L.call(n,"hProperties")||L.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function B(e,t){let n=[],r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function V(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function z(e,t){let n=R(e,t),r=n.one(e,void 0),i=(0,s.footer)(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&((0,a.ok)("children"in o),o.children.push({type:"text",value:"\n"},i)),o}function H(e,t){return e&&"run"in e?async function(n,r){let i=z(n,{file:r,...t});await e.run(i,r)}:function(n,r){return z(n,{file:r,...t||e})}}function U(e){if(e)throw e}var G=e.i(975609),W=t;function q(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Z(){let e=[],t={run:n,use:r};return t;function n(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1,o=n.pop();if("function"!=typeof o)throw TypeError("Expected function as last argument, not "+o);function a(t){for(var r=arguments.length,s=Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];let c=e[++i],u=-1;if(t)return void o(t);for(;++u<n.length;)(null===s[u]||void 0===s[u])&&(s[u]=n[u]);n=s,c?K(c,a)(...s):o(null,...s)}a(null,...n)}function r(n){if("function"!=typeof n)throw TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}}function K(e,t){let n;return r;function r(){let t;for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];let l=e.length>a.length;l&&a.push(i);try{t=e.apply(this,a)}catch(t){let e=t;if(l&&n)throw e;return i(e)}l||(t instanceof Promise?t.then(o,i):t instanceof Error?i(t):o(t))}function i(e){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n||(n=!0,t(e,...i))}function o(e){i(null,e)}}var $=e.i(842965);let Y={basename:J,dirname:Q,extname:X,join:ee,sep:"/"};function J(e,t){let n;if(void 0!==t&&"string"!=typeof t)throw TypeError('"ext" argument must be a string');er(e);let r=0,i=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else i<0&&(n=!0,i=o+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let a=-1,s=t.length-1;for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else a<0&&(n=!0,a=o+1),s>-1&&(e.codePointAt(o)===t.codePointAt(s--)?s<0&&(i=o):(s=-1,i=a));return r===i?i=a:i<0&&(i=e.length),e.slice(r,i)}function Q(e){let t;if(er(e),0===e.length)return".";let n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)}function X(e){let t;er(e);let n=e.length,r=-1,i=0,o=-1,a=0;for(;n--;){let s=e.codePointAt(n);if(47===s){if(t){i=n+1;break}continue}r<0&&(t=!0,r=n+1),46===s?o<0?o=n:1!==a&&(a=1):o>-1&&(a=-1)}return o<0||r<0||0===a||1===a&&o===r-1&&o===i+1?"":e.slice(o,r)}function ee(){let e;for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1;for(;++i<n.length;)er(n[i]),n[i]&&(e=void 0===e?n[i]:e+"/"+n[i]);return void 0===e?".":et(e)}function et(e){er(e);let t=47===e.codePointAt(0),n=en(e,!t);return 0!==n.length||t||(n="."),n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/"),t?"/"+n:n}function en(e,t){let n,r,i="",o=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else if(47===n)break;else n=47;if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(i.length<2||2!==o||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2)){if(i.length>2){if((r=i.lastIndexOf("/"))!==i.length-1){r<0?(i="",o=0):o=(i=i.slice(0,r)).length-1-i.lastIndexOf("/"),a=l,s=0;continue}}else if(i.length>0){i="",o=0,a=l,s=0;continue}}t&&(i=i.length>0?i+"/..":"..",o=2)}else i.length>0?i+="/"+e.slice(a+1,l):i=e.slice(a+1,l),o=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}function er(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}let ei={cwd:eo};function eo(){return"/"}function ea(e){return!!(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function es(e){if("string"==typeof e)e=new URL(e);else if(!ea(e)){let t=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){let e=TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return el(e)}function el(e){if(""!==e.hostname){let e=TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}let t=e.pathname,n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){let e=t.codePointAt(n+2);if(70===e||102===e){let e=TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}let ec=["history","path","basename","stem","extname","dirname"];class eu{get basename(){return"string"==typeof this.path?Y.basename(this.path):void 0}set basename(e){ep(e,"basename"),ed(e,"basename"),this.path=Y.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?Y.dirname(this.path):void 0}set dirname(e){eh(this.basename,"dirname"),this.path=Y.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?Y.extname(this.path):void 0}set extname(e){if(ed(e,"extname"),eh(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw Error("`extname` must start with `.`");if(e.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=Y.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ea(e)&&(e=es(e)),ep(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?Y.basename(this.path,this.extname):void 0}set stem(e){ep(e,"stem"),ed(e,"stem"),this.path=Y.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){let r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){let r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){let r=new $.VFileMessage(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}constructor(e){let t,n;t=e?ea(e)?{path:e}:"string"==typeof e||ef(e)?{value:e}:e:{},this.cwd=ei.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ec.length;){let e=ec[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)ec.includes(n)||(this[n]=t[n])}}function ed(e,t){if(e&&e.includes(Y.sep))throw Error("`"+t+"` cannot be a path: did not expect `"+Y.sep+"`")}function ep(e,t){if(!e)throw Error("`"+t+"` cannot be empty")}function eh(e,t){if(!e)throw Error("Setting `"+t+"` requires `path` to be set too")}function ef(e){return!!(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}let em=function(e){let t=this,n=t.constructor.prototype,r=n[e],i=function(){return r.apply(i,arguments)};return Object.setPrototypeOf(i,n),i},eg={}.hasOwnProperty;class ev extends em{copy(){let e=new ev,t=-1;for(;++t<this.attachers.length;){let n=this.attachers[t];e.use(...n)}return e.data((0,G.default)(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2==arguments.length?(ew("data",this.frozen),this.namespace[e]=t,this):eg.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ew("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);let r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=1/0,this}parse(e){this.freeze();let t=ek(e),n=this.parser||this.Parser;return ey("parse",n),n(String(t),t)}process(e,t){let n=this;return this.freeze(),ey("process",this.parser||this.Parser),eb("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){let o=ek(e),a=n.parse(o);function s(e,n){e||!n?i(e):r?r(n):((0,W.ok)(t,"`done` is defined if `resolve` is not"),t(void 0,n))}n.run(a,o,function(e,t,r){if(e||!t||!r)return s(e);let i=t,o=n.stringify(i,r);eN(o)?r.value=o:r.result=o,s(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),ey("processSync",this.parser||this.Parser),eb("processSync",this.compiler||this.Compiler),this.process(e,r),eC("processSync","process",n),(0,W.ok)(t,"we either bailed on an error or have a tree"),t;function r(e,r){n=!0,U(e),t=r}}run(e,t,n){ej(e),this.freeze();let r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,o){(0,W.ok)("function"!=typeof t,"`file` can’t be a `done` anymore, we checked");let a=ek(t);function s(t,r,a){let s=r||e;t?o(t):i?i(s):((0,W.ok)(n,"`done` is defined if `resolve` is not"),n(void 0,s,a))}r.run(e,a,s)}}runSync(e,t){let n,r=!1;return this.run(e,t,i),eC("runSync","run",r),(0,W.ok)(n,"we either bailed on an error or have a tree"),n;function i(e,t){U(e),n=t,r=!0}}stringify(e,t){this.freeze();let n=ek(t),r=this.compiler||this.Compiler;return eb("stringify",r),ej(e),r(e,n)}use(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.attachers,o=this.namespace;if(ew("use",this.frozen),null==e);else if("function"==typeof e)c(e,n);else if("object"==typeof e)Array.isArray(e)?l(e):s(e);else throw TypeError("Expected usable value, not `"+e+"`");return this;function a(e){if("function"==typeof e)c(e,[]);else if("object"==typeof e)if(Array.isArray(e)){let[t,...n]=e;c(t,n)}else s(e);else throw TypeError("Expected usable value, not `"+e+"`")}function s(e){if(!("plugins"in e)&&!("settings"in e))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(o.settings=(0,G.default)(!0,o.settings,e.settings))}function l(e){let t=-1;if(null==e);else if(Array.isArray(e))for(;++t<e.length;)a(e[t]);else throw TypeError("Expected a list of plugins, not `"+e+"`")}function c(e,t){let n=-1,r=-1;for(;++n<i.length;)if(i[n][0]===e){r=n;break}if(-1===r)i.push([e,...t]);else if(t.length>0){let[n,...o]=t,a=i[r][1];q(a)&&q(n)&&(n=(0,G.default)(!0,a,n)),i[r]=[e,n,...o]}}}constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Z()}}let ex=new ev().freeze();function ey(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `parser`")}function eb(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `compiler`")}function ew(e,t){if(t)throw Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ej(e){if(!q(e)||"string"!=typeof e.type)throw TypeError("Expected node, got `"+e+"`")}function eC(e,t,n){if(!n)throw Error("`"+e+"` finished async. Use `"+t+"` instead")}function ek(e){return eS(e)?e:new eu(e)}function eS(e){return!!(e&&"object"==typeof e&&"message"in e&&"messages"in e)}function eN(e){return"string"==typeof e||eE(e)}function eE(e){return!!(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}let eD="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",eI=[],eA={allowDangerousHtml:!0},eT=/^(https?|ircs?|mailto|xmpp)$/i,eM=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function eL(e){let a=e.allowedElements,s=e.allowElement,l=e.children||"",c=e.className,d=e.components,p=e.disallowedElements,h=e.rehypePlugins||eI,f=e.remarkPlugins||eI,m=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...eA}:eA,g=e.skipHtml,v=e.unwrapDisallowed,x=e.urlTransform||eP,y=ex().use(o.default).use(f).use(H,m).use(h),b=new eu;for(let n of("string"==typeof l?b.value=l:(0,t.unreachable)("Unexpected value `"+l+"` for `children` prop, expected `string`"),a&&p&&(0,t.unreachable)("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),eM))Object.hasOwn(e,n.from)&&(0,t.unreachable)("Unexpected `"+n.from+"` prop, "+(n.to?"use `"+n.to+"` instead":"remove it")+" (see <"+eD+"#"+n.id+"> for more info)");let w=y.parse(b),j=y.runSync(w,b);return c&&(j={type:"element",tagName:"div",properties:{className:c},children:"root"===j.type?j.children:[j]}),u(j,C),(0,n.toJsxRuntime)(j,{Fragment:i.Fragment,components:d,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function C(e,t,n){if("raw"===e.type&&n&&"number"==typeof t)return g?n.children.splice(t,1):n.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in r.urlAttributes)if(Object.hasOwn(r.urlAttributes,t)&&Object.hasOwn(e.properties,t)){let n=e.properties[t],i=r.urlAttributes[t];(null===i||i.includes(e.tagName))&&(e.properties[t]=x(String(n||""),t,e))}}if("element"===e.type){let r=a?!a.includes(e.tagName):!!p&&p.includes(e.tagName);if(!r&&s&&"number"==typeof t&&(r=!s(e,t,n)),r&&n&&"number"==typeof t)return v&&e.children?n.children.splice(t,1,...e.children):n.children.splice(t,1),t}}}function eP(e){let t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||eT.test(e.slice(0,t))?e:""}e.s(["default",()=>eL],194945),e.i(643908);let eR=["*"],e_=["https://hebbkx1anhila5yf.public.blob.vercel-storage.com/"],eO="https://".concat("v0.app","/");e.s(["allowedImagePrefixes",0,e_,"allowedLinkPrefixes",0,eR,"defaultOrigin",0,eO],694686)},85830,e=>{"use strict";e.i(168204);var t=e.i(225695);function n(e){var t,n;if("parts"===e.content.type&&"user"===e.role)return!(null==(t=e.content.parts)?void 0:t.length)&&(!e.attachments||0===e.attachments.length);if("parts"===e.content.type)return(null==(n=e.content.parts)?void 0:n.length)===0;let r=e.content.value;if(!r||0===r.length)return!0;let i=1===r.length&&1===r[0][0],o=r.length>0&&0===r[0][0]&&0===r[0][1].length;return i||o}function r(e){var n;return"user"===e.role&&(null==(n=e.content.parts)?void 0:n.length)&&(0,t.stringifyMessageContent)(e.content).startsWith("<v0_local_project_task>")}function i(e){var n;return"user"===e.role&&(null==(n=e.content.parts)?void 0:n.length)&&(0,t.stringifyMessageContent)(e.content).startsWith("<user_action ")}e.s(["isMessageEmpty",()=>n,"isRemoteLocalChangeMessage",()=>i,"isRemoteSessionHandshakeMessage",()=>r])},106227,e=>{"use strict";function t(e){if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}e.s(["default",()=>t])},661535,393978,e=>{"use strict";var t=e.i(509473),n=e.i(106227),r=e.i(939049),i=e.i(249548);function o(e,t,n){let o=n||{},s=(0,i.convert)(o.ignore||[]),l=a(t),c=-1;for(;++c<l.length;)(0,r.visitParents)(e,"text",u);function u(e,t){let n,r=-1;for(;++r<t.length;){let e=t[r],i=n?n.children:void 0;if(s(e,i?i.indexOf(e):void 0,n))return;n=e}if(n)return d(e,t)}function d(e,t){let n=t[t.length-1],r=l[c][0],i=l[c][1],o=0,a=n.children.indexOf(e),s=!1,u=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){let n=d.index,a={index:d.index,input:d.input,stack:[...t,e]},l=i(...d,a);if("string"==typeof l&&(l=l.length>0?{type:"text",value:l}:void 0),!1===l?r.lastIndex=n+1:(o!==n&&u.push({type:"text",value:e.value.slice(o,n)}),Array.isArray(l)?u.push(...l):l&&u.push(l),o=n+d[0].length,s=!0),!r.global)break;d=r.exec(e.value)}return s?(o<e.value.length&&u.push({type:"text",value:e.value.slice(o)}),n.children.splice(a,1,...u)):u=[e],a+u.length}}function a(e){let t=[];if(!Array.isArray(e))throw TypeError("Expected find and replace tuple or list of tuples");let n=!e[0]||Array.isArray(e[0])?e:[e],r=-1;for(;++r<n.length;){let e=n[r];t.push([s(e[0]),l(e[1])])}return t}function s(e){return"string"==typeof e?RegExp((0,n.default)(e),"g"):e}function l(e){return"function"==typeof e?e:function(){return e}}e.s(["findAndReplace",()=>o],393978);let c=/^#([0-9a-f]{6}|[0-9a-f]{8})$/i;function u(e){return c.test(e)}function d(e){let{value:n,...r}=e;return(0,t.jsxs)("code",{...r,className:"font-mono font-normal before:hidden rounded-[0.375rem] border bg-v0-gray-100 px-[0.15rem] h-5 after:hidden inline-flex items-center gap-0.5 align-middle",children:[(0,t.jsx)("span",{className:"inline-block size-3 rounded-[0.2rem] border",style:{backgroundColor:n}}),n]})}function p(){function e(e){if(-1===e.indexOf("#")||!c.test(e))return e;let t=[];for(;;){let n=c.exec(e);if(!n)break;let r=n[0],i=n.index;i>0&&t.push({type:"text",value:e.substring(0,i)}),t.push({type:"inlineCode",value:r}),e=e.substring(i+r.length)}return e.length>0&&t.push({type:"text",value:e}),t}return t=>{o(t,[[/#([0-9a-f]{6}|[0-9a-f]{8})\b/gi,e]],{ignore:["html","link","linkReference","image","imageReference","code","inlineCode"]})}}e.s(["ColorCode",()=>d,"isColorCode",()=>u,"remarkColor",()=>p],661535)},60520,e=>{e.v({shimmer:"shimmer-children-module__Q2XpNG__shimmer",shimmerAnimation:"shimmer-children-module__Q2XpNG__shimmerAnimation"})},919409,e=>{"use strict";var t=e.i(509473),n=e.i(675120),r=e.i(403055),i=e.i(60520);function o(e){let{children:o,duration:a=.65,shimmer:s,justify:l="start",autoTransitionKey:c=!1}=e;return(0,t.jsx)(n.TransitionNode,{childClassName:"truncate",duration:.35,delay:.35*.66,justify:l,renderKey:c?void 0:s?"shimmer":"text",children:s?(0,t.jsx)("div",{className:(0,r.cn)(i.default.shimmer,"[--shimmer-base:theme(colors.gray.900)] [--shimmer-highlight:theme(colors.gray.300)]"),style:{animationDuration:"".concat(a,"s")},children:o},"shimmer"):(0,t.jsx)("div",{className:"transition-colors duration-100 truncate",children:o},"text")})}e.s(["ShimmerChildren",()=>o])},521603,895336,e=>{"use strict";let t;var n,r=e.i(743124),i=e.i(230840);let o=!0;function a(){let e=(0,i._)([":host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:"," !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(",") / var(--width));transform:translateX(var(",")) scaleX(var(--scale-x));margin:0 calc(-1 * ",");position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ",",#000 calc(100% - ","),transparent ),linear-gradient(to bottom,transparent 0,#000 ",",#000 calc(100% - ","),transparent 100% ),radial-gradient(at bottom right,","),radial-gradient(at bottom left,","),radial-gradient(at top left,","),radial-gradient(at top right,",");-webkit-mask-size:100% calc(100% - "," * 2),calc(100% - "," * 2) 100%,"," ",","," ",","," ",","," ",";-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:"," ",";transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(",void 0,")}.digit__num,.number .section::after{padding:"," 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(","))}"],[":host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:"," !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(",") / var(--width));transform:translateX(var(",")) scaleX(var(--scale-x));margin:0 calc(-1 * ",");position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ",",#000 calc(100% - ","),transparent ),linear-gradient(to bottom,transparent 0,#000 ",",#000 calc(100% - ","),transparent 100% ),radial-gradient(at bottom right,","),radial-gradient(at bottom left,","),radial-gradient(at top left,","),radial-gradient(at top right,",");-webkit-mask-size:100% calc(100% - "," * 2),calc(100% - "," * 2) 100%,"," ",","," ",","," ",","," ",";-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:"," ",";transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(",")))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(",")}.digit__num,.number .section::after{padding:"," 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(","))}"]);return a=function(){return e},e}function s(){let e=(0,i._)([":host{display:inline-block;direction:ltr;white-space:nowrap;line-height:"," !important}span{display:inline-block}:host([data-will-change]) span{will-change:transform}.number,.digit{padding:"," 0}.symbol{white-space:pre}"]);return s=function(){return e},e}function l(){let e=(0,i._)(['<template shadowroot="open" shadowrootmode="open"\n			><style>\n				','</style\n			><span role="img" aria-label="','"\n				>','<span part="number" class="number"\n					>',"","</span\n				>",'</span\n			></template\n		><span\n			style="font-kerning: none; display: inline-block; line-height: '," !important; padding: ",' 0;"\n			>',"</span\n		>"]);return l=function(){return e},e}let c=(e,t,n)=>{let r=document.createElement(e),[i,o]=Array.isArray(t)?[void 0,t]:[t,n];return i&&Object.assign(r,i),null==o||o.forEach(e=>r.appendChild(e)),r},u=(e,t)=>{var n,r;return"left"===t?e.offsetLeft:(null!=(r=null==(n=e.offsetParent instanceof HTMLElement?e.offsetParent:null)?void 0:n.offsetWidth)?r:0)-e.offsetWidth-e.offsetLeft},d=e=>e.offsetWidth>0&&e.offsetHeight>0,p=(e,t)=>{o&&customElements.get(e)!==t&&customElements.define(e,t)};function h(e,t){let{reverse:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.length;for(let i=n?r-1:0;n?i>=0:i<r;n?i--:i++)t(e[i],i)}function f(e,t,n,r){let i=t.formatToParts(e);n&&i.unshift({type:"prefix",value:n}),r&&i.push({type:"suffix",value:r});let o=[],a=[],s=[],l=[],c={},u=e=>{var t;return"".concat(e,":").concat(c[e]=(null!=(t=c[e])?t:-1)+1)},d="",p=!1,h=!1;for(let e of i){d+=e.value;let t="minusSign"===e.type||"plusSign"===e.type?"sign":e.type;"integer"===t?(p=!0,a.push(...e.value.split("").map(e=>({type:t,value:parseInt(e)})))):"group"===t?a.push({type:t,value:e.value}):"decimal"===t?(h=!0,s.push({type:t,value:e.value,key:u(t)})):"fraction"===t?s.push(...e.value.split("").map(e=>({type:t,value:parseInt(e),key:u(t),pos:-1-c[t]}))):(p||h?l:o).push({type:t,value:e.value,key:u(t)})}let f=[];for(let e=a.length-1;e>=0;e--){let t=a[e];f.unshift("integer"===t.type?{...t,key:u(t.type),pos:c[t.type]}:{...t,key:u(t.type)})}return{pre:o,integer:f,fraction:s,post:l,valueAsString:d,value:"string"==typeof e?parseFloat(e):e}}let m=String.raw,g=String.raw,v=o&&(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0})(),x=o&&"u">typeof CSS&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),y=o&&"u">typeof matchMedia?matchMedia("(prefers-reduced-motion: reduce)"):null,b="--_number-flow-d-opacity",w="--_number-flow-d-width",j="--_number-flow-dx",C="--_number-flow-d",k=(()=>{try{return CSS.registerProperty({name:b,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:j,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:w,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:C,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch(e){return!1}})(),S="var(--number-flow-char-height, 1em)",N="var(--number-flow-mask-height, 0.25em)",E="calc(".concat(N," / 2)"),D="var(--number-flow-mask-width, 0.5em)",I="calc(".concat(D," / var(--scale-x))"),A="#000 0, transparent 71%",T=g(a(),S,w,j,D,I,I,N,N,A,A,A,A,N,I,I,N,I,N,I,N,I,N,E,D,j,C,E,b),M=o?HTMLElement:class{},L=g(s(),S,E),P=e=>'<span class="'.concat("integer"===e.type||"fraction"===e.type?"digit":"symbol",'" part="').concat("integer"===e.type||"fraction"===e.type?"digit ".concat(e.type,"-digit"):"symbol ".concat(e.type),'">').concat(e.value,"</span>"),R=(e,t)=>'<span part="'.concat(t,'">').concat(e.reduce((e,t)=>e+P(t),""),"</span>"),_=e=>m(l(),L,e.valueAsString,R(e.pre,"left"),R(e.integer,"integer"),R(e.fraction,"fraction"),R(e.post,"right"),S,N,e.valueAsString),O=x&&v&&k;class F extends M{get animated(){return this._animated}set animated(e){var t;this.animated!==e&&(this._animated=e,null==(t=this.shadowRoot)||t.getAnimations().forEach(e=>e.finish()))}set data(e){var n,r;if(null==e)return;let{pre:i,integer:o,fraction:a,post:s,value:l}=e;if(this.created){let t=this._data;this._data=e,this.computedTrend="function"==typeof this.trend?this.trend(t.value,l):this.trend,this.computedAnimated=O&&this._animated&&(!this.respectMotionPreference||!(null!=y&&y.matches))&&d(this),null==(n=this.plugins)||n.forEach(n=>{var r;return null==(r=n.onUpdate)?void 0:r.call(n,e,t,this)}),this.batched||this.willUpdate(),this._pre.update(i),this._num.update({integer:o,fraction:a}),this._post.update(s),this.batched||this.didUpdate()}else{this._data=e,this.attachShadow({mode:"open"});try{null!=(r=this._internals)||(this._internals=this.attachInternals()),this._internals.role="img"}catch(e){}if("u">typeof CSSStyleSheet&&this.shadowRoot.adoptedStyleSheets)t||(t=new CSSStyleSheet).replaceSync(T),this.shadowRoot.adoptedStyleSheets=[t];else{let e=document.createElement("style");e.textContent=T,this.shadowRoot.appendChild(e)}this._pre=new H(this,i,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new B(this,o,a),this.shadowRoot.appendChild(this._num.el),this._post=new H(this,s,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el),this.created=!0}try{this._internals.ariaLabel=e.valueAsString}catch(e){}}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();let e=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(e=>e.finished)).then(()=>{e.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=e}constructor(){super(),this.created=!1,this.batched=!1;let{animated:e,...t}=this.constructor.defaultProps;this._animated=this.computedAnimated=e,Object.assign(this,t)}}F.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(e,t)=>Math.sign(t-e),respectMotionPreference:!0,plugins:void 0,digits:void 0};class B{willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update(e){let{integer:t,fraction:n}=e;this._integer.update(t),this._fraction.update(n)}didUpdate(){let e=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();let t=this._prevLeft-e.left,n=this.el.offsetWidth,r=this._prevWidth-n;this.el.style.setProperty("--width",String(n)),this.el.animate({[j]:["".concat(t,"px"),"0px"],[w]:[r,0]},{...this.flow.transformTiming,composite:"accumulate"})}constructor(e,t,n,{className:r,...i}={}){this.flow=e,this._integer=new z(e,t,{justify:"right",part:"integer"}),this._fraction=new z(e,n,{justify:"left",part:"fraction"}),this._inner=c("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=c("span",{...i,part:"number",className:"number ".concat(null!=r?r:"")},[this._inner])}}class V{addChar(e){let{startDigitsAtZero:t=!1,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="integer"===e.type||"fraction"===e.type?new W(this,e.type,t?0:e.value,e.pos,{...n,onRemove:this.onCharRemove(e.key)}):new q(this,e.type,e.value,{...n,onRemove:this.onCharRemove(e.key)});return this.children.set(e.key,r),r}unpop(e){e.el.removeAttribute("inert"),e.el.style.top="",e.el.style[this.justify]=""}pop(e){e.forEach(e=>{e.el.style.top="".concat(e.el.offsetTop,"px"),e.el.style[this.justify]="".concat(u(e.el,this.justify),"px")}),e.forEach(e=>{e.el.setAttribute("inert",""),e.present=!1})}addNewAndUpdateExisting(e){let t=new Map,n=new Map,r="left"===this.justify,i=r?"prepend":"append";if(h(e,e=>{let r;this.children.has(e.key)?(r=this.children.get(e.key),n.set(e,r),this.unpop(r),r.present=!0):(r=this.addChar(e,{startDigitsAtZero:!0,animateIn:!0}),t.set(e,r)),this.el[i](r.el)},{reverse:r}),this.flow.computedAnimated){let e=this.el.getBoundingClientRect();t.forEach(t=>{t.willUpdate(e)})}t.forEach((e,t)=>{e.update(t.value)}),n.forEach((e,t)=>{e.update(t.value)})}willUpdate(){let e=this.el.getBoundingClientRect();this._prevOffset=e[this.justify],this.children.forEach(t=>t.willUpdate(e))}didUpdate(){let e=this.el.getBoundingClientRect();this.children.forEach(t=>t.didUpdate(e));let t=e[this.justify],n=this._prevOffset-t;n&&this.children.size&&this.el.animate({transform:["translateX(".concat(n,"px)"),"none"]},{...this.flow.transformTiming,composite:"accumulate"})}constructor(e,t,{justify:n,className:r,...i},o){this.flow=e,this.children=new Map,this.onCharRemove=e=>()=>{this.children.delete(e)},this.justify=n;let a=t.map(e=>this.addChar(e).el);this.el=c("span",{...i,className:"section section--justify-".concat(n," ").concat(null!=r?r:"")},o?o(a):a)}}class z extends V{update(e){let t=new Map;this.children.forEach((n,r)=>{e.find(e=>e.key===r)||t.set(r,n),this.unpop(n)}),this.addNewAndUpdateExisting(e),t.forEach(e=>{e instanceof W&&e.update(0)}),this.pop(t)}}class H extends V{update(e){let t=new Map;this.children.forEach((n,r)=>{e.find(e=>e.key===r)||t.set(r,n)}),this.pop(t),this.addNewAndUpdateExisting(e)}}class U{get present(){return this._present}set present(e){if(this._present!==e){if(this._present=e,e?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){e||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",e?"0":"-.999"),this.el.animate({[b]:e?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),e?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}constructor(e,t,{onRemove:n,animateIn:r=!1}={}){this.flow=e,this.el=t,this._present=!0,this._remove=()=>{var e;this.el.remove(),null==(e=this._onRemove)||e.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&r&&this.el.animate({[b]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=n}}class G extends U{constructor(e,t,n,r){super(e.flow,n,r),this.section=e,this.value=t,this.el=n}}class W extends G{willUpdate(e){let t=this.el.getBoundingClientRect();this._prevValue=this.value;let n=t[this.section.justify]-e[this.section.justify],r=t.width/2;this._prevCenter="left"===this.section.justify?n+r:n-r}update(e){this.el.style.setProperty("--current",String(e)),this._numbers.forEach((t,n)=>n===e?t.removeAttribute("inert"):t.setAttribute("inert","")),this.value=e}didUpdate(e){var t;let n=this.el.getBoundingClientRect(),r=n[this.section.justify]-e[this.section.justify],i=n.width/2,o="left"===this.section.justify?r+i:r-i,a=this._prevCenter-o;a&&this.el.animate({transform:["translateX(".concat(a,"px)"),"none"]},{...this.flow.transformTiming,composite:"accumulate"});let s=this.getDelta();s&&(this.el.classList.add("is-spinning"),this.el.animate({[C]:[-s,0]},{...null!=(t=this.flow.spinTiming)?t:this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var e;if(this.flow.plugins)for(let t of this.flow.plugins){let n=null==(e=t.getDelta)?void 0:e.call(t,this.value,this._prevValue,this);if(null!=n)return n}let t=this.value-this._prevValue,n=this.flow.computedTrend||Math.sign(t);return n<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:n>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:t}constructor(e,t,n,r,i){var o,a,s;let l=(null!=(s=null==(a=null==(o=e.flow.digits)?void 0:o[r])?void 0:a.max)?s:9)+1,u=Array.from({length:l}).map((e,t)=>{let r=c("span",{className:"digit__num"},[document.createTextNode(String(t))]);return t!==n&&r.setAttribute("inert",""),r.style.setProperty("--n",String(t)),r}),d=c("span",{part:"digit ".concat(t,"-digit"),className:"digit"},u);d.style.setProperty("--current",String(n)),d.style.setProperty("--length",String(l)),super(e,n,d,i),this.pos=r,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=u,this.length=l}}class q extends G{willUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect();this._prevOffset=t[this.section.justify]-e[this.section.justify]}update(e){if(this.value!==e){let t=this._children.get(this.value);t&&(t.present=!1);let n=this._children.get(e);if(n)n.present=!0;else{let t=c("span",{className:"symbol__value",textContent:e});this.el.appendChild(t),this._children.set(e,new U(this.flow,t,{animateIn:!0,onRemove:this._onChildRemove(e)}))}}this.value=e}didUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect()[this.section.justify]-e[this.section.justify],n=this._prevOffset-t;n&&this.el.animate({transform:["translateX(".concat(n,"px)"),"none"]},{...this.flow.transformTiming,composite:"accumulate"})}constructor(e,t,n,r){let i=c("span",{className:"symbol__value",textContent:n});super(e,n,c("span",{part:"symbol ".concat(t),className:"symbol"},[i]),r),this.type=t,this._children=new Map,this._onChildRemove=e=>()=>{this._children.delete(e)},this._children.set(n,new U(this.flow,i,{onRemove:this._onChildRemove(n)}))}}var Z=r;let K=parseInt(null==(n=Z.version.match(/^(\d+)\./))?void 0:n[1])>=19,$=["data","digits"];class Y extends F{attributeChangedCallback(e,t,n){this[e]=JSON.parse(n)}}Y.observedAttributes=K?[]:$,p("number-flow-react",Y);let J={},Q=K?e=>e:JSON.stringify;function X(e){let{transformTiming:t,spinTiming:n,opacityTiming:r,animated:i,respectMotionPreference:o,trend:a,plugins:s,...l}=e;return[{transformTiming:t,spinTiming:n,opacityTiming:r,animated:i,respectMotionPreference:o,trend:a,plugins:s},l]}class ee extends Z.Component{updateProperties(e){if(!this.el)return;this.el.batched=!this.props.isolate;let[t]=X(this.props);Object.entries(t).forEach(e=>{let[t,n]=e;this.el[t]=null!=n?n:Y.defaultProps[t]}),(null==e?void 0:e.onAnimationsStart)&&this.el.removeEventListener("animationsstart",e.onAnimationsStart),this.props.onAnimationsStart&&this.el.addEventListener("animationsstart",this.props.onAnimationsStart),(null==e?void 0:e.onAnimationsFinish)&&this.el.removeEventListener("animationsfinish",e.onAnimationsFinish),this.props.onAnimationsFinish&&this.el.addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateProperties(),K&&this.el&&(this.el.digits=this.props.digits,this.el.data=this.props.data)}getSnapshotBeforeUpdate(e){if(this.updateProperties(e),e.data!==this.props.data){if(this.props.group)return this.props.group.willUpdate(),()=>{var e;return null==(e=this.props.group)?void 0:e.didUpdate()};if(!this.props.isolate){var t;return null==(t=this.el)||t.willUpdate(),()=>{var e;return null==(e=this.el)?void 0:e.didUpdate()}}}return null}componentDidUpdate(e,t,n){null==n||n()}handleRef(e){this.props.innerRef&&(this.props.innerRef.current=e),this.el=e}render(){let[e,{innerRef:t,className:n,data:r,willChange:i,isolate:a,group:s,digits:l,onAnimationsStart:c,onAnimationsFinish:u,...d}]=X(this.props);return Z.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":i?"":void 0,class:n,...d,dangerouslySetInnerHTML:{__html:o?"":_(r)},suppressHydrationWarning:!0,digits:Q(l),data:Q(r)})}constructor(e){super(e),this.handleRef=this.handleRef.bind(this)}}let et=Z.forwardRef(function(e,t){let{value:n,locales:r,format:i,prefix:o,suffix:a,...s}=e;Z.useImperativeHandle(t,()=>l.current,[]);let l=Z.useRef(),c=Z.useContext(en);null==c||c.useRegister(l);let u=Z.useMemo(()=>r?JSON.stringify(r):"",[r]),d=Z.useMemo(()=>i?JSON.stringify(i):"",[i]),p=Z.useMemo(()=>{var e,t,s;return f(n,null!=(s=(e=J)[t="".concat(u,":").concat(d)])?s:e[t]=new Intl.NumberFormat(r,i),o,a)},[n,u,d,o,a]);return Z.createElement(ee,{...s,group:c,data:p,innerRef:l})}),en=Z.createContext(void 0);e.s([],521603),e.s(["default",()=>et],895336)},722978,e=>{"use strict";function t(e){var n,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(r=t(e[n]))&&(i&&(i+=" "),i+=r);else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function n(){for(var e,n,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(n=t(e))&&(i&&(i+=" "),i+=n);return i}let r=n;e.s(["clsx",()=>n,"default",0,r])},104720,e=>{e.v({"bg-close":"primitives-module__gWXxya__bg-close","bg-open":"primitives-module__gWXxya__bg-open",content:"primitives-module__gWXxya__content",renderedParts:"primitives-module__gWXxya__renderedParts",timelineLine:"primitives-module__gWXxya__timelineLine"})},737374,e=>{e.v({overflowMessage:"messages-module__LvwksW__overflowMessage"})},985005,397036,424725,e=>{"use strict";var t=e.i(722978),n="-";function r(e){var t=s(e),r=e.conflictingClassGroups,o=e.conflictingClassGroupModifiers,l=void 0===o?{}:o;return{getClassGroupId:function(e){var r=e.split(n);return""===r[0]&&1!==r.length&&r.shift(),i(r,t)||a(e)},getConflictingClassGroupIds:function(e,t){var n=r[e]||[];return t&&l[e]?[].concat(n,l[e]):n}}}function i(e,t){if(0===e.length)return t.classGroupId;var r,o=e[0],a=t.nextPart.get(o),s=a?i(e.slice(1),a):void 0;if(s)return s;if(0!==t.validators.length){var l=e.join(n);return null==(r=t.validators.find(function(e){return(0,e.validator)(l)}))?void 0:r.classGroupId}}var o=/^\[(.+)\]$/;function a(e){if(o.test(e)){var t=o.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function s(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]};return d(Object.entries(e.classGroups),n).forEach(function(e){var n=e[0];l(e[1],r,n,t)}),r}function l(e,t,n,r){e.forEach(function(e){if("string"==typeof e){(""===e?t:c(t,e)).classGroupId=n;return}if("function"==typeof e)return u(e)?void l(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(function(e){var i=e[0];l(e[1],c(t,i),n,r)})})}function c(e,t){var r=e;return t.split(n).forEach(function(e){r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r}function u(e){return e.isThemeGetter}function d(e,t){return t?e.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){return[t+e[0],e[1]]})):e})]}):e}function p(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function i(i,o){n.set(i,o),++t>e&&(t=0,r=n,n=new Map)}return{get:function(e){var t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set:function(e,t){n.has(e)?n.set(e,t):i(e,t)}}}var h="!";function f(e){var t=e.separator||":",n=1===t.length,r=t[0],i=t.length;return function(e){for(var o,a=[],s=0,l=0,c=0;c<e.length;c++){var u=e[c];if(0===s){if(u===r&&(n||e.slice(c,c+i)===t)){a.push(e.slice(l,c)),l=c+i;continue}if("/"===u){o=c;continue}}"["===u?s++:"]"===u&&s--}var d=0===a.length?e:e.substring(l),p=d.startsWith(h),f=p?d.substring(1):d;return{modifiers:a,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:o&&o>l?o-l:void 0}}}function m(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,n.sort().concat([e])),n=[]):n.push(e)}),t.push.apply(t,n.sort()),t}function g(e){return{cache:p(e.cacheSize),splitModifiers:f(e),...r(e)}}var v=/\s+/;function x(e,t){var n=t.splitModifiers,r=t.getClassGroupId,i=t.getConflictingClassGroupIds,o=new Set;return e.trim().split(v).map(function(e){var t=n(e),i=t.modifiers,o=t.hasImportantModifier,a=t.baseClassName,s=t.maybePostfixModifierPosition,l=r(s?a.substring(0,s):a),c=!!s;if(!l){if(!s||!(l=r(a)))return{isTailwindClass:!1,originalClassName:e};c=!1}var u=m(i).join(":");return{isTailwindClass:!0,modifierId:o?u+h:u,classGroupId:l,originalClassName:e,hasPostfixModifier:c}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,n=e.classGroupId,r=e.hasPostfixModifier,a=t+n;return!o.has(a)&&(o.add(a),i(n,r).forEach(function(e){return o.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" ")}function y(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=b(e))&&(r&&(r+=" "),r+=t);return r}function b(e){if("string"==typeof e)return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=b(e[r]))&&(n&&(n+=" "),n+=t);return n}function w(){for(var e,t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=s;function s(r){var o=i[0];return t=(e=g(i.slice(1).reduce(function(e,t){return t(e)},o()))).cache.get,n=e.cache.set,a=l,l(r)}function l(r){var i=t(r);if(i)return i;var o=x(r,e);return n(r,o),o}return function(){return a(y.apply(null,arguments))}}function j(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var C=/^\[(?:([a-z-]+):)?(.+)\]$/i,k=/^\d+\/\d+$/,S=new Set(["px","full","screen"]),N=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,D=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function I(e){return R(e)||S.has(e)||k.test(e)||A(e)}function A(e){return H(e,"length",U)}function T(e){return H(e,"size",G)}function M(e){return H(e,"position",G)}function L(e){return H(e,"url",W)}function P(e){return H(e,"number",R)}function R(e){return!Number.isNaN(Number(e))}function _(e){return e.endsWith("%")&&R(e.slice(0,-1))}function O(e){return q(e)||H(e,"number",q)}function F(e){return C.test(e)}function B(){return!0}function V(e){return N.test(e)}function z(e){return H(e,"",Z)}function H(e,t,n){var r=C.exec(e);return!!r&&(r[1]?r[1]===t:n(r[2]))}function U(e){return E.test(e)}function G(){return!1}function W(e){return e.startsWith("url(")}function q(e){return Number.isInteger(Number(e))}function Z(e){return D.test(e)}var K=w(function(){var e=j("colors"),t=j("spacing"),n=j("blur"),r=j("brightness"),i=j("borderColor"),o=j("borderRadius"),a=j("borderSpacing"),s=j("borderWidth"),l=j("contrast"),c=j("grayscale"),u=j("hueRotate"),d=j("invert"),p=j("gap"),h=j("gradientColorStops"),f=j("gradientColorStopPositions"),m=j("inset"),g=j("margin"),v=j("opacity"),x=j("padding"),y=j("saturate"),b=j("scale"),w=j("sepia"),C=j("skew"),k=j("space"),S=j("translate"),N=function(){return["auto","contain","none"]},E=function(){return["auto","hidden","clip","visible","scroll"]},D=function(){return["auto",F,t]},H=function(){return[F,t]},U=function(){return["",I]},G=function(){return["auto",R,F]},W=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},q=function(){return["solid","dashed","dotted","double","none"]},Z=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},K=function(){return["start","end","center","between","around","evenly","stretch"]},$=function(){return["","0",F]},Y=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},J=function(){return[R,P]},Q=function(){return[R,F]};return{cacheSize:500,theme:{colors:[B],spacing:[I],blur:["none","",V,F],brightness:J(),borderColor:[e],borderRadius:["none","","full",V,F],borderSpacing:H(),borderWidth:U(),contrast:J(),grayscale:$(),hueRotate:Q(),invert:$(),gap:H(),gradientColorStops:[e],gradientColorStopPositions:[_,A],inset:D(),margin:D(),opacity:J(),padding:H(),saturate:J(),scale:J(),sepia:$(),skew:Q(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",F]}],container:["container"],columns:[{columns:[V]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(W(),[F])}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",O]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",F]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",O]}],"grid-cols":[{"grid-cols":[B]}],"col-start-end":[{col:["auto",{span:["full",O]},F]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[B]}],"row-start-end":[{row:["auto",{span:[O]},F]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",F]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",F]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(K())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(K(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(K(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",F,t]}],"min-w":[{"min-w":["min","max","fit",F,I]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[V]},V,F]}],h:[{h:[F,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",F,I]}],"max-h":[{"max-h":[F,t,"min","max","fit"]}],"font-size":[{text:["base",V,A]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",P]}],"font-family":[{font:[B]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",F]}],"line-clamp":[{"line-clamp":["none",R,P]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",F,I]}],"list-image":[{"list-image":["none",F]}],"list-style-type":[{list:["none","disc","decimal",F]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(q(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",I]}],"underline-offset":[{"underline-offset":["auto",F,I]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",F]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",F]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(W(),[M])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",T]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},L]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(q(),["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(q())}],"outline-offset":[{"outline-offset":[F,I]}],"outline-w":[{outline:[I]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[I]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",V,z]}],"shadow-color":[{shadow:[B]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":Z()}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",V,F]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",F]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",F]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",F]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[O,F]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",F]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",F]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",F]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[I,P]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function $(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return K((0,t.clsx)(n))}e.s(["cn",()=>$],985005);var Y=e.i(509473),J=e.i(758118),Q=e.i(365290),X=Y,ee=e.i(230766),et=e.i(743124),en=e.i(66920),er=e.i(32170),ei=e.i(209819);function eo(e){let{messageAuthorId:t,rounded:n,size:r="sm"}=e,{user:i}=(0,er.useUser)(),{authorId:o}=(0,ei.useChatMetadata)(),a=t||o||(null==i?void 0:i.id);return a?(0,X.jsx)(ee.AvatarUser,{size:r,userId:a,rounded:n}):(0,X.jsx)(ee.Avatar,{size:r,rounded:n,children:(0,X.jsx)(en.AvatarIcon,{})})}let ea=et.default.memo(eo);var es=e.i(3401),el=e.i(304649),ec=et,eu=e.i(827728),ed=e.i(529693),ep=e.i(753533),eh=e.i(639056),ef=e.i(490293),em=e.i(142219),eg=e.i(737374);let ev=(0,ec.memo)(function(e){let{...t}=e,{id:n,children:r,className:i,effect:o,onEffectClick:a,actions:s,hoverActions:l,align:c,hideActions:u=!1}=t,[d,p]=(0,ec.useState)(!1),h=(0,ec.useRef)(null);(0,eu.useOnClickOutside)(h,()=>p(!1),"touchstart");let f={"data-touch-active":d,onTouchStart:()=>p(!0),ref:h},m=(0,ec.useRef)(!1);(0,ec.useEffect)(()=>{m.current=!0},[]);let g=(0,ec.useMemo)(()=>(0,Y.jsx)("div",{className:(0,el.cn)("flex items-center gap-1 group-hover:opacity-100 group-focus-within:opacity-100 opacity-0"),style:{...(0,Q.transitionStyles)(["opacity"])},children:l}),[l]);return(0,Y.jsxs)("div",{id:n,className:(0,el.cn)("@container/message group w-full [&_code]:break-all break-words flex flex-col gap-2",i,{"opacity-50":"dimmed"===o,"origin-right items-end":"end"===c,"origin-left":"start"===c}),style:{...t.style,...(0,Q.transitionStyles)(["opacity"])},"data-testid":"message",role:"listitem",onClick:a,...f,children:[r,s||l?(0,Y.jsxs)("div",{...(0,J.a11yHideIf)(u),className:(0,el.cn)("flex items-center gap-1",{"justify-end flex-row-reverse":"end"===c,"justify-start":"start"===c,"ml-[-2px]":"start"===c,"mr-[-2px]":"end"===c}),style:{...(0,J.visibleStylesIf)(!u),transform:"translateY(".concat(8*!!u,"px)"),...(0,Q.transitionStyles)(["opacity","transform"],{duration:400})},children:[s,g]}):null]},n)}),ex=(0,ec.memo)(function(e){let{...t}=e;return(0,Y.jsx)(ev,{...t,align:"start",className:(0,el.cn)("w-full group bot-message",t.className),style:t.style,children:t.children})}),ey=(0,ec.memo)(function(e){let{messageAuthorId:t,attachments:n,awaitingResponse:r,messageLength:i,...o}=e,a=(0,eh.useAtomValue)(eS).has(o.id),s=!!i&&i>500&&!a,l=()=>{eN(o.id)};return(0,Y.jsxs)(ev,{...o,align:"end",children:[(0,Y.jsx)("div",{className:"flex items-center gap-1.5 pr-1",children:t?(0,Y.jsx)(es.UserPreviewLink,{userId:t,children:(0,Y.jsx)(ea,{rounded:!0,size:"xs",messageAuthorId:t})}):(0,Y.jsx)(ea,{rounded:!0,size:"xs",messageAuthorId:t})}),(0,Y.jsx)(ed.motion.div,{...ej(r,.3),className:"flex items-end sm:max-w-[min(fit-content,80%)] max-w-[90%] origin-top-right",children:(0,Y.jsxs)("div",{className:(0,el.cn)("border border-v0-gray-200 text-left relative rounded-[16px] bg-v0-gray-200 px-3 py-1.5 min-w-0 break-words","group/message-bubble",{"bg-v0-background-100 border-v0-blue-500 border-dashed animate-pulse":"pulse"===o.effect,"cursor-pointer":s}),style:{...(0,Q.transitionStyles)(["border-color","background"],{duration:300}),animationDuration:"0.8s"},onClick:l,children:[(0,Y.jsx)(eE,{className:(0,el.cn)("absolute -top-[6px] right-0",{"scale-0":"pulse"===o.effect}),style:{...(0,Q.transitionStyles)(["scale","fill"],{duration:300})}}),(0,Y.jsx)("div",{className:(0,el.cn)("relative",{"max-h-[400px] overflow-hidden":s,[eg.default.overflowMessage]:s}),children:o.children}),s&&(0,Y.jsx)("span",{className:"text-v0-gray-900 justify-center text-label-14 flex inset-x-0 items-center h-9 absolute bottom-0 cursor-pointer group-hover/message-bubble:text-gray-900",style:{...(0,Q.transitionStyles)(["color"])},children:"Show full message"})]})}),n]})}),eb={duration:.6,type:"spring",bounce:.4};function ew(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{animate:{opacity:1,scale:1,y:0},initial:e?{opacity:0,scale:.93,y:-12}:{},transition:{...eb,delay:t}}}let ej=(0,ep.cacheFunctionResult)(ew),eC=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{animate:{opacity:1,y:0},initial:e?{opacity:0,y:6}:{},transition:{...eb,delay:t}}},ek=(0,ep.cacheFunctionResult)(eC),eS=(0,ef.atom)(new Set),eN=e=>{let t=new Set(em.store.get(eS)).add(e);em.store.set(eS,t)};function eE(e){let{className:t,style:n}=e;return(0,Y.jsx)("svg",{width:"16",height:"16",className:t,style:n,fill:"var(--v0-gray-200)",children:(0,Y.jsx)("path",{d:"M-2.70729e-07 6.19355C8 6.19355 12 4.12903 16 6.99382e-07C16 6.70968 16 13.5 10 16L-2.70729e-07 6.19355Z"})})}e.s(["BotMessageLayout",0,ex,"UserMessageLayout",0,ey,"motionReplyAnimationIf",0,ek],397036);var eD=Y,eI=el,eA=e.i(600500),eT=e.i(89440),eM=Y,eL=et,eP=e.i(149261),eR=e.i(403055);let e_=e=>{let{openDelay:t=100,closeDelay:n=150,...r}=e;return(0,eM.jsx)(eP.Root,{openDelay:t,closeDelay:n,...r})};e_.displayName=eP.Root.displayName;let eO=eP.Trigger,eF=eP.Portal,eB=eL.forwardRef((e,t)=>{let{className:n,align:r="center",sideOffset:i=4,...o}=e;return(0,eM.jsx)(eF,{children:(0,eM.jsx)(eP.Content,{ref:t,align:r,sideOffset:i,style:{transformOrigin:"var(--radix-hover-card-content-transform-origin)"},className:(0,eR.cn)("bg-v0-background-100 z-50 w-84 overflow-hidden rounded-xl shadow-md outline-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1","data-[side=bottom]:slide-out-to-top-1 data-[side=left]:slide-out-to-left-1 data-[side=right]:slide-out-to-right-1 data-[side=top]:slide-out-to-bottom-1",n),...o})})});eB.displayName=eP.Content.displayName;var eV=e.i(909270);let ez=(0,eT.cva)("text-[13px] border-v0-alpha-400 group relative max-w-[200px] inline-flex h-[24px] overflow-hidden items-center rounded-[6px] border transition-colors",{variants:{variant:{default:"bg-v0-gray-100 [--hover-color:theme(colors.gray.200)]",refinement:"bg-v0-blue-300 text-v0-blue-900 [--hover-color:theme(colors.blue.200)]",warning:"bg-v0-amber-200 text-v0-amber-700 [--hover-color:theme(colors.amber.200)]"},hasHover:{true:"hover:bg-[var(--hover-color)] cursor-pointer",false:"cursor-text"}}});function eH(e){let{prefix:t,children:n,variant:r="default",onClick:i,onRemove:o,hoverContent:a,canRemove:s,href:l,className:c,...u}=e,d=s&&o,p=!!(a||i||l),h=l?eV.default:"span";return(0,eD.jsxs)(e_,{closeDelay:50,openDelay:100,children:[(0,eD.jsxs)("span",{...u,"data-context-pill":"true",className:(0,eI.cn)(ez({variant:r,hasHover:p,className:c})),children:[(0,eD.jsxs)(h,{href:l,className:(0,eI.cn)("flex items-center gap-1.5 overflow-hidden h-full pl-1 !no-underline font-normal",t?"pl-1":"pl-2"),onClick:i,children:[t?(0,eD.jsx)("div",{className:"relative flex h-4 min-w-4 items-center justify-center [&_svg]:scale-90",children:t}):null,(0,eD.jsx)(eO,{asChild:!0,children:(0,eD.jsx)("span",{className:(0,eI.cn)("truncate inline overflow-hidden pr-1.5 transition-all",d&&"group-hover:[mask-image:linear-gradient(to_right,black_calc(100%-32px),transparent_calc(100%-20px),transparent_100%)]"),children:n})})]}),d?(0,eD.jsx)("button",{"aria-label":"Remove context item",type:"button",onClick:o,className:"absolute right-1 z-10 text-v0-gray-900 opacity-0 group-hover:opacity-100 focus-visible:opacity-100 focus-visible:ring-2 focus-visible:ring-v0-caveat-focus-ring-tab focus-visible:bg-v0-gray-100 focus-visible:ring-offset-background rounded-sm",children:(0,eD.jsx)(eA.CrossSmall,{})}):null]}),a?(0,eD.jsx)(eB,{side:"top",sideOffset:8,className:"border-none material-menu min-w-[var(--radix-hover-card-trigger-width)] w-auto",children:a}):null]})}function eU(e){let{children:t,className:n}=e;return(0,eD.jsx)("div",{className:(0,eI.cn)("text-v0-gray-900",n),children:t})}e.s(["ContextPill",()=>eH,"PillIcon",()=>eU],424725)},454471,708377,e=>{"use strict";var t=e.i(936096),n=e.i(658484),r=e.i(79548),i=e.i(318504),o=e.i(881460);let a=(0,t.withNewIcon)('<path d="M15.7221 11.1407C15.1916 11.2818 14.8294 11.3877 14.3073 11.5288C14.181 11.5641 14.1726 11.5729 14.0631 11.4406C13.9368 11.2906 13.8441 11.1936 13.6673 11.1054C13.1368 10.832 12.6231 10.9113 12.143 11.2377C11.5704 11.6258 11.2756 12.1992 11.2841 12.9137C11.2925 13.6194 11.7557 14.2015 12.4209 14.2986C12.9936 14.3779 13.4736 14.1662 13.8526 13.7164C13.9284 13.6194 13.9957 13.5135 14.0799 13.39C13.7768 13.39 13.3978 13.39 12.4546 13.39C12.2778 13.39 12.2357 13.2753 12.2946 13.1254C12.4041 12.8519 12.6062 12.3933 12.7241 12.1639C12.7494 12.111 12.8083 12.0228 12.9346 12.0228C13.3641 12.0228 14.9473 12.0228 16 12.0228C15.9832 12.2609 15.9832 12.4991 15.9495 12.7373C15.8568 13.3724 15.6295 13.9545 15.2589 14.4662C14.6526 15.3041 13.861 15.8246 12.8588 15.9657C12.0336 16.0804 11.2672 15.9128 10.5935 15.3835C9.97034 14.8896 9.61664 14.2368 9.52401 13.4253C9.41453 12.4638 9.68401 11.5994 10.2398 10.8408C10.8377 10.0204 11.6293 9.50001 12.5978 9.31477C13.3894 9.16482 14.1473 9.26185 14.8294 9.747C15.2758 10.0557 15.5958 10.4791 15.8063 10.9907C15.8568 11.0701 15.8232 11.1142 15.7221 11.1407Z" fill="#00ACD7"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>\n'),s=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>\n  <path d="M15.7246 11.3857L14.548 10.0483H10.4518L9.27511 11.3857C8.92434 11.7843 8.94634 12.3876 9.3252 12.7597L12.4999 15.8775L15.6745 12.7597C16.0533 12.3876 16.0753 11.7844 15.7246 11.3857Z" fill="#CA2A30"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.4661 9.48831C13.6686 9.49258 14.8004 9.91649 14.7973 10.5166C14.7941 11.1166 13.7447 11.5332 12.5424 11.5287C11.3401 11.5242 10.1984 11.1295 10.2017 10.5296C10.2045 9.92962 11.2638 9.48383 12.4661 9.48831Z" fill="#F87274"/>');var l=e.i(355030),c=e.i(389905),u=e.i(142307),d=e.i(239850);let p=(0,t.withNewIcon)('<path d="M6.71709 5.81132H8.67935C9.8869 5.81132 9.8869 7.01887 8.67935 7.01887H6.71709V5.81132ZM2.03784 11.3962H8.07558V9.73585H6.71709V8.5283H8.22652C9.8869 8.5283 8.98124 11.3962 10.3397 11.3962H14.1133V8.5283H13.2077V8.83019C13.2077 10.0377 11.8492 9.88679 11.6982 9.13208C11.5473 8.37736 10.9435 7.77359 10.7926 7.77359C13.0567 6.56604 11.6982 4.15094 9.8869 4.15094H2.79256V5.81132H4.30199V9.73585H2.03784V11.3962Z" fill="currentColor" stroke="currentColor" stroke-width="0.150943" stroke-linejoin="round"/>\n  <path d="M8.00009 14.4906C11.5847 14.4906 14.4907 11.5846 14.4907 8C14.4907 4.41536 11.5847 1.50943 8.00009 1.50943C4.41545 1.50943 1.50952 4.41536 1.50952 8C1.50952 11.5846 4.41545 14.4906 8.00009 14.4906Z" stroke="currentColor" stroke-width="1.35849" fill="transparent" />\n  <path d="M14.9436 8.45283L15.6983 8L14.9436 7.54717V8.45283Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.7218 9.79872L15.5503 9.50183L14.8984 8.91046L14.7218 9.79872Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.2418 11.0755L15.1124 10.9459L14.5884 10.2388L14.2418 11.0755Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M13.5217 12.2341L14.4008 12.2768L14.0249 11.481L13.5217 12.2341Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M12.5896 13.2299L13.4434 13.4434L13.23 12.5895L12.5896 13.2299Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M11.4811 14.0248L12.2769 14.4007L12.2341 13.5216L11.4811 14.0248Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M10.239 14.5882L10.9461 15.1121L11.0757 14.2416L10.239 14.5882Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M8.91057 14.8983L9.50194 15.5502L9.79883 14.7216L8.91057 14.8983Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M7.54722 14.9434L8.00005 15.6981L8.45288 14.9434H7.54722Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M6.20134 14.7216L6.49823 15.5502L7.0896 14.8983L6.20134 14.7216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M4.92475 14.2416L5.0543 15.1121L5.76147 14.5882L4.92475 14.2416Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M3.76601 13.5216L3.72323 14.4007L4.51904 14.0248L3.76601 13.5216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M2.77025 12.5895L2.55678 13.4434L3.41064 13.2299L2.77025 12.5895Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.97536 11.481L1.59941 12.2768L2.47852 12.2341L1.97536 11.481Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.41196 10.2388L0.887987 10.9459L1.75854 11.0755L1.41196 10.2388Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.10188 8.91046L0.450006 9.50183L1.27856 9.79872L1.10188 8.91046Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.05664 7.54717L0.301924 8L1.05664 8.45284V7.54717Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.27849 6.20128L0.449934 6.49817L1.10181 7.08954L1.27849 6.20128Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M1.75845 4.92452L0.887888 5.05406L1.41187 5.76124L1.75845 4.92452Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M2.4785 3.76594L1.5994 3.72316L1.97534 4.51897L2.4785 3.76594Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M3.41066 2.77008L2.5568 2.55661L2.77026 3.41048L3.41066 2.77008Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M4.51914 1.9752L3.72333 1.59925L3.76611 2.47836L4.51914 1.9752Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M5.76128 1.41185L5.0541 0.887872L4.92456 1.75843L5.76128 1.41185Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M7.08967 1.10168L6.49831 0.449804L6.20142 1.27836L7.08967 1.10168Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M8.45302 1.05661L8.00019 0.301889L7.54736 1.05661L8.45302 1.05661Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M9.7989 1.27836L9.50201 0.449804L8.91064 1.10168L9.7989 1.27836Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M11.0755 1.75843L10.9459 0.887873L10.2388 1.41185L11.0755 1.75843Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M12.2342 2.47835L12.277 1.59925L11.4812 1.9752L12.2342 2.47835Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M13.23 3.41048L13.4435 2.55661L12.5896 2.77008L13.23 3.41048Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.0249 4.51897L14.4008 3.72316L13.5217 3.76594L14.0249 4.51897Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.5883 5.76124L15.1123 5.05406L14.2417 4.92452L14.5883 5.76124Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M14.8984 7.08954L15.5502 6.49817L14.7217 6.20128L14.8984 7.08954Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>\n  <path d="M6.94336 1.66038L7.99996 2.71698L9.05657 1.66038H6.94336Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>\n  <path d="M13.7026 5.03606L13.0243 6.36746L14.3557 7.04584L13.7026 5.03606Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>\n  <path d="M12.5811 12.5078L11.1052 12.2741L10.8714 13.7499L12.5811 12.5078Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>\n  <path d="M5.12842 13.7499L4.89466 12.274L3.4188 12.5078L5.12842 13.7499Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>\n  <path d="M1.64404 7.04584L2.97544 6.36746L2.29706 5.03606L1.64404 7.04584Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>'),h=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 1H5.5V1.75V9.40135C5.05874 9.14609 4.54643 9 4 9C2.34315 9 1 10.3431 1 12C1 13.6569 2.34315 15 4 15C5.65685 15 7 13.6569 7 12C7 11.9158 6.99653 11.8324 6.98973 11.75H7V11V2.5H13.5V6.90135C13.0587 6.64609 12.5464 6.5 12 6.5C10.3431 6.5 9 7.84315 9 9.5C9 11.1569 10.3431 12.5 12 12.5C13.6569 12.5 15 11.1569 15 9.5C15 9.41581 14.9965 9.33243 14.9897 9.25H15V8.5V1.75V1H14.25H6.25ZM10.5 9.5C10.5 10.3284 11.1716 11 12 11C12.8284 11 13.5 10.3284 13.5 9.5C13.5 8.67157 12.8284 8 12 8C11.1716 8 10.5 8.67157 10.5 9.5ZM2.5 12C2.5 12.8284 3.17157 13.5 4 13.5C4.82843 13.5 5.5 12.8284 5.5 12C5.5 11.1716 4.82843 10.5 4 10.5C3.17157 10.5 2.5 11.1716 2.5 12Z" fill="currentColor"/>'),f=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5H14.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V2.5ZM0 1H1.5H14.5H16V2.5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1ZM4 11.1339L4.44194 10.6919L6.51516 8.61872C6.85687 8.27701 6.85687 7.72299 6.51517 7.38128L4.44194 5.30806L4 4.86612L3.11612 5.75L3.55806 6.19194L5.36612 8L3.55806 9.80806L3.11612 10.25L4 11.1339ZM8 9.75494H8.6225H11.75H12.3725V10.9999H11.75H8.6225H8V9.75494Z" fill="currentColor"/>');e.s(["TerminalWindow",0,f],708377);let m=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5H14.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V2.5ZM0 1H1.5H14.5H16V2.5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1ZM6.745 6.76445L9.2161 8L6.745 9.23555V6.76445ZM11.1056 7.55279C11.4741 7.73705 11.4741 8.26295 11.1056 8.44721L6.22361 10.8882C5.89116 11.0544 5.5 10.8127 5.5 10.441L5.5 5.55902C5.5 5.18733 5.89116 4.94558 6.22361 5.1118L11.1056 7.55279Z" fill="currentColor"/>'),g=(0,t.withNewIcon)('<path d="M9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V16H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM4.5498 9.71387C5.06006 9.19321 6 9.53835 6 10.3174V15H4.5V12.3789L4.11426 12.9297L3.5 13.8076L2.88574 12.9297L2.5 12.3789V15H1V10.3174C1 9.48634 2.06931 9.14928 2.5459 9.83008L3.5 11.1924L4.4541 9.83008L4.5498 9.71387ZM9.75 9.5C10.9926 9.5 12 10.5074 12 11.75V12.75C12 13.9926 10.9926 15 9.75 15H7.5V9.5H9.75ZM9 11V13.5H9.75C10.1642 13.5 10.5 13.1642 10.5 12.75V11.75C10.5 11.3358 10.1642 11 9.75 11H9ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),v=(0,t.withNewIcon)('<path d="M9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V16H13V6.5H8V1.5H3V6.5H1.5V0H9.08594L9.18457 0.00488281ZM5 10.5H3.75V15H2.25V10.5H1V9H5V10.5ZM9.25 10.5H7.875C7.66789 10.5 7.5 10.6679 7.5 10.875C7.5 11.0821 7.66789 11.25 7.875 11.25C8.91053 11.25 9.75 12.0895 9.75 13.125C9.75 14.1605 8.91053 15 7.875 15H6.25V13.5H7.875C8.08211 13.5 8.25 13.3321 8.25 13.125C8.25 12.9179 8.08211 12.75 7.875 12.75C6.83947 12.75 6 11.9105 6 10.875C6 9.83947 6.83947 9 7.875 9H9.25V10.5ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),x=(0,t.withNewIcon)('<path d="M9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V16H13V6.5H8V1.5H3V6.5H1.5V0H9.08594L9.18457 0.00488281ZM5 9V13.125C5 14.1605 4.16053 15 3.125 15C2.08947 15 1.25 14.1605 1.25 13.125V12.75H2.75V13.125C2.75 13.3321 2.91789 13.5 3.125 13.5C3.33211 13.5 3.5 13.3321 3.5 13.125V9H5ZM9.5 10.5H8.125C7.91789 10.5 7.75 10.6679 7.75 10.875C7.75 11.0821 7.91789 11.25 8.125 11.25C9.16053 11.25 10 12.0895 10 13.125C10 14.1605 9.16053 15 8.125 15H6.5V13.5H8.125C8.33211 13.5 8.5 13.3321 8.5 13.125C8.5 12.9179 8.33211 12.75 8.125 12.75C7.08947 12.75 6.25 11.9105 6.25 10.875C6.25 9.83947 7.08947 9 8.125 9H9.5V10.5ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),y=(0,t.withNewIcon)('<path d="M5.25 10.5H3.75C3.33579 10.5 3 10.8358 3 11.25V12.75C3 13.1642 3.33579 13.5 3.75 13.5H5.25V15H3.75C2.50736 15 1.5 13.9926 1.5 12.75V11.25C1.5 10.0074 2.50736 9 3.75 9H5.25V10.5ZM9.5 10.5H8.125C7.91789 10.5 7.75 10.6679 7.75 10.875C7.75 11.0821 7.91789 11.25 8.125 11.25C9.16053 11.25 10 12.0895 10 13.125C10 14.1605 9.16053 15 8.125 15H6.5V13.5H8.125C8.33211 13.5 8.5 13.3321 8.5 13.125C8.5 12.9179 8.33211 12.75 8.125 12.75C7.08947 12.75 6.25 11.9105 6.25 10.875C6.25 9.83947 7.08947 9 8.125 9H9.5V10.5ZM14 10.5H12.625C12.4179 10.5 12.25 10.6679 12.25 10.875C12.25 11.0821 12.4179 11.25 12.625 11.25C13.6605 11.25 14.5 12.0895 14.5 13.125C14.5 14.1605 13.6605 15 12.625 15H11V13.5H12.625C12.8321 13.5 13 13.3321 13 13.125C13 12.9179 12.8321 12.75 12.625 12.75C11.5895 12.75 10.75 11.9105 10.75 10.875C10.75 9.83947 11.5895 9 12.625 9H14V10.5ZM9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V7.5H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),b=(0,t.withNewIcon)('<path d="M7.50293 12.9111L8.48242 9H10.0283L8.77344 14.0127C8.44217 15.3348 6.56364 15.3349 6.23242 14.0127L4.97754 9H6.52344L7.50293 12.9111ZM4.25 10.5H2.875C2.66789 10.5 2.5 10.6679 2.5 10.875C2.5 11.0821 2.66789 11.25 2.875 11.25C3.91053 11.25 4.75 12.0895 4.75 13.125C4.75 14.1605 3.91053 15 2.875 15H1.25V13.5H2.875C3.08211 13.5 3.25 13.3321 3.25 13.125C3.25 12.9179 3.08211 12.75 2.875 12.75C1.83947 12.75 1 11.9105 1 10.875C1 9.83947 1.83947 9 2.875 9H4.25V10.5ZM14.25 10.5H12.75C12.3358 10.5 12 10.8358 12 11.25V12.75C12 13.1642 12.3358 13.5 12.75 13.5C13.1642 13.5 13.5 13.1642 13.5 12.75H13V11.25H15V12.75C15 13.9926 13.9926 15 12.75 15C11.5074 15 10.5 13.9926 10.5 12.75V11.25C10.5 10.0074 11.5074 9 12.75 9H14.25V10.5ZM9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V7.5H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),w=[[g,["md","markdown"]],[v,["ts"]],[x,["js"]],[y,["css"]],[b,["svg"]],[(0,t.withNewIcon)('<path d="M12.5254 12.9111L13.5049 9H15.0508L13.7959 14.0127C13.4646 15.3348 11.5861 15.3349 11.2549 14.0127L10 9H11.5459L12.5254 12.9111ZM5 10.5H3.5C3.08579 10.5 2.75 10.8358 2.75 11.25V12.75C2.75 13.1642 3.08579 13.5 3.5 13.5H5V15H3.5C2.25736 15 1.25 13.9926 1.25 12.75V11.25C1.25 10.0074 2.25736 9 3.5 9H5V10.5ZM9 10.5H7.625C7.41789 10.5 7.25 10.6679 7.25 10.875C7.25 11.0821 7.41789 11.25 7.625 11.25C8.66053 11.25 9.5 12.0895 9.5 13.125C9.5 14.1605 8.66053 15 7.625 15H6V13.5H7.625C7.83211 13.5 8 13.3321 8 13.125C8 12.9179 7.83211 12.75 7.625 12.75C6.58947 12.75 5.75 11.9105 5.75 10.875C5.75 9.83947 6.58947 9 7.625 9H9V10.5ZM9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V7.5H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />'),["csv"]],[(0,t.withNewIcon)('<path d="M6.5 2.5H5.5C4.94772 2.5 4.5 2.94772 4.5 3.5V6.29492C4.49985 7.03976 4.1208 7.61099 3.64941 8C4.1208 8.38901 4.49986 8.96024 4.5 9.70508V12.5C4.5 13.0523 4.94772 13.5 5.5 13.5H6.5V15H5.5C4.11929 15 3 13.8807 3 12.5V9.70508C2.99985 9.49298 2.88477 9.2728 2.58398 9.07227C2.2769 8.86759 1.86075 8.75 1.5 8.75V7.25L1.6377 7.24414C1.96313 7.21875 2.31533 7.10679 2.58398 6.92773C2.88476 6.72721 2.99984 6.50702 3 6.29492V3.5C3 2.11929 4.11929 1 5.5 1H6.5V2.5ZM10.25 1C11.6307 1 12.75 2.11929 12.75 3.5V6.29492C12.7502 6.44568 12.8551 6.67125 13.2529 6.90332C13.5892 7.09949 14.0098 7.21767 14.3564 7.24414L14.5 7.25V8.75C14.1317 8.75 13.6372 8.87249 13.2529 9.09668C12.8551 9.32876 12.7502 9.55432 12.75 9.70508V12.5C12.75 13.8807 11.6307 15 10.25 15H9.25V13.5H10.25C10.8023 13.5 11.25 13.0523 11.25 12.5V9.70508C11.2502 8.93162 11.7016 8.3696 12.2002 8C11.7016 7.6304 11.2502 7.06838 11.25 6.29492V3.5C11.25 2.94772 10.8023 2.5 10.25 2.5H9.25V1H10.25Z" fill="currentColor" />'),["json"]],[d.LogoReact,["jsx","tsx"]],[u.LogoPython,["py"]],[p,["rs"]],[a,["go"]],[s,["rb"]],[l.Image,["jpg","jpeg","png","gif","ico","webp"]],[m,["mp4","mov","avi"]],[h,["mp3","wav","ogg"]],[i.FileText,["txt","pdf","doc","docx","xls","xlsx","ppt","pptx","yml","yaml"]],[o.FileZip,["zip"]],[c.LockClosed,["lock"]],[n.Code,["html","scss","less","c","cpp","h","hpp"]]];function j(e){var t;if("console logs"===e.toLowerCase())return f;let n=null==(t=e.split(".").pop())?void 0:t.toLowerCase();if(!n)return r.File;for(let[e,t]of w)if(t.includes(n))return e;return r.File}e.s(["filePathToIcon",()=>j],454471)},236808,718755,266007,e=>{"use strict";e.s(["AGENT_BLOCK_CLASS",()=>U,"AGENT_BLOCK_MAX_WIDTH_CLASS",()=>H,"AgentCitationPill",()=>$,"AgentNote",()=>ei,"BlockRing",()=>eh,"Command",()=>et,"CommandOutput",()=>en,"ConsecutiveTimelineLine",()=>ea,"File",()=>X,"FileList",()=>ee,"RichPart",()=>q,"RichTask",()=>W,"TaskName",()=>Z,"Terminal",()=>Q,"TimelineCorner20",()=>el,"TimelineLine",()=>es,"WebsiteScreenshot",()=>J,"indexAndLengthToAlign",()=>ed,"readableUrl",()=>eu,"useReportAgentError",()=>ef],236808);var t=e.i(509473),n=e.i(919409);e.i(521603);var r=e.i(895336),i=e.i(244078),o=e.i(563152),a=e.i(456915),s=e.i(230125),l=e.i(985005),c=e.i(89440),u=e.i(529693),d=e.i(743124),p=e.i(104720),h=e.i(758118),f=e.i(365290),m=e.i(397036),g=e.i(424725),v=e.i(454471),x=d;function y(e){let{active:t,scrollRef:n,scrollInterval:r=600}=e,i=(0,x.useRef)(!1);(0,x.useEffect)(()=>{let e=n.current;if(!e||!t)return;i.current=!1;let o=()=>{e.scrollTo({top:e.scrollTop,behavior:"auto"})},a=e=>{e.deltaY<0&&(i.current=!0,o())},s=()=>{i.current=!0,o()},l=e=>{["ArrowUp","PageUp","Home","Space"].includes(e.code)&&(i.current=!0,o())},c=()=>{e.scrollTop>=e.scrollHeight-e.clientHeight-50&&(i.current=!1)};e.addEventListener("wheel",a,{passive:!0}),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("keydown",l),e.addEventListener("scroll",c,{passive:!0});let u=setInterval(()=>{i.current||e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},r);return()=>{e.removeEventListener("wheel",a),e.removeEventListener("touchstart",s),e.removeEventListener("keydown",l),e.removeEventListener("scroll",c),clearInterval(u)}},[n,t,r]);let o=(0,x.useCallback)(()=>{let e=n.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"auto"})},[n]),a=(0,x.useCallback)(()=>{i.current=!1;let e=n.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"auto"})},[n]),s=(0,x.useCallback)(()=>{let e=n.current;e&&(i.current=!0,e.scrollTo({top:e.scrollTop,behavior:"auto"}))},[n]);return{forceUserControlRef:i,scrollToBottom:o,reenableAutoscroll:a,cancelAutoscrollNow:s}}var b=e.i(997974),w=e.i(762585),j=e.i(909270),C=e.i(108179),k=e.i(176248),S=e.i(37737),N=e.i(92479);e.i(563948);var E=e.i(407562);e.s(["useOpenFileInActiveBlock",()=>L],718755);var D=d,I=e.i(926224),A=e.i(745587),T=e.i(449381),M=e.i(385671);function L(){let e=(0,T.useActiveBlockState)(),{actions:{setActiveTabIntent:t}}=(0,M.useChatLayout)(),n=(0,A.useSetActiveFile)({blockId:(null==e?void 0:e.id)||""});return{getOpenFileHandler:(0,D.useCallback)(r=>{if(e&&"code-project"===e.type&&(0,I.parseMultiFileSource)({source:e.source,blockType:"code-project",blockId:e.id}).filter(e=>!e.isDeleted).find(e=>e.meta.file===r))return()=>{t("code"),n(r)}},[e,t,n])}}e.i(168204);var P=e.i(225695);let R="user_read_only_context",_="v0_debug_logs",O=["text_attachments","project_sources","image_attachments","integration_examples","examples"],F=5;function B(e,t,n){var r,i,o,a,s,l,c,u,d,p;let h="string"!=typeof e&&e[0]===P.AssistantMessagePartTagName&&!V(e,"task-start-v1"),f="string"!=typeof e&&"Codeblock"===e[0]&&Array.isArray(e)&&e.length>=2&&(null==(r=e[1])?void 0:r.blockId)&&(null==(o=e[1])||null==(i=o.meta)?void 0:i.type)&&!["inline-sql"].includes((null==(s=e[1])||null==(a=s.meta)?void 0:a.type)||"");if(!h&&!f)return!1;for(let e=t-1;e>=0;e--){let t=n[e];if(!t||"string"==typeof t)break;if(t[0]===P.AssistantMessagePartTagName){if(!V(t,"task-start-v1"))return!0;continue}if("Codeblock"===t[0]&&Array.isArray(t)&&t.length>=2&&(null==(l=t[1])?void 0:l.blockId)&&(null==(u=t[1])||null==(c=u.meta)?void 0:c.type)&&!["inline-sql"].includes((null==(p=t[1])||null==(d=p.meta)?void 0:d.type)||""))return!0;break}return!1}function V(e,t){if("string"!=typeof e&&Array.isArray(e)&&e[0]===P.AssistantMessagePartTagName){var n;let r=null==(n=e[1])?void 0:n.part;return!!r&&(Array.isArray(t)?t:[t]).includes(r.type)}return!1}function z(e){if(e.includes(R)&&e.includes(_))return"Console logs";let t=O.map(e=>"".concat(R,"/").concat(e,"/")),n=e,r=!1;for(let e of t)n.length!==(n=n.replace(e,()=>"")).length&&(r=!0);r:if(r&&n.includes("-")){var i;let e=null==(i=n.split("-").pop())?void 0:i.split(".")[0];if(!e||e.length!==F)break r;n=n.replace("-".concat(e),"")}return n}e.s(["cleanAgentFilePath",()=>z,"getIsConsecutiveAssistantPart",()=>B],266007);let H="max-w-[360px]",U=(0,l.cn)("material-medium border-gray-300 bg-background-subtle p-2 flex items-center rounded-[8px] m-[-1px] relative overflow-visible [&>*]:max-w-full [&>*]:w-full [&>*]:overflow-hidden",H),G=500;function W(e){let{children:r,renderedParts:a,isActive:c,onClick:h,maxHeight:g=200,autoCloseDelay:v=G,isFirst:x,createdAt:y,error:b,finishedAt:w,Icon:j,hideTimeSpent:C,className:k,hideTimelineLine:S,headerChildrenEnd:N,style:E}=e,D=(0,d.useMemo)(()=>!a&&!b||Array.isArray(a)&&0===a.length?null:(0,t.jsx)(i.Content,{className:(0,l.cn)(p.default.content,"data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up"),children:(0,t.jsxs)("div",{className:(0,l.cn)("grid grid-cols-[min-content_minmax(0,1fr)] items-start max-w-full min-w-0",p.default.renderedParts),children:[(0,t.jsx)(es,{fadeEnd:c,hidden:S,animate:c}),(0,t.jsx)(ep,{maxHeight:g,autoScrollActive:c,children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 pt-2 max-w-full min-w-0",children:[a,b?(0,t.jsx)(K,{error:b}):null]})})]})}),[a,b,S,c,g]),I=(0,d.useRef)(!1),[A,T]=(0,d.useState)(c?"active":void 0),M=(0,d.useMemo)(()=>!!(D||h)&&!c,[D,h,c]);(0,d.useEffect)(()=>{I.current||c||T(void 0)},[c,v]);let L=(0,d.useCallback)(e=>{I.current=!0,T(e)},[]),P=(0,d.useCallback)(e=>{null==h||h(e)},[h]),R={duration:150};return(0,t.jsx)(i.Root,{"data-rich-task":"true",type:"single",className:"w-full",collapsible:!0,value:A,onValueChange:L,children:(0,t.jsx)(u.motion.div,{...(0,m.motionReplyAnimationIf)(!x&&c),children:(0,t.jsxs)(i.Item,{value:"active",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Trigger,{className:(0,l.cn)("group/trigger w-full flex items-center gap-2 text-[14px] text-v0-gray-900 rounded-[6px] min-h-6 truncate min-w-0","focus-visible:ring-offset-background outline-hidden has-focus-visible:ring-2 ring-v0-blue-700 transition focus-visible:ring-2 focus-visible:ring-offset-1",M?"cursor-pointer":"cursor-default",k),style:E,tabIndex:M?0:-1,onClick:P,children:[(0,t.jsxs)("span",{className:(0,l.cn)("min-w-4 min-h-4 place-items-center place-content-center grid text-v0-gray-700",{"[&>*]:grid-stack group-hover/trigger:text-gray-900 group-focus-visible/trigger:text-gray-900":M}),style:{...(0,f.transitionStyles)(["color"],R)},children:[(0,t.jsx)("div",{className:(0,l.cn)("grid place-items-center [&>*]:grid-stack",M?(0,l.cn)("group-hover/trigger:opacity-0 group-hover/trigger:scale-80 opacity-100 scale-100","group-data-[state=open]/trigger:opacity-0 group-data-[state=open]/trigger:scale-80","group-focus-visible/trigger:opacity-0 group-focus-visible/trigger:scale-80"):null,{"text-v0-amber-500":b}),style:{...(0,f.transitionStyles)(["opacity","scale"],R)},children:b?(0,t.jsx)(s.Warning,{style:{...(0,f.transitionStyles)(["color"],R)}}):(0,t.jsx)(j,{style:{...(0,f.transitionStyles)(["color"],R)}})}),D?(0,t.jsx)(o.ChevronDownSmall,{className:(0,l.cn)("absolute","rotate-[-90deg] group-data-[state=open]/trigger:rotate-0 duration-100 opacity-0",M?(0,l.cn)("group-hover/trigger:opacity-100 group-hover/trigger:scale-100 scale-80","group-data-[state=open]/trigger:opacity-100 group-data-[state=open]/trigger:scale-100","group-focus-visible/trigger:opacity-100 group-focus-visible/trigger:scale-100"):null),style:{...(0,f.transitionStyles)(["opacity","rotate"],R)}}):null]}),(0,t.jsx)(n.ShimmerChildren,{shimmer:c,children:(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center gap-2 min-w-0",{"group-hover/trigger:text-v0-gray-900 group-focus-visible/trigger:text-v0-gray-900":M}),style:{...(0,f.transitionStyles)(["color"],R)},children:[r,c&&!C?(0,t.jsx)(ec,{start:y,end:w}):null]})})]}),N]}),D]})})})}function q(e){let{children:n,isActive:r}=e;return(0,t.jsx)(u.motion.div,{"data-rich-part":"true",className:"flex items-center gap-2 text-[13px] text-v0-gray-900 max-w-full min-w-0",...(0,m.motionReplyAnimationIf)(r),children:n})}function Z(e){let{isActive:t,textActive:n,textComplete:r,taskNameActive:i,taskNameComplete:o}=e;return t?null!=i?i:n:null!=o?o:r}function K(e){let{error:n}=e,{openReportError:r}=ef(),{title:i,message:o}=(0,d.useMemo)(()=>{switch(n.type){case"INPUT_SCHEMA_ERROR":return{title:"Invalid input schema provided",message:"An error occurred while validating the input schema. Retrying..."};case"HANDLED_EXECUTION_ERROR":return{title:"Agent Error",message:"An error occurred while the agent was working, ".concat(n.message)};default:return{title:"Agent Error",message:"An unhandled problem occurred. Please try again."}}},[n,r]);return(0,t.jsx)(ei,{variant:"warning",title:i,children:o})}function $(e){let{image:n,url:r,favicon:i,title:o,publishedDate:a}=e,s=(0,d.useMemo)(()=>(0,t.jsxs)("div",{className:"flex flex-col w-[300px]",children:[(0,t.jsx)(J,{screenshotUrl:n,url:r,className:"h-[160px]",variant:"none"}),(0,t.jsxs)("div",{className:"w-full gap-0.5 flex flex-col bg-v0-background-100 min-h-fit max-h-fit p-2 px-2.5 text-v0-gray-1000 text-[13px] z-20 border-t border-v0-gray-200",children:[a?(0,t.jsx)("span",{className:"text-v0-gray-900 text-[12px]",children:new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}):null,o]})]}),[n,r,a,o]),l=(0,d.useMemo)(()=>i?(0,t.jsxs)("div",{className:"relative size-4 min-w-4 rounded-full overflow-hidden",children:[(0,t.jsx)("img",{className:"rounded-full z-20 w-4 h-4 !m-0",src:i,alt:"Favicon for ".concat(o)}),(0,t.jsx)(w.Skeleton,{className:"absolute inset-0 w-full h-full"})]}):null,[i,o]);return(0,t.jsx)(g.ContextPill,{href:r,prefix:l,hoverContent:s,variant:"default",children:eu({url:r,omitPath:!0})})}let Y=(0,c.cva)("flex items-center justify-center shrink relative group/screenshot",{variants:{variant:{none:"bg-v0-background-200",contained:"bg-v0-alpha-400 aspect-[16/9] rounded-[6px] overflow-hidden"},size:{unset:"w-auto",small:"min-w-[144px] w-fit",medium:"min-w-[320px] w-fit",large:"min-w-[440px] w-fit"}},defaultVariants:{variant:"contained",size:"medium"}});function J(e){let{screenshotUrl:n,url:r,className:i,...o}=e;return(0,t.jsxs)("div",{className:Y({className:i,...o}),children:[r?(0,t.jsx)(j.default,{href:r,target:"_blank",rel:"noopener noreferrer",className:"absolute w-full h-full bg-v0-alpha-400 z-20 flex items-center justify-center transition-opacity no-underline group-hover/screenshot:opacity-100 opacity-0",children:(0,t.jsxs)("span",{className:"flex group-hover/screenshot:scale-100 scale-90 items-center gap-1 text-[13px] text-v0-gray-1000 material-small px-2 h-7 !no-underline transition-all",children:["Visit",(0,t.jsx)(a.ExternalSmall,{})]})}):null,n?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("img",{className:"object-cover absolute z-10 !m-0",src:n,alt:"Screenshot ".concat(r?eu({url:r}):"")})}):(0,t.jsx)("div",{className:"absolute w-full h-full flex items-center justify-center bg-v0-background-200 text-v0-gray-900 z-10",children:(0,t.jsx)("span",{className:"group-hover/screenshot:opacity-0 transition-opacity",children:"No preview available"})}),(0,t.jsx)(w.Skeleton,{className:"absolute inset-0 w-full h-full rounded-none"})]})}function Q(e){let{children:n}=e;return(0,t.jsx)("div",{className:"text-label-13-mono text-v0-gray-900 p-3 bg-v0-background-200 border-v0-gray-200 border rounded-[6px] overflow-x-scroll",children:(0,t.jsx)("div",{className:"whitespace-pre-wrap min-w-[800px] break-all flex flex-col gap-1 ",children:n})})}function X(e){let{filePath:n,shorten:r,limit:i,offset:o}=e,a=(0,d.useMemo)(()=>z(n),[n]),s=(0,v.filePathToIcon)(a),{getOpenFileHandler:l}=L(),c=(0,d.useMemo)(()=>l(a),[a,l]);return(0,t.jsx)(g.ContextPill,{prefix:(0,t.jsx)(s,{}),onClick:c,children:(0,t.jsxs)("div",{className:"flex items-center min-w-0 flex-1",children:[(0,t.jsx)("span",{className:"truncate min-w-0",children:(0,t.jsx)("span",{children:r?a.split("/").pop():"~".concat(a)})}),null!=o&&i?(0,t.jsx)("span",{className:"ml-1 text-v0-gray-500 text-[12px] shrink-0",children:"Line".concat(i>1?"s":""," ").concat(o+1,"-").concat(o+i)}):null]})})}function ee(e){let{label:n,files:r}=e;return(0,t.jsxs)("span",{className:"inline-flex flex-wrap items-center gap-1.5",children:[n,r.map((e,n)=>"string"==typeof e?(0,t.jsx)(X,{filePath:e,shorten:!0},n):(0,t.jsx)(X,{shorten:!0,...e},n))]})}function et(e){let{directory:n,children:r,command:i}=e;return(0,t.jsxs)("span",{children:[(0,t.jsxs)("span",{className:"text-v0-gray-900",children:["~/",n||(0,t.jsx)("span",{children:"..."}),(0,t.jsx)("span",{children:">"})]})," ",(0,t.jsx)("span",{className:"text-v0-gray-1000",children:null!=i?i:r})]})}function en(e){let{output:n}=e;return(0,t.jsx)("span",{className:"text-v0-gray-900 whitespace-pre-wrap break-words",children:n||"No output"})}let er=(0,c.cva)((0,l.cn)("flex flex-col gap-2 px-3 py-1.5 rounded-[6px] text-[13px] border",H),{variants:{variant:{warning:"bg-v0-amber-200 text-v0-amber-700 border-v0-amber-300 ",info:"bg-v0-background-200 text-v0-gray-1000 border-v0-gray-200 [&_p]:text-v0-gray-900",error:"bg-v0-red-200 text-v0-red-800 border-v0-red-300"}}});function ei(e){let{title:n,variant:r,children:i,primaryAction:o,secondaryAction:a}=e,s=(0,d.useMemo)(()=>{if(n)return n;switch(r){case"warning":return"Warning";case"info":return"Information";case"error":return"Error"}},[n,r]);return(0,t.jsxs)(u.motion.div,{className:er({variant:r}),...(0,m.motionReplyAnimationIf)(!0),children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium",children:s}),(0,t.jsx)("p",{className:"m-0!",children:i})]}),a||o?(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[a?(0,t.jsx)(k.Button,{size:"sm",variant:"ghost",onClick:a.onClick,children:a.text}):null,o?(0,t.jsx)(k.Button,{size:"sm",variant:"secondary",onClick:o.onClick,children:o.text}):null]}):null]})}let eo=[.19,.11,.1,.99];function ea(e){let{animate:n}=e;return(0,t.jsx)(u.motion.div,{className:"h-fit w-fit origin-top",initial:n?{scaleY:0}:void 0,animate:{scaleY:1},transition:{duration:.4,ease:eo},children:(0,t.jsx)(es,{})})}function es(e){let{className:n,animate:r,hidden:i=!1,fadeEnd:o=!1}=e,[a,s]=(0,C.default)(),c=(0,d.useMemo)(()=>r?Math.round(s.height):"100%",[r,s.height]);return(0,t.jsx)("div",{ref:r?a:void 0,className:(0,l.cn)("min-w-0 w-0 mr-0 min-h-3 h-full flex items-start justify-center overflow-hidden relative",n,{"min-w-4 w-4 mr-2":!i}),style:{...(0,h.visibleStylesIf)(!i),...(0,f.transitionStyles)(["width","min-width","opacity","margin"])},children:(0,t.jsx)("div",{className:(0,l.cn)("w-[1px] min-h-3 absolute top-0 [--line-color:theme(colors.gray.200)] ",p.default.timelineLine),style:{height:c,backgroundSize:"100% ".concat(o?"100%":"200%"),...(0,f.transitionStyles)(["height","background-size"],{duration:400,timingFunction:eo})}})})}function el(e){let{className:n,hidden:r=!1}=e;return(0,t.jsx)("div",{className:(0,l.cn)("relative w-5 h-5",n),style:{...(0,h.visibleStylesIf)(!r),...(0,f.transitionStyles)(["opacity"])},"aria-hidden":!0,children:(0,t.jsx)("div",{className:(0,l.cn)("absolute left-0 top-0 w-5 h-5 border-l-2 border-b-2 rounded-bl-[8px] border-v0-alpha-400")})})}let ec=(0,d.memo)(function(e){let{start:n,end:i}=e,[o,a]=(0,d.useState)(Date.now());(0,d.useEffect)(()=>{if(i)return;let e=setInterval(()=>a(Date.now()),100);return()=>{clearInterval(e)}},[i]);let s=(((i||o)-n)/1e3).toFixed(0);return(0,t.jsxs)("div",{className:"text-label-14 text-v0-gray-900 tabular-nums",children:[(0,t.jsx)(r.default,{value:parseInt(s),transformTiming:{duration:200,easing:"cubic-bezier(.35,.08,.09,.98)"}}),"s"]})});function eu(e){let{url:t,omitPath:n}=e;try{let{hostname:e,pathname:r}=new URL(t),i=e.replace(/^www\./,""),o=r&&"/"!==r?r:"";return"".concat(i).concat(n?"":o)}catch(e){return t||"Invalid URL"}}function ed(e,t){return 0===e?"start":e===t-1?"end":"center"}function ep(e){let{children:n,maxHeight:r,autoScrollActive:i}=e,{containerRef:o,topRef:a,bottomRef:s,showTopFade:l,showBottomFade:c}=(0,b.useScrollFade)("vertical");return y({active:i,scrollRef:o}),(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)(b.ScrollFade,{direction:"top",color:"muted",orientation:"vertical",visible:l}),(0,t.jsx)(b.ScrollFade,{direction:"bottom",color:"muted",orientation:"vertical",visible:c}),(0,t.jsx)(b.ScrollArea,{ref:o,className:"w-full overflow-y-scroll no-scrollbar",style:{maxHeight:r},tabIndex:-1,children:(0,t.jsxs)("div",{className:"flex flex-col relative w-full",children:[(0,t.jsx)(b.ScrollMarker,{ref:a,side:"top",orientation:"vertical"}),n,(0,t.jsx)(b.ScrollMarker,{ref:s,side:"bottom",orientation:"vertical"})]})})]})}function eh(e){let{isVisible:n,isActive:r}=e;return(0,t.jsx)("div",{"aria-hidden":!0,className:(0,l.cn)("absolute inset-[-5px] border-0 rounded-[12px] pointer-events-none border-v0-gray-200 !max-w-[unset] !w-[unset]",{"border-4":n,"border-v0-blue-300":r}),style:{...(0,f.transitionStyles)(["border-color","border-width"],{duration:450})}})}function ef(){let{chatId:e}=(0,N.useChatId)();return{openReportError:(0,d.useCallback)(t=>{if(!e)return void E.toast.error("Unable to report error, no chat ID found");let n="I'm seeing the following error in my chat: ".concat(e);(0,S.openDialog)({type:"feedback",data:{sentiment:"bad",feedback:"".concat(t||n,", my chat ID is ").concat(e)}})},[e])}}},470284,e=>{"use strict";function t(e,t){let n=String(e);if("string"!=typeof t)throw TypeError("Expected character");let r=0,i=n.indexOf(t);for(;-1!==i;)r++,i=n.indexOf(t,i+t.length);return r}e.s(["ccount",()=>t])},846139,987307,222348,752715,730191,748819,e=>{"use strict";e.s(["BlockContent",()=>a3,"getBlockLogic",()=>a5,"useRenderedBlock",()=>a4],846139);var t,n,r=e.i(509473),i=e.i(743124),o=e.i(829732),a=e.i(205795),s=e.i(513529),l=e.i(238580),c=e.i(44366),u=e.i(868275),d=r,p=i,h=e.i(476371),f=e.i(284546),m=e.i(430957),g=e.i(304649);e.s(["MemodMarkdown",()=>nJ,"MessageContent",()=>nX,"MessageContentPartsMemodMarkdown",()=>nQ],748819);var v=r,x=e.i(622449),y=e.i(194945),b=e.i(438819),w=e.i(694686),j=e.i(818273),C=m,k=i,S=g,N=e.i(85830),E=e.i(661535);e.i(168204);var D=e.i(225695),I=r,A=i,T=D,M=e.i(92479);e.i(904347);var L=e.i(37737),P=e.i(236808);function R(e){let t,n,r,{data:i,components:o}=e,{type:a}=i,{chatId:s}=(0,M.useChatId)(),l=(0,A.useCallback)(()=>{(0,L.openDialog)({type:"feedback",data:{sentiment:"bad",feedback:"I'm seeing a parsing error in my chat: ".concat(s)}})},[s]);if(!(0,T.isUserMessageContentRichPartType)(a))return null;switch(a){case"hidden-context":case"refinement-element":return null;case"confirmed-steps":return _(i);case"parse-error":return(0,I.jsx)(P.AgentNote,{variant:"error",primaryAction:{text:"Report",onClick:l},children:"Unable to parse message, please notify the team."});case"mention-file":t=i.filePath,n=i.filePath,r="file";break;case"mention-url":t=i.url,n=i.url,r="url";break;case"mention-directory":t=i.directoryPath,n=i.directoryPath,r="directory";break;default:return a}return(0,I.jsx)(o.MentionInlineNode,{type:r,data:{id:"mention-".concat(n),title:t,value:n}})}function _(e){let{addedEnvVars:t,appliedScripts:n,connectedIntegrationNames:r}=e,i=[];return(t.length>0&&i.push("added ".concat(O(t)," environment variables")),n.length>0&&i.push("applied ".concat(O(n)," scripts")),r.length>0&&i.push("connected ".concat(O(r))),0===i.length)?"I don't wish to take any action right now.":"Great, I've ".concat(O(i))}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and";if(0===e.length)return"";if(1===e.length)return e[0];let n=e[e.length-1],r=e.slice(0,-1);return"".concat(r.join(", ")," ").concat(t," ").concat(n)}e.s(["EditorMentionInlineNode",()=>nU,"EditorMentionItemExtension",()=>nW],752715);var F=r,B=e.i(213917);e.i(643908);var V=B;e.i(894688);var z=e.i(187195);function H(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function U(e){var t=H(e).Element;return e instanceof t||e instanceof Element}function G(e){var t=H(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function W(e){if("undefined"==typeof ShadowRoot)return!1;var t=H(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var q=Math.max,Z=Math.min,K=Math.round;function $(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Y(){return!/^((?!chrome|android).)*safari/i.test($())}function J(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&G(e)&&(i=e.offsetWidth>0&&K(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&K(r.height)/e.offsetHeight||1);var a=(U(e)?H(e):window).visualViewport,s=!Y()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,c=(r.top+(s&&a?a.offsetTop:0))/o,u=r.width/i,d=r.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function Q(e){var t=H(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function X(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ee(e){return e!==H(e)&&G(e)?X(e):Q(e)}function et(e){return e?(e.nodeName||"").toLowerCase():null}function en(e){return((U(e)?e.ownerDocument:e.document)||window.document).documentElement}function er(e){return J(en(e)).left+Q(e).scrollLeft}function ei(e){return H(e).getComputedStyle(e)}function eo(e){var t=ei(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ea(e){var t=e.getBoundingClientRect(),n=K(t.width)/e.offsetWidth||1,r=K(t.height)/e.offsetHeight||1;return 1!==n||1!==r}function es(e,t,n){void 0===n&&(n=!1);var r=G(t),i=G(t)&&ea(t),o=en(t),a=J(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==et(t)||eo(o))&&(s=ee(t)),G(t)?(l=J(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=er(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function el(e){var t=J(e),n=e.offsetWidth,r=e.offsetHeight;return 1>=Math.abs(t.width-n)&&(n=t.width),1>=Math.abs(t.height-r)&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function ec(e){return"html"===et(e)?e:e.assignedSlot||e.parentNode||(W(e)?e.host:null)||en(e)}function eu(e){return["html","body","#document"].indexOf(et(e))>=0?e.ownerDocument.body:G(e)&&eo(e)?e:eu(ec(e))}function ed(e,t){void 0===t&&(t=[]);var n,r=eu(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=H(r),a=i?[o].concat(o.visualViewport||[],eo(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(ed(ec(a)))}function ep(e){return["table","td","th"].indexOf(et(e))>=0}function eh(e){return G(e)&&"fixed"!==ei(e).position?e.offsetParent:null}function ef(e){var t=/firefox/i.test($());if(/Trident/i.test($())&&G(e)&&"fixed"===ei(e).position)return null;var n=ec(e);for(W(n)&&(n=n.host);G(n)&&0>["html","body"].indexOf(et(n));){var r=ei(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}function em(e){for(var t=H(e),n=eh(e);n&&ep(n)&&"static"===ei(n).position;)n=eh(n);return n&&("html"===et(n)||"body"===et(n)&&"static"===ei(n).position)?t:n||ef(e)||t}var eg="top",ev="bottom",ex="right",ey="left",eb="auto",ew=[eg,ev,ex,ey],ej="start",eC="end",ek="clippingParents",eS="viewport",eN="popper",eE="reference",eD=ew.reduce(function(e,t){return e.concat([t+"-"+ej,t+"-"+eC])},[]),eI=[].concat(ew,[eb]).reduce(function(e,t){return e.concat([t,t+"-"+ej,t+"-"+eC])},[]),eA=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function eT(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),r}function eM(e){var t=eT(e);return eA.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}function eL(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function eP(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}function eR(e,t){var n=H(e),r=en(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var c=Y();(c||!c&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+er(e),y:l}}function e_(e){var t,n=en(e),r=Q(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=q(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=q(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+er(e),l=-r.scrollTop;return"rtl"===ei(i||n).direction&&(s+=q(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function eO(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&W(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function eF(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function eB(e,t){var n=J(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function eV(e,t,n){return t===eS?eF(eR(e,n)):U(t)?eB(t,n):eF(e_(en(e)))}function ez(e){var t=ed(ec(e)),n=["absolute","fixed"].indexOf(ei(e).position)>=0&&G(e)?em(e):e;return U(n)?t.filter(function(e){return U(e)&&eO(e,n)&&"body"!==et(e)}):[]}function eH(e,t,n,r){var i=[].concat("clippingParents"===t?ez(e):[].concat(t),[n]),o=i[0],a=i.reduce(function(t,n){var i=eV(e,n,r);return t.top=q(i.top,t.top),t.right=Z(i.right,t.right),t.bottom=Z(i.bottom,t.bottom),t.left=q(i.left,t.left),t},eV(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function eU(e){return e.split("-")[0]}function eG(e){return e.split("-")[1]}function eW(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function eq(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?eU(i):null,a=i?eG(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case eg:t={x:s,y:n.y-r.height};break;case ev:t={x:s,y:n.y+n.height};break;case ex:t={x:n.x+n.width,y:l};break;case ey:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?eW(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case ej:t[c]=t[c]-(n[u]/2-r[u]/2);break;case eC:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}function eZ(){return{top:0,right:0,bottom:0,left:0}}function eK(e){return Object.assign({},eZ(),e)}function e$(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function eY(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,a=void 0===o?e.strategy:o,s=n.boundary,l=void 0===s?ek:s,c=n.rootBoundary,u=void 0===c?eS:c,d=n.elementContext,p=void 0===d?eN:d,h=n.altBoundary,f=void 0!==h&&h,m=n.padding,g=void 0===m?0:m,v=eK("number"!=typeof g?g:e$(g,ew)),x=p===eN?eE:eN,y=e.rects.popper,b=e.elements[f?x:p],w=eH(U(b)?b:b.contextElement||en(e.elements.popper),l,u,a),j=J(e.elements.reference),C=eq({reference:j,element:y,strategy:"absolute",placement:i}),k=eF(Object.assign({},y,C)),S=p===eN?k:j,N={top:w.top-S.top+v.top,bottom:S.bottom-w.bottom+v.bottom,left:w.left-S.left+v.left,right:S.right-w.right+v.right},E=e.modifiersData.offset;if(p===eN&&E){var D=E[i];Object.keys(N).forEach(function(e){var t=[ex,ev].indexOf(e)>=0?1:-1,n=[eg,ev].indexOf(e)>=0?"y":"x";N[e]+=D[n]*t})}return N}var eJ={placement:"bottom",modifiers:[],strategy:"absolute"};function eQ(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var eX={passive:!0},e0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function e1(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:K(n*i)/i||0,y:K(r*i)/i||0}}function e2(e){var t,n,r=e.popper,i=e.popperRect,o=e.placement,a=e.variation,s=e.offsets,l=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,p=e.isFixed,h=s.x,f=void 0===h?0:h,m=s.y,g=void 0===m?0:m,v="function"==typeof d?d({x:f,y:g}):{x:f,y:g};f=v.x,g=v.y;var x=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=ey,w=eg,j=window;if(u){var C=em(r),k="clientHeight",S="clientWidth";C===H(r)&&"static"!==ei(C=en(r)).position&&"absolute"===l&&(k="scrollHeight",S="scrollWidth"),(o===eg||(o===ey||o===ex)&&a===eC)&&(w=ev,g-=(p&&C===j&&j.visualViewport?j.visualViewport.height:C[k])-i.height,g*=c?1:-1),(o===ey||(o===eg||o===ev)&&a===eC)&&(b=ex,f-=(p&&C===j&&j.visualViewport?j.visualViewport.width:C[S])-i.width,f*=c?1:-1)}var N=Object.assign({position:l},u&&e0),E=!0===d?e1({x:f,y:g},H(r)):{x:f,y:g};return(f=E.x,g=E.y,c)?Object.assign({},N,((n={})[w]=y?"0":"",n[b]=x?"0":"",n.transform=1>=(j.devicePixelRatio||1)?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",n)):Object.assign({},N,((t={})[w]=y?g+"px":"",t[b]=x?f+"px":"",t.transform="",t))}let e5={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];G(i)&&et(i)&&(Object.assign(i.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});G(r)&&et(r)&&(Object.assign(r.style,o),Object.keys(i).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]};function e4(e,t,n){var r=eU(e),i=[ey,eg].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[ey,ex].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}var e3={left:"right",right:"left",bottom:"top",top:"bottom"};function e9(e){return e.replace(/left|right|bottom|top/g,function(e){return e3[e]})}var e7={start:"end",end:"start"};function e6(e){return e.replace(/start|end/g,function(e){return e7[e]})}function e8(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?eI:l,u=eG(r),d=u?s?eD:eD.filter(function(e){return eG(e)===u}):ew,p=d.filter(function(e){return c.indexOf(e)>=0});0===p.length&&(p=d);var h=p.reduce(function(t,n){return t[n]=eY(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[eU(n)],t},{});return Object.keys(h).sort(function(e,t){return h[e]-h[t]})}function te(e){if(eU(e)===eb)return[];var t=e9(e);return[e6(e),t,e6(t)]}function tt(e){return"x"===e?"y":"x"}function tn(e,t,n){return q(e,Z(t,n))}function tr(e,t,n){var r=tn(e,t,n);return r>n?n:r}var ti=function(e,t){return eK("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:e$(e,ew))};function to(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ta(e){return[eg,ex,ev,ey].some(function(t){return e[t]>=0})}var ts=function(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?eJ:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},eJ,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var a="function"==typeof n?n(i.options):n;u(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:U(e)?ed(e):e.contextElement?ed(e.contextElement):[],popper:ed(t)};var s=eM(eP([].concat(r,i.options.modifiers)));return i.orderedModifiers=s.filter(function(e){return e.enabled}),c(),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(eQ(t,n)){i.rects={reference:es(t,em(n),"fixed"===i.options.strategy),popper:el(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach(function(e){return i.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<i.orderedModifiers.length;r++){if(!0===i.reset){i.reset=!1,r=-1;continue}var o=i.orderedModifiers[r],a=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"==typeof a&&(i=a({state:i,options:u,name:d,instance:l})||i)}}}},update:eL(function(){return new Promise(function(e){l.forceUpdate(),e(i)})}),destroy:function(){u(),s=!0}};if(!eQ(e,t))return l;function c(){i.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var s=o({state:i,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})}function u(){a.forEach(function(e){return e()}),a=[]}return l.setOptions(n).then(function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)}),l}}({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=H(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(e){e.addEventListener("scroll",n.update,eX)}),s&&l.addEventListener("resize",n.update,eX),function(){o&&c.forEach(function(e){e.removeEventListener("scroll",n.update,eX)}),s&&l.removeEventListener("resize",n.update,eX)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=eq({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:eU(t.placement),variation:eG(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,e2(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,e2(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},e5,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=eI.reduce(function(e,n){return e[n]=e4(n,t.rects,o),e},{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,v=eU(g),x=v===g,y=l||(x||!f?[e9(g)]:te(g)),b=[g].concat(y).reduce(function(e,n){return e.concat(eU(n)===eb?e8(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)},[]),w=t.rects.reference,j=t.rects.popper,C=new Map,k=!0,S=b[0],N=0;N<b.length;N++){var E=b[N],D=eU(E),I=eG(E)===ej,A=[eg,ev].indexOf(D)>=0,T=A?"width":"height",M=eY(t,{placement:E,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),L=A?I?ex:ey:I?ev:eg;w[T]>j[T]&&(L=e9(L));var P=e9(L),R=[];if(o&&R.push(M[D]<=0),s&&R.push(M[L]<=0,M[P]<=0),R.every(function(e){return e})){S=E,k=!1;break}C.set(E,R)}if(k)for(var _=f?3:1,O=function(e){var t=b.find(function(t){var n=C.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return S=t,"break"},F=_;F>0&&"break"!==O(F);F--);t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,h=void 0===p||p,f=n.tetherOffset,m=void 0===f?0:f,g=eY(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=eU(t.placement),x=eG(t.placement),y=!x,b=eW(v),w=tt(b),j=t.modifiersData.popperOffsets,C=t.rects.reference,k=t.rects.popper,S="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,N="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(j){if(o){var I,A="y"===b?eg:ey,T="y"===b?ev:ex,M="y"===b?"height":"width",L=j[b],P=L+g[A],R=L-g[T],_=h?-k[M]/2:0,O=x===ej?C[M]:k[M],F=x===ej?-k[M]:-C[M],B=t.elements.arrow,V=h&&B?el(B):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:eZ(),H=z[A],U=z[T],G=tn(0,C[M],V[M]),W=y?C[M]/2-_-G-H-N.mainAxis:O-G-H-N.mainAxis,K=y?-C[M]/2+_+G+U+N.mainAxis:F+G+U+N.mainAxis,$=t.elements.arrow&&em(t.elements.arrow),Y=$?"y"===b?$.clientTop||0:$.clientLeft||0:0,J=null!=(I=null==E?void 0:E[b])?I:0,Q=L+W-J-Y,X=L+K-J,ee=tn(h?Z(P,Q):P,L,h?q(R,X):R);j[b]=ee,D[b]=ee-L}if(s){var et,en="x"===b?eg:ey,er="x"===b?ev:ex,ei=j[w],eo="y"===w?"height":"width",ea=ei+g[en],es=ei-g[er],ec=-1!==[eg,ey].indexOf(v),eu=null!=(et=null==E?void 0:E[w])?et:0,ed=ec?ea:ei-C[eo]-k[eo]-eu+N.altAxis,ep=ec?ei+C[eo]+k[eo]-eu-N.altAxis:es,eh=h&&ec?tr(ed,ei,ep):tn(h?ed:ea,ei,h?ep:es);j[w]=eh,D[w]=eh-ei}t.modifiersData[r]=D}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=eU(n.placement),l=eW(s),c=[ey,ex].indexOf(s)>=0?"height":"width";if(o&&a){var u=ti(i.padding,n),d=el(o),p="y"===l?eg:ey,h="y"===l?ev:ex,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=em(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,x=f/2-m/2,y=u[p],b=v-d[c]-u[h],w=v/2-d[c]/2+x,j=tn(y,w,b),C=l;n.modifiersData[r]=(t={},t[C]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;if(null!=r)("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&eO(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=eY(t,{elementContext:"reference"}),s=eY(t,{altBoundary:!0}),l=to(a,r),c=to(s,i,o),u=ta(l),d=ta(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),tl="tippy-box",tc="tippy-content",tu="tippy-backdrop",td="tippy-arrow",tp="tippy-svg-arrow",th={passive:!0,capture:!0},tf=function(){return document.body};function tm(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function tg(e,t){var n=({}).toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function tv(e,t){return"function"==typeof e?e.apply(void 0,t):e}function tx(e,t){var n;return 0===t?e:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function ty(e){return e.split(/\s+/).filter(Boolean)}function tb(e){return[].concat(e)}function tw(e,t){-1===e.indexOf(t)&&e.push(t)}function tj(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function tC(e){return e.split("-")[0]}function tk(e){return[].slice.call(e)}function tS(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function tN(){return document.createElement("div")}function tE(e){return["Element","Fragment"].some(function(t){return tg(e,t)})}function tD(e){return tg(e,"NodeList")}function tI(e){return tg(e,"MouseEvent")}function tA(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function tT(e){return tE(e)?[e]:tD(e)?tk(e):Array.isArray(e)?e:tk(document.querySelectorAll(e))}function tM(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function tL(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function tP(e){var t,n=tb(e)[0];return null!=n&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function tR(e,t){var n=t.clientX,r=t.clientY;return e.every(function(e){var t=e.popperRect,i=e.popperState,o=e.props.interactiveBorder,a=tC(i.placement),s=i.modifiersData.offset;if(!s)return!0;var l="bottom"===a?s.top.y:0,c="top"===a?s.bottom.y:0,u="right"===a?s.left.x:0,d="left"===a?s.right.x:0,p=t.top-r+l>o,h=r-t.bottom-c>o,f=t.left-n+u>o,m=n-t.right-d>o;return p||h||f||m})}function t_(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[r](t,n)})}function tO(e,t){for(var n,r=t;r;){if(e.contains(r))return!0;r=null==r.getRootNode||null==(n=r.getRootNode())?void 0:n.host}return!1}var tF={isTouch:!1},tB=0;function tV(){!tF.isTouch&&(tF.isTouch=!0,window.performance&&document.addEventListener("mousemove",tz))}function tz(){var e=performance.now();e-tB<20&&(tF.isTouch=!1,document.removeEventListener("mousemove",tz)),tB=e}function tH(){var e=document.activeElement;if(tA(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function tU(){document.addEventListener("touchstart",tV,th),window.addEventListener("blur",tH)}var tG="undefined"!=typeof window&&"undefined"!=typeof document&&!!window.msCrypto,tW=Object.assign({appendTo:tf,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),tq=Object.keys(tW),tZ=function(e){Object.keys(e).forEach(function(t){tW[t]=e[t]})};function tK(e){var t=(e.plugins||[]).reduce(function(t,n){var r,i=n.name,o=n.defaultValue;return i&&(t[i]=void 0!==e[i]?e[i]:null!=(r=tW[i])?r:o),t},{});return Object.assign({},e,t)}function t$(e,t){return(t?Object.keys(tK(Object.assign({},tW,{plugins:t}))):tq).reduce(function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t},{})}function tY(e,t){var n=Object.assign({},t,{content:tv(t.content,[e])},t.ignoreAttributes?{}:t$(e,t.plugins));return n.aria=Object.assign({},tW.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}var tJ=function(){return"innerHTML"};function tQ(e,t){e[tJ()]=t}function tX(e){var t=tN();return!0===e?t.className=td:(t.className=tp,tE(e)?t.appendChild(e):tQ(t,e)),t}function t0(e,t){tE(t.content)?(tQ(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?tQ(e,t.content):e.textContent=t.content)}function t1(e){var t=e.firstElementChild,n=tk(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(tc)}),arrow:n.find(function(e){return e.classList.contains(td)||e.classList.contains(tp)}),backdrop:n.find(function(e){return e.classList.contains(tu)})}}function t2(e){var t=tN(),n=tN();n.className=tl,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=tN();function i(n,r){var i=t1(t),o=i.box,a=i.content,s=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),(n.content!==r.content||n.allowHTML!==r.allowHTML)&&t0(a,e.props),r.arrow?s?n.arrow!==r.arrow&&(o.removeChild(s),o.appendChild(tX(r.arrow))):o.appendChild(tX(r.arrow)):s&&o.removeChild(s)}return r.className=tc,r.setAttribute("data-state","hidden"),t0(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}t2.$$tippy=!0;var t5=1,t4=[],t3=[];function t9(e,t){var n,r,i,o,a,s,l,c=tY(e,Object.assign({},tW,tK(tS(t)))),u=!1,d=!1,p=!1,h=!1,f=[],m=tx(Y,c.interactiveDebounce),g=t5++,v=null,x=tj(c.plugins),y={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},b={id:g,reference:e,popper:tN(),popperInstance:v,props:c,state:y,plugins:x,clearDelayTimeouts:el,setProps:ec,setContent:eu,show:ed,hide:ep,hideWithInteractivity:eh,enable:ea,disable:es,unmount:ef,destroy:em};if(!c.render)return b;var w=c.render(b),j=w.popper,C=w.onUpdate;j.setAttribute("data-tippy-root",""),j.id="tippy-"+b.id,b.popper=j,e._tippy=b,j._tippy=b;var k=x.map(function(e){return e.fn(b)}),S=e.hasAttribute("aria-expanded");return Z(),_(),L(),P("onCreate",[b]),c.showOnCreate&&ei(),j.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),j.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&A().addEventListener("mousemove",m)}),b;function N(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function E(){return"hold"===N()[0]}function D(){var e;return!!(null!=(e=b.props.render)&&e.$$tippy)}function I(){return l||e}function A(){var e=I().parentNode;return e?tP(e):document}function T(){return t1(j)}function M(e){return b.state.isMounted&&!b.state.isVisible||tF.isTouch||o&&"focus"===o.type?0:tm(b.props.delay,+!e,tW.delay)}function L(e){void 0===e&&(e=!1),j.style.pointerEvents=b.props.interactive&&!e?"":"none",j.style.zIndex=""+b.props.zIndex}function P(e,t,n){if(void 0===n&&(n=!0),k.forEach(function(n){n[e]&&n[e].apply(n,t)}),n){var r;(r=b.props)[e].apply(r,t)}}function R(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,r=j.id,i=tb(b.props.triggerTarget||e);i.forEach(function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}})}}function _(){if(!S&&b.props.aria.expanded){var t=tb(b.props.triggerTarget||e);t.forEach(function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===I()?"true":"false"):e.removeAttribute("aria-expanded")})}}function O(){A().removeEventListener("mousemove",m),t4=t4.filter(function(e){return e!==m})}function F(t){if(!tF.isTouch||!p&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!(b.props.interactive&&tO(j,n))){if(tb(b.props.triggerTarget||e).some(function(e){return tO(e,n)})){if(tF.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),d=!0,setTimeout(function(){d=!1}),b.state.isMounted||H())}}}function B(){p=!0}function V(){p=!1}function z(){var e=A();e.addEventListener("mousedown",F,!0),e.addEventListener("touchend",F,th),e.addEventListener("touchstart",V,th),e.addEventListener("touchmove",B,th)}function H(){var e=A();e.removeEventListener("mousedown",F,!0),e.removeEventListener("touchend",F,th),e.removeEventListener("touchstart",V,th),e.removeEventListener("touchmove",B,th)}function U(e,t){W(e,function(){!b.state.isVisible&&j.parentNode&&j.parentNode.contains(j)&&t()})}function G(e,t){W(e,t)}function W(e,t){var n=T().box;function r(e){e.target===n&&(t_(n,"remove",r),t())}if(0===e)return t();t_(n,"remove",a),t_(n,"add",r),a=r}function q(t,n,r){void 0===r&&(r=!1),tb(b.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,r),f.push({node:e,eventType:t,handler:n,options:r})})}function Z(){E()&&(q("touchstart",$,{passive:!0}),q("touchend",J,{passive:!0})),ty(b.props.trigger).forEach(function(e){if("manual"!==e)switch(q(e,$),e){case"mouseenter":q("mouseleave",J);break;case"focus":q(tG?"focusout":"blur",Q);break;case"focusin":q("focusout",Q)}})}function K(){f.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)}),f=[]}function $(e){var t,n=!1;if(!(!b.state.isEnabled||X(e))&&!d){var r=(null==(t=o)?void 0:t.type)==="focus";o=e,l=e.currentTarget,_(),!b.state.isVisible&&tI(e)&&t4.forEach(function(t){return t(e)}),"click"===e.type&&(0>b.props.trigger.indexOf("mouseenter")||u)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ei(e),"click"===e.type&&(u=!n),n&&!r&&eo(e)}}function Y(e){var t=e.target,n=I().contains(t)||j.contains(t);if("mousemove"!==e.type||!n){var r=er().concat(j).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:c}:null}).filter(Boolean);tR(r,e)&&(O(),eo(e))}}function J(e){if(!(X(e)||b.props.trigger.indexOf("click")>=0&&u)){if(b.props.interactive)return void b.hideWithInteractivity(e);eo(e)}}function Q(e){(!(0>b.props.trigger.indexOf("focusin"))||e.target===I())&&(b.props.interactive&&e.relatedTarget&&j.contains(e.relatedTarget)||eo(e))}function X(e){return!!tF.isTouch&&E()!==e.type.indexOf("touch")>=0}function ee(){et();var t=b.props,n=t.popperOptions,r=t.placement,i=t.offset,o=t.getReferenceClientRect,a=t.moveTransition,l=D()?t1(j).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||I()}:e,u=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(D()){var n=T().box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];D()&&l&&u.push({name:"arrow",options:{element:l,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),b.popperInstance=ts(c,j,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:u}))}function et(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function en(){var e,t=b.props.appendTo,n=I();(e=b.props.interactive&&t===tf||"parent"===t?n.parentNode:tv(t,[n])).contains(j)||e.appendChild(j),b.state.isMounted=!0,ee()}function er(){return tk(j.querySelectorAll("[data-tippy-root]"))}function ei(e){b.clearDelayTimeouts(),e&&P("onTrigger",[b,e]),z();var t=M(!0),r=N(),i=r[0],o=r[1];tF.isTouch&&"hold"===i&&o&&(t=o),t?n=setTimeout(function(){b.show()},t):b.show()}function eo(e){if(b.clearDelayTimeouts(),P("onUntrigger",[b,e]),!b.state.isVisible)return void H();if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0)||!u){var t=M(!1);t?r=setTimeout(function(){b.state.isVisible&&b.hide()},t):i=requestAnimationFrame(function(){b.hide()})}}function ea(){b.state.isEnabled=!0}function es(){b.hide(),b.state.isEnabled=!1}function el(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)}function ec(t){if(!b.state.isDestroyed){P("onBeforeUpdate",[b,t]),K();var n=b.props,r=tY(e,Object.assign({},n,tS(t),{ignoreAttributes:!0}));b.props=r,Z(),n.interactiveDebounce!==r.interactiveDebounce&&(O(),m=tx(Y,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?tb(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):r.triggerTarget&&e.removeAttribute("aria-expanded"),_(),L(),C&&C(n,r),b.popperInstance&&(ee(),er().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),P("onAfterUpdate",[b,t])}}function eu(e){b.setProps({content:e})}function ed(){var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=tF.isTouch&&!b.props.touch,i=tm(b.props.duration,0,tW.duration);if(!(e||t||n||r||I().hasAttribute("disabled"))&&(P("onShow",[b],!1),!1!==b.props.onShow(b))){if(b.state.isVisible=!0,D()&&(j.style.visibility="visible"),L(),z(),b.state.isMounted||(j.style.transition="none"),D()){var o=T();tM([o.box,o.content],0)}s=function(){var e;if(b.state.isVisible&&!h){if(h=!0,j.offsetHeight,j.style.transition=b.props.moveTransition,D()&&b.props.animation){var t=T(),n=t.box,r=t.content;tM([n,r],i),tL([n,r],"visible")}R(),_(),tw(t3,b),null==(e=b.popperInstance)||e.forceUpdate(),P("onMount",[b]),b.props.animation&&D()&&G(i,function(){b.state.isShown=!0,P("onShown",[b])})}},en()}}function ep(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=tm(b.props.duration,1,tW.duration);if(!e&&!t&&!n&&(P("onHide",[b],!1),!1!==b.props.onHide(b))){if(b.state.isVisible=!1,b.state.isShown=!1,h=!1,u=!1,D()&&(j.style.visibility="hidden"),O(),H(),L(!0),D()){var i=T(),o=i.box,a=i.content;b.props.animation&&(tM([o,a],r),tL([o,a],"hidden"))}R(),_(),b.props.animation?D()&&U(r,b.unmount):b.unmount()}}function eh(e){A().addEventListener("mousemove",m),tw(t4,m),m(e)}function ef(){b.state.isVisible&&b.hide(),b.state.isMounted&&(et(),er().forEach(function(e){e._tippy.unmount()}),j.parentNode&&j.parentNode.removeChild(j),t3=t3.filter(function(e){return e!==b}),b.state.isMounted=!1,P("onHidden",[b]))}function em(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),K(),delete e._tippy,b.state.isDestroyed=!0,P("onDestroy",[b]))}}function t7(e,t){void 0===t&&(t={});var n=tW.plugins.concat(t.plugins||[]);tU();var r=Object.assign({},t,{plugins:n}),i=tT(e).reduce(function(e,t){var n=t&&t9(t,r);return n&&e.push(n),e},[]);return tE(e)?i[0]:i}t7.defaultProps=tW,t7.setDefaultProps=tZ,t7.currentInput=tF,Object.assign({},e5,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),t7.setDefaultProps({render:t2});let t6=t7;class t8{createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;!this.tippy&&t&&(this.tippy=t6(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){let{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r)return void this.handleDebouncedUpdate(e,t);let i=!(null==t?void 0:t.selection.eq(e.state.selection)),o=!(null==t?void 0:t.doc.eq(e.state.doc));this.updateHandler(e,i,o,t)}show(){var e;null==(e=this.tippy)||e.show()}hide(){var e;null==(e=this.tippy)||e.hide()}destroy(){var e,t;(null==(e=this.tippy)?void 0:e.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null==(t=this.tippy)||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}constructor({editor:e,element:t,view:n,tippyOptions:r={},updateDelay:i=250,shouldShow:o}){this.preventHide=!1,this.shouldShow=e=>{let{view:t,state:n,from:r,to:i}=e,{doc:o,selection:a}=n,{empty:s}=a,l=!o.textBetween(r,i).length&&(0,V.isTextSelection)(n.selection),c=this.element.contains(document.activeElement);return!!(t.hasFocus()||c)&&!s&&!l&&!!this.editor.isEditable},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=e=>{var t;let{event:n}=e;if(this.preventHide){this.preventHide=!1;return}(null==n?void 0:n.relatedTarget)&&(null==(t=this.element.parentNode)?void 0:t.contains(n.relatedTarget))||(null==n?void 0:n.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=e=>{this.blurHandler({event:e})},this.handleDebouncedUpdate=(e,t)=>{let n=!(null==t?void 0:t.selection.eq(e.state.selection)),r=!(null==t?void 0:t.doc.eq(e.state.doc));(n||r)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(e,n,r,t)},this.updateDelay))},this.updateHandler=(e,t,n,r)=>{var i,o,a;let{state:s,composing:l}=e,{selection:c}=s,u=!t&&!n;if(l||u)return;this.createTooltip();let{ranges:d}=c,p=Math.min(...d.map(e=>e.$from.pos)),h=Math.max(...d.map(e=>e.$to.pos));if(!(null==(i=this.shouldShow)?void 0:i.call(this,{editor:this.editor,element:this.element,view:e,state:s,oldState:r,from:p,to:h})))return void this.hide();null==(o=this.tippy)||o.setProps({getReferenceClientRect:(null==(a=this.tippyOptions)?void 0:a.getReferenceClientRect)||(()=>{if((0,V.isNodeSelection)(s.selection)){let t=e.nodeDOM(p);if(t){let e=t.dataset.nodeViewWrapper?t:t.querySelector("[data-node-view-wrapper]");if(e&&(t=e.firstChild),t)return t.getBoundingClientRect()}}return(0,V.posToDOMRect)(e,p,h)})}),this.show()},this.editor=e,this.element=t,this.view=n,this.updateDelay=i,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}}let ne=e=>new z.Plugin({key:"string"==typeof e.pluginKey?new z.PluginKey(e.pluginKey):e.pluginKey,view:t=>new t8({view:t,...e})});V.Extension.create({name:"bubbleMenu",addOptions:()=>({element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}),addProseMirrorPlugins(){return this.options.element?[ne({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});var nt=i,nn=e.i(152076),nr=B,ni=B,no=z;class na{getTextContent(e){return(0,ni.getText)(e,{textSerializers:(0,ni.getTextSerializersFromSchema)(this.editor.schema)})}createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;!this.tippy&&t&&(this.tippy=t6(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){var n,r,i;let{state:o}=e,{doc:a,selection:s}=o,{from:l,to:c}=s;if(!(t&&t.doc.eq(a)&&t.selection.eq(s))){if(this.createTooltip(),!(null==(n=this.shouldShow)?void 0:n.call(this,{editor:this.editor,view:e,state:o,oldState:t})))return void this.hide();null==(r=this.tippy)||r.setProps({getReferenceClientRect:(null==(i=this.tippyOptions)?void 0:i.getReferenceClientRect)||(()=>(0,ni.posToDOMRect)(e,l,c))}),this.show()}}show(){var e;null==(e=this.tippy)||e.show()}hide(){var e;null==(e=this.tippy)||e.hide()}destroy(){var e,t;(null==(e=this.tippy)?void 0:e.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null==(t=this.tippy)||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}constructor({editor:e,element:t,view:n,tippyOptions:r={},shouldShow:i}){this.preventHide=!1,this.shouldShow=e=>{let{view:t,state:n}=e,{selection:r}=n,{$anchor:i,empty:o}=r,a=1===i.depth,s=i.parent.isTextblock&&!i.parent.type.spec.code&&!i.parent.textContent&&0===i.parent.childCount&&!this.getTextContent(i.parent);return!!t.hasFocus()&&!!o&&!!a&&!!s&&!!this.editor.isEditable},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=e=>{var t;let{event:n}=e;if(this.preventHide){this.preventHide=!1;return}(null==n?void 0:n.relatedTarget)&&(null==(t=this.element.parentNode)?void 0:t.contains(n.relatedTarget))||(null==n?void 0:n.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=e=>{this.blurHandler({event:e})},this.editor=e,this.element=t,this.view=n,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}}let ns=e=>new no.Plugin({key:"string"==typeof e.pluginKey?new no.PluginKey(e.pluginKey):e.pluginKey,view:t=>new na({view:t,...e})});function nl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}ni.Extension.create({name:"floatingMenu",addOptions:()=>({element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}),addProseMirrorPlugins(){return this.options.element?[ns({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});var nc={exports:{}},nu={};nc.exports=function e(){if(t)return nu;t=1;var e=nt.default;function n(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var r="function"==typeof Object.is?Object.is:n,i=e.useState,o=e.useEffect,a=e.useLayoutEffect,s=e.useDebugValue;function l(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),l=r[0].inst,u=r[1];return a(function(){l.value=n,l.getSnapshot=t,c(l)&&u({inst:l})},[e,n,t]),o(function(){return c(l)&&u({inst:l}),e(function(){c(l)&&u({inst:l})})},[e]),s(n),n}function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}function u(e,t){return t()}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?u:l;return nu.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:d,nu}();var nd=nc.exports;let np=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"==typeof t?t(e):t&&(t.current=e)})}},nh=e=>{let{contentComponent:t}=e,n=nd.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return nt.default.createElement(nt.default.Fragment,null,Object.values(n))};function nf(){let e=new Set,t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,r){t={...t,[n]:nn.default.createPortal(r.reactElement,r.element,n)},e.forEach(e=>e())},removeRenderer(n){let r={...t};delete r[n],t=r,e.forEach(e=>e())}}}class nm extends nt.default.Component{componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=nf(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){let e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,innerRef:t,...n}=this.props;return nt.default.createElement(nt.default.Fragment,null,nt.default.createElement("div",{ref:np(t,this.editorContentRef),...n}),(null==e?void 0:e.contentComponent)&&nt.default.createElement(nh,{contentComponent:e.contentComponent}))}constructor(e){var t;super(e),this.editorContentRef=nt.default.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(null==(t=e.editor)?void 0:t.contentComponent)}}}let ng=(0,nt.forwardRef)((e,t)=>{let n=nt.default.useMemo(()=>Math.floor(0xffffffff*Math.random()).toString(),[e.editor]);return nt.default.createElement(nm,{key:n,innerRef:t,...e})}),nv=nt.default.memo(ng);var nx=nl(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var r,i,o,a=o[i];if(("_owner"!==a||!t.$$typeof)&&!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}),ny={exports:{}},nb={};ny.exports=function e(){if(n)return nb;n=1;var e=nt.default;function t(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var r="function"==typeof Object.is?Object.is:t,i=nd.useSyncExternalStore,o=e.useRef,a=e.useEffect,s=e.useMemo,l=e.useDebugValue;return nb.useSyncExternalStoreWithSelector=function(e,t,n,c,u){var d=o(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;var h=i(e,(d=s(function(){function e(e){if(!a){if(a=!0,i=e,e=c(e),void 0!==u&&p.hasValue){var t=p.value;if(u(t,e))return o=t}return o=e}if(t=o,r(i,e))return t;var n=c(e);return void 0!==u&&u(t,n)?t:(i=e,o=n)}var i,o,a=!1,s=void 0===n?null:n;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]},[t,n,c,u]))[0],d[1]);return a(function(){p.hasValue=!0,p.value=h},[h]),l(h),h},nb}();var nw=ny.exports;let nj="undefined"!=typeof window?nt.useLayoutEffect:nt.useEffect;class nC{getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){let e=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}}function nk(e){var t;let[n]=(0,nt.useState)(()=>new nC(e.editor)),r=nw.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,null!=(t=e.equalityFn)?t:nx);return nj(()=>n.watch(e.editor),[e.editor,n]),(0,nt.useDebugValue)(r),r}let nS="undefined"==typeof window,nN=nS||!!("undefined"!=typeof window&&window.next);class nE{setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?nS||nN?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender)?this.createEditor():null}createEditor(){var e=this;let t={...this.options.current,onBeforeCreate:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onBeforeCreate)?void 0:n.call(t,...i)},onBlur:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onBlur)?void 0:n.call(t,...i)},onCreate:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onCreate)?void 0:n.call(t,...i)},onDestroy:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onDestroy)?void 0:n.call(t,...i)},onFocus:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onFocus)?void 0:n.call(t,...i)},onSelectionUpdate:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onSelectionUpdate)?void 0:n.call(t,...i)},onTransaction:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onTransaction)?void 0:n.call(t,...i)},onUpdate:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onUpdate)?void 0:n.call(t,...i)},onContentError:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onContentError)?void 0:n.call(t,...i)},onDrop:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onDrop)?void 0:n.call(t,...i)},onPaste:function(){for(var t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null==(n=(t=e.options.current).onPaste)?void 0:n.call(t,...i)}};return new nr.Editor(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)||("extensions"===n&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every((e,n)=>{var r;return e===(null==(r=t.extensions)?void 0:r[n])}):e[n]===t[n]))}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===e.length?nE.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((t,n)=>t===e[n]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){let e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}}function nD(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,nt.useRef)(e);n.current=e;let[r]=(0,nt.useState)(()=>new nE(n)),i=nd.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return(0,nt.useDebugValue)(i),(0,nt.useEffect)(r.onRender(t)),nk({editor:i,selector:t=>{let{transactionNumber:n}=t;return!1===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===n?0:n+1}}),i}(0,nt.createContext)({editor:null}).Consumer;let nI=(0,nt.createContext)({onDragStart:void 0}),nA=()=>(0,nt.useContext)(nI),nT=nt.default.forwardRef((e,t)=>{let{onDragStart:n}=nA(),r=e.as||"div";return nt.default.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});function nM(e){return!!("function"==typeof e&&e.prototype&&e.prototype.isReactComponent)}function nL(e){var t;return"object"==typeof e&&(null==(t=e.$$typeof)?void 0:t.toString())==="Symbol(react.forward_ref)"}class nP{render(){var e;let t=this.component,n=this.props,r=this.editor;(nM(t)||nL(t))&&(n.ref=e=>{this.ref=e}),this.reactElement=nt.default.createElement(t,{...n}),null==(e=null==r?void 0:r.contentComponent)||e.setRenderer(this.id,this)}updateProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={...this.props,...e},this.render()}destroy(){var e;let t=this.editor;null==(e=null==t?void 0:t.contentComponent)||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}constructor(e,{editor:t,props:n={},as:r="div",className:i=""}){this.ref=null,this.id=Math.floor(0xffffffff*Math.random()).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?(0,nn.flushSync)(()=>{this.render()}):this.render()}}class nR extends nr.NodeView{mount(){var e=this;let t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.updateAttributes(t)},deleteNode:()=>this.deleteNode()};if(!this.component.displayName){let e=e=>e.charAt(0).toUpperCase()+e.substring(1);this.component.displayName=e(this.extension.name)}let n={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)}},r=this.component,i=nt.default.memo(e=>nt.default.createElement(nI.Provider,{value:n},nt.default.createElement(r,e)));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let o=this.node.isInline?"span":"div";this.options.as&&(o=this.options.as);let{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new nP(i,{editor:this.editor,props:t,as:o,className:"node-".concat(this.node.type.name," ").concat(a).trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null==(e=this.renderer.element.firstElementChild)?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){let{from:e,to:t}=this.editor.state.selection,n=this.getPos();if("number"==typeof n)if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,n){let r=e=>{this.renderer.updateProps(e),"function"==typeof this.options.attrs&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){let i=this.node,o=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:o,newNode:e,newDecorations:t,oldInnerDecorations:a,innerDecorations:n,updateProps:()=>r({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,r({node:e,decorations:t,innerDecorations:n}),!0)}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if("function"==typeof this.options.attrs){let t=this.editor.extensionManager.attributes,n=(0,nr.getRenderedAttributes)(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function n_(e,t){return n=>n.editor.contentComponent?new nR(e,n,t):{}}e.s(["EditorContent",()=>nv,"NodeViewWrapper",()=>nT,"ReactNodeViewRenderer",()=>n_,"useEditor",()=>nD],987307);var nO=e.i(73687),nF=r,nB=g;function nV(e){let{children:t,className:n,onClick:r,mono:i,rounded:o,...a}=e;return(0,nF.jsxs)("span",{"data-context-mention":"true",className:(0,nB.cn)("inline-flex px-1 relative text-[13px] mr-[1px] group",i?"font-mono text-[12px]":"",r?"cursor-pointer":"",n),onClick:r,...a,children:[(0,nF.jsx)("span",{className:(0,nB.cn)("absolute inset-y-[-0.5px] inset-x-0 bg-v0-gray-100 z-0 transition-colors",r?"group-hover:bg-v0-gray-200":"",o?"rounded-full":"rounded-[4px]")}),(0,nF.jsx)("span",{className:"relative z-10",children:t})]})}e.s(["ContextInlinePill",()=>nV],222348);var nz=i,nH=e.i(718755);function nU(e){let{type:t,data:n}=e,{value:r}=n,{getOpenFileHandler:i}=(0,nH.useOpenFileInActiveBlock)(),o=(0,nz.useMemo)(()=>{switch(t){case"file":return i(r);case"url":return()=>{window.open(r,"_blank","noopener,noreferrer")};case"directory":return;default:return t}},[t,r,i]);return(0,F.jsxs)(nV,{onClick:o,children:["@",n.title]})}function nG(e){let t=e.node.attrs;return(0,F.jsx)(nT,{as:"span",children:(0,F.jsx)(nU,{...t})})}let nW=B.Node.create({name:nO.MENTION_MENU_ITEM_TYPE,group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({data:{default:null},type:{default:null}}),parseHTML:()=>[{tag:'span[data-type="'.concat(nO.MENTION_MENU_ITEM_TYPE,'"]')}],renderHTML(e){let{HTMLAttributes:t}=e;return["span",{"data-type":nO.MENTION_MENU_ITEM_TYPE,...t}]},addNodeView:()=>n_(nG,{as:"span"})});function nq(e){try{let t=JSON.stringify(e),n=new TextEncoder().encode(t);return btoa(String.fromCharCode(...n))}catch(e){return console.error("Error encoding object to base64",e),null}}function nZ(e){try{let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);let r=new TextDecoder().decode(n);return JSON.parse(r)}catch(e){return console.error("Error decoding base64 string",e),null}}e.s(["safeBase64Decode",()=>nZ,"safeBase64Encode",()=>nq],730191);let nK=1e4,n$="v0MessageContentPart:",nY=(0,b.default)(y.default),nJ=k.default.memo(function(e){var t;let{children:n,...r}=e;return n.length>nK?(0,v.jsx)("p",{children:n}):(0,v.jsx)(nY,{allowedLinkPrefixes:w.allowedLinkPrefixes,allowedImagePrefixes:w.allowedImagePrefixes,defaultOrigin:w.defaultOrigin,remarkPlugins:[E.remarkColor],...r,components:{pre:e=>(0,v.jsx)("pre",{...e,className:"bg-v0-background-100 border-v0-alpha-400 text-v0-gray-1000 rounded-lg border px-2 py-[0.3rem] font-mono text-xs font-normal [&_code]:border-none [&_code]:bg-transparent"}),code:e=>{let{children:t,...n}=e;if("string"==typeof t&&(0,E.isColorCode)(t))return(0,v.jsx)(E.ColorCode,{value:t});if("string"==typeof t&&t.startsWith(n$)){let e=t.slice(n$.length);try{let t=nZ(e),n=D.UserMessageContentRichPart.parse(t);return(0,v.jsx)(R,{data:n,components:{MentionInlineNode:nU}})}catch(e){return(0,v.jsx)("div",{children:"ERROR"})}}return(0,v.jsx)("code",{...n,className:"rounded-[0.375rem] border bg-v0-gray-100 font-mono text-xs font-normal before:hidden after:hidden",children:t})},...null!=(t=r.components)?t:{}},children:n})});function nQ(e){let{content:t}=e,n="";for(let e of t.parts){if("mdx"===e.type){n+=e.content;continue}let t=nq(e);n+="`".concat(n$).concat(t,"`")}return(0,v.jsx)(nJ,{children:n})}function nX(e){var t;let{message:n,className:r,isLastMessage:i=!1}=e,o=(0,x.getUIMessageKey)(n);return"parts"===n.content.type?(0,v.jsx)(C.Prose,{className:(0,S.cn)("w-full",r),children:(0,v.jsx)(nQ,{content:n.content})},o):(0,N.isMessageEmpty)(n)?null:(0,v.jsx)("div",{className:(0,S.cn)("flex-1 text-sm",r),children:(0,v.jsx)(j.Renderer,{isLastMessage:i,messageId:o,role:n.role,rows:null!=(t=n.content.value)?t:[],streaming:n.streaming})},o)}var n0=e.i(845210),n1=e.i(470284),n2=e.i(897802),n5=e.i(346863),n4=e.i(393978);let n3="phrasing",n9=["autolink","link","image","label"];function n7(){return{transforms:[ro],enter:{literalAutolink:n8,literalAutolinkEmail:re,literalAutolinkHttp:re,literalAutolinkWww:re},exit:{literalAutolink:ri,literalAutolinkEmail:rr,literalAutolinkHttp:rt,literalAutolinkWww:rn}}}function n6(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:n3,notInConstruct:n9},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:n3,notInConstruct:n9},{character:":",before:"[ps]",after:"\\/",inConstruct:n3,notInConstruct:n9}]}}function n8(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function re(e){this.config.enter.autolinkProtocol.call(this,e)}function rt(e){this.config.exit.autolinkProtocol.call(this,e)}function rn(e){this.config.exit.data.call(this,e);let t=this.stack[this.stack.length-1];(0,n2.ok)("link"===t.type),t.url="http://"+this.sliceSerialize(e)}function rr(e){this.config.exit.autolinkEmail.call(this,e)}function ri(e){this.exit(e)}function ro(e){(0,n4.findAndReplace)(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,ra],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,rs]],{ignore:["link","linkReference"]})}function ra(e,t,n,r,i){let o="";if(!ru(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!rl(n)))return!1;let a=rc(n+r);if(!a[0])return!1;let s={type:"link",title:null,url:o+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[s,{type:"text",value:a[1]}]:s}function rs(e,t,n,r){return!(!ru(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function rl(e){let t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function rc(e){let t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")"),i=(0,n1.ccount)(e,"("),o=(0,n1.ccount)(e,")");for(;-1!==r&&i>o;)e+=n.slice(0,r+1),r=(n=n.slice(r+1)).indexOf(")"),o++;return[e,n]}function ru(e,t){let n=e.input.charCodeAt(e.index-1);return(0===e.index||(0,n5.unicodeWhitespace)(n)||(0,n5.unicodePunctuation)(n))&&(!t||47!==n)}var rd=n2,rp=e.i(820667);function rh(){return{enter:{gfmFootnoteDefinition:rm,gfmFootnoteDefinitionLabelString:rg,gfmFootnoteCall:ry,gfmFootnoteCallString:rb},exit:{gfmFootnoteDefinition:rx,gfmFootnoteDefinitionLabelString:rv,gfmFootnoteCall:rj,gfmFootnoteCallString:rw}}}function rf(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:rk,footnoteReference:rC}}}function rm(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function rg(){this.buffer()}function rv(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,rd.ok)("footnoteDefinition"===n.type),n.label=t,n.identifier=(0,rp.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase()}function rx(e){this.exit(e)}function ry(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function rb(){this.buffer()}function rw(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,rd.ok)("footnoteReference"===n.type),n.label=t,n.identifier=(0,rp.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase()}function rj(e){this.exit(e)}function rC(e,t,n,r){let i=n.createTracker(r),o=i.move("[^"),a=n.enter("footnoteReference"),s=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{...i.current(),before:o,after:"]"})),s(),a(),o+=i.move("]")}function rk(e,t,n,r){let i=n.createTracker(r),o=i.move("[^"),a=n.enter("footnoteDefinition"),s=n.enter("label");return o+=i.move(n.safe(n.associationId(e),{...i.current(),before:o,after:"]"})),s(),o+=i.move("]:"+(e.children&&e.children.length>0?" ":"")),i.shift(4),o+=i.move(n.indentLines(n.containerFlow(e,i.current()),rS)),a(),o}function rS(e,t,n){return 0===t?e:(n?"":"    ")+e}rC.peek=function e(){return"["};let rN=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function rE(){return{canContainEols:["delete"],enter:{strikethrough:rI},exit:{strikethrough:rA}}}function rD(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:rN}],handlers:{delete:rT}}}function rI(e){this.enter({type:"delete",children:[]},e)}function rA(e){this.exit(e)}function rT(e,t,n,r){let i=n.createTracker(r),o=n.enter("strikethrough"),a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),o(),a}rT.peek=function e(){return"~"};var rM=n2;function rL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.align||[]).concat(),r=t.stringLength||rR,i=[],o=[],a=[],s=[],l=0,c=-1;for(;++c<e.length;){let n=[],i=[],u=-1;for(e[c].length>l&&(l=e[c].length);++u<e[c].length;){let o=rP(e[c][u]);if(!1!==t.alignDelimiters){let e=r(o);i[u]=e,(void 0===s[u]||e>s[u])&&(s[u]=e)}n.push(o)}o[c]=n,a[c]=i}let u=-1;if("object"==typeof n&&"length"in n)for(;++u<l;)i[u]=r_(n[u]);else{let e=r_(n);for(;++u<l;)i[u]=e}u=-1;let d=[],p=[];for(;++u<l;){let e=i[u],n="",r="";99===e?(n=":",r=":"):108===e?n=":":114===e&&(r=":");let o=!1===t.alignDelimiters?1:Math.max(1,s[u]-n.length-r.length),a=n+"-".repeat(o)+r;!1!==t.alignDelimiters&&((o=n.length+o+r.length)>s[u]&&(s[u]=o),p[u]=o),d[u]=a}o.splice(1,0,d),a.splice(1,0,p),c=-1;let h=[];for(;++c<o.length;){let e=o[c],n=a[c];u=-1;let r=[];for(;++u<l;){let o=e[u]||"",a="",c="";if(!1!==t.alignDelimiters){let e=s[u]-(n[u]||0),t=i[u];114===t?a=" ".repeat(e):99===t?e%2?(a=" ".repeat(e/2+.5),c=" ".repeat(e/2-.5)):c=a=" ".repeat(e/2):c=" ".repeat(e)}!1===t.delimiterStart||u||r.push("|"),!1!==t.padding&&(!1!==t.alignDelimiters||""!==o)&&(!1!==t.delimiterStart||u)&&r.push(" "),!1!==t.alignDelimiters&&r.push(a),r.push(o),!1!==t.alignDelimiters&&r.push(c),!1!==t.padding&&r.push(" "),(!1!==t.delimiterEnd||u!==l-1)&&r.push("|")}h.push(!1===t.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return h.join("\n")}function rP(e){return null==e?"":String(e)}function rR(e){return e.length}function r_(e){let t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:114*(82===t||114===t)}function rO(e,t){let n=String(e),r=n.indexOf(t),i=r,o=0,a=0;if("string"!=typeof t)throw TypeError("Expected substring");for(;-1!==r;)r===i?++o>a&&(a=o):o=1,i=r+t.length,r=n.indexOf(t,i);return a}function rF(e){let t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function rB(e){let t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function rV(e,t,n){return n.options.emphasis||"*"}(function e(e,t,n,r){let i=rB(n),o=n.enter("emphasis"),a=n.createTracker(r),s=a.move(i);return s+=a.move(n.containerPhrasing(e,{before:s,after:i,...a.current()})),s+=a.move(i),o(),s}).peek=rV;var rz=e.i(939049),rH=e.i(446207),rU=e.i(12105);function rG(){return"<"}function rW(e,t,n,r){let i=rF(n),o='"'===i?"Quote":"Apostrophe",a=n.enter("image"),s=n.enter("label"),l=n.createTracker(r),c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),s(),e.title&&(s=n.enter("title".concat(o)),c+=l.move(" "+i),c+=l.move(n.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),s()),c+=l.move(")"),a(),c}function rq(){return"!"}function rZ(e,t,n,r){let i=e.referenceType,o=n.enter("imageReference"),a=n.enter("label"),s=n.createTracker(r),l=s.move("!["),c=n.safe(e.alt,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),a();let u=n.stack;n.stack=[],a=n.enter("reference");let d=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return a(),n.stack=u,o(),"full"!==i&&c&&c===d?"shortcut"===i?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(d+"]"),l}function rK(){return"!"}function r$(e,t,n){let r=e.value||"",i="`",o=-1;for(;RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){let e,t=n.unsafe[o],i=n.compilePattern(t);if(t.atBreak)for(;e=i.exec(r);){let t=e.index;10===r.charCodeAt(t)&&13===r.charCodeAt(t-1)&&t--,r=r.slice(0,t)+" "+r.slice(e.index+1)}}return i+r+i}function rY(){return"`"}(function e(e){return e.value||""}).peek=rG,rW.peek=rq,rZ.peek=rK,r$.peek=rY;var rJ=rU;function rQ(e,t){let n=(0,rJ.toString)(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function rX(e,t,n,r){let i,o,a=rF(n),s='"'===a?"Quote":"Apostrophe",l=n.createTracker(r);if(rQ(e,n)){let t=n.stack;n.stack=[],i=n.enter("autolink");let r=l.move("<");return r+=l.move(n.containerPhrasing(e,{before:r,after:">",...l.current()})),r+=l.move(">"),i(),n.stack=t,r}i=n.enter("link"),o=n.enter("label");let c=l.move("[");return c+=l.move(n.containerPhrasing(e,{before:c,after:"](",...l.current()})),c+=l.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),o(),e.title&&(o=n.enter("title".concat(s)),c+=l.move(" "+a),c+=l.move(n.safe(e.title,{before:c,after:a,...l.current()})),c+=l.move(a),o()),c+=l.move(")"),i(),c}function r0(e,t,n){return rQ(e,n)?"<":"["}function r1(e,t,n,r){let i=e.referenceType,o=n.enter("linkReference"),a=n.enter("label"),s=n.createTracker(r),l=s.move("["),c=n.containerPhrasing(e,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),a();let u=n.stack;n.stack=[],a=n.enter("reference");let d=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return a(),n.stack=u,o(),"full"!==i&&c&&c===d?"shortcut"===i?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(d+"]"),l}function r2(){return"["}function r5(e){let t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function r4(e){let t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function r3(e,t,n,r){let i=r4(n),o=n.bulletCurrent||r5(n);t&&"list"===t.type&&t.ordered&&(o=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+o);let a=o.length+1;("tab"===i||"mixed"===i&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));let s=n.createTracker(r);s.move(o+" ".repeat(a-o.length)),s.shift(a);let l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,s.current()),u);return l(),c;function u(e,t,n){return t?(n?"":" ".repeat(a))+e:(n?o:o+" ".repeat(a-o.length))+e}}rX.peek=r0,r1.peek=r2;(0,e.i(249548).convert)(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function r9(e){let t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}function r7(e,t,n,r){let i=r9(n),o=n.enter("strong"),a=n.createTracker(r),s=a.move(i+i);return s+=a.move(n.containerPhrasing(e,{before:s,after:i,...a.current()})),s+=a.move(i+i),o(),s}function r6(e,t,n){return n.options.strong||"*"}r7.peek=r6;let r8={inlineCode:r$,listItem:r3};function ie(){return{enter:{table:it,tableData:ia,tableHeader:ia,tableRow:ii},exit:{codeText:is,table:ir,tableData:io,tableHeader:io,tableRow:io}}}function it(e){let t=e._align;(0,rM.ok)(t,"expected `_align` on table"),this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function ir(e){this.exit(e),this.data.inTable=void 0}function ii(e){this.enter({type:"tableRow",children:[]},e)}function io(e){this.exit(e)}function ia(e){this.enter({type:"tableCell",children:[]},e)}function is(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,il));let n=this.stack[this.stack.length-1];(0,rM.ok)("inlineCode"===n.type),n.value=t,this.exit(e)}function il(e,t){return"|"===t?t:e}function ic(e){let t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:a,tableCell:l,tableRow:s}};function a(e,t,n,r){return c(u(e,n,r),e.align)}function s(e,t,n,r){let i=c([d(e,n,r)]);return i.slice(0,i.indexOf("\n"))}function l(e,t,n,r){let i=n.enter("tableCell"),a=n.enter("phrasing"),s=n.containerPhrasing(e,{...r,before:o,after:o});return a(),i(),s}function c(e,t){return rL(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function u(e,t,n){let r=e.children,i=-1,o=[],a=t.enter("table");for(;++i<r.length;)o[i]=d(r[i],t,n);return a(),o}function d(e,t,n){let r=e.children,i=-1,o=[],a=t.enter("tableRow");for(;++i<r.length;)o[i]=l(r[i],e,t,n);return a(),o}function p(e,t,n){let r=r8.inlineCode(e,t,n);return n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&")),r}}var iu=n2;function id(){return{exit:{taskListCheckValueChecked:ih,taskListCheckValueUnchecked:ih,paragraph:im}}}function ip(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:ig}}}function ih(e){let t=this.stack[this.stack.length-2];(0,iu.ok)("listItem"===t.type),t.checked="taskListCheckValueChecked"===e.type}function im(e){let t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){let e=this.stack[this.stack.length-1];(0,iu.ok)("paragraph"===e.type);let n=e.children[0];if(n&&"text"===n.type){let r,i=t.children,o=-1;for(;++o<i.length;){let e=i[o];if("paragraph"===e.type){r=e;break}}r===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function ig(e,t,n,r){let i=e.children[0],o="boolean"==typeof e.checked&&i&&"paragraph"===i.type,a="["+(e.checked?"x":" ")+"] ",s=n.createTracker(r);o&&s.move(a);let l=r8.listItem(e,t,n,{...r,...s.current()});return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(e){return e+a}}function iv(){return[n7(),rh(),rE(),ie(),id()]}function ix(e){return{extensions:[n6(),rf(),rD(),ic(e),ip()]}}var iy=e.i(872238),ib=n5;let iw={tokenize:iR,partial:!0},ij={tokenize:i_,partial:!0},iC={tokenize:iO,partial:!0},ik={tokenize:iF,partial:!0},iS={tokenize:iB,partial:!0},iN={name:"wwwAutolink",tokenize:iL,previous:iV},iE={name:"protocolAutolink",tokenize:iP,previous:iz},iD={name:"emailAutolink",tokenize:iM,previous:iH},iI={};function iA(){return{text:iI}}let iT=48;for(;iT<123;)iI[iT]=iD,58==++iT?iT=65:91===iT&&(iT=97);function iM(e,t,n){let r,i,o=this;return a;function a(t){return!iU(t)||!iH.call(o,o.previous)||iG(o.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(t))}function s(t){return iU(t)?(e.consume(t),s):64===t?(e.consume(t),l):n(t)}function l(t){return 46===t?e.check(iS,u,c)(t):45===t||95===t||(0,ib.asciiAlphanumeric)(t)?(i=!0,e.consume(t),l):u(t)}function c(t){return e.consume(t),r=!0,l}function u(a){return i&&r&&(0,ib.asciiAlpha)(o.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(a)):n(a)}}function iL(e,t,n){let r=this;return i;function i(t){return 87!==t&&119!==t||!iV.call(r,r.previous)||iG(r.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(iw,e.attempt(ij,e.attempt(iC,o),n),n)(t))}function o(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}}function iP(e,t,n){let r=this,i="",o=!1;return a;function a(t){return(72===t||104===t)&&iz.call(r,r.previous)&&!iG(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(t),e.consume(t),s):n(t)}function s(t){if((0,ib.asciiAlpha)(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),s;if(58===t){let n=i.toLowerCase();if("http"===n||"https"===n)return e.consume(t),l}return n(t)}function l(t){return 47===t?(e.consume(t),o)?c:(o=!0,l):n(t)}function c(t){return null===t||(0,ib.asciiControl)(t)||(0,ib.markdownLineEndingOrSpace)(t)||(0,ib.unicodeWhitespace)(t)||(0,ib.unicodePunctuation)(t)?n(t):e.attempt(ij,e.attempt(iC,u),n)(t)}function u(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}}function iR(e,t,n){let r=0;return i;function i(t){return(87===t||119===t)&&r<3?(r++,e.consume(t),i):46===t&&3===r?(e.consume(t),o):n(t)}function o(e){return null===e?n(e):t(e)}}function i_(e,t,n){let r,i,o;return a;function a(t){return 46===t||95===t?e.check(ik,l,s)(t):null===t||(0,ib.markdownLineEndingOrSpace)(t)||(0,ib.unicodeWhitespace)(t)||45!==t&&(0,ib.unicodePunctuation)(t)?l(t):(o=!0,e.consume(t),a)}function s(t){return 95===t?r=!0:(i=r,r=void 0),e.consume(t),a}function l(e){return i||r||!o?n(e):t(e)}}function iO(e,t){let n=0,r=0;return i;function i(a){return 40===a?(n++,e.consume(a),i):41===a&&r<n?o(a):33===a||34===a||38===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||60===a||63===a||93===a||95===a||126===a?e.check(ik,t,o)(a):null===a||(0,ib.markdownLineEndingOrSpace)(a)||(0,ib.unicodeWhitespace)(a)?t(a):(e.consume(a),i)}function o(t){return 41===t&&r++,e.consume(t),i}}function iF(e,t,n){return r;function r(a){return 33===a||34===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||63===a||95===a||126===a?(e.consume(a),r):38===a?(e.consume(a),o):93===a?(e.consume(a),i):60===a||null===a||(0,ib.markdownLineEndingOrSpace)(a)||(0,ib.unicodeWhitespace)(a)?t(a):n(a)}function i(e){return null===e||40===e||91===e||(0,ib.markdownLineEndingOrSpace)(e)||(0,ib.unicodeWhitespace)(e)?t(e):r(e)}function o(e){return(0,ib.asciiAlpha)(e)?a(e):n(e)}function a(t){return 59===t?(e.consume(t),r):(0,ib.asciiAlpha)(t)?(e.consume(t),a):n(t)}}function iB(e,t,n){return r;function r(t){return e.consume(t),i}function i(e){return(0,ib.asciiAlphanumeric)(e)?n(e):t(e)}}function iV(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||(0,ib.markdownLineEndingOrSpace)(e)}function iz(e){return!(0,ib.asciiAlpha)(e)}function iH(e){return!(47===e||iU(e))}function iU(e){return 43===e||45===e||46===e||95===e||(0,ib.asciiAlphanumeric)(e)}function iG(e){let t=e.length,n=!1;for(;t--;){let r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}iI[43]=iD,iI[45]=iD,iI[46]=iD,iI[95]=iD,iI[72]=[iD,iE],iI[104]=[iD,iE],iI[87]=[iD,iN],iI[119]=[iD,iN];e.i(983691);var iW=e.i(434036),iq=e.i(540795),iZ=n5,iK=rp;let i$={tokenize:i5,partial:!0};function iY(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:i0,continuation:{tokenize:i1},exit:i2}},text:{91:{name:"gfmFootnoteCall",tokenize:iX},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:iJ,resolveTo:iQ}}}}function iJ(e,t,n){let r,i=this,o=i.events.length,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);for(;o--;){let e=i.events[o][1];if("labelImage"===e.type){r=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return s;function s(o){if(!r||!r._balanced)return n(o);let s=(0,iK.normalizeIdentifier)(i.sliceSerialize({start:r.end,end:i.now()}));return 94===s.codePointAt(0)&&a.includes(s.slice(1))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),t(o)):n(o)}}function iQ(e,t){let n,r=e.length;for(;r--;)if("labelImage"===e[r][1].type&&"enter"===e[r][0]){n=e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";let i={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;let a={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[r+1],e[r+2],["enter",i,t],e[r+3],e[r+4],["enter",o,t],["exit",o,t],["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(r,e.length-r+1,...l),e}function iX(e,t,n){let r,i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]),a=0;return s;function s(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),l}function l(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(s){if(a>999||93===s&&!r||null===s||91===s||(0,iZ.markdownLineEndingOrSpace)(s))return n(s);if(93===s){e.exit("chunkString");let r=e.exit("gfmFootnoteCallString");return o.includes((0,iK.normalizeIdentifier)(i.sliceSerialize(r)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(s)}return(0,iZ.markdownLineEndingOrSpace)(s)||(r=!0),a++,e.consume(s),92===s?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),a++,c):c(t)}}function i0(e,t,n){let r,i,o=this,a=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]),s=0;return l;function l(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(t)}function u(t){if(s>999||93===t&&!i||null===t||91===t||(0,iZ.markdownLineEndingOrSpace)(t))return n(t);if(93===t){e.exit("chunkString");let n=e.exit("gfmFootnoteDefinitionLabelString");return r=(0,iK.normalizeIdentifier)(o.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p}return(0,iZ.markdownLineEndingOrSpace)(t)||(i=!0),s++,e.consume(t),92===t?d:u}function d(t){return 91===t||92===t||93===t?(e.consume(t),s++,u):u(t)}function p(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a.includes(r)||a.push(r),(0,iq.factorySpace)(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function i1(e,t,n){return e.check(iW.blankLine,t,e.attempt(i$,t,n))}function i2(e){e.exit("gfmFootnoteDefinition")}function i5(e,t,n){let r=this;return(0,iq.factorySpace)(e,i,"gfmFootnoteDefinitionIndent",5);function i(e){let i=r.events[r.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):n(e)}}var i4=e.i(212470),i3=e.i(941392),i9=e.i(759239);function i7(e){let t=(e||{}).singleTilde,n={name:"strikethrough",tokenize:i,resolveAll:r};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset==e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";let i={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},o={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",o,t]],s=t.parser.constructs.insideSpan.null;s&&(0,i4.splice)(a,a.length,0,(0,i9.resolveAll)(s,e.slice(r+1,n),t)),(0,i4.splice)(a,a.length,0,[["exit",o,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",i,t]]),(0,i4.splice)(e,r-1,n-r+3,a),n=r+a.length-2;break}}for(n=-1;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}function i(e,n,r){let i=this.previous,o=this.events,a=0;return s;function s(t){return 126===i&&"characterEscape"!==o[o.length-1][1].type?r(t):(e.enter("strikethroughSequenceTemporary"),l(t))}function l(o){let s=(0,i3.classifyCharacter)(i);if(126===o)return a>1?r(o):(e.consume(o),a++,l);if(a<2&&!t)return r(o);let c=e.exit("strikethroughSequenceTemporary"),u=(0,i3.classifyCharacter)(o);return c._open=!u||2===u&&!!s,c._close=!s||2===s&&!!u,n(o)}}}var i6=iq,i8=n5;class oe{add(e,t,n){ot(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length,n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push([...e]),e.length=0;let r=n.pop();for(;r;)e.push(...r),r=n.pop();this.map.length=0}constructor(){this.map=[]}}function ot(e,t,n,r){let i=0;if(0!==n||0!==r.length){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function on(e,t){let n=!1,r=[];for(;t<e.length;){let i=e[t];if(n){if("enter"===i[0])"tableContent"===i[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){let e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(n=!0);t+=1}return r}function or(){return{flow:{null:{name:"table",tokenize:oi,resolveAll:oo}}}}function oi(e,t,n){let r,i=this,o=0,a=0;return s;function s(e){let t=i.events.length-1;for(;t>-1;){let e=i.events[t][1].type;if("lineEnding"===e||"linePrefix"===e)t--;else break}let r=t>-1?i.events[t][1].type:null,o="tableHead"===r||"tableRow"===r?j:l;return o===j&&i.parser.lazy[i.now().line]?n(e):o(e)}function l(t){return e.enter("tableHead"),e.enter("tableRow"),c(t)}function c(e){return 124===e||(r=!0,a+=1),u(e)}function u(t){return null===t?n(t):(0,i8.markdownLineEnding)(t)?a>1?(a=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),h):n(t):(0,i8.markdownSpace)(t)?(0,i6.factorySpace)(e,u,"whitespace")(t):(a+=1,r&&(r=!1,o+=1),124===t)?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,u):(e.enter("data"),d(t))}function d(t){return null===t||124===t||(0,i8.markdownLineEndingOrSpace)(t)?(e.exit("data"),u(t)):(e.consume(t),92===t?p:d)}function p(t){return 92===t||124===t?(e.consume(t),d):d(t)}function h(t){return(i.interrupt=!1,i.parser.lazy[i.now().line])?n(t):(e.enter("tableDelimiterRow"),r=!1,(0,i8.markdownSpace)(t))?(0,i6.factorySpace)(e,f,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):f(t)}function f(t){return 45===t||58===t?g(t):124===t?(r=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),m):w(t)}function m(t){return(0,i8.markdownSpace)(t)?(0,i6.factorySpace)(e,g,"whitespace")(t):g(t)}function g(t){return 58===t?(a+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),v):45===t?(a+=1,v(t)):null===t||(0,i8.markdownLineEnding)(t)?b(t):w(t)}function v(t){return 45===t?(e.enter("tableDelimiterFiller"),x(t)):w(t)}function x(t){return 45===t?(e.consume(t),x):58===t?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(t))}function y(t){return(0,i8.markdownSpace)(t)?(0,i6.factorySpace)(e,b,"whitespace")(t):b(t)}function b(n){return 124===n?f(n):null===n||(0,i8.markdownLineEnding)(n)?r&&o===a?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):w(n):w(n)}function w(e){return n(e)}function j(t){return e.enter("tableRow"),C(t)}function C(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),C):null===n||(0,i8.markdownLineEnding)(n)?(e.exit("tableRow"),t(n)):(0,i8.markdownSpace)(n)?(0,i6.factorySpace)(e,C,"whitespace")(n):(e.enter("data"),k(n))}function k(t){return null===t||124===t||(0,i8.markdownLineEndingOrSpace)(t)?(e.exit("data"),C(t)):(e.consume(t),92===t?S:k)}function S(t){return 92===t||124===t?(e.consume(t),k):k(t)}}function oo(e,t){let n,r,i,o=-1,a=!0,s=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,d=0,p=new oe;for(;++o<e.length;){let h=e[o],f=h[1];"enter"===h[0]?"tableHead"===f.type?(u=!1,0!==d&&(ol(p,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},p.add(o,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(a=!0,i=void 0,l=[0,0,0,0],c=[0,o+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},p.add(o,0,[["enter",r,t]])),s="tableDelimiterRow"===f.type?2:r?3:1):s&&("data"===f.type||"tableDelimiterMarker"===f.type||"tableDelimiterFiller"===f.type)?(a=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],i=oa(p,t,l,s,void 0,i),l=[0,0,0,0]),c[2]=o)):"tableCellDivider"===f.type&&(a?a=!1:(0!==l[1]&&(c[0]=c[1],i=oa(p,t,l,s,void 0,i)),c=[(l=c)[1],o,0,0])):"tableHead"===f.type?(u=!0,d=o):"tableRow"===f.type||"tableDelimiterRow"===f.type?(d=o,0!==l[1]?(c[0]=c[1],i=oa(p,t,l,s,o,i)):0!==c[1]&&(i=oa(p,t,c,s,o,i)),s=0):s&&("data"===f.type||"tableDelimiterMarker"===f.type||"tableDelimiterFiller"===f.type)&&(c[3]=o)}for(0!==d&&ol(p,t,d,n,r),p.consume(t.events),o=-1;++o<t.events.length;){let e=t.events[o];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=on(t.events,o))}return e}function oa(e,t,n,r,i,o){let a=1===r?"tableHeader":2===r?"tableDelimiter":"tableData",s="tableContent";0!==n[0]&&(o.end=Object.assign({},oc(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));let l=oc(t.events,n[1]);if(o={type:a,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",o,t]]),0!==n[2]){let i=oc(t.events,n[2]),o=oc(t.events,n[3]),a={type:s,start:Object.assign({},i),end:Object.assign({},o)};if(e.add(n[2],0,[["enter",a,t]]),2!==r){let r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){let t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==i&&(o.end=Object.assign({},oc(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function ol(e,t,n,r,i){let o=[],a=oc(t.events,n);i&&(i.end=Object.assign({},a),o.push(["exit",i,t])),r.end=Object.assign({},a),o.push(["exit",r,t]),e.add(n+1,0,o)}function oc(e,t){let n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}RegExp("^"+/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi.source,"i");var ou=iq,od=n5;let op={name:"tasklistCheck",tokenize:of};function oh(){return{text:{91:op}}}function of(e,t,n){let r=this;return i;function i(t){return null===r.previous&&r._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),o):n(t)}function o(t){return(0,od.markdownLineEndingOrSpace)(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):n(t)}function a(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):n(t)}function s(r){return(0,od.markdownLineEnding)(r)?t(r):(0,od.markdownSpace)(r)?e.check({tokenize:om},t,n)(r):n(r)}}function om(e,t,n){return(0,ou.factorySpace)(e,r,"whitespace");function r(e){return null===e?n(e):t(e)}}function og(e){return(0,iy.combineExtensions)([iA(),iY(),i7(e),or(),oh()])}let ov={};function ox(e){let t=this,n=e||ov,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(og(n)),o.push(iv()),a.push(ix(n))}var oy=n2;function ob(){return{enter:{mathFlow:e,mathFlowFenceMeta:t,mathText:o},exit:{mathFlow:i,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:s,mathText:a,mathTextData:s}};function e(e){let t={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[t]}},e)}function t(){this.buffer()}function n(){let e=this.resume(),t=this.stack[this.stack.length-1];(0,oy.ok)("math"===t.type),t.meta=e}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(e){let t=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),n=this.stack[this.stack.length-1];(0,oy.ok)("math"===n.type),this.exit(e),n.value=t;let r=n.data.hChildren[0];(0,oy.ok)("element"===r.type),(0,oy.ok)("code"===r.tagName),r.children.push({type:"text",value:t}),this.data.mathFlowInside=void 0}function o(e){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},e),this.buffer()}function a(e){let t=this.resume(),n=this.stack[this.stack.length-1];(0,oy.ok)("inlineMath"===n.type),this.exit(e),n.value=t,n.data.hChildren.push({type:"text",value:t})}function s(e){this.config.enter.data.call(this,e),this.config.exit.data.call(this,e)}}function ow(e){let t=(e||{}).singleDollarTextMath;return null==t&&(t=!0),r.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:"\n",inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(e,t,n,r){let i=e.value||"",o=n.createTracker(r),a="$".repeat(Math.max(rO(i,"$")+1,2)),s=n.enter("mathFlow"),l=o.move(a);if(e.meta){let t=n.enter("mathFlowMeta");l+=o.move(n.safe(e.meta,{after:"\n",before:l,encode:["$"],...o.current()})),t()}return l+=o.move("\n"),i&&(l+=o.move(i+"\n")),l+=o.move(a),s(),l}function r(e,n,r){let i=e.value||"",o=1;for(!t&&o++;RegExp("(^|[^$])"+"\\$".repeat(o)+"([^$]|$)").test(i);)o++;let a="$".repeat(o);/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^\$|\$$/.test(i))&&(i=" "+i+" ");let s=-1;for(;++s<r.unsafe.length;){let e,t=r.unsafe[s];if(!t.atBreak)continue;let n=r.compilePattern(t);for(;e=n.exec(i);){let t=e.index;10===i.codePointAt(t)&&13===i.codePointAt(t-1)&&t--,i=i.slice(0,t)+" "+i.slice(e.index+1)}}return a+i+a}function i(){return"$"}}var oj=iq,oC=n5;let ok={tokenize:oN,concrete:!0},oS={tokenize:oE,partial:!0};function oN(e,t,n){let r=this,i=r.events[r.events.length-1],o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(t){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),l(t)}function l(t){return 36===t?(e.consume(t),a++,l):a<2?n(t):(e.exit("mathFlowFenceSequence"),(0,oj.factorySpace)(e,c,"whitespace")(t))}function c(t){return null===t||(0,oC.markdownLineEnding)(t)?d(t):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return null===t||(0,oC.markdownLineEnding)(t)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),d(t)):36===t?n(t):(e.consume(t),u)}function d(n){return(e.exit("mathFlowFence"),r.interrupt)?t(n):e.attempt(oS,p,g)(n)}function p(t){return e.attempt({tokenize:v,partial:!0},g,h)(t)}function h(t){return(o?(0,oj.factorySpace)(e,f,"linePrefix",o+1):f)(t)}function f(t){return null===t?g(t):(0,oC.markdownLineEnding)(t)?e.attempt(oS,p,g)(t):(e.enter("mathFlowValue"),m(t))}function m(t){return null===t||(0,oC.markdownLineEnding)(t)?(e.exit("mathFlowValue"),f(t)):(e.consume(t),m)}function g(n){return e.exit("mathFlow"),t(n)}function v(e,t,n){let i=0;return(0,oj.factorySpace)(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function o(t){return e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),s(t)}function s(t){return 36===t?(i++,e.consume(t),s):i<a?n(t):(e.exit("mathFlowFenceSequence"),(0,oj.factorySpace)(e,l,"whitespace")(t))}function l(r){return null===r||(0,oC.markdownLineEnding)(r)?(e.exit("mathFlowFence"),t(r)):n(r)}}}function oE(e,t,n){let r=this;return i;function i(n){return null===n?t(n):(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),o)}function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}var oD=n5;function oI(e){let t=(e||{}).singleDollarTextMath;return null==t&&(t=!0),{tokenize:n,resolve:oA,previous:oT};function n(e,n,r){let i,o,a=0;return s;function s(t){return e.enter("mathText"),e.enter("mathTextSequence"),l(t)}function l(n){return 36===n?(e.consume(n),a++,l):a<2&&!t?r(n):(e.exit("mathTextSequence"),c(n))}function c(t){return null===t?r(t):36===t?(o=e.enter("mathTextSequence"),i=0,d(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),c):(0,oD.markdownLineEnding)(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),c):(e.enter("mathTextData"),u(t))}function u(t){return null===t||32===t||36===t||(0,oD.markdownLineEnding)(t)?(e.exit("mathTextData"),c(t)):(e.consume(t),u)}function d(t){return 36===t?(e.consume(t),i++,d):i===a?(e.exit("mathTextSequence"),e.exit("mathText"),n(t)):(o.type="mathTextData",u(t))}}}function oA(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[3][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type)){for(t=i;++t<r;)if("mathTextData"===e[t][1].type){e[r][1].type="mathTextPadding",e[i][1].type="mathTextPadding",i+=2,r-=2;break}}for(t=i-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):(t===r||"lineEnding"===e[t][1].type)&&(e[n][1].type="mathTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function oT(e){return 36!==e||"characterEscape"===this.events[this.events.length-1][1].type}function oM(e){return{flow:{36:ok},text:{36:oI(e)}}}let oL={};function oP(e){let t=this,n=e||oL,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(oM(n)),o.push(ob()),a.push(ow(n))}let oR=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g,o_=Object.hasOwnProperty;class oO{slug(e,t){let n=this,r=oF(e,!0===t),i=r;for(;o_.call(n.occurrences,r);)n.occurrences[i]++,r=i+"-"+n.occurrences[i];return n.occurrences[r]=0,r}reset(){this.occurrences=Object.create(null)}constructor(){this.occurrences,this.reset()}}function oF(e,t){return"string"!=typeof e?"":(t||(e=e.toLowerCase()),e.replace(oR,"").replace(/ /g,"-"))}function oB(e){let t="element"===e.type?e.tagName.toLowerCase():"",n=2===t.length&&104===t.charCodeAt(0)?t.charCodeAt(1):0;return n>48&&n<55?n-48:void 0}function oV(e){return"children"in e?oH(e):"value"in e?e.value:""}function oz(e){return"text"===e.type?e.value:"children"in e?oH(e):""}function oH(e){let t=-1,n=[];for(;++t<e.children.length;)n[t]=oz(e.children[t]);return n.join("")}var oU=rH;let oG={},oW=new oO;function oq(e){let t=(e||oG).prefix||"";return function(e){oW.reset(),(0,oU.visit)(e,"element",function(e){oB(e)&&!e.properties.id&&(e.properties.id=t+oW.slug(oV(e)))})}}var oZ=e.i(805374);class oK{static Render(e){let{isPublished:t}=(0,n0.usePublishedPage)(),[n,r]=(0,p.useState)(void 0),{activeTab:i}=(0,f.useActiveTab)(),o=e.source.replaceAll(/\\+`/g,"`");return(0,d.jsx)(h.PreviewBlock,{...e,blockType:"markdown",language:"markdown",source:o,onEdit:r,children:(0,d.jsx)("div",{className:(0,g.cn)("flex h-full w-full justify-center overflow-y-auto p-4 md:py-6","preview"!==i&&(t?"hidden":"sr-only invisible")),children:(0,d.jsx)(m.Prose,{children:(0,d.jsx)(nJ,{remarkPlugins:[ox,oP],rehypePlugins:[oq],children:void 0===n?o:n})})})})}}(0,u._)(oK,"getIsPreviewable",()=>!0),(0,u._)(oK,"Actions",p.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,d.jsx)(oZ.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,u._)(oK,"TitleActions",null),(0,u._)(oK,"BrowserControls",null),(0,u._)(oK,"MoreMenu",null),(0,u._)(oK,"ConsoleToggle",null);var o$=u,oY=r,oJ=i,oQ=e.i(204575),oX=h,o0=e.i(139615),o1=e.i(210045),o2=n0,o5=e.i(917806),o4=M,o3=oZ;class o9{static Render(e){let{chatId:t}=(0,o4.useChatId)(),{isPublished:n}=(0,o2.usePublishedPage)(),r=(0,oQ.getBlockIframeId)(e.blockId);return(0,o0.useIframeAutoRender)("VUE",e.source,r),(0,oY.jsx)(oX.PreviewBlock,{allowRefresh:!0,...e,blockType:"vue",language:"vue",resultId:e.blockId,children:(0,oY.jsx)(o1.Iframe,{iframeId:r,isPublished:n,origin:(0,o5.getIframeOrigin)(t||e.blockId),src:"/render/vue"},r)})}}(0,o$._)(o9,"getIsPreviewable",e=>{let{closed:t}=e;return t}),(0,o$._)(o9,"Actions",oJ.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,oY.jsx)(o3.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,o$._)(o9,"BrowserControls",null),(0,o$._)(o9,"MoreMenu",null),(0,o$._)(o9,"ConsoleToggle",null);var o7=u,o6=r,o8=h,ae=oQ,at=oZ,an=e.i(926224);let ar={SVELTEKIT_UNSUPPORTED:"v0 does not currently support previewing advanced SvelteKit projects",NON_SUPPORTED_FILES:"v0 can not detect a page to preview"},ai=RegExp("from ['\"](\\$app\\/(server))|(node:.+?)|path|fs|url['\"]");function ao(e,t){return aa("code-project"===t.type?(0,an.parseMultiFileSource)({source:e,blockType:"code-project",blockId:"fake-block-id"}):[{source:e,meta:t,isDeleted:!1}])}function aa(e){if(0===(e=e.filter(e=>!e.isDeleted)).length||!e.some(e=>e.meta.file&&e.meta.file.endsWith(".svelte")))return ar.NON_SUPPORTED_FILES;for(let{source:i,meta:o}of e){var t,n,r;if(null==(t=o.file)?void 0:t.endsWith("+error.svelte"))return ar.NON_SUPPORTED_FILES;if(((null==(n=o.file)?void 0:n.endsWith("/+page."))||(null==(r=o.file)?void 0:r.endsWith("/+layout.")))&&(o.file.includes("[...")||o.file.includes("("))||i.split("\n").filter(e=>e.trim().startsWith("import")).join("\n").match(ai))return ar.SVELTEKIT_UNSUPPORTED}return!0}var as=e.i(696825),al=n0,ac=e.i(930293),au=o5,ad=i,ap=e.i(868948),ah=e.i(988094),af=f,am=M,ag=e.i(295224),av=e.i(472166),ax=o1,ay=e.i(53223),ab=e.i(470259),aw=e.i(639056),aj=e.i(487581),aC=e.i(209819),ak=e.i(577247),aS=e.i(889938),aN=s,aE=e.i(797173),aD=e.i(84079),aI=e.i(743839),aA=e.i(923605),aT=e.i(899488),aM=e.i(556355),aL=e.i(176248),aP=e.i(432008),aR=e.i(566274),a_=e.i(160769),aO=e.i(298450),aF=e.i(622661),aB=e.i(142219),aV=e.i(668887),az=e.i(102246),aH=e.i(32170);class aU{static Render(e){let{isPublished:t}=(0,al.usePublishedPage)(),{activeForkKey:n}=(0,am.useChatMessages)(),{isStreaming:r,chatId:i}=(0,am.useChatLoadingState)(),{canWriteToChat:o,title:a,ownerId:s}=(0,aC.useChatMetadata)(),[l,c]=(0,aw.useAtom)(aj.previewBlockErrorsAtom),[u]=(0,aw.useAtom)(aN.consoleVisibilityAtom),{isBlockPreviewable:d}=(0,af.useActiveTab)(),p=(0,ag.useLatest)(d),{getBlockForked:h}=(0,as.useForkedBlocks)(),{user:f}=(0,aH.useUser)(),{token:m,error:g}=(0,ac.useSessionTokenForFrame)(i);(0,ad.useEffect)(()=>{c([])},[e.blockId,c]);let{files:v,loadingPath:x}=(0,aE.useBlockFiles)({blockId:e.blockId,closed:e.closed,source:e.source,meta:e.meta}),y=(0,ag.useLatest)(v),b=(0,ae.getBlockIframeId)(e.blockId),{submit:w}=(0,av.useV0Chat)(),{actions:j}=(0,aV.useCurrentBlockDesignMode)(),{setDesignModeEnabled:C}=j;(0,ak.useMessage)(t=>{if(t.data&&"object"==typeof t.data&&t.data.__v0_remote__){if("generation_logs"===t.data.type){var i;let n=(t.data.logs||[]).join("\n\n"),o=aB.store.get(aj.previewBlockCollectedErrorsVersion),a=aB.store.get(aj.previewBlockDisplayedErrorsVersion)||e.blockId,s=(null==(i=aB.store.get(aj.previewBlockPreloadingSuccessCallback))?void 0:i.callback)||null;if(o&&o!==a&&s&&!n){null==s||s(),aB.store.set(aj.previewBlockPreloadingSuccessCallback,null);return}r&&(0,az.updateAgentRuntimeErrors)({blockId:t.data.id||e.blockId,fullErrorMessage:n}).catch(n=>{(0,ay.track)("FailedToUpdateBlockRuntimeErrors",{blockId:t.data.id||e.blockId,error:n instanceof Error?n.message:String(n)})})}if("error"===t.data.type){let n=(0,ap.cleanBlockError)(t.data.error,t.data.stack);c(r=>r.some(e=>e.text===n)||!p.current?r:((0,ay.track)(t.data.isFatal?"V0BlockPreviewError":"V0BlockPreviewSoftError",{language:"svelte",messageId:e.messageId,blockId:e.blockId,from:void 0!==e.meta.isQuickEdit?"quick-edit":void 0,forkedFromBlockId:h(e.blockId),resultId:e.resultId||""},{errorMsg:n,errorCode:ab.V0_BLOCK_PREVIEW_ERROR}),r.concat({isFatal:t.data.isFatal,blockId:aB.store.get(aj.previewBlockCollectedErrorsVersion)||e.blockId,isServer:t.data.isServer,text:n,currentURL:t.data.currentURL})))}if("frame_onload"===t.data.type&&c([]),("refine"===t.data.type||"add-refinement-element"===t.data.type)&&(C(!1),y.current)){let r=y.current.find(e=>e.meta.file===t.data.file);if(!r)return void alert("File not found");let{componentName:i,sourceContext:o}=(0,aS.structureRefinementData)({event:t,file:r});if("refine"===t.data.type){let a={version:1,parts:[(0,aS.createRefinementPart)({file:r.meta.file,componentName:i||"",sourceContext:o,line:t.data.line,column:t.data.column}),{type:"mdx",content:t.data.prompt}]},s=(null==n?void 0:n.indexOf(e.messageId))||-1;n&&s>0&&s<n.length-1?w({action:"edit",content:a,userMessageId:n[s+1],type:"refinement"}):w({action:"new",content:a,attachments:[],type:"refinement"})}}}},[b,w,n,c,e.messageId,y,i,e.blockId,p,e.meta.isQuickEdit,h,e.resultId,C]);let k="code-project"===e.meta.type&&(null==v?void 0:v.some(e=>{var t,n;return null==(n=e.meta)||null==(t=n.file)?void 0:t.endsWith("+page.svelte")})),S=null;if(e.blockId&&d&&(m||g)){let n=new URLSearchParams;n.set("__v0_renderer","svelte"),t&&n.set("mql","true"),g||!m?n.set("__v0",""):m&&f&&(f.teamId&&f.teamId===s||s===f.id)&&n.set("__v0_token",m),e.isV3&&n.set("isV3","true"),S=(0,o6.jsx)(ax.Iframe,{iframeId:b,isPublished:t,origin:(0,au.getLiteIframeOrigin)(e.blockId,a),src:"/?".concat(n.toString())}),k&&(S=(0,o6.jsx)("div",{className:"size-full","data-slot":"browser-content",children:S}))}return(0,o6.jsxs)(o8.PreviewBlock,{initialFileTreeSize:e.initialFileTreeSize,...e,loadingPath:x,files:v,blockType:"code-project"!==e.meta.type?"svelte":"code-project",language:"svelte",allowRefresh:!k,allowFullScreen:!k,isV3:e.isV3,initialConsoleSize:e.initialConsoleSize,initialConsoleExpanded:e.initialConsoleExpanded,hideConsole:!u,browserControls:"code-project"===e.meta.type?(0,o6.jsx)(aD.BrowserFrame,{blockId:e.blockId,iframeId:b}):void 0,children:[l.length?(0,o6.jsx)(ah.ErrorsBanner,{blockId:e.blockId,errors:l,onDismiss:()=>{c([])},canWriteToChat:o}):null,S]})}}(0,o7._)(aU,"getIsPreviewable",e=>{let{closed:t,source:n,meta:r}=e;if(!t)return!1;let i=ao(n,r);return"string"==typeof i?{error:i}:i}),(0,o7._)(aU,"Actions",ad.default.memo(e=>{let{blockId:t,closed:n}=e;return(0,o6.jsx)(at.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,o7._)(aU,"BrowserControls",ad.default.memo(e=>{let{blockId:t}=e;return(0,o6.jsx)(aD.BrowserFrame,{blockId:t,iframeId:(0,ae.getBlockIframeId)(t)})})),(0,o7._)(aU,"MoreMenu",ad.default.memo(e=>{let{blockId:t,blockLanguage:n,blockSource:r}=e,{fullScreenResult:i,setFullscreenResult:o}=(0,aR.useFullscreenResult)(),{activeTab:a}=(0,af.useActiveTab)(),s=(0,aP.useShouldShowBlocksInDrawer)();return(0,o6.jsxs)(aM.DropdownMenu,{children:[(0,o6.jsx)(aM.DropdownMenuTrigger,{asChild:!0,children:(0,o6.jsx)(aL.Button,{variant:"ghost",className:"size-7 rounded-md text-v0-gray-900",size:"sm",children:(0,o6.jsx)(aI.MoreHorizontal,{})})}),(0,o6.jsxs)(aM.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:8,children:["code"!==a&&!s&&(0,o6.jsx)(aM.DropdownMenuGroup,{children:(0,o6.jsxs)(aM.DropdownMenuItem,{onSelect:()=>o(!i,t),children:[(0,o6.jsx)(aA.Fullscreen,{}),(0,o6.jsx)("span",{children:i?"Exit fullscreen":"Fullscreen"})]})}),(0,o6.jsx)(aM.DropdownMenuSeparator,{}),(0,o6.jsx)(aM.DropdownMenuGroup,{children:(0,o6.jsx)(a_.BlockActionDownloadZip,{blockId:t,lang:n,source:r})})]})]})})),(0,o7._)(aU,"ConsoleToggle",ad.default.memo(e=>{let{blockId:t}=e,[n,r]=(0,aw.useAtom)(aN.consoleVisibilityAtom),{blockStatus:i,clearEvents:o}=(0,aO.useNewConsoleEvents)(t),a=i[t],s=()=>{let e=!n;r(e),e&&o()};return(0,o6.jsx)(aT.CodeBlockButton,{onClick:s,tooltip:{side:"bottom",content:n?"Hide Console":"Show Console"},className:"size-7 rounded-md text-v0-gray-900",children:(0,o6.jsx)(aF.default,{status:a,isExpanded:n})})}));var aG=u,aW=r,aq=i,aZ=oQ,aK=h,a$=o1,aY=M,aJ=aD,aQ=oZ;class aX{static Render(e){let{source:t,blockId:n,remoteInfo:r,closed:i}=e,{chatId:o}=(0,aY.useChatId)(),a=(0,aZ.getBlockIframeId)("remote-preview"),s=i;return(0,aq.useEffect)(()=>{if(!s||!(n||o))return;let e=new AbortController,t=async()=>{try{await fetch("/chat/api/chat/remote/preview?".concat("@remote"===n?"cid=".concat(o):"bid=".concat(n)),{signal:e.signal})}catch(e){}};return setTimeout(()=>{t()},0),()=>{e.abort()}},[s,o,n]),(0,aW.jsx)(aK.PreviewBlock,{...e,meta:"@remote"===n?{...e.meta}:{...e.meta,file:"Files"},allowFullScreen:!1,language:"plaintext",blockType:"local",remoteInfo:r,source:t,children:s||"@remote"===n?(0,aW.jsx)(a$.Iframe,{iframeId:a,isPublished:!1,origin:"",src:"/chat/api/chat/remote/proxy?cid=".concat(o)},a):null})}}(0,aG._)(aX,"getIsPreviewable",e=>{let{closed:t}=e;return t}),(0,aG._)(aX,"Actions",aq.default.memo(e=>{let{blockId:t,closed:n}=e;return"@remote"===t?null:(0,aW.jsx)(aQ.PreviewBlockTitleActions,{blockId:t,closed:n})})),(0,aG._)(aX,"BrowserControls",aq.default.memo(e=>{let{blockId:t}=e;return(0,aW.jsx)(aJ.BrowserFrame,{blockId:t,iframeId:(0,aZ.getBlockIframeId)(t)})})),(0,aG._)(aX,"MoreMenu",null),(0,aG._)(aX,"ConsoleToggle",null);var a0=e.i(301331),a1=e.i(519738),a2=f;function a5(e,t){switch(e){case"node.js":case"nodejs":case"python":return o.CodeExecutionBlockLogic;case"markdown":return oK;case"html":return c.HTMLBlockLogic;case"v0":case"react":case"tsx":return a.V0BlockLogic;case"vue":return o9;case"svelte":return aU;case"code":if("vue"===t)return o9;if("html"===t)return c.HTMLBlockLogic;if("markdown"===t)return oK;if("svelte"===t)return aU;return l.CodeBlockLogic;case"local":return aX;case"code-project":if("svelte"===t)return aU;return s.NextLiteBlockLogic;case"inline-sql":return null}}function a4(e){var t;let{block:n,initialSize:o,initialConsoleSize:a,initialConsoleExpanded:s,initialFileTreeSize:l,allowMobileFullscreen:c,isAuthor:u,title:d}=e,{history:p,currentBlockIndex:h}=(0,a0.useBlockHistory)({blockId:(null==n?void 0:n.id)||""}),{isLatest:f}=(0,a1.useBlockVersionInfo)(null==n?void 0:n.id),m=n?a5(n.type,n.language):null,{activeTab:g}=(0,a2.useActiveTab)(),v=(0,i.useMemo)(()=>!f,[f]);return n&&m?{actions:(0,r.jsx)(m.Actions,{blockId:n.id,closed:n.closed}),browserControls:"code-project"===n.meta.type&&m.BrowserControls&&"code"!==g?(0,r.jsx)(m.BrowserControls,{blockId:n.id}):null,moreMenu:"code-project"===n.meta.type&&m.MoreMenu&&!v?(0,r.jsx)(m.MoreMenu,{blockId:n.id,blockLanguage:n.language,blockSource:n.source}):null,consoleToggle:"code-project"===n.meta.type&&m.ConsoleToggle?(0,r.jsx)(m.ConsoleToggle,{blockId:n.id}):null,content:(0,r.jsx)(m.Render,{allowMobileFullscreen:c,initialFileTreeSize:l,blockId:n.id,resultId:n.resultId,closed:n.closed,initialOutputSize:o,messageId:n.messageId,language:n.language,meta:n.meta,source:n.source,remoteInfo:n.remoteInfo,isAuthor:u,hasSourceBeenEdited:n.hasSourceBeenEdited,originalCode:h>0?null==(t=p[h-1])?void 0:t.source:void 0,latestDeploymentInfo:n.latestDeploymentInfo,initialConsoleSize:null!=a?a:void 0,initialConsoleExpanded:null!=s?s:void 0,title:d,skipBrowserFrame:"code-project"===n.meta.type&&!!m.BrowserControls})}:{action:null,content:null}}function a3(e){let{block:t,allowMobileFullscreen:n,initialSize:r,title:i}=e,{content:o}=a4({block:t,initialSize:r,allowMobileFullscreen:n,location:void 0,title:i});return o}},284546,e=>{"use strict";e.s(["useActiveTab",()=>l]);var t=e.i(385671),n=e.i(449381),r=e.i(639056),i=e.i(846139),o=e.i(74356),a=e.i(242759),s=e.i(92479);function l(){let{atoms:e}=(0,t.useChatLayout)(),l=(0,r.useAtomValue)(e.activeTabIntent),{bl:c}=(0,a.useFlags)(),{isStreaming:u}=(0,s.useChatLoadingState)(),d=(0,n.useActiveBlockState)(),p={type:"none"};if(!d)return{activeTab:"code",previewMeta:p,canShowPreviewTab:!1,isBlockPreviewable:!1};let{type:h,language:f}=d,m=(0,i.getBlockLogic)(h,f),g=null==m?void 0:m.getIsPreviewable(d),v=(0,o.canShowPreview)(g||!1),x=function(){return c&&!(null==d?void 0:d.closed)&&u||v}();return(g&&"boolean"!=typeof g?"error"in g?p={type:"error",error:g.error}:"warning"in g&&(p={type:"warning",warning:g.warning}):p={type:"none"},x&&"preview"===l)?{activeTab:"preview",previewMeta:p,canShowPreviewTab:x,isBlockPreviewable:v}:{activeTab:"code",previewMeta:p,canShowPreviewTab:x,isBlockPreviewable:v}}},768619,210045,e=>{"use strict";e.s(["CachedNextLiteIframe",()=>g,"getIframeSrc",()=>m,"markIframeAsLoaded",()=>f],768619);var t=e.i(509473),n=e.i(743124);e.s(["Iframe",()=>u],210045);var r=t,i=e.i(7284),o=n,a=e.i(914483),s=e.i(284546);let l="allow-scripts allow-same-origin allow-forms allow-downloads allow-popups-to-escape-sandbox allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-presentation",c="fullscreen; camera; microphone; gyroscope; accelerometer; geolocation; clipboard-write; autoplay";function u(e){let{iframeId:t,iframeRef:n,isPublished:u,src:d,origin:p,onLoad:h,dataAppSrc:f}=e,m=p+d,g=(0,a.useSet)(t);(0,o.useEffect)(()=>{g(m)},[g,m]);let{activeTab:v}=(0,s.useActiveTab)();return(0,r.jsx)("iframe",{allow:c,title:"v0 block",className:(0,i.default)("h-full w-full select-none","preview"!==v&&(u?"hidden":"sr-only invisible")),"data-origin":p,"data-v0":!0,"data-app-src":f,id:t,loading:"eager",onLoad:h,ref:n,sandbox:l,src:m,fetchPriority:"high"})}var d=e.i(142219),p=e.i(487581);let h=new WeakSet;function f(e){h.add(e)}function m(e){return e.getAttribute("data-app-src")||e.src}function g(e){let{chatId:r,blockId:i,iframeId:o,origin:a,src:s,...l}=e,[c,f]=(0,n.useState)(a),[m,g]=(0,n.useState)(s),v=(0,n.useRef)(r);(0,n.useEffect)(()=>{if(r!==v.current)f(a),g(s),v.current=r;else{let e=document.getElementById(o);e&&e.contentWindow&&h.has(e)?(d.store.set(p.previewBlockCollectedErrorsVersion,i),d.store.set(p.previewBlockPreloadingSuccessCallback,null),d.store.set(p.previewBlockDisplayedErrorsVersion,i),e.contentWindow.postMessage({type:"switch_client",id:i,fallbackUrl:a+s,__v0_remote__:!0},"*")):(f(a),g(s))}},[r,i,a,s]);let x=a+s;return(0,t.jsx)(u,{iframeId:o,origin:c,src:m,dataAppSrc:x,...l})}},583965,e=>{"use strict";e.s(["useBrowserFrame",()=>l]);var t=e.i(204575),n=e.i(449381),r=e.i(743124),i=e.i(295224),o=e.i(577247),a=e.i(768619),s=e.i(914483);function l(e){let l=(0,n.useActiveBlockState)(),c=e||(null==l?void 0:l.id),[u,d]=(0,s.useGetSet)("browser-frame:canGoBack:".concat(c),!1),[p,h]=(0,s.useGetSet)("browser-frame:canGoForward:".concat(c),!1),[f,m]=(0,s.useGetSet)("browser-frame:href",""),[g,v]=(0,s.useGetSet)("browser-frame:iframe:".concat(c),null),[x,y]=(0,s.useGetSet)("browser-frame:loading:".concat(c),!0),[b,w]=(0,s.useGetSet)("browser-frame:temporalHref:".concat(c),null),j=(0,i.useLatest)(f),C=(0,r.useCallback)(e=>{let t=new URL((0,a.getIframeSrc)(e));if(j.current){let e=new URL(j.current);t.pathname=e.pathname,t.search=e.search,t.hash=e.hash}return t.toString()},[g]),k=(0,r.useCallback)(()=>{g&&(g.contentDocument?g.contentDocument.location.reload():j.current?g.src=C(g):g.src=(0,a.getIframeSrc)(g),w(null),y(!0))},[g,j,C,y,w]);return(0,o.useMessage)(e=>{let{data:t}=e;if(t&&"object"==typeof t&&t.__v0_remote__)switch(t.type){case"location_change":m(e.data.href),d("boolean"==typeof e.data.canGoBack&&e.data.canGoBack),h("boolean"==typeof e.data.canGoForward&&e.data.canGoForward);break;case"app_navigation_state":y(e.data.loading)}},[m,d,h,y]),(0,r.useEffect)(()=>{let e;if(!c)return;let n=(0,t.getBlockIframeId)(c),r=document.getElementById(n);return r||(e=new MutationObserver(()=>{let t=document.getElementById(n);t&&(null==e||e.disconnect(),v(t))})).observe(document.body,{childList:!0,subtree:!0}),v(r),y(!0),()=>{try{null==e||e.disconnect()}catch(e){}}},[c,m,y]),{canGoBack:u,setCanGoBack:d,canGoForward:p,setCanGoForward:h,href:f,setHref:m,iframe:g,latestHref:j,loading:x,setLoading:y,refresh:k,temporalHref:b,setTemporalHref:w,getFullIframeHref:C}}},76866,e=>{"use strict";e.s(["useRestoreBlockVersion",()=>f]);var t=e.i(743124),n=e.i(979865);e.i(563948);var r=e.i(407562),i=e.i(92479),o=e.i(709717),a=e.i(301331),s=e.i(449381),l=e.i(848258),c=e.i(767373),u=e.i(120485),d=e.i(362777),p=e.i(583965),h=e.i(343258);function f(e){let{activeForkKey:f,messages:m}=(0,i.useChatMessages)(),g=(0,i.useSetChatState)(),{chatId:v}=(0,i.useChatId)(),{history:x,currentBlockIndex:y,updateBlockData:b}=(0,a.useBlockHistory)({blockId:e,searchAll:!0}),w=(0,n.useRouter)(),j=(0,s.useActiveBlockState)(),{refresh:C}=(0,p.useBrowserFrame)(),k=(0,s.useSetActiveBlockState)(),{scrollToHash:S}=(0,l.useScrollToMessage)(),[N,E]=(0,t.useState)(!1),[,D]=(0,t.useTransition)(),{setEditValueMap:I}=(0,h.useEditValueMap)({blockId:e||""}),A=(0,t.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!f||!v)return void r.toast.error("Could not find the message in the chat");let i=x[t].meta.project;if(!i)return void r.toast.error("Something went wrong.");E(!0),D(async()=>{var a,s,l,c;try{let{error:l,newAssistantMessageId:c}=await (0,o.restoreBlock)({projectId:i,blockId:e,chatId:v,initialVersion:t,versionToCreate:x.length,forkKey:f});l||!c?((0,u.handleChatError)(l)||r.toast.error("Something went wrong. Please try again."),null==(a=n.onError)||a.call(n,l||"Something went wrong. Please try again.")):(r.toast.success("Version restored successfully"),g(()=>({isLoading:!0,isRestoring:!0})),w.push("#".concat(c)),null==(s=n.onSuccess)||s.call(n,c))}catch(e){r.toast.error("Failed to restore version"),null==(l=n.onError)||l.call(n,e)}finally{E(!1),null==(c=n.onFinally)||c.call(n)}})},[f,v,x,g,w]),T=(0,t.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return void r.toast.error("Block not found");if(N)return;let n=null==f?void 0:f.findIndex(e=>e===x[y].messageId);if(void 0===n||n<0||!f||!v)return void r.toast.error("Could not find the message in the chat");A(e,y,t)},[N,f,v,x,y,A,e]),M=(0,t.useCallback)(e=>{if(!e||0===x.length)return;let t=x[x.length-1];if(k(t),!t.messageId)return;let n=m.map((e,t)=>({...e,parentId:e.parentId||null,createdAt:new Date(t),messageId:e.id})),r=(0,c.computeInitialForkKey)(n,t.messageId);f&&!f.includes(t.messageId)&&g({activeForkKey:r}),S(t.messageId,150,!0,r)},[x,k,m,f,g,S]),[L,P]=(0,t.useState)(!1);return{restoreVersion:A,restoreCurrentBlock:T,exitToLatest:M,isRestoring:N,undoBlockEdits:(0,t.useCallback)(async(e,t)=>{let{onSuccess:n,onError:i,onFinally:o}=t;if(!v)return void r.toast.error("Could not find the message in the chat");P(!0);try{let t=await (0,d.undoBlockEdits)({blockId:e,chatId:v});if("success"in t){let{newSource:i,newSourceVersionKey:o}=t;I({}),j&&j.id===e&&k({...j,hasSourceBeenEdited:!0,source:i,lastEditedAt:new Date().toISOString()}),b({blockId:e,data:{hasSourceBeenEdited:!0,source:i,lastEditedAt:new Date().toISOString(),sourceVersionKey:o}}),C(),r.toast.success("Block edits undone"),null==n||n()}else r.toast.error("Failed to undo block edits")}catch(e){r.toast.error("Failed to undo block edits"),null==i||i(e)}finally{P(!1),null==o||o()}},[j,v,C,k,I,b]),isUndoing:L}}},368387,e=>{"use strict";e.s(["ChatUndoChangesDialog",()=>c]);var t=e.i(509473),n=e.i(176248),r=e.i(686832),i=e.i(120945);e.i(904347);var o=e.i(37737),a=e.i(76866),s=e.i(53223),l=e.i(211976);function c(e){let{blockId:c}=e,{undoBlockEdits:u,isUndoing:d}=(0,a.useRestoreBlockVersion)(c),p=()=>{u(c,{onSuccess:()=>{(0,o.closeDialog)(),(0,s.track)("UndoChanges",{blockId:c})}})};return(0,t.jsxs)(i.AtomicDialog,{type:"undoChanges",children:[(0,t.jsxs)(r.ModalHeader,{children:[(0,t.jsx)(r.ModalTitle,{children:"Undo changes"}),(0,t.jsx)(r.ModalDescription,{children:"Are you sure you want to undo changes? This action is not reversible and will restore the block to its original state."})]}),(0,t.jsxs)(r.ModalFooter,{children:[(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",onClick:o.closeDialog,children:"Cancel"}),(0,t.jsx)(l.SpinnerButton,{pending:d,onClick:p,size:"sm",disabled:d,children:"Undo"})]})]})}},754396,e=>{"use strict";let t=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.89531 13.7603C6.72984 13.8785 6.5 13.7602 6.5 13.5569V10.75C6.5 9.7835 5.7165 9 4.75 9H2.5V2.5H12.1884C12.762 2.5 13.262 2.89037 13.4011 3.44683L14.4011 7.44683C14.5984 8.23576 14.0017 9 13.1884 9H9.25H8.5V9.75V12.4854C8.5 12.5662 8.46101 12.6419 8.39531 12.6889L6.89531 13.7603ZM5 13.5569C5 14.9803 6.6089 15.8082 7.76717 14.9809L9.26717 13.9095C9.72706 13.581 10 13.0506 10 12.4854V10.5H13.1884C14.9775 10.5 16.2903 8.81868 15.8563 7.08303L14.8563 3.08303C14.5503 1.85882 13.4503 1 12.1884 1H1.75H1V1.75V9.75V10.5H1.75H4.75C4.88807 10.5 5 10.6119 5 10.75V13.5569Z" fill="currentColor"/>');e.s(["ThumbDown",0,t])},329046,600796,19922,324042,e=>{"use strict";e.s(["ChatMessageDownvoteDialog",()=>M,"DownvoteButton",()=>L],329046);var t=e.i(509473),n=e.i(743124),r=e.i(176248),i=e.i(216445);e.i(563948);var o=e.i(407562),a=e.i(889661),s=e.i(707974),l=e.i(341003),c=e.i(580643),u=e.i(358847),d=(0,u.createServerReference)("406ccd9cef3e6b21de42cd79f26aa47542097388d1",u.callServer,void 0,u.findSourceMapURL,"sendMessageFeedback");e.s(["sendMessageFeedback",()=>d],600796);var p=e.i(53223),h=e.i(92479),f=e.i(304649),m=e.i(686832),g=t,v=e.i(127558),x=e.i(754396);function y(){return(0,g.jsx)(v.AnimatedIcon,{variants:{hover:{y:2,x:-1,rotate:12}},children:(0,g.jsx)(x.ThumbDown,{"aria-hidden":!0})})}var b=e.i(297239),w=e.i(32170);function j(){let{user:e,expectUser:t}=(0,w.useUser)();if(t&&!e)return{isLoading:!0};let n=!1;return(t||e)&&((null==e?void 0:e.v0plan)!=="v0-enterprise"||e.isVercelian)?{canVote:!0,isLoading:n}:{canVote:!1,isLoading:n}}e.s(["useCanVoteOnMessage",()=>j],19922);var C=e.i(51940),k=e.i(120945);e.i(904347);var S=e.i(37737),N=w,E=n,D=h,I=e.i(767373);function A(e){let{messageId:t}=e,{chatId:n,messages:r,activeForkKey:i}=(0,D.useChatMessages)(),{user:o}=(0,N.useUser)(),{botText:a,userMessageId:s}=(0,E.useMemo)(()=>{let e={botText:void 0,userMessageId:void 0};if(!t||!i)return e;let n=r.findIndex(e=>"id"in e&&e.id===t);return n<0?e:{botText:r[n].content,userMessageId:(0,I.getPreviousMessageIdInForkKey)(i,t)}},[r,t,i]),l=(0,E.useMemo)(()=>(0,I.getLeafMessageIdFromForkKey)(i),[i]);return{chatId:n,messageText:a,promptMessageId:s,messageId:t,userId:null==o?void 0:o.id,leafMessageId:l}}function T(e){let{children:n,value:r,reasons:i}=e;return(0,t.jsx)(l.RadioButton,{className:"max-sm:text-xs",onClick:()=>i.toggle(r),selected:i.has(r),children:n})}function M(e){let{messageId:l,quote:u,voteOptions:g}=e,{activeForkKey:v}=(0,h.useChatMessages)(),{formRef:x,onKeyDown:y}=(0,a.useEnterSubmit)(),{chatId:w,messageText:j,promptMessageId:N,userId:E,leafMessageId:D}=g,[I,A]=(0,n.useState)(""),M=(0,c.useMultiSelect)(),L=(0,b.useT)(),P=(0,n.useCallback)(()=>{A(""),M.clear(),(0,S.closeDialog)()},[M]),R=(0,n.useCallback)(async e=>{if(e.preventDefault(),N&&j&&l&&D)try{o.toast.success(L("downvoteDialog.successToast")),await Promise.all([P(),(0,p.track)("SubmitDownvote",{messageId:l,leafMessageId:D,quote:u,reasons:M.values,freeformFeedback:I}),d({feedback:I,quote:u,reasons:M.values,chatId:w,leafMessageId:D,promptMessageId:N,messageId:l,userId:E,type:"downvote"})])}catch(e){console.error(e),o.toast.error("Failed to send feedback. Please try again later.")}},[N,j,l,D,L,P,u,M.values,I,w,E]),_=(0,n.useMemo)(()=>(0,t.jsxs)("form",{className:(0,f.cn)("flex flex-col","gap-3 sm:gap-6"),onSubmit:R,ref:x,children:[u&&(0,t.jsxs)("div",{className:(0,f.cn)("bg-v0-background-200 flex items-center gap-2 text-ellipsis py-3 text-sm text-v0-gray-1000","-mx-3 px-3 sm:-mx-6 sm:px-6"),children:[(0,t.jsx)("div",{className:"w-1 shrink-0 self-stretch rounded-full bg-v0-gray-300"}),(0,t.jsx)("span",{className:"line-clamp-2",children:u})]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)("div",{className:"grid w-full grid-cols-2 items-center justify-start gap-2",children:[(0,t.jsx)(T,{reasons:M,value:"inaccurate",children:L("downvoteDialog.options.incorrectInformation")}),(0,t.jsx)(T,{reasons:M,value:"off-topic",children:L("downvoteDialog.options.instructionsIgnored")}),(0,t.jsx)(T,{reasons:M,value:"lazy",children:L("downvoteDialog.options.beingLazy")}),(0,t.jsx)(T,{reasons:M,value:"style",children:L("downvoteDialog.options.dontLikeStyle")}),(0,t.jsx)(T,{reasons:M,value:"bad-recommendation",children:L("downvoteDialog.options.badRecommendation")}),(0,t.jsx)(T,{reasons:M,value:"other",children:L("downvoteDialog.options.other")})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)(s.Label,{className:"text-sm font-normal text-v0-gray-900",htmlFor:"downvote-feedback",children:[L("downvoteDialog.howCanWeImprove")," ",(0,t.jsx)("span",{className:"text-v0-gray-500",children:L("downvoteDialog.optional")})]}),(0,t.jsx)(i.Textarea,{asChild:!0,children:(0,t.jsx)(C.ResizableTextArea,{id:"downvote-feedback",name:"feedback",onChange:e=>A(e.target.value),onKeyDown:y,placeholder:"Your feedback...",minHeight:80,maxHeight:192,value:I})})]}),(0,t.jsxs)("div",{className:"flex-col-reverse sm:flex-row flex w-full items-center justify-end gap-2",children:[(0,t.jsx)(r.Button,{className:"w-full",onClick:e=>{e.preventDefault(),P()},size:"sm",variant:"secondary",children:L("downvoteDialog.cancel")}),(0,t.jsx)(r.Button,{className:"w-full",size:"sm",type:"submit",children:L("downvoteDialog.submit")})]})]}),[R,x,u,M,L,y,I,P]);return(0,t.jsx)(k.AtomicDialog,{type:"messageDownvote",children:(0,t.jsxs)("div",{className:"overflow-auto",children:[(0,t.jsxs)(m.ModalHeader,{children:[(0,t.jsx)(m.ModalTitle,{children:L("downvoteDialog.title")}),(0,t.jsx)(m.ModalDescription,{children:L("downvoteDialog.description")(u)})]}),(0,t.jsx)(m.ModalContent,{children:_})]})})}function L(e){let{variant:n,messageId:i,quoteRef:o,tooltip:a,...s}=e,{isLoading:l,canVote:c}=j(),u=A({messageId:i});return l||!c?null:"quote"===n?(0,t.jsx)(r.Button,{"aria-label":"Downvote",className:"text-v0-gray-900 hover:text-v0-gray-1000 rounded-md p-0 text-sm",onClick:()=>{(0,p.track)("OpenDownvote",{quote:null==o?void 0:o.current(),messageId:i}),(0,S.openDialog)({type:"messageDownvote",data:{messageId:i,quote:null==o?void 0:o.current(),voteOptions:u}})},size:"xs",variant:"ghost",children:(0,t.jsx)(y,{"aria-hidden":!0})}):(0,t.jsx)(r.Button,{"aria-label":"Downvote Response",onClick:()=>{(0,p.track)("OpenDownvote",{messageId:i}),(0,S.openDialog)({type:"messageDownvote",data:{messageId:i,voteOptions:u}})},size:"xs",tooltip:a,tooltipDirection:"bottom",variant:"ghost",...s,children:(0,t.jsx)(y,{})})}e.s(["useVoteOptions",()=>A],324042)},892705,390215,e=>{"use strict";var t=e.i(358847),n=(0,t.createServerReference)("7f8208949dcd75f7a34eaa4c1a7d4384df78e5dd49",t.callServer,void 0,t.findSourceMapURL,"saveTemplate");e.s(["saveTemplate",()=>n],892705);var r=e.i(509473),i=e.i(794593),o=e.i(600500),a=e.i(743124);function s(e){let{tags:t,setTags:n}=e,[s,l]=(0,a.useState)(""),c=e=>e.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),u=e=>{let r=c(e);r&&!t.includes(r)&&n([...t,r])},d=e=>{n(t.filter(t=>t!==e))},p=e=>{("Enter"===e.key||","===e.key||"Tab"===e.key)&&(e.preventDefault(),s&&t.length<10&&(u(s),l("")))};return(0,r.jsxs)("div",{className:"bg-v0-background-100 focus-within:border-v0-alpha-500 disabled:border-v0-alpha-400 flex flex-wrap gap-0.5 w-full shrink-0 items-center rounded-md border p-0.5 outline-hidden transition-all disabled:pointer-events-none disabled:bg-v0-gray-100 disabled:text-v0-gray-500 h-auto min-h-8",children:[t.map(e=>(0,r.jsx)(i.Badge,{prefix:(0,r.jsx)("button",{className:"z-10 p-1 cursor-pointer relative",onClick:()=>d(e),children:(0,r.jsx)(o.CrossSmall,{})}),children:e},e)),(0,r.jsx)("input",{className:"text-label-14 bg-transparent outline-hidden file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-v0-gray-500 disabled:cursor-not-allowed disabled:text-v0-gray-500 flex-1 min-w-20 h-6 px-1.5",placeholder:0===t.length?"Add up to 10 tags":"",value:s,onChange:e=>l(e.target.value),onKeyDown:p})]})}e.s(["TagInput",()=>s],390215)},388769,912289,e=>{"use strict";e.s(["TemplateEditButton",()=>V,"TemplateEditDialog",()=>H],388769);var t=e.i(509473),n=e.i(909270),r=e.i(743124),i=e.i(532567),o=e.i(375462),a=e.i(543017),s=e.i(242084),l=e.i(40455),c=e.i(132440),u=e.i(992879),d=e.i(686832),p=e.i(120945),h=e.i(707974),f=e.i(763480),m=e.i(216445),g=e.i(592258),v=e.i(486011),x=e.i(367801),y=e.i(607391),b=e.i(176248),w=e.i(762585),j=e.i(707827);e.i(563948);var C=e.i(407562),k=e.i(484569),S=e.i(667660),N=e.i(892705),E=e.i(37737),D=e.i(390215);e.i(904347);var I=e.i(952214),A=t,T=e.i(358847),M=(0,T.createServerReference)("7f1d9a7215f535d36f1c2ee758ceb2f48b7224e1d0",T.callServer,void 0,T.findSourceMapURL,"getTemplateTagSuggestionsAction"),L=e.i(346970),P=e.i(794593),R=e.i(304649),_=w;let O=e=>{let{templateCanonId:t,onAddTag:n,tags:r}=e,{data:i,isLoading:o}=(0,L.default)("template:".concat(t,":tag-suggestions"),()=>M(t,5)),a=null==i?void 0:i.filter(e=>!r.includes(e));return(0,A.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[(0,A.jsx)("span",{className:"text-xs h-5 opacity-40 inline-flex items-center",children:"Suggestions:"}),o?Array.from({length:4}).map((e,t)=>{let n=["w-12","w-16","w-14","w-20"];return(0,A.jsx)(_.Skeleton,{className:(0,R.cn)("rounded-full h-5",n[t])},"skeleton-".concat(t))}):a&&a.length>0?a.map(e=>(0,A.jsx)(P.Badge,{onClick:()=>n(e),className:"pointer-events-auto cursor-pointer",children:e},e)):(0,A.jsx)("span",{className:"text-xs inline-flex items-center opacity-40 italic",children:"No suggestions available"})]})},F=e=>{var t,n,r,i,o,a,s,l;return{blockId:e.templateVersion.blockId,description:e.templateVersion.description,imageUrl:e.templateVersion.imageUrl,title:e.templateVersion.title||(null==(n=e.templateVersion.block.chat.project)||null==(t=n.project)?void 0:t.name)||(null==(r=e.templateVersion.block.chat.metadata)?void 0:r.title)||"",publishedToCommunity:e.templateVersion.publishedToCommunity,templateCanonId:e.templateVersion.templateCanonId,templateVersionId:e.templateVersion.templateVersionId,uses:e.uses,authorId:e.authorId,isTeamTemplate:e.authorId!==(null==(o=e.templateVersion.block.chat.project)||null==(i=o.project)?void 0:i.ownerId),likeCount:e.likeCount,liked:"liked"in e?e.liked:void 0,ownerId:null!=(l=null==(s=e.templateVersion.block.chat.project)||null==(a=s.project)?void 0:a.ownerId)?l:null,createdAt:e.templateVersion.createdAt,category:e.category,tags:e.tags}};function B(e,t){return(0,r.useMemo)(()=>!(0,l.default)(e,t),[e,t])}function V(e){let n=()=>{(0,E.openDialog)({type:"templateEdit",data:e})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Button,{onClick:n,size:"sm",className:"size-7 rounded-md px-0 sm:hidden",tooltip:"Settings",variant:"secondary",children:(0,t.jsx)(i.SettingsGear,{})}),(0,t.jsx)(b.Button,{onClick:n,size:"sm",className:"hidden sm:block",tooltip:"Settings",variant:"secondary",children:(0,t.jsx)(i.SettingsGear,{})})]})}e.s(["mapTemplateVersionToClientTemplate",0,F],912289);let z=e=>{let{children:n}=e;return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:n})};function H(e){var i,l,A,T,M;let{templateData:L,mode:P="edit"}=e,{activeScope:R}=(0,S.useActiveScope)(),[_,V]=(0,r.useState)(L),{handleAction:H,approveLoading:U,rejectLoading:G}=(0,I.useReviewActions)({onSettled:E.closeDialog}),W=(0,S.scopeIsTeam)(R)?R.name:null,q=(0,r.useMemo)(()=>F(_),[_]),{files:Z,uploading:K,inputFileRef:$,onInputChange:Y}=(0,k.useTemplateFileUpload)({initialImages:_.imageUrl?[{url:_.imageUrl,name:"Template Thumbnail"}]:[],disableDrag:!0}),[J,Q]=(0,r.useState)(q.title||""),[X,ee]=(0,r.useState)(null!=(l=q.category)?l:null),[et,en]=(0,r.useState)(null!=(A=_.visibility)?A:"public"),[er,ei]=(0,r.useState)(q.description||""),[eo,ea]=(0,r.useState)(q.tags||[]);(0,r.useEffect)(()=>{en(_.visibility),Q(q.title||""),ee(q.category),ei(q.description||""),ea(q.tags||[])},[q,_.visibility]);let[es,el]=(0,r.useTransition)(),ec=null!=(M=null!=(T=null==(i=Z.at(0))?void 0:i.url)?T:q.imageUrl)?M:null,eu=B({name:J,category:X,visibility:et,description:er,tags:eo,imageUrl:ec},{name:q.title||"",category:q.category,visibility:_.visibility,description:q.description||"",tags:q.tags||[],imageUrl:q.imageUrl}),ed=()=>{el(async()=>{if(!J.trim())return void C.toast.error("Name is required");if(!X)return void C.toast.error("Category is required");if(!ec)return void C.toast.error("Thumbnail required");if(!_.chatId)return void C.toast.error("Template is not associated with a chat");let e={chatId:_.chatId,title:J.trim(),category:X,tags:eo,description:er||"",imageUrl:ec,visibility:et,existingCanonId:_.templateCanonId};try{let t=await (0,N.saveTemplate)(e);t.template&&V(t.template),C.toast.success("Template saved"),"edit"===P&&(0,E.closeDialog)()}catch(e){C.toast.error((null==e?void 0:e.message)||"Failed to save template")}})},ep=()=>{(0,E.openDialog)({type:"templateDelete",data:{blockId:_.templateVersion.blockId}})},eh=(0,t.jsxs)(r.Fragment,{children:["edit"===P&&(0,t.jsx)(b.Button,{className:"sm:mr-auto",size:"sm",variant:"destructive",onClick:ep,children:"Delete Template"}),(0,t.jsx)(b.Button,{size:"sm",variant:"secondary",onClick:E.closeDialog,children:"Cancel"}),(0,t.jsx)(b.Button,{size:"sm",disabled:K||es,onClick:ed,children:(0,t.jsx)(y.ActionStatus,{isLoading:K||es,loading:K||es,children:"Update Template"})})]},"edit-footer"),ef=eu?eh:(0,t.jsxs)(r.Fragment,{children:[(0,t.jsx)(b.Button,{size:"sm",variant:"secondary",onClick:()=>{H("rejected",[_.templateVersionId])},children:(0,t.jsxs)(y.ActionStatus,{isLoading:G,loading:"Rejecting",children:[(0,t.jsx)(o.Cross,{}),"Reject"]})}),(0,t.jsx)(b.Button,{size:"sm",variant:"default",onClick:()=>{H("approved",[_.templateVersionId])},children:(0,t.jsxs)(y.ActionStatus,{isLoading:U,loading:"Approving",children:[(0,t.jsx)(a.Check,{}),"Approve"]})})]},"review-footer");return(0,t.jsxs)(p.AtomicDialog,{type:"templateEdit",className:"flex flex-col md:max-h-[90vh]",children:[(0,t.jsx)(d.ModalHeader,{children:(0,t.jsxs)(d.ModalTitle,{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{children:"Edit Details"}),"review"===P&&(0,t.jsx)(b.Button,{size:"sm",variant:"secondary",asChild:!0,children:(0,t.jsxs)(n.default,{href:"/community/".concat(_.templateCanonId),target:"_blank",children:[(0,t.jsx)(s.External,{}),"Go to Template"]})})]})}),(0,t.jsxs)(d.ModalContent,{className:"flex flex-col gap-4 overflow-y-auto",children:[(0,t.jsxs)(z,{children:[(0,t.jsx)(h.Label,{children:"Custom Thumbnail (1920x1080)"}),(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsxs)("label",{htmlFor:"thumbnail-upload-".concat(_.templateCanonId),className:"group border-v0-alpha-400 bg-v0-background-200 relative flex aspect-video w-1/2 cursor-pointer items-center justify-center overflow-hidden rounded-md border",children:[ec?(0,t.jsx)(u.default,{src:ec,alt:"Template Thumbnail",fill:!0,className:"object-cover"}):(0,t.jsx)(w.Skeleton,{className:"h-full w-full"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-linear-to-t from-[#00000066] to-transparent opacity-0 transition-opacity group-hover:opacity-100"}),(0,t.jsx)("span",{className:"absolute inset-0 items-center justify-center pointer-events-none z-10 flex gap-2",children:(0,t.jsx)("div",{className:"rounded-md bg-v0-background-100 px-2 py-1 text-label-14 font-medium opacity-0 transition-opacity group-hover:opacity-100 pointer-events-auto",children:K?(0,t.jsx)(j.Spinner,{size:16}):"Change image"})})]}),(0,t.jsx)("input",{id:"thumbnail-upload-".concat(_.templateCanonId),className:"sr-only",accept:"image/*",type:"file",ref:$,onChange:Y,disabled:K})]})]}),(0,t.jsxs)(z,{children:[(0,t.jsx)(h.Label,{children:"Name"}),(0,t.jsx)(f.Input,{placeholder:"Modern Landing Page",value:J,onChange:e=>Q(e.target.value)})]}),(0,t.jsxs)(z,{children:[(0,t.jsx)(h.Label,{children:"Description"}),(0,t.jsx)(m.Textarea,{placeholder:"A modern landing page for a SaaS product",className:"min-h-[100px]",value:er,onChange:e=>ei(e.target.value)})]}),(0,t.jsxs)(z,{children:[(0,t.jsx)(h.Label,{children:"Category"}),(0,t.jsxs)(g.Select,{value:null!=X?X:void 0,onValueChange:ee,children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{placeholder:"Select a category"})}),(0,t.jsx)(g.SelectContent,{children:[...c.templateCategories].map(e=>(0,t.jsx)(g.SelectItem,{value:e.value,children:e.text},e.value))})]})]}),(0,t.jsxs)(z,{children:[(0,t.jsx)(h.Label,{children:"Tags"}),(0,t.jsx)(D.TagInput,{tags:eo,setTags:ea}),"review"===P&&(0,t.jsx)(O,{templateCanonId:_.templateCanonId,tags:eo,onAddTag:e=>{eo.includes(e)||ea([...eo,e])}})]}),"edit"===P&&(0,t.jsxs)(z,{children:[(0,t.jsx)(h.Label,{children:"Visibility"}),(0,t.jsxs)(g.Select,{value:et,onValueChange:e=>en(e),children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{placeholder:"Select visibility"})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"public",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Globe,{className:"w-4 aspect-square"})," ",(0,t.jsx)("span",{children:"Everyone in the Community"})]})}),W&&(0,t.jsx)(g.SelectItem,{value:"team",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Users,{className:"w-4 aspect-square"})," ",(0,t.jsxs)("span",{children:["Everyone in ",W]})]})})]})]})]})]}),(0,t.jsxs)(d.ModalFooter,{className:"border-t bg-alpha-400/10",children:["edit"===P&&eh,"review"===P&&ef]})]})}},886058,e=>{"use strict";e.s(["TemplateDeleteDialog",()=>p],886058);var t=e.i(509473),n=e.i(358847),r=(0,n.createServerReference)("40ea91df191fb04030f3d70b549e9ba28d5bad5143",n.callServer,void 0,n.findSourceMapURL,"deleteTemplateAction");e.i(563948);var i=e.i(407562),o=e.i(743124),a=e.i(307778),s=e.i(120945);e.i(904347);var l=e.i(37737),c=e.i(176248),u=e.i(297239),d=e.i(686832);function p(e){let{blockId:n}=e,p=(0,u.useT)(),[h,f]=(0,o.useTransition)(),m=()=>{f(async()=>{try{let e=await r(n);if(e.error)return void i.toast.error(e.error);i.toast.success("Deleted successfully"),(0,l.closeDialog)()}catch(e){i.toast.error((null==e?void 0:e.message)||"Failed to delete template")}})};return(0,t.jsxs)(s.AtomicDialog,{type:"templateDelete",children:[(0,t.jsxs)(d.ModalHeader,{children:[(0,t.jsx)(d.ModalTitle,{children:p("deleteTemplateDialog.title")}),(0,t.jsx)(d.ModalDescription,{children:p("deleteTemplateDialog.description")})]}),(0,t.jsxs)(d.ModalFooter,{children:[(0,t.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:l.closeDialog,children:p("deleteTemplateDialog.cancel")}),(0,t.jsx)(c.Button,{disabled:h,onClick:m,size:"sm",variant:"destructive",children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.IconSpinner,{className:"size-4"}),p("deleteTemplateDialog.deleting")]}):p("deleteTemplateDialog.delete")})]})]})}},15962,625482,e=>{"use strict";var t=e.i(509473),n=e.i(176248),r=e.i(373998),i=e.i(386688),o=e.i(639056),a=e.i(686832);e.i(472428);var s=e.i(152641);function l(e){var l;let{chatId:c,goTo:u,close:d}=e,{setTemplateAction:p,setTemplateEntryChoice:h}=(0,r.getChatDeploymentActions)(c),f=(0,r.getChatDeploymentAtoms)(c),m=(0,o.useAtomValue)(f.templateEntryChoice),{data:g,isLoading:v}=(0,s.useServerQuerySWR)(["scoped","editableTemplates"],{});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.ModalHeader,{children:[(0,t.jsx)(a.ModalTitle,{children:"Publish as Template"}),(0,t.jsx)(a.ModalDescription,{children:"Create a new template, or update an existing template"})]}),(0,t.jsx)(a.ModalContent,{children:(0,t.jsxs)(i.ChoiceBoxGroup,{value:m,className:"flex flex-col gap-2",onChange:e=>h(e),children:[(0,t.jsx)(i.ChoiceBoxGroup.Item,{value:"create",title:"New Template",description:"Create a brand new template."}),(0,t.jsx)(i.ChoiceBoxGroup.Item,{value:"update",title:"Update an Existing Template",description:"Push updates to an existing template.",disabled:v||(null==g||null==(l=g.templates)?void 0:l.length)===0})]})}),(0,t.jsxs)(a.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,t.jsx)(n.Button,{size:"sm",variant:"secondary",onClick:d,children:"Cancel"}),(0,t.jsx)(n.Button,{size:"sm",disabled:null===m,onClick:()=>{"create"===m?(p("created"),u("submit-as-template")):"update"===m&&(p("updated"),u("template-picker"))},children:"Continue"})]})]})}e.s(["TemplateEntryStage",()=>l],15962);var c=e.i(467105);e.s(["GitBranchIcon",()=>c.default],625482)},66438,e=>{"use strict";let t=(0,e.i(121793).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["default",()=>t])},699410,e=>{"use strict";var t=e.i(66438);e.s(["Sparkles",()=>t.default])},313758,557391,e=>{"use strict";var t=e.i(509473),n=e.i(373998),r=e.i(176248),i=e.i(762585);e.i(472428);var o=e.i(152641),a=e.i(743124),s=e.i(992879),l=e.i(625482),c=e.i(699410),u=e.i(548866),d=e.i(686832);function p(e){let{chatId:i,goTo:s,close:l}=e,{setSelectedTemplate:p}=(0,n.getChatDeploymentActions)(i),{data:m,isLoading:g}=(0,o.useServerQuerySWR)(["scoped","editableTemplates"],{}),v=null==m?void 0:m.templates,[x,y]=(0,a.useState)(null);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.ModalHeader,{children:[(0,t.jsx)(d.ModalTitle,{children:"Select a Template"}),(0,t.jsx)(d.ModalDescription,{children:"Select which template you want to update"})]}),(0,t.jsxs)(d.ModalContent,{className:"gap-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 max-h-[300px] overflow-y-auto p-1",children:g&&(null==v?void 0:v.length)===0?Array.from({length:4}).map((e,n)=>(0,t.jsx)(f,{},n)):null==v?void 0:v.map(e=>{var n;return(0,t.jsx)(h,{imageUrl:null!=(n=e.imageUrl)?n:void 0,title:e.title||e.templateVersion.title||"Untitled",forks:e.uses||0,likes:0,selected:x===e.templateCanonId,onClick:()=>y(e.templateCanonId)},e.templateCanonId)})}),!g&&(!v||0===v.length)&&(0,t.jsx)(u.EmptyState,{title:"No editable templates",icon:(0,t.jsx)(c.Sparkles,{})})]}),(0,t.jsxs)(d.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:()=>s("template-entry"),children:"Back"}),(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",disabled:!x,onClick:()=>{x&&v&&(p(v.find(e=>e.templateCanonId===x)||null),s("submit-as-template"))},children:"Continue"})]})]})}let h=e=>{let{imageUrl:n,title:r,forks:i,likes:o,selected:a=!1,onClick:c}=e;return(0,t.jsxs)("button",{type:"button",onClick:c,className:"flex flex-col w-full",style:{outline:"none"},children:[(0,t.jsx)("div",{className:"relative w-full h-[110px] rounded-md mb-1 overflow-hidden ".concat(a?"ring-2 ring-blue-500":"ring-2 ring-gray-200"),children:n?(0,t.jsx)(s.default,{src:n,alt:r,fill:!0,className:"object-cover",style:{borderRadius:6}}):null}),(0,t.jsx)("span",{className:"text-label-14 font-medium text-left mt-0.5",children:r}),(0,t.jsx)("div",{className:"flex items-center gap-2 text-label-12 text-v0-gray-900 -mt-0.5",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(l.GitBranchIcon,{className:"w-3 aspect-square"}),i," Forks"]})})]})},f=()=>(0,t.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,t.jsx)(i.Skeleton,{className:"h-[110px] w-full rounded-md"}),(0,t.jsx)(i.Skeleton,{className:"h-4 w-3/4"}),(0,t.jsx)(i.Skeleton,{className:"h-3 w-1/2"})]});e.s(["TemplatePickerStage",()=>p],313758);var m=t,g=r,v=e.i(607391),x=n,y=e.i(707974),b=e.i(763480),w=e.i(592258),j=e.i(216445),C=e.i(639056),k=i,S=s,N=e.i(707827),E=e.i(484569),D=a,I=o,A=e.i(132440),T=e.i(892705),M=e.i(358847),L=(0,M.createServerReference)("7f8e2332f80a7d0a701a62792307f277d25645ab82",M.callServer,void 0,M.findSourceMapURL,"createTemplateForChat"),P=M,R=(0,P.createServerReference)("7fcb73d886531240a9151732d32ce9025479713c78",P.callServer,void 0,P.findSourceMapURL,"reassignTemplateChat");e.i(563948);var _=e.i(407562),O=d,F=e.i(824897),B=e.i(150727),V=e.i(667660),z=e.i(342681),H=e.i(390215);function U(e){var t,n,r,i,o,a,s,l,c,u;let{chatId:d,goTo:p,close:h}=e,f=(0,x.getChatDeploymentAtoms)(d),{deployment:M}=(0,C.useAtomValue)(f.externalMeta),{activeScope:P}=(0,V.useActiveScope)(),z=(0,V.scopeIsTeam)(P)?P.name:null,U=(0,C.useAtomValue)(f.selectedTemplate),{data:q,mutate:Z}=(0,I.useServerQuerySWR)(["chat","template"],{chatId:d}),K=(0,C.useAtomValue)(f.templateEntryChoice),$=null!=(n=null!=U?U:q)?n:null,{files:Y,uploading:J,inputFileRef:Q,onInputChange:X}=(0,E.useTemplateFileUpload)({initialImages:(null==$?void 0:$.imageUrl)?[{url:$.imageUrl,name:"Template Thumbnail"}]:(null==M?void 0:M.screenshotUrl)?[{url:M.screenshotUrl,name:"Deployment Screenshot"}]:[],disableDrag:!0}),[ee,et]=(0,D.useState)(null!=(r=null==$?void 0:$.title)?r:""),[en,er]=(0,D.useState)(null!=(i=null==$?void 0:$.category)?i:null),[ei,eo]=(0,D.useState)(null!=(o=null==$?void 0:$.visibility)?o:"public"),[ea,es]=(0,D.useState)(null!=(a=null==$?void 0:$.description)?a:""),[el,ec]=(0,D.useState)(null!=(s=null==$?void 0:$.tags)?s:[]),[eu,ed]=(0,D.useState)(!1),ep=null!=(u=null!=(c=null!=(l=null==(t=Y.at(0))?void 0:t.url)?l:null==$?void 0:$.imageUrl)?c:null==M?void 0:M.screenshotUrl)?u:null,eh=async()=>{if(ed(!0),!ee.trim()){_.toast.error("Name is required"),ed(!1);return}if(!en){_.toast.error("Category is required"),ed(!1);return}if(!ep){_.toast.error("Thumbnail required"),ed(!1);return}let e={chatId:d,title:ee.trim(),category:en,tags:el,description:ea||"",imageUrl:ep,visibility:ei,existingCanonId:null==$?void 0:$.templateCanonId},t=W(e);try{if("create"===K){let{existingCanonId:n,...r}=e;await Z({serverMutate:L(r),optimisticData:t})}else if($&&$.chatId===d)await Z({serverMutate:(0,T.saveTemplate)(e),optimisticData:t});else{if(!$)return void _.toast.error("An error occurred while saving the template.");await R({templateCanonId:$.templateCanonId,newChatId:d}),await Z({serverMutate:(0,T.saveTemplate)(e),optimisticData:t})}_.toast.success("Template saved"),p("template-submission-success")}catch(e){_.toast.error((null==e?void 0:e.message)||"Failed to save template")}finally{ed(!1)}};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(O.ModalHeader,{children:[(0,m.jsxs)(O.ModalTitle,{children:[$?(0,m.jsx)("span",{children:"Update"}):(0,m.jsx)("span",{children:"Submit"})," ",(0,m.jsx)("span",{children:"a Template"})]}),(0,m.jsx)(O.ModalDescription,{children:$?"Update the details of this template":"Submit this chat as a new template"})]}),(0,m.jsxs)(O.ModalContent,{className:"flex flex-col gap-4",children:[(0,m.jsxs)(G,{children:[(0,m.jsx)(y.Label,{children:"Custom Thumbnail (1920x1080)"}),(0,m.jsxs)("div",{className:"relative w-full",children:[(0,m.jsxs)("label",{htmlFor:"thumbnail-upload-".concat(d),className:"group border-v0-alpha-400 bg-v0-background-200 relative flex aspect-video w-1/2 cursor-pointer items-center justify-center overflow-hidden rounded-md border",children:[ep?(0,m.jsx)(S.default,{src:ep,alt:"Template Thumbnail",fill:!0,className:"object-cover"}):(0,m.jsx)(k.Skeleton,{className:"h-full w-full"}),(0,m.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-linear-to-t from-[#00000066] to-transparent opacity-0 transition-opacity group-hover:opacity-100"}),(0,m.jsx)("span",{className:"absolute inset-0 items-center justify-center pointer-events-none z-10 flex gap-2",children:(0,m.jsx)("div",{className:"rounded-md bg-v0-background-100 px-2 py-1 text-label-14 font-medium opacity-0 transition-opacity group-hover:opacity-100 pointer-events-auto",children:J?(0,m.jsx)(N.Spinner,{size:16}):"Change image"})})]}),(0,m.jsx)("input",{id:"thumbnail-upload-".concat(d),className:"sr-only",accept:"image/*",type:"file",ref:Q,onChange:X,disabled:J})]})]}),(0,m.jsxs)(G,{children:[(0,m.jsx)(y.Label,{children:"Name"}),(0,m.jsx)(b.Input,{placeholder:"Modern Landing Page",value:ee,onChange:e=>et(e.target.value)})]}),(0,m.jsxs)(G,{children:[(0,m.jsx)(y.Label,{children:"Description"}),(0,m.jsx)(j.Textarea,{placeholder:"A modern landing page for a SaaS product",className:"min-h-[100px]",value:ea,onChange:e=>es(e.target.value)})]}),(0,m.jsxs)(G,{children:[(0,m.jsx)(y.Label,{children:"Category"}),(0,m.jsxs)(w.Select,{value:null!=en?en:void 0,onValueChange:er,children:[(0,m.jsx)(w.SelectTrigger,{children:(0,m.jsx)(w.SelectValue,{placeholder:"Select a category"})}),(0,m.jsx)(w.SelectContent,{children:[...A.templateCategories].map(e=>(0,m.jsx)(w.SelectItem,{value:e.value,children:e.text},e.value))})]})]}),(0,m.jsxs)(G,{children:[(0,m.jsx)(y.Label,{children:"Tags"}),(0,m.jsx)(H.TagInput,{tags:el,setTags:ec})]}),(0,m.jsxs)(G,{children:[(0,m.jsx)(y.Label,{children:"Visibility"}),(0,m.jsxs)(w.Select,{value:ei,onValueChange:e=>eo(e),children:[(0,m.jsx)(w.SelectTrigger,{children:(0,m.jsx)(w.SelectValue,{placeholder:"Select visibility"})}),(0,m.jsxs)(w.SelectContent,{children:[(0,m.jsx)(w.SelectItem,{value:"public",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)(F.Globe,{className:"w-4 aspect-square"})," ",(0,m.jsx)("span",{children:"Everyone in the Community"})]})}),z&&(0,m.jsx)(w.SelectItem,{value:"team",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)(B.Users,{className:"w-4 aspect-square"})," ",(0,m.jsxs)("span",{children:["Everyone in ",z]})]})})]})]})]})]}),(0,m.jsxs)(O.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,m.jsx)(g.Button,{size:"sm",variant:"secondary",onClick:h,children:"Cancel"}),(0,m.jsx)(g.Button,{size:"sm",disabled:J||eu,onClick:eh,children:(0,m.jsx)(v.ActionStatus,{isLoading:J||eu,loading:J||eu,children:$?"Update Template":"Submit Template"})})]})]})}let G=e=>{let{children:t}=e;return(0,m.jsx)("div",{className:"flex flex-col gap-2",children:t})},W=e=>{var t;return{...e,createdAt:new Date,updatedAt:new Date,deletedAt:null,templateCanonId:(0,z.generateTemplateId)(),templateVersionId:(0,z.generateTemplateId)(),authorId:"optimisticData",uses:0,trendingScore:0,trendingScoreOffset:0,order:0,projectId:"optimisticData",teamId:"optimisticData",visibility:null!=(t=e.visibility)?t:"public",keywords:null,templateVersion:{block:{latestDeploymentInfo:{deploymentId:"optimisticData"}}}}};e.s(["SubmitAsTemplateStage",()=>U],557391)},741888,e=>{"use strict";var t=e.i(509473),n=e.i(743124),r=e.i(120945),i=e.i(37737),o=e.i(15962),a=e.i(313758),s=e.i(557391),l=t,c=e.i(176248),u=e.i(373998),d=e.i(639056),p=e.i(686832),h=e.i(992879);e.i(472428);var f=e.i(152641),m=e.i(230766),g=e.i(69302),v=e.i(455690);function x(e){let{imageSrc:t,onClick:n,label:r="View Template Details"}=e;return(0,l.jsxs)("button",{type:"button",onClick:n,className:"group border-v0-alpha-400 bg-v0-background-200 relative flex aspect-video w-full cursor-pointer items-center justify-center overflow-hidden rounded-md border",children:[(0,l.jsx)(h.default,{src:t,alt:"Template Thumbnail",fill:!0,className:"object-cover"}),(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-linear-to-t from-[#00000066] to-transparent opacity-0 transition-opacity group-hover:opacity-100"}),(0,l.jsx)("span",{className:"absolute inset-0 items-center justify-center pointer-events-none z-10 flex gap-2",children:(0,l.jsx)("div",{className:"rounded-md bg-v0-background-100 px-2 py-1 text-label-14 font-medium opacity-0 transition-opacity group-hover:opacity-100",children:r})})]})}function y(e){let{title:t,forks:n=0,avatarUserId:r,deployment:i}=e;return(0,l.jsxs)("div",{className:"w-full flex flex-row justify-start items-center gap-x-3",children:[(0,l.jsx)("div",{className:"w-8 h-8 rounded-full bg-v0-background-200",children:r&&i&&!(0,v.isGithubCommitByV0Bot)(i)?(0,l.jsx)(m.AvatarUser,{userId:r,rounded:!0,size:"md"}):null}),(0,l.jsxs)("div",{className:"flex flex-col justify-center items-start text-label-14",children:[(0,l.jsx)("span",{className:"font-medium",children:null!=t?t:"Untitled"}),(0,l.jsxs)("div",{className:"flex flex-row justify-start items-center gap-x-1.5",children:[(0,l.jsx)(g.GitBranch,{className:"w-4 aspect-square text-v0-gray-900"}),(0,l.jsxs)("div",{children:[n," forks"]})]})]})]})}function b(e){var t,n,r,i;let{chatId:o,goTo:a,close:s}=e,h=(0,u.getChatDeploymentAtoms)(o),m=(0,d.useAtomValue)(h.templateAction),{deployment:g}=(0,d.useAtomValue)(h.externalMeta),{data:v}=(0,f.useServerQuerySWR)(["chat","template"],{chatId:o}),b="updated"===m?"Template updated!":"Template submitted!",w="updated"===m?"Your template changes have been saved.":(null==v?void 0:v.visibility)==="public"?"Your template has been queued for review and will appear in the community shortly.":"Your template is now available for use by your team.";return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(p.ModalHeader,{children:[(0,l.jsx)(p.ModalTitle,{children:b}),(0,l.jsx)(p.ModalDescription,{children:w})]}),(0,l.jsx)(p.ModalContent,{children:(0,l.jsxs)("div",{className:"flex flex-col justify-start items-start gap-y-4",children:[(0,l.jsx)(x,{imageSrc:null!=(r=null!=(n=null==v?void 0:v.imageUrl)?n:null==g?void 0:g.screenshotUrl)?r:"",onClick:()=>a("submit-as-template")}),(0,l.jsx)(y,{title:null==v?void 0:v.title,forks:null==v?void 0:v.uses,avatarUserId:null!=(i=null==g||null==(t=g.creator)?void 0:t.uid)?i:null,deployment:g})]})}),(0,l.jsxs)(p.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,l.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:s,children:"Dismiss"}),(0,l.jsx)(c.Button,{size:"sm",onClick:()=>{window.open("/community/".concat(null==v?void 0:v.templateCanonId),"_blank")},children:"View Template"})]})]})}var w=u,j=t,C=c,k=u,S=d,N=p,E=f,D=e.i(358847),I=(0,D.createServerReference)("7f99c59638fbe399079f952bd5f796dad17846561b",D.callServer,void 0,D.findSourceMapURL,"publishTemplate");e.i(563948);var A=e.i(407562),T=n,M=e.i(607391);function L(e){var t,n,r,i,o;let{chatId:a,goTo:s,close:l}=e,c=(0,k.getChatDeploymentAtoms)(a),{deployment:u}=(0,S.useAtomValue)(c.externalMeta),{data:d,mutate:p}=(0,E.useServerQuerySWR)(["chat","template"],{chatId:a}),h=null==d||null==(t=d.templateVersion.block.latestDeploymentInfo)?void 0:t.deploymentId,f=!!(null==u?void 0:u.id)&&(null==u?void 0:u.id)!==h,[m,g]=(0,T.useState)(!1);if(!d)return null;let v=async()=>{g(!0);try{await I({templateCanonId:d.templateCanonId,chatId:a}),await p({serverMutate:Promise.resolve(!0),optimisticData:null}),A.toast.success("Changes published"),s("template-submission-success")}catch(e){A.toast.error((null==e?void 0:e.message)||"Failed to publish changes")}finally{g(!1)}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(N.ModalHeader,{children:[(0,j.jsx)(N.ModalTitle,{children:"Publish Changes to This Template"}),(0,j.jsxs)(N.ModalDescription,{children:["Publish your changes to ",d.title,". Once published, your template will be updated with the new changes from this chat."]})]}),(0,j.jsx)(N.ModalContent,{children:(0,j.jsxs)("div",{className:"flex flex-col justify-start items-start gap-y-4",children:[(0,j.jsx)(x,{imageSrc:null!=(i=null!=(r=d.imageUrl)?r:null==u?void 0:u.screenshotUrl)?i:"",onClick:()=>s("submit-as-template")}),(0,j.jsx)(y,{title:d.title,forks:d.uses,avatarUserId:null!=(o=null==u||null==(n=u.creator)?void 0:n.uid)?o:null,deployment:u})]})}),(0,j.jsxs)(N.ModalFooter,{className:"border-t bg-alpha-400/10",children:[(0,j.jsx)(C.Button,{size:"sm",variant:"secondary",onClick:l,children:"Cancel"}),(0,j.jsx)(C.Button,{size:"sm",disabled:m||!f,onClick:v,children:(0,j.jsx)(M.ActionStatus,{isLoading:m,loading:m,children:f?"Publish Changes":"No Changes to Publish"})})]})]})}function P(e){let{chatId:l,initialStage:c="template-entry"}=e,[u,d]=(0,n.useState)(c),{setSelectedTemplate:p}=(0,w.getChatDeploymentActions)(l),h=(0,n.useCallback)(e=>{d(e)},[]),f=(0,n.useCallback)(()=>{p(null),(0,i.closeDialog)()},[p]),m=()=>{let e={chatId:l,goTo:h,close:f};switch(u){case"template-entry":return(0,t.jsx)(o.TemplateEntryStage,{...e});case"template-picker":return(0,t.jsx)(a.TemplatePickerStage,{...e});case"submit-as-template":return(0,t.jsx)(s.SubmitAsTemplateStage,{...e});case"publish-template-changes":return(0,t.jsx)(L,{...e});case"template-submission-success":return(0,t.jsx)(b,{...e});default:return null}};return(0,t.jsx)(r.AtomicDialog,{type:"templateWizard",children:m()})}e.s(["TemplateWizardDialog",()=>P],741888)},808211,e=>{"use strict";let t=(0,e.i(121793).default)("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["default",()=>t])},854920,e=>{"use strict";var t=e.i(808211);e.s(["Frown",()=>t.default])},440942,e=>{"use strict";let t=(0,e.i(121793).default)("Meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["default",()=>t])},790560,e=>{"use strict";var t=e.i(440942);e.s(["Meh",()=>t.default])},887595,e=>{"use strict";let t=(0,e.i(121793).default)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["default",()=>t])},419846,306449,e=>{"use strict";var t=e.i(887595);e.s(["Smile",()=>t.default],419846);var n=e.i(358847),r=(0,n.createServerReference)("406b2affa5e52b2c92ce93a25bdebb1275019ff2ce",n.callServer,void 0,n.findSourceMapURL,"sendGeneralFeedback");e.s(["sendGeneralFeedback",()=>r],306449)},688371,320502,e=>{"use strict";e.s(["FeedbackDialog",()=>C],688371);var t=e.i(509473),n=e.i(304649),r=e.i(854920),i=e.i(790560),o=e.i(419846),a=e.i(216445),s=e.i(7684),l=e.i(743124);e.i(563948);var c=e.i(407562),u=e.i(306449),d=e.i(32170),p=e.i(176248),h=e.i(686832),f=e.i(297239);e.i(22061);var m=e.i(51940),g=e.i(120945),v=e.i(490293),x=e.i(639056);e.i(904347);var y=e.i(37737);let b=(0,v.atom)(""),w=(0,v.atom)(void 0),j=(0,v.atom)(void 0);function C(e){let{feedback:n,sentiment:r}=e,i=(0,f.useT)(),[o,a]=(0,x.useAtom)(b),[s,c]=(0,x.useAtom)(w),[u,d]=(0,x.useAtom)(j);return(0,l.useEffect)(()=>{n&&a(n),r&&c(r)},[]),(0,t.jsxs)(g.AtomicDialog,{type:"feedback",children:[(0,t.jsxs)(h.ModalHeader,{children:[(0,t.jsx)(h.ModalTitle,{children:i("feedbackDialog.title")}),(0,t.jsx)(h.ModalDescription,{children:i("feedbackDialog.description")})]}),(0,t.jsx)(h.ModalContent,{children:(0,t.jsx)(S,{feedback:o,selectedOption:s,setFeedback:a,closeDialog:y.closeDialog,setSelectedOption:c,setValidationError:d,validationError:u})})]})}function k(e){let{children:r,selectedOption:i,option:o,handleOptionClick:a}=e;return(0,t.jsx)(p.Button,{className:(0,n.cn)("transition-all duration-300",i===o&&"border-v0-gray-1000 hover:border-v0-gray-1000 focus:border-v0-gray-1000 focus-visible:border-v0-gray-1000"),onClick:()=>a(o),size:"sm",type:"button",variant:"secondary",children:r})}function S(e){let{feedback:g,setFeedback:v,selectedOption:x,setSelectedOption:y,validationError:b,setValidationError:w,closeDialog:j}=e,C=(0,f.useT)(),{user:S}=(0,d.useUser)(),N=e=>{e&&y(e),w(void 0)},E=e=>(e.preventDefault(),""===g.trim())?void w(C("feedbackDialog.error.enterFeedback")):x?void((0,u.sendGeneralFeedback)({feedback:g,url:location.href,sentiment:x,user:S}),j(),v(""),y("neutral"),w(void 0),c.toast.success(C("feedbackDialog.successToast"))):void w(C("feedbackDialog.error.selectEmoji")),{formRef:D,onKeyDown:I}=(0,s.useCmdEnterSubmit)(),A=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(A.current){console.log("focusing"),A.current.focus();let e=A.current.value.length;A.current.setSelectionRange(e,e)}},[]),(0,t.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:E,ref:D,children:[(0,t.jsx)(a.Textarea,{asChild:!0,children:(0,t.jsx)(m.ResizableTextArea,{ref:A,maxHeight:224,minHeight:80,name:"feedback",onKeyDown:I,placeholder:C("feedbackDialog.yourFeedback"),spellCheck:!1,onChange:e=>v(e.target.value),value:g})}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex w-full items-center justify-start gap-2",children:[(0,t.jsx)(k,{handleOptionClick:N,option:"bad",selectedOption:x,children:(0,t.jsx)(r.Frown,{className:(0,n.cn)("size-4",{"dark:fill-red-400/80 fill-red-200":"bad"===x})})}),(0,t.jsx)(k,{handleOptionClick:N,option:"neutral",selectedOption:x,children:(0,t.jsx)(i.Meh,{className:(0,n.cn)("size-4",{"dark:fill-amber-500/70 fill-yellow-200":"neutral"===x})})}),(0,t.jsx)(k,{handleOptionClick:N,option:"good",selectedOption:x,children:(0,t.jsx)(o.Smile,{className:(0,n.cn)("size-4",{"dark:fill-green-500/60 fill-green-200":"good"===x})})}),(0,t.jsx)("div",{children:b&&(0,t.jsx)("div",{className:"text-sm text-v0-red-800",role:"alert",children:b})})]}),(0,t.jsxs)(h.ModalFooter,{className:"p-0 md:p-0",children:[(0,t.jsx)(h.ModalClose,{asChild:!0,children:(0,t.jsx)(p.Button,{size:"sm",type:"button",variant:"secondary",onClick:j,children:C("feedbackDialog.cancel")})}),(0,t.jsx)(p.Button,{size:"sm",type:"submit",children:C("feedbackDialog.submit")})]})]})]})}var N=l,E=e.i(346970);function D(){var e;let{data:t,error:n,isLoading:r,mutate:i}=(0,E.default)("github:active-namespaces",async()=>{try{let e=new URLSearchParams({provider:"github"}),t=await fetch("/chat/api/git/search-namespaces?".concat(e.toString()));if(!t.ok)throw Error("Failed to search orgs");return await t.json()}catch(e){return[]}},{revalidateOnFocus:!0,revalidateOnMount:!0}),o=(0,N.useCallback)(()=>i(),[i]);return{userNamespace:null==t?void 0:t.userNamespace,orgNamespaces:(null==t?void 0:t.orgNamespaces)||[],revalidate:o,verifiedGitHubUser:(null==t||null==(e=t.user)?void 0:e.verified)?t.user:void 0,isLoading:r,error:n}}e.s(["useActiveGitNamespaces",()=>D],320502)},926923,e=>{"use strict";e.s(["ConnectRepoDialog",()=>S]);var t=e.i(509473),n=e.i(743124);e.i(563948);var r=e.i(407562),i=e.i(320502),o=e.i(66920),a=e.i(209819),s=e.i(12052),l=e.i(183673),c=e.i(176248),u=e.i(758057),d=e.i(120945);e.i(904347);var p=e.i(37737),h=e.i(686832),f=e.i(675120),m=e.i(762585),g=e.i(763480),v=e.i(707974),x=e.i(607391),y=e.i(674725);e.i(144019),e.i(707827),e.i(472428);var b=e.i(152641),w=e.i(449381),j=e.i(297239),C=e.i(667660),k=e.i(538553);function S(e){let{chatId:r,latestBlockId:i}=e,{hasVercelWritePermission:a}=(0,C.useActiveScope)(),{stage:s,isSigningIn:l,isInstallingApp:u,openSignIn:y,openInstallApp:b,error:w,isCreatingRepo:S,handleCreateRepo:D,repoName:I,setRepoName:A,userNamespace:T}=E(r,i),M=(0,j.useT)(),L=(0,n.useMemo)(()=>{switch(s){case"loading":return{title:(0,t.jsx)(m.Skeleton,{className:"h-[26px] w-[180px]"}),description:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(m.Skeleton,{className:"h-[14px] w-full"}),(0,t.jsx)(m.Skeleton,{className:"h-[14px] w-[75%]"})]}),actions:(0,t.jsx)(N,{children:(0,t.jsx)(m.Skeleton,{className:"h-7 w-24"})})};case"login":return{title:"Sign in with GitHub",description:"To connect this project to a GitHub repository, you need to sign in with your GitHub account",actions:(0,t.jsxs)(N,{children:[(0,t.jsx)(c.Button,{size:"sm",onClick:p.closeDialog,disabled:l,variant:"outline",children:"Cancel"}),(0,t.jsx)(c.Button,{size:"sm",onClick:y,disabled:l,children:(0,t.jsx)(x.ActionStatus,{isLoading:l,loading:"Signing in",children:"Sign in"})})]})};case"install-app":return{title:"Install GitHub App",description:"Install Vercel GitHub App on your personal GitHub account to create a repository.",actions:(0,t.jsxs)(N,{children:[(0,t.jsx)(c.Button,{size:"sm",onClick:p.closeDialog,disabled:u,variant:"outline",children:"Cancel"}),(0,t.jsx)(c.Button,{size:"sm",onClick:b,disabled:u,children:(0,t.jsx)(x.ActionStatus,{isLoading:u,loading:"Installing App",children:"Install Vercel App"})})]})};case"create-repo":return{title:"Connect to GitHub Repository",description:(0,t.jsxs)("span",{children:["Create a new repository on GitHub to push changes to. When you deploy, v0 will commit changes to the"," ",(0,t.jsx)("code",{className:"text-label-13-mono border-v0-alpha-400 rounded-sm border bg-v0-gray-100 px-1.5 py-0.5",children:"main"})," ","branch."]}),content:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(v.Label,{htmlFor:"repo-name",children:"Repository Name"}),(0,t.jsx)(k.RbacTooltip,{show:!a,requiredRole:"V0Builder",children:(0,t.jsx)(g.Input,{id:"repo-name",placeholder:"Repository Name",value:I,onChange:e=>A(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),D())},disabled:!a})})]}),actions:(0,t.jsxs)(N,{children:[(0,t.jsx)(c.Button,{size:"sm",onClick:p.closeDialog,variant:"outline",disabled:S,children:"Cancel"}),(0,t.jsx)(k.RbacTooltip,{show:!a,requiredRole:"V0Builder",children:(0,t.jsx)(c.Button,{size:"sm",onClick:D,disabled:S||!a||!I||!T,className:"overflow-hidden",children:(0,t.jsx)(x.ActionStatus,{isLoading:S,loading:"Creating Repository",children:M("gitSync.createRepo.createRepositoryButton")})})})]})}}},[s,y,l,b,u,I,S,D,A,a]);return(0,t.jsxs)(d.AtomicDialog,{type:"connectRepo",forceOpen:l||u||S,children:[(0,t.jsxs)(h.ModalHeader,{children:[(0,t.jsx)("div",{className:"border-v0-gray-300 material-medium mb-2 flex w-min items-center justify-center justify-self-center rounded-lg border p-2 md:justify-self-start",children:(0,t.jsx)(o.GitHubLogoIcon,{className:"h-6 w-6"})}),(0,t.jsx)(f.TransitionNode,{...f.PRESETS.modalSection,renderKey:s,children:(0,t.jsx)(h.ModalTitle,{children:L.title})}),(0,t.jsx)(f.TransitionNode,{...f.PRESETS.modalSection,renderKey:s,children:(0,t.jsx)(h.ModalDescription,{children:L.description})})]}),(0,t.jsx)(h.ModalContent,{children:(0,t.jsx)(f.TransitionNode,{...f.PRESETS.modalSection,renderKey:"".concat(s,"-").concat(w),children:(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[L.content,w?(0,t.jsx)("div",{className:"rounded-md border border-v0-red-300 bg-v0-red-200 px-4 py-3 text-sm text-v0-red-800",children:w}):null]})})}),(0,t.jsx)(h.ModalFooter,{children:(0,t.jsx)(f.TransitionNode,{...f.PRESETS.modalSection,renderKey:s,children:L.actions})})]})}function N(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex w-full justify-end gap-2",children:n})}function E(e,c){var d;let{project:h,title:f}=(0,a.useChatMetadata)(e),{revalidate:m}=(0,b.useServerQuerySWR)(["chat","externalMeta"],{chatId:e},{stopFetch:!e}),g=(0,w.useActiveBlockState)(e),{projectId:v=null==h?void 0:h.projectId}=(0,l.useProjectId)(),{projectName:x=null==h?void 0:h.name}=(0,l.useProjectName)(),{refetchVercelProject:C,vercelProjectWithDashboard:k}=(0,l.useVercelProject)({v0ProjectId:v}),S=null==k||null==(d=k.dashboardProject)?void 0:d.link,{userNamespace:N,verifiedGitHubUser:E,isLoading:D,revalidate:I}=(0,i.useActiveGitNamespaces)(),A=(0,j.useT)(),[T,M]=(0,n.useState)("loading"),[L,P]=(0,n.useState)(!1),[R,_]=(0,n.useState)(!1),[O,F]=(0,n.useState)(!1),B=(0,n.useRef)(!1),[V,z]=(0,n.useState)(null),[H,U]=(0,n.useState)((0,s.generateRepoName)(x||f)),G=(0,n.useMemo)(()=>(null==S?void 0:S.org)&&S.repo?"https://github.com/".concat(S.org,"/").concat(S.repo):void 0,[null==S?void 0:S.org,null==S?void 0:S.repo]);(0,n.useEffect)(()=>{if(S){(0,p.closeDialog)(),B.current||(r.toast.default("GitHub Connected",{description:"Click to view your repository",icon:(0,t.jsx)(o.GitHubLogoIcon,{className:"h-6 w-6"}),action:G?{children:"View",onClick:()=>{window.open(G,"_blank")}}:void 0}),B.current=!0);return}if(!D){if(!E)return void M("login");if(!N)return void M("install-app");M("create-repo"),U((0,s.generateRepoName)(x||f))}},[S,D,G,x,f,N,E]);let W=(0,n.useCallback)(async()=>{try{if(P(!0),!v)return void r.toast.error("Chat needs to be in a project");if(!((null==N?void 0:N.name)&&N.ownerType))return void r.toast.error(A("gitSync.createRepo.repoOwnerNotSpecified"));let t=null==g?void 0:g.id,n=await fetch("/chat/api/git/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({owner:N.name,repoName:H,projectId:v,blockId:t||c,chatId:e,from:"dialog"})});if(!n.ok){let e=await n.json(),t="Failed to create repository.";throw"repo_alr_exists"===e.error&&(t="Repository already exists. Try a new name."),Error(t)}await Promise.all([C(),m()])}catch(t){let e=t instanceof Error?t.message:"Failed to create repository";z(e),r.toast.error(e)}finally{P(!1)}},[v,null==N?void 0:N.name,null==N?void 0:N.ownerType,null==g?void 0:g.id,H,c,e,C,m,A]),q="/chat/git/connected",Z=window.location.origin+"/chat/git/callback",K="https://vercel.com/api/registration/login-with-github?next=".concat(encodeURIComponent(Z)),$={next:"".concat(window.location.origin,"/github/installed")},Y=(0,y.encodeBase64URL)(JSON.stringify($)),J=E?"https://github.com/apps/vercel/installations/select_target?state=".concat(encodeURIComponent(Y)):"",Q=(0,n.useCallback)(async e=>{await I(),e()},[I]),{open:X}=(0,u.usePopupWindow)({url:K,onPoll:e=>{e.location.pathname===q&&Q(()=>{e.close(),_(!1)})},onClose:()=>{Q(()=>{_(!1)})}}),{open:ee}=(0,u.usePopupWindow)({url:J,onPoll:e=>{console.log("popupWindow",e.location.pathname,q),e.location.pathname===q&&Q(()=>{e.close(),F(!1)})},onClose:()=>{Q(()=>{F(!1)})}});return{stage:T,setStage:M,error:V,repoName:H,setRepoName:U,isCreatingRepo:L,isSigningIn:R,isInstallingApp:O,handleCreateRepo:W,openSignIn:function(){_(!0),X()},openInstallApp:function(){F(!0),ee()},userNamespace:N}}},334627,938810,e=>{"use strict";let t=(0,e.i(121793).default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["default",()=>t],938810),e.s(["InfoIcon",()=>t],334627)},199929,e=>{"use strict";var t=e.i(509473),n=e.i(304649);function r(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex items-center gap-4 sm:gap-4",r),...i})}function i(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex-1 flex flex-col gap-0.5",r),...i})}function o(e){let{className:r,...i}=e;return(0,t.jsx)("label",{className:(0,n.cn)("text-label-14 font-medium",r),...i})}function a(e){let{className:r,...i}=e;return(0,t.jsx)("p",{className:(0,n.cn)("!text-v0-gray-900 text-label-14",r),...i})}function s(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex gap-2 justify-end items-center",r),...i})}e.s(["SettingsItem",()=>r,"SettingsItemAction",()=>s,"SettingsItemContent",()=>i,"SettingsItemDescription",()=>a,"SettingsItemTitle",()=>o])},722198,337034,593640,e=>{"use strict";e.s(["CreditBalance",()=>J,"CurrencyInput",()=>X],722198);var t=e.i(509473),n=e.i(743124),r=e.i(46601),i=e.i(996174),o=e.i(979865),a=n,s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function l(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function c(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var u=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},d={k:1e3,m:1e6,b:1e9},p=function(e,t){void 0===t&&(t=".");var n=RegExp("(\\d+(".concat(u(t),"\\d*)?)([kmb])$"),"i"),r=e.match(n);if(r){var i=r[1],o=d[r[3].toLowerCase()];return Number(i.replace(t,"."))*o}},h=function(e,t){void 0===t&&(t=",");var n=RegExp(u(t),"g");return e.replace(n,"")},f=function(e,t){var n=u(t.join("")),r=RegExp("[^\\d".concat(n,"]"),"gi");return e.replace(r,"")},m=function(e){var t=e.value,n=e.groupSeparator,r=void 0===n?",":n,i=e.decimalSeparator,o=void 0===i?".":i,a=e.allowDecimals,s=void 0===a||a,l=e.decimalsLimit,d=void 0===l?2:l,m=e.allowNegativeValue,g=void 0===m||m,v=e.disableAbbreviations,x=void 0!==v&&v,y=e.prefix,b=void 0===y?"":y,w=e.transformRawValue,j=(void 0===w?function(e){return e}:w)(t);if("-"===j)return j;var C=x?[]:["k","m","b"],k=new RegExp("((^|\\D)-\\d)|(-".concat(u(b),")")).test(j),S=RegExp("(\\d+)-?".concat(u(b))).exec(t)||[],N=S[0],E=S[1],D=f(h(b?N?j.replace(N,"").concat(E):j.replace(b,""):j,r),c([r,o],C,!0)),I=D;if(!x){if(C.some(function(e){return e===D.toLowerCase().replace(o,"")}))return"";var A=p(D,o);A&&(I=String(A))}var T=k&&g?"-":"";if(o&&I.includes(o)){var M=D.split(o),L=M[0],P=M[1],R=d&&P?P.slice(0,d):P,_=s?"".concat(o).concat(R):"";return"".concat(T).concat(L).concat(_)}return"".concat(T).concat(I)},g=function(e,t,n){if(void 0!==n&&e.length>1){if(0===n)return e.replace(t,"");if(e.includes(t)){var r=e.split(t),i=r[0],o=r[1];if(o.length===n)return e;if(o.length>n)return"".concat(i).concat(t).concat(o.slice(0,n))}var a=e.length>n?new RegExp("(\\d+)(\\d{".concat(n,"})")):RegExp("(\\d)(\\d+)"),s=e.match(a);if(s){var i=s[1],o=s[2];return"".concat(i).concat(t).concat(o)}}return e},v=function(e,t){var n=t.groupSeparator,r=void 0===n?",":n,i=t.decimalSeparator,o=void 0===i?".":i,a=new RegExp("\\d([^".concat(u(r)).concat(u(o),"0-9]+)")),s=e.match(a);return s?s[1]:void 0},x=function(e){var t=e.value,n=e.decimalSeparator,r=e.intlConfig,i=e.decimalScale,o=e.prefix,a=void 0===o?"":o,c=e.suffix,d=void 0===c?"":c;if(""===t||void 0===t)return"";if("-"===t)return"-";var p=new RegExp("^\\d?-".concat(a?"".concat(u(a),"?"):"","\\d")).test(t),h="."!==n?y(t,n,p):t;n&&"-"!==n&&h.startsWith(n)&&(h="0"+h);var f=r||{},m=f.locale,g=f.currency,x=l(f,["locale","currency"]),w=s(s({},x),{minimumFractionDigits:i||0,maximumFractionDigits:20}),j=b((r?new Intl.NumberFormat(m,s(s({},w),g&&{style:"currency",currency:g})):new Intl.NumberFormat(void 0,w)).formatToParts(Number(h)),e),C=v(j,s({},e)),k=t.slice(-1)===n?n:"",S=(h.match(RegExp("\\d+\\.(\\d+)"))||[])[1];return(void 0===i&&S&&n&&(j=j.includes(n)?j.replace(RegExp("(\\d+)(".concat(u(n),")(\\d+)"),"g"),"$1$2".concat(S)):C&&!d?j.replace(C,"".concat(n).concat(S).concat(C)):"".concat(j).concat(n).concat(S)),d&&k)?"".concat(j).concat(k).concat(d):C&&k?j.replace(C,"".concat(k).concat(C)):C&&d?j.replace(C,"".concat(k).concat(d)):[j,k,d].join("")},y=function(e,t,n){var r=e;return t&&"."!==t&&(r=r.replace(RegExp(u(t),"g"),"."),n&&"-"===t&&(r="-".concat(r.slice(1)))),r},b=function(e,t){var n=t.prefix,r=t.groupSeparator,i=t.decimalSeparator,o=t.decimalScale,a=t.disableGroupSeparators,s=void 0!==a&&a;return e.reduce(function(e,t,a){var l=t.type,u=t.value;return 0===a&&n?"minusSign"===l?[u,n]:"currency"===l?c(c([],e,!0),[n],!1):[n,u]:"currency"===l?n?e:c(c([],e,!0),[u],!1):"group"===l?s?e:c(c([],e,!0),[void 0!==r?r:u],!1):"decimal"===l?void 0!==o&&0===o?e:c(c([],e,!0),[void 0!==i?i:u],!1):"fraction"===l?c(c([],e,!0),[void 0!==o?u.slice(0,o):u],!1):c(c([],e,!0),[u],!1)},[""]).join("")},w={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},j=function(e){var t=e||{},n=t.locale,r=t.currency,i=l(t,["locale","currency"]);return(n?new Intl.NumberFormat(n,s(s({},i),r&&{currency:r,style:"currency"})):new Intl.NumberFormat).formatToParts(1000.1).reduce(function(e,t,n){if("currency"===t.type)if(0===n)return s(s({},e),{currencySymbol:t.value,prefix:t.value});else return s(s({},e),{currencySymbol:t.value,suffix:t.value});return"group"===t.type?s(s({},e),{groupSeparator:t.value}):"decimal"===t.type?s(s({},e),{decimalSeparator:t.value}):e},w)},C=function(e){return RegExp(/\d/,"gi").test(e)},k=function(e,t,n){if(void 0===n||""===t||void 0===t||""===e||void 0===e)return e;if(!e.match(/\d/g))return"";var r=e.split(t),i=r[0],o=r[1];if(0===n)return i;var a=o||"";if(a.length<n)for(;a.length<n;)a+="0";else a=a.slice(0,n);return"".concat(i).concat(t).concat(a)},S=function(e){var t=e.selectionStart,n=e.value,r=e.lastKeyStroke,i=e.stateValue,o=e.groupSeparator,a=t,s=n;if(i&&a){var l=n.split("");return"Backspace"===r&&i[a]===o&&(l.splice(a-1,1),a-=1),"Delete"===r&&i[a]===o&&(l.splice(a,1),a+=1),{modifiedValue:s=l.join(""),cursorPosition:a}}return{modifiedValue:s,cursorPosition:t}},N=(0,a.forwardRef)(function(e,t){var n=e.allowDecimals,r=void 0===n||n,i=e.allowNegativeValue,o=void 0===i||i,c=e.id,u=e.name,d=e.className,p=e.customInput,h=e.decimalsLimit,f=e.defaultValue,y=e.disabled,b=void 0!==y&&y,w=e.maxLength,N=e.value,E=e.onValueChange,D=e.fixedDecimalLength,I=e.placeholder,A=e.decimalScale,T=e.prefix,M=e.suffix,L=e.intlConfig,P=e.step,R=e.min,_=e.max,O=e.disableGroupSeparators,F=void 0!==O&&O,B=e.disableAbbreviations,V=void 0!==B&&B,z=e.decimalSeparator,H=e.groupSeparator,U=e.onChange,G=e.onFocus,W=e.onBlur,q=e.onKeyDown,Z=e.onKeyUp,K=e.transformRawValue,$=e.formatValueOnBlur,Y=void 0===$||$,J=l(e,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue","formatValueOnBlur"]);if(z&&C(z))throw Error("decimalSeparator cannot be a number");if(H&&C(H))throw Error("groupSeparator cannot be a number");var Q=(0,a.useMemo)(function(){return j(L)},[L]),X=z||Q.decimalSeparator||"",ee=H||Q.groupSeparator||"";if(X&&ee&&X===ee&&!1===F)throw Error("decimalSeparator cannot be the same as groupSeparator");var et={decimalSeparator:X,groupSeparator:ee,disableGroupSeparators:F,intlConfig:L,prefix:T||Q.prefix,suffix:M},en={decimalSeparator:X,groupSeparator:ee,allowDecimals:r,decimalsLimit:h||D||2,allowNegativeValue:o,disableAbbreviations:V,prefix:T||Q.prefix,transformRawValue:K},er=(0,a.useState)(function(){return null!=f?x(s(s({},et),{decimalScale:A,value:String(f)})):null!=N?x(s(s({},et),{decimalScale:A,value:String(N)})):""}),ei=er[0],eo=er[1],ea=(0,a.useState)(!1),es=ea[0],el=ea[1],ec=(0,a.useState)(0),eu=ec[0],ed=ec[1],ep=(0,a.useState)(0),eh=ep[0],ef=ep[1],em=(0,a.useState)(null),eg=em[0],ev=em[1],ex=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,function(){return ex.current});var ey=function(e,t){el(!0);var n=S({selectionStart:t,value:e,lastKeyStroke:eg,stateValue:ei,groupSeparator:ee}),r=n.modifiedValue,i=n.cursorPosition,o=m(s({value:r},en));if(!w||!(o.replace(/-/g,"").length>w)){if(""===o||"-"===o||o===X){E&&E(void 0,u,{float:null,formatted:"",value:""}),eo(o),ed(1);return}var a=X?o.replace(X,"."):o,l=parseFloat(a),c=x(s({value:o},et));if(null!=i){var d=i+(c.length-e.length);ed(d=d<=0?T?T.length:0:d),ef(eh+1)}if(eo(c),E){var p={float:l,formatted:c,value:o};E(o,u,p)}}},eb=function(e){var t=e.target;ey(t.value,t.selectionStart),U&&U(e)},ew=function(e){return G&&G(e),ei?ei.length:0},ej=function(e){var t=e.target.value,n=m(s({value:t},en));if("-"===n||n===X||!n){eo(""),W&&W(e);return}var r=k(g(n,X,D),X,void 0!==A?A:D),i=parseFloat(X?r.replace(X,"."):r),o=x(s(s({},et),{value:r}));E&&Y&&E(r,u,{float:i,formatted:o,value:r}),eo(o),W&&W(e)},eC=function(e){var t=e.key;if(ev(t),P&&("ArrowUp"===t||"ArrowDown"===t)){e.preventDefault(),ed(ei.length);var n=null!=N?String(N):void 0,r=X&&n?n.replace(X,"."):n,i=parseFloat(null!=r?r:m(s({value:ei},en)))||0,a="ArrowUp"===t?i+P:i-P;if(void 0!==R&&a<Number(R)||!o&&a<0||void 0!==_&&a>Number(_))return;var l=String(P).includes(".")?Number(String(P).split(".")[1].length):void 0;ey(String(l?a.toFixed(l):a).replace(".",X))}q&&q(e)},ek=function(e){var t=e.key,n=e.currentTarget.selectionStart;if("ArrowUp"!==t&&"ArrowDown"!==t&&"-"!==ei){var r=v(ei,{groupSeparator:ee,decimalSeparator:X});if(r&&n&&n>ei.length-r.length&&ex.current){var i=ei.length-r.length;ex.current.setSelectionRange(i,i)}}Z&&Z(e)};(0,a.useEffect)(function(){null==N&&null==f&&eo("")},[f,N]),(0,a.useEffect)(function(){es&&"-"!==ei&&ex.current&&document.activeElement===ex.current&&ex.current.setSelectionRange(eu,eu)},[ei,eu,ex,es,eh]);var eS=function(){return null==N||"-"===ei||X&&ei===X?ei:x(s(s({},et),{decimalScale:es?void 0:A,value:String(N)}))},eN=s({type:"text",inputMode:"decimal",id:c,name:u,className:d,onChange:eb,onBlur:ej,onFocus:ew,onKeyDown:eC,onKeyUp:ek,placeholder:I,disabled:b,value:eS(),ref:ex},J);if(p){var eE=p;return a.default.createElement(eE,s({},eN))}return a.default.createElement("input",s({},eN))});N.displayName="CurrencyInput";var E=e.i(403055),D=t,I=e.i(909270);function A(e){switch(e){case"v0-level0":return{toolTipMonthly:"These credits are issued monthly with your free plan. They do not roll over.",toolTipBuyMore:e=>(0,D.jsxs)(D.Fragment,{children:["You can't purchase additional credits on a free plan."," ",(0,D.jsx)(I.default,{href:e?"":"/chat/upgrade",onClick:e,className:"text-gray underline",children:"Upgrade Plan"})]})};case"v0-level3":return{toolTipMonthly:"These credits are issued monthly with your Premium plan. They do not roll over.",toolTipBuyMore:()=>(0,D.jsxs)(D.Fragment,{children:["Buy more credits to pay for more v0 usage outside of your monthly credit limit. These credits expire a year after purchase."," ",(0,D.jsx)(I.default,{href:"/pricing",className:"text-gray underline",children:"Learn more"})]})};case"v0-team":return{toolTipMonthly:"These credits are issued monthly with your Team plan. They do not roll over.",toolTipBuyMore:()=>(0,D.jsxs)(D.Fragment,{children:["Buy more credits to pay for more v0 usage outside of your monthly credit limit. These credits expire a year after purchase. Unlike monthly credits, they're shared amongst all members of the team."," ",(0,D.jsx)(I.default,{href:"/pricing",className:"text-gray underline",children:"Learn more"})]})};case"v0-enterprise":return{toolTipMonthly:"These credits are issued monthly with your Enterprise plan. They do not roll over.",toolTipBuyMore:()=>(0,D.jsxs)(D.Fragment,{children:["Buy more credits to pay for more v0 usage outside of your monthly credit limit. These credits expire a year after purchase. Unlike monthly credits, they're shared amongst all members of the team."," ",(0,D.jsx)(I.default,{href:"/pricing",className:"text-gray underline",children:"Learn more"})]})};default:return{toolTipMonthly:"These credits are issued monthly with your plan. They do not roll over.",toolTipBuyMore:e=>(0,D.jsxs)(D.Fragment,{children:["You can't purchase additional credits on a free plan."," ",(0,D.jsx)(I.default,{href:e?"":"/chat/upgrade",onClick:e,className:"text-gray underline",children:"Upgrade Plan"})]})}}}var T=e.i(176248);e.i(904347);var M=e.i(37737),L=t,P=n;let R=(0,L.jsxs)("svg",{width:"28",height:"22",viewBox:"0 0 28 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-7 h-5.5 scale-110",children:[(0,L.jsx)("g",{clipPath:"url(#clip0_14095_2055)",children:(0,L.jsx)("g",{style:{mixBlendMode:"multiply"},opacity:"0.6",children:(0,L.jsx)("path",{d:"M22.8902 14.5326C22.4927 14.799 22.0139 14.9541 21.4995 14.9541L16.4995 14.9535C15.1189 14.9533 14.0002 13.8343 14.0002 12.4537L13.9996 7.99959L11.9996 7.99994L12 13.0478C11.9996 14.6842 9.95272 15.4251 8.90499 14.1679L3.76523 8.00031L-1.0004 7.9998L-1.0001 6.9998L4.23428 6.99948L4.38364 7.17921L9.67373 13.5275C10.1228 14.0659 10.9997 13.7485 11 13.0475L10.9999 6.99963L13.9999 6.99959L14.0008 4.00057L-0.9992 3.9998L-0.998901 2.9998L14.0001 3.00154L14 -0.000410978L15 -9.95465e-05L15.0001 3.00185L15.5001 3.00006L19.0001 3.00017C20.3806 3.00012 21.4997 1.88046 21.4999 0.499972L21.4995 -1.50003L22.0005 -1.50085L22.5005 -1.49972L22.4999 0.499306C22.4999 2.43224 20.9327 4.00007 18.9998 4.00017L15.5008 4.00006L15.0008 4.00088L14.9999 6.9999L21.4999 6.99997C22.3227 7.00001 23.0509 7.3988 23.5064 8.01232L32.0704 3.06772L32.5702 3.93311L23.93 8.92163C23.974 9.10738 24.0001 9.30056 24.0001 9.49977L24.0002 12.4539C24.0002 12.9527 23.8531 13.4171 23.6014 13.8073L31.2834 19.088L30.7167 19.912L22.8902 14.5326ZM22.6323 8.5179C22.3572 8.20098 21.9522 7.99997 21.4996 7.99997L14.9996 7.9999L15.0002 12.454C15.0002 12.6046 15.0233 12.7495 15.0646 12.8866L22.6323 8.5179ZM21.4998 13.9541C22.3282 13.9541 23.0002 13.282 23.0002 12.4536L23.0001 9.49946C23.0001 9.48606 22.9985 9.47274 22.9982 9.45942L15.66 13.6964C15.8997 13.8587 16.1885 13.9535 16.4998 13.9535L21.4998 13.9541ZM6.49955 18.0002C6.49941 16.6196 5.38073 15.4996 4.00029 15.4994L-0.999707 15.4998L-1.00038 14.4998L3.99962 14.4994C5.93247 14.4994 7.49923 16.0668 7.49955 17.9995L7.50001 22.9995L6.5 23.0002L6.49955 18.0002ZM24.5003 21.9999C24.5001 20.6194 23.3806 19.5002 22.0001 19.5001L15.5001 19.5001C14.1194 19.5001 13.0003 20.6195 13.0003 22.0003L13.0002 22.5003L12.0002 22.4999L12.0003 21.9999C12.0004 20.067 13.5674 18.5001 15.5004 18.5001L22.0004 18.5001C23.9332 18.5003 25.5002 20.0675 25.5003 22.0002L25.4998 27.0002L24.4998 26.9999L24.5003 21.9999Z",fill:"black"})})}),(0,L.jsx)("defs",{children:(0,L.jsx)("clipPath",{id:"clip0_14095_2055",children:(0,L.jsx)("rect",{width:"27.9959",height:"22",rx:"4",transform:"matrix(-1 -0.000311431 0.00029884 -1 27.9961 22.0088)",fill:"white"})})})]});function _(){return(0,L.jsx)("div",{className:"bg-v0-black p-0.25 rounded-[5px]",children:(0,L.jsxs)("div",{className:"w-[28px] h-[22px] bg-gradient-to-br from-gray-200 via-gray-300 to-gray-500 dark:from-gray-700 dark:via-gray-900 dark:to-gray-600 rounded-[4px] shadow-[0_0_5px_rgba(0,0,0,0.5),0_0_3px_rgba(255,255,255,0.9)] ring-1 ring-black/10 relative overflow-hidden",children:[(0,L.jsx)("div",{className:"absolute inset-0 border border-white/60 rounded-[4px] mix-blend-mode-screen pointer-events-none"}),(0,L.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-md"}),(0,L.jsx)("div",{className:"absolute inset-0 shadow-inner rounded-md"}),(0,L.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:R})]})})}function O(e){let{amount:t,handle:n}=e,[r,i]=(0,P.useState)({x:0,y:0}),[o,a]=(0,P.useState)(!1),[s,l]=(0,P.useState)({x:0,y:0}),[c,u]=(0,P.useState)(!1),d=(0,P.useRef)(null),p=(0,P.useCallback)(e=>{if(!d.current)return;let t=d.current.getBoundingClientRect(),n=t.left+t.width/2,r=t.top+t.height/2,o=e.clientX,a=e.clientY,s=o-n;i({x:-((a-r)/(t.height/2)*4),y:s/(t.width/2)*4}),l({x:(o-t.left)/t.width,y:(a-t.top)/t.height})},[]),h=()=>{a(!0),u(!1)},f=()=>{a(!1),i({x:0,y:0}),u(!0),setTimeout(()=>u(!1),600)},m=100*s.x,g=(0,P.useMemo)(()=>c?m>50?120:-20:m,[c,m]);return(0,L.jsx)("div",{className:"relative w-full max-w-md mx-auto font-sans",children:(0,L.jsxs)("div",{ref:d,className:"relative overflow-hidden group p-6 ring ring-black/10 shadow-xl w-full bg-v0-black dark:bg-v0-gray-100",style:{aspectRatio:"190/123",alignSelf:"stretch",borderRadius:"12px",backgroundImage:"url('/noise.webp')",backgroundRepeat:"repeat",backgroundSize:"18px 18px",transform:"perspective(1000px) rotateX(".concat(r.x,"deg) rotateY(").concat(r.y,"deg) scale(").concat(o?1.01:1,") translateY(").concat(o?-1:0,"px)"),transition:o?"transform 0.15s ease-out, box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1)":"transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:o?"0 20px 40px -12px rgba(0,0,0,0.25), 0 0 0 1px rgba(255,255,255,0.05), inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3)":"0 10px 15px -3px rgba(0, 0, 0, 0.06), 0 4px 6px -2px rgba(0, 0, 0, 0.03), inset 0 1px 0 rgba(255,255,255,0.05), inset 0 -1px 0 rgba(0,0,0,0.2)"},onMouseMove:p,onMouseEnter:h,onMouseLeave:f,children:[(0,L.jsx)("div",{className:"absolute opacity-100 dark:opacity-30",style:{width:"144px",height:"240px",transform:"rotate(-27.52deg)",flexShrink:0,background:"linear-gradient(253deg, rgba(216, 216, 216, 0.10) 29.07%, rgba(255, 255, 255, 0.02) 90.23%)",top:"-75px",left:"90px"}}),(0,L.jsx)("div",{className:"absolute inset-0 pointer-events-none will-change-transform",style:{width:"60%",height:"100%",background:"linear-gradient(90deg, transparent 0%, transparent 20%, rgba(128,128,128,0.1) 30%, rgba(128,128,128,0.2) 50%, rgba(128,128,128,0.1) 70%, transparent 80%, transparent 100%)",filter:"blur(2px)",transition:c?"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)":"transform 0.1s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateX(".concat(g,"%) skewX(-15deg)"),mixBlendMode:"normal",opacity:.7*!c}}),(0,L.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 pointer-events-none",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 50%, transparent 100%)",borderRadius:"12px 12px 0 0",opacity:+!!o,transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}),(0,L.jsx)("div",{className:"absolute top-0 bottom-0 left-0 w-1 pointer-events-none",style:{background:"linear-gradient(90deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.03) 50%, transparent 100%)",borderRadius:"12px 0 0 12px",opacity:+!!o,transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}),(0,L.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 pointer-events-none",style:{background:"linear-gradient(0deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, transparent 100%)",borderRadius:"0 0 12px 12px",opacity:+!!o,transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}),(0,L.jsx)("div",{className:"absolute top-0 bottom-0 right-0 w-1 pointer-events-none",style:{background:"linear-gradient(-90deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.15) 50%, transparent 100%)",borderRadius:"0 12px 12px 0",opacity:+!!o,transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}}),(0,L.jsx)("div",{className:"absolute top-7 right-3",children:(0,L.jsx)(_,{})}),(0,L.jsxs)("div",{className:"absolute z-10 bottom-0 left-0 p-4 w-full",children:[(0,L.jsxs)("div",{className:"text-2xl font-semibold text-v0-gray-100 dark:text-v0-gray-1000 tracking-tight pb-2 [font-variant-numeric:slashed-zero] font-mono",children:["$",t]}),(0,L.jsx)("div",{className:"text-xs text-v0-gray-100 dark:text-v0-gray-1000 pb-1 truncate w-full",children:n})]})]})})}e.s(["CreditCard",()=>O],337034);var F=t,B=e.i(334627),V=e.i(794593),z=i,H=n;function U(e){let{expirationData:t}=e,{totalPayAsYouGoBalance:n,expirations:r}=t;if(1===r.length&&r[0].expiringAmount===n){let{expiringAmount:e,expiringDays:t}=r[0];return(0,F.jsxs)(V.Badge,{variant:"amber",children:["Expires in ",e," ",(0,F.jsx)("span",{children:1===t?"day":"days"})]})}if(1===r.length){let{expiringAmount:e,expiringDays:t}=r[0];return(0,F.jsxs)(V.Badge,{variant:"amber",children:["$",e," Expires in ",t," ",(0,F.jsx)("span",{children:1===t?"day":"days"})]})}return r.length>1?(0,F.jsx)(G,{content:(0,F.jsx)(z.TooltipContent,{children:(0,F.jsx)("div",{children:r.map((e,t)=>(0,F.jsxs)("div",{children:["$",e.expiringAmount," Expire in ",e.expiringDays," ",(0,F.jsx)("span",{children:1===e.expiringDays?"day":"days"})]},t))})}),children:(0,F.jsx)("div",{children:(0,F.jsxs)(V.Badge,{variant:"amber",className:"flex cursor-pointer items-center gap-1",children:["Some credits expire soon ",(0,F.jsx)(B.InfoIcon,{size:14})]})})}):null}function G(e){let{content:t,children:n}=e,[r,i]=(0,H.useState)(!1);return(0,F.jsx)(z.Tooltip,{open:r,onOpenChange:i,delayDuration:150,content:t,children:n})}var W=t,q=e.i(66990),Z=e.i(304649),K=n;function $(e){let{children:t,className:n,title:r,noDividers:i=!1}=e,o=K.default.Children.toArray(t);return(0,W.jsxs)("div",{className:"flex flex-col gap-4",children:[r&&(0,W.jsx)("h3",{className:"text-sm font-medium text-v0-gray-900 px-1",children:r}),(0,W.jsx)("div",{className:(0,Z.cn)("bg-v0-background-300 rounded-lg p-4 border border-v0-alpha-400",n),children:i?t:o.map((e,t)=>(0,W.jsxs)(K.default.Fragment,{children:[e,t<o.length-1&&(0,W.jsx)(q.Separator,{className:"my-4"})]},t))})]})}e.s(["SettingsGroup",()=>$],593640);var Y=e.i(199929);function J(e){var a;let{planInfo:s,canBuyCredits:l,needsToRequestCredits:c,daysRemaining:u,autoTopupSection:d,username:p,expirationData:h}=e,f=(0,o.useRouter)(),m=(0,n.useCallback)(()=>{(0,n.startTransition)(f.refresh)},[f.refresh]),{toolTipMonthly:g,toolTipBuyMore:v}=A(s.plan),x=(()=>{let e=s.balance.blocks;if(e)return e.find(e=>{var t;return(null==(t=e.metadata)?void 0:t.promo)==="daily_credits"})})(),y=s.balance.remaining-(null!=(a=null==x?void 0:x.currentBalance)?a:0),b=s.balance.remaining+s.onDemand.balance+((null==x?void 0:x.currentBalance)||0),w=p||"Your Balance";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)($,{className:"relative p-0",noDividers:!0,children:[(0,t.jsxs)(Y.SettingsItem,{className:"border-b border-v0-alpha-400 px-4 py-4",children:[(0,t.jsxs)(Y.SettingsItemContent,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Y.SettingsItemTitle,{children:"Credit Balance"}),h&&(0,t.jsx)(U,{expirationData:h})]}),(0,t.jsxs)(Y.SettingsItemDescription,{children:["Your monthly credits reset in"," ",(0,t.jsxs)("span",{className:"font-medium text-v0-gray-1000",children:[u," days"]}),". Credits are used in the following order: gifted, monthly, purchased."]})]}),(0,t.jsx)(Y.SettingsItemAction,{children:(0,t.jsx)(i.Tooltip,{content:c?"You do not have permission to purchase credits. Please contact your administrator":void 0,children:(0,t.jsx)(T.Button,{size:"sm",disabled:c,onClick:()=>{l?(0,M.openDialog)({type:"buyMoreCredits",data:{onSuccess:m,role:s.role}}):(0,M.openDialog)({type:"upgradePlan",data:{planSlug:"v0-level3",customTitle:"Upgrade your plan to buy more credits"}})},variant:"secondary",className:"whitespace-nowrap h-7 rounded-md px-2",children:"Buy Credits"})})})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 p-4 md:items-center",children:[(0,t.jsx)("div",{className:"w-52 relative",children:(0,t.jsx)(O,{amount:b.toFixed(2),handle:w})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm h-9 px-2 rounded-md",children:[(0,t.jsx)("div",{className:"flex items-center gap-1.5",children:(0,t.jsx)("span",{className:"text-v0-gray-900 font-medium",children:"Gifted Credits"})}),(null==x?void 0:x.currentBalance)?(0,t.jsxs)("span",{children:["$",x.currentBalance.toFixed(2)]}):(0,t.jsx)("span",{children:"$0.00"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm bg-v0-background-200 h-9 px-2 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"text-v0-gray-900 font-medium",children:"Monthly Credits"}),(0,t.jsx)(Q,{content:(0,t.jsx)("p",{children:g}),children:(0,t.jsx)("div",{children:(0,t.jsx)(r.IconInfoFill,{className:"text-v0-gray-900 h-4 w-4"})})})]}),(0,t.jsxs)("span",{children:["$",y.toFixed(2)," / $",s.balance.total.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm h-9 px-2 rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"text-v0-gray-900 font-medium",children:"Purchased Credits"}),(0,t.jsx)(Q,{content:(0,t.jsx)("p",{children:v(()=>(0,M.openDialog)({type:"upgradePlan"}))}),children:(0,t.jsx)("div",{children:(0,t.jsx)(r.IconInfoFill,{className:"text-v0-gray-900 h-4 w-4"})})})]}),(0,t.jsxs)("span",{children:["$",s.onDemand.balance.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm bg-v0-background-200 h-9 px-2 rounded-md",children:[(0,t.jsx)("span",{className:"font-medium text-v0-gray-1000",children:"Total Available Credits"}),(0,t.jsxs)("span",{className:"font-medium text-v0-gray-1000",children:["$",b.toFixed(2)]})]})]})]})]}),(0,t.jsx)("div",{className:"-mt-13",children:d})]})}function Q(e){let{content:r,children:o}=e,[a,s]=(0,n.useState)(!1);return(0,t.jsx)(i.Tooltip,{className:"max-w-[250px]",open:a,onOpenChange:s,content:r,disableHoverableContent:!1,children:o})}let X=n.default.forwardRef((e,r)=>{let{id:i,initialValue:o="",onChange:a,min:s=10,max:l=5e3,placeholder:c="$0.00",className:u="",currency:d="USD",disabled:p=!1}=e,[h,f]=(0,n.useState)(()=>""===o?"":o.toString()),m=e=>{if(void 0===e||""===e){f(""),a("");return}let t=parseFloat(e),n=e;t>l&&(n=l.toString()),f(n),a(n)},g=()=>{""===h&&(f(s.toString()),a(s.toString()))};return(0,t.jsx)(N,{id:i,placeholder:c,value:h,ref:r,max:l,min:s,decimalsLimit:0,onBlur:g,onValueChange:m,prefix:ee[d],className:(0,E.cn)("outline-hidden min-w-0 border-none bg-transparent",u),decimalScale:0,allowNegativeValue:!1,disabled:p})});X.displayName="CurrencyInput";let ee={USD:"$",EUR:"€",GBP:"£",CAD:"CA$",AUD:"A$",JPY:"¥",CHF:"CHF",CNY:"¥"}},632393,851658,e=>{"use strict";e.s(["BuyMoreCreditsTwoStepDialog",()=>er],632393);var t=e.i(509473),n=e.i(743124),r=e.i(120945);e.i(904347);var i=e.i(37737),o=e.i(667660),a=e.i(206037),s=e.i(897850),l=t,c=n,u=e.i(176248),d=e.i(686832),p=e.i(722198),h=e.i(675120),f=e.i(211976),m=e.i(660348),g=e.i(996174),v=e.i(403055);e.i(521603);var x=e.i(895336);let y=[30,60,100,250,500],b=100,w=10,j=5e3;var C=n;function k(){let[e,t]=(0,C.useState)(null),n=e=>{let n=e;e.includes(".")?1===e.split(".")[1].length&&(n="".concat(e,"0")):n="".concat(e,".00");let r=Number.parseFloat(n);return isNaN(r)||r<w?(t("Minimum amount is $".concat(w)),!1):r>j?(t("Maximum amount is $".concat(j.toLocaleString())),!1):r};return{amountError:e,setAmountError:t,validateAmount:n}}var S=e.i(358847),N=(0,S.createServerReference)("403ae49c6924a3b36395a00788fadf78b46927f049",S.callServer,void 0,S.findSourceMapURL,"createElementsTopUpPurchaseIntent"),E=S,D=(0,E.createServerReference)("40e606cc0b4f0d4a0711a98c94c24e29caf29a754e",E.callServer,void 0,E.findSourceMapURL,"createInvoiceTopUpPurchaseIntent"),I=i,A=e.i(402907),T=S,M=(0,T.createServerReference)("40bc94caf6e6629566620cbd1da6e027f627b179e7",T.callServer,void 0,T.findSourceMapURL,"requestCreditsAction"),L=e.i(127169);function P(e){let{canBuyCredits:t,onCancel:n,amount:r,setAmount:i,onContinue:o,needsToRequestCredits:a,shouldInvoice:s}=e,w=(0,c.useRef)(null);(0,L.useShortcut)(e=>{let t=w.current;t&&(t.contains(document.activeElement)||e.target===t)&&"Escape"===e.key&&n()});let{amountError:j,setAmountError:C,validateAmount:S}=k(),[E,T]=(0,c.useState)(!1),P=(0,c.useRef)(null),[R,_]=(0,c.useState)(!1),{toast:O}=(0,A.useToast)(),F=e=>{i(e),C(null)};(0,c.useEffect)(()=>{if(E&&P.current){let e=setTimeout(()=>{var e;null==(e=P.current)||e.focus()},50);return()=>clearTimeout(e)}},[E]);let B=async()=>{let e=S(r);if(e)try{if(_(!0),a)return void(0,c.startTransition)(async()=>{(0,I.closeDialog)(),O({title:"Request Sent",description:(0,l.jsxs)("span",{children:["Your request for ",(0,l.jsx)("strong",{children:r})," credits has been sent to an admin."]}),duration:5e3});let e=await M(r.toString());e&&"error"in e&&O({title:"Error",description:e.error,variant:"destructive"})});let t=await (s?D({amount:e.toString()}):N({amount:e.toString(),returnUrl:window.location.href}));if(!t.ok)return void C(t.error.message);o(t.value)}catch(e){C(e instanceof Error?e.message:"An unknown error occurred")}finally{_(!1)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.ModalContent,{className:"md:p-0",ref:w,children:(0,l.jsx)("div",{className:"md:p-6 md:pb-0",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 text-center",children:[(0,l.jsx)(d.ModalTitle,{className:"sm:text-2xl text-xl text-v0-gray-1000 font-semibold",children:t?"Buy More Credits":"Request More Credits"}),(0,l.jsx)("p",{className:"text-label-14 text-pretty text-v0-gray-900",children:t?(0,l.jsxs)(l.Fragment,{children:["Buying purchased credits allows you to pay for v0 usage beyond your included credit limit."," ",(0,l.jsx)("strong",{children:"Additional credits expire 1 year after purchase."})]}):(0,l.jsx)("span",{className:"p-6",children:"You do not have permission to purchase credits. Please contact your administrator."})}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4 pb-4",children:[(0,l.jsx)(h.TransitionNode,{renderKey:"".concat(E),exit:{y:0,scale:.98},enter:{y:0,scale:1.02},duration:.2,delay:.1,children:(0,l.jsx)("div",{className:(0,v.cn)("flex h-[84px] items-center justify-center"),onClick:()=>{T(!0)},children:E?(0,l.jsx)(p.CurrencyInput,{className:"text-heading-56 w-full text-center",initialValue:r,onChange:F,min:10,max:5e3,currency:"USD",ref:P}):(0,l.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,l.jsx)(x.default,{className:"text-heading-56",value:""===r?10:parseFloat(r),format:{style:"currency",currency:"USD"}})})})}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[y.map(e=>(0,l.jsxs)(u.Button,{variant:"secondary",autoFocus:e===b,size:"sm",onClick:()=>{i(e.toString()),T(!1),C(null)},children:["$",e]},e)),(0,l.jsx)(u.Button,{variant:"secondary",size:"sm",onClick:()=>{T(!0)},children:"Custom"})]})]}),(0,l.jsx)(h.TransitionNode,{children:j?(0,l.jsxs)("div",{className:"text-label-13 flex gap-2 pl-3 pt-3 text-v0-red-700 p-4",children:[(0,l.jsx)(m.Stop,{}),j]}):null})]})})}),(0,l.jsxs)(d.ModalFooter,{className:"border-t border-v0-gray-200 bg-v0-background-200",children:[(0,l.jsx)(u.Button,{size:"sm",type:"button",variant:"secondary",onClick:n,disabled:R,children:"Cancel"}),(0,l.jsx)(g.Tooltip,{content:t?void 0:"You do not have permission to purchase credits. Please contact your administrator.",children:(0,l.jsx)(f.SpinnerButton,{size:"sm",type:"button",onClick:B,disabled:R||!t,pending:R,children:t?"Continue to Payment":"Send Request"})})]})]})}var R=t,_=n,O=d,F=u,B=f,V=m,z=h,H=e.i(230073),U=S,G=(0,U.createServerReference)("40588dd39741e7b00bef37f9bfa06dadf6abce8f31",U.callServer,void 0,U.findSourceMapURL,"completeTopUpPurchaseIntent"),W=S,q=(0,W.createServerReference)("4078e6423032670d58793a86267408244d71a79859",W.callServer,void 0,W.findSourceMapURL,"confirmTopUpPurchaseIntent"),Z=i,K=e.i(53223),$=o,Y=e.i(750571),J=e.i(868712),Q=e.i(762585),X=L;function ee(e){var t,n;let{purchaseIntent:r,onBack:i,onSuccess:o,onGoBack:a}=e,[s,l]=(0,_.useState)(!1),[c,u]=(0,_.useState)(null),d=(0,_.useRef)(null),p=(0,_.useRef)(null),h=()=>{a()};(0,X.useShortcut)(e=>{let t=p.current;t&&(t.contains(document.activeElement)||e.target===t)&&"Escape"===e.key&&h()});let f=null!=(n=null==(t=r.purchaseIntent.lineItems)?void 0:t.map(e=>({name:e.name,quantity:e.quantity,amount:Number(e.unitAmount)*Number(e.quantity)})))?n:[],m=Number(r.purchaseIntent.total),g="clientSecret"in r.providerDetails?r.providerDetails.clientSecret:null,v=async()=>{try{if(l(!0),u(null),d.current){let e=await d.current();if(!e.success)throw Error(e.error||"Payment confirmation failed")}else await q({intentId:r.purchaseIntent.id});await G({intentId:r.purchaseIntent.id}),null==o||o(),(0,Z.closeDialog)()}catch(e){if(u(e instanceof Error?e.message:"An error occurred while processing your request"),"object"==typeof e&&null!==e&&"type"in e){let{type:t,code:n,decline_code:r,param:i,doc_url:o}=e;(0,K.track)("BillingNewPaymentMethodStripeError",{type:t,code:n,declineCode:r,param:i,docUrl:o})}}finally{l(!1)}};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(O.ModalContent,{className:"md:p-0",ref:p,children:(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"md:p-6 md:pb-0",children:(0,R.jsx)("div",{className:"flex flex-col gap-4 text-left",children:(0,R.jsx)(O.ModalTitle,{className:"sm:text-2xl text-xl text-v0-gray-1000 font-semibold",children:"Complete Payment"})})}),(0,R.jsx)("div",{className:"grid h-fit bg-v0-background-100 sm:p-6 pt-6",children:g&&(0,R.jsx)(et,{clientSecret:g,confirmHandler:d})}),(0,R.jsxs)("div",{className:"flex flex-col sm:p-6 pt-2 bg-v0-background-200 border-t border-t-gray-200",children:[(0,R.jsxs)("div",{className:"flex flex-col",children:[f.map((e,t)=>(0,R.jsxs)("div",{className:"flex flex-col",children:[(0,R.jsxs)("div",{className:"flex justify-between py-4",children:[(0,R.jsxs)("span",{className:"text-label-14 text-v0-gray-900 font-medium",children:[Number(e.quantity)>1?(0,R.jsxs)("span",{children:[e.quantity," "]}):null,(0,R.jsx)("span",{children:e.name})]}),(0,R.jsxs)("span",{className:"text-label-14 text-v0-gray-900 font-medium",children:["$",e.amount.toFixed(2)]})]}),t<f.length-1&&(0,R.jsx)("hr",{})]},e.name)),(0,R.jsx)("hr",{}),(0,R.jsxs)("div",{className:"flex justify-between font-semibold py-4",children:[(0,R.jsx)("span",{className:"text-label-14 text-v0-gray-1000 font-medium",children:"Total"}),(0,R.jsxs)("span",{className:"text-label-14 text-v0-gray-1000 font-medium",children:["$",Number(m).toFixed(2)]})]})]}),(0,R.jsx)("p",{className:"text-label-14 text-v0-gray-900",children:'By pressing "Confirm and Pay" you\'ll make a one-time credit purchase. Your card will be charged and your credit limit will be updated immediately.'})]}),(0,R.jsx)(z.TransitionNode,{children:c?(0,R.jsxs)("div",{className:"text-label-13 flex gap-2 pl-3 pt-3 text-v0-red-700 p-4",children:[(0,R.jsx)(V.Stop,{}),c]}):null})]})}),(0,R.jsxs)(O.ModalFooter,{className:"border-t border-v0-gray-200 bg-v0-background-200",children:[(0,R.jsx)(F.Button,{size:"sm",type:"button",variant:"secondary",onClick:i,disabled:s,children:"Back"}),(0,R.jsx)(B.SpinnerButton,{size:"sm",type:"button",onClick:v,disabled:s,pending:s,children:"Confirm and Pay"})]})]})}function et(e){let{clientSecret:t,confirmHandler:n}=e,{user:r}=(0,$.useActiveScope)(),i=(0,J.useIsDark)(),[o,a]=(0,_.useState)(!0),s=(null==r?void 0:r.billingMode)==="test"?"test":"live";return(0,R.jsxs)("div",{children:[o&&(0,R.jsxs)("div",{className:"flex flex-col gap-[10px]",children:[(0,R.jsxs)("div",{className:"flex gap-1",children:[(0,R.jsx)(Q.Skeleton,{className:"h-[55px] w-1/2 rounded-md"}),(0,R.jsx)(Q.Skeleton,{className:"h-[55px] w-1/2 rounded-md"})]}),(0,R.jsx)(Q.Skeleton,{className:"h-[55px] w-full rounded-md"})]}),(0,R.jsx)(H.CheckoutProvider,{stripe:(0,Y.getStripeUsingMode)(s),options:{fetchClientSecret:()=>Promise.resolve(t),elementsOptions:{appearance:(0,Y.stripeAppearence)(i,{theme:"stripe"}),loader:"never",savedPaymentMethod:{enableRedisplay:"auto"}}},children:(0,R.jsx)(en,{className:o?"hidden":"",confirmHandler:n,onReady:()=>a(!1)})})]})}function en(e){let{confirmHandler:t,className:n,onReady:r}=e,i=(0,H.useCheckout)(),o=(0,_.useCallback)(async()=>{try{let e=await i.confirm({redirect:"if_required"});if("error"===e.type)return{success:!1,error:e.error.message};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An error occurred"}}},[i]);return(0,_.useEffect)(()=>(t.current=o,()=>{t.current=null}),[t,o]),(0,R.jsx)(H.PaymentElement,{className:n,onReady:r,options:{layout:{type:"tabs",defaultCollapsed:!1},terms:{card:"never",applePay:"never",googlePay:"never"}}})}function er(e){return(0,t.jsx)(ei,{...e})}function ei(e){let{onSuccess:n,onCancel:r,role:i}=e,{activeScope:l,isActiveScopeReady:c}=(0,o.useActiveScope)(),{needsToRequestCredits:u,isLoading:d,shouldInvoice:p}=(0,s.useCanBuyCredits)({role:i}),{planInfo:h}=(0,a.usePlanInfo)(!0,null==l?void 0:l.id,!u);return!c||d?null:(0,t.jsx)(eo,{paymentMethod:null==h?void 0:h.current.paymentMethod,onCancel:r,canBuyCredits:!u,shouldInvoice:p,onSuccess:n,needsToRequestCredits:u})}function eo(e){let{onCancel:o,canBuyCredits:a,shouldInvoice:s,onSuccess:l,needsToRequestCredits:c}=e,[u,d]=(0,n.useState)("amount"),[p,h]=(0,n.useState)(null),f=()=>{if("payment"===u)return void d("amount");null==o||o(),(0,i.closeDialog)()},[m,g]=(0,n.useState)(b.toString()),v=e=>{h(e),d("payment")};return(0,t.jsxs)(r.AtomicDialog,{type:"buyMoreCredits",className:"h-auto max-h-[calc(100svh-theme(space.8))] overflow-auto",children:["amount"===u&&(0,t.jsx)(P,{amount:m,setAmount:g,canBuyCredits:a,onCancel:f,needsToRequestCredits:c,onContinue:v,shouldInvoice:s}),"payment"===u&&p&&(0,t.jsx)(ee,{purchaseIntent:p,onBack:f,onSuccess:l,onGoBack:f})]})}e.s(["CancelPlanDialog",()=>eP],851658);var ea=t,es=S,el=(0,es.createServerReference)("4027be6b831a153d74ae09e1938a11e65281a8338c",es.callServer,void 0,es.findSourceMapURL,"unsubscribeAction"),ec=n,eu=v,ed=e.i(972011),ep=e.i(298515),eh=e.i(152076);e.i(563948);var ef=e.i(407562),em=e.i(396407),eg=e.i(979865),ev=e.i(216445),ex=d,ey=u,eb=f,ew=e.i(341003),ej=e.i(304649),eC=e.i(580643),ek=S,eS=(0,ek.createServerReference)("40db45f2fd0d3de9064a995caaed24c037144fb130",ek.callServer,void 0,ek.findSourceMapURL,"cancelTeam"),eN=o,eE=e.i(906261),eD=e.i(154314),eI=r,eA=i,eT=e.i(242759);let eM=[{text:"Too expensive",code:"expensive"},{text:"Not enough variety",code:"variety"},{text:"Complicated to use",code:"complicated"},{text:"Not my stack",code:"stack"},{text:"Needs more components",code:"needs-components"},{text:"Output wasn't good",code:"output"},{text:"Other",code:"other"}],eL=[{text:"Just wanted 1 month",code:"one-month"},...eM];function eP(e){let{currentPlan:t,onPlanCancelled:n,currentPlanPricingInfo:r,isOnPersonalAccount:i,updatePlanInfo:o,remainingBalance:a}=e,[s,l]=(0,ec.useState)("confirm"),c=(0,eC.useMultiSelect)(),{activeScope:u}=(0,eN.useActiveScope)(),{tbb:d}=(0,eT.useFlags)(),[p,h]=(0,ec.useState)(),f=e=>{e||setTimeout(()=>{l("confirm")},500),e||(0,eA.closeDialog)()},m=(0,eg.useRouter)(),g=async()=>{let e=c.values.join("\n")+(p?"\n Free-form reason: ".concat(p):"");if(i){let t=await el({reason:e});t.ok?(l("cancelled"),null==n||n(t.value)):("no_subscription"===t.error.code&&m.refresh(),ef.toast.error((0,ea.jsx)(em.ErrorMessage,{code:t.error.code,variant:"unstyled"}),{duration:5e3}),f(!1)),await o()}else{if(!u)throw Error("No active scope found");let e=(0,eE.isUserScope)(u)?null:u;if(!e)throw Error("No active team scope found");let t=await eS(e);await o(),t.ok?l("cancelled"):(ef.toast.error((0,ea.jsx)(em.ErrorMessage,{code:t.error.code,variant:"unstyled"}),{duration:5e3}),f(!1))}},v=(0,ec.useMemo)(()=>"cancelled"===s?(0,ea.jsxs)(ex.ModalDescription,{className:"text-center text-sm",children:[(0,ea.jsxs)("span",{children:["Your increased limits remain active until the end of this calendar month's billing cycle which is on"," "]}),t.billingPeriodEndDate?(0,ea.jsx)("span",{className:"font-medium text-v0-black",children:(0,eu.formatShortDate)(t.billingPeriodEndDate)}):null,(0,ea.jsx)("span",{children:". After that, you'll be moved onto our Free Plan. Enjoy the continued access!"})]}):(0,ea.jsxs)("div",{children:[(0,ea.jsxs)(ex.ModalDescription,{className:"text-sm",children:["You are about to cancel your"," ",(0,ea.jsxs)("span",{className:"font-medium text-v0-black",children:[r.name," Plan."]})," ","Your increased limits will remain active until the end of your billing period.",d&&void 0!==a&&a>.01?(0,ea.jsxs)("span",{className:"text-medium",children:[" ","Note that you won’t be able to use your Purchased Credits (",(0,ep.formatCents)(a,"display")," left) once you cancel."]}):null,(0,ea.jsx)("span",{children:" Before you go, tell us why you're cancelling:"})]}),(0,ea.jsx)("div",{className:"text-sm",children:t.billingPeriodStartDate?(0,ea.jsx)(e_,{freeformReason:p,planStartDate:new Date(t.billingPeriodStartDate).toISOString(),reasons:c,setFreeformReason:h}):null})]}),[t.billingPeriodEndDate,t.billingPeriodStartDate,r,a,p,c,s,d]);return(0,ea.jsxs)(eI.AtomicDialog,{type:"cancelPlan",onOpenChange:f,forceOpen:"cancelled"===s,children:["confirm"===s?(0,ea.jsxs)("form",{action:g,className:"grid gap-6",children:[(0,ea.jsx)(ex.ModalHeader,{className:"flex flex-col justify-center gap-4 pb-0!",children:(0,ea.jsx)(ex.ModalTitle,{className:"w-full text-left",children:"Confirm Plan Cancellation"})}),(0,ea.jsx)(ex.ModalContent,{className:(0,ej.cn)("gap-2",{"p-0":"confirm"===s}),children:v}),(0,ea.jsxs)(ex.ModalFooter,{className:"bg-v0-background-200 border-t border-v0-alpha-400",children:[(0,ea.jsx)(eO,{asChild:!0,onClick:()=>(0,eA.closeDialog)(),type:"button",children:(0,ea.jsx)(ey.Button,{className:"gap-2 rounded-md",variant:"secondary",size:"sm",children:"Cancel"})}),(0,ea.jsx)(eR,{})]})]}):null,"cancelled"===s?(0,ea.jsxs)(ea.Fragment,{children:[(0,ea.jsx)(ex.ModalHeader,{children:(0,ea.jsxs)(ex.ModalTitle,{className:"flex flex-col gap-4 items-center",children:[(0,ea.jsx)(ed.CheckCircleFill,{className:"rounded-full !text-v0-teal-700",size:32}),"Cancellation Confirmed"]})}),(0,ea.jsx)(ex.ModalContent,{children:v}),(0,ea.jsx)(ex.ModalFooter,{children:(0,ea.jsx)(ey.Button,{className:"w-full justify-center rounded-md",onClick:()=>(0,eA.closeDialog)(),type:"button",size:"sm",children:"Continue"})})]}):null]})}function eR(){let{pending:e}=(0,eh.useFormStatus)();return(0,ea.jsx)(eb.SpinnerButton,{disabled:e,pending:e,type:"submit",variant:"destructive",className:"rounded-md",children:"Confirm Cancellation"})}function e_(e){let{planStartDate:t,freeformReason:n,setFreeformReason:r,reasons:i}=e,o=t&&(0,eu.isWithin30Days)(t)?eL:eM;return(0,ea.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[(0,ea.jsx)("div",{className:"grid grid-cols-2 gap-2",children:o.map(e=>{let{text:t,code:n}=e;return(0,ea.jsx)(ew.RadioButton,{onClick:()=>i.toggle(n),selected:i.has(n),children:t},n)})}),(0,ea.jsx)(ev.Textarea,{onChange:e=>r(e.target.value),placeholder:"Tell us how we can improve...",value:n})]})}let eO=(0,ec.forwardRef)((e,t)=>{let{asChild:n,disabled:r,...i}=e,o=n?eD.Slot:ey.Button,{pending:a}=(0,eh.useFormStatus)();return(0,ea.jsx)(o,{...i,disabled:r||a,ref:t})});eO.displayName="FormButton"},460816,e=>{"use strict";let t=(0,e.i(651219).default)(()=>e.A(437460).then(e=>e.ClientStripeProvider),{loadableGenerated:{modules:[602876]},ssr:!1});e.s(["StripeProvider",0,t])},74656,e=>{"use strict";var t=e.i(743124);function n(e){let{action:n,additionalFields:r={}}=e,i=(0,t.useId)(),o=(0,t.useRef)(new FormData),a=(0,t.useRef)(null),[s,l]=(0,t.useState)("idle"),[c,u]=(0,t.useState)(null);return{status:s,error:c,submit:e=>{if(a.current)throw Error("Cannot submit form while another action is pending");l("submitting"),u(null);let t=document.getElementById(i);if(!t)throw Error("No form found for useImperativeHandle with id ".concat(i));let n=new FormData;if(e)for(let[t,r]of Object.entries(e))n.append(t,r);for(let[e,t]of Object.entries(r))n.append(e,t);return o.current=n,new Promise((e,n)=>{a.current={resolve:e,reject:n},t.requestSubmit()})},props:{id:i,action:async()=>{var e,t,r;try{let r=await n(o.current);r.ok?null==(e=a.current)||e.resolve(r.value):(u(r.error.message),null==(t=a.current)||t.reject(r.error))}catch(e){u(e instanceof Error?e.message:"Unknown error"),null==(r=a.current)||r.reject()}finally{a.current=null,l("idle")}},onSubmit:e=>e.stopPropagation()}}}e.s(["useImperativeForm",()=>n])},612630,e=>{"use strict";var t=e.i(358847),n=(0,t.createServerReference)("403c39072540c31afddf6f533f83b1f008a542f442",t.callServer,void 0,t.findSourceMapURL,"changePlanAction");e.s(["changePlanAction",()=>n])},150557,6496,947183,e=>{"use strict";var t=e.i(509473),n=e.i(899002),r=e.i(743124),i=e.i(152076),o=e.i(558240);let a=(0,r.forwardRef)((e,t)=>{var a;let{container:s=null==globalThis||null==(a=globalThis.document)?void 0:a.body,...l}=e;return s?i.default.createPortal((0,r.createElement)(o.Primitive.div,(0,n.default)({},l,{ref:t})),s):null});var s=r;let l=e=>{let[n,r]=s.default.useState(0),i=s.default.useRef(null);return s.default.useEffect(()=>{i.current=document.body,r(e=>e+1)},[]),(0,t.jsx)(a,{container:i.current,...e})};l.displayName=a.displayName,e.s(["Portal",()=>l],150557);var c=e.i(358847),u=(0,c.createServerReference)("401afceb0864b01f011e9f473d09e1ccf7632c4582",c.callServer,void 0,c.findSourceMapURL,"createPaymentMethodAction");e.s(["createPaymentMethodAction",()=>u],6496);var d=c,p=(0,d.createServerReference)("408288d5d64fc54f9574576a534054e5154cc8325c",d.callServer,void 0,d.findSourceMapURL,"upsertPaymentMethodAction");e.s(["upsertPaymentMethodAction",()=>p],947183)},319961,e=>{"use strict";var t=e.i(932193);e.s(["CheckIcon",()=>t.default])},241123,e=>{"use strict";var t=e.i(484092);e.s(["PlusIcon",()=>t.default])},289610,e=>{"use strict";let t=(0,e.i(121793).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["default",()=>t])},70772,845142,e=>{"use strict";var t=e.i(509473),n=e.i(460816),r=e.i(743124),i=e.i(346970),o=e.i(74656),a=e.i(612630),s=e.i(150557),l=e.i(298515),c=e.i(403055),u=t,d=t,p=s,h=e.i(219041),f=e.i(6496),m=e.i(947183),g=o,v=e.i(230073),x=e.i(319961),y=e.i(241123),b=e.i(909270),w=r,j=e.i(402907),C=t,k=e.i(992879),S=e.i(289610),S=S;let N=["alipay","amex","diners","discover","elo","hipercard","jcb","maestro","mastercard","paypal","unionpay","visa"];function E(e){let{brand:t,width:n=14}=e;return N.includes(t)?(0,C.jsx)(k.default,{alt:"logo for ".concat(t),height:"20",src:"/assets/cardbrands/".concat(t,".svg"),width:n}):(0,C.jsx)(S.default,{})}var D=e.i(70165),I=e.i(868712);function A(e,t){switch(t.type){case"submit":return{...e,status:"submitting"};case"added":return{...e,status:"new-card"};case"go-to-add-new":return{...e,status:"add-new"};case"go-to-use-existing":return{...e,status:"use-existing",paymentMethod:t.paymentMethod}}}let T=[[302,383],[522,304],[1/0,227]];function M(e){var t,n;let{paymentMethod:r,noPrefix:i,billingDetails:o}=e,[a,s]=(0,w.useReducer)(A,r?{status:"use-existing",paymentMethod:r}:{status:"add-new"}),{windowSize:l}=(0,D.useWindowSize)(),c=null!=(n=null==(t=T.find(e=>{var t;return(null!=(t=l.width)?t:1e3)<e[0]}))?void 0:t[1])?n:230,u=(0,v.useStripe)(),h=(0,v.useElements)(),{toast:x}=(0,j.useToast)(),[y,b]=(0,w.useState)(!1),C=(0,I.useIsDark)(),k=(0,g.useImperativeForm)({action:f.createPaymentMethodAction}),S=(0,g.useImperativeForm)({action:m.upsertPaymentMethodAction}),N="add-new"===a.status,E=(0,w.useCallback)(async e=>{if(!N||!u||!h)return null;try{s({type:"submit"});let t=await h.submit();if(t.error)throw t.error;let{client_secret:n}=await k.submit(e?{teamSlug:e}:void 0),r=await u.confirmSetup({elements:h,clientSecret:n,redirect:"if_required",confirmParams:{return_url:window.location.href,payment_method_data:{allow_redisplay:"always",billing_details:o}}});if(r.error)throw r.error;if(r.setupIntent.payment_method){let t="string"==typeof r.setupIntent.payment_method?r.setupIntent.payment_method:r.setupIntent.payment_method.id,n=await S.submit({paymentMethod:t,...e?{teamSlug:e}:void 0});return s({type:"added"}),n.paymentMethod}}catch(e){var t;null==(t=h.getElement("card"))||t.focus(),s({type:"go-to-add-new"}),L(x,e)}return null},[k,h,N,u,x,S]);return(0,w.useMemo)(()=>{switch(a.status){case"use-existing":return{status:"use-existing",form:(0,d.jsx)(P,{onAddNewCard:()=>s({type:"go-to-add-new"}),paymentMethod:a.paymentMethod,noPrefix:i})};case"add-new":case"submitting":case"new-card":return{status:a.status,form:(0,d.jsxs)("div",{style:{backgroundColor:C?"black":"white",...y?{minHeight:"".concat(c,"px")}:{height:"".concat(c,"px")}},children:[(0,d.jsx)(v.PaymentElement,{onReady:()=>b(!0),options:{terms:{card:"never"},wallets:{googlePay:"never",applePay:"never"},defaultValues:{billingDetails:o?{name:o.name,email:o.email}:void 0}}}),(0,d.jsxs)(p.Portal,{children:[(0,d.jsx)("form",{...k.props}),(0,d.jsx)("form",{...S.props})]})]}),submit:E,useExisting:r?()=>s({type:"go-to-use-existing",paymentMethod:r}):void 0}}},[a.status,a.paymentMethod,y,c,k.props,S.props,E,i,r])}function L(e,t){let{code:n,message:r}=Object(t),i=!n;throw e({description:i?"An unknown error occurred. Please contact support.":r,action:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.ToastAction,{altText:"Dismiss",variant:i?"secondary":"default",children:"Dismiss"}),i?(0,d.jsx)(h.ToastAction,{altText:"Contact Support",asChild:!0,children:(0,d.jsx)(b.default,{href:"https://vercel.com/help",target:"_blank",children:"Contact Support"})}):null]}),duration:1/0,variant:"destructive"}),t}function P(e){let{paymentMethod:t,onAddNewCard:n,noPrefix:r}=e;return(0,d.jsxs)("div",{className:"flex flex-col gap-4",children:[r?null:(0,d.jsx)("div",{className:"text-sm",children:"Use your Vercel account's default payment method or add a new one."}),(0,d.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-blue-700 bg-white p-4",children:[(0,d.jsxs)("span",{className:"flex items-center gap-4 text-sm",children:[(0,d.jsx)(E,{brand:t.brand}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"text-xs",children:"••••"}),(0,d.jsx)("span",{children:t.last4})]})]}),(0,d.jsx)(x.CheckIcon,{className:"h-4 w-4 rounded-full bg-blue-700 p-0.5 text-white",size:16})]}),(0,d.jsxs)("button",{className:"flex items-center gap-2 text-sm text-blue-700",onClick:n,type:"button",children:[(0,d.jsx)(y.PlusIcon,{size:16}),(0,d.jsx)("span",{children:"Use a different payment method"})]})]})}e.s(["useChoosePaymentMethod",()=>M],845142);var R=e.i(926788),_=e.i(176248),O=e.i(707827),F=r,B=e.i(53223),V=e.i(667660),z=e.i(127169);function H(e){let{disabled:t,onPaymentSelected:n,paymentMethod:r,onBack:i,description:o,willCharge:a,onPaymentMethodAdded:s}=e,{user:l}=(0,V.useActiveScope)(),c=M({paymentMethod:r,billingDetails:l?{name:l.name,email:l.email}:void 0}),d=(0,F.useRef)(null),p=t||"submitting"===c.status,h="Add Card"+(a?" and Pay":"");"use-existing"===c.status&&(h="Confirm"+(a?" and Pay":""));let f=async()=>{try{if("add-new"===c.status){let e=await c.submit();e&&(null==s||s(e))}null==n||n()}catch(e){if("object"==typeof e&&null!==e&&"type"in e){let{type:t,code:n,decline_code:r,param:i,doc_url:o}=e;(0,B.track)("BillingNewPaymentMethodStripeError",{type:t,code:n,declineCode:r,param:i,docUrl:o})}}};return(0,z.useShortcut)(e=>{"Escape"===e.key&&i(),"Enter"===e.key&&f()}),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"grid h-fit px-4",ref:d,children:[c.form,(0,u.jsx)("div",{className:"bottom-0 mb-2 mt-4 text-sm text-gray-500",children:null!=o?o:(0,u.jsxs)(u.Fragment,{children:['By clicking on "',h,'" you will link the new payment method to your Vercel account']})})]}),(0,u.jsxs)(R.DialogFooter,{className:"flex flex-col-reverse gap-2 px-4 py-0 md:flex-row md:justify-between",children:[(0,u.jsx)(_.Button,{className:"w-full md:w-auto",disabled:p,onClick:()=>{"add-new"===c.status&&c.useExisting?c.useExisting():i()},size:"sm",variant:"secondary",children:"Cancel"}),(0,u.jsxs)(_.Button,{disabled:p,onClick:f,size:"sm",children:[p?(0,u.jsx)(O.Spinner,{size:14}):null,h]})]})]})}e.i(563948);var U=e.i(407562),G=e.i(396407),W=e.i(979865),q=r;function Z(e,t){switch(t.type){case"set-payment-method":if(!e)return e;return{...e,paymentMethod:t.paymentMethod};case"set-billing-details":return t.billingDetails}}function K(e){let[t,n]=(0,q.useOptimistic)(e,Z);return{billingDetails:t,optimisticSetPaymentMethod:e=>{(0,q.startTransition)(()=>{n({type:"set-payment-method",paymentMethod:e})})},optimisticSetBillingDetails:e=>{(0,q.startTransition)(()=>{n({type:"set-billing-details",billingDetails:e})})}}}var $=e.i(686832),Y=e.i(206037),J=V;function Q(){let{data:e,mutate:t}=(0,i.default)("paymentDialogOpen",null,{fallbackData:null});return{paymentDialogOpen:!!e,selectedPlan:e,setPaymentDialogPlan:t}}function X(e){let{billingPromise:i,onBack:u}=e,d=(0,W.useRouter)(),{isActiveScopeReady:p,isTeam:h,user:f}=(0,J.useActiveScope)(),{update:m}=(0,Y.usePlanInfo)(p&&!h,null==f?void 0:f.id),g=(0,o.useImperativeForm)({action:a.changePlanAction,additionalFields:{source:"chat"}}),{paymentDialogOpen:v,selectedPlan:x,setPaymentDialogPlan:y}=Q(),b=(0,r.use)(i),{billingDetails:w,optimisticSetBillingDetails:j,optimisticSetPaymentMethod:C}=K(b[0].ok?b[0].value:null),k=(0,r.useMemo)(()=>b[1].ok?b[1].value:[],[b]),S=(0,r.useMemo)(()=>k.find(e=>"v0-level3"===e.slug),[k]);(0,r.useEffect)(()=>()=>void y(null),[y]);let N=x&&"v0-level3"===x?S:null,E=(0,r.useCallback)(async()=>{if(N)try{let e=await g.submit({planSlug:N.slug,entitlement:"messages",entitlementFromCurrentSession:"yes"});j(e),m(),U.toast.success("Upgraded plan successfully.")}catch(n){let e=(0,G.codeFromError)(n);"no_active_subscription"===e||"already_on_plan"===e?d.refresh():U.toast.error((0,t.jsx)(G.ErrorMessage,{code:e,variant:"unstyled"}),{duration:5e3})}finally{y(null)}},[g,m,j,d,y,N]),D=(0,r.useMemo)(()=>N?(0,t.jsx)(H,{description:(0,t.jsxs)(t.Fragment,{children:["By clicking on Confirm you'll start your"," ",N.name," plan subscription of"," ",(0,t.jsxs)("span",{className:"font-medium text-black",children:[(0,l.formatPlanTotalPrice)(N),"/month,"]})," ","with a renewal date of the"," ",(0,t.jsxs)("span",{className:"font-medium text-black",children:[(0,c.formatOrdinalSuffix)(new Date().getDate())," of each month"]}),"."]}),disabled:"submitting"===g.status,onBack:()=>{null==u||u(),y(null)},onPaymentMethodAdded:C,onPaymentSelected:E,paymentMethod:null==w?void 0:w.paymentMethod,willCharge:!0}):null,[null==w?void 0:w.paymentMethod,g.status,u,E,C,y,N]);return w?(0,t.jsxs)(n.StripeProvider,{mode:w.settings.mode,children:[(0,t.jsx)($.Modal,{onOpenChange:e=>e?y(null==N?void 0:N.slug):y(null),open:v,children:(0,t.jsxs)($.ModalContent,{className:"flex flex-col gap-6 md:px-2",children:[(0,t.jsxs)($.ModalTitle,{className:"px-3",children:["Subscribing to"," ",(null==N?void 0:N.slug)==="v0-platinum"?(0,t.jsx)("span",{children:"Ultra"}):(0,t.jsx)("span",{children:"Premium"}),(0,t.jsx)("span",{children:" plan"})]}),D]})}),(0,t.jsx)(s.Portal,{children:(0,t.jsx)("form",{...g.props})})]}):null}e.s(["PaymentDialog",()=>X,"usePaymentDialog",()=>Q],70772)},109792,901238,e=>{"use strict";var t=e.i(358847),n=(0,t.createServerReference)("7fb1b9d96946dbb155e6c6ef150b0f5d66b1cd9e29",t.callServer,void 0,t.findSourceMapURL,"detectUserVercelUsage");e.s(["detectUserVercelUsage",()=>n],109792);var r=t,i=(0,r.createServerReference)("7f07b6f96b37141965a3d992b1b9b14f2f94f021bc",r.callServer,void 0,r.findSourceMapURL,"updateTeamDetails");e.s(["updateTeamDetails",()=>i],901238)},458098,(e,t,n)=>{},287089,e=>{e.v({jiggle:"redeem-code-modal-module__RfT0iq__jiggle"})},511969,642969,485614,e=>{"use strict";e.s(["UpgradePlanDialog",()=>_],511969);var t=e.i(509473),n=e.i(743124),r=e.i(176248),i=e.i(206037),o=e.i(936990),a=e.i(909270),s=e.i(28223),l=e.i(70772),c=e.i(762585),u=e.i(745197),d=e.i(696871),p=e.i(686832),h=e.i(667660),f=e.i(644471),m=e.i(298515),g=e.i(543017),v=e.i(109792),x=e.i(120485);e.i(563948);var y=e.i(407562),b=e.i(763480),w=e.i(901238),j=e.i(707974),C=e.i(230766),k=e.i(918823),S=e.i(775883),N=e.i(979865),E=e.i(53223),D=e.i(242759),I=e.i(304649),A=e.i(120945),T=e.i(37737),M=e.i(675120);e.i(458098);let L=e=>((null==e?void 0:e.balance.remaining)||0)+((null==e?void 0:e.onDemand.balance)||0),P={"v0-platinum":{bullets:[]},"v0-level0":{bullets:["$5 of usage credit per month","Deploy to Vercel","Sync with GitHub","Create up to 200 projects"]},"v0-level3":{bullets:["$20 of usage credit per month","Purchase additional credits outside your monthly limits","Unlimited projects","Access to v0-1.5-lg and v0 API"]},"v0-team":{bullets:["$30 of usage credit per user per month","Share chats and collaborate with your team","Centralized billing on Vercel","Purchase credits shared across your team"]},"v0-enterprise":{bullets:["Custom credit limits","Training opt-out by default","Dedicated Customer Support","SAML SSO"]}},R=1048576;function _(e){let{planSlug:f,customTitle:m}=e,[g]=(0,u.useRateLimit)(),k=g&&g.remaining<=0,{activeScope:S,scopes:I,refreshScopes:_,isActiveScopeReady:F}=(0,h.useActiveScope)(),[U,G]=(0,n.useState)("plans"),[W,q]=(0,n.useState)(void 0),Z=(0,n.useMemo)(()=>null==I?void 0:I.find(e=>e.id===W),[I,W]),[K,$]=(0,n.useState)(null==Z?void 0:Z.avatar),Y=(0,n.useRef)(null),{setPaymentDialogPlan:J}=(0,l.usePaymentDialog)(),[Q,X]=(0,n.useTransition)(),ee=(0,N.useRouter)(),{planInfo:et,planSlug:en}=(0,i.usePlanInfo)(!0,null==S?void 0:S.id,!1),{planInfo:er,isLoading:ei}=(0,o.useTokenBillingPlanInfo)(),eo=(0,n.useMemo)(()=>{var e;return"v0-team"===en?null==et||null==(e=et.plans)?void 0:e.filter(e=>"v0-team"===e.slug||"v0-enterprise"===e.slug):null==et?void 0:et.plans},[en,et]),[ea,es]=(0,n.useState)(f),{tbb:el}=(0,D.useFlags)(),ec=el?L(er):0,eu=(0,n.useMemo)(()=>{if(m)return m;let e=el&&ec<=d.MINIMUM_CREDITS_TO_SEND_MESSAGE;return"plans"===U?k?el?"You are out of monthly credits":"Message Limit Reached":el?e?"You are out of credits":"Explore More Plans":"Upgrade Plan":"Confirm your Team's Details"},[m,el,ec,U,k]),ed=(0,n.useMemo)(()=>{if("plans"===U){if(void 0===g&&!el)return(0,t.jsx)(c.Skeleton,{className:"h-4 w-full"});let e=[];if(en){let n=d.PLAN_SLUG_TO_PLAN_NAME[en],r=ea?d.PLAN_SLUG_TO_PLAN_NAME[ea]:void 0;if(el)return(0,t.jsxs)(p.ModalDescription,{children:["You are currently on the v0 ",n," plan. Upgrade or start a new plan for monthly credit limits."]});k?(e.push("You have reached the message limit on the v0 ".concat(n," plan.")),"v0-team"===ea||"v0-enterprise"===ea?e.push("Start a v0 ".concat(r," plan for higher message limits.")):"v0-enterprise"!==en&&e.push("Upgrade ".concat(r?"to v0 ".concat(r," "):"","for higher message limits."))):e.push("You're currently on the v0 ".concat(n," plan."))}return(0,t.jsx)(p.ModalDescription,{children:e.map((e,n)=>(0,t.jsx)("p",{children:e},n))})}return"team-details"===U?(0,t.jsx)(p.ModalDescription,{children:"Edit your Team's avatar and name."}):null},[U,el,g,en,k,ea]),ep=(0,n.useCallback)(e=>{J(e),(0,T.closeDialog)()},[J]),eh=(0,n.useCallback)(e=>{X(async()=>{if(!W)return;let t=e.get("team-name");if(!t)return void y.toast.error("Team name is required");let n=e.get("team-avatar"),r=await H(n);!0===await (0,w.updateTeamDetails)({teamId:W,name:t,avatar:n,avatarSha:r})?(_(),y.toast.success("Team details configured"),$(void 0),G("plans"),ee.push("/chat/upgrade?teamId=".concat(W,"&premium=").concat("v0-level3"===en)),q(void 0),(0,T.closeDialog)()):y.toast.error("Failed to update team details. Please try again.")})},[W,en,_,ee]),ef=(0,n.useCallback)(()=>{if(ea&&(0,E.track)("ClickUpgradeModalButton",{targetPlan:ea}),"plans"===U&&(("v0-level3"===ea||"v0-platinum"===ea)&&ep(ea),"v0-team"===ea&&X(async()=>{let e=await (0,v.detectUserVercelUsage)();if("error"in e){let t=Error(e.error);(0,x.handleChatError)(t)||y.toast.error("Failed to start team plan. Please try again.")}else{let{type:t,recommendedTeamId:n}=e;n&&ee.prefetch("/chat/upgrade?teamId=".concat(n)),"new"===t?(q(n),G("team-details")):(ee.push("/chat/upgrade?teamId=".concat(n)),(0,T.closeDialog)())}})),"team-details"===U){var e;null==(e=Y.current)||e.requestSubmit()}},[U,ep,ee,ea]),em=(0,n.useCallback)(e=>{if(e.size>=R)return void y.toast.error("File size is too large. Please upload a file smaller than 1MB.");$(URL.createObjectURL(e))},[$]);return((0,n.useEffect)(()=>{if(f)return es(f);es(B(eo,en))},[eo,en,f]),!eo||!F||el&&ei)?null:(0,t.jsxs)(A.AtomicDialog,{type:"upgradePlan",children:[(0,t.jsxs)(p.ModalHeader,{children:[(0,t.jsx)(p.ModalTitle,{children:eu}),ed]}),(0,t.jsxs)(p.ModalContent,{className:"max-sm:items-center flex flex-col gap-3 overflow-hidden","data-testid":"upgrade-modal-content",children:["plans"===U&&"v0-enterprise"!==en?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O,{plans:eo,selectedPlan:ea,setSelectedPlan:e=>es(e),children:el?(0,t.jsx)("div",{className:"mt-1 flex flex-col",children:(0,t.jsx)(V,{currentStep:U,isPending:Q,onClick:ef,selectedPlan:ea,currentPlan:en})}):null}),(0,t.jsxs)("p",{className:"flex gap-1 text-center text-sm text-v0-gray-900",children:["Compare plans and options on our",(0,t.jsxs)(a.default,{className:"flex items-center gap-x-1 text-v0-blue-700",href:"/pricing",onClick:()=>(0,T.closeDialog)(),children:["pricing page ",(0,t.jsx)(s.ExternalLink,{className:"size-3"})]}),"."]}),(0,t.jsx)(M.TransitionNode,{renderKey:ea,children:el||!ea||["v0-level0","v0-team","v0-enterprise"].includes(ea)||en===ea?null:(0,t.jsxs)("div",{className:"rounded-lg bg-v0-blue-100 p-2 pl-3 text-sm text-v0-blue-800",children:["v0 is a Vercel product, but has separate plans and pricing. Your"," ",(0,t.jsxs)("span",{className:"font-medium",children:["v0 ",P[ea].label]})," ","subscription is billed independently of the"," ",(0,t.jsx)(a.default,{className:"inline-flex items-center gap-x-1 underline",href:"https://vercel.com/pricing",target:"_blank",children:"Vercel plans"})," ","and is non-refundable."]})})]}):null,"team-details"===U?(0,t.jsxs)("form",{action:eh,className:"flex flex-col gap-6",ref:Y,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[K?(0,t.jsx)(C.Avatar,{rounded:!0,className:"size-20",children:(0,t.jsx)(C.AvatarImage,{alt:"Uploaded team avatar",className:"aspect-auto",src:K,title:"Uploaded team avatar"})},"uploaded-avatar-image"):(0,t.jsx)(C.AvatarUser,{rounded:!0,className:"size-20",teamId:null==Z?void 0:Z.id}),(0,t.jsx)(z,{uploading:Q,onChange:em})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(j.Label,{htmlFor:"team-name",children:"Team Name"}),(0,t.jsx)(b.Input,{id:"team-name",name:"team-name",required:!0,maxLength:256,minLength:1})]})]}):null]}),el?null:(0,t.jsxs)(p.ModalFooter,{className:"border-v0-gray-300 bg-v0-background-200 border-t p-4!",children:[(0,t.jsx)(r.Button,{onClick:()=>{"team-details"===U?G("plans"):(0,T.closeDialog)()},size:"sm",type:"button",variant:"secondary",children:"team-details"===U?"Back":"Cancel"}),(0,t.jsx)(V,{currentStep:U,isPending:Q,onClick:ef,selectedPlan:ea,currentPlan:en})]})]})}let O=e=>{let{plans:n,selectedPlan:r,setSelectedPlan:i,children:o}=e,{tbb:a}=(0,D.useFlags)(),s=(null==n?void 0:n.filter(e=>"v0-platinum"!==e.slug))||[],l=a&&"v0-platinum"===r?"v0-level3":r;return(0,t.jsxs)(f.Tabs,{className:"flex w-full flex-col gap-4",onValueChange:i,value:l,children:[(0,t.jsx)(f.TabsList,{className:"grid h-fit",style:{gridTemplateColumns:"repeat(".concat(s.length,", 1fr)")},children:s.map(e=>(0,t.jsx)(f.TabsTrigger,{value:e.slug,children:e.name},e.slug))}),s.map(e=>(0,t.jsx)(f.TabsContent,{value:e.slug,children:(0,t.jsxs)("div",{className:(0,I.cn)("bg-v0-background-200 border-v0-alpha-400 flex flex-col gap-4 rounded-sm border p-4 text-sm",{"h-72":!a}),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("h1",{className:"text-base font-semibold",children:["v0 ",e.name]}),(0,t.jsx)(F,{plan:e})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[e.slug in P?(0,t.jsx)("p",{className:"font-semibold",children:P[e.slug].title}):null,(0,t.jsx)("ul",{className:"flex flex-col gap-3",children:e.slug in P?P[e.slug].bullets.map(e=>(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Check,{size:20}),e]},e)):null})]}),o]})},e.slug))]})},F=e=>{let{plan:n}=e,{tbb:r}=(0,D.useFlags)(),i="v0-enterprise"===n.slug,o="v0-team"===n.slug,a=i?void 0:(0,m.formatPlanTotalPrice)(n),s=i?void 0:o?"/user/month":"/month";return r&&i?(0,t.jsx)("div",{className:"flex items-center gap-1 text-xl font-semibold",children:"Custom Pricing"}):i?null:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-xl font-semibold",children:a}),(0,t.jsx)("span",{className:"align-text-bottom text-sm leading-7 text-v0-gray-900",children:s})]})},B=(e,t)=>{if(!e||!t)return;let n=e.find(e=>e.slug===t),r=(n?e.indexOf(n):0)+1;if("v0-level0"===t){let t=e.findIndex(e=>"v0-team"===e.slug);-1!==t&&(r=t)}let i=e[r];return i?i.slug:void 0},V=e=>{let{currentPlan:n,isPending:i,selectedPlan:o,onClick:s,currentStep:l}=e,{tbb:c}=(0,D.useFlags)(),u=(0,S.usePlanLabelMap)();if(!o)return null;if(o===n)return(0,t.jsx)(r.Button,{disabled:!0,size:"sm",children:"Current Plan"});if("v0-level0"===o)return(0,t.jsx)(r.Button,{className:"w-full md:w-auto",size:"sm",onClick:()=>(0,E.track)("ClickDowngradeModalButton",{targetPlan:"v0-level0"}),asChild:!0,type:"button",variant:"secondary",children:(0,t.jsx)(a.default,{href:"/subscription?from=chat",children:"Downgrade Plan"})});if("v0-level3"===o&&"v0-platinum"===n)return(0,t.jsx)(r.Button,{className:"w-full md:w-auto",size:"sm",onClick:()=>(0,E.track)("ClickDowngradeModalButton",{targetPlan:"v0-level3"}),asChild:!0,type:"button",variant:"secondary",children:(0,t.jsx)(a.default,{href:"/subscription?from=chat",children:"Downgrade Plan"})});if("v0-enterprise"===o)return(0,t.jsx)(r.Button,{onClick:()=>(0,E.track)("ClickUpgradeModalButton",{targetPlan:"v0-enterprise"}),className:"w-full md:w-auto",size:"sm",asChild:!0,type:"button",children:(0,t.jsx)(a.default,{href:d.CONTACT_SALES_LINK,children:"Contact Sales"})});if("v0-team"===o){let e=c?"Start a Team Plan":"Start a v0 ".concat(u[o].label," Plan");return(0,t.jsx)(r.Button,{className:"w-full md:w-auto",disabled:i,onClick:s,size:"sm",type:"button",children:"plans"===l?e:"Continue to Payment"})}return(0,t.jsxs)(r.Button,{disabled:n===o,onClick:s,size:"sm",children:["Upgrade to v0 ",u[o].label]})},z=e=>{let{uploading:n,onChange:i}=e;return(0,t.jsx)(r.Button,{asChild:!0,size:"sm",variant:"secondary",children:(0,t.jsxs)("label",{"data-id":"team-avatar-upload",htmlFor:"team-avatar",children:[(0,t.jsx)("input",{className:"sr-only","data-enable-grammarly":"false","data-gramm":"false","data-gramm_editor":"false",disabled:n,id:"team-avatar",name:"team-avatar",onChange:e=>{var t;e.preventDefault();let n=null==(t=e.target.files)?void 0:t[0];n&&i(n)},accept:"image/png,image/jpeg",type:"file"}),(0,t.jsx)(k.CloudUpload,{}),"Upload Photo"]})})};function H(e){return new Promise(t=>{let n=new FileReader;n.addEventListener("load",e=>{let{target:n}=e;(null==n?void 0:n.result)instanceof ArrayBuffer&&crypto.subtle.digest("SHA-1",n.result).then(e=>{t(U(e))}).catch(e=>console.error(e))}),n.readAsArrayBuffer(e)})}function U(e){let t=[],n=new DataView(e);for(let e=0;e<n.byteLength;e+=4){let r=n.getUint32(e).toString(16),i="00000000",o=(i+r).slice(-i.length);t.push(o)}return t.join("")}e.s(["AddPaymentMethodDialog",()=>ee],642969);var G=t,W=h,q=e.i(845142),Z=e.i(460816),K=p,$=A;e.i(904347);var Y=T,J=r,Q=e.i(307778),X=y;function ee(e){let{paymentMethod:t}=e,{user:n}=(0,W.useActiveScope)(),r=(null==n?void 0:n.billingMode)==="test"?"test":"live",i=n?{name:n.name,email:n.email}:void 0;return(0,G.jsx)(Z.StripeProvider,{mode:r,children:(0,G.jsx)(et,{paymentMethod:t,billingDetails:i})})}function et(e){let{paymentMethod:t,billingDetails:n}=e,r=(0,q.useChoosePaymentMethod)({paymentMethod:t,noPrefix:!0,billingDetails:n}),i=async()=>{if("add-new"===r.status&&await r.submit())return X.toast.success("New Payment Method added."),(0,Y.closeDialog)()},o=()=>{if("add-new"===r.status&&r.useExisting)return void r.useExisting();(0,Y.closeDialog)()};return(0,G.jsxs)($.AtomicDialog,{type:"addPaymentMethod",children:[(0,G.jsx)(K.ModalHeader,{children:(0,G.jsx)(K.ModalTitle,{children:"Choose New Payment Method"})}),(0,G.jsx)(K.ModalContent,{children:r.form}),(0,G.jsxs)(K.ModalFooter,{children:[(0,G.jsx)(J.Button,{type:"button",variant:"secondary",onClick:o,disabled:"submitting"===r.status,children:"add-new"===r.status&&t?"Back":"Cancel"}),(0,G.jsxs)(J.Button,{type:"button",onClick:i,disabled:"add-new"!==r.status,children:["submitting"===r.status?(0,G.jsx)(Q.IconSpinner,{}):null,(0,G.jsx)("span",{children:"Add New Payment Method"})]})]})]})}e.s(["RedeemCodeDialog",()=>em],485614);var en=t,er=n,ei=r,eo=b,ea=e.i(358847),es=(0,ea.createServerReference)("400d210e10a52be9c89b82e09cbdd02372e0c345e0",ea.callServer,void 0,ea.findSourceMapURL,"claimUsageCode"),el=A,ec=T,eu=p,ed=e.i(607391),ep=e.i(337034),eh=e.i(660348),ef=e.i(287089);function em(){let[e,t]=(0,er.useState)(""),[n,r]=(0,er.useState)(!1),[i,o]=(0,er.useState)(null),[a,s]=(0,er.useState)(!1),l=(0,er.useRef)(null);(0,er.useEffect)(()=>{let e=setTimeout(()=>{l.current&&l.current.focus()},150);return()=>clearTimeout(e)},[]);let c=async t=>{t.preventDefault(),r(!0),o(null);try{let t=await es(e);o(t),t.success||(s(!0),setTimeout(()=>s(!1),250))}catch(e){o({success:!1,message:e instanceof Error?e.message:"Failed to claim code"}),s(!0),setTimeout(()=>s(!1),250)}finally{r(!1)}},u=()=>{(0,ec.closeDialog)(),setTimeout(()=>{t(""),o(null)},300)};return(0,en.jsxs)(el.AtomicDialog,{type:"redeemCode",children:[(0,en.jsx)("div",{className:"flex flex-col px-4 pt-4",children:(0,en.jsx)("div",{className:"flex items-center justify-center p-4 bg-v0-background-200 rounded-md border border-v0-alpha-400 h-[240px]",children:(0,en.jsx)("div",{className:"w-[250px] relative transition-all duration-500 ".concat(a?ef.default.jiggle:""," ").concat((null==i?void 0:i.success)?"scale-105":""),style:{transform:(null==i?void 0:i.success)?"rotate(-3deg) scale(1.05)":a?"translateX(-2px)":"translateX(0px)"},children:(0,en.jsx)(ep.CreditCard,{amount:(null==i?void 0:i.success)?Number(i.credits).toFixed(2):"0.00",handle:"Gifted Credits"})})})}),(0,en.jsxs)(eu.ModalHeader,{className:"!pb-4 gap-1",children:[(0,en.jsx)(eu.ModalTitle,{children:(null==i?void 0:i.success)?"You claimed $".concat(Number(i.credits).toFixed(2)," in credits!"):"Redeem a Usage Code"}),(0,en.jsx)(eu.ModalDescription,{children:(null==i?void 0:i.success)?"Your credits will be ready to use immediately. Happy prompting!":"If you have a Usage Code for v0, you can enter it here to add credits to your account."})]}),!(null==i?void 0:i.success)&&(0,en.jsx)(eu.ModalContent,{children:(0,en.jsxs)("form",{id:"redeem-form",onSubmit:c,className:"space-y-2",children:[(0,en.jsx)(eo.Input,{ref:l,id:"code",value:e,onChange:e=>t(e.target.value.trim()),placeholder:"Enter a code",required:!0,disabled:n,className:i&&!i.success?"border-v0-red-700 ring-3 ring-v0-red-200 focus-within:border-v0-red-800 rounded-md":"rounded-md"}),i&&!i.success&&(0,en.jsxs)("span",{className:"flex items-center gap-2 whitespace-nowrap text-v0-red-700",children:[(0,en.jsx)(eh.Stop,{className:"h-4 w-4 shrink-0"}),(0,en.jsx)("span",{className:"truncate text-sm",children:i.message})]})]})}),(0,en.jsx)(eu.ModalFooter,{className:"bg-v0-background-200 border-t border-v0-alpha-400",children:(null==i?void 0:i.success)?(0,en.jsx)(ei.Button,{type:"button",onClick:u,size:"sm",className:"rounded-md",children:"Start Building"}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(ei.Button,{type:"button",variant:"secondary",onClick:u,disabled:n,size:"sm",className:"rounded-md",children:"Cancel"}),(0,en.jsx)(ei.Button,{type:"submit",form:"redeem-form",disabled:n,size:"sm",className:"rounded-md",children:(0,en.jsx)(ed.ActionStatus,{loading:"Verifying",isLoading:n,children:"Redeem"})})]})})]})}},199814,e=>{"use strict";e.s(["ChatForkBlockDialog",()=>w]);var t=e.i(509473),n=e.i(743124),r=e.i(176248),i=e.i(763480);e.i(563948);var o=e.i(407562),a=e.i(686832),s=e.i(120945),l=e.i(53223),c=e.i(796669),u=e.i(120485),d=e.i(979865),p=e.i(297239),h=e.i(323194),f=e.i(32170),m=e.i(707827),g=e.i(37737),v=e.i(209819),x=e.i(70165),y=e.i(646805);let b="production";function w(e){let{page:w,canWriteToChat:j,blockId:C,actionType:k="duplicate"}=e,{expectUser:S,user:N}=(0,f.useUser)(),{setShowSignInDialog:E}=(0,h.useSignInDialog)(),D=(0,d.useRouter)(),I=(0,p.useT)(),{title:A}=(0,v.useChatMetadata)(),T=(0,x.useIsMobile)(),M=(0,n.useRef)(null),[L,P]=(0,n.useTransition)(),R=(0,n.useMemo)(()=>{let e=A||"Untitled Chat",t=String("duplicate"===k?I("duplicateBlockButton.prefix"):I("remixBlockButton.prefix")),n=e.startsWith(t)?e.slice(t.length):e,r="".concat(t).concat(n);return r.length>100?"".concat(r.slice(0,97),"..."):r},[A,k,I]),[_,O]=(0,n.useState)(R);(0,n.useEffect)(()=>{setTimeout(()=>{var e,t;null==(e=M.current)||e.focus(),T||null==(t=M.current)||t.select()},0)},[T]);let F=(0,n.useCallback)(()=>{if(!_.trim())return void o.toast.error("Please enter a fork name");if(!j&&(null==N?void 0:N.isAdminMode)&&!window.confirm("[V0 ADMIN] Are you sure you want to fork this block?"))return;let e=new URLSearchParams;e.set("forkBlockId",C);let t="http://localhost:3000/chat";"production"===b&&(t="https://v0.app/chat");let n="".concat(t,"?").concat(e.toString());if(!S)return E({content:!1,forkBlockId:C});(0,l.track)("ClickForkBlock");try{P(async()=>{if("chat"===w){let e=await (0,c.forkBlock)(C,void 0,_.trim(),void 0,k);if(!e||"string"!=typeof e)return void o.toast.error("duplicate"===k?I("duplicateBlockButton.errorToast"):I("remixBlockButton.errorToast"));let t=new URLSearchParams(window.location.search).get("assignBranch"),n=t?"/chat/".concat(e,"?assignBranch=").concat(encodeURIComponent(t)):"/chat/".concat(e);D.push(n)}if(o.toast.success("duplicate"===k?I("duplicateBlockButton.successToast"):I("remixBlockButton.successToast")),"block"===w){var e;null==(e=window.open(n,"_blank"))||e.focus()}(0,g.closeDialog)()})}catch(e){(0,d.unstable_rethrow)(e),console.log(e),(0,u.handleChatError)(e)||o.toast.error("duplicate"===k?I("duplicateBlockButton.errorToast"):I("remixBlockButton.errorToast"))}},[_,j,null==N?void 0:N.isAdminMode,C,S,E,w,I,k,D]),B=(0,n.useCallback)(e=>{e.preventDefault(),F()},[F]),V=(0,n.useCallback)(e=>{"Enter"===e.key&&!L&&_.trim()&&(e.preventDefault(),F())},[F,L,_]),z=(0,n.useMemo)(()=>L?(0,t.jsx)(m.Spinner,{className:"size-4! text-v0-gray-900",size:16}):"duplicate"===k?(0,t.jsx)(y.Duplicate,{className:"size-4!"}):(0,t.jsx)(y.Remix,{className:"size-4!"}),[L,k]);return(0,t.jsxs)(s.AtomicDialog,{type:"forkBlock",children:[(0,t.jsxs)(a.ModalHeader,{children:[(0,t.jsx)(a.ModalTitle,{children:"duplicate"===k?I("duplicateBlockButton.duplicate"):I("remixBlockButton.remix")}),(0,t.jsxs)(a.ModalDescription,{children:[(0,t.jsx)("p",{className:"text-v0-gray-1000 text-label-14 mb-4",children:"duplicate"===k?I("duplicateBlockButton.modalDescription"):I("remixBlockButton.modalDescription")}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"forkName",className:"text-sm font-medium text-v0-gray-1000",children:"New chat name"}),(0,t.jsx)(i.Input,{id:"forkName",ref:M,value:_,onChange:e=>O(e.target.value),onKeyDown:V,placeholder:"Enter fork name",disabled:L,className:"w-full",maxLength:100,autoFocus:!0})]})]})]}),(0,t.jsxs)("div",{className:"bg-v0-background-200 border-v0-alpha-400 flex w-full items-center justify-end gap-2 border-t p-4",children:[(0,t.jsx)(a.ModalClose,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"secondary",size:"sm",children:"duplicate"===k?I("duplicateBlockButton.cancel"):I("remixBlockButton.cancel")})}),(0,t.jsxs)(r.Button,{className:"fork-button",size:"sm",onClick:B,disabled:L||!_.trim(),children:[z,"duplicate"===k?I("duplicateBlockButton.duplicate"):I("remixBlockButton.remix")]})]})]})}},366021,771539,786887,e=>{"use strict";e.s(["ScopeDisplayText",()=>P,"ScopeListItem",()=>L,"TransferOwnershipModal",()=>R],366021);var t=e.i(509473),n=e.i(686832),r=e.i(176248);e.s(["TransferOwnershipSetting",()=>c,"useTransferOwnershipModal",()=>l],771539);var i=t,o=e.i(199929),a=r,s=e.i(346970);function l(){let{data:e,mutate:t}=(0,s.default)("transferOwnershipModal",null,{fallbackData:!1});return{transferOwnershipModalOpen:e,setTransferOwnershipModalOpen:t}}function c(){let{setTransferOwnershipModalOpen:e}=l();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.SettingsItem,{children:[(0,i.jsxs)(o.SettingsItemContent,{children:[(0,i.jsx)(o.SettingsItemTitle,{children:"Transfer Data"}),(0,i.jsx)(o.SettingsItemDescription,{children:"Transfer your chats or projects to another team or account."})]}),(0,i.jsx)(o.SettingsItemAction,{children:(0,i.jsx)(a.Button,{size:"sm",variant:"secondary",className:"rounded-md h-7 px-2",onClick:()=>{e(!0)},children:"Start Transfer"})})]}),(0,i.jsx)(R,{})]})}var u=e.i(211976),d=e.i(743124),p=e.i(592258),h=e.i(230766),f=e.i(837062),m=e.i(906261),g=e.i(667660),v=e.i(206037),x=e.i(794593);e.i(563948);var y=e.i(407562),b=e.i(762585),w=e.i(358847),j=(0,w.createServerReference)("705e356983737b87432c78ba7d021b93cf9d4f626f",w.callServer,void 0,w.findSourceMapURL,"transferOwnershipAction");e.s(["transferOwnershipAction",()=>j],786887);var C=e.i(979865),k=e.i(827728),S=e.i(75356),N=e.i(707827);e.i(472428);var E=e.i(152641),D=e.i(543017),I=e.i(403055);let A="";function T(e){let{planSlug:n}=e,r={"v0-level0":{label:"Free",variant:void 0},"v0-level3":{label:"Premium",variant:"teal"},"v0-team":{label:"Team",variant:"blue"},"v0-enterprise":{label:"Enterprise",variant:"purple"},"v0-platinum":{label:"Ultra",variant:"teal"}}[n];return r?(0,t.jsx)(x.Badge,{variant:r.variant,children:r.label}):null}function M(e,t,n){return e.id!==(null==t?void 0:t.id)&&(!!(0,m.isUserScope)(e)||"v0-team"===n||"v0-enterprise"===n)}function L(e){let{scope:n,activeScope:r}=e,{planSlug:i}=(0,v.usePlanInfo)(!0,n.id);if(!M(n,r,i))return null;let o=(0,m.isUserScope)(n)?n.username:n.name;return(0,t.jsx)(p.SelectItem,{className:"flex w-full items-center justify-between gap-2",value:n.id,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.AvatarUser,{teamId:(0,m.isUserScope)(n)?void 0:n.id,userId:(0,m.isUserScope)(n)?n.id:void 0,className:"h-4 w-4"}),(0,t.jsx)("p",{children:o})]}),i&&(0,t.jsx)(T,{planSlug:i})]})})}function P(e){let{activeScope:n}=e;return n?(0,m.isUserScope)(n)?(0,t.jsxs)("span",{className:"inline-flex font-medium ",children:[n.username,"'s Account "]}):(0,t.jsxs)("span",{className:"inline-flex font-medium",children:[n.slug," "]}):(0,t.jsx)("span",{className:"mx-1 inline-flex align-middle",children:(0,t.jsx)(b.Skeleton,{className:"h-4 w-24"})})}function R(){let{transferOwnershipModalOpen:e,setTransferOwnershipModalOpen:i}=l(),[o,a]=(0,d.useState)(!1),{scopes:s}=(0,f.useScopes)(),[c,v]=(0,d.useState)(""),{activeScope:x}=(0,g.useActiveScope)(),b=(0,C.useRouter)(),[w,D]=(0,d.useState)(new Set),[I,T]=(0,d.useState)(!1),{count:R,increment:O,reset:F}=(0,k.useCounter)(1),B=(0,d.useRef)(null),V=(0,d.useRef)(null),[z,H]=(0,d.useState)([]),{data:U,isLoading:G}=(0,E.useServerQuerySWR)(["scoped","paginatedProjects"],{page:R,pageSize:S.PROJECT_PAGE_SIZE,searchText:""},{onSuccess(e){e&&(1===R?H(e):H(t=>[...t,...e]))}});function W(){q&&O()}(0,d.useEffect)(()=>{F()},[x]);let q=(0,d.useMemo)(()=>(null==U?void 0:U.length)===S.PROJECT_PAGE_SIZE,[null==U?void 0:U.length]);(0,d.useEffect)(()=>{if((null==s?void 0:s.length)&&!c){let e=s.find(e=>M(e,x));e&&v(e.id)}},[s,c,x]);let Z=null==s?void 0:s.find(e=>e.id===c),K=async()=>{a(!0);try{if(!x)throw Error("Active scope is null");if(!Z)throw Error("Selected team is null");let e=await j(x,Z,Array.from(w));if(e.error)throw e.error;y.toast.success("Ownership transferred successfully"),b.refresh(),D(new Set)}catch(e){y.toast.error("message"in e?e.message:"Failed to transfer ownership"),console.error("Failed to transfer ownership:",e)}finally{i(!1),a(!1)}};function $(e){D(t=>{if(e==A)return new Set([]);let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})}return(0,d.useEffect)(()=>{if(!I||!B.current||!V.current)return;let e=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&W()},{root:B.current});return e.observe(V.current),()=>{e.disconnect()}},[I]),(0,t.jsxs)(n.Modal,{open:e,onOpenChange:i,children:[(0,t.jsxs)(n.ModalHeader,{className:"space-y-2",children:[(0,t.jsx)(n.ModalTitle,{children:"Transfer Data"}),(0,t.jsxs)(n.ModalDescription,{children:["Transfer one or all of your projects and chats from"," ",(0,t.jsxs)("span",{className:"whitespace-nowrap",children:[(0,t.jsx)("span",{className:"ml-[-2px] inline-flex align-middle",children:(0,t.jsx)(h.AvatarUser,{teamId:(0,m.isUserScope)(x)||null==x?void 0:x.id,userId:(0,m.isUserScope)(x)?x.id:void 0,className:"ml-1 size-4 rounded-full"})})," ",(0,t.jsx)(P,{activeScope:x})]}),"to another account or team.\n          \n          Doing so will unlink any connected Vercel projects, so deployments and environment variables will not be\n          transferred."]})]}),(0,t.jsxs)(n.ModalContent,{className:"py-4 space-y-4",children:[(0,t.jsxs)(p.Select,{value:void 0,open:I,onOpenChange:T,children:[(0,t.jsx)(p.SelectTrigger,{className:"w-full",children:(0,t.jsx)(p.SelectValue,{placeholder:0==w.size?"All projects":"".concat(w.size," ").concat(w.size>1?"projects":"project"," selected")})}),(0,t.jsxs)(p.SelectContent,{className:"max-h-[250px] overflow-y-auto relative",ref:B,children:[(0,t.jsx)(_,{name:"All projects",id:A,checked:0==w.size,onClick:$}),z.map(e=>(0,t.jsx)(_,{name:e.name,id:e.projectId,checked:w.has(e.projectId),onClick:$},e.projectId)),q?(0,t.jsx)("div",{ref:V,className:"h-10 w-full pointer-events-none absolute"}):null,G?(0,t.jsx)("div",{className:"w-fit mx-auto",children:(0,t.jsx)(N.Spinner,{size:16})}):null]})]}),(0,t.jsxs)(p.Select,{value:c,onValueChange:v,children:[(0,t.jsx)(p.SelectTrigger,{className:"w-full",children:(0,t.jsx)(p.SelectValue,{placeholder:"Select a team or user..."})}),(0,t.jsx)(p.SelectContent,{className:"max-h-[250px] overflow-y-auto",children:null==s?void 0:s.map(e=>(0,t.jsx)(L,{scope:e,activeScope:x},e.id))})]})]}),(0,t.jsxs)(n.ModalFooter,{children:[(0,t.jsx)(n.ModalClose,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"secondary",size:"sm",children:"Cancel"})}),(0,t.jsx)(u.SpinnerButton,{size:"sm",pending:o,onClick:K,disabled:!Z,children:o?"Transferring":"Confirm and Transfer"})]})]})}function _(e){let{name:n,id:r,checked:i,onClick:o}=e;return(0,t.jsxs)("div",{className:"p-1.5 text-sm hover:bg-v0-gray-100 rounded-md flex items-center gap-2",onClick:()=>{o(r)},children:[(0,t.jsx)("div",{className:(0,I.cn)("flex h-3.5 w-3.5 items-center justify-center left-2",!i&&"invisible"),children:(0,t.jsx)(D.Check,{className:"h-3 w-3"})}),(0,t.jsx)("p",{children:n})]})}},331193,443283,565135,e=>{"use strict";var t=e.i(509473),n=e.i(686832),r=e.i(120945),i=e.i(176248),o=e.i(990453),a=e.i(707974),s=e.i(743124),l=e.i(763480),c=e.i(967472),u=e.i(417220);e.i(563948);var d=e.i(407562);e.i(472428);var p=e.i(152641),h=e.i(607391),f=e.i(358847),m=(0,f.createServerReference)("60d59ec717d89994e4d2e7a515560b6ea553a58067",f.callServer,void 0,f.findSourceMapURL,"configurePasswordProtectionAction"),g=e.i(32170),v=e.i(667660),x=e.i(538553);let y=new Set(["OWNER","MEMBER"]),b="__VERCEL_PASS__";function w(e){let{projectId:f}=e,{hasVercelWritePermission:w}=(0,v.useActiveScope)(),{user:j}=(0,g.useUser)(),[C,k]=(0,s.useState)(!1),[S,N]=(0,s.useState)(!1),[E,D]=(0,s.useState)(!1),[I,A]=(0,s.useState)(""),T=(0,s.useMemo)(()=>!(w&&(null==j||!j.teamRole||y.has(j.teamRole))),[w,null==j?void 0:j.teamRole]),{data:M,isLoading:L,mutate:P}=(0,p.useServerQuerySWR)(["project","passwordProtection"],{projectId:f});async function R(){N(!0);let e=C?"enabled":"disabled";try{let t=C?I.trim():void 0,n=await P({serverMutate:(async()=>await m(f,t))(),optimisticData:{enabled:C}});if(!0!=n)throw Error("An error happened while trying to ".concat(e," password protection"));d.toast.success("Password protection was ".concat(e," successfully"))}catch(t){d.toast.error("An error happened while trying to ".concat(e," password protection"))}finally{N(!1)}}return(0,s.useEffect)(()=>{(null==M?void 0:M.enabled)&&(k(!0),A(b))},[M]),(0,t.jsxs)(r.AtomicDialog,{type:"passwordProtection",children:[(0,t.jsxs)(n.ModalHeader,{children:[(0,t.jsx)(n.ModalTitle,{children:"Password Protection"}),(0,t.jsx)(n.ModalDescription,{className:"text-sm text-v0-gray-1000",children:"Ensures visitors to your deployments must enter a password in order to gain access. All chats created in this project will be password protected."})]}),(0,t.jsxs)(n.ModalContent,{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.RbacTooltip,{show:!w,requiredRole:"V0Builder",children:(0,t.jsx)(o.Switch,{thumbClassName:"size-[22px]",id:"password-protection",checked:C,onCheckedChange:k,disabled:L||S||T,className:"h-6 w-10"})}),(0,t.jsx)(a.Label,{htmlFor:"password-protection",className:"font-medium text-v0-black",children:C?"Enabled":"Disabled"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"password-input",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.RbacTooltip,{show:!w,requiredRole:"V0Builder",children:(0,t.jsx)(l.Input,{id:"password-input",placeholder:"Enter a password",type:E&&I!=b?"text":"password",disabled:!C||L||S||T,value:I,onChange:e=>A(e.target.value),className:"pr-10 [&:has(input:disabled)]:bg-v0-gray-100 [&:has(input:disabled)]:text-v0-gray-500",onFocus:()=>{I===b&&A("")},onBlur:()=>{""===I&&(null==M?void 0:M.enabled)&&A(b)}})}),I!==b?(0,t.jsx)(x.RbacTooltip,{show:!w,requiredRole:"V0Builder",children:(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-8 w-8 -translate-y-1/2 p-0",onClick:()=>D(!E),disabled:!C||L||T,children:E?(0,t.jsx)(u.EyeOff,{className:"h-4 w-4 text-v0-gray-900"}):(0,t.jsx)(c.Eye,{className:"h-4 w-4 text-v0-gray-900"})})}):null]})]}),T?(0,t.jsx)("div",{className:"text-sm text-v0-gray-900",children:(0,t.jsx)("p",{children:"You need additional permissions to manage Password Protection"})}):null]}),(0,t.jsxs)(n.ModalFooter,{className:"bg-v0-background-200 border-v0-alpha-400 border-t",children:[(0,t.jsx)(n.ModalClose,{asChild:!0,children:(0,t.jsx)(i.Button,{size:"sm",variant:"secondary",children:"Cancel"})}),(0,t.jsx)(x.RbacTooltip,{show:!w,requiredRole:"V0Builder",children:(0,t.jsx)(i.Button,{size:"sm",variant:"secondary",disabled:L||C&&!I.trim()||S||T,onClick:R,children:(0,t.jsx)(h.ActionStatus,{isLoading:S,loading:"Saving changes",children:"Save Changes"})})})]})]})}e.s(["PasswordProtection",()=>w],331193),e.s(["JoinedTeams",()=>M],443283);var j=t,C=n,k=i,S=r;e.i(904347);var N=e.i(37737),E=e.i(230766),D=e.i(366021),I=v,A=s,T=e.i(211976);function M(e){let{teams:t}=e,{setActiveScope:n}=(0,I.useActiveScope)();async function r(e){await n(e),(0,N.closeDialog)()}return(0,j.jsxs)(S.AtomicDialog,{type:"joinedNewTeams",children:[(0,j.jsxs)(C.ModalHeader,{children:[(0,j.jsxs)(C.ModalTitle,{children:["You've Joined"," ",(0,j.jsx)("span",{children:t.length>1?"New Teams":"a New Team"})]}),(0,j.jsxs)(C.ModalDescription,{children:["You've joined"," ",(0,j.jsx)("span",{children:t.length>1?"new teams":"a new team"})," on v0, do you want to switch?"]})]}),(0,j.jsx)(C.ModalContent,{className:"space-y-3",children:t.map(e=>(0,j.jsx)(L,{scope:e,onClick:r},e.id))}),(0,j.jsx)(C.ModalFooter,{children:(0,j.jsx)(k.Button,{size:"sm",onClick:N.closeDialog,children:"Continue with current team"})})]})}function L(e){let{scope:t,onClick:n}=e,[r,i]=(0,A.useState)(!1);return(0,j.jsxs)("div",{className:"flex justify-between",children:[(0,j.jsxs)("div",{className:"flex gap-1.5 items-center",children:[(0,j.jsx)(E.AvatarUser,{teamId:t.id,size:"sm",rounded:!0}),(0,j.jsx)(D.ScopeDisplayText,{activeScope:t})]}),(0,j.jsx)(T.SpinnerButton,{pending:r,size:"sm",variant:"secondary",onClick:async()=>{try{i(!0),await n(t)}finally{i(!1)}},children:"Switch"})]})}var P=t,R=n,_=r,O=i,F=s,B=h,V=v,z=e.i(592258),H=D,U=e.i(786887),G=d,W=N;function q(e){let{projectId:t}=e,[n,r]=(0,F.useState)(!1),{activeScope:i,scopes:o,setActiveScope:a}=(0,V.useActiveScope)(),[s,l]=(0,F.useState)(),c=(0,F.useMemo)(()=>null==o?void 0:o.find(e=>e.id===s),[s,o]);async function u(){r(!0);try{if(!i)throw Error("Active scope is null");if(!c)throw Error("Selected team is null");let e=await (0,U.transferOwnershipAction)(i,c,[t]);if(e.error)throw e.error;await a(c),G.toast.success("Ownership transferred successfully"),(0,W.closeDialog)()}catch(e){G.toast.error("message"in e?e.message:"Failed to transfer ownership")}finally{r(!1)}}return(0,P.jsxs)(_.AtomicDialog,{type:"transferProject",children:[(0,P.jsxs)(R.ModalHeader,{children:[(0,P.jsx)(R.ModalTitle,{children:"Transfer Project"}),(0,P.jsx)(R.ModalDescription,{className:"text-sm text-v0-gray-1000",children:"Transfer this project to a different team"})]}),(0,P.jsx)(R.ModalContent,{className:"flex flex-col gap-4",children:(0,P.jsxs)(z.Select,{value:s,onValueChange:l,children:[(0,P.jsx)(z.SelectTrigger,{className:"w-full",children:(0,P.jsx)(z.SelectValue,{placeholder:"Select a team or user..."})}),(0,P.jsx)(z.SelectContent,{className:"max-h-[250px] overflow-y-auto",children:null==o?void 0:o.map(e=>(0,P.jsx)(H.ScopeListItem,{scope:e,activeScope:i},e.id))})]})}),(0,P.jsxs)(R.ModalFooter,{className:"bg-v0-background-200 border-v0-alpha-400 border-t",children:[(0,P.jsx)(R.ModalClose,{asChild:!0,children:(0,P.jsx)(O.Button,{size:"sm",variant:"secondary",children:"Cancel"})}),(0,P.jsx)(O.Button,{size:"sm",disabled:n||!s,onClick:u,children:(0,P.jsx)(B.ActionStatus,{isLoading:n,loading:"Saving changes",children:"Transfer Project"})})]})]})}e.s(["TransferProject",()=>q],565135)},687639,e=>{"use strict";e.s(["ReassignProject",()=>h]);var t=e.i(509473),n=e.i(743124),r=e.i(686832),i=e.i(120945),o=e.i(176248),a=e.i(607391),s=e.i(37737),l=e.i(60425),c=e.i(914897),u=e.i(802094),d=e.i(118376),p=e.i(245294);function h(e){var h;let{chatId:f}=e,{reassignPending:m,handleReassignProject:g}=(0,c.useReassignProject)(),[v,x]=(0,n.useState)(null),y=()=>{g(v),(0,s.closeDialog)()},b=(0,t.jsxs)(o.Button,{variant:"secondary",className:"w-full max-w-full justify-between font-normal",children:[v?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(null==(h=v.settings)?void 0:h.icon)?(0,t.jsx)(u.IconPickerIcon,{name:(0,d.cleanIconName)(v.settings.icon)}):null,v.name]}):(0,t.jsx)("span",{children:"Select a project..."}),(0,t.jsx)(p.ChevronDown,{})]});return(0,t.jsxs)(i.AtomicDialog,{type:"reassignProject",children:[(0,t.jsxs)(r.ModalHeader,{children:[(0,t.jsx)(r.ModalTitle,{children:"Reassign Project"}),(0,t.jsx)(r.ModalDescription,{className:"text-sm text-v0-gray-1000",children:"Select a project to assign to this chat, or choose none to unassign the current project"})]}),(0,t.jsx)(r.ModalContent,{className:"flex flex-col gap-4",children:(0,t.jsx)(l.ProjectsDropdown,{handleProjectSelect:x,disabled:m,quickCreate:!0,align:"start",className:"w-full",chatId:f,triggerButton:b})}),(0,t.jsxs)(r.ModalFooter,{className:"bg-v0-background-200 border-v0-alpha-400 border-t",children:[(0,t.jsx)(r.ModalClose,{asChild:!0,children:(0,t.jsx)(o.Button,{size:"sm",variant:"secondary",children:"Cancel"})}),(0,t.jsx)(o.Button,{size:"sm",disabled:m,onClick:y,children:(0,t.jsx)(a.ActionStatus,{isLoading:m,loading:"Reassigning...",children:"Confirm"})})]})]})}},175807,360110,e=>{"use strict";e.s(["AttachmentPreviewDialog",()=>b],175807);var t=e.i(509473),n=e.i(120945),r=e.i(37737),i=e.i(770858),o=e.i(304649),a=e.i(992879),s=e.i(743124),l=e.i(355805),c=e.i(651219),u=e.i(87467),d=e.i(577745),p=e.i(926788),h=e.i(762585),f=e.i(432539),m=e.i(543017),g=e.i(600500);let v=(0,c.default)(()=>e.A(688269).then(e=>e.Table),{loadableGenerated:{modules:[20068]}});function x(e){var t,n;return(null==(t=e.contentType)?void 0:t.startsWith("video/"))&&!(null==(n=e.name)?void 0:n.endsWith(".ts"))}function y(e){var t;return null==(t=e.contentType)?void 0:t.startsWith("audio/")}function b(e){var i;let{attachment:a,content:l,onRename:c}=e,u=null==(i=a.contentType)?void 0:i.startsWith("image/"),d=x(a),h=y(a),v=S(a),b=(0,s.useRef)(null),[N,E]=(0,s.useState)(!1),[D,I]=(0,s.useState)(a.name||""),[A,T]=(0,s.useState)(a.name||""),M=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=a.name||"";I(e),T(e)},[a.name]);let L=(0,s.useCallback)(()=>{A.trim()&&A!==D&&(null==c||c(A.trim()),I(A.trim())),E(!1)},[A,D,c]),P=(0,s.useCallback)(()=>{T(D),E(!1)},[D]),R=(0,s.useCallback)(e=>{"Enter"===e.key?L():"Escape"===e.key&&P()},[L,P]);return(0,t.jsxs)(n.AtomicDialog,{type:"attachmentPreview",className:(0,o.cn)("w-full max-w-[90vw] max-h-[90vh] auto-rows-min gap-2 rounded-xl p-0 [&>button:last-child]:invisible",h&&"bg-transparent"),style:{width:"unset"},onOpenAutoFocus:e=>{if(e.preventDefault(),!N){var t;null==(t=b.current)||t.focus()}},children:[(0,t.jsx)(p.DialogTitle,{className:"sr-only","aria-label":D,children:D}),(0,t.jsx)("div",{className:"flex items-center gap-2 px-4 py-2 border-b border-v0-gray-200",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{ref:M,type:"text",value:A,onChange:e=>T(e.target.value),onKeyDown:R,className:"px-2 text-sm font-medium bg-transparent border border-v0-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-v0-blue-500",style:{width:"".concat(8*Math.max(A.length,1)+20,"px"),minWidth:"60px",maxWidth:"400px"},autoFocus:!0}),(0,t.jsx)("button",{onClick:L,className:"p-1 text-v0-green-700 hover:text-v0-green-700 rounded transition-colors","aria-label":"Save filename",type:"button",children:(0,t.jsx)(m.Check,{size:14})}),(0,t.jsx)("button",{onClick:P,className:"p-1 text-v0-gray-900 hover:text-v0-gray-900 hover:bg-v0-gray-100 rounded transition-colors","aria-label":"Cancel edit",type:"button",children:(0,t.jsx)(g.CrossSmall,{size:14})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-v0-gray-900",children:D}),c&&(0,t.jsx)("button",{onClick:()=>{E(!0),setTimeout(()=>{var e;return null==(e=M.current)?void 0:e.select()},0)},className:"p-1 text-v0-gray-900 hover:text-v0-gray-900 hover:bg-v0-gray-100 rounded transition-colors","aria-label":"Edit filename",type:"button",children:(0,t.jsx)(f.Pencil,{size:14})})]})})}),(0,t.jsx)(s.Suspense,{children:u?(0,t.jsx)(j,{attachment:a}):d?(0,t.jsx)(C,{attachment:a}):h?(0,t.jsx)(k,{attachment:a}):l&&v&&(0,t.jsx)(w,{attachment:a,content:l,onClose:()=>(0,r.closeDialog)(),showTitle:!1})})]})}function w(e){let{attachment:n,onClose:r,content:o,showTitle:a=!0}=e,s="relative max-h-[90vh] max-w-[90vw] min-w-[80vw] overflow-y-auto";switch(n.contentType){case"application/x-zip-compressed":case"application/zip":return(0,t.jsxs)("div",{className:s,children:[a&&(0,t.jsx)("div",{className:"flex items-center justify-between p-4 pb-0 text-sm font-medium text-v0-gray-900",children:(0,t.jsx)("span",{children:n.name})}),(0,t.jsx)("div",{className:"flex gap-2 p-4 text-v0-gray-900",children:"v0 does not support previewing ZIP files at this time."})]});case"text/csv":return(0,t.jsxs)("div",{className:s,children:[a&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 pb-0 text-sm font-medium text-v0-gray-900",children:[(0,t.jsx)("span",{children:n.name}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(u.CodeBlockActions,{allowClose:!0,allowCopyCode:!0,allowDownloadCode:!0,caller:"inline",closeHandler:r,fileName:n.name,value:o,isTabbed:!1,closed:!1,originalCode:void 0,blockId:"attachment-preview-".concat(n.name)})})]}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(v,{source:o})})]});default:var c,d;let p=(0,l.cleanLangNoCustom)((null==(c=n.name)?void 0:c.split(".").pop())||(null==(d=n.contentType)?void 0:d.split("/")[1])||"plaintext");return(0,t.jsx)("div",{className:s,children:(0,t.jsx)(i.CodeBlock,{allowClose:!0,caller:"inline",className:"rounded-xl border-none [&>div:last-child]:pt-0! [&_code]:whitespace-pre!",closeHandler:r,showQuickEditAnimation:!1,fileName:n.name,headerClassName:"h-14 border-none px-4 bg-background/70",language:p,showLineNumbers:!0,value:o,wrapLongLines:!0,originalCode:void 0,blockId:"attachment-preview-".concat(n.name),closed:!0})})}}function j(e){var n;let{attachment:r}=e,[i,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),d=(0,s.useCallback)(e=>{let t=e.currentTarget;console.log(t),l({width:t.naturalWidth,height:t.naturalHeight}),u(!1)},[]),p=(0,s.useCallback)(()=>{u(!1)},[]);return(0,t.jsxs)("div",{className:"flex items-center justify-center w-full h-full max-w-[90vw] max-h-[90vh]",children:[c&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)(h.Skeleton,{className:"w-64 h-64 rounded-lg"})}),(0,t.jsx)(a.default,{alt:null!=(n=r.name)?n:"Image Preview",className:(0,o.cn)("bg-alpha-950 rounded-lg object-contain transition-opacity duration-200",c?"opacity-0":"opacity-100"),src:r.url,width:(null==i?void 0:i.width)||800,height:(null==i?void 0:i.height)||600,style:{maxWidth:"90vw",maxHeight:"90vh"},onLoad:d,onError:p,unoptimized:!0})]})}function C(e){let{attachment:n}=e;return(0,t.jsx)("div",{className:"flex items-center justify-center w-full h-full max-w-[90vw] max-h-[90vh]",children:(0,t.jsxs)("video",{className:"bg-alpha-950 rounded-lg object-contain",controls:!0,style:{maxWidth:"90vw",maxHeight:"90vh",width:"auto",height:"auto"},children:[(0,t.jsx)("source",{src:n.url,type:n.contentType}),"Your browser does not support the video tag."]})})}function k(e){let{attachment:n}=e;return(0,t.jsx)("div",{className:"flex items-center justify-center w-full h-full p-8",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsx)("div",{className:"mb-4 text-center",children:(0,t.jsx)("h3",{className:"text-lg font-medium text-v0-gray-1000 dark:text-v0-gray-100",children:n.name||"Audio File"})}),(0,t.jsxs)("audio",{className:"w-full rounded-lg",controls:!0,children:[(0,t.jsx)("source",{src:n.url,type:n.contentType}),"Your browser does not support the audio tag."]})]})})}let S=e=>{var t,n;let r=new Set(["pdf","doc","docx","xls","xlsx"]),i=(null==(t=e.contentType)?void 0:t.split("/")[1])||"none",o=(null==(n=e.name)?void 0:n.split(".").pop())||"none";return d.TEXT_EXTENSIONS.includes(o)&&(i="plain"),!r.has(i)};var N=e.i(358847),E=(0,N.createServerReference)("60a16ceb46d12469f7eeec3d94b0eeddb7e32a8411",N.callServer,void 0,N.findSourceMapURL,"setFeatureDialogDismissed");e.s(["setFeatureDialogDismissed",()=>E],360110)},209248,756636,e=>{"use strict";e.i(541536);var t=e.i(23474);let n=t.z.enum(["registry:lib","registry:block","registry:component","registry:ui","registry:hook","registry:page","registry:file","registry:theme","registry:style","registry:item","registry:example","registry:internal"]),r=t.z.discriminatedUnion("type",[t.z.object({path:t.z.string(),content:t.z.string().optional(),type:t.z.enum(["registry:file","registry:page"]),target:t.z.string()}),t.z.object({path:t.z.string(),content:t.z.string().optional(),type:n.exclude(["registry:file","registry:page"]),target:t.z.string().optional()})]),i=t.z.object({config:t.z.object({content:t.z.array(t.z.string()).optional(),theme:t.z.record(t.z.string(),t.z.any()).optional(),plugins:t.z.array(t.z.string()).optional()}).optional()}),o=t.z.object({theme:t.z.record(t.z.string(),t.z.string()).optional(),light:t.z.record(t.z.string(),t.z.string()).optional(),dark:t.z.record(t.z.string(),t.z.string()).optional()}),a=t.z.record(t.z.string(),t.z.lazy(()=>t.z.union([t.z.string(),t.z.record(t.z.string(),t.z.union([t.z.string(),t.z.record(t.z.string(),t.z.string())]))]))),s=t.z.record(t.z.string(),t.z.string()),l=t.z.object({$schema:t.z.string().optional(),extends:t.z.string().optional(),name:t.z.string(),type:n,title:t.z.string().optional(),author:t.z.string().min(2).optional(),description:t.z.string().optional(),dependencies:t.z.array(t.z.string()).optional(),devDependencies:t.z.array(t.z.string()).optional(),registryDependencies:t.z.array(t.z.string()).optional(),files:t.z.array(r).optional(),tailwind:i.optional(),cssVars:o.optional(),css:a.optional(),envVars:s.optional(),meta:t.z.record(t.z.string(),t.z.any()).optional(),docs:t.z.string().optional(),categories:t.z.array(t.z.string()).optional()}),c=t.z.object({name:t.z.string(),homepage:t.z.string(),items:t.z.array(l)});t.z.array(l),t.z.array(t.z.object({name:t.z.string(),label:t.z.string()})),t.z.record(t.z.string(),t.z.record(t.z.string(),t.z.string())),t.z.object({inlineColors:t.z.object({light:t.z.record(t.z.string(),t.z.string()),dark:t.z.record(t.z.string(),t.z.string())}),cssVars:o,cssVarsV4:o.optional(),inlineColorsTemplate:t.z.string(),cssVarsTemplate:t.z.string()}),l.pick({dependencies:!0,devDependencies:!0,files:!0,tailwind:!0,cssVars:!0,css:!0,envVars:!0,docs:!0});let u=t.z.union([t.z.string().refine(e=>e.includes("{name}"),{message:"Registry URL must include {name} placeholder"}),t.z.object({url:t.z.string().refine(e=>e.includes("{name}"),{message:"Registry URL must include {name} placeholder"}),params:t.z.record(t.z.string(),t.z.string()).optional(),headers:t.z.record(t.z.string(),t.z.string()).optional()})]),d=t.z.record(t.z.string().refine(e=>e.startsWith("@"),{message:"Registry names must start with @ (e.g., @v0, @acme)"}),u),p=t.z.object({$schema:t.z.string().optional(),style:t.z.string(),rsc:t.z.coerce.boolean().default(!1),tsx:t.z.coerce.boolean().default(!0),tailwind:t.z.object({config:t.z.string().optional(),css:t.z.string(),baseColor:t.z.string(),cssVariables:t.z.boolean().default(!0),prefix:t.z.string().default("").optional()}),iconLibrary:t.z.string().optional(),aliases:t.z.object({components:t.z.string(),utils:t.z.string(),ui:t.z.string().optional(),lib:t.z.string().optional(),hooks:t.z.string().optional()}),registries:d.optional()}).strict().extend({resolvedPaths:t.z.object({cwd:t.z.string(),tailwindConfig:t.z.string(),tailwindCss:t.z.string(),utils:t.z.string(),components:t.z.string(),lib:t.z.string(),hooks:t.z.string(),ui:t.z.string()})});t.z.record(p),e.s(["registryItemSchema",0,l,"registrySchema",0,c],756636),e.s([],209248)},567407,e=>{"use strict";let t=["background","foreground","card","card-foreground","popover","popover-foreground","primary","primary-foreground","secondary","secondary-foreground","muted","muted-foreground","accent","accent-foreground","destructive","destructive-foreground","border","input","ring","chart-1","chart-2","chart-3","chart-4","chart-5","sidebar","sidebar-foreground","sidebar-primary","sidebar-primary-foreground","sidebar-accent","sidebar-accent-foreground","sidebar-border","sidebar-ring"],n=["radius"];[...t,...n],e.s(["SHADCN_COMMON_TOKENS",0,n,"SHADCN_LIGHT_DARK_TOKENS",0,t])},150015,e=>{"use strict";e.i(209248);var t=e.i(756636),n=e.i(567407);function r(e){let n;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw Error("Invalid JSON parsing registry")}else n=e;return t.registrySchema.parse(n)}function i(e){let n;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw Error("Invalid JSON parsing registry item")}else n=e;return t.registryItemSchema.parse(n)}function o(e,t){return e?Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t.replace(/^--/,""),n]}).filter(e=>{let[n]=e;return t.includes(n)})):{}}function a(e){var t,r,a;let s=i(e),l=o(null==(t=s.cssVars)?void 0:t.light,n.SHADCN_COMMON_TOKENS);return{common:l,light:o(null==(r=s.cssVars)?void 0:r.light,n.SHADCN_LIGHT_DARK_TOKENS),dark:o(null==(a=s.cssVars)?void 0:a.dark,n.SHADCN_LIGHT_DARK_TOKENS)}}function s(e){return r(e).items.filter(e=>e.cssVars).map(a).reduce((e,t)=>{let n=(e,t)=>Object.entries(t).reduce((e,t)=>{let[n,r]=t;return n in e?e:{...e,[n]:r}},e);return{common:n(e.common,t.common),light:n(e.light,t.light),dark:n(e.dark,t.dark)}},{common:{},light:{},dark:{}})}e.s(["parseRegistryItem",()=>i,"registryToPartialShadcnStyle",()=>s])},588385,e=>{"use strict";var t=e.i(150015);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t.startsWith("--")?t.slice(2):t,n]}))}function r(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{type:i="registry:theme",description:o,title:a,author:s}=r,l={...n.common,...n.light},c=n.dark,u={name:e,type:i,...o&&{description:o},...a&&{title:a},...s&&{author:s},cssVars:{...Object.keys(l).length>0&&{light:l},...Object.keys(c).length>0&&{dark:c}}};try{(0,t.parseRegistryItem)(u)}catch(e){throw console.error(e),Error("Invalid registry item")}return u}function i(e,t,n){return{name:e,homepage:t,items:n.map(e=>{let{name:t,style:n,options:i={}}=e;return r(t,n,i)})}}e.s(["generateRegistryFromStyles",()=>i,"stripDash",()=>n])},904347,292750,948973,492929,e=>{"use strict";e.s(["SuspendingDialogs",()=>e_],904347);var t=e.i(509473),n=e.i(37737),r=e.i(639056),i=e.i(743124),o=e.i(261825),a=e.i(228520),s=e.i(3156),l=e.i(867751),c=e.i(652461),u=e.i(368387),d=e.i(329046),p=e.i(5894),h=e.i(388769),f=e.i(886058),m=e.i(741888),g=e.i(688371),v=e.i(926923),x=e.i(632393),y=e.i(851658),b=e.i(511969),w=e.i(642969),j=e.i(485614),C=e.i(979865),k=e.i(32170),S=e.i(323194),N=e.i(70772),E=e.i(199814),D=e.i(331193),I=e.i(443283),A=e.i(565135),T=e.i(687639),M=e.i(175807);e.s(["NewFeatureButton",()=>q,"NewFeatureDialog",()=>W,"NewFeatureDialogOpener",()=>K],292750);var L=t,P=i,R=e.i(176248),_=e.i(686832),O=e.i(120945),F=n,B=e.i(360110),V=e.i(909270),z=e.i(794593),H=e.i(296046);let U=(0,P.createContext)(null),G=()=>{let e=(0,P.useContext)(U);if(!e)throw Error("useFeatureDialogContext must be used within a FeatureDialogProvider");return e};function W(e){let{featureId:t,config:n}=e,{handleSetDismissedTrue:r}=Z(t),i=(0,P.useCallback)(()=>{(0,F.closeDialog)(),r()},[r]);return(0,L.jsx)(U.Provider,{value:{onClose:i},children:(0,L.jsxs)(O.AtomicDialog,{type:"newFeatureDialog",onOpenChange:e=>{e||r()},children:[(0,L.jsx)("div",{className:"flex border-b border-v0-alpha-400 min-h-[280px]",children:n.visual}),(0,L.jsxs)("div",{className:"overflow-auto",children:[(0,L.jsxs)(_.ModalHeader,{className:"pt-2 flex flex-col gap-3 items-start",children:[n.badge?(0,L.jsx)(z.Badge,{variant:"teal",className:"h-6 px-2",children:n.badge.text}):null,(0,L.jsx)(_.ModalTitle,{className:"!text-heading-24",children:n.title}),(0,L.jsx)(_.ModalDescription,{className:"text-start",children:n.description})]}),(0,L.jsx)(_.ModalContent,{children:(0,L.jsxs)("div",{className:"flex gap-2 justify-start [&>*]:flex-1",children:[(0,L.jsx)("span",{children:n.secondaryAction?n.secondaryAction:(0,L.jsx)(R.Button,{variant:"secondary",size:"sm",onClick:i,children:"Got it"})}),(0,L.jsx)("span",{children:n.primaryAction?n.primaryAction:null})]})})]})]})})}function q(e){let{variant:t="default",onClick:n,href:r,target:i,children:o,disabled:a=!1}=e,{onClose:s}=G(),l=e=>{let{children:t}=e;return r?(0,L.jsx)(V.default,{href:r,target:i,children:t}):t};return(0,L.jsx)(l,{children:(0,L.jsx)(R.Button,{size:"sm",type:"button",className:"w-full",variant:t,disabled:a,onClick:()=>{a||(null==n||n(),s())},children:o})})}let Z=e=>{let[t,n]=(0,P.useTransition)();return{handleSetDismissedTrue:(0,P.useCallback)(()=>{n(async()=>{await (0,B.setFeatureDialogDismissed)(e,!0)})},[e])}};function K(e){let{featureId:t,config:n}=e,r=(0,H.useIsChatPage)(),i=(0,P.useRef)(!1);return(0,P.useEffect)(()=>{(!n.chatPageOnly||r)&&(i.current||((0,F.openDialog)({type:"newFeatureDialog",data:{featureId:t,config:n}}),i.current=!0))},[t,n,r]),null}var $=t,Y=_,J=e.i(763480),Q=e.i(589910),X=R,ee=i,et=e.i(297239),en=O,er=n,ei=e.i(211976),eo=e.i(358847),ea=(0,eo.createServerReference)("7f00e1a5b3bc40cee0a6730362a033e10784dabde5",eo.callServer,void 0,eo.findSourceMapURL,"createDesignSystemAction"),es=e.i(588385);e.i(563948);var el=e.i(407562);let ec=100,eu="design-systems-scoped-preview";e.s(["DESIGN_SYSTEM_NAME_MAX_LENGTH",0,ec,"PREVIEW_AREA_CLASSNAME",0,eu],948973),e.i(472428);var ed=e.i(152641);function ep(e){let{initialName:t,onSuccess:n,shadcnStyle:r,isExampleDesignSystem:i}=e,{data:o,mutate:a}=(0,ed.useServerQuerySWR)(["scoped","designSystems"],{}),[s,l]=(0,ee.useTransition)(),c=(0,et.useT)(),u=(0,ee.useRef)(null),[d,p]=(0,ee.useState)(t||""),h=(0,ee.useCallback)(e=>{e.preventDefault(),l(async()=>{try{let e=(0,es.generateRegistryFromStyles)(d,"https://v0.app",[{name:d,style:r}]),t={name:d,description:"Design system created from editor",registry:e},i=await a({serverMutate:ea(t),optimisticData:o});null==n||n(i),el.toast.success(c("saveDesignSystemDialog.successToast")),(0,er.closeDialog)()}catch(e){el.toast.error("Failed to create design system. Please try again.")}})},[d,r,n,c,o,a]);return(0,$.jsx)(en.AtomicDialog,{type:"createDesignSystem",children:(0,$.jsxs)("form",{onSubmit:h,children:[(0,$.jsxs)(Y.ModalHeader,{children:[(0,$.jsx)(Y.ModalTitle,{children:i?c("saveDefaultDesignSystemDialog.title"):c("saveDesignSystemDialog.title")}),i&&(0,$.jsx)(Y.ModalDescription,{children:c("saveDefaultDesignSystemDialog.description")})]}),(0,$.jsxs)(Y.ModalContent,{children:[(0,$.jsx)("label",{className:"sr-only",htmlFor:"designSystemName",children:c("saveDesignSystemDialog.newName")}),(0,$.jsx)(J.Input,{"aria-label":c("saveDesignSystemDialog.newName"),autoComplete:"off",autoFocus:!0,className:"w-full",id:"designSystemName",maxLength:ec,onChange:e=>p(e.target.value),placeholder:t||c("saveDesignSystemDialog.enterNewName"),ref:u,value:d}),(0,$.jsx)(Q.InputCounter,{className:"mt-2",count:d.length,max:ec,message:"Name must be less than ".concat(ec," characters")})]}),(0,$.jsxs)(Y.ModalFooter,{children:[(0,$.jsx)(X.Button,{onClick:er.closeDialog,size:"sm",type:"button",variant:"secondary",children:c("saveDesignSystemDialog.cancel")}),(0,$.jsx)(ei.SpinnerButton,{pending:s,disabled:!d.trim(),size:"sm",type:"submit",children:s?c("saveDesignSystemDialog.saving"):i?c("saveDefaultDesignSystemDialog.save"):c("saveDesignSystemDialog.save")})]})]})})}var eh=t,ef=_,em=R,eg=i,ev=O,ex=n,ey=ei;function eb(e){let{designSystemName:t,onDelete:n}=e,[r,i]=(0,eg.useTransition)(),o=(0,eg.useCallback)(()=>{i(async()=>{await n()})},[n]);return(0,eh.jsxs)(ev.AtomicDialog,{type:"deleteDesignSystem",children:[(0,eh.jsxs)(ef.ModalHeader,{children:[(0,eh.jsx)(ef.ModalTitle,{children:"Delete Design System"}),(0,eh.jsxs)(ef.ModalDescription,{children:['Are you sure you want to delete "',t,'"? This action cannot be undone.']})]}),(0,eh.jsxs)(ef.ModalFooter,{children:[(0,eh.jsx)(em.Button,{onClick:ex.closeDialog,size:"sm",type:"button",variant:"secondary",children:"Cancel"}),(0,eh.jsx)(ey.SpinnerButton,{pending:r,size:"sm",variant:"destructive",onClick:o,children:r?"Deleting...":"Delete"})]})]})}var ew=t,ej=_,eC=J,ek=Q,eS=R,eN=i,eE=O,eD=n,eI=ei,eA=e.i(70165),eT=el,eM=ed,eL=eo,eP=(0,eL.createServerReference)("7f4765eb67cee23053bb005c80101b54a79f96c871",eL.callServer,void 0,eL.findSourceMapURL,"updateDesignSystemAction");function eR(e){let{currentName:t,designSystemId:n}=e,{mutate:r,data:i}=(0,eM.useServerQuerySWR)(["scoped","designSystems"],{},{suspense:!0}),o=(0,eA.useIsMobile)(),[a,s]=(0,eN.useTransition)(),l=(0,eN.useRef)(null),[c,u]=(0,eN.useState)(t),d=(0,eN.useCallback)(e=>{if(e.preventDefault(),!c.trim()||c===t)return void(0,eD.closeDialog)();s(async()=>{try{await r({serverMutate:eP({designSystemId:n,name:c}),optimisticData:{...i,data:i.data.map(e=>e.designSystemId===n?{...e,name:c}:e)}}),eT.toast.success("Design system renamed successfully")}catch(e){eT.toast.error("Failed to rename design system.")}(0,eD.closeDialog)()})},[c,t,r,n,i]);return(0,eN.useEffect)(()=>{setTimeout(()=>{var e,t;null==(e=l.current)||e.focus(),o||null==(t=l.current)||t.select()},0)},[o]),(0,ew.jsx)(eE.AtomicDialog,{type:"renameDesignSystem",children:(0,ew.jsxs)("form",{onSubmit:d,children:[(0,ew.jsxs)(ej.ModalHeader,{children:[(0,ew.jsx)(ej.ModalTitle,{children:"Rename Design System"}),(0,ew.jsx)(ej.ModalDescription,{children:(0,ew.jsx)("label",{className:"sr-only",htmlFor:"designSystemName",children:"Design System Name"})})]}),(0,ew.jsxs)(ej.ModalContent,{children:[(0,ew.jsx)(eC.Input,{"aria-label":"Design System Name",autoComplete:"off",autoFocus:!0,className:"w-full",id:"designSystemName",maxLength:ec,onChange:e=>u(e.target.value),placeholder:"Enter design system name",ref:l,value:c}),(0,ew.jsx)(ek.InputCounter,{className:"mt-2",count:c.length,max:ec,message:"Name must be less than ".concat(ec," characters")})]}),(0,ew.jsxs)(ej.ModalFooter,{children:[(0,ew.jsx)(eS.Button,{onClick:eD.closeDialog,size:"sm",type:"button",variant:"secondary",children:"Cancel"}),(0,ew.jsx)(eI.SpinnerButton,{pending:a,disabled:!c.trim(),size:"sm",type:"submit",children:a?"Renaming...":"Rename"})]})]})})}function e_(){let e=(0,r.useAtomValue)((0,n.getDialogsAtoms)().dialogOpen),C=(0,i.useMemo)(()=>{if(!e)return null;switch(e.type){case"createTeam":return(0,t.jsx)(o.TeamCreateDialog,{});case"joinedNewTeams":return(0,t.jsx)(I.JoinedTeams,{...e.data});case"requestAccess":return(0,t.jsx)(a.TeamRequestAccessDialog,{...e.data});case"upgradeTeam":return(0,t.jsx)(s.TeamUpgradeDialog,{...e.data});case"transferProject":return(0,t.jsx)(A.TransferProject,{...e.data});case"reassignProject":return(0,t.jsx)(T.ReassignProject,{...e.data});case"deleteChat":return(0,t.jsx)(c.ChatDeleteDialog,{...e.data});case"undoChanges":return(0,t.jsx)(u.ChatUndoChangesDialog,{...e.data});case"updateChatTitle":return(0,t.jsx)(l.SuspendingChatRenameDialog,{...e.data});case"messageDownvote":return(0,t.jsx)(d.ChatMessageDownvoteDialog,{...e.data});case"flagBlock":return(0,t.jsx)(p.ChatFlagBlockDialog,{...e.data});case"forkBlock":return(0,t.jsx)(E.ChatForkBlockDialog,{...e.data});case"templateEdit":return(0,t.jsx)(h.TemplateEditDialog,{...e.data});case"templateDelete":return(0,t.jsx)(f.TemplateDeleteDialog,{...e.data});case"templateWizard":return(0,t.jsx)(m.TemplateWizardDialog,{...e.data});case"createDesignSystem":return(0,t.jsx)(ep,{...e.data});case"deleteDesignSystem":return(0,t.jsx)(eb,{...e.data});case"renameDesignSystem":return(0,t.jsx)(eR,{...e.data});case"feedback":return(0,t.jsx)(g.FeedbackDialog,{...e.data});case"connectRepo":return(0,t.jsx)(v.ConnectRepoDialog,{...e.data});case"buyMoreCredits":return(0,t.jsx)(x.BuyMoreCreditsTwoStepDialog,{...e.data});case"cancelPlan":return(0,t.jsx)(y.CancelPlanDialog,{...e.data});case"upgradePlan":return(0,t.jsx)(b.UpgradePlanDialog,{...e.data});case"addPaymentMethod":return(0,t.jsx)(w.AddPaymentMethodDialog,{...e.data});case"redeemCode":return(0,t.jsx)(j.RedeemCodeDialog,{});case"passwordProtection":return(0,t.jsx)(D.PasswordProtection,{...e.data});case"attachmentPreview":return(0,t.jsx)(M.AttachmentPreviewDialog,{...e.data});case"newFeatureDialog":return(0,t.jsx)(W,{...e.data});default:return null}},[e]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eF,{}),C]})}function eO(e,t,n){let r=new URLSearchParams(e);null===n?r.delete(t):r.set(t,n);let i="".concat(window.location.pathname).concat(r.toString()?"?":"").concat(r.toString());window.history.replaceState({},"",i)}function eF(){let e=(0,C.useSearchParams)(),t=(0,C.useRouter)(),{user:r}=(0,k.useUser)(),{setShowSignInDialog:o}=(0,S.useSignInDialog)(),{setPaymentDialogPlan:a}=(0,N.usePaymentDialog)(),s=e.get("premium")?"v0-level3":null,l=e.get("buyMore")&&"0"!==e.get("buyMore");return(0,i.useEffect)(()=>{if(s){var c;return r?(null!=(c=r.realv0Plan)?c:r.v0plan)==="v0-level3"?void eO(e,"premium",null):(a(s),void eO(e,"premium",null)):void o({content:!1,customMessage:"Create an account to subscribe to Premium"})}l&&((0,n.openDialog)({type:"buyMoreCredits",data:{onSuccess:()=>(0,i.startTransition)(t.refresh)}}),eO(e,"buyMore",null))},[s,l,r,t]),null}e.s(["updateDesignSystemAction",()=>eP],492929)},120485,e=>{"use strict";e.s(["handleChatError",()=>l,"openOutOfCreditsDialog",()=>s]);var t=e.i(768167),n=e.i(323194),r=e.i(470259);e.i(563948);var i=e.i(407562),o=e.i(691175);e.i(904347);var a=e.i(37737);function s(e,t){"v0-level0"===e?(0,a.openDialog)({type:"upgradePlan"}):(0,a.openDialog)({type:"buyMoreCredits",data:{onSuccess:()=>{null==t||t.refresh()}}})}function l(e,l,c,u){if(!e||"string"!=typeof e&&!(e instanceof Error))return!1;switch(e instanceof Error?e.message:e){case r.AGREEMENT_NOT_ACCEPTED:return i.toast.error("Please accept v0 terms and try again."),(0,t.mutateOnboardingModal)(!0),!0;case r.BLOCKED_USER:return i.toast.error("You are blocked from sending messages."),null==l||l.push("/"),!0;case r.CODE_EXECUTION_ERROR:return!0;case r.DAILY_MESSAGE_LIMIT_REACHED:case r.EXPERIMENTAL_MONTHLY_LIMIT_REACHED:return(0,a.openDialog)({type:"upgradePlan"}),!0;case r.EMPTY_MESSAGE_ERROR:return i.toast.error("Message cannot be empty."),!0;case r.PROJECT_ACCESS_DENIED:return i.toast.error("You do not have access to this project."),!0;case r.FAILED_TO_READ_ROW:return!0;case r.INVALID_ATTACHMENT_TYPE:return i.toast.error("Invalid attachment type."),!0;case r.INVALID_REQUEST_BODY:return i.toast.error("Unable to process request. Please edit your message and try again."),!0;case r.LLM_CALL_ERROR:return i.toast.error("An error occurred while processing your message. Start a new chat, retry, or edit your message."),!0;case r.MAXIMUM_PER_CHAT_IMAGE_ATTACHMENTS_REACHED:return i.toast.error("You've reached the maximum number of image attachments allowed for a single chat."),!0;case r.MISSING_USER_MESSAGE_ID:case r.INVALID_PARENT_ID:case r.FAILED_TO_DELETE_CONTINUE_MESSAGE:case r.MISSING_ASSISTANT_MESSAGE_ID:return i.toast.error("Invalid message ID. Start a new chat or edit and retry your last message."),!0;case r.NO_PLAN_ERROR:return i.toast.error("No active plan. Ensure you have accepted v0 terms and have an active subscription to continue."),null==l||l.push("/subscription?from=chat"),!0;case r.NOT_FOUND:return i.toast.error("The resource you are looking for could not be found."),!0;case r.RATE_LIMITED:return i.toast.error("Too many requests. Please try again later."),!0;case r.UNAUTHENTICATED:return(0,n.mutateSignInDialog)({prompt:!1,customMessage:"Please sign in to continue."}),!0;case r.UNAUTHORIZED:return i.toast.error("You are not authorized to perform this action."),!0;case r.UPLOAD_ATTACHMENT_RATE_LIMIT:return i.toast.error("You are uploading too many files. Please try again later."),!0;case r.UPLOAD_ATTACHMENT_RATE_LIMIT:return i.toast.error("Missing file name."),!0;case r.SUBDOMAIN_LIMIT_EXCEEDED:return i.toast.error("You have reached the daily limit for assigning custom subdomains."),!0;case r.MISSING_FORK_KEY_FOR_EDIT:case r.INVALID_FORK_KEY_MISSING_MESSAGES:case r.FORK_KEY_MESSAGES_OUT_OF_ORDER:case r.MISSING_FORK_KEY_FOR_CONTINUE_RETRY:i.toast.error("Invalid fork key. Please start a new chat.");case r.V0_BLOCK_PREVIEW_ERROR:return!0;case r.BILLING_DETAILS_ERROR:return i.toast.error("Unexpected error. Please try again later."),!0;case r.BILLING_SUBSCRIPTION_ERROR:return i.toast.error("Failed to start your v0 plan. Please try again later."),!0;case r.SUBDOMAIN_ALREADY_ASSIGNED:return i.toast.error("This subdomain is already assigned to this block."),!0;case r.ATTACHMENT_EXCEEDS_REMAINING_TOKENS:return i.toast.error("Your non-image attachment(s) exceed the limits for this chat. Please try again with fewer or smaller attachments."),!0;case r.PAYMENT_PROCESSING:return i.toast.warning("Payment is processing. Please try again later."),!0;case r.ANON_LIMIT_REACHED:return(0,n.mutateSignInDialog)({prompt:!1,customMessage:"You're out of free messages. Sign in or sign up to continue."}),!0;case r.OUT_OF_CREDITS:return s(null==u?void 0:u.userPlan,l),!0;case r.MISSING_SCOPE:if(l&&(null==u?void 0:u.scopeSlug)){let e=(0,o.generatePathFromContext)(u);l.push((0,o.getLoginUrlToMissingScopeClient)({slug:u.scopeSlug,path:e}))}else i.toast.error("Please re-authentiate for full access."),null==l||l.refresh();return!0;case r.MISSING_MFA_SCOPE:if(l&&(null==u?void 0:u.scopeSlug)){let e=(0,o.generatePathFromContext)(u);l.push((0,o.getTwoFactorRequiredUrlClient)({slug:u.scopeSlug,path:e}))}else i.toast.error("You must enable two-factor authentication to perform this action."),null==l||l.refresh();return!0;case r.FORBIDDEN:return i.toast.error("You are not authorized to perform this action."),!0;case r.UNEXPECTED_ERROR:default:return i.toast.error(c||"An unexpected error occurred."),!0}return!1}},85989,306244,967122,81785,246338,e=>{"use strict";async function t(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=e=>{var n;t(null==(n=e.target)?void 0:n.result)},r.onerror=e=>n(e),r.readAsDataURL(e)})}e.s(["readFileAsDataURL",()=>t],85989);let n=new Map;function r(e,t){let r=n.get(e);r&&r.abort();let i=new AbortController;n.set(e,i);let o=i.signal;return o.onabort=()=>{n.delete(e),null==t||t()},o}function i(e){let t=n.get(e);t&&(t.abort(),n.delete(e))}function o(e){n.delete(e)}e.s(["abortKey",()=>i,"createNewAbortSignalForKey",()=>r,"removeAbortController",()=>o],306244),e.s(["useActiveBlockIdRef",()=>p],967122);var a=e.i(449381),s=e.i(743124),l=s,c=e.i(346970);function u(e){let t=(0,l.useRef)(void 0),{data:n,mutate:r}=(0,c.default)(e);return(0,l.useEffect)(()=>{n||r(t)},[n,r]),n}function d(e,t){let n=u(e);return(0,s.useEffect)(()=>{n&&(n.current=t)},[n,t]),n}function p(){let e=(0,a.useActiveBlockState)();return d("activeBlockIdRef",null==e?void 0:e.id)}var h=e.i(358847),f=(0,h.createServerReference)("000944f40ed88d617f0502c6ad2fb1be2088bdf6a7",h.callServer,void 0,h.findSourceMapURL,"invalidateRouterCache");function m(e){if(!e||/[^0-9-\s]+/.test(e)||"0000000000000000"===e)return!1;let t=0,n=!1;e=e.replace(/\D/g,"");for(let r=e.length-1;r>=0;r--){let i=parseInt(e.charAt(r),10);n&&(i*=2)>9&&(i-=9),t+=i,n=!n}return t%10==0}function g(e){let t=/\b(?:\d{4}[-\s]?){3}\d{4}\b/g;return(e.match(t)||[]).filter(m).length>0}e.s(["invalidateRouterCache",()=>f],81785),e.s(["hasCreditCards",()=>g],246338)},572934,e=>{"use strict";var t=e.i(509473),n=e.i(199929),r=e.i(990453),i=e.i(827728);let o=()=>{let[e,t]=(0,i.useLocalStorage)("v0:sg",!0);return[e,t]};function a(){let[e,i]=o();return(0,t.jsxs)(n.SettingsItem,{children:[(0,t.jsxs)(n.SettingsItemContent,{children:[(0,t.jsx)(n.SettingsItemTitle,{children:"Suggestions"}),(0,t.jsx)(n.SettingsItemDescription,{children:"Get relevant in-chat suggestions to refine your project."})]}),(0,t.jsx)(n.SettingsItemAction,{children:(0,t.jsx)(r.Switch,{checked:e,onCheckedChange:i,"aria-label":"Toggle Suggestions"})})]})}e.s(["SuggestionsSetting",()=>a,"useSuggestionsSetting",0,o])},646851,207815,e=>{"use strict";var t=e.i(868275),n=e.i(407562);function r(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}async function i(){try{return(await fetch("/chat/api/chat/resume/ping",{method:"HEAD",cache:"no-store"})).ok}catch(e){return!1}}class o{constructor(){(0,t._)(this,"promise",void 0),(0,t._)(this,"resolve",void 0),(0,t._)(this,"handleOffline",()=>{window.removeEventListener("offline",this.handleOffline),this.resolve()}),(0,t._)(this,"cleanupOfflineListener",()=>{window.removeEventListener("offline",this.handleOffline)}),(0,t._)(this,"resetPromises",()=>{let{promise:e,resolve:t}=r();this.promise=e,this.resolve=t});let{promise:e,resolve:n}=r();this.promise=e,this.resolve=n,window.addEventListener("offline",this.handleOffline)}}class a{clearLoadingToastTimeout(){this.loadingToastTimeout&&(clearTimeout(this.loadingToastTimeout),this.loadingToastTimeout=null)}dismissLoadingToast(){this.toastId&&(n.toast.dismiss(this.toastId),this.toastId=null)}showSuccessToast(){this.toastId&&(this.dismissLoadingToast(),this.toastOpts&&n.toast.success(this.toastOpts.successMessage))}constructor(e){if((0,t._)(this,"toastOpts",void 0),(0,t._)(this,"toastId",null),(0,t._)(this,"loadingToastTimeout",null),this.toastOpts=e,!e)return;let r=Math.max(5e3-(Date.now()-e.lastReconnectedAt),0);this.loadingToastTimeout=setTimeout(()=>{this.toastId=n.toast.loading(e.loadingMessage,{duration:36e5})},r)}}async function s(e){let{promise:t,resolve:n}=r(),i=()=>n();e.defaultValue?n():window.addEventListener(e.eventKey,i),await Promise.race([t,new Promise(t=>setTimeout(t,e.durationMs))]),window.removeEventListener(e.eventKey,i)}async function l(){let e=0;for(;e++<5;)if(await s({defaultValue:"visible"===document.visibilityState,eventKey:"visibilitychange",durationMs:36e5}),await s({defaultValue:await i(),eventKey:"online",durationMs:3e5}),"visible"===document.visibilityState)return!0;return!1}async function c(e,t){var n,r;let i=new URLSearchParams({messageId:e}),o=await fetch("/chat/api/chat/resume?".concat(i.toString()),{method:"GET",cache:"no-store",signal:t});if(!o.ok)throw Error("Failed to fetch resume stream: ".concat(o.statusText));if("application/json"===o.headers.get("Content-Type")){let e=await o.json();return{type:"finished-message",message:e.message,activeBlock:null!=(r=e.activeBlock)?r:null}}let a=null==(n=o.body)?void 0:n.getReader();if(!a)throw Error("Response body is not readable");return{type:"stream",reader:a}}let u=async e=>{let{messageId:t,signal:n,toastOpts:r}=e,i=new a(r);try{let e=await l();if(i.clearLoadingToastTimeout(),!e)return null;let r=500,o=0;for(;o++<3;){await new Promise(e=>setTimeout(e,r*Math.min(1,o-1)));try{let e=await c(t,n);return i.showSuccessToast(),e}catch(e){console.error("Resume attempt ".concat(o," failed:"),e),r*=2}}return null}catch(e){return console.error("Failed to resume stream:",e),null}finally{i.dismissLoadingToast()}};async function d(e){let t=await fetch("/chat/api/stop-agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to stop agent");return await t.json()}e.s(["OfflineHandler",()=>o,"fetchResumeStream",0,u],646851),e.s(["stopAgent",()=>d],207815)},284627,e=>{"use strict";var t=e.i(753533),n=e.i(92479),r=e.i(490293),i=e.i(142219);let o=["task-read-files-v1","task-search-web-v1","task-search-repo-v1","task-diagnostics-v1","task-coding-v1","task-thinking-v1","task-read-file-v1"],a=new Map,s=(0,t.cacheResultById)(a,()=>({isVisible:(0,r.atom)(!1),fullscreenIntent:(0,r.atom)(!1),lastPartUpdate:(0,r.atom)(null),lastPartUpdatedAt:(0,r.atom)(0),currentPartKey:(0,r.atom)(null),dismissedLoaderIds:(0,r.atom)([])})),l=new Map,c=(0,t.cacheResultById)(l,e=>{let t=s(e);return{...t,loaderType:(0,r.atom)(e=>{let n=e(t.lastPartUpdate);return n?n.type:null}),heading:(0,r.atom)(e=>{let n=e(t.lastPartUpdate);if(!n)return"Working...";let r=p(n.type),{taskNameActive:i}=n;return i||r})}});function u(e){let t=s(e);return{setLastPartUpdate:function(e){i.store.set(t.lastPartUpdate,e)},dismissLoaderId:function(e){let n=i.store.get(t.dismissedLoaderIds);n.includes(e)||i.store.set(t.dismissedLoaderIds,[...n,e])},clearLastPartUpdate:function(){i.store.set(t.lastPartUpdate,null),i.store.set(t.lastPartUpdatedAt,0),i.store.set(t.currentPartKey,null)},setPartKey:function(e){i.store.set(t.currentPartKey,e),i.store.set(t.lastPartUpdatedAt,Date.now())},setIsVisible:function(e){i.store.set(t.isVisible,e)},setFullscreenIntent:function(e){i.store.set(t.fullscreenIntent,e)},hide:function(){i.store.set(t.isVisible,!1)},show:function(){i.store.set(t.isVisible,!0)},toggleFullscreenIntent:function(){let e=i.store.get(t.fullscreenIntent);i.store.set(t.fullscreenIntent,!e)}}}function d(){let e=(0,n.assertChatId)((0,n.useChatId)().chatId);return{atoms:c(e),actions:u(e)}}function p(e){switch(e){case"task-read-files-v1":return"Reading Files...";case"task-search-web-v1":return"Searching the Web...";case"task-search-repo-v1":return"Searching Repository...";case"task-diagnostics-v1":return"Running Diagnostics...";case"task-coding-v1":return"Coding...";case"task-thinking-v1":return"Thinking...";case"task-read-file-v1":return"Reading File...";default:return"Working..."}}e.s(["LOADABLE_RICH_PART_TYPES",0,o,"getLoaderActions",()=>u,"useCurrentChatLoader",()=>d])},521598,e=>{"use strict";var t=e.i(32170),n=e.i(667660),r=e.i(206037);function i(){let{user:e}=(0,t.useUser)(),{activeScope:i}=(0,n.useActiveScope)(),{planSlug:o}=(0,r.usePlanInfo)(!0,null==i?void 0:i.id);return{userOnFree:"v0-level0"===o&&!(null==e?void 0:e.isAdminMode)}}function o(){let{activeScope:e}=(0,n.useActiveScope)(),{planSlug:t}=(0,r.usePlanInfo)(!0,null==e?void 0:e.id);return{userPlanSlug:t}}e.s(["useUserOnFree",()=>i,"useUserPlanSlug",()=>o])},472166,e=>{"use strict";e.s(["OPT_RETRY_ID",()=>Q,"useV0Chat",()=>en]);var t=e.i(643908),n=e.i(743124),r=e.i(259112),i=e.i(246300),o=e.i(92479);e.i(563948);var a=e.i(407562),s=e.i(818273),l=e.i(449381),c=e.i(295224),u=e.i(979865),d=e.i(209819),p=e.i(767373),h=e.i(230869),f=e.i(745197),m=e.i(470259),g=e.i(120485),v=e.i(53223),x=e.i(654225),y=e.i(183673),b=e.i(342681),w=e.i(667660),j=e.i(906261),C=e.i(85989),k=e.i(306244),S=e.i(967122),N=e.i(81785),E=e.i(912074),D=e.i(246338),I=e.i(370912),A=e.i(696871),T=e.i(282931),M=e.i(18547),L=e.i(726988),P=e.i(639056),R=e.i(646851),_=e.i(572934),O=e.i(912106),F=e.i(418929);e.i(168204);var B=e.i(225695);e.i(904347);var V=e.i(37737),z=e.i(525258),H=e.i(297239),U=e.i(242759),G=e.i(207815),W=e.i(44337),q=e.i(284627),Z=e.i(204575),K=e.i(521598),$=e.i(554912),Y=e.i(76866),J=e.i(519738);let Q="opt-retry-message",X=[{name:"creditCardDetector",action:D.hasCreditCards,confirm:"We've detected a credit card number in your message. Are you sure you want to continue?"}];async function ee(e,t){let n=[];if(t)if(t instanceof FileList)for(let e of Array.from(t)){let{name:t,type:r,size:i}=e,o=await (0,C.readFileAsDataURL)(e);n.push({name:t,contentType:r,url:o,size:i})}else if(Array.isArray(t))for(let e of t){let{name:t,url:r,contentType:i,size:o,v0Type:a,content:s}=e;n.push({name:t,contentType:i,v0Type:a,url:r,size:o,content:s})}else throw Error(m.INVALID_ATTACHMENT_TYPE);return n}function et(e,t){let n=e["x-v0-project-id"],r=e["x-v0-project-name-base64"],i=e["x-v0-project-color"],o=e["x-v0-project-icon"],a=e["x-v0-project-creator-id"],s=e["x-v0-project-vercel-project-id"]||null;if(n&&r)return{projectId:n,name:atob(r),settings:{color:i,icon:o},vercelProjectId:s,isCreator:t===a}}function en(){let{onSubmit:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeScope:p,user:b}=(0,w.useActiveScope)(),C=b,D=(0,l.useSetActiveBlockState)(),Q=(0,l.useSetActiveBlockView)(),{messages:en,activeForkKey:ei,chatId:ea}=(0,o.useChatMessages)(),{isLoading:es,isSyncing:el}=(0,o.useChatLoadingState)(),{undo:ec}=(0,o.useChatUndoState)(),eu=(0,H.useT)(),{actions:ed,atoms:ep}=(0,F.useCurrentChatPrompt)(),{startEditingMessage:eh}=ed,ef=(0,o.useSetChatState)(),{setMetadata:em,project:eg}=(0,d.useChatMetadata)(),ev=(0,x.localDraftController)(ea,!1),{quote:ex,setQuote:ey}=(0,d.useChatQuote)(),{revalidate:eb,setData:ew}=(0,i.useChatHistory)(),[ej]=(0,_.useSuggestionsSetting)(),eC=(0,c.useLatest)(e),ek=(0,c.useLatest)(en),[,eS]=(0,f.useRateLimit)(),{usage:eN,updateDailyModelUsage:eE}=(0,z.useDailyModelUsage)(),{age:eD,pipl:eI,dmule:eA}=(0,U.useFlags)(),{userPlanSlug:eT}=(0,K.useUserPlanSlug)(),eM=(0,S.useActiveBlockIdRef)(),{setBlockCreatedAt:eL}=(0,I.useBlockCreatedAt)(),eP=(0,u.useRouter)(),eR=(0,n.useMemo)(()=>(0,E.getAnonId)(),[]),{stores:e_,refetch:eO}=(0,L.useConnectedIntegrations)({v0ProjectId:null==eg?void 0:eg.projectId,vercelProjectId:null==eg?void 0:eg.vercelProjectId,refreshInterval:0}),{refetchVercelProject:eF,envVars:eB}=(0,y.useVercelProject)({v0ProjectId:null==eg?void 0:eg.projectId}),eV=(0,c.useLatest)(eB),{uploadActiveBlockLogs:ez}=(0,$.useUploadActiveBlockLogs)(),eH=(0,l.useActiveBlockState)(),{exitToLatest:eU}=(0,Y.useRestoreBlockVersion)(null==eH?void 0:eH.id),{isLatest:eG}=(0,J.useBlockVersionInfo)(null==eH?void 0:eH.id),eW=(0,P.useAtomValue)(ep.isThinking),eq=(0,P.useAtomValue)(ep.isImageGenerations),eZ=(0,P.useAtomValue)(ep.modelId),eK=(0,P.useAtomValue)(ep.toolConfiguration).designSystemId,e$=eD?"v0-1.5-md":eZ||"v0-1.5-md",eY=(0,n.useCallback)(async(e,n,i)=>{var o,l,c,u,d;if(e.revalidateVercelEnvAndIntegrations){let[[e],t]=await Promise.all([eO(),eF()]);e&&(e_.data=e),(null==t?void 0:t.envVars)&&(eV.current=t.envVars)}if(el)return;for(let t of(eH&&!eG&&"new"===e.action&&eU(eH),X))if("content"in e&&e.content&&t.action((0,B.stringifyMessageContent)(e.content))&&!confirm(t.confirm))return;let f=!!eR;if((null==C?void 0:C.id)||!eR||(C={id:eR,username:"anon",avatar:"",plan:"anon",email:"",name:"Anonymous",teams:[],createdAt:"1970-01-01T00:00:00.000Z"}),!(null==C?void 0:C.id))return;let y=C.id,b=i?i.messages:ek.current,w=i?i.activeForkKey:ei,S=w,E=[...b],I=!1,L=e=>{e.preventDefault(),e.returnValue=""};try{let d,E;await eS();let U=(0,k.createNewAbortSignalForKey)(ea,()=>ef({isLoading:!1,isStreaming:!1,isContinuing:!1})),G=(null==n?void 0:n.type)==="resumed",K=(null==n?void 0:n.type)==="initial",$=0===b.length||K;n||null==(u=eC.current)||u.call(eC),ef({isLoading:!0}),$&&(window.history.pushState(null,"","/chat/".concat(ea)),(0,O.mutate)("chat:id",ea,!1),(0,x.localDraftController)(ea,!0).deleteLocalDraft());let Y=er({content:"content"in e&&e.content?e.content:{version:1,parts:[]},chatSubmitData:e,quote:ex,isResumingStream:G,messages:b,activeForkKey:w,authorId:y}),J=Promise.resolve(null);if(!$&&(null==Y||null==(o=Y.newUserMessage)?void 0:o.id)&&(J=ez({chatId:ea,userMessageId:Y.newUserMessage.id})),!Y)return void ef({isLoading:!1,isStreaming:!1,isContinuing:!1});ey(null),ef({prefillOptions:{query:void 0,projectId:void 0},isContinuing:"continue"===e.action,isLoading:"continue"!==e.action,isStreaming:"continue"===e.action,undo:{messages:b,forkKey:S,editingUserMessageId:"edit"===e.action?e.userMessageId:null}});let X=await ee(f,"attachments"in e?e.attachments:void 0);"new"!==e.action&&"edit"!==e.action&&((null==(c=Y.newUserMessage)||null==(l=c.attachments)?void 0:l.length)||0)>0&&X.push(...Y.newUserMessage.attachments);let{action:en,continueAssistantMessage:ei,newUserMessage:es,newActiveForkKey:el}=Y,ec=[...b];"type"in e&&es&&(es.type=e.type),es&&!Y.isFromQParam&&ec.push(es),ef({messages:ec,activeForkKey:el});let ed=document.getElementById(T.SCROLL_DOWN_BUTTON_ID);ed&&ed.click();let ep={};if((null==n?void 0:n.type)==="resumed"){let e=await (0,R.fetchResumeStream)({messageId:n.responseMessageId,signal:U,toastOpts:null});if(!e)throw Error("Failed to resume stream");d=e,ep=n.headers}else{let t=[];e_.error||(t=[...e_.data.marketplaceStores,...e_.data.nativeStores].map(W.getIntegrationAndInstanceName));let r=[];(null==n?void 0:n.type)==="initial"&&(r=n.connectedIntegrations);let i=[...r,...t],o=[];"envVars"in e&&e.envVars?o=e.envVars:(null==n?void 0:n.envVars)&&(o=n.envVars);let a=[...Object.values(eV.current||[]).map(e=>({id:e.id,key:e.key})),...o],s={};(null==n?void 0:n.projectId)&&(s={projectId:n.projectId});let l={};(null==n?void 0:n.messageAttachments)?l={attachments:n.messageAttachments}:X.length>0&&(l={attachments:X});let c=p&&!(0,j.isUserScope)(p)?p.slug:void 0;window.addEventListener("beforeunload",L),G||(0,v.track)("PromptSent",{planSlug:eT||null,promptId:Y.userMessageId,isImageGeneration:eq,origin:(null==en?void 0:en.type)||null,promptText:es?(0,B.stringifyMessageContent)(es.content).slice(0,1e3):null,startedAt:Date.now(),attachments:X.map(e=>({name:e.name||null,contentType:e.contentType||null})),projectId:(null==eg?void 0:eg.projectId)||null,designSystemId:eK||null}),await J;let u=await fetch("/chat/api/chat",{method:"POST",body:JSON.stringify({messageContent:null==es?void 0:es.content,messageId:null==es?void 0:es.id,forceResponse:"forceResponse"in e?e.forceResponse:void 0,chatId:ea,isNew:$,thinkingMode:Y.thinkingMode,messageMode:"new"===e.action?e.messageMode:void 0,figmaContext:"figmaContext"in e?e.figmaContext:void 0,userMessageType:"type"in e?e.type:void 0,forkKey:null==el?void 0:el.slice(0,-1),...s,action:en,...l,team:c,..."workflowState"in e?{workflowState:e.workflowState}:{},..."new"===e.action&&void 0!==e.autopilot?{autopilot:e.autopilot}:{},optimisticConnectedIntegrations:i,optimisticEnvVarKeys:a,modelConfiguration:{modelId:e$,imageGenerations:eq,thinking:eW},suggestedActionsEnabled:ej,..."new"===e.action&&null!==eK?{designSystemId:eK}:{}}),headers:{"Content-Type":"application/json"},signal:U});if(window.removeEventListener("beforeunload",L),!u.ok||!u.body){if(402===u.status)throw Error(m.OUT_OF_CREDITS);let e=await u.text();throw Error(e)}if(eA&&"v0-level0"===C.v0plan){let e=eN+1;eE(e),!$&&e>=A.DAILY_MODEL_USAGE_LIMIT&&(0,V.openDialog)({type:"upgradePlan",data:{customTitle:eu("rateLimit.daily.upgradeTitle")}})}(0,x.localDraftController)(ea,!1).deleteLocalDraft(),ep=Object.fromEntries(u.headers.entries()),d={type:"stream",reader:u.body.getReader()}}let eh=ep["x-v0-url-attachments"]?JSON.parse(atob(ep["x-v0-url-attachments"])):void 0;eh&&void 0!==es&&(ec[ec.length-1].attachments=[...ec[ec.length-1].attachments||[],...eh||[]],ef({messages:ec}));let ev=et(ep,null==p?void 0:p.id);ev&&em({project:ev});let ek=ep["x-v0-user-message-id"];if(!ek)throw Error(m.MISSING_USER_MESSAGE_ID);ei&&(ec=ec.filter(e=>"assistant"!==e.role||e.id!==ei.id));let eD=!1,eR=new TextDecoder,eO=ep["x-v0-response-message-id"];if(!eO)throw Error(m.MISSING_ASSISTANT_MESSAGE_ID);let eF=eo({responseMessageId:eO,action:en,newActiveForkKey:el,userMessageServerId:ek}),eB="continue"===e.action,eH=[],eU=()=>eB&&ei?ei.content:{type:"message-binary-format",value:eH},eG=null,eZ={},eY=!1;function P(){if(!eI)return;if(eY)return void eQ.setFullscreenIntent(!1);if(!eG)return;let e=eZ[eG.id]||eG;z(!0,e)}function _(e){if(eI&&eG&&(0,s.isFetchingDiagnostics)(e)){if(!(null==eM?void 0:eM.current)||eM.current===eG.id)return void P();(0,Z.preloadIframeForBlock)(eM.current,eG.id,()=>P())}}function F(n){U.throwIfAborted();try{var i;let t=JSON.parse(n);eH=(0,r.patch)(eH,t),eB&&(null==(i=eH.find(e=>"markdown"===(0,s.getRowType)(e)))?void 0:i[1])&&(eB=!1),(0,s.didRunOutOfCredits)(eH)&&(0,g.openOutOfCreditsDialog)((null==C?void 0:C.v0plan)||"v0-level0",eP),_(eH);let o=(0,s.getBlocksFromState)({type:"message-binary-format",value:eH},eO),a=(0,s.getMetadataFromState)(eH);if(!eD&&"string"==typeof a.title&&a.title&&(eD=!0,em({title:a.title,project:eg||{isCreator:!0,name:a.title,projectId:"",settings:{color:null,icon:null},vercelProjectId:null}}),$&&a.title&&ew(e=>[{title:a.title,chatId:ea,updatedAt:new Date,shareable:!1,privacy:"private",favorite:!1,optimistic:!0,authorId:y},...e.filter(e=>e.chatId!==ea)],!1)),E={parentId:ek,role:"assistant",content:eU(),context:a.docsContext,id:eO,blocks:o.map(e=>e.id),loadingText:a.loadingText,streaming:!1===eB,finishReason:a.finishReason||null,relevantFiles:a.relevantFiles,grepQueries:a.grepQueries,notifications:a.notifications,usage:a.usage,modelId:a.modelId,thinkingMode:null==Y?void 0:Y.thinkingMode,continuingMessageId:null==ei?void 0:ei.id,type:"type"in e&&"added-integration"===e.type?"added-integration":"message",createdAt:E.createdAt||new Date},ef({messages:[...ec,E],isLoading:!1,isStreaming:!0}),o.length>=1){let e=o[o.length-1];(!eI||eY)&&(e.id!==(null==eM?void 0:eM.current)||A.INLINE_BLOCK_TYPES.includes(e.type)||D(e)),eZ[e.id]=e}return o}catch(e){(0,v.track)("ChatHookError",{chatId:ea,errorCode:m.FAILED_TO_READ_ROW,errorMsg:"Failed to read row: ".concat(n)}),"production"!==t.default.env.VERCEL_ENV&&console.error(e,"Error reading row:",n);return}}E={parentId:ek,role:"assistant",content:eU(),id:eO,streaming:void 0===ei,finishReason:null,continuingMessageId:null==ei?void 0:ei.id,type:"message",createdAt:new Date},ef({messages:[...ec,E],activeForkKey:eF,saveLeafMessageId:!0}),I=!0;let eJ=new R.OfflineHandler,eQ=(0,q.getLoaderActions)(ea),eX=!1,e0=()=>{if(eX)return!0;let e=i?i.messages:b,t=i?i.activeForkKey:w;for(let n of e.filter(e=>null==t?void 0:t.includes(e.id)))if((0,s.getBlocksFromState)(n.content,n.id).length>0)return eX=!0,!0;return!1};function z(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(null==i?void 0:i.avoidAutoSwitchingBlock){let e=t[1];if(!e)return;a.toast.default("New message is ready to preview",{duration:5e3,action:{children:"View",onClick:()=>{let t=eZ[e.id];t&&Q(!0,t)}}});return}Q(...t)}async function H(e){if("finished-message"===e.type){E=e.message,ef({messages:[...ec,e.message],activeForkKey:eF}),e.activeBlock&&z(!0,e.activeBlock);return}let t="",n=null;for(eH=[];;){U.throwIfAborted();let r=await Promise.race([e.reader.read(),eJ.promise]);if(!r)throw Error("network error");let{value:i,done:o}=r;if(o)break;let a=t+(i instanceof Uint8Array?eR.decode(i):i),{isLlmError:s,isRetried:l,errorCategory:c="default"}=(0,h.isLlmError)(a),u=l?"retry_provider_server_error:".concat(c):"provider_server_error:".concat(c);if(s)throw ef({messages:[...ec,{...E,finishReason:u}]}),Error(m.LLM_CALL_ERROR);let d=a.split("\n");for(let e=0;e<d.length-1;e++){let t=F(d[e]),r=(null==t?void 0:t.length)&&t[t.length-1].id!==n;(!n||(null==eM?void 0:eM.current)===n||(null==eG?void 0:eG.id))&&r&&(eL(t[t.length-1].id,new Date().toISOString()),n=t[t.length-1].id,A.INLINE_BLOCK_TYPES.includes(t[t.length-1].type)||(eI?(e0()?"svelte"===t[t.length-1].language&&(eQ.setFullscreenIntent(!0),eY=!0):(eX=!0,eQ.setFullscreenIntent(!0),eY=!0),eY&&z(!0,t[t.length-1]),eG=t[t.length-1]):z(!0,t[t.length-1])))}t=d[d.length-1]}t&&F(t)}let e1=0,e2=0;for(;;)try{await H(d);break}catch(t){if(t instanceof Error&&"AbortError"===t.name||e1++>10)throw t;let e=await (0,R.fetchResumeStream)({messageId:eO,signal:U,toastOpts:{loadingMessage:"Reconnecting",successMessage:"Reconnected",lastReconnectedAt:e2}});if(!e)throw t;e2=Date.now(),d=e,eJ.resetPromises()}finally{eJ.cleanupOfflineListener()}ef({messages:[...ec,{...E,streaming:!1}],isStreaming:!1,isContinuing:!1,initialStreamPromise:void 0}),P(),(0,M.emitChatMessageFinished)(),$&&(await (0,N.invalidateRouterCache)(),eb()),(0,k.removeAbortController)(ea)}catch(t){if(window.removeEventListener("beforeunload",L),t instanceof Error&&"AbortError"===t.name)return;(0,M.emitChatMessageFinished)(),!I&&"onFailToPrompt"in e&&(null==(d=e.onFailToPrompt)||d.call(e)),ef({isLoading:!1,undo:null,isStreaming:!1,isContinuing:!1,initialStreamPromise:void 0,prefillOptions:{query:void 0,projectId:void 0},...!I?{activeForkKey:S,messages:E}:{}}),(0,k.abortKey)(ea),(0,g.handleChatError)(t,eP,"Failed to submit message. Start a new chat, retry, or edit your message.",{scopeSlug:(0,j.isUserScope)(p)||null==p?void 0:p.slug,chatId:ea,projectId:(null==eg?void 0:eg.projectId)||void 0,userPlan:C.v0plan||"v0-level0"})||a.toast.error("An unexpected error occurred. Please refresh the page and try again."),I||0!==E.length||eP.push("/chat")}},[C,ei,ek,eS,ea,ef,ev,ex,ey,eC,em,p,eg,ew,eM,D,el,Q,eP,eb]),eJ=(0,n.useCallback)(()=>{let e=ek.current;(0,k.abortKey)(ea);let t=e[e.length-1];if(eD&&t&&"assistant"===t.role&&t.id&&(0,G.stopAgent)({assistantMessageId:t.id,chatId:ea}).catch(e=>{(0,v.track)("StopAgentError",{assistantMessageId:t.id,error:e instanceof Error?e.message:String(e)})}),es&&ec){if(ef({activeForkKey:ec.forkKey,messages:ec.messages}),ec.editingUserMessageId){let e=ec.messages.find(e=>e.id===ec.editingUserMessageId&&"user"===e.role);e&&"user"===e.role&&eh({...e})}}else if(e.length>0){let t=e[e.length-1];"assistant"===t.role&&ef({messages:[...e.slice(0,-1),{...t,streaming:!1}]})}setTimeout(()=>ef({isStreaming:!1,isLoading:!1}),0)},[ea,ek,ec,eD,ef,es,eh]),eQ=(0,n.useRef)(eY),eX=(0,n.useRef)(ef),e0=(0,n.useRef)(eJ);eQ.current=eY,eX.current=ef,e0.current=eJ;let e1=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return eQ.current(...t)},[]),e2=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return eX.current(...t)},[]);return{submit:e1,stopLlmResponse:(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e0.current(...t)},[]),setChatState:e2}}function er(e){let{content:t,chatSubmitData:n,isResumingStream:r,quote:i,messages:o,activeForkKey:a,authorId:s}=e;switch(n.action){case"continue":case"retry":{let e;if(!a)throw Error(m.MISSING_FORK_KEY_FOR_CONTINUE_RETRY);let t=n.assistantMessageId,r=o.find(e=>"id"in e&&e.id===t&&"assistant"===e.role);if(!r||"assistant"!==r.role||!r.parentId)throw Error(m.NOT_FOUND);"continue"===n.action&&(e={...r,continuingMessageId:t});let i="retry"===n.action?(0,p.replaceIdInForkKey)(a,t,Q+(0,b.generateMessageId)()):a;return{action:{type:n.action,userMessageId:r.parentId,assistantMessageId:t},continueAssistantMessage:e,newActiveForkKey:i,thinkingMode:r.thinkingMode,userMessageId:r.parentId}}case"edit":{if(!t.parts.length)throw Error(m.EMPTY_MESSAGE_ERROR);if(!a)throw Error(m.MISSING_FORK_KEY_FOR_EDIT);ei(t,i);let e=n.userMessageId,r=o.find(t=>t.id===e);if((null==r?void 0:r.role)!=="user")throw Error(m.NOT_FOUND);let s=o.find(e=>e.parentId===r.id&&"assistant"===e.role),l=(0,b.generateMessageId)();return{newUserMessage:{role:"user",content:{...t,type:"parts"},id:l,attachments:n.attachments,parentId:r.parentId,type:"message",authorId:r.authorId,createdAt:new Date},userMessageId:r.id,thinkingMode:s&&"thinkingMode"in s?s.thinkingMode:void 0,action:{type:"edit",userMessageId:r.id},newActiveForkKey:(0,p.replaceIdInForkKey)(a,r.id,l)}}case"fix-with-v0":{if(ei(t,i),!t.parts.length)throw Error(m.EMPTY_MESSAGE_ERROR);let e=(0,b.generateMessageId)(),n=(0,p.addMessageIdToForkKey)(a,e),r={role:"user",content:{...t,type:"parts"},id:e,attachments:[],parentId:(0,p.getLeafMessageIdFromForkKey)(a),type:"fix-with-v0",authorId:s,createdAt:new Date};return{newUserMessage:r,userMessageId:r.id,newActiveForkKey:n,action:{type:"fix-with-v0"}}}case"new":{if(ei(t,i),1===o.length&&"user"===o[0].role)return{isFromQParam:!0,userMessageId:o[0].id,newUserMessage:o[0],newActiveForkKey:(0,p.addMessageIdToForkKey)(void 0,o[0].id)};if(!t.parts.length&&!r&&(!n.attachments||0===n.attachments.length))throw Error(m.EMPTY_MESSAGE_ERROR);if(r)return{newUserMessage:void 0,userMessageId:"",newActiveForkKey:a};let e=(0,b.generateMessageId)(),l=(0,p.addMessageIdToForkKey)(a,e),c={role:"user",content:{...t,type:"parts"},id:e,attachments:n.attachments,parentId:(0,p.getLeafMessageIdFromForkKey)(a),type:"message",authorId:s,createdAt:new Date};return{newUserMessage:c,userMessageId:c.id,newActiveForkKey:l,thinkingMode:void 0}}default:throw Error(m.UNEXPECTED_ERROR)}}function ei(e,t){if(t){for(let n of e.parts)if("mdx"===n.type){n.content="".concat(t.split("\n").map(e=>"> "+e).join("\n"),"\n\n").concat(n.content);return}e.parts.unshift({type:"mdx",content:t.split("\n").map(e=>"> "+e).join("\n")})}}function eo(e){let{responseMessageId:t,action:n,newActiveForkKey:r,userMessageServerId:i}=e;if((null==n?void 0:n.type)==="continue"||(null==n?void 0:n.type)==="retry")return(0,p.createSiblingForkKey)(r,t);let o=(0,p.createSiblingForkKey)(r,i);return(0,p.addMessageIdToForkKey)(o,t)}},770858,e=>{"use strict";e.s(["CodeBlock",()=>ee,"MemorizedHighlighter",()=>X],770858);var t=e.i(509473),n=e.i(743124),r=e.i(338993),i=e.i(636139),o=e.i(651219),a=e.i(87467),s=e.i(739126),l=e.i(304649),c=e.i(287098),u=e.i(295224),d=t,p=l,h=n,f=e.i(176248);e.i(563948);var m=e.i(407562),g=e.i(667660),v=e.i(196269),x=e.i(209819),y=e.i(503855),b=e.i(707827),w=e.i(245294),j=e.i(486239),C=e.i(485370),k=e.i(451885),S=e.i(110909),N=e.i(346970),E=e.i(504066),D=e.i(236699),I=e.i(65151),A=e.i(899488),T=e.i(18441),M=e.i(472166),L=e.i(592258),P=e.i(992879),R=e.i(726988),_=e.i(674523),O=e.i(44337),F=N;function B(e){let{data:t,isLoading:n,mutate:r,error:i}=(0,F.default)(e?["chat:sql-exec-provider",e]:null,async()=>{let t=await fetch("/chat/api/chat/sql-exec-provider?chatId=".concat(e)),{sqlExecProvider:n}=await t.json(),r=n;return(0,O.isSqlExecProviderName)(r)?r:null});return{sqlExecProvider:t,isLoading:n,error:i,refetchSqlExecProvider:r}}var V=e.i(92479),z=e.i(358847),H=(0,z.createServerReference)("60dbb82d80d2b0ce04f9b453adac64d53c5f965b82",z.callServer,void 0,z.findSourceMapURL,"updateChatSqlExecProvider"),U=e.i(762585),G=e.i(696871),W=e.i(418929);e.i(168204);var q=e.i(225695);let Z=["CREATE","ALTER","DROP","TRUNCATE"];function K(e){let{className:t,headerClassName:n,language:r,actions:i,blockId:o,source:a,fileName:s,closed:l,sqlExecutionState:c,transaction:u,highlightedCode:C}=e,{submit:k}=(0,M.useV0Chat)(),{activeScopeSlug:S}=(0,g.useActiveScope)(),{chatId:D}=(0,V.useChatId)(),{project:A,canWriteToChat:L}=(0,x.useChatMetadata)(),{projectId:P,vercelProjectId:O}=null!=A?A:{},[F,z]=(0,h.useState)(!1),{stores:{data:{marketplaceStores:U}}}=(0,R.useConnectedIntegrations)({vercelProjectId:null!=O?O:void 0,v0ProjectId:null==A?void 0:A.projectId,refreshInterval:0}),K=(0,h.useMemo)(()=>U.filter(e=>e&&e.product&&_.SQL_STORE_SLUGS.includes(e.product.slug)).map(e=>({id:e.id,slug:e.product.slug,name:e.product.name,icon:"upstash-kv"===e.product.slug?"https://vercel.com/api/www/avatar/".concat(e.product.integration.icon):"https://vercel.com/api/www/avatar/".concat(e.product.iconUrl)})),[U]),{sqlExecutionState:Q,updateSqlExecutionState:X}=(0,T.useSqlExecutionState)(o),[ee,et]=(0,h.useState)(!1),{sqlExecProvider:en,refetchSqlExecProvider:er,isLoading:ei}=B(L?D:void 0),[eo,ea]=(0,h.useState)(null!=en?en:U.length>0?U[0].id:"");(0,h.useEffect)(()=>{L&&en&&ea(en)},[L,en,ea]);let es=ee||!o||!a||!l||ei,{data:el,mutate:ec}=(0,N.default)(["block:output",o]),eu="applied"===Q||"error"===Q,ed="cancelled"===Q,ep="error"===Q||"error"in(null!=el?el:{}),eh=!!(el&&!ep&&el.stderr.length>0);(0,h.useEffect)(()=>{o&&c&&void 0===Q&&X(c)},[o,c,Q,X]);let{isCopied:ef,copyToClipboard:em}=(0,E.useCopyToClipboard)({timeout:2e3});(0,V.useChatMessages)();let{actions:eg}=(0,W.useCurrentChatPrompt)(),{handleInputChange:ev,focusPrompt:ex}=eg,ey=async()=>{if(!o)return void m.toast.error("Error",{description:"Missing block ID"});try{et(!1),X("cancelled");let e=await (0,y.updateSqlExecutionStateAction)(o,"cancelled");"error"in e&&X(Q)}catch(e){m.toast.error("Error",{description:"An unexpected error occurred"})}},eb=async()=>{if(!o||!a||!S||!P||!D){let e=o?a?S?P?"chat ID":"project ID":"active scope":"source":"block ID";m.toast.error("Error",{description:"Missing ".concat(e)});return}et(!0);try{let e;if(!en&&K.length>=2){let e=await H(D,eo);if("error"in e)return void m.toast.error("Error",{description:e.error||"An error occurred while updating the SQL integration provider"});er()}let t=await (0,v.doSqlExecution)({props:{language:"sql",blockId:o,source:a,meta:{file:s,transaction:u},closed:!1,originalCode:void 0},v0ProjectId:P,initialVercelProjectId:null!=O?O:void 0,sqlExecProvider:null!=en?en:void 0});ec(t);let n="error"in t||t.stderr.length>0,r=n?"error"in t?t.error:t.stderr[0].join("\n"):void 0;if(X(n?"error":"applied"),n&&m.toast.error("SQL Execution Failed",{description:r}),(async()=>{let e=await (0,y.updateSqlExecutionStateAction)(o,n?"error":"applied");"error"in e&&X(Q)})(),n)return void await k({action:"new",attachments:[],content:(0,q.createMDXMessageContent)("The SQL code block failed to execute. The error was: ".concat(r,". ")),type:"message"});let i=Z.some(e=>RegExp("\\b".concat(e,"\\b"),"i").test(a));if(eu||!i){if(et(!1),!i){let e=(0,I.getOutputString)(t),n=e.length>G.MAX_SQL_ATTACHMENT_SIZE?e.slice(0,G.MAX_SQL_ATTACHMENT_SIZE)+"...":e;await k({action:"new",attachments:[],content:(0,q.createMDXMessageContent)("The SQL code block executed successfully. Very concisely summarize what happened.\n\nOutput: ".concat(n)),type:"added-integration",workflowState:"sql-executed"})}return}let l=[];try{e=await (0,v.doSqlExecution)({props:{language:"sql",source:"SQL_SCHEMA_QUERY",meta:{file:"",transaction:"false"},closed:!1,originalCode:void 0},v0ProjectId:P,initialVercelProjectId:null!=O?O:void 0,operationId:"".concat(o,"-schema-result")})}catch(t){e={error:t instanceof Error?t.message:"An unexpected error occurred"},m.toast.error("Error",{description:"An error occurred while fetching the database schema."})}if(et(!1),!("error"in e)){let t=e.stdout[0][0],n=t.length>G.MAX_SQL_ATTACHMENT_SIZE?t.slice(0,G.MAX_SQL_ATTACHMENT_SIZE)+"...":t;l.push({name:"database-schema",content:n,url:"database-schema",size:n.length})}await k({action:"new",attachments:l,content:(0,q.createMDXMessageContent)("The SQL code block executed successfully.".concat(l.length>0?" The database schema is attached to this message.":"")),type:"added-integration",workflowState:"create-database-tables"})}catch(e){et(!1),X("error"),console.error(e),await (0,y.updateSqlExecutionStateAction)(o,"error"),m.toast.error("Error",{description:"An unexpected error occurred"})}},ew=async()=>{if(ef)return;let e=(0,I.getOutputString)(el);await em(e)},ej=(0,h.useMemo)(()=>K.length<2||!L?null:(0,d.jsx)(J,{stores:K,selectedStoreSlug:eo,setSelectedStoreSlug:ea,refetchSqlExecProvider:er,isLoading:ei}),[K,eo,ea,er,ei,L]);return(0,d.jsxs)("div",{className:(0,p.cn)("codeblock max-h-none! relative flex size-full flex-col overflow-hidden rounded-lg border font-sans",eu||ed||!L?"border-v0-alpha-400":"border-v0-gray-900 ring-2 ring-v0-gray-100",t),"data-seg":"root",children:[(0,d.jsxs)("div",{className:"group/inline-code-block relative flex size-full flex-col overflow-hidden",children:[(0,d.jsxs)("div",{className:(0,p.cn)("bg-v0-background-200 flex h-10 w-full shrink-0 items-center justify-between gap-2 rounded-t-lg border-b pl-2.5 pr-1.5",n),"data-seg":"skip",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1.5",children:[r?(0,d.jsx)("span",{className:"text-v0-gray-900",children:l?(0,d.jsx)(j.Database,{className:"size-3.5"}):(0,d.jsx)(b.Spinner,{size:14})}):null,(0,d.jsx)("span",{className:"line-clamp-1 font-mono text-[13px] leading-none text-v0-gray-900",children:s})]}),(0,d.jsx)("div",{className:"flex items-center space-x-1 text-v0-gray-900",children:i})]}),(0,d.jsxs)("div",{className:(0,p.cn)("group relative size-full",!ed&&"pb-8",!F&&"max-h-[250px]! overflow-y-hidden!"),children:[!F&&(0,d.jsx)("div",{className:"code-wrapper-container absolute flex size-full items-end justify-center",children:(0,d.jsx)("div",{className:(0,p.cn)("expand-button from-background/90 via-background/75 bg-linear-to-t z-10 hidden h-10 w-full translate-y-px items-center justify-center to-transparent px-1",ed||!L?"mb-0":"mb-10"),children:(0,d.jsxs)(f.Button,{className:"h-7 w-full rounded-md",variant:"ghost",onClick:()=>z(!0),children:[(0,d.jsx)(w.ChevronDown,{className:"size-3.5"}),(0,d.jsx)("span",{className:"sr-only",children:"Expand Code Block"})]})})}),C]}),L&&(0,d.jsx)($,{disabled:es,isExecuting:ee,isCancelled:ed,hasExecuted:eu,isBlockOutputError:ep,isAnyStdErr:eh,handleApplySql:eb,handleCancelSql:ey,handleFix:()=>{ev({initialValue:"The code:\n\n```\n".concat(a,"\n```\n\nProduced this output:\n\n").concat((0,I.getOutputString)(el),"\n\nPlease fix it."),force:!0,save:!0}),ex()},sqlDatabaseSelector:ej})]}),(0,d.jsx)(Y,{blockOutput:el,hasExecuted:eu,isCancelled:ed,isCopied:ef,onCopy:ew})]})}function $(e){let{isExecuting:t,isCancelled:n,disabled:r,hasExecuted:i,isBlockOutputError:o,isAnyStdErr:a,handleCancelSql:s,handleApplySql:l,handleFix:c,sqlDatabaseSelector:u}=e;if(n)return null;let h=t||a?null:o?(0,d.jsx)("div",{className:"font-mono text-[13px] text-v0-red-800",children:"Failed"}):i?(0,d.jsx)("div",{className:"font-mono text-[13px] text-v0-gray-900",children:"Applied"}):(0,d.jsx)(f.Button,{size:"sm",className:"h-7 rounded-md",disabled:r,variant:"outline",onClick:s,children:"Cancel"}),m=(0,d.jsxs)(f.Button,{size:"sm",className:"h-7 rounded-md",onClick:l,disabled:r,variant:i?"outline":"default",children:[t?(0,d.jsx)(b.Spinner,{size:16}):i?(0,d.jsx)(k.RotateCounterClockwise,{}):null,(0,d.jsx)("span",{children:t?"Applying":i?"Re-run":"Run Code"})," "]}),g=i&&a&&!t?(0,d.jsxs)(f.Button,{onClick:c,size:"sm",className:"h-7 rounded-md",disabled:r,children:["Fix with ",(0,d.jsx)(C.LogoV0,{className:"-ml-0.5"})]}):null;return(0,d.jsxs)("div",{className:(0,p.cn)("bg-v0-background-100 absolute bottom-0 z-10 flex h-10 w-full shrink-0 items-center rounded-b-lg px-1.5",u?"justify-between":"justify-end"),children:[u,(0,d.jsxs)("div",{className:(0,p.cn)("flex items-center",i?"gap-3":"gap-1.5"),children:[h,m,g]})]})}function Y(e){let{blockOutput:t,hasExecuted:n,isCancelled:r,isCopied:i,onCopy:o}=e;if(r)return null;let a=n&&t&&!("error"in t),s=a&&0===t.stdout.length&&0===t.stderr.length,l=a&&1===t.stdout.length&&1===t.stdout[0].length&&"[]"===t.stdout[0][0],c=a&&1===t.stdout.length&&1===t.stdout[0].length&&null===t.stdout[0][0],u=s||l||c;return a&&!u?(0,d.jsxs)("div",{className:"bg-v0-background-200 group/sql-output relative flex w-full flex-col rounded-b-lg border-t",children:[(0,d.jsx)(A.CodeBlockButton,{"aria-label":"Copy",onClick:o,outline:!0,tooltip:"Copy",className:"absolute right-1.5 top-1.5 z-10 hidden group-hover/sql-output:flex",children:(0,d.jsx)(D.CopyCheck,{isCopied:i,size:14})}),(0,d.jsx)(S.CodeOutput,{className:"h-full max-h-64",value:t,inline:!0})]}):null}function J(e){let{stores:t,selectedStoreSlug:n,setSelectedStoreSlug:r,refetchSqlExecProvider:i,isLoading:o}=e,{chatId:a}=(0,V.useChatId)(),s=(0,h.useMemo)(()=>t.find(e=>e.slug===n),[t,n]),l=async e=>{if(a){r(e);try{let t=await H(a,e);if("error"in t){m.toast.error("Error",{description:t.error||"An error occurred while updating the SQL integration provider"}),r(n);return}await i()}catch(e){m.toast.error("Error",{description:"An error occurred while updating the SQL integration provider"}),r(n)}}};return o?(0,d.jsx)(U.Skeleton,{className:"h-7 w-28 rounded-md"}):(0,d.jsx)("div",{children:(0,d.jsxs)(L.Select,{value:n,onValueChange:l,children:[(0,d.jsx)(L.SelectTrigger,{className:"[&>svg]:size-3! h-7 gap-2 pl-2",children:(0,d.jsx)(L.SelectValue,{children:(0,d.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[(null==s?void 0:s.icon)?(0,d.jsx)(P.default,{src:s.icon,alt:s.name,width:16,height:16,className:"rounded-full"}):(0,d.jsx)("div",{className:"size-4 rounded-full bg-v0-gray-100"}),null==s?void 0:s.name]})})}),(0,d.jsx)(L.SelectContent,{children:t.map(e=>(0,d.jsx)(L.SelectItem,{value:e.slug,children:(0,d.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[(0,d.jsx)(P.default,{src:e.icon,alt:e.name,width:16,height:16,className:"rounded-full"}),e.name]})},e.slug))})]})})}let Q=(0,o.default)(()=>e.A(129e3).then(e=>e.MonacoEditor),{loadableGenerated:{modules:[919001]},ssr:!1}),X=(0,n.memo)(function(e){let r,{value:o,language:a,showLineNumbers:s,wrapLongLines:u,minLineNumberChars:d=2,isTabbed:p,originalCode:h,fixingBadLines:f,style:m}=e,g=o,v=(0,i.getPrismLanguage)(a),x=(0,n.useMemo)(()=>{if(h)return h.split("\n")},[h]),y=(g.match(/\n/g)||[]).length;if((!g||0===y)&&h)y=(h.match(/\n/g)||[]).length,r=e=>({className:(0,l.cn)("opacity-50",1===e&&void 0===f&&"block w-full animate-pulse bg-gray-100 opacity-100",(null==f?void 0:f.includes(e+1))&&"block w-full animate-pulse bg-red-100 opacity-100")}),g=h;else if(x&&x.length>y-1){g.endsWith("\n")&&(g=g.slice(0,-1));let e=g.lastIndexOf("\n"),t=(y=((g=g.slice(0,e>0?e:void 0)).match(/\n/g)||[]).length)+1,n=x.slice(y+1),i=n.join("\n");y+=n.length,r=e=>({className:(0,l.cn)(e===t&&"block w-full bg-blue-400/20",e>t&&"opacity-50")}),i&&(g=g+"\n"+i)}return(0,t.jsx)(c.PrismAsync,{PreTag:"div",customStyle:{display:"flex",margin:0,width:"max-content",height:"min-content",padding:p?"12px 12px 10px 12px":"8px 10px",textShadow:"none",borderRadius:"0 0 calc(var(--radius) - 2px) calc(var(--radius) - 2px)",WebkitOverflowScrolling:"touch",backgroundColor:"transparent",lineHeight:"1.55",fontSize:"0.8125rem",...m},language:v,lineNumberContainerStyle:{userSelect:"none",whiteSpace:"break-spaces",textAlign:"right",display:"flex",flexDirection:"column"},lineNumberStyle:{display:"inline-block",minWidth:"".concat(Math.max(y.toString().length,d),"ch"),padding:0,margin:"0 12px 0 0",color:"hsl(var(--gray-400))",userSelect:"none"},codeTagProps:{style:{fontFamily:"var(--font-geist-mono)"}},lineProps:r,showLineNumbers:s,useInlineStyles:!1,wrapLines:!0,wrapLongLines:u,children:g})}),ee=(0,n.memo)(e=>{let{language:o,value:c,blockId:d,originalCode:p,allowQuoting:h=!1,allowCopyCode:f=!0,allowDownloadCode:m=!0,allowClose:g=!1,closeHandler:v=null,className:x,headerClassName:y,fixingBadLines:b,codeWrapperClassName:w,fileName:j,showLineNumbers:C=!1,wrapLongLines:k=!1,additionalHeaderActions:S,caller:N,editable:E,showQuickEditAnimation:D,closed:I,onEdit:A,editValue:T,type:M,location:L,onExecutionComplete:P,sqlExecutionState:R,transaction:_}=e,O="inline"!==N,F=(0,u.useLatest)(A),B=(0,n.useCallback)(e=>{if(void 0!==e){var t;null==(t=F.current)||t.call(F,e)}},[F]),{showDiffs:V}=(0,s.useDiffView)({blockId:d,fileName:j||"file.txt",originalCode:p,newCode:c}),z=(0,i.getPrismLanguage)(o),H=I&&null!=T?T:c,U=(0,t.jsx)(a.CodeBlockActions,{additionalHeaderActions:S,allowClose:g,allowCopyCode:f,allowDownloadCode:m,originalCode:p,blockId:d,closed:I,caller:N,closeHandler:v,fileName:j||"file.txt",isTabbed:O,value:H,isExecutable:null==j?void 0:j.includes("scripts"),language:o,onExecutionComplete:P}),G=(0,t.jsx)("div",{className:"size-full text-v0-gray-900 group-has-[.language-text]:text-black group-has-[.token]:text-black","data-seg":h?"code-root":void 0,children:(0,t.jsx)(X,{isTabbed:O,originalCode:p,fixingBadLines:b,language:o,showLineNumbers:C,value:c,wrapLongLines:k})}),W={className:x,headerClassName:y,language:o,showLineNumbers:C,fileName:j||("inline-sql"===M?"script.sql":"file.txt"),actions:U,syntax:p&&D||"inline"===N?(0,t.jsx)("div",{className:(0,l.cn)("group size-full overflow-scroll",w),children:G}):(0,t.jsx)(Q,{language:z,value:H,diffOriginalCode:V?p:null,closed:I,onEdit:B,disabled:!E,location:L})};return O?(0,t.jsx)(r.TabbedCodeBlock,{...W}):"inline-sql"===M?(0,t.jsx)(K,{...W,highlightedCode:G,blockId:d,source:c,closed:I,sqlExecutionState:R,transaction:_}):(0,t.jsx)(r.InlineCodeBlock,{...W})});ee.displayName="CodeBlock"},595961,e=>{"use strict";e.s(["SyntaxHighlighter",()=>r]);var t=e.i(509473),n=e.i(770858);function r(e){let{language:r,children:i,closed:o,sqlExecutionState:a,blockId:s="syntax-highlighter-block",transaction:l,type:c,fileName:u}=e;return(0,t.jsx)(n.CodeBlock,{allowCopyCode:!0,allowDownloadCode:!1,caller:"inline",className:"not-prose max-h-[500px] md:max-h-[700px]",headerClassName:"bg-muted",language:r,showLineNumbers:!1,value:i,closed:o,blockId:s,originalCode:void 0,showQuickEditAnimation:!1,sqlExecutionState:a,transaction:l,type:c,fileName:u})}},921823,455925,e=>{"use strict";var t=e.i(936096);let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.5 2.5V1.75H4V2.5V13.5V14.25H5.5V13.5V2.5ZM12 2.5V1.75H10.5V2.5V13.5V14.25H12V13.5V2.5Z" fill="currentColor"/>');e.s(["Pause",0,n],921823);let r=(0,t.withNewIcon)('<path d="M9 7L12.5 2.5" stroke="var(--ds-red-700)" stroke-width="1.5"/>\n  <path d="M10.5 9.5L15.75 10.5" stroke="var(--ds-blue-600)" stroke-width="1.5"/>\n  <path d="M10 8L15.75 6" stroke="var(--ds-teal-600)" stroke-width="1.5"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.14568 3.56625L7 2L7.85432 3.56625L12.1818 11.5L13 13H11.2914H2.70863H1L1.81818 11.5L3.31818 8.75H0V7.25H4.13636L6.14568 3.56625ZM3.52681 11.5L7 5.13249L10.4732 11.5H3.52681Z" fill="currentColor"/>');e.s(["PrismColor",0,r],455925)},316799,e=>{"use strict";e.s(["useLastOpenedBlock",()=>s]);var t=e.i(743124),n=e.i(449381),r=e.i(92479),i=e.i(818273),o=e.i(696871);let a=e=>"last-opened-block:".concat(e);function s(){let{messages:e,chatId:s,activeForkKey:l}=(0,r.useChatMessages)(),c=(0,n.useSetActiveBlockView)();return{reopenLastBlock:(0,t.useCallback)(()=>{var t,n;let r=localStorage.getItem(a(s));if(r)for(let n of e.filter(e=>null==l?void 0:l.includes(e.id))){let e=(0,i.getBlocksFromState)(null!=(t=n.content)?t:"",n.id).find(e=>e.id===r);if(e)return c(!0,e),!0}for(let t of[...e].reverse().filter(e=>null==l?void 0:l.includes(e.id))){let e=(0,i.getBlocksFromState)(null!=(n=t.content)?n:"",t.id).filter(e=>{var t;return!o.INLINE_BLOCK_TYPES.includes(null!=(t=e.meta.type)?t:"")});if(0!==e.length)return c(!0,e[e.length-1]),!0}return!1},[e,c,s,l]),saveLastOpenedBlock:(0,t.useCallback)(e=>{e?localStorage.setItem(a(s),e):localStorage.removeItem(a(s))},[s])}}},863785,978855,e=>{"use strict";var t=e.i(92479),n=e.i(346970),r=e.i(743124);function i(){let{chatId:e}=(0,t.useChatId)(),{data:i,mutate:o}=(0,n.default)(["block:template-ids",e]);return{getBlockTemplateId:(0,r.useCallback)(e=>{var t;return null!=(t=null==i?void 0:i.get(e))?t:void 0},[i]),setBlockTemplateId:(0,r.useCallback)((e,t)=>{o(new Map(null==i?void 0:i.set(e,t)))},[i,o])}}e.s(["useBlockTemplateId",()=>i],863785);var o=e.i(509473),a=r,s=e.i(716360),l=e.i(529693),c=e.i(563152),u=e.i(304649),d=e.i(244078),p=e.i(297239);let h=(0,o.jsx)(c.ChevronDownSmall,{className:"text-v0-gray-900! transition-colors group-hover/thinking:text-gray-900!"});function f(e){let{text:t,children:n,isLoading:r=!1,forceOpen:i=!1,triggerClassName:c}=e,f=(0,p.useT)(),g=null!=t?t:f("messages.loadingText"),v=a.default.useRef(null),x=(0,o.jsx)(d.Content,{className:"group/content data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up overflow-hidden pt-2",children:(0,o.jsx)("div",{ref:v,className:"transition-[filter,opacity] duration-500 group-data-[state=closed]/content:opacity-0 group-data-[state=open]/content:opacity-100 group-data-[state=closed]/content:blur-lg group-data-[state=open]/content:blur-0",children:n})}),y=(0,o.jsxs)("div",{className:(0,u.cn)("group/thinking flex w-full min-w-0 flex-1 flex-row items-center gap-1 text-sm",c),children:[(0,o.jsx)("div",{className:"transition-colors group-hover/thinking:text-gray-900",children:g}),(0,o.jsx)("div",{className:(0,u.cn)("translate-y-px transition-all group-data-[state=open]/trigger:rotate-180"),children:n?h:null})]});return(0,o.jsx)(d.Root,{className:"not-first:-mt-1 text-v0-gray-900 [&+.block-preview]:mt-4",type:"single","data-seg":"skip",collapsible:!0,value:i?"thinking":void 0,onValueChange:e=>{"thinking"===e&&v.current&&(v.current.children[0].style.opacity="1")},children:(0,o.jsxs)(d.Item,{value:"thinking",children:[(0,o.jsx)(d.Trigger,{className:(0,u.cn)("group/trigger w-full",!n&&"pointer-events-none -translate-y-px"),tabIndex:n?void 0:-1,children:(0,o.jsx)(s.AnimatePresence,{mode:"wait",children:(0,o.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex",children:r?(0,o.jsx)(m,{children:y}):y},g)})}),n||i?x:null]})})}function m(e){let{children:t,className:n}=e;return(0,o.jsx)(l.motion.div,{animate:{backgroundPosition:["100% 50%","-100% 50%"]},transition:{duration:1.5,repeat:1/0,ease:"linear"},style:{background:"linear-gradient(90deg, hsl(var(--gray-400)) 0%, hsl(var(--gray-400)) 35%, hsl(var(--gray-900)) 50%, hsl(var(--gray-400)) 65%, hsl(var(--gray-400)) 100%)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text"},className:(0,u.cn)("flex items-center text-transparent",n),children:t})}e.s(["LoadingText",()=>m,"Thinking",()=>f],978855)},847252,e=>{"use strict";e.s(["useRecoverFile",()=>o]);var t=e.i(743124),n=e.i(926224),r=e.i(583965),i=e.i(407562);function o(e){let{blockId:o,history:a,activeForkKey:s,updateBlockData:l,sourceFiles:c,currentBlockIndex:u}=e,[d,p]=(0,t.useTransition)(),[h,f]=(0,t.useState)(null),{refresh:m}=(0,r.useBrowserFrame)();return{handleRecoverFile:(0,t.useCallback)(e=>{let t=null,r=u,d=new Set(s);for(;!t&&r>=0;){let i=a[r];if(r-=1,"code-project"!==i.type||!d.has(i.messageId))continue;let s=(0,n.parseMultiFileSource)({source:i.source,blockType:"code-project",blockId:o}).find(t=>t.meta.file===e&&"...deleted..."!==t.source.replaceAll(" ","").trim());s&&(t=s.source)}if(!t)return void i.toast.error("Could not find the file to recover");let h=[...c];for(let n of h)if(n.meta.file===e){n.isDeleted=!1,n.isRecovered=!0,n.isMerged=!1,n.source=t;break}f(e),p(async()=>{try{if(!(await l(h)).success)throw Error("Failed");i.toast.success("File recovered successfully")}catch(e){i.toast.error("Failed to recover the file")}}),m()},[c,m,l,s,o,u,a]),isRecoveringFile:d,recoveringFile:h}}},530135,e=>{"use strict";e.i(509473);var t=e.i(751660);(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.93934 2.06066L8 1L9.06066 2.06066L13.9393 6.93934L15 8L13.9393 9.06066L9.06066 13.9393L8 15L6.93934 13.9393L2.06066 9.06066L1 8L2.06066 6.93934L6.93934 2.06066ZM3.12132 8L8 12.8787L12.8787 8L8 3.12132L3.12132 8Z" fill="#1D4ED8"/>');let n=(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.47141 3.13809L6.94281 2.66669L6 1.72388L5.5286 2.19528L2.19526 5.52861C1.93491 5.78896 1.93491 6.21107 2.19526 6.47142L5.5286 9.80476L6 10.2762L6.94281 9.33335L6.47141 8.86195L4.35948 6.75002H9.66667C10.0497 6.75002 10.429 6.82546 10.7828 6.97204C11.1367 7.11861 11.4582 7.33345 11.7291 7.60429C11.9999 7.87513 12.2147 8.19666 12.3613 8.55053C12.5079 8.90439 12.5833 9.28366 12.5833 9.66669C12.5833 10.0497 12.5079 10.429 12.3613 10.7828C12.2147 11.1367 11.9999 11.4582 11.7291 11.7291C11.4582 11.9999 11.1367 12.2148 10.7828 12.3613C10.429 12.5079 10.0497 12.5834 9.66667 12.5834H7.33333H6.58333V14.0834H7.33333H9.66667C10.2467 14.0834 10.821 13.9691 11.3569 13.7472C11.8927 13.5252 12.3796 13.1999 12.7897 12.7897C13.1998 12.3796 13.5252 11.8927 13.7471 11.3569C13.9691 10.821 14.0833 10.2467 14.0833 9.66669C14.0833 9.08668 13.9691 8.51235 13.7471 7.9765C13.5252 7.44065 13.1998 6.95376 12.7897 6.54363C12.3796 6.13351 11.8927 5.80818 11.3569 5.58622C10.821 5.36426 10.2467 5.25002 9.66667 5.25002H4.35948L6.47141 3.13809Z" fill="currentColor"/>');(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M10.5304 2.13629L10.0001 1.60596L8.93942 2.66662L9.46975 3.19695L11.5228 5.24995H6.33341C5.16204 5.24995 4.03865 5.71528 3.21036 6.54356C2.38207 7.37185 1.91675 8.49524 1.91675 9.66662C1.91675 10.2466 2.03099 10.8209 2.25295 11.3568C2.47491 11.8927 2.80023 12.3795 3.21036 12.7897C4.03865 13.618 5.16204 14.0833 6.33341 14.0833H8.66675H9.41675V12.5833H8.66675H6.33341C5.55987 12.5833 4.818 12.276 4.27102 11.729C4.00018 11.4582 3.78534 11.1366 3.63877 10.7828C3.49219 10.4289 3.41675 10.0496 3.41675 9.66662C3.41675 8.89307 3.72404 8.1512 4.27102 7.60422C4.818 7.05724 5.55987 6.74995 6.33341 6.74995H11.5228L9.46975 8.80295L8.93942 9.33328L10.0001 10.3939L10.5304 9.86361L13.8637 6.53028C14.1566 6.23739 14.1566 5.76251 13.8637 5.46962L10.5304 2.13629Z" fill="currentColor"/>'),(0,t.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.78027 1.78009L2.29198 3.24697L6.04198 13.997L6.59312 15.5769L7.40575 14.1142L9.76699 9.86393C9.78966 9.82312 9.82331 9.78948 9.86412 9.76681L14.1144 7.40556L15.5771 6.59293L13.9972 6.04179L3.24716 2.29179L1.78027 1.78009ZM11.9232 6.90695L9.13565 8.45557C8.84998 8.61428 8.61446 8.8498 8.45575 9.13547L6.90714 11.923L4.21998 4.2198L11.9232 6.90695Z" fill="currentColor"/>');let r=(0,t.withNewIcon)('\n    <path d="M7.19559 1.58153L8.51442 1.58153C9.57531 1.58153 10.5927 2.00297 11.3429 2.75315L13.3372 4.74754C13.4466 4.8569 13.5798 4.93941 13.7264 4.98857L14.8455 5.3638C15.1976 5.48184 15.3027 5.92886 15.0402 6.19141L12.6878 8.54377C12.4205 8.81103 11.9648 8.69655 11.8556 8.33472L11.5725 7.39713C11.5179 7.21622 11.2901 7.15898 11.1564 7.29261L3.91332 14.5358C3.23129 15.2178 2.1255 15.2178 1.44347 14.5358C0.761448 13.8538 0.761448 12.748 1.44347 12.066L8.80323 4.7062C8.90164 4.60779 8.90074 4.44796 8.80123 4.35067L6.84604 2.43904C6.52559 2.12572 6.74742 1.58153 7.19559 1.58153Z" stroke="currentColor" stroke-width="1.5" fill="none"/>\n    <path d="M9.77576 8.56898L7.30088 6.09411" stroke="currentColor" stroke-width="1.5"/>\n    <path d="M2.70825 1.5V1H3.70825V1.5C3.70825 2.60457 4.60368 3.5 5.70825 3.5H6.20825V4V4.5H5.70825C4.60368 4.5 3.70825 5.39543 3.70825 6.5V7H3.20825H2.70825V6.5C2.70825 5.39543 1.81282 4.5 0.708252 4.5H0.208252V4V3.5H0.708252C1.81282 3.5 2.70825 2.60457 2.70825 1.5Z" fill="currentColor"/>\n');e.s(["Build",0,r,"UndoIcon",0,n])},742998,29160,304775,40114,e=>{"use strict";let t;e.s(["RenderBlockPreview",()=>V],742998);var n=e.i(509473),r=e.i(449381),i=e.i(743124),o=e.i(304649),a=e.i(53223),s=e.i(283751),l=e.i(301331);e.i(563948);var c=e.i(407562),u=e.i(972011),d=e.i(427286),p=e.i(918823),h=e.i(486011),f=e.i(921823),m=e.i(455925),g=e.i(230125),v=e.i(697856),x=e.i(297239),y=e.i(926224),b=e.i(707827),w=e.i(862664),j=e.i(745587),C=e.i(92479),k=e.i(996174),S=e.i(316799),N=e.i(696825),E=e.i(863785),D=e.i(818273),I=e.i(176248),A=e.i(209819),T=e.i(978855),M=e.i(894906),L=e.i(847252),P=e.i(242759),R=e.i(530135),_=e.i(385671),O=e.i(76866);function F(e){let{children:t,className:r}=e;return(0,n.jsx)("div",{className:(0,o.cn)("bg-v0-gray-200 flex h-5 items-center gap-1 rounded-md px-1 text-[12px] text-v0-gray-900",r),children:t})}function B(e){let{closed:t,isStreaming:r,finishReason:i,language:o,isBlob:a}=e;return a?(0,n.jsx)(p.CloudUpload,{className:"size-4 text-v0-gray-900"}):t&&!r&&"stop"===i?(0,n.jsx)(s.FileIcon,{lang:o||"plaintext",fill:"fill-gray-500"}):t&&!r&&"length"===i?(0,n.jsx)(k.Tooltip,{content:"v0 cannot output enough tokens to complete the block",children:(0,n.jsx)("span",{"aria-hidden":!0,children:(0,n.jsx)(g.Warning,{})})}):t||!r||i?(0,n.jsx)(s.FileIcon,{lang:o||"plaintext",fill:"fill-gray-500"}):(0,n.jsx)(b.Spinner,{size:16})}function V(e){let{type:t,blockId:s,messageId:p,...g}=e,V=(0,D.useIsStreaming)(),H=(0,r.useActiveBlockView)(),U=(0,r.useActiveBlockState)();(0,D.useIsV3)();let G=(0,r.useSetActiveBlockView)(),{currentBlockIndex:W,history:q,projectBlocks:Z,latestSource:K,ensureBlockSource:$,isLoadingBlockSource:Y}=(0,l.useBlockHistory)({blockId:s,searchAll:!0}),{getBlockShared:J}=(0,v.useSharedBlocks)(),{getBlockDeployed:Q}=(0,w.useDeployedBlocks)(),X=(0,x.useT)(),ee=(0,j.useSetActiveFile)({blockId:s}),{bl:et}=(0,P.useFlags)(),{getBlockForked:en}=(0,N.useForkedBlocks)(),{getBlockTemplateId:er}=(0,E.useBlockTemplateId)(),{isRestoring:ei,restoreCurrentBlock:eo}=(0,O.useRestoreBlockVersion)(s),{pulsePreview:ea}=(0,l.usePulsePreview)({blockId:s}),{messages:es,activeForkKey:el}=(0,C.useChatMessages)(),ec=(0,i.useMemo)(()=>es.find(e=>e.id===p&&"assistant"===e.role),[es,p]),eu=null==ec?void 0:ec.finishReason,{chatId:ed}=(0,C.useChatId)(),ep=H&&(null==U?void 0:U.id)===s,[eh,ef]=(0,i.useState)(!1),[em,eg]=(0,i.useState)(!1),{actions:{setActiveTabIntent:ev}}=(0,_.useChatLayout)(),ex=K||g.source,ey=(0,i.useCallback)(async()=>{Y||await $()},[$,Y]);(0,i.useEffect)(()=>ef(!0),[]);let eb="Untitled",ew=t;g.meta.project&&(eb=g.meta.project),g.meta.file&&(ew=g.meta.file||t),"local"===t&&(eb=g.meta.title),"Untitled"===eb&&ex.trimStart().startsWith("// ")&&(eb=ex.trimStart().slice(3).split("\n")[0]),/[_-]/.test(eb)&&(eb=eb.split(/[_-]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "));let ej=Z.find(e=>e.id===s),eC=null==ej?void 0:ej.latestDeploymentInfo,ek=(0,i.useRef)(null),{saveLastOpenedBlock:eS}=(0,S.useLastOpenedBlock)(),{canWriteToChat:eN}=(0,A.useChatMetadata)(),eE=(0,i.useCallback)(async()=>{var e;(0,a.track)("ClickBlockPreview",{blockId:s});let{templateVersionId:n,templateCanonId:r}=null!=(e=er(s))?e:{},i=await $().catch(()=>{c.toast.error("Failed to load block source.")})||ex;if(!i)return;let o={id:s,meta:g.meta,remoteInfo:g.remoteInfo,messageId:p,type:t,language:g.language,source:i,resultId:g.resultId,closed:!!g.closed,hasSourceBeenEdited:!!(null==U?void 0:U.hasSourceBeenEdited),latestDeploymentInfo:eC,templateVersionId:n,templateCanonId:r,forkedFromBlockId:en(s)};G(!0,o),eS(s),ek.current&&(ev("code"),ee(ek.current),ek.current=null,setTimeout(()=>{let e=document.querySelector('[data-active-tab="true"]');e&&e.scrollIntoView({block:"start"})},0))},[s,er,$,g.meta,g.remoteInfo,g.language,g.resultId,g.closed,p,t,null==U?void 0:U.hasSourceBeenEdited,eC,en,G,eS,ev,ee,ex]),eD=(0,i.useMemo)(()=>J(s)||Q(s),[s,J,Q]),eI=!g.closed&&!V&&("other"===eu||!eu),eA="local"===t?(0,n.jsx)(m.PrismColor,{className:"size-4 text-v0-gray-900 [&_path]:fill-current"}):(0,n.jsx)(B,{closed:g.closed,isStreaming:V,finishReason:eu,language:g.language,isBlob:!!g.meta.url}),eT=(0,i.useCallback)(()=>{if(ep&&!ek.current)return;eE();let e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("b"),e.search=t.toString(),window.history.replaceState({},"",e.toString())},[ep,eE]),eM=(0,M.useUpdateBlockData)(s),eL=(0,i.useMemo)(()=>"local"===t||"code-project"===t?(0,y.parseMultiFileSource)({source:ex,blockType:t,blockId:s}):[],[ex,t,s]),eP=(0,i.useMemo)(()=>"local"===t||"code-project"===t?eL.filter(e=>!e.isMerged&&!(e.isDeleted&&e.isMoved)):[],[t,eL]),{handleRecoverFile:eR,isRecoveringFile:e_,recoveringFile:eO}=(0,L.useRecoverFile)({blockId:s,history:q,activeForkKey:el,updateBlockData:eM,sourceFiles:eL,currentBlockIndex:W}),eF=p===(null==el?void 0:el[el.length-1]);(0,i.useEffect)(()=>{(ep||em)&&$().catch(e=>{c.toast.error("Failed to load block source")})},[ep,em,$]);let eB=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),eg(e=>!e)},[]);if("code-project"===t){let e=(0,n.jsxs)("div",{className:(0,o.cn)("@container/block-preview-header flex w-full items-center justify-between gap-3 p-2.5",em&&"border-v0-alpha-400 border-b"),onMouseEnter:ey,children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-v0-gray-1000",children:[(0,n.jsx)("div",{className:(0,o.cn)("flex items-center gap-1 whitespace-nowrap text-[13px] font-medium pl-1",ep?"text-v0-blue-800":"text-v0-gray-1000"),children:g.closed||eI?"Version ".concat(W+1):(0,n.jsxs)(T.LoadingText,{className:"text-[13px] font-medium",children:["Version ",W+1]})}),eD?(0,n.jsxs)(F,{className:"@[19rem]/block-preview-header:flex hidden",children:[(0,n.jsx)(h.Globe,{size:12})," ",X("blockPreview.deployed")]}):null,eI?(0,n.jsx)(F,{className:"@[19rem]/block-preview-header:flex hidden",children:"STOPPED"}):null]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[eF||!eN?null:(0,n.jsx)(k.Tooltip,{content:ei?"Restoring":"Restore this version",children:(0,n.jsx)(I.Button,{variant:"ghost",className:"size-6 rounded-sm",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),eo()},disabled:ei,children:ei?(0,n.jsx)(b.Spinner,{size:14}):(0,n.jsx)(R.UndoIcon,{})})}),g.closed||eI?(0,n.jsx)(I.Button,{onClick:eB,variant:"ghost",className:"size-6 rounded-sm",size:"sm",children:(0,n.jsx)(d.ChevronUpDown,{})}):(0,n.jsx)("div",{className:"size-6 flex items-center justify-center",children:(0,n.jsx)(b.Spinner,{size:16})})]})]}),t=eP.map((e,t)=>{let r,a=!1;if(et&&t<eP.length-1&&eP[t+1].meta.file===eP[t].meta.file)return null;let s=!!(!g.closed&&(t===eP.length-1||e.isTempFile));return e.isTerminated?(r=(0,n.jsx)(f.Pause,{className:"size-3 text-v0-gray-500"}),a=!0):s?(r=eI?(0,n.jsx)(f.Pause,{className:"size-3 text-v0-gray-500"}):(0,n.jsx)(b.Spinner,{size:14}),a=eI):r=e.isLoading?(0,n.jsx)(b.Spinner,{size:14}):(0,n.jsx)(u.CheckCircleFill,{className:"size-3 text-v0-gray-500"}),(0,n.jsxs)(i.default.Fragment,{children:[(0,n.jsxs)("div",{className:"flex h-5 w-full min-w-0 items-center gap-2 text-[13px]",children:[(0,n.jsx)("div",{className:"flex size-5 shrink-0 items-center justify-center",children:r}),(0,n.jsxs)("div",{className:(0,o.cn)("group/file flex w-full min-w-0 items-center justify-between gap-2"),role:"button",tabIndex:0,onClick:t=>{if(e.isDeleted){t.stopPropagation(),eR(e.meta.file);return}ek.current=e.meta.file},children:[(0,n.jsx)("div",{className:(0,o.cn)("flex-1 cursor-pointer truncate text-left group-hover/file:underline"),children:s&&!eI||e.isLoading?(0,n.jsx)(T.LoadingText,{className:"text-[13px]",children:e.meta.file}):e.meta.file}),(0,n.jsx)(z,{file:e,isRecovering:eO===e.meta.file&&e_,active:s,stopped:a})]})]},t),t!==eP.length-1&&(0,n.jsx)("div",{className:"flex h-3 w-5 items-center justify-center",children:(0,n.jsx)("div",{className:"h-full w-px bg-v0-gray-300"})})]},"block-edit-"+t)}),r=em&&eP.length>0?(0,n.jsx)("div",{className:"bg-v0-background-200 overflow-hidden",children:(0,n.jsx)("div",{className:(0,o.cn)("flex w-full flex-col overflow-hidden rounded-md py-1.5 pl-2 pr-2.5 text-left text-v0-gray-900"),children:t})}):null;return(0,n.jsxs)("div",{"data-testid":"block-preview",className:(0,o.cn)("not-prose group/block-preview bg-v0-background-100 flex w-full max-w-full cursor-pointer select-none flex-col justify-between overflow-hidden rounded-lg border shadow-[0px_2px_3px_-1px_hsla(0,0%,0%,0.04)] transition-all ease-in-out md:w-[400px]",ep?"ring-v0-blue-100 border-v0-blue-800 ring-2":"hover:ring-v0-alpha-400 border-v0-alpha-400 hover:border-v0-alpha-500",ep&&ea?"animate-pulse-border":""),onClick:eT,children:[e,r]})}return(0,n.jsxs)("div",{"data-testid":"block-preview",className:(0,o.cn)("not-prose bg-v0-background-100 hover:brightness-97 flex w-full max-w-full cursor-pointer select-none items-start justify-between gap-2 rounded-[10px] border p-1.5 transition-all duration-200 ease-in-out md:w-[400px]",ep?"ring-v0-alpha-400 border-v0-gray-900 ring-2":"border-v0-gray-200"),onClick:eT,children:[(0,n.jsx)("div",{className:"flex size-10 shrink-0 items-center justify-center overflow-hidden rounded-sm bg-v0-gray-100 px-3 text-v0-gray-900 transition-all duration-200 ease-in-out",children:eA}),(0,n.jsx)("div",{className:"flex w-full min-w-0 flex-row items-center justify-between",children:(0,n.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start leading-5",children:[(0,n.jsxs)("div",{className:"@container/block-preview-header my-0 flex w-full min-w-0 max-w-full items-center justify-between gap-2 text-sm font-medium text-v0-gray-1000",children:[(0,n.jsx)("div",{className:"min-w-0 shrink truncate",children:eb}),(0,n.jsxs)("div",{className:"flex shrink-0 gap-1",children:[eF||!eN?null:(0,n.jsx)(k.Tooltip,{content:ei?"Restoring":"Restore this version",children:(0,n.jsx)(I.Button,{variant:"ghost",className:"size-6 rounded-sm",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),eo()},disabled:ei,children:ei?(0,n.jsx)(b.Spinner,{size:14}):(0,n.jsx)(R.UndoIcon,{})})}),eD?(0,n.jsxs)(F,{className:"@[17rem]/block-preview-header:flex hidden",children:[(0,n.jsx)(h.Globe,{size:12})," ",X("blockPreview.deployed")]}):null,eI?(0,n.jsx)(F,{className:"@[17rem]/block-preview-header:flex hidden",children:"STOPPED"}):null,(0,n.jsxs)(F,{className:"font-mono",children:["v",W+1]}),"local"===t?(0,n.jsx)(F,{className:"bg-lime-100 dark:bg-lime-900",children:"LOCAL"}):null]})]}),"local"!==t?(0,n.jsxs)("p",{className:"my-0 max-w-full truncate text-sm text-v0-gray-900 ",children:[ew,(null==U?void 0:U.hasSourceBeenEdited)?(0,n.jsx)("span",{children:" (edited)"}):null]}):(0,n.jsx)("ul",{className:"my-0 w-full max-w-full truncate text-left text-v0-gray-900",children:eP.map((e,t)=>(0,n.jsxs)("li",{className:"flex items-center gap-1.5 truncate",children:[e.meta.file,t!==eP.length-1||g.closed?null:(0,n.jsx)("span",{children:(0,n.jsx)(b.Spinner,{size:14})})]},t))})]})})]})}function z(e){let{file:t,active:r,stopped:i,isRecovering:a}=e,s=(()=>!t.isDeleted&&t.isRecovered?"Recovered":i?"Stopped":t.isDeleted?"Deleted":t.blobUrl?r?"Creating":"Added":t.isLocked?"Locked":t.isMoved&&t.isMovedFrom?"Moved":t.isEdit||t.isAttachmentQuickEdit?t.isFixed?r?"Fixing":"Fixed":r?"Editing":"Edited":t.isLoading?"":t.meta.isUserEdit?"Created":r?t.isFixed?"Fixing":"Generating":"Generated")(),l=t.isDeleted?"Recover":null;return a?(0,n.jsx)("div",{className:"flex size-5 shrink-0 items-center justify-center",children:(0,n.jsx)(b.Spinner,{size:14})}):(0,n.jsxs)(n.Fragment,{children:[l?(0,n.jsx)("div",{className:"animate-in fade-in fade-out hidden font-mono text-xs text-v0-gray-900 group-hover/file:block",children:l}):null,(0,n.jsx)("div",{className:(0,o.cn)("font-mono text-xs text-v0-gray-900",l&&"block group-hover/file:hidden"),children:s})]})}e.i(643908);var H=i;function U(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function G(e){return e instanceof Element||e instanceof U(e).Element}function W(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof U(e).ShadowRoot)}function q(e){let t=e.activeElement;for(;(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Z(e,t){if(!e||!t)return!1;let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&W(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function K(){return/apple/i.test(navigator.vendor)}function $(e,t){let n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function Y(e){return(null==e?void 0:e.ownerDocument)||document}function J(e){return"composedPath"in e?e.composedPath()[0]:e.target}var Q='input:not([inert]),select:not([inert]),textarea:not([inert]),a[href]:not([inert]),button:not([inert]),[tabindex]:not(slot):not([inert]),audio[controls]:not([inert]),video[controls]:not([inert]),[contenteditable]:not([contenteditable="false"]):not([inert]),details>summary:first-of-type:not([inert]),details:not([inert])',X="undefined"==typeof Element,ee=X?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,et=!X&&Element.prototype.getRootNode?function(e){var t;return null==e||null==(t=e.getRootNode)?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},en=function e(t,n){void 0===n&&(n=!0);var r,i=null==t||null==(r=t.getAttribute)?void 0:r.call(t,"inert");return""===i||"true"===i||n&&t&&e(t.parentNode)},er=function(e){var t,n=null==e||null==(t=e.getAttribute)?void 0:t.call(e,"contenteditable");return""===n||"true"===n},ei=function(e,t,n){if(en(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(Q));return t&&ee.call(e,Q)&&r.unshift(e),r=r.filter(n)},eo=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var a=o.shift();if(!en(a,!1))if("SLOT"===a.tagName){var s=a.assignedElements(),l=e(s.length?s:a.children,!0,r);r.flatten?i.push.apply(i,l):i.push({scopeParent:a,candidates:l})}else{ee.call(a,Q)&&r.filter(a)&&(n||!t.includes(a))&&i.push(a);var c=a.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(a),u=!en(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(c&&u){var d=e(!0===c?a.children:c.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:a,candidates:d})}else o.unshift.apply(o,a.children)}}return i},ea=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||er(e))&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},es=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},el=function(e){return"INPUT"===e.tagName},ec=function(e){return el(e)&&"hidden"===e.type},eu=function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})},ed=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},ep=function(e){if(!e.name)return!0;var t,n=e.form||et(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var i=ed(t,e.form);return!i||i===e},eh=function(e){return el(e)&&"radio"===e.type},ef=function(e){return eh(e)&&!ep(e)},em=function(e){var t,n,r,i,o,a,s,l=e&&et(e),c=null==(t=l)?void 0:t.host,u=!1;if(l&&l!==e)for(u=!!(null!=(n=c)&&null!=(r=n.ownerDocument)&&r.contains(c)||null!=e&&null!=(i=e.ownerDocument)&&i.contains(e));!u&&c;)u=!!(null!=(a=c=null==(o=l=et(c))?void 0:o.host)&&null!=(s=a.ownerDocument)&&s.contains(c));return u},eg=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},ev=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var i=ee.call(e,"details>summary:first-of-type")?e.parentElement:e;if(ee.call(i,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return eg(e)}else{if("function"==typeof r){for(var o=e;e;){var a=e.parentElement,s=et(e);if(a&&!a.shadowRoot&&!0===r(a))return eg(e);e=e.assignedSlot?e.assignedSlot:a||s===e.ownerDocument?a:s.host}e=o}if(em(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},ex=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!ee.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1},ey=function(e,t){return!(t.disabled||en(t)||ec(t)||ev(t,e)||eu(t)||ex(t))},eb=function(e,t){return!(ef(t)||0>ea(t))&&!!ey(e,t)},ew=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!isNaN(t)||!!(t>=0)},ej=function e(t){var n=[],r=[];return t.forEach(function(t,i){var o=!!t.scopeParent,a=o?t.scopeParent:t,s=ea(a,o),l=o?e(t.candidates):a;0===s?o?n.push.apply(n,l):n.push(a):r.push({documentOrder:i,tabIndex:s,item:t,isScope:o,content:l})}),r.sort(es).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(n)},eC=function(e,t){var n;return ej(n=(t=t||{}).getShadowRoot?eo([e],t.includeContainer,{filter:eb.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:ew}):ei(e,t.includeContainer,eb.bind(null,t)))},ek=e.i(152076);e.i(222863);var eS=e.i(922744);e.i(211277);let eN={...H},eE=eN.useInsertionEffect||(e=>e());function eD(e){let t=H.useRef(()=>{});return eE(()=>{t.current=e}),H.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var eI="undefined"!=typeof document?H.useLayoutEffect:H.useEffect;function eA(){return(eA=Object.assign.bind()).apply(this,arguments)}let eT=!1,eM=0,eL=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+eM++;function eP(){let[e,t]=H.useState(()=>eT?eL():void 0);return eI(()=>{null==e&&t(eL())},[]),H.useEffect(()=>{eT=!0},[]),e}let eR=eN.useId||eP;function e_(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}}let eO=H.createContext(null),eF=H.createContext(null),eB=()=>{var e;return(null==(e=H.useContext(eO))?void 0:e.id)||null},eV=()=>H.useContext(eF);function ez(e){return"data-floating-ui-"+e}function eH(e){let t=(0,H.useRef)(e);return eI(()=>{t.current=e}),t}let eU=ez("safe-polygon");function eG(e,t,n){return n&&!$(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}function eW(e,t){void 0===t&&(t={});let{open:n,onOpenChange:r,dataRef:i,events:o,elements:a}=e,{enabled:s=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:d=0,move:p=!0}=t,h=eV(),f=eB(),m=eH(c),g=eH(l),v=eH(n),x=H.useRef(),y=H.useRef(-1),b=H.useRef(),w=H.useRef(-1),j=H.useRef(!0),C=H.useRef(!1),k=H.useRef(()=>{}),S=H.useCallback(()=>{var e;let t=null==(e=i.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t},[i]);H.useEffect(()=>{if(s)return o.on("openchange",e),()=>{o.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(y.current),clearTimeout(w.current),j.current=!0)}},[s,o]),H.useEffect(()=>{if(!s||!m.current||!n)return;function e(e){S()&&r(!1,e,"hover")}let t=Y(a.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}},[a.floating,n,r,s,m,S]);let N=H.useCallback(function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");let i=eG(g.current,"close",x.current);i&&!b.current?(clearTimeout(y.current),y.current=window.setTimeout(()=>r(!1,e,n),i)):t&&(clearTimeout(y.current),r(!1,e,n))},[g,r]),E=eD(()=>{k.current(),b.current=void 0}),D=eD(()=>{if(C.current){let e=Y(a.floating).body;e.style.pointerEvents="",e.removeAttribute(eU),C.current=!1}});H.useEffect(()=>{if(s&&G(a.domReference)){var e;let t=a.domReference;return n&&t.addEventListener("mouseleave",c),null==(e=a.floating)||e.addEventListener("mouseleave",c),p&&t.addEventListener("mousemove",o,{once:!0}),t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",l),()=>{var e;n&&t.removeEventListener("mouseleave",c),null==(e=a.floating)||e.removeEventListener("mouseleave",c),p&&t.removeEventListener("mousemove",o),t.removeEventListener("mouseenter",o),t.removeEventListener("mouseleave",l)}}function t(){return!!i.current.openEvent&&["click","mousedown"].includes(i.current.openEvent.type)}function o(e){if(clearTimeout(y.current),j.current=!1,u&&!$(x.current)||d>0&&!eG(g.current,"open"))return;let t=eG(g.current,"open",x.current);t?y.current=window.setTimeout(()=>{v.current||r(!0,e,"hover")},t):r(!0,e,"hover")}function l(e){if(t())return;k.current();let r=Y(a.floating);if(clearTimeout(w.current),m.current&&i.current.floatingContext){n||clearTimeout(y.current),b.current=m.current({...i.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){D(),E(),N(e,!0,"safe-polygon")}});let t=b.current;r.addEventListener("mousemove",t),k.current=()=>{r.removeEventListener("mousemove",t)};return}"touch"===x.current&&Z(a.floating,e.relatedTarget)||N(e)}function c(e){!t()&&i.current.floatingContext&&(null==m.current||m.current({...i.current.floatingContext,tree:h,x:e.clientX,y:e.clientY,onClose(){D(),E(),N(e)}})(e))}},[a,s,e,u,d,p,N,E,D,r,n,v,h,g,m,i]),eI(()=>{var e,t;if(s&&n&&null!=(e=m.current)&&e.__options.blockPointerEvents&&S()){let e=Y(a.floating).body;e.setAttribute(eU,""),e.style.pointerEvents="none",C.current=!0;let n=a.floating;if(G(a.domReference)&&n){let e=a.domReference,r=null==h||null==(t=h.nodesRef.current.find(e=>e.id===f))||null==(t=t.context)?void 0:t.elements.floating;return r&&(r.style.pointerEvents=""),e.style.pointerEvents="auto",n.style.pointerEvents="auto",()=>{e.style.pointerEvents="",n.style.pointerEvents=""}}}},[s,n,f,a,h,m,S]),eI(()=>{n||(x.current=void 0,E(),D())},[n,E,D]),H.useEffect(()=>()=>{E(),clearTimeout(y.current),clearTimeout(w.current),D()},[s,a.domReference,E,D]);let I=H.useMemo(()=>{function e(e){x.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){let{nativeEvent:t}=e;function i(){j.current||v.current||r(!0,t,"hover")}(!u||$(x.current))&&(n||0===d||(clearTimeout(w.current),"touch"===x.current?i():w.current=window.setTimeout(i,d)))}}},[u,r,n,v,d]),A=H.useMemo(()=>({onMouseEnter(){clearTimeout(y.current)},onMouseLeave(e){N(e.nativeEvent,!1)}}),[N]);return H.useMemo(()=>s?{reference:I,floating:A}:{},[s,I,A])}function eq(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let eZ=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function eK(e,t){let n=eC(e,eZ());"prev"===t&&n.reverse();let r=n.indexOf(q(Y(e)));return n.slice(r+1)[0]}function e$(){return eK(document.body,"next")}function eY(){return eK(document.body,"prev")}function eJ(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!Z(n,r)}function eQ(e){eC(e,eZ()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})}function eX(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let e0={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function e1(e){"Tab"===e.key&&(e.target,clearTimeout(t))}let e2=H.forwardRef(function(e,t){let[n,r]=H.useState();eI(()=>(K()&&r("button"),document.addEventListener("keydown",e1),()=>{document.removeEventListener("keydown",e1)}),[]);let i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[ez("focus-guard")]:"",style:e0};return H.createElement("span",eA({},e,i))}),e5=H.createContext(null),e4=ez("portal");function e3(e){void 0===e&&(e={});let{id:t,root:n}=e,r=eR(),i=e7(),[o,a]=H.useState(null),s=H.useRef(null);return eI(()=>()=>{null==o||o.remove(),queueMicrotask(()=>{s.current=null})},[o]),eI(()=>{if(!r||s.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=r,n.setAttribute(e4,""),e.appendChild(n),s.current=n,a(n)},[t,r]),eI(()=>{if(!r||s.current)return;let e=n||(null==i?void 0:i.portalNode);e&&!G(e)&&(e=e.current),e=e||document.body;let o=null;t&&((o=document.createElement("div")).id=t,e.appendChild(o));let l=document.createElement("div");l.id=r,l.setAttribute(e4,""),(e=o||e).appendChild(l),s.current=l,a(l)},[t,n,r,i]),o}function e9(e){let{children:t,id:n,root:r=null,preserveTabOrder:i=!0}=e,o=e3({id:n,root:r}),[a,s]=H.useState(null),l=H.useRef(null),c=H.useRef(null),u=H.useRef(null),d=H.useRef(null),p=!!a&&!a.modal&&a.open&&i&&!!(r||o);return H.useEffect(()=>{if(o&&i&&(null==a||!a.modal))return o.addEventListener("focusin",e,!0),o.addEventListener("focusout",e,!0),()=>{o.removeEventListener("focusin",e,!0),o.removeEventListener("focusout",e,!0)};function e(e){o&&eJ(e)&&("focusin"===e.type?eX:eQ)(o)}},[o,i,null==a?void 0:a.modal]),H.createElement(e5.Provider,{value:H.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:d,portalNode:o,setFocusManagerState:s}),[i,o])},p&&o&&H.createElement(e2,{"data-type":"outside",ref:l,onFocus:e=>{if(eJ(e,o)){var t;null==(t=u.current)||t.focus()}else{let e=eY()||(null==a?void 0:a.refs.domReference.current);null==e||e.focus()}}}),p&&o&&H.createElement("span",{"aria-owns":o.id,style:e0}),o&&ek.createPortal(t,o),p&&o&&H.createElement(e2,{"data-type":"outside",ref:c,onFocus:e=>{if(eJ(e,o)){var t;null==(t=d.current)||t.focus()}else{let t=e$()||(null==a?void 0:a.refs.domReference.current);null==t||t.focus(),(null==a?void 0:a.closeOnFocusOut)&&(null==a||a.onOpenChange(!1,e.nativeEvent))}}}))}let e7=()=>H.useContext(e5);function e6(e){let{open:t=!1,onOpenChange:n,elements:r}=e,i=eR(),o=H.useRef({}),[a]=H.useState(()=>e_()),s=null!=eB(),[l,c]=H.useState(r.reference),u=eD((e,t,r)=>{o.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:r,nested:s}),null==n||n(e,t,r)}),d=H.useMemo(()=>({setPositionReference:c}),[]),p=H.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return H.useMemo(()=>({dataRef:o,open:t,onOpenChange:u,elements:p,events:a,floatingId:i,refs:d}),[t,u,p,a,i,d])}function e8(e){void 0===e&&(e={});let{nodeId:t}=e,n=e6({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,a]=H.useState(null),[s,l]=H.useState(null),c=(null==i?void 0:i.reference)||o,u=H.useRef(null),d=eV();eI(()=>{c&&(u.current=c)},[c]);let p=(0,eS.useFloating)({...e,elements:{...i,...s&&{reference:s}}}),h=H.useCallback(e=>{let t=G(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t),p.refs.setReference(t)},[p.refs]),f=H.useCallback(e=>{(G(e)||null===e)&&(u.current=e,a(e)),(G(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!G(e))&&p.refs.setReference(e)},[p.refs]),m=H.useMemo(()=>({...p.refs,setReference:f,setPositionReference:h,domReference:u}),[p.refs,f,h]),g=H.useMemo(()=>({...p.elements,domReference:c}),[p.elements,c]),v=H.useMemo(()=>({...p,...r,refs:m,elements:g,nodeId:t}),[p,m,g,t,r]);return eI(()=>{r.dataRef.current.floatingContext=v;let e=null==d?void 0:d.nodesRef.current.find(e=>e.id===t);e&&(e.context=v)}),H.useMemo(()=>({...p,context:v,refs:m,elements:g}),[p,m,g,v])}let te="active",tt="selected";function tn(e,t,n){let r=new Map,i="item"===n,o=e;if(i&&e){let{[te]:t,[tt]:n,...r}=e;o=r}return{..."floating"===n&&{tabIndex:-1},...o,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,o]=t;if(!(i&&[te,tt].includes(n)))if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof o){var a;null==(a=r.get(n))||a.push(o),e[n]=function(){for(var e,t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return null==(e=r.get(n))?void 0:e.map(e=>e(...i)).find(e=>void 0!==e)}}}else e[n]=o}),e),{})}}function tr(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),r=e.map(e=>null==e?void 0:e.item),i=H.useCallback(t=>tn(t,e,"reference"),t),o=H.useCallback(t=>tn(t,e,"floating"),n),a=H.useCallback(t=>tn(t,e,"item"),r);return H.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:a}),[i,o,a])}function ti(e,t){let[n,r]=e,i=!1,o=t.length;for(let e=0,a=o-1;e<o;a=e++){let[o,s]=t[e]||[0,0],[l,c]=t[a]||[0,0];s>=r!=c>=r&&n<=(l-o)*(r-s)/(c-s)+o&&(i=!i)}return i}function to(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function ta(e){let t;void 0===e&&(e={});let{buffer:n=.5,blockPointerEvents:r=!1,requireIntent:i=!0}=e,o=!1,a=null,s=null,l=performance.now();function c(e,t){let n=performance.now(),r=n-l;if(null===a||null===s||0===r)return a=e,s=t,l=n,null;let i=e-a,o=t-s,c=Math.sqrt(i*i+o*o)/r;return a=e,s=t,l=n,c}let u=e=>{let{x:r,y:a,placement:s,elements:l,onClose:u,nodeId:d,tree:p}=e;return function(e){function h(){clearTimeout(t),u()}if(clearTimeout(t),!l.domReference||!l.floating||null==s||null==r||null==a)return;let{clientX:f,clientY:m}=e,g=[f,m],v=J(e),x="mouseleave"===e.type,y=Z(l.floating,v),b=Z(l.domReference,v),w=l.domReference.getBoundingClientRect(),j=l.floating.getBoundingClientRect(),C=s.split("-")[0],k=r>j.right-j.width/2,S=a>j.bottom-j.height/2,N=to(g,w),E=j.width>w.width,D=j.height>w.height,I=(E?w:j).left,A=(E?w:j).right,T=(D?w:j).top,M=(D?w:j).bottom;if(y&&(o=!0,!x))return;if(b&&(o=!1),b&&!x){o=!0;return}if(x&&G(e.relatedTarget)&&Z(l.floating,e.relatedTarget)||p&&eq(p.nodesRef.current,d).some(e=>{let{context:t}=e;return null==t?void 0:t.open}))return;if("top"===C&&a>=w.bottom-1||"bottom"===C&&a<=w.top+1||"left"===C&&r>=w.right-1||"right"===C&&r<=w.left+1)return h();let L=[];switch(C){case"top":L=[[I,w.top+1],[I,j.bottom-1],[A,j.bottom-1],[A,w.top+1]];break;case"bottom":L=[[I,j.top+1],[I,w.bottom-1],[A,w.bottom-1],[A,j.top+1]];break;case"left":L=[[j.right-1,M],[j.right-1,T],[w.left+1,T],[w.left+1,M]];break;case"right":L=[[w.right-1,M],[w.right-1,T],[j.left+1,T],[j.left+1,M]]}function P(e){let[t,r]=e;switch(C){case"top":return[[E?t+n/2:k?t+4*n:t-4*n,r+n+1],[E?t-n/2:k?t+4*n:t-4*n,r+n+1],[j.left,k||E?j.bottom-n:j.top],[j.right,k?E?j.bottom-n:j.top:j.bottom-n]];case"bottom":return[[E?t+n/2:k?t+4*n:t-4*n,r-n],[E?t-n/2:k?t+4*n:t-4*n,r-n],[j.left,k||E?j.top+n:j.bottom],[j.right,k?E?j.top+n:j.bottom:j.top+n]];case"left":{let e=[t+n+1,D?r+n/2:S?r+4*n:r-4*n],i=[t+n+1,D?r-n/2:S?r+4*n:r-4*n];return[[S||D?j.right-n:j.left,j.top],[S?D?j.right-n:j.left:j.right-n,j.bottom],e,i]}case"right":return[[t-n,D?r+n/2:S?r+4*n:r-4*n],[t-n,D?r-n/2:S?r+4*n:r-4*n],[S||D?j.left+n:j.right,j.top],[S?D?j.left+n:j.right:j.left+n,j.bottom]]}}if(!ti([f,m],L)){if(o&&!N)return h();if(!x&&i){let t=c(e.clientX,e.clientY),n=.1;if(null!==t&&t<n)return h()}ti([f,m],P([r,a]))?!o&&i&&(t=window.setTimeout(h,40)):h()}}};return u.__options={blockPointerEvents:r},u}e.s(["FloatingPortal",()=>e9,"safePolygon",()=>ta,"useFloating",()=>e8,"useHover",()=>eW,"useInteractions",()=>tr],29160);var ts=i;function tl(){let[e,t]=(0,ts.useState)(!1);return(0,ts.useEffect)(()=>{t("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)},[]),e}e.s(["useIsTouchScreen",()=>tl],304775);let tc=new Map;function tu(e){if(e.nodeType===e.TEXT_NODE)return["#text",{}];if(e.nodeType!==e.ELEMENT_NODE)return["",{}];if("SPAN"===e.nodeName&&e.classList.contains("katex-html"))return["skip",{}];if("SPAN"===e.nodeName&&e.classList.contains("katex-mathml")){var t;return["#text",{},(null==(t=e.querySelector('annotation[encoding="application/x-tex"]'))?void 0:t.textContent)||""]}if("SPAN"===e.nodeName&&(e.classList.contains("linenumber")||e.classList.contains("react-syntax-highlighter-line-number")))return["skip",{}];let n=e.getAttribute("data-seg")||"";if("root"===n||"skip"===n)return[n,{}];let r=tc.get(n);return[(null==r?void 0:r.type)||n,(null==r?void 0:r.props)||{}]}function td(e){let{lang:t,project:n,file:r}=e;return"```".concat(t).concat(n?' project="'.concat(n,'"'):"").concat(r?' file="'.concat(r,'"'):"","\n")}let tp=new Set(["skip","footnoteReference"]);function th(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o="";function a(e,t,s,l){let[c,u,d]=tu(e);if(tp.has(c))return;if("#text"===c){s&&n&&i&&(o+="...");let t="string"==typeof d?d:e.textContent||"";o+=t,l&&r&&i&&(o+="...");return}let p={...t};switch(c){case"Codeblock":if(u.blockId){var h,f;o+=td({lang:u.lang,project:null==(h=u.meta)?void 0:h.project,file:null==(f=u.meta)?void 0:f.file})+"...\n```\n\n";return}o+="```".concat(u.lang||"","\n");break;case"code":o+="`";break;case"b":case"strong":o+="**";break;case"i":case"em":o+="*";break;case"del":o+="~~";break;case"hr":o+="---";break;case"Math":o+="$$";break;case"InlineMath":o+="$";break;case"li":if(t.ol){let e=u.index||"1";o+="".concat(e,". ")}else t.ul&&(o+="- ");break;case"ol":t.ol=!0;break;case"ul":t.ul=!0;break;case"h1":o+="# ";break;case"h2":o+="## ";break;case"h3":o+="### ";break;case"h4":o+="#### ";break;case"h5":o+="##### ";break;case"h6":o+="###### ";break;case"blockquote":o+="> ";break;case"tr":t.tableCols=0;break;case"th":case"td":t.tableCols=(t.tableCols||0)+1,p.tableCols=t.tableCols,t.tableCols>1&&(o+=" "),o+="| ";break;case"a":o+="["}let m=e.childNodes.length;for(let n=0;n<m;n++)a(e.childNodes[n],t,s&&0===n,l&&n===m-1);switch(c){case"Codeblock":o+="\n```\n\n";break;case"code":o+="`";break;case"b":case"strong":o+="**";break;case"i":case"em":o+="*";break;case"del":o+="~~";break;case"Math":o+="$$";break;case"InlineMath":o+="$";break;case"li":case"tr":o+="\n";break;case"p":case"table":case"hr":case"blockquote":case"ul":case"ol":case"img":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":o+="\n\n";break;case"thead":o+="|-----".repeat(t.tableCols||1)+"\n";break;case"a":o+="](".concat(u.href||"",")")}Object.assign(t,p)}function s(t){let[n,r]=tu(t);switch(n){case"ul":return a(e,{ol:!1,ul:!0},!0,!0);case"ol":return a(e,{ol:!0,ul:!1},!0,!0);case"Codeblock":o+="```".concat(r.lang||"","\n"),a(e,{ol:!1,ul:!1},!0,!0),o+="\n```";return;case"blockquote":a(e,{ol:!1,ul:!1},!0,!0),o=o.split("\n").map(e=>"> ".concat(e)).join("\n");return;case"del":o+="~~",a(e,{ol:!1,ul:!1},!0,!0),o+="~~";return;case"h1":return o+="# ",a(e,{ol:!1,ul:!1},!0,!0);case"h2":return o+="## ",a(e,{ol:!1,ul:!1},!0,!0);case"h3":return o+="### ",a(e,{ol:!1,ul:!1},!0,!0);case"h4":return o+="#### ",a(e,{ol:!1,ul:!1},!0,!0);case"h5":return o+="##### ",a(e,{ol:!1,ul:!1},!0,!0);case"h6":return o+="###### ",a(e,{ol:!1,ul:!1},!0,!0);case"table":case"root":case"img":case"Math":return a(e,{ol:!1,ul:!1},!0,!0)}if(t.parentNode){if(t.nodeType===t.ELEMENT_NODE){let n=document.createDocumentFragment(),r=t.cloneNode(!1);r.appendChild(e),n.appendChild(r),e=n}s(t.parentNode)}}return i?s(t):a(e,{ol:!1,ul:!1},!0,!0),o.trim()}e.s(["fragmentToMarkdown",()=>th,"segmentInfo",0,tc],40114)},30570,e=>{"use strict";var t=e.i(509473),n=e.i(743124);let r=(0,n.createContext)({containers:{},setContainers:()=>{}});function i(e){let{children:i}=e,[o,a]=(0,n.useState)({});return(0,t.jsx)(r.Provider,{value:{containers:o,setContainers:a},children:i})}function o(){return(0,n.useContext)(r)}function a(e){let t=(0,n.useRef)(null),{setContainers:r}=o();return(0,n.useEffect)(()=>(r(n=>({...n,[e]:t.current})),()=>{r(t=>{let{[e]:n,...r}=t;return r})}),[e,r]),t}e.s(["PortalProvider",()=>i,"usePortal",()=>o,"usePortalContainerRef",()=>a])},71817,e=>{"use strict";var t=e.i(370751);e.s(["ExternalLinkIcon",()=>t.default])},397711,583984,643611,402610,233327,e=>{"use strict";e.s(["SegmenterProvider",()=>w,"useRegister",()=>j],397711);var t=e.i(509473),n=e.i(743124),r=e.i(29160),i=e.i(922744),o=e.i(222863),a=e.i(304775),s=e.i(40114),l=e.i(430957),c=e.i(176248),u=e.i(329046),d=e.i(209819),p=e.i(443265),h=e.i(297239),f=e.i(127169);let m=(0,n.createContext)({}),g="function"==typeof Intl.Segmenter?new Intl.Segmenter("en",{granularity:"word"}):null;function v(e){let t=[];if(g)for(let{segment:n}of g.segment(e))t.push(n);else{let n=e.split(" ");for(let e=0;e<n.length;e++)e>0&&t.push(" "),t.push(n[e])}return t}let x=window.matchMedia("(prefers-reduced-motion: reduce)").matches,y=8;function b(e){return new Promise(t=>setTimeout(t,e))}function w(e){let{streaming:g,readonly:x,children:w,messageId:j}=e,C=(0,h.useT)(),{setQuote:k}=(0,d.useChatQuote)(),S=(0,n.useState)(()=>{let e=new Map,t=new Map,n=new Set,r=new Map,i=!1;return(o,a,s,l)=>{a.current&&(e.set(o,a),t.set(o,s),n.add(o),r.set(o,l),i||(i=!0,setTimeout(c,y)));async function c(){if(0===n.size){i=!1;return}let o=n.values().next().value;if(void 0===o){i=!1;return}for(let e of n)e<o&&(o=e);n.delete(o);let a=e.get(o),s=t.get(o),l=r.get(o);if(a&&a.current&&(null==l||l(),s&&s.current)){let e=a.current.textContent;s.current.startsWith(e)||(a.current.textContent="",e="");let t=v(s.current.slice(e.length));for(let n=0;n<t.length&&(e+=t[n],a.current);n++)a.current.textContent=e," "!==t[n]&&await b(y)}setTimeout(c,y)}}})[0],N=!0!==x,E=(0,n.useRef)(null),[D,I]=(0,n.useState)(null),A=(0,a.useIsTouchScreen)(),{refs:T,floatingStyles:M}=(0,r.useFloating)({placement:A?"bottom":"top",middleware:[(0,i.offset)(12),(0,i.inline)(),(0,i.flip)({padding:6})],whileElementsMounted:o.autoUpdate}),L=(0,n.useRef)(()=>"");(0,n.useEffect)(()=>{let e=!1,t=()=>{var t;e=!1;let n=window.getSelection();if(null===n||!n.rangeCount)return void I(null);let r=n.getRangeAt(0);if(r.collapsed)return void I(null);let i=null==(t=E.current)?void 0:t.contains(r.commonAncestorContainer),o=E.current;if(!i){let e=!1,t=r.commonAncestorContainer;if(t instanceof HTMLElement){let n=t.closest('[data-seg="code-root"]');n&&n instanceof HTMLElement&&(e=!0,o=n)}if(!e)return void I(null)}for(;0===r.endOffset;)r.setEndBefore(r.endContainer);N&&T.setReference({getBoundingClientRect:()=>r.getBoundingClientRect(),getClientRects:()=>{let e=r.getClientRects(),t=[];t.item=e=>t[e];for(let n=0;n<e.length;n++){let r=e[n];r.width>.1&&r.height>.1&&t.push(r)}return t}}),e=!0,L.current=function(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=r.cloneContents();return(0,s.fragmentToMarkdown)(n,r.commonAncestorContainer,r.startOffset>0,(null==(e=r.endContainer.textContent)?void 0:e.length)!==r.endOffset,t)},N&&I(o)};function n(t){if(!e||!t.clipboardData)return;let n=L.current(!1);t.clipboardData.setData("text/markdown",n),t.clipboardData.setData("text/plain",n),t.preventDefault()}return document.addEventListener("selectionchange",t),document.addEventListener("keyup",t),document.addEventListener("copy",n),()=>{document.removeEventListener("selectionchange",t),document.removeEventListener("keyup",t),document.removeEventListener("copy",n)}},[T,N]);let[P,R]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=E.current;if(!e)return;let t=e=>{var t;null!=(t=T.floating.current)&&t.contains(e.target)||R(!0)},n=()=>{R(!1)};return e.addEventListener("pointerdown",t),e.addEventListener("pointerup",n),e.addEventListener("pointerleave",n),()=>{e.removeEventListener("pointerdown",t),e.removeEventListener("pointerup",n),e.removeEventListener("pointerleave",n)}},[T.floating]),(0,f.useShortcut)(e=>{var t;"q"===e.key&&D&&(k(L.current()),null==(t=window.getSelection())||t.removeAllRanges(),e.stopPropagation(),e.preventDefault())});let _=(0,n.useMemo)(()=>({animate:g?S:void 0}),[g,S]);return(0,t.jsxs)("div",{ref:E,className:"w-full",children:[D&&(0,t.jsx)(r.FloatingPortal,{root:D,children:(0,t.jsxs)("div",{className:"bg-v0-background-100 shadow-base-expand absolute left-0 top-0 z-50 flex select-none items-center gap-1 rounded-lg p-1","data-quote-button":!0,ref:T.setFloating,style:{...M,pointerEvents:P?"none":void 0},children:[(0,t.jsxs)(c.Button,{className:"hover:text-v0-gray-1000 rounded-md px-0.5 py-0 text-sm text-v0-gray-900",onClick:()=>{var e;k(L.current()),null==(e=window.getSelection())||e.removeAllRanges()},size:"xs",variant:"ghost",children:[C("segmenterProvider.quote"),(0,t.jsx)(p.Kbd,{children:"Q"})]}),(0,t.jsx)("div",{className:"bg-v0-alpha-400 h-5 w-px"}),(0,t.jsx)(u.DownvoteButton,{className:"text-v0-gray-900",messageId:j,quoteRef:L,tooltip:"Downvote Selection",variant:"quote"})]})}),(0,t.jsx)(l.Prose,{"data-seg":"root",children:(0,t.jsx)(m.Provider,{value:_,children:w})})]})}function j(e){let{id:t,content:r,type:i,props:o}=e,{animate:a}=(0,n.use)(m),l=(0,n.useRef)(null),c=(0,n.useRef)(r),[u,d]=(0,n.useState)(!1),p=(0,n.useId)();(0,n.useEffect)(()=>(s.segmentInfo.set(p,{type:i,props:o}),()=>{s.segmentInfo.delete(p)}));let h={"data-seg":p};return((0,n.useEffect)(()=>{if(x){let e=l.current;if(!e)return;e.style.transition="",d(!0),"string"==typeof r&&(e.textContent=r);return}if(c.current=r,!a||void 0===t)return;let e=setTimeout(()=>{a(t,l,c,()=>d(!0))},20);return()=>clearTimeout(e)},[a,t,r]),a&&void 0!==t)?(h.style={opacity:+!!u,transition:"opacity .5s ease"},h.ref=l,"string"==typeof r&&(h.children=" ")):"string"==typeof r&&(h.children=r),{elementProps:h}}var C=t,k=e.i(152076),S=e.i(30570),N=r,E=i,D=o,I=n,A=e.i(70165);function T(e){let{id:t}=e,n=(0,S.usePortalContainerRef)(t);return(0,C.jsx)("span",{ref:n})}function M(e){let{label:t,idPrefix:n}=e,[r,i]=(0,I.useState)(!1),o=(0,A.useIsMobile)(),{refs:a,floatingStyles:s,context:l}=(0,N.useFloating)({placement:o?"top":"top-start",middleware:[(0,E.shift)({padding:6}),(0,E.offset)(4),(0,E.flip)({padding:6})],open:r,onOpenChange:i,whileElementsMounted:D.autoUpdate}),c=(0,N.useHover)(l,{handleClose:(0,N.safePolygon)({buffer:1})}),{getReferenceProps:u,getFloatingProps:d}=(0,N.useInteractions)([c]),p="".concat(n).concat(t);return"vercel_knowledge_base"===t?null:(0,C.jsxs)("span",{ref:a.setReference,...u(),className:"-mt-1 ml-0.5 inline-flex size-4 align-text-top",children:[(0,C.jsx)("a",{className:"bg-v0-alpha-400 hover:bg-v0-alpha-400 focus:bg-v0-alpha-400 inline-block size-4 select-none rounded-full text-center font-mono text-[10px] leading-4 text-v0-gray-900 no-underline transition-colors focus:text-v0-black",href:"#def-".concat(p),id:"ref-".concat(p),onBlur:()=>i(!1),onFocus:()=>i(!0),tabIndex:0,children:t}),r?(0,C.jsx)("span",{ref:a.setFloating,style:s,...d(),className:"bg-v0-background-100 shadow-base z-10 select-none rounded-md p-2 text-xs",children:(0,C.jsx)(T,{id:p})}):null]})}function L(e){let{id:t,children:n}=e,{containers:r}=(0,S.usePortal)(),i=r[t];return i?(0,k.createPortal)(n,i):null}e.s(["PortalToId",()=>L,"Reference",()=>M],583984);var P=t,R=n,_=t,O=e.i(486011),F=e.i(992879),B=e.i(304649);function V(e){let{knowledgeSource:t,className:n}=e;switch(null==t?void 0:t.toLowerCase()){case"nextjs.org":return(0,_.jsx)(F.default,{alt:"Next.js Logo",className:n,height:16,src:"/chat-static/citation/nextjs.svg",width:16});case"vercel.com":case"sdk.vercel.ai":case"ai-sdk.dev":return(0,_.jsx)(F.default,{alt:"Vercel Logo",className:n,height:16,src:"/chat-static/citation/vercel.svg",width:16});case"turbo.build":case"turborepo.com":return(0,_.jsx)(F.default,{alt:"Turbopack Logo",className:n,height:16,src:"/chat-static/citation/turbo.svg",width:16});case"flags-sdk.dev":return(0,_.jsx)(F.default,{alt:"Vercel Logo",className:n,height:16,src:"/chat-static/citation/flags.svg",width:16});case"svelte.dev":return(0,_.jsx)(F.default,{alt:"Svelte Logo",className:(0,B.cn)(n,"rounded-none"),height:16,src:"/chat-static/citation/svelte.svg",width:16});case"docs.stripe.com":return(0,_.jsx)(F.default,{alt:"Stripe Logo",className:(0,B.cn)(n,"rounded-none"),height:12,src:"/chat-static/citation/stripe.svg",width:12});case"remix.run":return(0,_.jsx)(F.default,{alt:"Remix Logo",className:(0,B.cn)(n,"rounded-none"),height:12,src:"/chat-static/citation/remix.svg",width:12});case"vuejs.org":return(0,_.jsx)(F.default,{alt:"Vue Logo",className:(0,B.cn)(n,"rounded-none"),height:16,src:"/chat-static/citation/vue.svg",width:16});case"react.dev":return(0,_.jsx)(F.default,{alt:"React Logo",className:(0,B.cn)(n,"rounded-none"),height:16,src:"/chat-static/citation/react.svg",width:16});case"typescriptlang.org":return(0,_.jsx)(F.default,{alt:"Typescript Logo",className:(0,B.cn)(n),height:16,src:"/chat-static/citation/ts.svg",width:16});case"github.com":return(0,_.jsx)(F.default,{alt:"Github Logo",className:n,height:16,src:"/chat-static/citation/github.svg",width:16});case"ui.shadcn.com":return(0,_.jsx)(F.default,{alt:"shadcn/ui Logo",className:(0,B.cn)(n),height:16,src:"/chat-static/citation/shadcn-ui.svg",width:16});case"radix-ui.com":return(0,_.jsx)(F.default,{alt:"Radix UI Logo",className:(0,B.cn)(n,"size-3.5 translate-x-0.5 rounded-none"),height:14,src:"/chat-static/citation/radix-ui.svg",width:14});case"orm.drizzle.team":return(0,_.jsx)(F.default,{alt:"Drizzle Logo",className:(0,B.cn)(n,"dark:invert"),height:22,src:"/chat-static/citation/drizzle.svg",width:22});case"supabase.com":return(0,_.jsx)(F.default,{alt:"Supabase Logo",className:(0,B.cn)(n),height:14,src:"/chat-static/citation/supabase.svg",width:14});case"www.prisma.io":return(0,_.jsx)(F.default,{alt:"Prisma Logo",className:(0,B.cn)(n,"dark:invert"),height:14,src:"/chat-static/citation/prisma.svg",width:14});case"playwright.dev":return(0,_.jsx)(F.default,{alt:"Playwright Logo",className:(0,B.cn)(n),height:14,src:"/chat-static/citation/playwright.svg",width:14});case"neon.tech":return(0,_.jsx)(F.default,{alt:"Neon Logo",className:(0,B.cn)(n),height:14,src:"/chat-static/citation/neon.svg",width:14});case"upstash.com":return(0,_.jsx)(F.default,{alt:"Upstash Logo",className:(0,B.cn)(n),height:14,src:"/chat-static/citation/upstash.svg",width:14});case"v0.app":return(0,_.jsx)(F.default,{alt:"v0 Logo",className:(0,B.cn)(n,"dark:invert"),height:14,src:"/chat-static/citation/v0.svg",width:14});default:return(0,_.jsx)(O.Globe,{className:(0,B.cn)(n,"rounded-none"),size:16})}}e.s(["CitationSourceIcon",()=>V],643611),e.i(632485);var z=e.i(71817),H=e.i(824897),U=e.i(7284),G=e.i(716360),W=e.i(529693),q=e.i(403055);let Z=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.75011 4H6.00011V5.5H6.75011H9.43945L5.46978 9.46967L4.93945 10L6.00011 11.0607L6.53044 10.5303L10.499 6.56182V9.25V10H11.999V9.25V5C11.999 4.44772 11.5512 4 10.999 4H6.75011Z" fill="currentColor"/>');function K(e){let{citations:t}=e;return t.map(e=>{let t="cite-".concat(e.messageId,"-").concat(e.index);return(0,P.jsx)(L,{id:t,children:(0,P.jsxs)("a",{className:"inline-flex min-w-0 items-baseline gap-1 no-underline",href:e.url,rel:"noopener noreferrer",target:"_blank",children:[(0,P.jsx)("span",{className:"line-clamp-1",children:e.title}),(0,P.jsx)(z.ExternalLinkIcon,{className:"size-3 shrink-0"})]})},t)})}function $(e){let{urls:t,className:n}=e,[r,i]=(0,R.useState)(0),o=["Browsing search results"];null==t||t.forEach((e,t)=>{let n=e.replace(/^https?:\/\//,"");o[t+1]="Browsing web page: ".concat(n)}),o[Object.keys(o).length]="Synthesizing ".concat(null==t?void 0:t.length," source").concat((null==t?void 0:t.length)===1?"":"s");let a=Object.keys(o).length;return((0,R.useEffect)(()=>{(async()=>{for(let e=0;e<a;e++)0!==e&&await (0,q.sleep)(2e3),i(e)})()},[a]),t&&0!==t.length)?(0,P.jsx)("div",{className:(0,U.default)("mt-[6px]!",n),children:(0,P.jsx)("div",{className:"shimmer relative flex items-center gap-1.5 text-v0-gray-900",children:(0,P.jsxs)(G.AnimatePresence,{mode:"popLayout",presenceAffectsLayout:!0,children:[(0,P.jsx)(H.Globe,{className:"size-4 shrink-0 leading-[normal]"}),(0,P.jsx)("div",{className:"mask relative grow leading-[15px]",children:(0,P.jsx)(G.AnimatePresence,{initial:!1,mode:"popLayout",presenceAffectsLayout:!0,children:(0,P.jsx)(W.motion.span,{animate:{y:0},className:"inline-block grow text-ellipsis whitespace-nowrap text-[15px] leading-none md:w-[calc(100%-100px)]",exit:{y:-24},initial:{y:24},layout:!0,transition:{type:"tween",duration:.3},children:o[r]},"carousel-".concat(r))})})]})})}):null}e.s(["ArrowUpRightSmall",0,Z],402610),e.s(["CitationsCarousel",()=>$,"CitationsPortalRenderer",()=>K],233327)},634633,e=>{"use strict";let t=(0,e.i(121793).default)("Cable",[["path",{d:"M17 21v-2a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1",key:"10bnsj"}],["path",{d:"M19 15V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V9",key:"1eqmu1"}],["path",{d:"M21 21v-2h-4",key:"14zm7j"}],["path",{d:"M3 5h4V3",key:"z442eg"}],["path",{d:"M7 5a1 1 0 0 1 1 1v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1V3",key:"ebdjd7"}]]);e.s(["default",()=>t])},985353,967276,e=>{"use strict";e.s(["Toolcall",()=>B],985353);var t=e.i(509473),n=e.i(743124),r=e.i(634633),r=r,i=t,o=n,a=e.i(716360),s=e.i(304649),l=e.i(975294),c=n,u=e.i(719271),d=e.i(506832),p=e.i(623032),h=e.i(592292),f=e.i(634287),m=e.i(558240),g=e.i(799141),v=e.i(159837);let x="Collapsible",[y,b]=(0,d.createContextScope)(x),[w,j]=y(x),C=(0,c.forwardRef)((e,t)=>{let{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:o,onOpenChange:a,...s}=e,[u=!1,d]=(0,p.useControllableState)({prop:r,defaultProp:i,onChange:a});return(0,c.createElement)(w,{scope:n,disabled:o,contentId:(0,v.useId)(),open:u,onOpenToggle:(0,c.useCallback)(()=>d(e=>!e),[d])},(0,c.createElement)(m.Primitive.div,(0,l.default)({"data-state":I(u),"data-disabled":o?"":void 0},s,{ref:t})))}),k="CollapsibleTrigger",S=(0,c.forwardRef)((e,t)=>{let{__scopeCollapsible:n,...r}=e,i=j(k,n);return(0,c.createElement)(m.Primitive.button,(0,l.default)({type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":I(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled},r,{ref:t,onClick:(0,u.composeEventHandlers)(e.onClick,i.onOpenToggle)}))}),N="CollapsibleContent",E=(0,c.forwardRef)((e,t)=>{let{forceMount:n,...r}=e,i=j(N,e.__scopeCollapsible);return(0,c.createElement)(g.Presence,{present:n||i.open},e=>{let{present:n}=e;return(0,c.createElement)(D,(0,l.default)({},r,{ref:t,present:n}))})}),D=(0,c.forwardRef)((e,t)=>{let{__scopeCollapsible:n,present:r,children:i,...o}=e,a=j(N,n),[s,u]=(0,c.useState)(r),d=(0,c.useRef)(null),p=(0,f.useComposedRefs)(t,d),g=(0,c.useRef)(0),v=g.current,x=(0,c.useRef)(0),y=x.current,b=a.open||s,w=(0,c.useRef)(b),C=(0,c.useRef)();return(0,c.useEffect)(()=>{let e=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.useLayoutEffect)(()=>{let e=d.current;if(e){C.current=C.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();g.current=t.height,x.current=t.width,w.current||(e.style.transitionDuration=C.current.transitionDuration,e.style.animationName=C.current.animationName),u(r)}},[a.open,r]),(0,c.createElement)(m.Primitive.div,(0,l.default)({"data-state":I(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!b},o,{ref:p,style:{"--radix-collapsible-content-height":v?"".concat(v,"px"):void 0,"--radix-collapsible-content-width":y?"".concat(y,"px"):void 0,...e.style}}),b&&i)});function I(e){return e?"open":"closed"}let A=C,T=S,M=E;var L=e.i(245294),P=e.i(499030);let R=250;function _(e){let{name:t,files:n=[],animated:r=!0}=e,[l,c]=(0,o.useState)(r),[u,d]=(0,o.useState)(n.length<2);(0,o.useEffect)(()=>{if(!r)return void c(!1);let e=setTimeout(()=>c(!1),R);return()=>clearTimeout(e)},[n,r]);let p=r?"animate-shimmer translate-y-px bg-size-[800%_100%] bg-clip-text text-sm text-transparent":void 0,h=r?{backgroundImage:"linear-gradient(90deg,rgb(161 161 170) 0%,rgb(161 161 170) 35%,rgb(212 212 216) 50%,rgb(161 161 170) 65%,rgb(161 161 170) 100%)"}:void 0;return(0,i.jsx)("div",{className:"font-mono text-v0-gray-900",children:(0,i.jsxs)(A,{open:u,onOpenChange:d,children:[(0,i.jsx)(T,{asChild:!0,children:(0,i.jsx)("button",{className:(0,s.cn)(p,"mb-2 flex cursor-pointer items-center"),style:h,children:l?t?(0,i.jsxs)(i.Fragment,{children:["Scanning ",n.length," files inside /",t,"..."]}):(0,i.jsxs)(i.Fragment,{children:["Reading ",n.length," files..."]}):(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(i.Fragment,{children:["Scanned ",n.length," files inside ",t," "]}):(0,i.jsxs)(i.Fragment,{children:["Read ",n.length," files "]}),u?(0,i.jsx)(L.ChevronDown,{className:"ml-1 h-3 w-3"}):(0,i.jsx)(P.ChevronRight,{className:"ml-1 h-3 w-3"})]})})}),(0,i.jsx)(M,{className:"border-l border-v0-gray-200",children:(0,i.jsx)(a.AnimatePresence,{children:(0,i.jsx)("ul",{className:"m-0 flex list-none flex-col gap-2 p-0",children:n.map(e=>(0,i.jsx)("li",{className:"m-0 list-none p-0 text-sm",children:e},e))})})})]})})}var O=e.i(818273);function F(e){return Object.keys(e)}let B=n.default.memo(e=>{let{source:n}=e,i=(0,O.useIsStreaming)(),o=n.replace(/[^]*Tool call result:\n/,""),a=n.replace(/\nTool call result:[^]+/,""),s=null,l=null;try{s=JSON.parse(a),l=JSON.parse(o)}catch(e){}if(l&&((null==s?void 0:s.type)==="read_dir"||(null==s?void 0:s.type)==="read_file"))return(0,t.jsx)(_,{name:"read_dir"===s.type?s.dir:void 0,files:"read_dir"===s.type?"files"in l?l.files:[]:F(("content"in l?l.content:{})||{}),animated:i||!1});let c=(null==s?void 0:s.type)==="computer"&&"screenshot"===s.action&&l&&"data"in l;return(0,t.jsx)("p",{className:"inline-flex cursor-pointer rounded bg-cyan-600/10 px-1.5 py-0.5 text-sm text-cyan-700",children:(0,t.jsxs)("details",{children:[(0,t.jsxs)("summary",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)(r.default,{className:"h-3.5 w-3.5"}),a]}),(0,t.jsx)("div",{className:"mb-1 rounded bg-cyan-800/10 p-1 font-mono text-xs",children:c?(0,t.jsx)("img",{className:"max-h-64 max-w-full",src:"data:image/png;base64,".concat(l.data),alt:"Tool call result"}):o})]})})});B.displayName="Toolcall",e.s(["default",()=>ey],967276);var V=t,z=n,H=e.i(529693),U=a,G=e.i(376346),W=e.i(763480),q=e.i(983893),Z=e.i(183673),K=e.i(472166),$=e.i(735234),Y=e.i(967472),J=e.i(417220),Q=e.i(799058),X=e.i(611176),ee=e.i(92479),et=e.i(996174),en=e.i(209819),er=e.i(502398),ei=e.i(170160),eo=e.i(692581),ea=e.i(762585),es=e.i(32170);e.i(563948);var el=e.i(407562),ec=e.i(921),eu=e.i(211976),ed=e.i(639056);let ep=(0,e.i(490293).atom)(new Set);e.i(168204);var eh=e.i(225695),ef=e.i(667660),em=e.i(538553),eg=e.i(120485);let ev={enter:e=>({y:e>0?40:-40,opacity:0}),center:{y:0,opacity:1},exit:e=>({y:e<0?40:-40,opacity:0})},ex=new Intl.ListFormat("en",{style:"long",type:"conjunction"});function ey(e){var t;let n,{messageId:r,names:i}=e;n="string"==typeof i?[i]:i||[];let o=(0,ee.useChatMessages)(),a=(0,en.useChatMetadata)(),{user:s}=(0,es.useUser)(),l=o.activeForkKey,c=!!l&&l[l.length-1],u=c&&c===r,d=null==l?void 0:l.indexOf(r),p=void 0!==d&&d<l.length?l[d+1]:void 0,h=p&&(null==(t=o.messages.find(e=>e.id===p))?void 0:t.type)==="added-environment-variables",[f,m]=(0,z.useState)({}),[g,v]=(0,z.useState)({}),[x,y]=(0,z.useState)(!1),[b,w]=(0,z.useState)(0),{selectedProjectId:j}=(0,Z.useProjectsForUser)(),{submit:C}=(0,K.useV0Chat)(),[k,S]=(0,z.useState)(u?"unsubmit":h?"submitted":"cancelled");(0,z.useEffect)(()=>{u?S("unsubmit"):h?S("submitted"):S("cancelled")},[u,h]);let{hasVercelWritePermission:N}=(0,ef.useActiveScope)(),{project:E,canWriteToChat:D}=(0,en.useChatMetadata)(),I=null==E?void 0:E.vercelProjectId,{projects:A,isReady:T}=(0,eo.useVercelProjects)(),M=!D||!N,L=null==A?void 0:A.find(e=>e.id===I),P=n.map(e=>({key:e,alreadyExists:null==L?void 0:L.env.find(t=>t===e)})),R=async()=>{if(!Object.keys(f).length)return el.toast.error("No environment variables to create. Please try again.");if(!Object.values(f).every(e=>e))return;let e=j;if(y(!0),!j){let t=await (0,ec.createProject)({projectName:a.title||"New v0 Project",chatId:o.chatId,includeSuccessToast:!1});if(!t.ok)return el.toast.error("Failed to create project. Error: ".concat(t.error));e=t.value.id,await a.setMetadata({...a,project:{projectId:t.value.id,vercelProjectId:t.value.vercelProjectId||null,name:a.title||"New v0 Project",settings:{icon:"icon-wand-sparkles",color:null},isCreator:!0}})}if(!e)return el.toast.error("v0 Project ID not found. Please try again.");let t=await (0,q.createEnvVars)({envVars:Object.entries(f).map(e=>{let[t,n]=e;return{key:t,value:n}}),v0ProjectId:e,autoCreateVercelProject:!1,chatId:o.chatId}).catch(e=>({success:!1,error:e.message}));if(!t.success){y(!1),(0,eg.handleChatError)(t.error)||el.toast.error("Failed to create environment variables.");return}m({}),w(-1),S("submitted"),await C({action:"new",attachments:[],content:(0,eh.createMDXMessageContent)("The environment variable".concat(n.length>1?"s":""," ").concat(ex.format(n)," ").concat(n.length>1?"have":"has"," been added to the [Vercel Project]().")),type:"added-environment-variables",revalidateVercelEnvAndIntegrations:!0})};return T?(0,V.jsx)(G.Card,{className:"w-full max-w-[360px] overflow-hidden shadow-sm","data-seg":"skip",children:(0,V.jsxs)(G.CardContent,{className:"my-0 p-3",children:[(0,V.jsxs)(U.AnimatePresence,{custom:b,mode:"wait",children:["submitted"===k&&(0,V.jsx)(H.motion.div,{custom:b,variants:ev,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col items-center space-y-4",children:(0,V.jsxs)("div",{className:"flex flex-col items-center space-y-2 py-3 text-center",children:[(0,V.jsx)("span",{className:"rounded-full border border-v0-green-200 bg-v0-green-100 p-1.5",children:(0,V.jsx)($.CheckCircle,{className:"text-v0-green-700!"})}),(0,V.jsxs)("h2",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,V.jsx)("span",{children:"Environment Variables Added"}),(0,V.jsx)(et.Tooltip,{content:(0,V.jsx)("ul",{children:n.map(e=>(0,V.jsx)("li",{className:"flex items-center space-x-1",children:(0,V.jsx)("span",{children:e})},e))}),children:(0,V.jsx)("span",{className:"text-v0-gray-900",children:(0,V.jsx)(X.InformationFillSmall,{})})})]})]})},"info"),("unsubmit"===k||!j)&&u&&(0,V.jsxs)(H.motion.form,{custom:b,variants:ev,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col space-y-4",children:[I||L||!j?null:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("span",{className:"text-center",children:["This v0 Project has no"," ",(0,V.jsx)(er.Link,{href:"https://vercel.com/docs/projects/overview",external:!0,children:"Vercel Project"})," ","associated."]}),(0,V.jsx)(em.RbacTooltip,{show:!N,requiredRole:"V0Builder",children:(0,V.jsx)(ei.VercelProjectSelector,{currentProject:L,projects:A||[],v0ProjectId:j,readOnly:M})})]}),(0,V.jsxs)(V.Fragment,{children:[P.map((e,t)=>{let{key:n,alreadyExists:i}=e;return(0,V.jsx)("div",{className:"relative flex w-full",children:(0,V.jsxs)("div",{className:"w-full",children:[(0,V.jsxs)("label",{className:"text-xs font-medium text-v0-gray-900",children:[n," ",i&&(0,V.jsx)("span",{children:"*"})]}),(0,V.jsx)(em.RbacTooltip,{show:!N,requiredRole:"V0Builder",children:(0,V.jsx)(eb,{messageId:r,index:t,value:f[n]||"",onChange:e=>m({...f,[n]:e.target.value}),placeholder:"Value",type:g[n]?"text":"password",required:!0,name:n,minLength:1,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:"false","data-lpignore":"true","data-1p-ignore":"true",disabled:M,size:"sm"})}),(0,V.jsx)(U.AnimatePresence,{children:f[n]&&(0,V.jsx)(et.Tooltip,{content:g[n]?"Hide":"Show",children:(0,V.jsx)(H.motion.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},type:"button",onClick:()=>v({...g,[n]:!g[n]}),className:"absolute right-2 top-8 text-v0-gray-900",children:g[n]?(0,V.jsx)(J.EyeOff,{size:14}):(0,V.jsx)(Y.Eye,{size:14})},n)})})]})},n)}),P.some(e=>{let{alreadyExists:t}=e;return t})&&(0,V.jsx)("span",{className:"text-xs text-v0-gray-900",children:"* Environment variable already exists and will be updated."}),(0,V.jsxs)("span",{className:"flex items-center justify-between",children:[(0,V.jsx)("hr",{className:"border-v0-gray-300 m-2 border-dashed py-2"}),(0,V.jsx)(em.RbacTooltip,{show:!N,requiredRole:"V0Builder",children:(0,V.jsx)(eu.SpinnerButton,{onClick:R,pending:x,disabled:M,type:"submit",size:"sm",children:"Submit"})})]})]})]},"value"),"cancelled"===k&&(0,V.jsx)(H.motion.div,{custom:b,variants:ev,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col items-center",children:(0,V.jsx)("div",{className:"flex flex-col items-center text-center",children:(0,V.jsxs)("p",{className:"flex items-center gap-2",children:[(0,V.jsx)("span",{children:"Environment Variables Not Added"}),(0,V.jsx)(et.Tooltip,{content:(0,V.jsx)("ul",{children:n.map(e=>(0,V.jsx)("li",{className:"flex items-center space-x-1",children:(0,V.jsx)("span",{children:e})},e))}),children:(0,V.jsx)("span",{className:"text-v0-gray-900",children:(0,V.jsx)(Q.Information,{})})})]})})},"info")]}),(null==s?void 0:s.isAdminMode)?(0,V.jsxs)("span",{className:"text-xs text-v0-gray-900",children:[(0,V.jsx)("span",{className:"font-medium",children:"Internal:"}),(0,V.jsxs)("p",{children:["Is most recent message:"," ",u?(0,V.jsx)("span",{children:"True"}):(0,V.jsx)("span",{children:"False"}),(0,V.jsx)("br",{}),(0,V.jsxs)("span",{children:["Is next message added env vars:"," ",h?(0,V.jsx)("span",{children:"True"}):(0,V.jsx)("span",{children:"False"})]}),(0,V.jsx)("br",{}),(0,V.jsxs)("span",{children:[" State: ",k]}),(0,V.jsx)("br",{}),(0,V.jsxs)("span",{children:[" Message ID: ",r]})]})]}):null]})}):(0,V.jsx)(G.Card,{className:"text-v0-gray-900 bg-v0-background-200 w-full max-w-[360px] overflow-hidden shadow-sm","data-seg":"skip",children:(0,V.jsx)(G.CardContent,{className:"my-0 p-2",children:(0,V.jsx)(ea.Skeleton,{className:"h-[130px] w-full"})})})}function eb(e){let{messageId:t,index:n,...r}=e,i=(0,z.useRef)(null),[o,a]=(0,ed.useAtom)(ep);return(0,z.useEffect)(()=>{!o.has(t)&&i.current&&0===n&&(i.current.focus(),a(e=>new Set(e).add(t)))},[t,n,o,a]),(0,V.jsx)(W.Input,{ref:i,...r})}},918780,e=>{e.v({animate:"gauge-module__hRc8Aq__animate",arc:"gauge-module__hRc8Aq__arc",arcSecondary:"gauge-module__hRc8Aq__arcSecondary",circle:"gauge-module__hRc8Aq__circle",content:"gauge-module__hRc8Aq__content",fadeIn:"gauge-module__hRc8Aq__fadeIn"})},708306,289888,616593,e=>{"use strict";var t=e.i(509473),n=e.i(376346),r=e.i(762585),i=e.i(402610),o=e.i(881181);let a=(0,e.i(936096).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.51324 3.62367L3.76375 8.34731C3.61845 8.7396 3.24433 8.99999 2.826 8.99999H0.75H0V7.49999H0.75H2.47799L4.56666 1.86057C4.88684 0.996097 6.10683 0.988493 6.43776 1.84891L10.5137 12.4463L12.2408 8.1286C12.3926 7.74894 12.7604 7.49999 13.1693 7.49999H15.25H16V8.99999H15.25H13.5078L11.433 14.1868C11.0954 15.031 9.8976 15.023 9.57122 14.1744L5.51324 3.62367Z" fill="currentColor"/>');e.s(["ChartActivity",0,a],289888);var s=t,l=e.i(743124),c=e.i(7284),u=e.i(918780);let d={0:"hsl(var(--red-600))",50:"hsl(var(--amber-600))",90:"hsl(var(--green-600))"},p={tiny:20,small:32,medium:64,large:128},h={tiny:3,small:2,medium:1,large:1},f=100;function m(e){let{colors:t=d,value:n,placeholder:r,className:i,arcPriority:o="primary",style:a,size:m,deprecatedSize:g,children:v,showValue:x=!1,...y}=e,b=r||!1,w=void 0!==g?g:p[m],[j,C]=(0,l.useMemo)(()=>{if("primary"in t)return[t.primary,t.secondary];let e=Object.keys(t).map(Number);if(0===e.length)return[void 0,void 0];let r=e.filter(e=>n>=e).pop();return[void 0!==r?t[r]:void 0,void 0]},[t,n]),{circleProps:k,circumference:S,offsetFactor:N,segmentGap:E,primaryStrokePercent:D,secondaryStrokePercent:I}=(0,l.useMemo)(()=>{let e=w<=p.tiny?15:10,t=2*Math.PI*(f/2-e/2),r=f/t,i={cx:f/2,cy:f/2,r:f/2-e/2,strokeWidth:e,strokeDashoffset:0,strokeLinecap:"round",strokeLinejoin:"round"},a=Math.round(e*r)+h[m];(0===n||n>=100)&&(a=0);let s=.5*("equal"===o),l=n-2*a*s,c=100-n-2*a*(1-s)-Math.max(1-l,0);return{circleProps:i,circumference:t,segmentGap:a,primaryStrokePercent:l,secondaryStrokePercent:c,offsetFactor:s}},[o,w,m,n]);return(0,s.jsxs)("div",{className:(0,c.clsx)(u.default.circle,i,{[u.default.animate]:!b}),"data-geist-progress-circle":"","data-version":"v1",style:{...a,"--circle-size":"".concat(f,"px"),"--circumference":S,"--percent-to-px":"".concat(S/100,"px"),"--gap-percent":E,"--offset-factor":N},...y,children:[(0,s.jsxs)("svg",{fill:"none",height:w,strokeWidth:"2",viewBox:"0 0 ".concat(f," ").concat(f),width:w,children:[(0,s.jsx)("circle",{style:{opacity:I<0||100===n?0:1,"--stroke-percent":I},...k,className:u.default.arcSecondary,stroke:C||"hsl(var(--alpha-400))"}),(0,s.jsx)("circle",{...k,className:u.default.arc,"data-geist-progress-circle-fg":"",stroke:j||"var(--geist-foreground)",style:{opacity:+(0!==n),"--stroke-percent":Math.min(100-E,D)}})]}),v||x?(0,s.jsx)("div",{className:u.default.content,children:v||(0,s.jsx)("div",{className:"text-[11px] font-medium text-v0-gray-900",children:n})}):null]})}let g={firstContentfulPaint:[1.8,3],largestContentfulPaint:[2.5,4],totalBlockingTime:[200,600],cumulativeLayoutShift:[.1,.25]},v=(e,t)=>{let n=parseFloat(e);return n<t[0]?"good":n<t[1]?"needsImprovement":"poor"};function x(){return(0,t.jsxs)(n.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:[(0,t.jsx)(n.CardHeader,{className:"flex p-3",children:(0,t.jsxs)(n.CardTitle,{className:"mx-0.5 flex flex-col gap-1 text-sm font-medium text-v0-gray-1000",children:[(0,t.jsx)("span",{children:"Lighthouse Report"}),(0,t.jsx)(r.Skeleton,{className:"h-4 w-16"})]})}),(0,t.jsxs)(n.CardContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3 p-3 pt-0 sm:grid-cols-2",children:Array.from({length:4}).map((e,n)=>(0,t.jsxs)("div",{className:"bg-v0-background-300 flex items-center gap-3 rounded-[6px] border p-2",children:[(0,t.jsx)(m,{value:0,size:"small",children:(0,t.jsx)(a,{className:"font-bold text-[hsl(var(--gray-500))]",size:18})}),(0,t.jsx)(r.Skeleton,{className:"h-4 w-16"})]},n))}),(0,t.jsxs)("div",{className:"flex flex-col border-t border-v0-gray-200 p-3 text-v0-gray-900",children:[(0,t.jsx)(w,{label:"First Contentful Paint",isLoading:!0,hasMutedBackground:!0}),(0,t.jsx)(w,{label:"Largest Contentful Paint",isLoading:!0}),(0,t.jsx)(w,{label:"Total Blocking Time",isLoading:!0,hasMutedBackground:!0}),(0,t.jsx)(w,{label:"Cumulative Layout Shift",isLoading:!0})]})]})]})}function y(e){let{data:r,href:a}=e;if(!r)return(0,t.jsx)(n.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:(0,t.jsx)(n.CardContent,{className:"p-3",children:(0,t.jsxs)("div",{className:"bg-v0-background-200 flex flex-col items-center justify-center rounded-[6px] p-8",children:[(0,t.jsx)("div",{className:"mb-4 rounded-full border border-v0-red-300 bg-v0-red-200 p-2 text-v0-red-700",children:(0,t.jsx)(o.CrossCircle,{})}),(0,t.jsx)("h3",{className:"mb-2 font-medium text-v0-gray-1000",children:"Lighthouse Report Failed"}),(0,t.jsx)("p",{className:"max-w-96 text-center text-v0-gray-900",children:"Something went wrong while analyzing the performance of the website. Please try again later."})]})})});let{categories:s,firstContentfulPaint:l,largestContentfulPaint:c,totalBlockingTime:u,cumulativeLayoutShift:d}=JSON.parse(decodeURIComponent(r));return(0,t.jsxs)(n.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:[(0,t.jsx)(n.CardHeader,{className:"flex p-3",children:(0,t.jsxs)(n.CardTitle,{className:"mx-0.5 flex flex-col gap-1 text-sm font-medium text-v0-gray-1000",children:[(0,t.jsx)("span",{children:"Lighthouse Report"}),(0,t.jsxs)("a",{href:a,className:"flex items-center font-normal hover:opacity-70",children:[a,(0,t.jsx)(i.ArrowUpRightSmall,{})]})]})}),(0,t.jsxs)(n.CardContent,{className:"p-0",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3 p-3 pt-0 sm:grid-cols-2",children:Object.entries(s).map(e=>{let[n,r]=e;return(0,t.jsxs)("div",{className:"bg-v0-background-300 flex items-center gap-3 rounded-[6px] border p-2",children:[(0,t.jsx)(m,{value:100*r.score,size:"small",placeholder:!1,showValue:!0}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("p",{className:"text-[14px] font-medium leading-[20px]",children:r.title})})]},n)})}),(0,t.jsxs)("div",{className:"flex flex-col border-t border-v0-gray-200 p-3",children:[(0,t.jsx)(w,{label:"First Contentful Paint",value:l.displayValue,thresholds:g.firstContentfulPaint,hasMutedBackground:!0}),(0,t.jsx)(w,{label:"Largest Contentful Paint",value:c.displayValue,thresholds:g.largestContentfulPaint}),(0,t.jsx)(w,{label:"Total Blocking Time",value:u.displayValue,thresholds:g.totalBlockingTime,hasMutedBackground:!0}),(0,t.jsx)(w,{label:"Cumulative Layout Shift",value:d.displayValue,thresholds:g.cumulativeLayoutShift})]})]})]})}let b=e=>{let{value:n}=e;return(0,t.jsx)("div",{className:"flex h-4 w-4 flex-row rounded-full p-1 ".concat("good"===n?"bg-green-100":"needsImprovement"===n?"bg-amber-100":"poor"===n?"bg-red-100":"bg-gray-100"),children:(0,t.jsx)("div",{className:"h-2 w-2 rounded-full ".concat("good"===n?"bg-green-600":"needsImprovement"===n?"bg-amber-600":"poor"===n?"bg-red-600":"bg-gray-400")})})};function w(e){let{label:n,value:i,thresholds:o,hasMutedBackground:a,isLoading:s=!1}=e;return(0,t.jsxs)("div",{className:"flex flex-row justify-between rounded-[6px] p-2 ".concat(a?"bg-muted":""),children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(b,{value:s?"skeleton":v(i,o)}),(0,t.jsx)("div",{className:"text-[14px] font-medium leading-[20px]",children:n})]}),(0,t.jsx)("div",{className:"text-[14px] leading-[20px] text-v0-gray-900",children:s?(0,t.jsx)(r.Skeleton,{className:"h-4 w-10"}):i})]})}e.s(["LighthouseReportLoading",()=>x,"default",()=>y],708306);var j=t,C=e.i(978855),k=e.i(297239);function S(e){let{children:t,isLoading:n,seconds:r}=e,i=void 0===r?void 0:Math.floor(r),o=(0,k.useT)();return(0,j.jsx)(C.Thinking,{forceOpen:n,text:n?o("messages.thinking"):o("messages.thoughtFor")(i),isLoading:n,children:t})}e.s(["ThinkingTime",()=>S],616593)},243494,e=>{"use strict";var t=e.i(509473),n=e.i(176248),r=e.i(743124),i=e.i(323194),o=e.i(297239),a=e.i(828530);function s(){let{loginUrl:e}=(0,i.useSignInDialog)(),[t,n]=(0,r.useState)(!1),s=(0,o.useT)();return(0,i.useOAuthLoginEnabled)()?{actions:[{label:s("signInDialog.authConnect"),onClick:()=>{n("login"),(0,a.signIn)("vercel")},variant:"default",disabled:!!t}]}:{actions:[{label:s("chatAuthButtons.signin"),onClick:()=>{n("login"),window.location.href=e},variant:"secondary",disabled:"login"===t},{label:s("chatAuthButtons.signup"),onClick:()=>{n("signup"),window.location.href="".concat(e,"&action=signup")},variant:"default",disabled:"signup"===t}]}}function l(){let{actions:e}=s();return(0,t.jsx)("div",{className:"flex gap-2",children:e.map(e=>(0,t.jsx)(n.Button,{className:"h-7 rounded-md",size:"sm",variant:e.variant,onClick:e.onClick,disabled:e.disabled,children:e.label},e.label))})}e.s(["ChatAuthButtons",()=>l,"useChatAuthButtons",()=>s])},695610,e=>{"use strict";e.s(["ScopeSwitcher",()=>B],695610);var t=e.i(509473),n=e.i(743124),r=e.i(556355),i=e.i(176248),o=e.i(304649),a=e.i(667660),s=e.i(473638),l=e.i(367801),c=e.i(762585),u=e.i(595722),d=e.i(966848),p=e.i(827728),h=e.i(783069);e.i(904347);var f=e.i(37737),m=e.i(929910),g=e.i(915153),v=t,x=n,y=o,b=r,w=e.i(716360),j=e.i(543017),C=e.i(389905),k=e.i(979865),S=e.i(691175),N=e.i(707827),E=e.i(53223),D=u,I=m,A=g;function T(e){let{onRequestAccess:t,onUpgradeTeam:n,user:r,scope:i,onSelect:o,isCurrentlyActive:a,className:s,suspense:l}=e,[c,u]=(0,x.useTransition)(),d=(0,k.useRouter)(),p=(0,S.isAuthenticationRequired)(i),h=p&&(0,S.isScopeLimitedOnlyByMfa)(i),{scopeMembershipRole:f,isLoading:m,hasV0Seat:g,accessRequested:T,scopeSlug:M,scopePlan:L}=(0,A.useExtraScopeProperties)({scope:i,user:r,suspense:l}),P=e=>"".concat(i.id,"-").concat(e),R=(0,x.useMemo)(()=>a?"check":p?"locked":c?"loading":null,[a,p,c]),_=(0,x.useCallback)(e=>(e.preventDefault(),p)?h?void(0,S.redirectToTwoFactorRequired)({slug:M,push:d.push}):void(0,S.redirectToLoginToMissingScope)({slug:M,push:d.push}):g?void u(()=>o(i)):void("OWNER"===f?"v0-enterprise"===L?d.push("https://vercel.com/".concat(M,"/~/settings/members")):((0,E.track)("OpenTeamUpgradeModal",{teamId:i.id}),n(i)):T||((0,E.track)("OpenRequestAccessModal",{teamId:i.id}),t(i))),[p,g,f,T,h,M,d,o,i,L,n,t]),O=(0,I.doesUserHaveV0Seat)(i,r);return!m||O||p||"OWNER"===f?r&&(p||L||O||"OWNER"===f)?(0,v.jsx)("div",{"data-loading":c,className:(0,y.cn)("relative flex h-[44px] cursor-pointer items-center justify-between transition-opacity duration-150",s),children:(0,v.jsx)(b.DropdownMenuItem,{className:"bg-v0-background-300 h-[44px] cursor-pointer",disabled:T,onSelect:_,children:(0,v.jsx)(D.ScopeItemContent,{scope:i,user:r,children:(0,v.jsxs)(w.AnimatePresence,{mode:"wait",children:["locked"===R?(0,v.jsx)(I.PresenceIcon,{children:(0,v.jsx)(C.LockClosed,{})},P("locked")):null,"check"===R?(0,v.jsx)(I.PresenceIcon,{children:(0,v.jsx)(j.Check,{})},P("check")):null,"loading"===R?(0,v.jsx)(I.PresenceIcon,{children:(0,v.jsx)(N.Spinner,{size:16})},P("loading")):null]})})})}):null:(0,v.jsx)(D.ScopeItemContentSkeleton,{variant:"list-item"})}var M=e.i(701739),L=e.i(32170),P=e.i(242759),R=e.i(729602),_=e.i(183673),O=e.i(906261),F=e.i(297239);function B(e){let{className:s,variant:l}=e,{scopes:g,activeScope:v,setActiveScope:x,isActiveScopeReady:y,user:b}=(0,a.useActiveScopeLocalStorage)(),{expectUser:w}=(0,L.useUser)(),[j]=(0,p.useDebounceValue)(v,300),C=null!=j?j:v,k=(0,n.useMemo)(()=>g?(0,h.toSorted)(g,(e,t)=>(e.id===(null==C?void 0:C.id)?-1:0)-(t.id===(null==C?void 0:C.id)?-1:0)):[],[g,null==C?void 0:C.id]),S=(0,F.useT)(),N=(0,R.useChatId)(),{projectId:E}=(0,_.useProjectId)(),D=(0,n.useRef)(null),[I,A]=(0,n.useState)(!1),M=e=>!!y&&e===(null==C?void 0:C.id),P=(0,n.useCallback)(e=>{A(!1),(0,f.openDialog)({type:"requestAccess",data:{slug:e.slug,name:e.name||e.slug}})},[A,f.openDialog]),B=(0,n.useCallback)(async e=>{await x(e,{currentChatId:N,currentProjectId:E}),A(!1)},[x,N,E]),z=(0,n.useCallback)(e=>{A(!1),(0,f.openDialog)({type:"upgradeTeam",data:{id:e.id,name:e.name||e.slug,slug:e.slug}})},[A]),H=(0,n.useCallback)(()=>{A(!1),(0,f.openDialog)({type:"upgradePlan"})},[A]),U=(0,n.useMemo)(()=>k.filter(e=>(0,m.doesUserHaveV0Seat)(e,b)),[k,b]),G=(0,n.useMemo)(()=>(0,m.sortScopesByAccess)((0,m.sortScopesByName)(k.filter(e=>!(0,m.doesUserHaveV0Seat)(e,b)))),[k,b]),W=(0,t.jsx)(c.Skeleton,{className:(0,o.cn)("mx-2 my-1 h-6 w-35.25 rounded-lg",{"w-[60px] min-w-0 mx-0":"avatar-only"===l},s)});if(!w)return null;if(!v||!C||!b)return W;let q=G.length>0,Z=(0,O.isUserScope)(v);return(0,t.jsxs)(r.DropdownMenu,{modal:!0,open:I,onOpenChange:A,children:[(0,t.jsx)(r.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{ref:D,"aria-label":"Scope Switcher",className:(0,o.cn)("hover:bg-v0-gray-200 focus-visible:bg-v0-gray-200 data-[state=open]:bg-gray-150 active:bg-v0-gray-200","relative h-8 min-h-8 gap-0 rounded-md pl-1.5! pr-0!","header"===l?"max-w-fit shrink grow basis-32":"w-fit",Z&&"v0-level0"===b.v0plan?"min-w-32":"min-w-20",{"w-[60px] min-w-0":"avatar-only"===l},s),variant:"ghost",children:(0,t.jsx)(u.ScopeItemContent,{scope:v,user:b,trigger:!0,avatarOnly:"avatar-only"===l,skeleton:W})})}),(0,t.jsx)(r.DropdownMenuContent,{onCloseAutoFocus:e=>e.preventDefault(),onEscapeKeyDown:()=>setTimeout(()=>{var e;return null==(e=D.current)?void 0:e.focus()},0),align:"start",className:"w-[224px]",side:"top",sideOffset:8,children:(0,t.jsx)(V,{onUpgradeActiveScope:H,activeScope:C,user:b,children:(0,t.jsxs)(d.MenuGroup,{className:(0,o.cn)("gap-1 overflow-y-auto transition-opacity has-data-[loading=true]:pointer-events-none has-data-[loading=true]:opacity-70",q?"max-h-[min(400px,calc(100vh-100px))]":"max-h-[min(375px,calc(100vh-100px))]"),children:[U.map(e=>(0,t.jsx)(T,{user:b,scope:e,isCurrentlyActive:M(e.id),onSelect:B,onRequestAccess:P,onUpgradeTeam:z,suspense:!1},"menu-item-".concat(e.id))),q?(0,t.jsx)(r.DropdownMenuLabel,{className:"flex-none",children:S("sidebar.scopeSwitcher.otherTeams")}):null,G.map(e=>(0,t.jsx)(T,{user:b,scope:e,isCurrentlyActive:M(e.id),onSelect:B,onRequestAccess:P,onUpgradeTeam:z,suspense:!1},"menu-item-".concat(e.id)))]})})})]})}function V(e){let{activeScope:o,onUpgradeActiveScope:a,user:c,children:u}=e,{scopeSlug:p,scopePlan:h}=(0,g.useExtraScopeProperties)({scope:o,user:c}),{tbb:f}=(0,P.useFlags)(),m=(0,F.useT)(),v=(0,n.useMemo)(()=>{let e=!!h,t="v0-level0"===h,n="v0-platinum"===h,r=t||"v0-level3"===h||n;return{hasScope:e,isFree:t,isUltra:n,isIndividual:r}},[h]),x=(0,n.useMemo)(()=>v.hasScope&&v.isIndividual&&!v.isUltra&&(!f||v.isFree)?(0,t.jsx)(M.DropdownMenuItem,{className:"outline-hidden [&[data-highlighted]_button]:bg-v0-gray-900",onSelect:a,children:(0,t.jsx)(i.Button,{size:"sm",className:"w-full rounded-lg",children:v.isFree?m("sidebar.scopeSwitcher.upgradeToPremium"):m("sidebar.scopeSwitcher.explorePlans")})}):null,[a,v,f]),y=(0,n.useMemo)(()=>{if(!h)return null;let e=v.isIndividual?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.LinkMenuItem,{label:m("sidebar.scopeSwitcher.teamBilling"),Icon:(0,t.jsx)(s.CreditCard,{}),sameTab:!1,href:"https://vercel.com/".concat(p,"/~/settings/invoices")}),(0,t.jsx)(d.LinkMenuItem,{label:m("sidebar.scopeSwitcher.manageMembers"),Icon:(0,t.jsx)(l.Users,{}),external:!0,sameTab:!1,href:"https://vercel.com/".concat(p,"/~/settings/members")})]});return x||e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DropdownMenuSeparator,{}),(0,t.jsxs)(d.MenuGroup,{children:[e,x]})]}):null},[v.isIndividual,h,p,x]);return(0,t.jsxs)(t.Fragment,{children:[u,y]})}},417860,e=>{"use strict";var t=e.i(639056),n=e.i(914483),r=e.i(37737);function i(){let[e,i]=(0,n.useGetSet)("sidebar-sheet-open",!1),o=(0,r.getDialogsAtoms)(),a=(0,t.useAtomValue)(o.dialogOpen);return{sheetOpen:e,setSheetOpen:i,actionChatId:(null==a?void 0:a.type)==="deleteChat"?a.data.chatId:null}}e.s(["useChatSidebar",()=>i])},535389,e=>{"use strict";var t=e.i(743124);function n(e,n){var r;let[i,o]=(0,t.useState)(null!=(r=null==n?void 0:n.showInitialBorders)&&r),[a,s]=(0,t.useState)(!1),l=(0,t.useRef)(null),c=(null==n?void 0:n.containerRef)||l,u=(0,t.useRef)(null),d=(0,t.useRef)(null);return((0,t.useEffect)(()=>{let e=c.current,t=u.current,r=d.current;if(!e||!t||!r)return;let i=null,a=null,l=setTimeout(()=>{var l;let c={root:e,threshold:null!=(l=null==n?void 0:n.threshold)?l:0};i=new IntersectionObserver(e=>{let[t]=e;o(!t.isIntersecting)},c),a=new IntersectionObserver(e=>{let[t]=e;s(!t.isIntersecting)},c),i.observe(t),a.observe(r)},100);return()=>{clearTimeout(l),i&&i.disconnect(),a&&a.disconnect()}},[c,null==n?void 0:n.threshold,...(null==n?void 0:n.dependencies)||[]]),"vertical"===e)?{showTopBorder:i,showBottomBorder:a,topRef:u,bottomRef:d,containerRef:c}:{showLeftBorder:i,showRightBorder:a,leftRef:u,rightRef:d,containerRef:c}}e.s(["useScrollBorders",()=>n])},903785,284492,e=>{"use strict";e.s(["NewChatButton",()=>F],903785);var t=e.i(509473),n=e.i(53223),r=e.i(472166),i=e.i(974980),o=e.i(199551),a=e.i(799912),s=e.i(176248),l=e.i(507037),c=e.i(743124),u=e.i(304649),d=e.i(297239);e.s(["SidebarContent",()=>S,"SidebarEmptyState",()=>_,"SidebarFooter",()=>N,"SidebarHeader",()=>k,"SidebarLabel",()=>D,"SidebarList",()=>I,"SidebarListContainer",()=>E,"SidebarListItem",()=>A,"SidebarListItemAction",()=>P,"SidebarListItemButton",()=>L,"SidebarListItemLink",()=>M,"SidebarListSkeleton",()=>R],284492);var p=t,h=u,f=e.i(417860),m=e.i(154314),g=e.i(979865),v=l,x=e.i(535389),y=e.i(226092),b=e.i(762585),w=e.i(275215),j=e.i(726718);let C="flex flex-col items-stretch p-2";function k(e){let{className:t,...n}=e;return(0,p.jsx)("div",{className:(0,h.cn)(C,"gap-3",t),...n})}function S(e){let{className:t,...n}=e,{showTopBorder:r,showBottomBorder:i,containerRef:o,topRef:a,bottomRef:s}=(0,x.useScrollBorders)("vertical");return(0,p.jsxs)("div",{className:(0,h.cn)(C,"flex-1 overflow-y-auto border-y border-transparent transition-[border-color]",{"border-t-gray-200":r},"has-[.recents-skeleton]:border-b-gray-200",t),ref:o,...n,children:[(0,p.jsxs)("div",{className:"relative flex h-fit w-full flex-col gap-4",children:[(0,p.jsx)("div",{ref:a,className:"absolute inset-x-0 top-0 h-px w-full"}),n.children,(0,p.jsx)("div",{ref:s,className:"absolute inset-x-0 bottom-0 h-px w-full"})]}),(0,p.jsx)("div",{className:(0,h.cn)("from-muted via-muted/75 pointer-events-none absolute bottom-0 left-0 right-2 z-10 h-16 bg-linear-to-t transition-opacity",i?"opacity-100":"opacity-0")})]})}function N(e){let{className:t,...n}=e;return(0,p.jsx)("div",{className:(0,h.cn)(C,"gap-3 py-3",t),...n})}function E(e){let{className:t,...n}=e;return(0,p.jsx)("div",{className:(0,h.cn)("flex w-full min-w-0 flex-col items-stretch gap-0.5",t),...n})}function D(e){let{className:t,open:n,children:r,...i}=e,o=void 0!==n;return(0,p.jsxs)("h2",{className:(0,h.cn)("flex h-7.5 content-center gap-1 px-2 text-[0.8125rem] font-medium text-v0-gray-900",o&&"w-full cursor-pointer select-none justify-between transition-colors hover:text-v0-gray-1000",t),...i,children:[r,o&&(0,p.jsx)(y.ChevronRightSmall,{className:(0,h.cn)("h-4 w-4 translate-y-px",{"rotate-90 transition-transform":n})})]})}function I(e){let{className:t,...n}=e;return(0,p.jsx)("ul",{className:(0,h.cn)("flex w-full min-w-0 flex-col gap-0.5",t),...n})}function A(e){let{className:t,...n}=e;return(0,p.jsx)("li",{className:(0,h.cn)("hover:bg-v0-alpha-400 has-data-[current=true]:bg-alpha-200 has-data-[state=open]:bg-alpha-200 focus-within:bg-v0-alpha-400 active:bg-v0-alpha-400 group relative flex h-8 list-none items-center rounded-md text-v0-gray-900","has-[button:disabled]:pointer-events-none has-[button:disabled]:opacity-50",t),...n})}let T="focus-visible:ring-offset-background rounded-md group-has-[.item-action]:pr-8 flex [&_svg]:shrink-0 [&_div]:truncate [&_span]:truncate min-w-0 items-center justify-center gap-2 whitespace-nowrap flex size-full min-w-0 items-center justify-start gap-2 px-2 text-sm font-normal outline-hidden text-gray-600 focus-within:text-gray-900 hover:text-gray-900 focus:text-gray-900 group-hover:text-gray-900 data-[current=true]:text-gray-900 ring-blue-600 focus-visible:ring-2 focus-visible:ring-offset-1";function M(e){var t,n;let{className:r,asChild:i=!1,href:o,children:a,unavailable:s,noActive:l,onMouseDownNavigate:c=!1,...u}=e,{setSheetOpen:d}=(0,f.useChatSidebar)(),x=(0,g.usePathname)(),y="/".concat(null!=(t=(0,j.getTopLevelPathFromPathname)(x))?t:""),b="/chat".concat(y),C=[...null!=(n=u.altmatches)?n:[],o],{stopPeekingForced:k}=(0,w.getSidebarActions)("skeleton"),S=C.includes(y)||C.includes(b)||C.includes(x),N=i?m.Slot:s?"a":v.PrefetchLinkAndRefreshOnHover;return(0,p.jsx)(N,{className:(0,h.cn)(T,s&&"pointer-events-none",r),"data-current":S&&!l,href:o,onClick:()=>{(0,j.getChatIdFromPathname)(o)||k({onlyOnCollapsed:!0}),d(!1)},onMouseDownNavigate:c,...u,children:a})}function L(e){let{className:t,children:n,onClick:r,...i}=e,{setSheetOpen:o}=(0,f.useChatSidebar)();return(0,p.jsx)("button",{className:(0,h.cn)(T,t),onClick:e=>(null==r||r(e),o(!1)),...i,children:n})}function P(e){let{className:t,...n}=e,{setOpenedDropdown:r}=(0,w.getSidebarActions)("skeleton");return(0,p.jsx)(m.Slot,{className:(0,h.cn)("[@media(pointer:coarse)]:opacity-100 item-action hover:bg-v0-alpha-400 data-[state=open]:bg-alpha-200 focus-visible:bg-v0-alpha-400 active:bg-v0-alpha-400 absolute right-2 size-5 rounded-sm bg-transparent text-v0-gray-900 opacity-0 transition-all hover:text-v0-gray-1000 focus:text-v0-gray-1000 focus-visible:opacity-100 group-focus-within:opacity-100 group-hover:opacity-100 group-has-data-[current=true]:opacity-100 data-[state=open]:opacity-100",t),onClick:e=>{var t;r(!0),null==(t=n.onClick)||t.call(n,e)},...n})}function R(e){let{length:t,className:n,...r}=e;return 0===t?(0,p.jsx)(_,{children:(0,p.jsx)(b.Skeleton,{className:(0,h.cn)("h-7 w-full",n)})}):(0,p.jsx)("div",{className:(0,h.cn)("flex w-full min-w-0 flex-col gap-0.5",n),...r,children:Array.from({length:t}).map((e,t)=>(0,p.jsx)("div",{className:"flex h-8 w-full items-center justify-start px-2",children:(0,p.jsx)("div",{className:"bg-v0-alpha-400 h-5 w-(--width) animate-pulse rounded-md",style:{"--width":["80%","100%","90%","70%","100%","80%","40%"][t%7]}})},t))})}function _(e){let{className:t,...n}=e;return(0,p.jsx)("div",{className:(0,h.cn)("mx-2 h-16 content-center rounded-lg border border-dashed px-8 text-center text-xs text-v0-gray-900",t),...n})}var O=e.i(667660);let F=(0,c.forwardRef)(function(e,p){let{variant:h="text",className:f,buttonVariant:m,onButtonClick:g,...v}=e,x=(0,d.useT)(),{stopLlmResponse:y}=(0,r.useV0Chat)(),{hasWritePermission:b}=(0,O.useActiveScope)(),w=void 0!==v.disabled?v.disabled:!b,j=(0,c.useCallback)(e=>{if(w)return void e.preventDefault();y(),(0,n.track)("ClickNewChat"),null==g||g()},[w,y,g]);return"logo"===h||"logo-sm"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("border-none hover:bg-transparent focus:bg-transparent focus-visible:bg-transparent has-[>svg]:px-1 [&>svg]:size-8","logo-sm"===h?"[&>svg]:w-7":"size-8",f),variant:"ghost",disabled:w,ref:p,...v,children:(0,t.jsxs)(l.PrefetchLinkAndRefreshOnHover,{"data-testid":"header-logo",href:"/",onClick:j,onMouseDownNavigate:!w,children:[(0,t.jsx)(i.Logo,{"aria-hidden":!0}),(0,t.jsx)("span",{className:"sr-only",children:x("newChatButton.newChat")})]})}):"v3-logo"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("size-8 w-auto rounded-md py-1.5 has-[>svg]:px-1 [&>svg]:size-7",f),size:"sm",variant:"ghost",disabled:w,ref:p,...v,children:(0,t.jsxs)(l.PrefetchLinkAndRefreshOnHover,{"data-testid":"header-logo",href:"/",onClick:j,onMouseDownNavigate:!w,children:[(0,t.jsx)(i.Logo,{"aria-hidden":!0,className:"size-10"}),(0,t.jsx)("span",{className:"sr-only",children:x("newChatButton.newChat")})]})}):"icon"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("hover:bg-v0-gray-200 size-8 shadow-[0px_1px_2px_0px_hsla(0,0%,0%,0.04)] has-[>svg]:px-0",f),tooltip:{side:"right",content:x("newChatButton.newChat"),sideOffset:8},variant:"secondary",disabled:w,ref:p,...v,children:(0,t.jsxs)(l.PrefetchLinkAndRefreshOnHover,{href:"/chat",onClick:j,onMouseDownNavigate:!w,children:[(0,t.jsx)("span",{"aria-hidden":!0,children:(0,t.jsx)(a.Plus,{})}),(0,t.jsx)("span",{className:"sr-only",children:x("newChatButton.newChat")})]})}):"ghost"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("size-7 rounded-md",f),tooltip:x("newChatButton.newChat"),variant:"ghost",size:"sm",disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{href:"/chat",onClick:j,onMouseDownNavigate:!w,children:(0,t.jsx)(a.Plus,{})})}):"sidebar"===h?(0,t.jsx)(s.Button,{asChild:!0,variant:"secondary",className:(0,u.cn)("border-none shadow-sm",f),size:"sm",disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{className:"flex flex-row items-center gap-2.5",href:"/chat",onClick:j,onMouseDownNavigate:!w,children:(0,t.jsx)("span",{children:x("newChatButton.newChat")})})}):"pencil"===h?(0,t.jsx)(s.Button,{asChild:!0,variant:"secondary",size:"sm",className:(0,u.cn)("size-7 rounded-md",f),disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{className:"flex flex-row items-center gap-2.5",href:"/chat",onClick:j,onMouseDownNavigate:!w,children:(0,t.jsx)(o.PencilEdit,{size:14})})}):"sidebar-item"===h?(0,t.jsx)(A,{children:(0,t.jsxs)(M,{href:"/chat",onClick:j,children:[(0,t.jsx)(a.Plus,{}),(0,t.jsx)("span",{children:x("newChatButton.newChat")})]})}):"collapsible"===h?(0,t.jsx)(s.Button,{asChild:!0,className:(0,u.cn)("collapsed:w-8 hover:bg-v0-gray-200 focus:bg-v0-gray-200 focus-visible:bg-v0-gray-200 bg-v0-background-100 transition-sidebar relative h-8 w-full overflow-hidden border-none px-2 text-v0-gray-1000 shadow-sm",f),size:"sm",disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{href:"/chat",onClick:j,onMouseDownNavigate:!w,children:(0,t.jsxs)("div",{className:"collapsed:left-0 collapsed:translate-x-2 transition-sidebar absolute inset-2 left-[calc((var(--sidebar-width)-128px)/2)] flex w-fit items-center justify-center gap-2 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"collapsed:opacity-100 transition-sidebar opacity-0 ease-in-out",children:(0,t.jsx)(a.Plus,{})}),(0,t.jsx)("span",{children:x("newChatButton.newChat")})]})})}):(0,t.jsx)(s.Button,{asChild:!0,className:f,size:"sm",variant:m,disabled:w,ref:p,...v,children:(0,t.jsx)(l.PrefetchLinkAndRefreshOnHover,{href:"/chat",onClick:j,onMouseDownNavigate:!w,children:x("newChatButton.newChat")})})});F.displayName="NewChatButton"},218234,e=>{"use strict";e.s(["HeaderLogoButton",()=>a]);var t=e.i(509473),n=e.i(304649),r=e.i(903785),i=e.i(32170),o=e.i(275215);function a(e){let{preventPeek:a=!1,className:s,...l}=e,{expectUser:c}=(0,i.useUser)(),{startPeeking:u,stopPeeking:d,stopPeekingForced:p}=(0,o.getSidebarActions)("skeleton");return c?(0,t.jsx)("div",{onMouseEnter:a?void 0:u,onMouseLeave:a?void 0:d,className:(0,n.cn)("flex",s),children:(0,t.jsx)(r.NewChatButton,{onClick:()=>p({onlyOnCollapsed:!0}),variant:"v3-logo",className:"border-0",disabled:!1,...l})}):null}},863323,973817,411513,e=>{"use strict";e.s(["HeaderSidebarMobileTrigger",()=>l],863323);var t=e.i(509473),n=e.i(304649),r=e.i(417860),i=e.i(176248),o=e.i(903785),a=e.i(822956),s=e.i(32170);function l(e){let{className:l,...c}=e,{setSheetOpen:u}=(0,r.useChatSidebar)(),{expectUser:d}=(0,s.useUser)();return d?(0,t.jsxs)(i.Button,{className:(0,n.cn)("size-7 rounded-md sm:hidden",l),size:"sm",variant:"ghost",id:"sidebar-trigger",onClick:()=>u(!0),...c,children:[(0,t.jsx)(a.AlignmentLeft,{className:"size-4 shrink-0"}),(0,t.jsx)("span",{className:"sr-only",children:"Show Menu"})]}):(0,t.jsx)(o.NewChatButton,{variant:"logo-sm",className:l})}var c=t,u=n;function d(e){let{className:t,style:n}=e;return(0,c.jsx)("span",{"aria-hidden":!0,className:(0,u.cn)("text-v0-alpha-400 w-4 min-w-4 select-none text-center text-lg",t),style:n,children:"/"})}e.s(["HeaderSlash",()=>d],973817),e.s(["ChatAndProjectBreadcrumb",()=>R],411513);var p=t,h=e.i(909270),f=e.i(209819);e.i(904347);var m=e.i(37737),g=e.i(92479),v=e.i(297239),x=e.i(996174),y=e.i(936096),b=e.i(402610),w=e.i(365290),j=e.i(296046),C=e.i(758118),k=s,S=e.i(907116),N=e.i(743124),E=e.i(867160),D=e.i(621501),I=N,A=e.i(16447),T=t,M=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),L="VisuallyHidden",P=I.forwardRef((e,t)=>(0,T.jsx)(A.Primitive.span,{...e,ref:t,style:{...M,...e.style}}));function R(){let e=(0,j.useIsChatPage)(),{title:t,project:n,ownerId:r}=(0,f.useChatMetadata)(),{chatPrivacy:i}=(0,f.useChatPrivacy)(),o=t===(null==n?void 0:n.name),{chatId:a}=(0,g.useChatId)(),{user:s}=(0,k.useUser)(),l=()=>{a&&(0,m.openDialog)({type:"updateChatTitle",data:{chatId:a}})};if(!e||!a)return null;let c=(null==s?void 0:s.teamId)&&s.teamId===r||(null==s?void 0:s.id)===r,u=!!t;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d,{className:"hidden sm:block",style:{...(0,C.visibleStylesIf)(u),...(0,w.transitionStyles)(["opacity"])}}),(0,p.jsx)("div",{className:"flex items-center pl-2 overflow-hidden",style:{...(0,C.visibleStylesIf)(u),...(0,w.transitionStyles)(["opacity"])},children:(0,p.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,p.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,p.jsx)("button",{onClick:l,className:"text-label-13 font-medium text-v0-gray-1000 hover:underline truncate",children:t}),(0,p.jsx)(_,{privacy:i})]}),n&&c?(0,p.jsxs)(h.default,{href:"/chat/projects/".concat(n.projectId),className:"group text-label-12 text-v0-gray-900 flex hover:underline gap-0.5 hover:text-v0-gray-900 truncate",children:[(0,p.jsx)("span",{children:o?"View Project":n.name}),(0,p.jsx)(b.ArrowUpRightSmall,{className:"opacity-0 group-hover:opacity-100 group-hover:transform-[translate(0px,0px)] transform-[translate(-2px,2px)]",style:{...(0,w.transitionStyles)(["opacity","transform"])}})]}):null]})})]})}function _(e){let{privacy:t}=e,n=(0,v.useT)(),[r,i]=(0,N.useState)(!1),[o,a]=(0,N.useState)(!1);if(!t)return null;let s=z[t];return(0,p.jsxs)(D.Root,{open:o,onOpenChange:e=>{a(e),e||setTimeout(()=>i(!1),200)},children:[(0,p.jsx)(x.Tooltip,{content:n("chatPrivacy.label.".concat(t)),children:(0,p.jsx)(D.Trigger,{className:"size-5 bg-v0-gray-200 text-v0-gray-900 rounded-full flex items-center justify-center cursor-pointer",children:(0,p.jsx)(s,{})})}),(0,p.jsx)(D.Portal,{children:(0,p.jsx)(D.Overlay,{className:"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 bg-v0-background-200/80 inset-0 z-50 fixed flex items-center justify-center",children:(0,p.jsx)(D.Content,{className:"shadow-modal bg-v0-background-100 z-50 grid w-full max-w-lg rounded-[12px] outline-hidden duration-200 lg:w-full data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 overflow-hidden",children:r?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(P,{children:(0,p.jsx)(D.Title,{children:n("shareDialog.share")})}),(0,p.jsx)(E.ChatPermissionsSearch,{onBack:()=>i(!1)})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"px-4 py-1.5 border-b flex items-center justify-between",children:(0,p.jsx)(D.Title,{className:"h-8 flex items-center text-sm font-medium",children:n("shareDialog.share")})}),(0,p.jsx)(S.ChatSharePopoverContent,{onSearch:()=>i(!0)})]})})})})]})}P.displayName=L;let O=(0,y.withNewIcon)('\n<path d="M8 3C9.65685 3 11 4.34315 11 6V7H12V11.5C12 12.3284 11.3284 13 10.5 13H5.5L5.34668 12.9922C4.59028 12.9154 4 12.2767 4 11.5V7H5V6C5 4.34315 6.34315 3 8 3ZM5.5 11.5H10.5V8.5H5.5V11.5ZM8 4.5C7.17157 4.5 6.5 5.17157 6.5 6V7H9.5V6C9.5 5.17157 8.82843 4.5 8 4.5Z" fill="currentColor"/>\n'),F=(0,y.withNewIcon)('\n<path d="M5.5105 7.06348L4.99292 7.58203C4.14234 8.43294 4.14227 9.81221 4.99292 10.6631C5.84388 11.514 7.22399 11.514 8.07495 10.6631L8.59253 10.1455L9.65308 11.2061L9.1355 11.7236C7.69875 13.1604 5.36912 13.1604 3.93237 11.7236C2.49584 10.2869 2.4957 7.95718 3.93237 6.52051L4.44995 6.00293L5.5105 7.06348ZM9.91187 6.80469L6.80542 9.91113L5.74487 8.85059L8.85132 5.74414L9.91187 6.80469ZM6.52124 3.93262C7.95798 2.49587 10.2876 2.49587 11.7244 3.93262C13.1608 5.36938 13.161 7.69909 11.7244 9.13574L11.2068 9.65332L10.1462 8.59277L10.6638 8.07422C11.5144 7.22333 11.5144 5.84404 10.6638 4.99316C9.81286 4.14221 8.43275 4.14221 7.58179 4.99316L7.06421 5.51074L6.00366 4.4502L6.52124 3.93262Z" fill="currentColor"/>\n'),B=(0,y.withNewIcon)('\n<path d="M8 3C10.7614 3 13 5.23858 13 8C13 10.7614 10.7614 13 8 13C5.23858 13 3 10.7614 3 8C3 5.23858 5.23858 3 8 3ZM7.2373 8.59961C7.28026 9.5702 7.42798 10.5368 7.67969 11.4834C7.78524 11.493 7.89195 11.5 8 11.5C8.10805 11.5 8.21476 11.493 8.32031 11.4834C8.57203 10.5368 8.71974 9.57022 8.7627 8.59961H7.2373ZM4.55176 8.59961C4.7379 9.67763 5.41692 10.5863 6.34863 11.0859C6.17314 10.2654 6.07006 9.4336 6.03613 8.59961H4.55176ZM9.96484 8.59961C9.93093 9.43331 9.82674 10.2647 9.65137 11.085C10.5829 10.5853 11.2621 9.67748 11.4482 8.59961H9.96484ZM9.65137 4.91406C9.82684 5.73461 9.93094 6.56637 9.96484 7.40039H11.4482C11.2621 6.32237 10.5831 5.41369 9.65137 4.91406ZM6.34863 4.91309C5.41671 5.41267 4.73792 6.32221 4.55176 7.40039H6.03613C6.07005 6.56608 6.17304 5.73391 6.34863 4.91309ZM8 4.5C7.89198 4.5 7.78521 4.50605 7.67969 4.51562C7.4278 5.46247 7.28031 6.4295 7.2373 7.40039H8.7627C8.71968 6.4294 8.57126 5.46256 8.31934 4.51562C8.21413 4.50611 8.10769 4.5 8 4.5Z" fill="currentColor"/>\n'),V=(0,y.withNewIcon)('\n<path d="M11.5122 13.1475C11.5045 13.1992 11.4946 13.2446 11.4858 13.2822C11.4942 13.244 11.5006 13.1981 11.5083 13.1465L11.5122 13.1475ZM11.9692 8.9502C12.6895 9.37127 13.2938 10.0493 13.4536 11.002C13.5125 11.3531 13.5093 11.7696 13.4976 12.0625C13.4914 12.2162 13.4818 12.3515 13.4741 12.4482C13.4703 12.4965 13.4669 12.5357 13.4644 12.5635C13.4631 12.5773 13.4622 12.5888 13.4614 12.5967C13.461 12.6006 13.4607 12.6041 13.4604 12.6064L13.4595 12.6094L13.3892 13.2822H11.4995L11.521 13.0762C11.5213 13.0729 11.5226 13.0697 11.5229 13.0664C11.5235 13.0612 11.5239 13.0517 11.5239 13.0508C11.525 13.0395 11.5264 13.0299 11.5269 13.0244C11.5273 13.019 11.5277 13.0129 11.5278 13.0107V13.0078C11.5314 12.9692 11.5354 12.9208 11.5396 12.8682C11.5483 12.7584 11.5605 12.5984 11.5679 12.4141C11.5742 12.2552 11.5801 12.0326 11.5728 11.7822H12.0005C12.0022 11.5815 11.9975 11.3897 11.9741 11.25C11.9113 10.8755 11.6929 10.5651 11.3335 10.3223L11.9692 8.9502ZM6.67139 8.34277C7.47314 8.34283 8.33005 8.53304 9.04053 8.94824C9.76083 9.36932 10.3651 10.0473 10.5249 11C10.5838 11.3511 10.5806 11.7677 10.5688 12.0605C10.5627 12.2143 10.5531 12.3495 10.5454 12.4463C10.5416 12.4946 10.5382 12.5338 10.5356 12.5615C10.5343 12.5754 10.5335 12.5868 10.5327 12.5947C10.5323 12.5986 10.532 12.6022 10.5317 12.6045C10.5316 12.6055 10.5309 12.6067 10.5308 12.6074V12.6084L10.4604 13.2803H2.6167L2.54346 12.6123V12.6104C2.54337 12.6096 2.54262 12.6086 2.54248 12.6074C2.54223 12.6051 2.54191 12.6015 2.5415 12.5977C2.54069 12.5898 2.5399 12.579 2.53857 12.5654C2.53585 12.5376 2.53188 12.4978 2.52783 12.4492C2.51974 12.3522 2.51012 12.2165 2.50342 12.0625C2.49069 11.7695 2.48632 11.3524 2.54541 11C2.70766 10.0327 3.32846 9.35424 4.06104 8.9375C4.78351 8.52661 5.65244 8.34279 6.45752 8.34277H6.67139ZM6.45752 9.84277C5.85972 9.84279 5.25688 9.98268 4.80225 10.2412C4.35789 10.4941 4.09475 10.8318 4.0249 11.248C4.00155 11.3873 3.99713 11.5791 3.99951 11.7803H9.07178C9.07349 11.5795 9.06884 11.3878 9.04541 11.248C8.97582 10.8331 8.7157 10.4957 8.28369 10.2432C7.84184 9.98496 7.25623 9.84283 6.67139 9.84277H6.45752ZM6.55518 2.71777C7.91857 2.71784 9.02393 3.82311 9.02393 5.18652C9.02393 6.54993 7.91857 7.6552 6.55518 7.65527C5.19178 7.65521 4.08643 6.54994 4.08643 5.18652V5.03027C4.08643 3.75316 5.12182 2.71784 6.39893 2.71777H6.55518ZM9.86475 2.72852C11.0365 2.84152 11.9526 3.83089 11.9526 5.03223V5.34473C11.9526 6.50093 11.1039 7.45883 9.99561 7.62988V6.07422C10.2659 5.94227 10.4526 5.66576 10.4526 5.34473V5.03223C10.4526 4.6681 10.2134 4.35913 9.8833 4.25586L9.86475 2.72852ZM6.39893 4.21777C5.95025 4.21784 5.58643 4.58158 5.58643 5.03027V5.18652C5.58643 5.72151 6.02021 6.15521 6.55518 6.15527C7.09014 6.1552 7.52393 5.72151 7.52393 5.18652C7.52393 4.65154 7.09014 4.21784 6.55518 4.21777H6.39893Z" fill="currentColor"/>\n'),z={private:O,team:V,"team-edit":V,unlisted:F,public:B}},396211,948288,876961,255706,e=>{"use strict";e.s(["HeaderFeedbackButton",()=>l],396211);var t=e.i(509473),n=e.i(176248),r=e.i(743124),i=e.i(304649),o=e.i(22061);e.i(904347);var a=e.i(37737),s=e.i(297239);function l(e){let{className:l,icon:c=!1,...u}=e,d=(0,s.useT)(),p=(0,r.useCallback)(()=>{(0,a.openDialog)({type:"feedback"})},[]);return(0,t.jsx)(n.Button,{variant:c?"ghost":"secondary",className:(0,i.cn)("rounded-md",c?"size-7 text-v0-gray-900":"hidden h-7 sm:flex px-2",l),size:"sm",onClick:p,...u,children:c?(0,t.jsx)(o.Question,{}):d("sidebar.userMenu.feedback")})}e.s(["HeaderUpgradeButton",()=>w],948288);var c=t,u=n,d=r,p=i,h=a,f=s,m=e.i(667660),g=e.i(639056),v=e.i(254211),x=e.i(906261),y=e.i(53223),b=e.i(675120);function w(e){let{className:t,transitionJustify:n="end",...r}=e,i=(0,f.useT)(),{showUpgrade:o}=j(),a=(0,d.useCallback)(()=>{(0,y.track)("ClickHeaderUpgradeButton"),(0,h.openDialog)({type:"upgradePlan"})},[]);return(0,c.jsx)(b.TransitionNode,{justify:n,delay:.2,duration:.4,renderKey:"".concat(o),children:o?(0,c.jsx)(u.Button,{variant:"secondary",className:(0,p.cn)("rounded-md h-7 hidden sm:flex px-2",t),size:"sm",onClick:a,...r,children:i("promptForm.upgradePlanMobile")}):null})}function j(){let{activeScope:e,user:t}=(0,m.useActiveScope)(),n=(0,x.isUserScope)(e)&&(null==t?void 0:t.v0plan)==="v0-level0",r=(0,v.getDurableRootAtoms)("root"),[i,o]=(0,g.useAtom)(r.shouldShowUpgrade);return(0,d.useEffect)(()=>{e&&o(n)},[e,n,o]),{showUpgrade:i}}e.s(["HeaderTitle",()=>T],876961);var C=t,k=e.i(979865),S=e.i(903785),N=e.i(726718),E=e.i(32170),D=i,I=r,A=s;function T(e){let{className:t}=e,n=(0,k.usePathname)(),r=(0,N.getTopLevelPathFromPathname)(n),{expectUser:i}=(0,E.useUser)(),o=(0,A.useT)(),a=(0,I.useMemo)(()=>{if(!r)return;let e=N.PATHS_TO_TITLE.get(r);return e?o(e):void 0},[r,o]),s=(0,I.useMemo)(()=>i?(0,C.jsx)(S.NewChatButton,{variant:"logo-sm",className:(0,D.cn)("sm:hidden",t),disabled:!1}):null,[i,t]);return"string"==typeof a?(0,C.jsx)("div",{className:(0,D.cn)("text-base font-medium sm:hidden",t),children:a}):s}var M=N,L=k;function P(){let e=(0,L.usePathname)();return(0,M.isDesignSystemsEditorPage)(e)}e.s(["useIsDesignSystemsEditorPage",()=>P],255706)},969190,e=>{"use strict";var t=e.i(509473);function n(){return(0,t.jsx)("div",{className:"bg-v0-amber-200 rounded-lg px-3 py-1",children:(0,t.jsx)("p",{className:"text-sm font-medium text-center",children:"This is a read-only service account. You will not be able to make changes to user data. All actions will be logged."})})}e.s(["ImpersonationBanner",()=>n])},990009,e=>{"use strict";e.s(["BaseHeaderWrapper",()=>N,"Header",()=>S],990009);var t=e.i(509473),n=e.i(243494),r=e.i(32170),i=e.i(805214),o=e.i(396211),a=e.i(948288),s=e.i(670786),l=e.i(296046),c=e.i(695610),u=e.i(876961),d=e.i(903785),p=e.i(726718),h=e.i(979865),f=e.i(218234),m=e.i(863323),g=e.i(973817),v=e.i(255706),x=e.i(969190),y=e.i(683405);let b=[{href:"/community",label:"Community"},{href:"/enterprise",label:"Enterprise"},{href:"/pricing",label:"Pricing"},{href:"/ios",label:"iOS"},{href:"/faq",label:"FAQ"}],w=["/enterprise","/ios","/ambassador"],j=["/docs","/faq"],C=["/chat","/pricing","/community"];function k(e,t){let n=[];return n="marketing"===t?[...j,...C]:"docs"===t?[...w,...C]:[...w,...j],e.map(e=>e.href&&n.some(t=>{var n;return t.includes(null!=(n=e.href)?n:"*")})?{...e,external:!0}:e)}function S(){let{expectUser:e,user:w}=(0,r.useUser)(),j=(0,h.usePathname)(),C=(0,l.useIsChatPage)(),S=(0,p.isHome)(j),E=j.startsWith("/user/"),D=j.split("/").pop(),I=(0,v.useIsDesignSystemsEditorPage)(),{actions:A}=(0,n.useChatAuthButtons)(),T=null==w?void 0:w.isImpersonation;return C||I?null:(0,t.jsxs)(N,{children:[(0,t.jsxs)("div",{className:"flex min-w-0 items-center",children:[(0,t.jsx)(m.HeaderSidebarMobileTrigger,{className:"mr-1"}),e||!S?(0,t.jsx)(g.HeaderSlash,{className:"mr-1 sm:hidden"}):null,(0,t.jsx)(f.HeaderLogoButton,{preventPeek:!0,className:"mr-1 hidden sm:flex"}),(0,t.jsx)(u.HeaderTitle,{className:"ml-1"}),e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.HeaderSlash,{className:"hidden sm:block"}),(0,t.jsx)(c.ScopeSwitcher,{className:"hidden sm:flex",variant:"header"})]}),!e&&E&&(0,t.jsxs)("div",{className:"ml-1 flex items-center gap-1",children:[(0,t.jsx)(g.HeaderSlash,{className:"hidden sm:block"}),(0,t.jsx)("span",{className:"text-sm font-medium text-v0-gray-1000",children:D})]})]}),T&&(0,t.jsx)(x.ImpersonationBanner,{}),e?(0,t.jsxs)("div",{className:"flex flex-1 items-center justify-end gap-1.5",children:[(0,t.jsx)(a.HeaderUpgradeButton,{}),(0,t.jsx)(o.HeaderFeedbackButton,{}),(0,t.jsx)(s.HeaderCreditsButton,{}),!S&&(0,t.jsx)(d.NewChatButton,{className:"sm:hidden",variant:"pencil"}),(0,t.jsx)(i.HeaderUserMenu,{})]}):(0,t.jsx)(y.LoggedOutNavigation,{config:{items:k(b,"chat"),actions:A}})]})}function N(e){let{children:n}=e;return(0,t.jsx)("header",{className:"@container/chat-header relative z-20 flex w-full shrink-0 items-center justify-between gap-2 px-3 h-[50px] sm:px-2",children:n})}},768061,938868,229983,606278,101387,480187,e=>{"use strict";e.s(["MANUAL_INTEGRATION",()=>G,"SUCCESS_INTEGRATION_STATUSES",()=>W,"default",()=>q],768061);var t=e.i(509473),n=e.i(376346),r=e.i(176248),i=e.i(992879),o=e.i(779647),a=e.i(726988),s=e.i(743124),l=e.i(674523),c=e.i(762585),u=e.i(209819),d=e.i(324141),p=e.i(667660),h=e.i(491320),f=e.i(183673),m=e.i(66990),g=e.i(92479),v=e.i(520605);e.i(563948);var x=e.i(407562),y=e.i(472166),b=e.i(53223);e.s(["ChatHeader",()=>L,"IntlListFormatter",()=>P],938868);var w=t,j=e.i(32170),C=e.i(243494),k=e.i(620678),S=e.i(296046),N=e.i(695610),E=e.i(218234),D=e.i(863323),I=e.i(973817),A=e.i(411513),T=e.i(990009),M=e.i(969190);function L(){let{expectUser:e,user:t}=(0,j.useUser)(),n=(0,S.useIsChatPage)(),r=null==t?void 0:t.isImpersonation;if(!n)return null;let i=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(E.HeaderLogoButton,{className:"hidden sm:mr-1 sm:flex"}),(0,w.jsx)(D.HeaderSidebarMobileTrigger,{className:"sm:mr-1"})]}),o=e?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(I.HeaderSlash,{}),(0,w.jsx)(N.ScopeSwitcher,{className:"hidden sm:flex",variant:"avatar-only"})]}):null,a=(0,w.jsx)(A.ChatAndProjectBreadcrumb,{});return(0,w.jsxs)(T.BaseHeaderWrapper,{children:[(0,w.jsxs)("nav",{className:"flex w-full min-w-0 flex-1 items-center",children:[i,o,a]}),r&&(0,w.jsx)("div",{className:"absolute inset-x-0 mx-auto flex justify-center",children:(0,w.jsx)(M.ImpersonationBanner,{})}),e?(0,w.jsx)(k.ChatHeaderActions,{}):(0,w.jsx)(C.ChatAuthButtons,{})]})}let P=new Intl.ListFormat("en",{style:"long",type:"conjunction"});var R=e.i(660348),_=j,O=e.i(323194),F=e.i(433743),B=e.i(906261),V=e.i(974980),z=e.i(434673),H=e.i(583965);e.i(168204);var U=e.i(225695);let G={id:"manual",name:"Add environment variables?",description:"Manually add environment variables",icon:"/placeholder.svg",slug:"manual"},W=["added_env_vars","connected_integration","applied_script","completed_action"];function q(e){var w,j,C;let{messageId:k,category:S,namesProp:N,starter:E}=e,D=(0,s.useMemo)(()=>"string"==typeof N?[N]:N,[N]),I=(0,u.useChatMetadata)(),{chatId:A}=(0,g.useChatId)(),{isStreaming:T}=(0,g.useChatLoadingState)(),{activeForkKey:M}=(0,g.useChatMessages)(),{activeScope:L}=(0,p.useActiveScope)(),{refresh:W}=(0,H.useBrowserFrame)(),q=(0,h.useDefaultTeam)(),Z=null==(w=I.project)?void 0:w.vercelProjectId,{vercelProjectWithDashboard:K}=(0,f.useVercelProject)({v0ProjectId:null==(j=I.project)?void 0:j.projectId}),{stores:$}=(0,z.useAllTeamIntegrations)(),{submit:Y}=(0,y.useV0Chat)(),{expectUser:J}=(0,_.useUser)(),{setShowSignInDialog:Q}=(0,O.useSignInDialog)(),[X,ee]=(0,s.useState)({}),et=(e,t)=>{ee(n=>({...n,[e]:t}))},en=null==D?void 0:D.filter(e=>e&&l.RECOMMENDED_INTEGRATION_SLUGS.some(t=>t.toLowerCase()===e.toLowerCase())),er=en&&en.length>1,{connectedLinks:ei,refetchLinks:eo,isLoading:ea}=(0,v.useIntegrationLinks)({source:"add-integration",messageId:k},async e=>{var t;let n;if(et(e[0].integrationId,"none"),e.forEach(e=>{(0,b.track)("AddIntegration",{integrationSlug:e.integrationName,chatId:e.chatId||"",source:e.source})}),!er){switch(null==(t=e[0])?void 0:t.integrationName){case"Supabase":case"Neon":n="add-sql-db";break;case"Upstash for Redis":n="add-nonsql-store";break;case"Grok":case"Groq":case"DeepInfra":case"fal":n="add-ai";break;default:n=void 0}E&&(n="add-starter-integration"),W(),await Y({action:"new",attachments:[],content:(0,U.createMDXMessageContent)("The integration".concat(e.length>1?"s":""," ").concat(P.format(e.map(e=>e.integrationName))," ").concat(e.length>1?"have":"has"," been added to the [Vercel Project](").concat(null==K?void 0:K.project.url,").")),type:"added-integration",workflowState:n,revalidateVercelEnvAndIntegrations:!0})}}),{integrations:es,isLoading:el,error:ec,refetch:eu}=(0,o.useIntegrationOptions)({integrationIds:l.RECOMMENDED_INTEGRATION_SLUGS,isEnabled:!0}),{stores:{data:{marketplaceStores:ed,nativeStores:ep},refetch:eh},isLoading:ef}=(0,a.useConnectedIntegrations)({vercelProjectId:null!=Z?Z:void 0,v0ProjectId:null==(C=I.project)?void 0:C.projectId,refreshInterval:0}),em=(0,s.useMemo)(()=>!Z||ef?[]:[...ed.map(e=>{var t;return null==(t=e.product)?void 0:t.slug}).filter(Boolean),...ep.map(e=>e.type)],[ed,ef,Z,ep]),eg=null==M?void 0:M.indexOf(k),ev=void 0!==eg&&eg<M.length-1,ex=(0,s.useMemo)(()=>el?[]:[...es.filter(e=>{let t=!(null==en?void 0:en.length)||en.some(t=>t&&l.INTEGRATION_SLUG_TO_NAME[t.toLowerCase()]===e.name),n=!S||!l.INTEGRATION_NAME_TO_CATEGORY[e.name]||l.INTEGRATION_NAME_TO_CATEGORY[e.name].includes(S.toLowerCase());return t&&n}),G],[el,es,en,S]),ey=(0,s.useMemo)(()=>el||!ei?[]:es.filter(e=>ei.some(t=>t.connected&&t.integrationId===e.id)),[es,ei,el]),eb=el||ea||void 0===ei,ew=(0,s.useMemo)(()=>eb?[]:ey.length>0?ey:ex,[ey,ex,eb]),ej=()=>{let e=[...ed.map(e=>e.product.name),...ep.map(e=>e.integrationName)].filter(e=>e in l.INTEGRATION_NAME_TO_SLUG);Y({action:"new",attachments:[],content:(0,U.createMDXMessageContent)(0===e.length?"No integrations were added.":"The integration".concat(e.length>1?"s":""," ").concat(P.format(e)," ").concat(e.length>1?"have":"has"," been added to the Vercel Project.")),type:"added-integration",revalidateVercelEnvAndIntegrations:!0})},eC=async(e,t,n,r)=>{(0,b.track)("ClickAddIntegration",{integration:e}),et(e.slug,"linking_integration");try{if("blob"===e.slug){let t=await fetch("/chat/api/integrations/marketplace/storage/create-blob",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(n.name,"-blob"),projectId:n.id})});if(!t.ok){var i;let n=await t.json();throw et(e.slug,"none"),Error(null!=(i=n.error)?i:"Failed to create blob store")}eh(),W(),x.toast.success("Blob storage connected successfully"),await Y({action:"new",attachments:[],content:(0,U.createMDXMessageContent)("A blob store has been added to the [Vercel Project](".concat(null==K?void 0:K.project.url,").")),type:"added-integration",workflowState:"add-nonsql-store",revalidateVercelEnvAndIntegrations:!0}),(0,b.track)("AddIntegration",{integrationSlug:e.slug,chatId:A||"",source:"add-integration"});return}let o=l.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.slug)&&em.find(e=>t.has(e))),a=await (0,d.createAddIntegrationUrl)({integration:e,chatId:A||"",v0ProjectId:t||"",teamSlug:(0,B.isUserScope)(L)?q||"":(null==L?void 0:L.slug)||"",dashboardProject:n,source:"add-integration",messageId:k,needPrefix:o});await eo(),r?r.location.href=a:window.open(a,"_blank")}catch(e){x.toast.error(e instanceof Error?e.message:"Failed to add integration")}},ek=!N||S?"supabase":N.length>0&&Array.isArray(N)&&N[0]in l.INTEGRATION_SLUG_TO_NAME&&l.INTEGRATION_SLUG_TO_NAME[N[0]]in l.INTEGRATION_NAME_TO_SVG?l.INTEGRATION_SLUG_TO_NAME[N[0]]:"supabase";if(!J)return(0,t.jsx)(n.Card,{className:"max-w-[500px]","data-seg":"skip",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsx)("div",{className:"@container/add-integration space-y-4",children:(0,t.jsxs)("div",{className:"@[300px]/add-integration:flex-row @[300px]/add-integration:items-center @[300px]/add-integration:justify-between @[300px]/add-integration:space-y-0 flex flex-col space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md border",children:ek?(0,t.jsx)(i.default,{src:l.INTEGRATION_NAME_TO_SVG[ek]||"/placeholder.svg",alt:ek,width:16,height:16}):(0,t.jsx)(V.Logo,{className:"h-full min-w-[25px] -translate-x-px"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,t.jsx)("p",{className:"m-0 text-sm font-medium ",children:"Log in"}),(0,t.jsx)("p",{className:"m-0 text-xs text-v0-gray-900",children:"You must be logged in to connect an integration."})]})]}),(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:()=>Q({content:!1}),children:"Login"})]})})})});let eS=()=>(null==N?void 0:N.length)?N.length+1:S?Object.entries(l.INTEGRATION_NAME_TO_CATEGORY).filter(e=>{let[t,n]=e;return n.toLowerCase()===S.toLowerCase()}).length+1:2,eN=(null==N?void 0:N.length)===2;return ec||eb?(0,t.jsx)(n.Card,{className:"max-w-[450px]","data-seg":"skip",children:(0,t.jsxs)(n.CardContent,{className:"p-4",children:[(0,t.jsx)("div",{className:"@container/add-integration space-y-4",children:Array.from({length:eb?eS():1}).map((e,n,i)=>(0,t.jsxs)(s.Fragment,{children:[(0,t.jsxs)("div",{className:"@[300px]/add-integration:flex-row @[300px]/add-integration:items-center @[300px]/add-integration:justify-between @[300px]/add-integration:space-y-0 flex flex-col space-y-3",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:ec?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md border",children:(0,t.jsx)(R.Stop,{className:"size-4 text-v0-red-800!"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,t.jsx)("p",{className:"m-0 text-sm font-medium ",children:"Error"}),(0,t.jsx)("p",{className:"m-0 text-xs text-v0-gray-900",children:"Failed to fetch integration options."})]})]}):n===i.length-1?(0,t.jsx)(c.Skeleton,{className:"h-3.5 w-32"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Skeleton,{className:"size-8 rounded-md"}),(0,t.jsxs)("div",{className:"my-[3px]",children:[(0,t.jsx)(c.Skeleton,{className:"mb-1.5 h-3.5 w-24"}),(0,t.jsx)(c.Skeleton,{className:"h-2.5 w-32"})]})]})}),ec?(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:()=>eu(),children:"Retry"}):n===i.length-1?(0,t.jsx)(c.Skeleton,{className:"@[300px]/add-integration:w-8 h-8 rounded-md"}):(0,t.jsx)(c.Skeleton,{className:"@[300px]/add-integration:w-20 h-8 rounded-md"})]},n),n<i.length-1&&(0,t.jsx)(m.Separator,{className:"my-2"})]},n))}),eN&&(0,t.jsx)(c.Skeleton,{className:"mt-4 h-8 w-full"})]})}):(0,t.jsx)(n.Card,{className:"max-w-[450px] shadow-sm","data-seg":"skip",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"@container/add-integration space-y-4",children:[ew.map((e,n)=>{var o,a;let l=em.includes(e.slug)||(null==ei?void 0:ei.some(t=>t.integrationId===e.id));return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsxs)("div",{className:"@[300px]/add-integration:flex-row @[300px]/add-integration:items-center @[300px]/add-integration:justify-between @[300px]/add-integration:space-y-0 flex flex-col space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["manual"!==e.slug?(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center overflow-hidden rounded-md",children:(0,t.jsx)(i.default,{src:e.icon||"placeholder.svg",alt:"".concat(e.name," logo"),width:32,height:32})}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,t.jsx)("p",{className:"m-0 text-sm ".concat("manual"===e.slug?"text-muted-foreground":"font-medium"),children:e.name}),"manual"!==e.slug?(0,t.jsx)("p",{className:"m-0 text-xs text-v0-gray-900",children:l&&((null==(o=ed.find(t=>t.product.slug===e.slug))?void 0:o.name)||(null==(a=ep.find(t=>t.type===e.slug))?void 0:a.name))||e.description}):null]})]}),l?(0,t.jsx)(r.Button,{size:"sm",disabled:!0,variant:"secondary",children:"Connected"}):(0,t.jsx)(F.IntegrationSplitButton,{allTeamStores:$,integration:e,onConnect:eC,status:X[e.slug],vercelProjectId:null!=Z?Z:void 0,onStatusChange:et,source:"add-integration",starter:E,disabled:T||ev,sendFollowUp:!er})]}),n<ew.length-1&&(0,t.jsx)(m.Separator,{className:"my-2"})]},e.id)}),er&&(0,t.jsx)(r.Button,{size:"sm",className:"w-full",disabled:ev,onClick:ej,children:"Continue"})]})})})}e.s(["SuggestedNextStepButton",()=>X,"SuggestedNextSteps",()=>Q],229983);var Z=t,K=r,$=U,Y=y,J=e.i(402610);function Q(e){let{options:t}=e,{submit:n}=(0,Y.useV0Chat)(),r=async e=>{await n({action:"new",attachments:[],content:(0,$.createMDXMessageContent)(e)})};return(0,Z.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Z.jsx)("p",{className:"my-0 pl-0.5 text-sm text-v0-gray-900",children:"Next Steps"}),(0,Z.jsx)("div",{className:"flex flex-wrap gap-3",children:t.map((e,t)=>(0,Z.jsx)(X,{onClick:()=>r(e.prompt),children:e.title},t))})]})}function X(e){let{onClick:t,children:n,...r}=e;return(0,Z.jsxs)(K.Button,{size:"xs",variant:"outline",className:"bg-v0-background-200 dark:bg-subtle hover:bg-v0-alpha-400 pl-3! pr-2! h-7 gap-1 rounded-full border-none text-sm font-normal shadow-sm",onClick:t,...r,children:[n,(0,Z.jsx)(J.ArrowUpRightSmall,{height:16,width:16,color:"currentColor",className:"text-v0-gray-900!"})]})}var ee=t,et=r,en=i,er=n,ei=c,eo=u,ea=a;function es(e){var t,n;let{integration:r}=e,i=(0,eo.useChatMetadata)(),o=null==(t=i.project)?void 0:t.vercelProjectId,{stores:a,isLoading:s,error:l}=(0,ea.useConnectedIntegrations)({vercelProjectId:null!=o?o:void 0,v0ProjectId:null==(n=i.project)?void 0:n.projectId,refreshInterval:0}),c=a.data.marketplaceStores.find(e=>e.product.slug===r);if(s||!c||l)return(0,ee.jsx)(er.Card,{className:"h-10 w-44",children:(0,ee.jsxs)(er.CardContent,{className:"flex  h-full items-center gap-2 px-4 py-0 pl-3",children:[(0,ee.jsx)(ei.Skeleton,{className:"h-5 w-5 rounded-md"}),s?(0,ee.jsx)(ei.Skeleton,{className:"h-5 w-24"}):(0,ee.jsx)("div",{className:"text-v0-red-800",children:"No data found"})]})});let u="https://vercel.com/api/www/avatar/".concat(c.product.iconUrl),d="https://vercel.com/api/marketplace/sso?integrationConfigurationId=".concat(c.product.integrationConfigurationId,"&teamId=").concat(c.ownerId);return(0,ee.jsx)("a",{href:d,target:"_blank",children:(0,ee.jsxs)(et.Button,{className:"gap-2 pl-3",variant:"outline",children:[(0,ee.jsx)("div",{className:"flex h-5 w-5 items-center justify-center overflow-hidden rounded-md",children:(0,ee.jsx)(en.default,{src:u,alt:"".concat(c.product.name," logo"),width:20,height:20})}),"Open ",c.product.name]})})}e.s(["default",()=>es],606278),e.s(["SuggestedAction",()=>eZ,"SuggestedActions",()=>eq],101387);var el=t,ec=s,eu=t,ed=e.i(404836),ep=r,eh=s,ef=e.i(917772),em=e.i(144019),eg=g,ev=e.i(449381),ex=e.i(639056),ey=e.i(675120),eb=e.i(707827),ew=x,ej=k,eC=e.i(403055),ek=p,eS=e.i(538553);function eN(e){let{className:t,text:n="Integrations"}=e,{hasVercelWritePermission:r}=(0,ek.useActiveScope)(),i=(0,ex.useSetAtom)(ej.isSettingsSheetOpenAtom),o=(0,ex.useSetAtom)(ej.settingsSheetTabAtom),[a,s]=(0,eh.useState)("idle"),[l,c]=(0,eh.useState)(!1),{chatId:u}=(0,eg.useChatId)(),d=(0,ev.useActiveBlockState)(),p=(0,em.useAutoCreateProject)({chatId:u,activeBlock:d}),h=(0,eh.useMemo)(()=>[ed.NeonIcon,ed.SupabaseIcon,ed.UpstashIcon,ed.BlobIcon].map((e,t)=>(0,eu.jsx)("div",{className:"bg-v0-background-100 flex h-full w-full items-center justify-center rounded-full transition-colors duration-200 group-hover:bg-v0-gray-200",children:(0,eu.jsx)(e,{})},t)),[]),f=(0,eh.useCallback)(async()=>{if("loading"===a)return;s("loading");let e=await p();if(s("idle"),!e.ok)return void ew.toast.error("Failed to create project");setTimeout(()=>{i(!0),o("integrations")},100)},[a,p,i,o]),m=(0,eh.useMemo)(()=>{switch(a){case"idle":return(0,eu.jsxs)(eE,{children:[(0,eu.jsx)(ef.MarchingChildren,{shouldMarch:l,size:18,overlap:4,children:h}),n]});case"loading":return(0,eu.jsxs)(eE,{children:[(0,eu.jsx)(eb.Spinner,{size:16}),"Connecting..."]})}},[h,a,l,n]);return(0,eu.jsx)(eS.RbacTooltip,{show:!r,requiredRole:"V0Builder",children:(0,eu.jsx)(ep.Button,{size:"sm",variant:"secondary",className:(0,eC.cn)("h-7 w-[144px] select-none rounded-md",t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onClick:f,"data-slot":"integrations-connect-button",disabled:!r,children:(0,eu.jsx)(ey.TransitionNode,{renderKey:a,...ey.PRESETS.buttonContent,children:m})})})}function eE(e){let{children:t}=e;return(0,eu.jsx)("span",{className:"flex items-center gap-1",children:t})}var eD=u,eI=e.i(745197),eA=O,eT=e.i(912074),eM=y,eL=b,eP=e.i(716360),eR=e.i(529693),e_=s;let eO=!1;function eF(){let[e,t]=(0,e_.useState)(eO);return(0,e_.useEffect)(()=>{eO=!0,t(!0)},[]),e}var eB=e.i(668887);e.i(904347);var eV=e.i(37737),ez=e.i(297239),eH=e.i(572934),eU=e.i(418929),eG=ex,eW=U;function eq(e){let{elementProps:t,children:n,isLast:r,messageId:i}=e,{atoms:o}=(0,eU.useCurrentChatPrompt)(),a=(0,eG.useAtomValue)(o.editingMessage),[s,l]=(0,ec.useState)(!1),[c]=(0,eH.useSuggestionsSetting)(),{canWriteToChat:u}=(0,eD.useChatMetadata)(),d=eF(),p=(0,eB.useDesignModeEnabled)();(0,ec.useEffect)(()=>{l(!0)},[i,l]);let{showBannerLimit:h}=(0,eI.useShowUpgradeBanner)();return!h&&!a&&!p&&r&&u&&d&&c?(0,el.jsx)(eP.AnimatePresence,{initial:!1,mode:"wait",children:s&&(0,el.jsx)(eK,{elementProps:t,children:n})}):null}function eZ(e){let{name:t,description:n,elementProps:r,messageId:i}=e,[o]=(0,eI.useRateLimit)(),a=!!((null==o?void 0:o.remaining)!==void 0&&o.remaining<=0),{setShowSignInDialog:s}=(0,eA.useSignInDialog)(),{submit:l}=(0,eM.useV0Chat)(),c=(0,ec.useCallback)(()=>{s({content:(0,eW.createMDXMessageContent)(n)})},[n,s]),u=!!(0,ec.useMemo)(()=>(0,eT.getAnonId)(),[]),d=(0,ec.useCallback)(()=>u?void c():a?void(0,eV.openDialog)({type:"upgradePlan"}):void(l({action:"new",content:(0,eW.createMDXMessageContent)(n)}),(0,eL.track)("ClickSuggestedAction",{actionName:t,actionDescription:n,messageId:i})),[u,a,l,n,t,i,c]);return(0,el.jsx)(X,{...r,onClick:d,children:t})}function eK(e){let{elementProps:t,children:n}=e,r=(0,ez.useT)();return(0,el.jsxs)(eR.motion.div,{...t,"data-slot":"prompt-actions-container",className:"bg-v0-background-100 relative rounded-lg pb-2.5 pt-2 [&_[data-slot=integrations-connect-button]>div]:w-full! **:data-[slot=integrations-connect-button]:w-fit [&_button]:h-7 [&_button]:rounded-lg",initial:{opacity:0,y:32},animate:{opacity:1,y:0},exit:{opacity:0,y:32},transition:{duration:.25,ease:"easeInOut"},children:[(0,el.jsx)("div",{className:"from-background absolute -top-8 left-0 right-2 z-10 h-8 bg-linear-to-t to-transparent"}),(0,el.jsx)("span",{className:"w-fit !m-0 self-start px-0.5 py-1 text-label-14 text-v0-gray-900",children:r("promptForm.suggestions")}),(0,el.jsxs)("div",{className:"flex flex-wrap gap-2 py-1.5",children:[(0,el.jsx)(eN,{text:r("integrations.addIntegration")}),n]})]})}var e$=t,eY=e.i(304649);function eJ(e){let{className:t,...n}=e;return(0,e$.jsxs)("svg",{className:(0,eY.cn)("h-5 w-5 shrink-0",t),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...n,children:[(0,e$.jsx)("g",{clipPath:"url(#clip0_8291_77575)",children:(0,e$.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10ZM14.4129 8.16291L15.0758 7.5L13.75 6.17417L13.0871 6.83709L8.125 11.7992L6.91291 10.5871L6.25 9.92418L4.92417 11.25L5.58709 11.9129L7.46209 13.7879C7.8282 14.154 8.4218 14.154 8.78791 13.7879L14.4129 8.16291Z",fill:"#15803D"})}),(0,e$.jsx)("defs",{children:(0,e$.jsx)("clipPath",{id:"clip0_8291_77575",children:(0,e$.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]})}function eQ(e){let{className:t,...n}=e;return(0,e$.jsx)("svg",{className:(0,eY.cn)("h-5 w-5 shrink-0",t),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...n,children:(0,e$.jsx)("circle",{cx:"10",cy:"10",r:"9.25",stroke:"#71717A",strokeWidth:"1.5",strokeDasharray:"3.75 3.75"})})}e.s(["IconCheckCircle",()=>eJ,"IconCircleOutline",()=>eQ],480187)},366346,157357,128173,e=>{"use strict";e.s(["StepsCard",()=>er],366346);var t=e.i(509473),n=e.i(480187),r=e.i(674523),i=e.i(376346),o=e.i(996174),a=e.i(779647),s=e.i(183673),l=e.i(304649),c=e.i(65836),u=e.i(196269),d=e.i(696871),p=e.i(818273),h=e.i(926224);e.i(563948);var f=e.i(407562),m=e.i(53223),g=e.i(745587),v=e.i(209819),x=e.i(92479),y=e.i(554912),b=e.i(762585),w=e.i(22061),j=e.i(992879),C=e.i(743124),k=e.i(725415),S=e.i(906261),N=e.i(449381),E=e.i(667660),D=e.i(434673),I=e.i(583965),A=e.i(346970);function T(e){let t=e.join(","),{data:n,isLoading:r,error:i}=(0,A.default)(e.length>0?["integrations:completed-executions",t]:null,async()=>{let e=await fetch("/chat/api/integrations/completed-executions?identifiers=".concat(t)),{results:n}=await e.json();return n});return{data:n,isLoading:r,error:i}}e.s(["useCompletedExecutions",()=>T],157357);var M=e.i(726988),L=e.i(491320),P=e.i(520605),R=e.i(316799),_=e.i(768061),O=e.i(324141),F=e.i(710227),B=e.i(433743),V=t,z=e.i(211976),H=b,U=o,G=f,W=C,q=e.i(358847),Z=(0,q.createServerReference)("408105cc9e341eea070bca71187ae8a979f5b4392b",q.callServer,void 0,q.findSourceMapURL,"configureSupabaseUrl"),K=e.i(403055),$=E,Y=e.i(538553);function J(e){let{stepStatus:t,isLoadingCompletedExecutions:n,canWriteToChat:r,hasSupabaseIntegration:i,index:o,chatId:a,projectId:s,vercelProjectId:l,updateStepStatus:c,refresh:u,agentStyling:d}=e,{hasVercelWritePermission:p}=(0,$.useActiveScope)(),h=(0,W.useMemo)(()=>{let e="Setup",n=!1,o=!i;switch(t){case"applying_action":e="Setting up",n=!0,o=!0;break;case"completed_action":e="Completed",o=!0;break;default:e="Setup",n=!1,o=!i}return{text:e,pending:n,disabled:o||!r||!i||!p}},[t,i,r,p]),f=async()=>{try{if(!s||!l||!a)return;c(o,"applying_action");let t=await Z({vercelProjectId:l,v0ProjectId:s,chatId:a,currentChatUrl:window.location.origin});if(t.success)c(o,"completed_action");else{var e;c(o,"none"),G.toast.error(null!=(e=t.error)?e:"Unknown error")}u()}catch(e){G.toast.error(e instanceof Error?e.message:"Unknown error"),c(o,"none")}};return n?(0,V.jsx)(H.Skeleton,{className:"h-8 w-[77px]"}):(0,V.jsx)("div",{className:"flex flex-row gap-2",children:(0,V.jsx)(U.Tooltip,{content:i?void 0:"You need Supabase integration to setup this chat as redirect URL",children:(0,V.jsx)(Y.RbacTooltip,{show:!p,requiredRole:"V0Builder",children:(0,V.jsx)(z.SpinnerButton,{size:"sm",className:(0,K.cn)({"h-7":d}),pending:h.pending,disabled:h.disabled,type:"button",onClick:f,children:h.text})})})})}e.s(["SupabaseChatUrlStep",()=>J],128173);var Q=z,X=e.i(44337),ee=e.i(385671),et=e.i(393753);let en=new Set(["add-integration","run-script","add-env-var","run-action"]),er=e=>{let{steps:n,messageId:r}=e,{messages:i}=(0,x.useChatMessages)(),o=i.find(e=>e.id===r),a=(0,p.getBlocksFromState)(null==o?void 0:o.content,r).filter(e=>{var t;return!d.INLINE_BLOCK_TYPES.includes(null!=(t=e.meta.type)?t:"")}),s=a.length>0?a[a.length-1]:null;if(!s)return null;let l=n.filter(e=>en.has(e.type));return 0===l.length?null:(0,t.jsx)(ei,{steps:l,messageId:r,currentBlock:s})},ei=e=>{var d,p,A,V;let{steps:z,messageId:H,currentBlock:U}=e,{stores:G}=(0,D.useAllTeamIntegrations)(),{isStreaming:W}=(0,x.useChatLoadingState)(),{refresh:q}=(0,I.useBrowserFrame)(),Z=(0,v.useChatMetadata)(),{canWriteToChat:K}=Z,$=(0,N.useSetActiveBlockView)(),{chatId:Y}=(0,x.useChatId)(),{activeScope:en}=(0,E.useActiveScope)(),er=(0,L.useDefaultTeam)(),[ei,eo]=(0,C.useState)(null),{data:ea,isLoading:es}=T((0,C.useMemo)(()=>z.filter(e=>"run-script"===e.type).map(e=>"".concat(U.id,":").concat(e.stepName)),[z,U.id])),{project:el}=(0,v.useChatMetadata)(),{envVars:ec,isLoading:eu,refetchVercelProject:ed}=(0,s.useVercelProject)({v0ProjectId:null!=(A=null==el?void 0:el.projectId)?A:void 0}),{appendCodeOutputEvents:ep,expandConsole:eh}=(0,y.useConsole)(U.id),{setActiveFilePath:ef}=(0,g.useActiveFile)({blockId:U.id}),{saveLastOpenedBlock:em}=(0,R.useLastOpenedBlock)(),eg=null==(d=Z.project)?void 0:d.vercelProjectId,{integrations:ev}=(0,a.useIntegrationOptions)({integrationIds:r.RECOMMENDED_INTEGRATION_SLUGS,isEnabled:!0}),{stores:{data:{marketplaceStores:ex,nativeStores:ey},refetch:eb},isLoading:ew}=(0,M.useConnectedIntegrations)({vercelProjectId:null!=eg?eg:void 0,v0ProjectId:null==(p=Z.project)?void 0:p.projectId,refreshInterval:0}),ej=(0,C.useMemo)(()=>!eg||ew?[]:[...ex.map(e=>e.product.name),...ey.map(e=>e.integrationName)],[ex,ew,eg,ey]),eC=(0,C.useMemo)(()=>ej.some(e=>"supabase"===e.toLowerCase()),[ej]),ek=(0,C.useMemo)(()=>!!ec&&(0,k.getSQLExecEnvVars)(Object.keys(ec)).length>0,[ec]),{clearTimeout:eS}=(0,F.getProjectSettingsActions)(null!=(V=null==el?void 0:el.projectId)?V:""),{refetchLinks:eN}=(0,P.useIntegrationLinks)({source:"add-integration",messageId:H},async e=>{let t=z.findIndex(t=>"add-integration"===t.type&&t.stepName===e[0].integrationName);-1!==t&&eI(t,"connected_integration"),eS(e[0].integrationName),ed(),e.forEach(e=>{(0,m.track)("AddIntegration",{integrationSlug:e.integrationName,chatId:e.chatId||"",source:e.source})}),q()}),[eE,eD]=(0,C.useState)({}),eI=(e,t)=>{eD(n=>({...n,[e]:t}))};(0,C.useEffect)(()=>{z.forEach((e,t)=>{switch(e.type){case"add-integration":ej.includes(e.stepName)&&eI(t,"connected_integration");break;case"add-env-var":(null==ec?void 0:ec[e.stepName])&&eI(t,"added_env_vars");break;case"run-script":(null==ea?void 0:ea["".concat(U.id,":").concat(e.stepName)])&&eI(t,"applied_script");break;case"run-action":if("supabase-chat-url"===e.stepName){var n;if(!Y)return;(null==ec||null==(n=ec.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL)?void 0:n.value.includes(Y))&&eI(t,"completed_action")}}})},[z,ej,ec,ea,U.id,Y]),(0,C.useEffect)(()=>{if(!es&&!eu&&!ew){let e=new Set(["connected_integration","added_env_vars","applied_script","completed_action"]),t=z.findIndex(t=>!e.has(eE[z.indexOf(t)]));-1!==t&&eo(t)}},[es,eu,ew,z,eE]);let eA=async(e,t,n,i,o)=>{if(void 0===o)throw Error("Index is required within steps");(0,m.track)("ClickAddIntegration",{integration:e}),eI(o,"linking_integration");try{if("blob"===e.slug){let t=await fetch("/chat/api/integrations/marketplace/storage/create-blob",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(n.name,"-blob"),projectId:n.id})});if(!t.ok){var a;let e=await t.json();throw eI(o,"none"),Error(null!=(a=e.error)?a:"Failed to create blob store")}eb(),q(),f.toast.success("Blob storage connected successfully"),(0,m.track)("AddIntegration",{integrationSlug:e.slug,chatId:Y||"",source:"add-integration"});return}let s=r.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.name)&&ej.find(e=>t.has(e))),l=await (0,O.createAddIntegrationUrl)({integration:e,chatId:Y||"",v0ProjectId:t||"",teamSlug:(0,S.isUserScope)(en)?er||"":(null==en?void 0:en.slug)||"",dashboardProject:n,source:"add-integration",messageId:H,needPrefix:s});await eN(),i?i.location.href=l:window.open(l,"_blank")}catch(e){f.toast.error(e instanceof Error?e.message:"Failed to add integration")}},{actions:{setActiveTabIntent:eT}}=(0,ee.useChatLayout)(),eM=async e=>{$(!0,U),em(U.id),await ef(e),eT("code")},eL=async e=>{if(null===ei)return;let t=e.endsWith(".sql")?"sql":e.endsWith(".py")?"python":e.endsWith(".js")?"javascript":void 0;if(!t)throw Error("Unsupported file type");let n=null==el?void 0:el.projectId;eI(ei,"applying_script");let r=U.id+":"+e;try{if(await eM(e),"code-project"!==U.meta.type)throw Error("Code execution is only supported for code blocks");let o=(0,h.parseMultiFileSource)({source:U.source,blockType:"code-project",blockId:U.id}).find(t=>t.meta.file===e);if(!o)throw Error("Script file not found");let a={error:"No result"};if("sql"===t){if(!n)throw Error("Your chat must be in a project to run SQL scripts.");let t=ej.filter(e=>(0,X.isSqlExecProviderName)(e))[0];a=await (0,u.doSqlExecution)({props:{language:o.lang,source:o.source,meta:{file:e,transaction:o.meta.transaction},closed:!0,originalCode:o.source},sqlExecProvider:t,v0ProjectId:n,operationId:r})}else{var i;a=await (0,c.doExecution)({language:t,source:o.source,meta:{file:e,transaction:o.meta.transaction},closed:!0,originalCode:o.source},r,null!=(i=null==el?void 0:el.vercelProjectId)?i:void 0)}if("error"in a)ep([{type:"output",blockId:U.id,fileName:e,content:a.error,timestamp:new Date().toISOString(),method:"stderr"}]),f.toast.error("Error",{description:a.error}),eI(ei,"none");else{let t=(0,et.transformExecutionOutputToEvents)(a,U.id,e);ep(t),eI(ei,"applied_script")}null==eh||eh()}catch(e){f.toast.error("Error applying script",{description:e instanceof Error?e.message:"Unknown error"}),eI(ei,"none")}},eP=(e,n)=>{switch(e.type){case"add-integration":let r=ev.find(t=>t.name===e.stepName);return{stepTitle:"Install ".concat(e.stepName),stepActions:r?(0,t.jsx)(B.IntegrationSplitButton,{allTeamStores:G,integration:r,onConnect:eA,status:eE[n],vercelProjectId:null!=eg?eg:void 0,onStatusChange:eI,source:"steps-card",starter:!1,disabled:W||!K,sendFollowUp:!1,stepIndex:n}):(0,t.jsx)(b.Skeleton,{className:"h-8 w-20 rounded-md"})};case"run-script":let i=e.stepName.substring(e.stepName.lastIndexOf("/")+1),a="Apply",s=!1,l=!1;switch(eE[n]){case"creating_project":a="Connecting",s=!0,l=!0;break;case"applying_script":a="Applying",s=!0,l=!0;break;case"applied_script":a="Applied",l=!0;break;default:a="Apply",s=!1,l=!1}let c=e.stepName.endsWith(".sql"),u=e.stepName.endsWith(".py"),d=e.stepName.endsWith(".js"),p=c||u||d,h=c&&p&&(null==el?void 0:el.projectId)&&ek,f=p&&(u||d);return{stepTitle:"Run ".concat(null!=i?i:e.stepName),stepActions:es?(0,t.jsx)(b.Skeleton,{className:"h-8 w-[77px]"}):(0,t.jsx)("div",{className:"flex flex-row gap-2",children:(0,t.jsx)(o.Tooltip,{content:p?c&&!h?"No database connected":void 0:"v0 can only run SQL, Python, and Node.js scripts",children:(0,t.jsx)(Q.SpinnerButton,{size:"sm",pending:s,disabled:l||!h&&!f||!K,onClick:()=>eL(e.stepName),children:a})})})};case"run-action":if("supabase-chat-url"===e.stepName){var m,g;return{stepTitle:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 group min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm font-medium group-hover:text-v0-gray-1000 ".concat(ei===n?"text-gray-900":"text-gray-500"),children:"Setup Development Auth Redirect URL"}),(0,t.jsx)(o.Tooltip,{className:"max-w-96",content:(0,t.jsxs)("span",{children:["Adds this chat as"," ",(0,t.jsx)("strong",{className:"font-medium",children:"redirect URL"})," to Supabase and env vars, used for development purposes."]}),children:(0,t.jsx)("div",{className:"flex-shrink-0 group-hover:text-v0-gray-1000 ".concat(ei===n?"text-gray-900":"text-gray-500"),children:(0,t.jsx)(w.Question,{className:"h-4 w-4"})})})]}),stepActions:(0,t.jsx)(J,{stepStatus:eE[n],isLoadingCompletedExecutions:es,canWriteToChat:!!K,hasSupabaseIntegration:eC,activeStep:ei,index:n,projectId:null!=(m=null==el?void 0:el.projectId)?m:void 0,vercelProjectId:null!=(g=null==el?void 0:el.vercelProjectId)?g:void 0,chatId:Y,updateStepStatus:eI,refresh:q})}}return null;case"add-env-var":return{stepTitle:"Add ".concat(e.stepName),stepActions:(0,t.jsx)(B.IntegrationSplitButton,{allTeamStores:G,integration:_.MANUAL_INTEGRATION,onConnect:eA,status:eE[n],vercelProjectId:null!=eg?eg:void 0,onStatusChange:eI,source:"steps-card",starter:!1,disabled:W||!K,sendFollowUp:!1,stepIndex:n,envVarKeys:[e.stepName]})}}},eR=(e,r)=>{let i=eE[r];if("add-integration"===e.type&&ew||"run-script"===e.type&&es||"add-env-var"===e.type&&eu||"run-action"===e.type&&es)return(0,t.jsx)("div",{className:"h-5 w-5 animate-pulse rounded-full bg-v0-gray-200"});if("added_env_vars"===i||"connected_integration"===i||"applied_script"===i||"completed_action"===i)return(0,t.jsx)(n.IconCheckCircle,{});if("add-integration"===e.type){var o,a;let n=ev.find(t=>t.name===e.stepName);return(0,t.jsx)("div",{className:"flex h-5 w-5 items-center justify-center overflow-hidden rounded-full",children:(0,t.jsx)(j.default,{src:null!=(o=null==n?void 0:n.icon)?o:"/placeholder-icon.png",alt:null!=(a=null==n?void 0:n.name)?a:"Integration",width:20,height:20})})}return(0,t.jsx)(n.IconCircleOutline,{})};return(0,t.jsx)(i.Card,{className:(0,l.cn)("max-w-[500px] border border-v0-gray-900 px-3 py-[10px] shadow-none ring-2 ring-v0-gray-200",!K&&"pointer-events-none"),children:z.map((e,n)=>{let r=eP(e,n);if(!r)return null;let{stepTitle:i,stepActions:o}=r;return(0,t.jsxs)(C.default.Fragment,{children:[" ",(0,t.jsxs)("div",{className:"flex h-8 cursor-pointer items-center gap-2 py-[2px]",onClick:()=>{eo(n),"run-script"===e.type&&eM(e.stepName)},children:[eR(e,n),(0,t.jsxs)("div",{className:"flex w-full min-w-0 items-center justify-between gap-2",children:["string"==typeof i?(0,t.jsx)("div",{className:"min-w-0 shrink overflow-hidden text-ellipsis text-nowrap text-sm font-medium hover:text-v0-gray-1000 ".concat(ei===n?"text-gray-900":"text-gray-500"),children:i}):i,ei===n&&o]})]}),n!==z.length-1&&(0,t.jsx)("div",{className:"h-4 w-full",children:(0,t.jsx)("div",{className:"ml-2 h-full w-px bg-v0-gray-200"})})]},n)})})}},111380,e=>{"use strict";let t=(0,e.i(121793).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["default",()=>t])},731035,e=>{"use strict";var t=e.i(111380);e.s(["Minus",()=>t.default])},587635,e=>{e.v({alignEnd:"trace-viewer-module__Ue2a5a__alignEnd",alignStart:"trace-viewer-module__Ue2a5a__alignStart",ancestorDuration:"trace-viewer-module__Ue2a5a__ancestorDuration",ancestorLine:"trace-viewer-module__Ue2a5a__ancestorLine",ancestorLineContainer:"trace-viewer-module__Ue2a5a__ancestorLineContainer",ancestorName:"trace-viewer-module__Ue2a5a__ancestorName",ancestorNode:"trace-viewer-module__Ue2a5a__ancestorNode",ancestorText:"trace-viewer-module__Ue2a5a__ancestorText",childRow:"trace-viewer-module__Ue2a5a__childRow",collapsed:"trace-viewer-module__Ue2a5a__collapsed",color0:"trace-viewer-module__Ue2a5a__color0",color1:"trace-viewer-module__Ue2a5a__color1",color2:"trace-viewer-module__Ue2a5a__color2",color3:"trace-viewer-module__Ue2a5a__color3",colorHighlight:"trace-viewer-module__Ue2a5a__colorHighlight",colorVercel:"trace-viewer-module__Ue2a5a__colorVercel",cursorMarker:"trace-viewer-module__Ue2a5a__cursorMarker",cursorMarkerContainer:"trace-viewer-module__Ue2a5a__cursorMarkerContainer",cursorMarkerLabel:"trace-viewer-module__Ue2a5a__cursorMarkerLabel",cursorMarkerLabelContainer:"trace-viewer-module__Ue2a5a__cursorMarkerLabelContainer",cursorMarkerStickyParent:"trace-viewer-module__Ue2a5a__cursorMarkerStickyParent",cursorSelection:"trace-viewer-module__Ue2a5a__cursorSelection",detailGroup:"trace-viewer-module__Ue2a5a__detailGroup",detailHeading:"trace-viewer-module__Ue2a5a__detailHeading",detailHeadingIcon:"trace-viewer-module__Ue2a5a__detailHeadingIcon",divider:"trace-viewer-module__Ue2a5a__divider",eventDiamond:"trace-viewer-module__Ue2a5a__eventDiamond",eventMarker:"trace-viewer-module__Ue2a5a__eventMarker",eventMarkers:"trace-viewer-module__Ue2a5a__eventMarkers",eventMarkersContainer:"trace-viewer-module__Ue2a5a__eventMarkersContainer",eventName:"trace-viewer-module__Ue2a5a__eventName",eventTimestamp:"trace-viewer-module__Ue2a5a__eventTimestamp",hidden:"trace-viewer-module__Ue2a5a__hidden",hoverInfo:"trace-viewer-module__Ue2a5a__hoverInfo",huge:"trace-viewer-module__Ue2a5a__huge",inert:"trace-viewer-module__Ue2a5a__inert",infraSpanDescription:"trace-viewer-module__Ue2a5a__infraSpanDescription",mapCanvas:"trace-viewer-module__Ue2a5a__mapCanvas",mapContainer:"trace-viewer-module__Ue2a5a__mapContainer",mapThumb:"trace-viewer-module__Ue2a5a__mapThumb",marker:"trace-viewer-module__Ue2a5a__marker",markerLabel:"trace-viewer-module__Ue2a5a__markerLabel",markers:"trace-viewer-module__Ue2a5a__markers",markersContainer:"trace-viewer-module__Ue2a5a__markersContainer",mobile:"trace-viewer-module__Ue2a5a__mobile",notch:"trace-viewer-module__Ue2a5a__notch",searchBar:"trace-viewer-module__Ue2a5a__searchBar",searchInput:"trace-viewer-module__Ue2a5a__searchInput",selected:"trace-viewer-module__Ue2a5a__selected",skeleton:"trace-viewer-module__Ue2a5a__skeleton",small:"trace-viewer-module__Ue2a5a__small","span-skeleton":"trace-viewer-module__Ue2a5a__span-skeleton",spanDetailPanel:"trace-viewer-module__Ue2a5a__spanDetailPanel",spanDetailPanelAttribute:"trace-viewer-module__Ue2a5a__spanDetailPanelAttribute",spanDetailPanelAttributeKey:"trace-viewer-module__Ue2a5a__spanDetailPanelAttributeKey",spanDetailPanelAttributeValue:"trace-viewer-module__Ue2a5a__spanDetailPanelAttributeValue",spanDetailPanelBody:"trace-viewer-module__Ue2a5a__spanDetailPanelBody",spanDetailPanelClose:"trace-viewer-module__Ue2a5a__spanDetailPanelClose",spanDetailPanelCloseVerticalRule:"trace-viewer-module__Ue2a5a__spanDetailPanelCloseVerticalRule",spanDetailPanelCorner:"trace-viewer-module__Ue2a5a__spanDetailPanelCorner",spanDetailPanelDuration:"trace-viewer-module__Ue2a5a__spanDetailPanelDuration",spanDetailPanelName:"trace-viewer-module__Ue2a5a__spanDetailPanelName",spanDetailPanelQuickLink:"trace-viewer-module__Ue2a5a__spanDetailPanelQuickLink",spanDetailPanelQuickLinkLabel:"trace-viewer-module__Ue2a5a__spanDetailPanelQuickLinkLabel",spanDetailPanelResizer:"trace-viewer-module__Ue2a5a__spanDetailPanelResizer",spanDetailPanelTop:"trace-viewer-module__Ue2a5a__spanDetailPanelTop",spanDetailPanelTopInfo:"trace-viewer-module__Ue2a5a__spanDetailPanelTopInfo",spanDetailPanelTraceViewer:"trace-viewer-module__Ue2a5a__spanDetailPanelTraceViewer",spanDetailPanelTruncatedHeading:"trace-viewer-module__Ue2a5a__spanDetailPanelTruncatedHeading",spanDuration:"trace-viewer-module__Ue2a5a__spanDuration",spanName:"trace-viewer-module__Ue2a5a__spanName",spanNameDetailPanel:"trace-viewer-module__Ue2a5a__spanNameDetailPanel",spanNode:"trace-viewer-module__Ue2a5a__spanNode",spanNodeEvent:"trace-viewer-module__Ue2a5a__spanNodeEvent",spanSpacer:"trace-viewer-module__Ue2a5a__spanSpacer",timeline:"trace-viewer-module__Ue2a5a__timeline",traceNode:"trace-viewer-module__Ue2a5a__traceNode",traceViewer:"trace-viewer-module__Ue2a5a__traceViewer",traceViewerContent:"trace-viewer-module__Ue2a5a__traceViewerContent",unlit:"trace-viewer-module__Ue2a5a__unlit",xHover:"trace-viewer-module__Ue2a5a__xHover","zoom-buttons-fade-in":"trace-viewer-module__Ue2a5a__zoom-buttons-fade-in",zoomButton:"trace-viewer-module__Ue2a5a__zoomButton",zoomButtonGroup:"trace-viewer-module__Ue2a5a__zoomButtonGroup",zoomButtonTraceViewer:"trace-viewer-module__Ue2a5a__zoomButtonTraceViewer"})},338735,e=>{e.v({line:"spinner-module__at2HyG__line",spin:"spinner-module__at2HyG__spin"})},289215,e=>{e.v({reset:"reset-module__28DELG__reset",visuallyHidden:"reset-module__28DELG__visuallyHidden"})},296559,e=>{e.v({base:"button-module__7DxaPG__base "+e.i(289215).reset,button:"button-module__7DxaPG__button "+e.i(289215).reset,center:"button-module__7DxaPG__center",circle:"button-module__7DxaPG__circle",content:"button-module__7DxaPG__content",customHoverStyles:"button-module__7DxaPG__customHoverStyles",customStyles:"button-module__7DxaPG__customStyles",flex:"button-module__7DxaPG__flex",flexGrow:"button-module__7DxaPG__flexGrow",grow:"button-module__7DxaPG__grow",invert:"button-module__7DxaPG__invert",large:"button-module__7DxaPG__large",loading:"button-module__7DxaPG__loading",prefix:"button-module__7DxaPG__prefix",responsive:"button-module__7DxaPG__responsive",rounded:"button-module__7DxaPG__rounded",secondary:"button-module__7DxaPG__secondary",shadow:"button-module__7DxaPG__shadow",shape:"button-module__7DxaPG__shape",small:"button-module__7DxaPG__small",start:"button-module__7DxaPG__start",suffix:"button-module__7DxaPG__suffix",tertiary:"button-module__7DxaPG__tertiary",tiny:"button-module__7DxaPG__tiny"})},346813,e=>{e.v({debug:"stack-module__zvwtEG__debug",padding:"stack-module__zvwtEG__padding",stack:"stack-module__zvwtEG__stack"})},906885,e=>{e.v({action:"note-module__QU7nUW__action",center:"note-module__QU7nUW__center",content:"note-module__QU7nUW__content",disabled:"note-module__QU7nUW__disabled",hasLabel:"note-module__QU7nUW__hasLabel",large:"note-module__QU7nUW__large",note:"note-module__QU7nUW__note",small:"note-module__QU7nUW__small"})},307942,e=>{e.v({clamp:"text-module__enZgHa__clamp",monospace:"text-module__enZgHa__monospace",nowrap:"text-module__enZgHa__nowrap",truncate:"text-module__enZgHa__truncate",wrapper:"text-module__enZgHa__wrapper"})},926949,e=>{e.v({alwaysUnderline:"link-module__zSGW3G__alwaysUnderline",blend:"link-module__zSGW3G__blend",disabled:"link-module__zSGW3G__disabled",external:"link-module__zSGW3G__external",highlight:"link-module__zSGW3G__highlight",link:"link-module__zSGW3G__link",primary:"link-module__zSGW3G__primary",secondary:"link-module__zSGW3G__secondary",underline:"link-module__zSGW3G__underline"})},154060,e=>{e.v({inline:"skeleton-module__jL-CLq__inline",loaded:"skeleton-module__jL-CLq__loaded",loading:"skeleton-module__jL-CLq__loading",noAnimation:"skeleton-module__jL-CLq__noAnimation",pill:"skeleton-module__jL-CLq__pill",rounded:"skeleton-module__jL-CLq__rounded",show:"skeleton-module__jL-CLq__show",skeleton:"skeleton-module__jL-CLq__skeleton",squared:"skeleton-module__jL-CLq__squared",wrapper:"skeleton-module__jL-CLq__wrapper"})},805325,e=>{e.v(e.b(["static/chunks/63d30016d5d3f168.js","static/chunks/turbopack-03cf87208f567725.js"]))},624063,e=>{e.v({"action-link":"error-module__6C3TuG__action-link",error:"error-module__6C3TuG__error",label:"error-module__6C3TuG__label",large:"error-module__6C3TuG__large",small:"error-module__6C3TuG__small",text:"error-module__6C3TuG__text"})},328645,e=>{e.v({capitalize:"label-module__Lb89BG__capitalize",input:"label-module__Lb89BG__input",label:"label-module__Lb89BG__label"})},772891,e=>{e.v({container:"input-module__RkrdNq__container",error:"input-module__RkrdNq__error",input:"input-module__RkrdNq__input",keyboardFocus:"input-module__RkrdNq__keyboardFocus",large:"input-module__RkrdNq__large",mediumSmall:"input-module__RkrdNq__mediumSmall",noPrefixStyle:"input-module__RkrdNq__noPrefixStyle",noSuffixStyle:"input-module__RkrdNq__noSuffixStyle",prefix:"input-module__RkrdNq__prefix",rounded:"input-module__RkrdNq__rounded",small:"input-module__RkrdNq__small",suffix:"input-module__RkrdNq__suffix",xSmall:"input-module__RkrdNq__xSmall"})},900071,e=>{e.v({kbd:"kbd-module__KK4ylq__kbd",small:"kbd-module__KK4ylq__small"})},716331,e=>{e.v({button:"clearable-module__uczRPW__button "+e.i(289215).reset,cmdk:"clearable-module__uczRPW__cmdk",command:"clearable-module__uczRPW__command",disabled:"clearable-module__uczRPW__disabled",k:"clearable-module__uczRPW__k",kbd:"clearable-module__uczRPW__kbd",suffixContainer:"clearable-module__uczRPW__suffixContainer"})},299014,(e,t,n)=>{"use strict";var r=e.i(386496);Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=4,n=e.length,i=n%t;if(!i)return e;var o=n,a=t-i,s=n+a,l=r.Buffer.alloc(s);for(l.write(e);a--;)l.write("=",o++);return l.toString()}},239598,(e,t,n)=>{"use strict";var r=e.i(386496);Object.defineProperty(n,"__esModule",{value:!0});var i=e.r(299014);function o(e,t){return(void 0===t&&(t="utf8"),r.Buffer.isBuffer(e))?l(e.toString("base64")):l(r.Buffer.from(e,t).toString("base64"))}function a(e,t){return void 0===t&&(t="utf8"),r.Buffer.from(s(e),"base64").toString(t)}function s(e){return e=e.toString(),i.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function l(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(e){return r.Buffer.from(s(e),"base64")}var u=o;u.encode=o,u.decode=a,u.toBase64=s,u.fromBase64=l,u.toBuffer=c,n.default=u},335249,(e,t,n)=>{t.exports=e.r(239598).default,t.exports.default=t.exports},302998,774636,968552,e=>{"use strict";let t;var n,r=e.i(509473),i=e.i(707827),o=e.i(376346),a=e.i(402610),s=e.i(881181),l=e.i(919639),c=e.i(731035),u=r,d=e.i(743124),p=e.i(722978),h=e.i(587635),f=r,m=d,g=p,v=r,x=d,y=e.i(909270),b=p;function w(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(let e of t)"function"==typeof e&&e(...n)}}var j=d;let C="undefined"!=typeof document?j.default.useLayoutEffect:()=>{};var k=d;let S=null!=(n=k.default.useInsertionEffect)?n:C;function N(e){let t=(0,k.useRef)(null);return S(()=>{t.current=e},[e]),(0,k.useCallback)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];let i=t.current;return null==i?void 0:i(...n)},[])}var E=e.i(643908),D=d;let I={prefix:String(Math.round(1e10*Math.random())),current:0},A=D.default.createContext(I),T=D.default.createContext(!1);"undefined"!=typeof window&&window.document&&window.document.createElement;new WeakMap;D.default.useId,"undefined"!=typeof window&&window.document&&window.document.createElement;let M=new Map;function L(e,t){if(e===t)return e;let n=M.get(e);if(n)return n.forEach(e=>e.current=t),t;let r=M.get(t);return r?(r.forEach(t=>t.current=e),e):t}"undefined"!=typeof FinalizationRegistry&&(t=new FinalizationRegistry(e=>{M.delete(e)}));var P=e.i(7284);function R(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r={...t[0]};for(let e=1;e<t.length;e++){let n=t[e];for(let e in n){let t=r[e],i=n[e];"function"==typeof t&&"function"==typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?r[e]=w(t,i):("className"===e||"UNSAFE_className"===e)&&"string"==typeof t&&"string"==typeof i?r[e]=(0,P.default)(t,i):"id"===e&&t&&i?r.id=L(t,i):r[e]=void 0!==i?i:t}}return r}let _=new Set(["id"]),O=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),F=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),B=new Set(["dir","lang","hidden","inert","translate"]),V=new Set(["onClick","onAuxClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onGotPointerCapture","onLostPointerCapture","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionCancel","onTransitionEnd","onTransitionRun","onTransitionStart"]),z=/^(data-.*)$/;function H(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{labelable:n,isLink:r,global:i,events:o=i,propNames:a}=t,s={};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(_.has(t)||n&&O.has(t)||r&&F.has(t)||i&&B.has(t)||o&&V.has(t)||t.endsWith("Capture")&&V.has(t.slice(0,-7))||(null==a?void 0:a.has(t))||z.test(t))&&(s[t]=e[t]);return s}let U=e=>{var t;return null!=(t=null==e?void 0:e.ownerDocument)?t:document},G=e=>e&&"window"in e&&e.window===e?e:U(e).defaultView||window;function W(e){return null!==e&&"object"==typeof e&&"nodeType"in e&&"number"==typeof e.nodeType}function q(e){return W(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let Z="undefined"!=typeof Element&&"checkVisibility"in Element.prototype;function K(e){let t=G(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,i="none"!==n&&"hidden"!==r&&"collapse"!==r;if(i){let{getComputedStyle:t}=e.ownerDocument.defaultView,{display:n,visibility:r}=t(e);i="none"!==n&&"hidden"!==r&&"collapse"!==r}return i}function $(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&("DETAILS"!==e.nodeName||!t||"SUMMARY"===t.nodeName||e.hasAttribute("open"))}function Y(e,t){return Z?e.checkVisibility():"#comment"!==e.nodeName&&K(e)&&$(e,t)&&(!e.parentElement||Y(e.parentElement,e))}let J=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])',"permission"],Q=J.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";function X(e){return e.matches(Q)&&Y(e)&&!ee(e)}function ee(e){let t=e;for(;null!=t;){if(t instanceof t.ownerDocument.defaultView.HTMLElement&&t.inert)return!0;t=t.parentElement}return!1}function et(e){if(er())e.focus({preventScroll:!0});else{let t=ei(e);e.focus(),eo(t)}}J.push('[tabindex]:not([tabindex="-1"]):not([disabled])'),J.join(':not([hidden]):not([tabindex="-1"]),');let en=null;function er(){if(null==en){en=!1;try{document.createElement("div").focus({get preventScroll(){return en=!0,!0}})}catch(e){}}return en}function ei(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function eo(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}var ea=d;function es(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function el(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function ec(e){let t=(0,ea.useRef)({isFocused:!1,observer:null});C(()=>{let e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}},[]);let n=N(t=>{null==e||e(t)});return(0,ea.useCallback)(e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target,i=e=>{t.current.isFocused=!1,r.disabled&&n(es(e)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var e;null==(e=t.current.observer)||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let eu=!1;function ed(e){for(;e&&!X(e);)e=e.parentElement;let t=G(e),n=t.document.activeElement;if(!n||n===e)return;eu=!0;let r=!1,i=e=>{(e.target===n||r)&&e.stopImmediatePropagation()},o=t=>{(t.target===n||r)&&(t.stopImmediatePropagation(),e||r||(r=!0,et(n),l()))},a=t=>{(t.target===e||r)&&t.stopImmediatePropagation()},s=t=>{(t.target===e||r)&&(t.stopImmediatePropagation(),r||(r=!0,et(n),l()))};t.addEventListener("blur",i,!0),t.addEventListener("focusout",o,!0),t.addEventListener("focusin",s,!0),t.addEventListener("focus",a,!0);let l=()=>{cancelAnimationFrame(c),t.removeEventListener("blur",i,!0),t.removeEventListener("focusout",o,!0),t.removeEventListener("focusin",s,!0),t.removeEventListener("focus",a,!0),eu=!1,r=!1},c=requestAnimationFrame(l);return l}function ep(e){var t;if("undefined"==typeof window||null==window.navigator)return!1;let n=null==(t=window.navigator.userAgentData)?void 0:t.brands;return Array.isArray(n)&&n.some(t=>e.test(t.brand))||e.test(window.navigator.userAgent)}function eh(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null==(t=window.navigator.userAgentData)?void 0:t.platform)||window.navigator.platform)}function ef(e){let t=null;return()=>(null==t&&(t=e()),t)}let em=ef(function(){return eh(/^Mac/i)}),eg=ef(function(){return eh(/^iPhone/i)}),ev=ef(function(){return eh(/^iPad/i)||em()&&navigator.maxTouchPoints>1}),ex=ef(function(){return eg()||ev()});ef(function(){return em()||ex()});let ey=ef(function(){return ep(/AppleWebKit/i)&&!eb()}),eb=ef(function(){return ep(/Chrome/i)}),ew=ef(function(){return ep(/Android/i)}),ej=ef(function(){return ep(/Firefox/i)}),eC=new Map,ek=new Set;function eS(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=t=>{if(!e(t)||!t.target)return;let r=eC.get(t.target);r||(r=new Set,eC.set(t.target,r),t.target.addEventListener("transitioncancel",n,{once:!0})),r.add(t.propertyName)},n=t=>{if(!e(t)||!t.target)return;let r=eC.get(t.target);if(r&&(r.delete(t.propertyName),0===r.size&&(t.target.removeEventListener("transitioncancel",n),eC.delete(t.target)),0===eC.size)){for(let e of ek)e();ek.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",n)}function eN(){for(let[e]of eC)"isConnected"in e&&!e.isConnected&&eC.delete(e)}function eE(e){requestAnimationFrame(()=>{eN(),0===eC.size?e():ek.add(e)})}"undefined"!=typeof document&&("loading"!==document.readyState?eS():document.addEventListener("DOMContentLoaded",eS));let eD="default",eI="",eA=new WeakMap;function eT(e){if(ex()){if("default"===eD){let t=U(e);eI=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}eD="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let t="userSelect"in e.style?"userSelect":"webkitUserSelect";eA.set(e,e.style[t]),e.style[t]="none"}}function eM(e){if(ex())"disabled"===eD&&(eD="restoring",setTimeout(()=>{eE(()=>{if("restoring"===eD){let t=U(e);"none"===t.documentElement.style.webkitUserSelect&&(t.documentElement.style.webkitUserSelect=eI||""),eI="",eD="default"}})},300));else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&eA.has(e)){let t=eA.get(e),n="userSelect"in e.style?"userSelect":"webkitUserSelect";"none"===e.style[n]&&(e.style[n]=t),""===e.getAttribute("style")&&e.removeAttribute("style"),eA.delete(e)}}let eL=d.default.createContext({register:()=>{}});eL.displayName="PressResponderContext";var eP=e.i(376054),eR=e.i(136927),e_=e.i(550475);function eO(e,t){C(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}})}var eF=d;function eB(){let e=(0,eF.useRef)(new Map),t=(0,eF.useCallback)((t,n,r,i)=>{let o=(null==i?void 0:i.once)?function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];e.current.delete(r),r(...n)}:r;e.current.set(r,{type:n,eventTarget:t,fn:o,options:i}),t.addEventListener(n,o,i)},[]),n=(0,eF.useCallback)((t,n,r,i)=>{var o;let a=(null==(o=e.current.get(r))?void 0:o.fn)||r;t.removeEventListener(n,a,i),e.current.delete(r)},[]),r=(0,eF.useCallback)(()=>{e.current.forEach((e,t)=>{n(e.eventTarget,e.type,t,e.options)})},[n]);return(0,eF.useEffect)(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}let eV=!1;function ez(){return eV}function eH(e,t){if(!ez())return!!t&&!!e&&e.contains(t);if(!e||!t)return!1;let n=t;for(;null!==n;){if(n===e)return!0;n="SLOT"===n.tagName&&n.assignedSlot?n.assignedSlot.parentNode:q(n)?n.host:n.parentNode}return!1}let eU=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!ez())return t.activeElement;let n=t.activeElement;for(;n&&"shadowRoot"in n&&(null==(e=n.shadowRoot)?void 0:e.activeElement);)n=n.shadowRoot.activeElement;return n};function eG(e){return ez()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function eW(e,t){var n,r;let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{metaKey:o,ctrlKey:a,altKey:s,shiftKey:l}=t;ej()&&(null==(r=window.event)||null==(n=r.type)?void 0:n.startsWith("key"))&&"_blank"===e.target&&(em()?o=!0:a=!0);let c=ey()&&em()&&!ev()&&1?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:o,ctrlKey:a,altKey:s,shiftKey:l}):new MouseEvent("click",{metaKey:o,ctrlKey:a,altKey:s,shiftKey:l,bubbles:!0,cancelable:!0});eW.isOpening=i,et(e),e.dispatchEvent(c),eW.isOpening=!1}function eq(e){return 0===e.mozInputSource&&!!e.isTrusted||(ew()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function eZ(e){return!ew()&&0===e.width&&0===e.height||1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType}eW.isOpening=!1;var eK=e.i(152076),e$=d;function eY(e){let t=(0,e$.useContext)(eL);if(t){let{register:n,...r}=t;e=R(r,e),n()}return eO(t,e.ref),e}var eJ=new WeakMap;class eQ{continuePropagation(){(0,e_._)(this,eJ,!1)}get shouldStopPropagation(){return(0,eP._)(this,eJ)}constructor(e,t,n,r){var i;(0,eR._)(this,eJ,{writable:!0,value:void 0}),(0,e_._)(this,eJ,!0);let o=null!=(i=null==r?void 0:r.target)?i:n.currentTarget,a=null==o?void 0:o.getBoundingClientRect(),s,l=0,c,u=null;null!=n.clientX&&null!=n.clientY&&(c=n.clientX,u=n.clientY),a&&(null!=c&&null!=u?(s=c-a.left,l=u-a.top):(s=a.width/2,l=a.height/2)),this.type=e,this.pointerType=t,this.target=n.currentTarget,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.x=s,this.y=l}}let eX=Symbol("linkClicked"),e0="react-aria-pressable-style",e1="data-react-aria-pressable";function e2(e){let{onPress:t,onPressChange:n,onPressStart:r,onPressEnd:i,onPressUp:o,onClick:a,isDisabled:s,isPressed:l,preventFocusOnPress:c,shouldCancelOnPointerExit:u,allowTextSelectionOnPress:d,ref:p,...h}=eY(e),[f,m]=(0,e$.useState)(!1),g=(0,e$.useRef)({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:v,removeAllGlobalListeners:x}=eB(),y=N((e,t)=>{let i=g.current;if(s||i.didFirePressStart)return!1;let o=!0;if(i.isTriggeringEvent=!0,r){let n=new eQ("pressstart",t,e);r(n),o=n.shouldStopPropagation}return n&&n(!0),i.isTriggeringEvent=!1,i.didFirePressStart=!0,m(!0),o}),b=N(function(e,r){let o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=g.current;if(!a.didFirePressStart)return!1;a.didFirePressStart=!1,a.isTriggeringEvent=!0;let l=!0;if(i){let t=new eQ("pressend",r,e);i(t),l=t.shouldStopPropagation}if(n&&n(!1),m(!1),t&&o&&!s){let n=new eQ("press",r,e);t(n),l&&(l=n.shouldStopPropagation)}return a.isTriggeringEvent=!1,l}),j=N((e,t)=>{let n=g.current;if(s)return!1;if(o){n.isTriggeringEvent=!0;let r=new eQ("pressup",t,e);return o(r),n.isTriggeringEvent=!1,r.shouldStopPropagation}return!0}),C=N(e=>{let t=g.current;if(t.isPressed&&t.target){for(let n of(t.didFirePressStart&&null!=t.pointerType&&b(e3(t.target,e),t.pointerType,!1),t.isPressed=!1,t.isOverTarget=!1,t.activePointerId=null,t.pointerType=null,x(),d||eM(t.target),t.disposables))n();t.disposables=[]}}),k=N(e=>{u&&C(e)}),S=N(e=>{null==a||a(e)}),E=N((e,t)=>{if(a){let n=new MouseEvent("click",e);el(n,t),a(es(n))}}),D=(0,e$.useMemo)(()=>{let e=g.current,t={onKeyDown(t){if(e4(t.nativeEvent,t.currentTarget)&&eH(t.currentTarget,eG(t.nativeEvent))){var r;e7(eG(t.nativeEvent),t.key)&&t.preventDefault();let i=!0;if(!e.isPressed&&!t.repeat){e.target=t.currentTarget,e.isPressed=!0,e.pointerType="keyboard",i=y(t,"keyboard");let r=t.currentTarget,o=t=>{e4(t,r)&&!t.repeat&&eH(r,eG(t))&&e.target&&j(e3(e.target,t),"keyboard")};v(U(t.currentTarget),"keyup",w(o,n),!0)}i&&t.stopPropagation(),t.metaKey&&em()&&(null==(r=e.metaKeyEvents)||r.set(t.key,t.nativeEvent))}else"Meta"===t.key&&(e.metaKeyEvents=new Map)},onClick(t){if((!t||eH(t.currentTarget,eG(t.nativeEvent)))&&t&&0===t.button&&!e.isTriggeringEvent&&!eW.isOpening){let n=!0;if(s&&t.preventDefault(),!e.ignoreEmulatedMouseEvents&&!e.isPressed&&("virtual"===e.pointerType||eq(t.nativeEvent))){let e=y(t,"virtual"),r=j(t,"virtual"),i=b(t,"virtual");S(t),n=e&&r&&i}else if(e.isPressed&&"keyboard"!==e.pointerType){let r=e.pointerType||t.nativeEvent.pointerType||"virtual",i=j(e3(t.currentTarget,t),r),o=b(e3(t.currentTarget,t),r,!0);n=i&&o,e.isOverTarget=!1,S(t),C(t)}e.ignoreEmulatedMouseEvents=!1,n&&t.stopPropagation()}}},n=t=>{var n,r,i;if(e.isPressed&&e.target&&e4(t,e.target)){e7(eG(t),t.key)&&t.preventDefault();let n=eG(t),i=eH(e.target,eG(t));b(e3(e.target,t),"keyboard",i),i&&E(t,e.target),x(),"Enter"!==t.key&&e5(e.target)&&eH(e.target,n)&&!t[eX]&&(t[eX]=!0,eW(e.target,t,!1)),e.isPressed=!1,null==(r=e.metaKeyEvents)||r.delete(t.key)}else if("Meta"===t.key&&(null==(n=e.metaKeyEvents)?void 0:n.size)){let t=e.metaKeyEvents;for(let n of(e.metaKeyEvents=void 0,t.values()))null==(i=e.target)||i.dispatchEvent(new KeyboardEvent("keyup",n))}};if("undefined"!=typeof PointerEvent){t.onPointerDown=t=>{if(0!==t.button||!eH(t.currentTarget,eG(t.nativeEvent)))return;if(eZ(t.nativeEvent)){e.pointerType="virtual";return}e.pointerType=t.pointerType;let i=!0;if(!e.isPressed){e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=t.pointerId,e.target=t.currentTarget,d||eT(e.target),i=y(t,e.pointerType);let o=eG(t.nativeEvent);"releasePointerCapture"in o&&o.releasePointerCapture(t.pointerId),v(U(t.currentTarget),"pointerup",n,!1),v(U(t.currentTarget),"pointercancel",r,!1)}i&&t.stopPropagation()},t.onMouseDown=t=>{if(eH(t.currentTarget,eG(t.nativeEvent))&&0===t.button){if(c){let n=ed(t.target);n&&e.disposables.push(n)}t.stopPropagation()}},t.onPointerUp=t=>{eH(t.currentTarget,eG(t.nativeEvent))&&"virtual"!==e.pointerType&&(0!==t.button||e.isPressed||j(t,e.pointerType||t.pointerType))},t.onPointerEnter=t=>{t.pointerId===e.activePointerId&&e.target&&!e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!0,y(e3(e.target,t),e.pointerType))},t.onPointerLeave=t=>{t.pointerId===e.activePointerId&&e.target&&e.isOverTarget&&null!=e.pointerType&&(e.isOverTarget=!1,b(e3(e.target,t),e.pointerType,!1),k(t))};let n=t=>{if(t.pointerId===e.activePointerId&&e.isPressed&&0===t.button&&e.target){if(eH(e.target,eG(t))&&null!=e.pointerType){let n=!1,r=setTimeout(()=>{e.isPressed&&e.target instanceof HTMLElement&&(n?C(t):(et(e.target),e.target.click()))},80);v(t.currentTarget,"click",()=>n=!0,!0),e.disposables.push(()=>clearTimeout(r))}else C(t);e.isOverTarget=!1}},r=e=>{C(e)};t.onDragStart=e=>{eH(e.currentTarget,eG(e.nativeEvent))&&C(e)}}return t},[v,s,c,x,d,C,k,b,y,j,S,E]);return(0,e$.useEffect)(()=>{if(!p)return;let e=U(p.current);if(!e||!e.head||e.getElementById(e0))return;let t=e.createElement("style");t.id=e0,t.textContent="\n@layer {\n  [".concat(e1,"] {\n    touch-action: pan-x pan-y pinch-zoom;\n  }\n}\n    ").trim(),e.head.prepend(t)},[p]),(0,e$.useEffect)(()=>{let e=g.current;return()=>{var t;for(let n of(d||eM(null!=(t=e.target)?t:void 0),e.disposables))n();e.disposables=[]}},[d]),{isPressed:l||f,pressProps:R(h,D,{[e1]:!0})}}function e5(e){return"A"===e.tagName&&e.hasAttribute("href")}function e4(e,t){let{key:n,code:r}=e,i=t,o=i.getAttribute("role");return("Enter"===n||" "===n||"Spacebar"===n||"Space"===r)&&!(i instanceof G(i).HTMLInputElement&&!e8(i,n)||i instanceof G(i).HTMLTextAreaElement||i.isContentEditable)&&!(("link"===o||!o&&e5(i))&&"Enter"!==n)}function e3(e,t){let n=t.clientX,r=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:n,clientY:r}}function e9(e){return!(e instanceof HTMLInputElement)&&(e instanceof HTMLButtonElement?"submit"!==e.type&&"reset"!==e.type:!e5(e))}function e7(e,t){return e instanceof HTMLInputElement?!e8(e,t):e9(e)}let e6=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function e8(e,t){return"checkbox"===e.type||"radio"===e.type?" "===t:e6.has(e.type)}var te=d;let tt=null,tn=new Set,tr=new Map,ti=!1,to=!1,ta={Tab:!0,Escape:!0};function ts(e,t){for(let n of tn)n(e,t)}function tl(e){return!(e.metaKey||!em()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}function tc(e){ti=!0,tl(e)&&(tt="keyboard",ts("keyboard",e))}function tu(e){tt="pointer",("mousedown"===e.type||"pointerdown"===e.type)&&(ti=!0,ts("pointer",e))}function td(e){eq(e)&&(ti=!0,tt="virtual")}function tp(e){e.target!==window&&e.target!==document&&!eu&&e.isTrusted&&(ti||to||(tt="virtual",ts("virtual",e)),ti=!1,to=!1)}function th(){eu||(ti=!1,to=!0)}function tf(e){if("undefined"==typeof window||"undefined"==typeof document||tr.get(G(e)))return;let t=G(e),n=U(e),r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){ti=!0,r.apply(this,arguments)},n.addEventListener("keydown",tc,!0),n.addEventListener("keyup",tc,!0),n.addEventListener("click",td,!0),t.addEventListener("focus",tp,!0),t.addEventListener("blur",th,!1),"undefined"!=typeof PointerEvent&&(n.addEventListener("pointerdown",tu,!0),n.addEventListener("pointermove",tu,!0),n.addEventListener("pointerup",tu,!0)),t.addEventListener("beforeunload",()=>{tm(e)},{once:!0}),tr.set(t,{focus:r})}let tm=(e,t)=>{let n=G(e),r=U(e);t&&r.removeEventListener("DOMContentLoaded",t),tr.has(n)&&(n.HTMLElement.prototype.focus=tr.get(n).focus,r.removeEventListener("keydown",tc,!0),r.removeEventListener("keyup",tc,!0),r.removeEventListener("click",td,!0),n.removeEventListener("focus",tp,!0),n.removeEventListener("blur",th,!1),"undefined"!=typeof PointerEvent&&(r.removeEventListener("pointerdown",tu,!0),r.removeEventListener("pointermove",tu,!0),r.removeEventListener("pointerup",tu,!0)),tr.delete(n))};function tg(e){let t,n=U(e);return"loading"!==n.readyState?tf(e):(t=()=>{tf(e)},n.addEventListener("DOMContentLoaded",t)),()=>tm(e,t)}function tv(){return"pointer"!==tt}function tx(){return tt}"undefined"!=typeof document&&tg();let ty=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function tb(e,t,n){let r=U(null==n?void 0:n.target),i="undefined"!=typeof window?G(null==n?void 0:n.target).HTMLInputElement:HTMLInputElement,o="undefined"!=typeof window?G(null==n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,a="undefined"!=typeof window?G(null==n?void 0:n.target).HTMLElement:HTMLElement,s="undefined"!=typeof window?G(null==n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||r.activeElement instanceof i&&!ty.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof a&&r.activeElement.isContentEditable)&&"keyboard"===t&&n instanceof s&&!ta[n.key])}function tw(e,t,n){tf(),(0,te.useEffect)(()=>{let t=(t,r)=>{tb(!!(null==n?void 0:n.isTextInput),t,r)&&e(tv())};return tn.add(t),()=>{tn.delete(t)}},t)}function tj(e){let t=U(e),n=eU(t);if("virtual"===tx()){let r=n;eE(()=>{eU(t)===r&&e.isConnected&&et(e)})}else et(e)}var tC=d;function tk(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:i}=e,o=(0,tC.useCallback)(e=>{if(e.target===e.currentTarget)return r&&r(e),i&&i(!1),!0},[r,i]),a=ec(o),s=(0,tC.useCallback)(e=>{let t=U(e.target),r=t?eU(t):eU();e.target===e.currentTarget&&r===eG(e.nativeEvent)&&(n&&n(e),i&&i(!0),a(e))},[i,n,a]);return{focusProps:{onFocus:!t&&(n||i||r)?s:void 0,onBlur:!t&&(r||i)?o:void 0}}}function tS(e){if(!e)return;let t=!0;return n=>{e({...n,preventDefault(){n.preventDefault()},isDefaultPrevented:()=>n.isDefaultPrevented(),stopPropagation(){t=!0},continuePropagation(){t=!1},isPropagationStopped:()=>t}),t&&n.stopPropagation()}}function tN(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:tS(e.onKeyDown),onKeyUp:tS(e.onKeyUp)}}}var tE=d;function tD(e){let t=(0,tE.useRef)(null),n=(0,tE.useRef)(void 0),r=(0,tE.useCallback)(t=>{if("function"==typeof e){let n=e,r=n(t);return()=>{"function"==typeof r?r():n(null)}}if(e)return e.current=t,()=>{e.current=null}},[e]);return(0,tE.useMemo)(()=>({get current(){return t.current},set current(value){t.current=value,n.current&&(n.current(),n.current=void 0),null!=value&&(n.current=r(value))}}),[r])}var tI=d;let tA=tI.default.createContext(null);function tT(e){let t=(0,tI.useContext)(tA)||{};eO(t,e);let{ref:n,...r}=t;return r}function tM(e,t){let{focusProps:n}=tk(e),{keyboardProps:r}=tN(e),i=R(n,r),o=tT(t),a=e.isDisabled?{}:o,s=(0,tI.useRef)(e.autoFocus);(0,tI.useEffect)(()=>{s.current&&t.current&&tj(t.current),s.current=!1},[t]);let l=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(l=void 0),{focusableProps:R({...i,tabIndex:l},a)}}function tL(e,t){let n,{elementType:r="button",isDisabled:i,onPress:o,onPressStart:a,onPressEnd:s,onPressUp:l,onPressChange:c,preventFocusOnPress:u,allowFocusWhenDisabled:d,onClick:p,href:h,target:f,rel:m,type:g="button"}=e;n="button"===r?{type:g,disabled:i,form:e.form,formAction:e.formAction,formEncType:e.formEncType,formMethod:e.formMethod,formNoValidate:e.formNoValidate,formTarget:e.formTarget,name:e.name,value:e.value}:{role:"button",href:"a"!==r||i?void 0:h,target:"a"===r?f:void 0,type:"input"===r?g:void 0,disabled:"input"===r?i:void 0,"aria-disabled":i&&"input"!==r?i:void 0,rel:"a"===r?m:void 0};let{pressProps:v,isPressed:x}=e2({onPressStart:a,onPressEnd:s,onPressChange:c,onPress:o,onPressUp:l,onClick:p,isDisabled:i,preventFocusOnPress:u,ref:t}),{focusableProps:y}=tM(e,t);d&&(y.tabIndex=i?-1:y.tabIndex);let b=R(y,v,H(e,{labelable:!0}));return{isPressed:x,buttonProps:R(n,b,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],"aria-current":e["aria-current"]})}}tI.default.forwardRef(function(e,t){let{children:n,...r}=e,i=tD(t),o={...r,ref:i};return tI.default.createElement(tA.Provider,{value:o},n)});var tP=d;let tR=!1,t_=0;function tO(){tR=!0,setTimeout(()=>{tR=!1},50)}function tF(e){"touch"===e.pointerType&&tO()}function tB(){if("undefined"!=typeof document)return 0===t_&&"undefined"!=typeof PointerEvent&&document.addEventListener("pointerup",tF),t_++,()=>{--t_>0||"undefined"!=typeof PointerEvent&&document.removeEventListener("pointerup",tF)}}function tV(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:i}=e,[o,a]=(0,tP.useState)(!1),s=(0,tP.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,tP.useEffect)(tB,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=eB(),{hoverProps:u,triggerHoverEnd:d}=(0,tP.useMemo)(()=>{let e=(e,r)=>{if(s.pointerType=r,i||"touch"===r||s.isHovered||!e.currentTarget.contains(e.target))return;s.isHovered=!0;let c=e.currentTarget;s.target=c,l(U(e.target),"pointerover",e=>{s.isHovered&&s.target&&!eH(s.target,e.target)&&o(e,e.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:c,pointerType:r}),n&&n(!0),a(!0)},o=(e,t)=>{let i=s.target;s.pointerType="",s.target=null,"touch"!==t&&s.isHovered&&i&&(s.isHovered=!1,c(),r&&r({type:"hoverend",target:i,pointerType:t}),n&&n(!1),a(!1))},u={};return"undefined"!=typeof PointerEvent&&(u.onPointerEnter=t=>{tR&&"mouse"===t.pointerType||e(t,t.pointerType)},u.onPointerLeave=e=>{!i&&e.currentTarget.contains(e.target)&&o(e,e.pointerType)}),{hoverProps:u,triggerHoverEnd:o}},[t,n,r,i,s,l,c]);return(0,tP.useEffect)(()=>{i&&d({currentTarget:s.target},s.pointerType)},[i]),{hoverProps:u,isHovered:o}}var tz=d,tH=d;function tU(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=e,o=(0,tH.useRef)({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:s}=eB(),l=(0,tH.useCallback)(e=>{e.currentTarget.contains(e.target)&&o.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(o.current.isFocusWithin=!1,s(),n&&n(e),i&&i(!1))},[n,i,o,s]),c=ec(l),u=(0,tH.useCallback)(e=>{if(!e.currentTarget.contains(e.target))return;let t=U(e.target),n=eU(t);if(!o.current.isFocusWithin&&n===eG(e.nativeEvent)){r&&r(e),i&&i(!0),o.current.isFocusWithin=!0,c(e);let n=e.currentTarget;a(t,"focus",e=>{if(o.current.isFocusWithin&&!eH(n,e.target)){let r=new t.defaultView.FocusEvent("blur",{relatedTarget:e.target});el(r,n),l(es(r))}},{capture:!0})}},[r,i,c,a,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:l}}}var tG=p;function tW(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var tq={};function tZ(e){if("virtual"===tx()){let t=document.activeElement;eE(()=>{document.activeElement===t&&document.contains(e)&&et(e)})}else et(e)}function tK(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;let{display:t,visibility:n}=e.style,r="none"!==t&&"hidden"!==n&&"collapse"!==n;if(r){let{getComputedStyle:t}=e.ownerDocument.defaultView,{display:n,visibility:i}=t(e);r="none"!==n&&"hidden"!==i&&"collapse"!==i}return r}function t$(e,t){return!e.hasAttribute("hidden")&&("DETAILS"!==e.nodeName||!t||"SUMMARY"===t.nodeName||e.hasAttribute("open"))}function tY(e,t){return"#comment"!==e.nodeName&&tK(e)&&t$(e,t)&&(!e.parentElement||tY(e.parentElement,e))}tW(tq,"FocusScope",()=>t0),tW(tq,"useFocusManager",()=>t1),tW(tq,"getFocusableTreeWalker",()=>na),tW(tq,"createFocusManager",()=>ns),tW({},"focusSafely",()=>tZ);let tJ=tz.default.createContext(null),tQ=null,tX=new Map;function t0(e){let{children:t,contain:n,restoreFocus:r,autoFocus:i}=e,o=(0,tz.useRef)(),a=(0,tz.useRef)(),s=(0,tz.useRef)([]),l=(0,tz.useContext)(tJ),c=null==l?void 0:l.scopeRef;C(()=>{let e=o.current.nextSibling,t=[];for(;e&&e!==a.current;)t.push(e),e=e.nextSibling;s.current=t},[t,c]),C(()=>(tX.set(s,c),()=>{(s===tQ||nt(s,tQ))&&(!c||tX.has(c))&&(tQ=c),tX.delete(s)}),[s,c]),t7(s,n),no(s,r,n),ni(s,i);let u=t2(s);return tz.default.createElement(tJ.Provider,{value:{scopeRef:s,focusManager:u}},tz.default.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:o}),t,tz.default.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function t1(){var e;return null==(e=(0,tz.useContext)(tJ))?void 0:e.focusManager}function t2(e){return{focusNext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.current,{from:r,tabbable:i,wrap:o}=t,a=r||document.activeElement,s=n[0].previousElementSibling,l=na(t9(n),{tabbable:i},n);l.currentNode=t8(a,n)?a:s;let c=l.nextNode();return!c&&o&&(l.currentNode=s,c=l.nextNode()),c&&nn(c,!0),c},focusPrevious(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.current,{from:r,tabbable:i,wrap:o}=t,a=r||document.activeElement,s=n[n.length-1].nextElementSibling,l=na(t9(n),{tabbable:i},n);l.currentNode=t8(a,n)?a:s;let c=l.previousNode();return!c&&o&&(l.currentNode=s,c=l.previousNode()),c&&nn(c,!0),c},focusFirst(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.current,{tabbable:r}=t,i=na(t9(n),{tabbable:r},n);i.currentNode=n[0].previousElementSibling;let o=i.nextNode();return o&&nn(o,!0),o},focusLast(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.current,{tabbable:r}=t,i=na(t9(n),{tabbable:r},n);i.currentNode=n[n.length-1].nextElementSibling;let o=i.previousNode();return o&&nn(o,!0),o}}}let t5=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],t4=t5.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";t5.push('[tabindex]:not([tabindex="-1"]):not([disabled])');let t3=t5.join(':not([hidden]):not([tabindex="-1"]),');function t9(e){return e[0].parentElement}function t7(e,t){let n=(0,tz.useRef)(),r=(0,tz.useRef)(null);C(()=>{let i=e.current;if(!t)return;let o=t=>{if("Tab"!==t.key||t.altKey||t.ctrlKey||t.metaKey||e!==tQ)return;let n=document.activeElement,r=e.current;if(!t8(n,r))return;let i=na(t9(r),{tabbable:!0},r);i.currentNode=n;let o=t.shiftKey?i.previousNode():i.nextNode();o||(i.currentNode=t.shiftKey?r[r.length-1].nextElementSibling:r[0].previousElementSibling,o=t.shiftKey?i.previousNode():i.nextNode()),t.preventDefault(),o&&nn(o,!0)},a=t=>{!tQ||nt(tQ,e)?(tQ=e,n.current=t.target):e!==tQ||ne(t.target,e)?e===tQ&&(n.current=t.target):n.current?n.current.focus():tQ&&nr(tQ.current)},s=t=>{r.current=requestAnimationFrame(()=>{e!==tQ||ne(document.activeElement,e)||(tQ=e,n.current=t.target,n.current.focus())})};return document.addEventListener("keydown",o,!1),document.addEventListener("focusin",a,!1),i.forEach(e=>e.addEventListener("focusin",a,!1)),i.forEach(e=>e.addEventListener("focusout",s,!1)),()=>{document.removeEventListener("keydown",o,!1),document.removeEventListener("focusin",a,!1),i.forEach(e=>e.removeEventListener("focusin",a,!1)),i.forEach(e=>e.removeEventListener("focusout",s,!1))}},[e,t]),(0,tz.useEffect)(()=>()=>cancelAnimationFrame(r.current),[r])}function t6(e){for(let t of tX.keys())if(t8(e,t.current))return!0;return!1}function t8(e,t){return t.some(t=>t.contains(e))}function ne(e,t){for(let n of tX.keys())if((n===t||nt(t,n))&&t8(e,n.current))return!0;return!1}function nt(e,t){let n=tX.get(t);return!!n&&(n===e||nt(e,n))}function nn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||t){if(null!=e)try{e.focus()}catch(e){}}else try{tZ(e)}catch(e){}}function nr(e){let t=e[0].previousElementSibling,n=na(t9(e),{tabbable:!0},e);n.currentNode=t,nn(n.nextNode())}function ni(e,t){let n=tz.default.useRef(t);(0,tz.useEffect)(()=>{n.current&&(tQ=e,t8(document.activeElement,tQ.current)||nr(e.current)),n.current=!1},[])}function no(e,t,n){let r=(0,tz.useRef)("undefined"!=typeof document?document.activeElement:null);C(()=>{let i=r.current;if(!t)return;let o=t=>{if("Tab"!==t.key||t.altKey||t.ctrlKey||t.metaKey)return;let n=document.activeElement;if(!t8(n,e.current))return;let r=na(document.body,{tabbable:!0});r.currentNode=n;let o=t.shiftKey?r.previousNode():r.nextNode();if(document.body.contains(i)&&i!==document.body||(i=null),(!o||!t8(o,e.current))&&i){r.currentNode=i;do o=t.shiftKey?r.previousNode():r.nextNode();while(t8(o,e.current))t.preventDefault(),t.stopPropagation(),o?nn(o,!0):t6(i)?nn(i,!0):n.blur()}};return n||document.addEventListener("keydown",o,!0),()=>{n||document.removeEventListener("keydown",o,!0),t&&i&&t8(document.activeElement,e.current)&&requestAnimationFrame(()=>{document.body.contains(i)&&nn(i)})}},[e,t,n])}function na(e,t,n){let r=(null==t?void 0:t.tabbable)?t3:t4,i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(e){var i;return(null==t||null==(i=t.from)?void 0:i.contains(e))?NodeFilter.FILTER_REJECT:e.matches(r)&&tY(e)&&(!n||t8(e,n))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return(null==t?void 0:t.from)&&(i.currentNode=t.from),i}function ns(e){return{focusNext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.current,{from:r,tabbable:i,wrap:o}=t,a=r||document.activeElement,s=na(n,{tabbable:i});n.contains(a)&&(s.currentNode=a);let l=s.nextNode();return!l&&o&&(s.currentNode=n,l=s.nextNode()),l&&nn(l,!0),l},focusPrevious(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.current,{from:r,tabbable:i,wrap:o}=t,a=r||document.activeElement,s=na(n,{tabbable:i});if(n.contains(a))s.currentNode=a;else{let e=nl(s);return e&&nn(e,!0),e}let l=s.previousNode();return!l&&o&&(s.currentNode=n,l=nl(s)),l&&nn(l,!0),l},focusFirst(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.current,{tabbable:r}=t,i=na(n,{tabbable:r}).nextNode();return i&&nn(i,!0),i},focusLast(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.current,{tabbable:r}=t,i=nl(na(n,{tabbable:r}));return i&&nn(i,!0),i}}}function nl(e){let t,n;do(n=e.lastChild())&&(t=n);while(n)return t}function nc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{autoFocus:t=!1,isTextInput:n,within:r}=e,i=(0,tz.useRef)({isFocused:!1,isFocusVisible:t||tv()}).current,[o,a]=(0,tz.useState)(!1),[s,l]=(0,tz.useState)(()=>i.isFocused&&i.isFocusVisible),c=()=>l(i.isFocused&&i.isFocusVisible),u=e=>{i.isFocused=e,a(e),c()};tw(e=>{i.isFocusVisible=e,c()},[],{isTextInput:n});let{focusProps:d}=tk({isDisabled:r,onFocusChange:u}),{focusWithinProps:p}=tU({isDisabled:!r,onFocusWithinChange:u});return{isFocused:o,isFocusVisible:i.isFocused&&s,focusProps:r?p:d}}function nu(e){let{children:t,focusClass:n,focusRingClass:r}=e,{isFocused:i,isFocusVisible:o,focusProps:a}=nc(e),s=tz.default.Children.only(t);return tz.default.cloneElement(s,R(s.props,{...a,className:(0,tG.default)({[n||""]:i,[r||""]:o})}))}tW({},"FocusRing",()=>nu),tW({},"useFocusRing",()=>nc);var nd={};tW(nd,"FocusableProvider",()=>nm),tW(nd,"useFocusable",()=>ng);let np=tz.default.createContext(null);function nh(e){let t=(0,tz.useContext)(np)||{};eO(t,e);let{ref:n,...r}=t;return r}function nf(e,t){let{children:n,...r}=e,i={...r,ref:t};return tz.default.createElement(np.Provider,{value:i},n)}let nm=tz.default.forwardRef(nf);function ng(e,t){let{focusProps:n}=tk(e),{keyboardProps:r}=tN(e),i=R(n,r),o=nh(t),a=e.isDisabled?{}:o,s=(0,tz.useRef)(e.autoFocus);return(0,tz.useEffect)(()=>{s.current&&t.current&&t.current.focus(),s.current=!1},[]),{focusableProps:R({...i,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},a)}}function nv(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}var nx=r,ny=p;let nb=e=>"number"==typeof e?"".concat(e,"px"):e;var nw=e.i(338735);function nj(e){let{color:t,className:n,size:r=20,wrapperClassName:i,style:o,...a}=e,{numericValue:s,pixelValue:l}=nE(r);return(0,nx.jsx)("div",{className:(0,ny.clsx)(i),"data-geist-spinner":"","data-version":"v1",style:{height:l,width:l,...o},...a,children:(0,nx.jsx)("div",{className:(0,ny.clsx)("relative left-1/2 top-1/2",n),style:{height:l,width:l,color:t||"var(--ds-gray-700)"},children:(0,nx.jsx)(nC,{size:s})})})}function nC(e){let{size:t=20}=e,{delays:n,angleIncrement:r,lineDimensions:i,duration:o}=nD(t);return(0,nx.jsx)(nx.Fragment,{children:n.map((e,t)=>(0,nx.jsx)("div",{className:(0,ny.clsx)("absolute left-[-10%] top-[-3.9%] bg-current",nw.default.line,i),style:{"--animation-delay":"".concat(e,"ms"),"--animation-duration":"".concat(o,"ms"),transform:"rotate(".concat(0===t?0:t*r,"deg) translate(146%)")}},"spinner-line-".concat(e)))})}let nk={angleIncrement:45,lineDimensions:"h-[1.5px] w-[3px]",delays:[-875,-750,-625,-500,-375,-250,-125,0],duration:1e3},nS={angleIncrement:36,lineDimensions:"h-[1.5px] w-[4px]",delays:[-900,-800,-700,-600,-500,-400,-300,-200,-100,0],duration:1e3},nN={angleIncrement:30,lineDimensions:"h-[8%] w-[24%]",delays:[-1100,-1e3,-900,-800,-700,-600,-500,-400,-300,-200,-100,0],duration:1200};function nE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=nb(e),n="string"==typeof e?Number.parseInt(e,10):e;return Number.isNaN(n)&&(t=nb(n=20)),{numericValue:n,pixelValue:t}}function nD(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e<=12?nk:e<=16?nS:nN}e.s(["Spinner",()=>nj],774636);let nI=(e,t,n)=>e?["geist-themed","geist-".concat(e),t?"geist-".concat(e,"-fill"):null,n?"geist-".concat(e,"-").concat(n):null]:"",nA=(e,t,n,r)=>e?["geist-new-themed","geist-new-".concat(e),t?"geist-new-".concat(e,"-fill"):null,n?"geist-new-".concat(e,"-").concat(n):null,"tooltip"===r?"geist-new-tooltip":""]:"";var nT=e.i(934436),nM=d;let nL=(0,nM.createContext)(!1);nL.displayName="DisabledContext";let nP=e=>{let t=(0,nM.useContext)(nL);return null!=e?e:t},nR="production";var n_=e.i(296559);let nO="production"!==nR,nF=e=>"object"==typeof e&&null!==e&&"type"in e;function nB(e){return{sm:e.sm,md:e.md||e.sm,lg:e.lg||e.md||e.sm}}let nV={small:{padding:"6px",height:"32px"},medium:{padding:"10px",height:"40px"},large:{padding:"14px",height:"48px"}};function nz(e,t){return{["--".concat(e,"-x-padding")]:nV[t].padding,["--".concat(e,"-height")]:nV[t].height}}function nH(e){if("object"!=typeof e||null===e)return{};let t=nB(e);return Object.keys(t).reduce((e,n)=>{let r=t[n];return r?{...e,...nz(n,r)}:e},{})}let nU=(e,t,n)=>{let r=!1,[i,...o]=x.Children.toArray(e);if(i&&!(o.length>=1)&&(nF(i)&&("svg"===i.type||"string"!=typeof i.type&&"name"in i.type&&"Icon"===i.type.name)&&(r=!0),r&&(!t||!n["aria-label"])))throw Error("SVG/Icon-only Buttons must include both an `aria-label` and the `svgOnly` prop.")},nG=(0,x.forwardRef)((e,t)=>{let{Component:n="button",typeName:r="submit",className:i,href:o,as:a,target:s,rel:l,disabled:c,loading:u,width:d,type:p,size:h,prefix:f,normalStyle:m,hoverStyle:g,suffix:w,onClick:j,variant:C="invert",shape:k,align:S,children:N,onMouseDown:E,onMouseUp:D,svgOnly:I,shadow:A,passthroughOnClick:T,passthroughOnMouseEnter:M,touchEventWorkaround:L=!1,role:P,..._}=e,O=nP(),F=c||u||O,B=nA(p,!0),V=(0,x.useRef)(null),{focusProps:z,isFocusVisible:H}=nc(),{hoverProps:U,isHovered:G}=tV({isDisabled:F}),{buttonProps:W,isPressed:q}=tL({isDisabled:F,target:s,rel:l,elementType:n,onPress:j,onPressStart:E,onPressUp:D},V);nO&&nU(N,I,_),(0,x.useEffect)(()=>{if(!L)return;function e(e){e.preventDefault()}let t=V.current;return null==t||t.addEventListener("touchstart",e),()=>{null==t||t.removeEventListener("touchstart",e)}},[L]);let Z={...R({onClick:T,onMouseEnter:M},U,z,W)},K="a"===n||n===y.default;return(0,v.jsxs)(n,{...Z,..._,as:a,className:"unstyled"===C?(0,b.clsx)(n_.default.base,i):(0,b.clsx)(n_.default.base,n_.default.button,i,"secondary"!==p?B:null,{[n_.default.secondary||""]:"secondary"===p,[n_.default.tertiary||""]:"tertiary"===p,[n_.default.shape||""]:"circle"===k||"square"===k,[n_.default.circle||""]:"circle"===k,[n_.default.rounded||""]:"rounded"===k,[n_.default.loading||""]:u,[n_.default.shadow||""]:A,[n_.default.tiny||""]:"tiny"===h,[n_.default.small||""]:"small"===h,[n_.default.large||""]:"large"===h,[n_.default.responsive||""]:"object"==typeof h&&null!==h,[n_.default.customStyles||""]:!!m,[n_.default.customHoverStyles||""]:!!g},n_.default[C]),"data-active":c?void 0:nW(q),"data-focus":c?void 0:nW(H),"data-geist-button":"","data-hover":c?void 0:nW(G),"data-prefix":f||u?"true":"false","data-suffix":w?"true":"false","data-testid":_["data-testid"],"data-version":"v1",href:o,ref:nv([V,t]),role:K?"link":Z.role||P,style:{..._.style,minWidth:d,maxWidth:d,...m?{"--custom-bg-color":m.backgroundColor,"--custom-color":m.color,"--custom-border-color":m.borderColor}:{},...g?{"--custom-bg-hover-color":g.backgroundColor,"--custom-hover-color":g.color,"--custom-border-hover-color":g.borderColor}:{},"--geist-icon-size":"16px",...nH(h)},target:K?s:void 0,type:r,tabIndex:0,children:[f||u?(0,v.jsx)("span",{className:n_.default.prefix,children:u?(0,v.jsx)(nj,{color:"var(--accents-5)",size:(0,nT.getIxIconSize)(h)}):f}):null,(0,v.jsx)("span",{className:(0,b.clsx)(n_.default.content,{[n_.default.flex||""]:I,[n_.default.start||""]:"start"===S,[n_.default.grow||""]:"grow"===S,[n_.default.flexGrow||""]:"flex-grow"===S,[n_.default.center||""]:"center"===S}),children:N}),w?(0,v.jsx)("span",{className:n_.default.suffix,children:w}):null]})});nG.displayName="Button";let nW=e=>e?"":void 0;var nq=e.i(375462),nZ=e.i(245294),nK=r,n$=d,nY=p;let nJ=4,nQ=["sm","md","lg","xl"];function nX(e,t){let n={};if("object"!=typeof t)null!==t&&(n["--".concat(e)]=t);else{let r;nQ.forEach(i=>{let o=t[i];null!==o&&o!==r&&(n["--".concat(i,"-").concat(e)]=o,r=o)})}return n}function n0(e){return"number"==typeof e?"".concat(e*nJ,"px"):void 0}function n1(e){if("number"==typeof e){let t=n0(e);return{sm:t,md:t,lg:t,xl:t}}return{sm:n0(e.sm),md:n0(e.md),lg:n0(e.lg),xl:n0(e.xl)}}function n2(e){return{sm:e.sm,md:e.md||e.sm,lg:e.lg||e.md||e.sm,xl:e.xl||e.lg||e.md||e.sm}}function n5(e,t,n,r){return e===t&&e===n&&e===r?e:e===n&&t===r?"".concat(e," ").concat(t):t===r?"".concat(e," ").concat(t," ").concat(n):"".concat(e," ").concat(t," ").concat(n," ").concat(r)}function n4(e,t,n,r){let i=n2(e),o=n2(t),a=n2(n),s=n2(r);return{sm:n5(i.sm||"",o.sm||"",a.sm||"",s.sm||""),md:n5(i.md||"",o.md||"",a.md||"",s.md||""),lg:n5(i.lg||"",o.lg||"",a.lg||"",s.lg||""),xl:n5(i.xl||"",o.xl||"",a.xl||"",s.xl||"")}}function n3(e,t,n,r,i,o,a,s){var l,c,u,d,p,h,f,m;if(void 0===t&&void 0===n&&void 0===r&&void 0===i&&void 0===o&&void 0===a&&void 0===s)return{["--".concat(e)]:"0px"};let g=n1(null!=(c=null!=(l=null!=i?i:r)?l:t)?c:0),v=n1(null!=(d=null!=(u=null!=o?o:n)?u:t)?d:0),x=n4(g,v,n1(null!=(h=null!=(p=null!=a?a:r)?p:t)?h:0),n1(null!=(m=null!=(f=null!=s?s:n)?f:t)?m:0)),y=Object.keys(x).reduce((t,n)=>({...t,["--".concat(n,"-").concat(e)]:x[n]}),{});return y["--sm-".concat(e)]===y["--md-".concat(e)]&&y["--md-".concat(e)]===y["--lg-".concat(e)]&&y["--lg-".concat(e)]===y["--xl-".concat(e)]?{["--".concat(e)]:y["--sm-".concat(e)]}:y}var n9=e.i(346813);let n7=(0,n$.memo)(function(e){let{as:t="div",children:n,padding:r,paddingX:i,paddingY:o,paddingTop:a,paddingRight:s,paddingBottom:l,paddingLeft:c,gap:u,direction:d="column",align:p="stretch",justify:h="flex-start",flex:f="initial",debug:m,style:g,className:v,ref:x,...y}=e,b=t,w=[r,i,o,a,s,l,c].some(e=>void 0!==e);return(0,nK.jsx)(b,{className:(0,nY.clsx)(n9.default.stack,"stack",v,{[n9.default.debug]:m,[n9.default.padding]:w}),"data-testid":y["data-testid"],"data-version":"v1",ref:x,style:{...g,"--stack-flex":f,...nX("stack-direction",d),...nX("stack-align",p),...nX("stack-justify",h),...n3("stack-padding",r,i,o,a,s,l,c),...n3("stack-gap",u)},...y,children:n})});var n6=r,n8=d,re=p,rt=e.i(735234),rn=e.i(799058),rr=e.i(660348),ri=e.i(230125),ro=e.i(906885);let ra=e=>{let{children:t,className:n,type:r,fill:i,label:o,size:a,center:s,variant:l,action:c,style:u,disabled:d,icon:p,...h}=e,f=nI(r,i,l);Array.isArray(f)&&f.shift();let m=(0,n8.useMemo)(()=>o?4:void 0!==a?rl[a]:12,[o,a]),g=(0,n8.useCallback)(()=>!1===o?null:o?(0,n6.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:600},children:[o,":"," "]}):(0,n6.jsx)("span",{style:{display:"flex",height:16},children:(0,n6.jsx)(rs,{icon:p,type:r})}),[o,p,r]);return(0,n6.jsxs)("div",{className:(0,re.clsx)(ro.default.note,n,f,{[String(ro.default.action)]:c,[String(ro.default.small)]:"small"===a,[String(ro.default.large)]:"large"===a,[String(ro.default.center)]:s,[String(ro.default.disabled)]:d},"v3-colors"),...h,"data-geist-note":"","data-version":"v1",style:u,children:[(0,n6.jsxs)("div",{className:(0,re.clsx)(ro.default.content,o?ro.default.hasLabel:""),style:{gap:m},children:[(0,n6.jsx)(g,{}),(0,n6.jsx)("span",{children:t})]}),c?(0,n6.jsx)("div",{children:c}):null]})};function rs(e){let{icon:t,type:n}=e;return t||("success"===n?(0,n6.jsx)(rt.CheckCircle,{color:"blue-900",size:16}):"error"===n?(0,n6.jsx)(rr.Stop,{color:"red-900",size:16}):"warning"===n?(0,n6.jsx)(ri.Warning,{color:"amber-900",size:16}):(0,n6.jsx)(rn.Information,{color:"currentColor"}))}let rl={xSmall:8,small:8,mediumSmall:8,large:12};var rc=r,ru=p,rd=d,rp=e.i(307942);function rh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=e/t;return"".concat(n,"rem")}function rf(e){if("object"==typeof e&&null!==e){if(!("sm"in e))throw Error("Failed to restrict responsive prop, an object was passed without an sm key");let t={xs:e.xs||e.sm||null,sm:e.sm||null,smd:e.smd||e.md||e.sm||null,md:e.md||e.smd||e.sm||null,lg:e.lg||e.md||e.sm||null};if(Object.values(t).some(e=>null==e))throw Error("Failed to restrict responsive prop, an invalid value was passed to sm, md or lg");return t}return{xs:e,sm:e,smd:e,md:e,lg:e}}let rm={48:"3.5rem",40:"3.5rem",32:"2.5rem",24:"2rem",20:"1.5rem",18:"1.5rem",16:"1.5rem",14:"1.25rem",13:"1.125rem",12:"1rem",10:"0.75rem"},rg={48:"-0.066875rem",40:"-0.058125rem",32:"-0.049375rem",24:"-0.029375rem",20:"-0.020625rem",18:"initial",16:"initial",14:"initial",13:"initial",12:"initial",10:"initial"},rv={48:"700",40:"600",32:"600",24:"600",20:"600",16:"400",14:"400",13:"400",18:"400",12:"400",10:"400"},rx={"heading-72":{size:72,lineHeight:72,weight:600,letterSpacing:-4.32},"heading-64":{size:64,lineHeight:64,weight:600,letterSpacing:-3.84},"heading-56":{size:56,lineHeight:56,weight:600,letterSpacing:-3.36},"heading-48":{size:48,lineHeight:56,weight:600,letterSpacing:-2.88},"heading-40":{size:40,lineHeight:48,weight:600,letterSpacing:-2.4},"heading-32":{size:32,lineHeight:40,weight:600,letterSpacing:-1.28},"heading-24":{size:24,lineHeight:32,weight:600,letterSpacing:-.96},"heading-20":{size:20,lineHeight:26,weight:600,letterSpacing:-.4},"heading-16":{size:16,lineHeight:24,weight:600,letterSpacing:-.32},"heading-14":{size:14,lineHeight:20,weight:600,letterSpacing:-.28},"button-16":{size:16,lineHeight:20,weight:500},"button-14":{size:14,lineHeight:20,weight:500},"button-12":{size:12,lineHeight:16,weight:500},"label-20":{size:20,lineHeight:32,weight:400},"label-18":{size:18,lineHeight:20,weight:400},"label-16":{size:16,lineHeight:20,weight:400},"label-14":{size:14,lineHeight:20,weight:400},"label-13":{size:13,lineHeight:16,weight:400},"label-12":{size:12,lineHeight:16,weight:400},"copy-24":{size:24,lineHeight:36,weight:400},"copy-20":{size:20,lineHeight:36,weight:400},"copy-18":{size:18,lineHeight:28,weight:400},"copy-16":{size:16,lineHeight:24,weight:400},"copy-14":{size:14,lineHeight:20,weight:400},"copy-13":{size:13,lineHeight:18,weight:400}};function ry(e){let{size:t,variant:n,lineHeight:r,weight:i}=e;if(n){if("string"==typeof n){let e=rx[n];return{"--text-size":rh(e.size),"--text-line-height":rh(e.lineHeight),"--text-letter-spacing":"".concat(e.letterSpacing||0,"px"),"--text-weight":null!=i?i:e.weight}}let e=rf(n);return Object.keys(e).reduce((t,n)=>{let r=rx[e[n]];return{...t,["--".concat(n,"-text-size")]:rh(r.size),["--".concat(n,"-text-line-height")]:rh(r.lineHeight),["--".concat(n,"-text-weight")]:null!=i?i:r.weight,["--".concat(n,"-text-letter-spacing")]:"".concat(r.letterSpacing||0,"px")}},{})}if("number"==typeof t)return{"--text-size":rh(t),"--text-line-height":r?rh(r):rm[t],"--text-letter-spacing":rg[t],"--text-weight":i||rv[t]};let o=rf(t);return Object.keys(o).reduce((e,t)=>{let n=o[t];return{...e,["--".concat(t,"-text-size")]:rh(n),["--".concat(t,"-text-line-height")]:r?rh(r):rm[n],["--".concat(t,"-text-weight")]:i||rv[n],["--".concat(t,"-text-letter-spacing")]:rg[n]}},{})}let rb=function(e){let{children:t,as:n="p",size:r=14,lineHeight:i,weight:o,color:a="gray-1000",transform:s,align:l,truncate:c,wrap:u=!0,className:d,style:p,monospace:h=!1,variant:f,ref:m,...g}=e,v=n,x="inherit"===a?"inherit":"var(--ds-".concat(a,")");return(0,rc.jsx)(v,{className:(0,ru.clsx)(rp.default.wrapper,d,{[rp.default.truncate]:!0===c,[rp.default.clamp]:"number"==typeof c,[rp.default.nowrap]:!u,[rp.default.monospace]:h}),"data-version":"v1",ref:m,style:{..."number"==typeof c&&{"--text-clamp":c},"--text-color":x,...ry({size:r,lineHeight:i,weight:o,variant:f}),..."string"==typeof s&&{"--text-transform":s},..."string"==typeof l&&{"--text-align":l},...p},...g,children:t})},rw=(0,rd.memo)(rb);var rj=r,rC=d,rk=y,rS=e.i(242084);function rN(e){let t="string"==typeof e?e:e.pathname;return!(!t||/^https?:\/\/$/.exec(t)||t.includes("*"))&&t.startsWith("/")}var rE=E,rD=e.i(979865),rI=e.i(879957),rA=d;function rT(e){let{prefetch:t,prefetchStrategy:n,isDifferentZone:r,href:i}=e,o=(0,rD.useRouter)(),a=i&&rN(i),s="visible"===n&&!r&&a&&"true"!==rE.default.env.NEXT_PUBLIC_TESTMODE&&"true"!==rE.default.env.NEXT_PUBLIC_TESTSERVER,l=(0,rA.useCallback)(()=>{"string"==typeof i&&o.prefetch(i,{kind:rI.PrefetchKind.FULL})},[i,o]);return{onMouseEnter:"hover"===n&&a?l:void 0,prefetch:!!s&&t}}function rM(e){let{href:t,as:n,tab:r,shallow:i,scroll:o,children:a,prefetch:s,prefetchStrategy:l="visible",icon:c,isDifferentZone:u,onNavigate:d,...p}=e,h=rT({href:t,isDifferentZone:u,prefetch:s,prefetchStrategy:l});return p.disabled||p.loading?(0,rj.jsx)(nG,{...p,children:a}):"string"==typeof t&&(r||!rN(t)||p.download||u)?(0,rj.jsxs)(nG,{Component:"a",href:p.disabled?void 0:t,rel:r?"noopener":void 0,target:r?"_blank":void 0,...p,children:[a,c?(0,rj.jsx)(rS.External,{}):null]}):"string"==typeof t?(0,rj.jsx)(nG,{Component:rk.default,href:t,rel:r?"noopener":void 0,target:r?"_blank":void 0,onNavigate:d,prefetch:h.prefetch,scroll:o,shallow:i,...p,children:a}):(0,rj.jsx)(rL,{Component:rk.default,onMouseEnter:h.onMouseEnter,rel:r?"noopener":void 0,target:r?"_blank":void 0,...p,as:n,href:t,prefetch:h.prefetch,scroll:o,shallow:i,children:a})}let rL=(0,rC.forwardRef)((e,t)=>{let{children:n,onClick:r,onMouseEnter:i,...o}=e;return(0,rj.jsx)(nG,{ref:t,...o,passthroughOnClick:r,passthroughOnMouseEnter:i,children:n})});rL.displayName="ButtonWrapper";var rP=r,rR=d,r_=y,rO=p,rF=e.i(456915),rB=e.i(926949);let rV=(0,rR.forwardRef)((e,t)=>{let{as:n,type:r,variant:i,external:o,icon:a,tab:s,href:l,children:c,className:u,prefetch:d,canPrefetch:p=rN,prefetchStrategy:h="visible",isDifferentZone:f,onNavigate:m,...g}=e,v=rT({href:l,isDifferentZone:f,prefetch:d,prefetchStrategy:h}),x=s||o||l&&!p(l)&&!l.startsWith("#"),y=i||r,b=y?rB.default[y]:"",{underline:w,...j}=g,C=!!o&&!1!==a;if(l&&(f||x))return(0,rP.jsxs)("a",{href:l,rel:x?"noopener":void 0,target:x?"_blank":void 0,...g,className:(0,rO.clsx)(rB.default.link,{[String(rB.default.external)]:C,[String(rB.default.alwaysUnderline)]:!!w},b,u),ref:t,children:[c,C?(0,rP.jsx)(rF.ExternalSmall,{}):null]});if(!l&&!g.onClick)return(0,rP.jsx)("span",{...j,"aria-disabled":!0,className:(0,rO.clsx)(rB.default.disabled,b,u),ref:t,role:"link",tabIndex:-1,children:c});let k=(0,rO.clsx)(rB.default.link,{[String(rB.default.alwaysUnderline)]:!!w},b,u);return l?(0,rP.jsx)(r_.default,{href:n||l,...j,...v,onNavigate:m,className:k,ref:t,children:c}):(0,rP.jsx)("span",{...j,className:k,onKeyDown:e=>{if("Enter"===e.key){var t;null==(t=j.onClick)||t.call(j)}},ref:t,role:"link",tabIndex:0,children:c})});rV.displayName="Link";var rz=r,rH=p,rU=e.i(858269);let rG="/",rW={},rq=e=>{let t=rW[e];if(t)return t;let n=(0,rU.default)(e);return rW[e]=n,n},rZ=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return[...e.split(rG),t,...r].filter(Boolean).map(rq).join(rG)};var rK=e.i(154060);function r$(e){let{as:t="span",width:n,height:r,boxHeight:i=r,button:o,pill:a,rounded:s,squared:l,style:c,show:u=!0,block:d=!0,className:p,vcenter:h,children:f,autoSize:m=!1,animated:g=!0}=e,v=t,x=m||!!(f&&!(n||r));n=n||24,r=r||24,i=i||r;let y=x?0:Number(i)-Number(r);return(0,rz.jsx)(v,{className:(0,rH.clsx)(rK.default.skeleton,p,{[rK.default.show]:u,[rK.default.wrapper]:x,[rK.default.loaded]:!x&&!!f,[rK.default.inline]:!d,[rK.default.pill]:a,[rK.default.rounded]:s,[rK.default.squared]:l,[rK.default.noAnimation]:!g,[rK.default.button]:o}),"data-geist-skeleton":"","data-testid":rZ("legacy","skeleton"),"data-version":"v1",style:x?c:{width:nb(n),minHeight:nb(r),marginBottom:(h?y/2:y)||void 0,marginTop:(h?y/2:void 0)||void 0,...c},children:f})}var rY=rF,rJ=h,rQ=r,rX=d;let r0=()=>{if(!("document"in globalThis))return 0;let e=400,t=document.createElement("div");t.style.width="".concat(e,"px"),t.style.height="".concat(e,"px"),t.style.overflow="scroll",document.body.appendChild(t);let n=e-t.scrollWidth;return t.remove(),n},r1=40,r2=8,r5=56,r4=8,r3=2,r9=24,r7=24,r6=8,r8={root:{startTime:0,endTime:1,duration:1,depth:0,children:[]},spanMap:{},resourceMap:{},filter:"",selected:null,baseScale:1,scaleRatio:1,scale:1,width:640,height:480,timelineWidth:640,timelineHeight:480,panelWidth:380,panelHeight:480,scrollbarWidth:0,timelineRef:{current:null},scrollSnapshotRef:{current:void 0},memoCacheRef:{current:new Map},getQuickLinks:()=>[],withPanel:!1,isMobile:!1},ie=e=>(e.width-e.scrollbarWidth-Number(!!(e.selected&&e.withPanel))*e.panelWidth)/e.root.duration,it=(0,rX.createContext)({state:r8,dispatch:()=>{}});it.displayName="TraceViewerContext";let ir=(e,t)=>{switch(t.type){case"setRoot":return e.scrollSnapshotRef.current=void 0,e.memoCacheRef.current.clear(),ir({...e,root:t.root,spanMap:t.spanMap,resourceMap:Object.fromEntries(t.resources.map(e=>{let{name:t,attributes:n}=e;return[t,n]}))},{type:"detectBaseScale"});case"setSize":{let n=t.height-r5-r1-3*r2,r=e.withPanel&&t.width<=768,i={...e,width:t.width,height:t.height,timelineWidth:t.width-Number(!!(e.selected&&e.withPanel&&!r))*e.panelWidth,timelineHeight:n,panelHeight:n,isMobile:r};return i.width!==e.width&&(i=ir(i,{type:"detectBaseScale"})),i}case"setPanelWidth":{let n=Math.max(240,Math.min(t.width,e.width-240));return{...e,timelineWidth:e.width-n,panelWidth:n}}case"setFilter":return{...e,filter:t.filter};case"deselect":return ir({...e,selected:null,timelineWidth:e.width},{type:"minScale"});case"select":{let n=e.spanMap[t.id];if(!n)return e;return{...e,selected:n,timelineWidth:e.width-(e.withPanel&&!e.isMobile?e.panelWidth:0)}}case"escape":if(e.selected)return ir(e,{type:"deselect"});return ir(e,{type:"resetScale"});case"toggleSelection":{var n;let r=e;if(e.selected&&(r=ir(r,{type:"deselect"})),(null==(n=e.selected)?void 0:n.span.spanId)===t.id)return r;return ir(r,{type:"select",id:t.id})}case"detectBaseScale":{let t=(e.width-e.scrollbarWidth)/e.root.duration;return{...e,baseScale:t,scale:t*e.scaleRatio}}case"setScale":return{...e,scaleRatio:t.scale,scale:e.baseScale*t.scale};case"resetScale":return ir(e,{type:"scaleToRange",t1:e.root.startTime,t2:e.root.endTime});case"scaleToNode":{let n=e.spanMap[t.id];if(!n)return e;return ir(ir(e,{type:"setScale",scale:(e.width-e.scrollbarWidth-(e.withPanel&&!e.isMobile?e.panelWidth:0))/n.duration/e.baseScale}),{type:"setScrollSnapshot",anchorT:n.startTime-e.root.startTime,anchorX:0})}case"scaleToRange":{let n=Math.abs(t.t1-t.t2);return ir(ir(e,{type:"setScale",scale:(e.width-e.scrollbarWidth-(e.selected&&e.withPanel?e.panelWidth:0))/n/e.baseScale}),{type:"setScrollSnapshot",anchorT:Math.min(t.t1,t.t2)-e.root.startTime,anchorX:0})}case"adjustScaleRatio":{let{scaleRatio:n}=e;switch(t.direction){case -1:n*=.8;break;case 1:n*=1.25;break;default:n=1}let r=e.timelineRef.current;if(!r)return console.warn("timelineRef is null"),e;let{clientWidth:i,scrollLeft:o}=r;return ir(ir({...e,scaleRatio:n,scale:e.baseScale*n},{type:"minScale"}),{type:"setScrollSnapshot",anchorT:(o+.5*i)/e.scale,anchorX:.5*i})}case"trackpadScale":{let n=Math.max(ie(e)/e.baseScale,e.scaleRatio*(1+.2*Math.sign(t.delta)*Math.sqrt(Math.abs(t.delta))));return ir({...e,scaleRatio:n,scale:e.baseScale*n},{type:"setScrollSnapshot",anchorT:t.anchorT,anchorX:t.anchorX})}case"minScale":{let t=ie(e);if(e.scale>=t)return e;return{...e,scale:t,scaleRatio:t/e.baseScale}}case"setScrollSnapshot":{let n=e.timelineRef.current;if(!n)return e;let{anchorT:r,anchorX:i}=t,o=r*e.scale-i,{scrollTop:a}=n,s=(a-r7-r4)/(r9+r3),l=s+Math.ceil(e.timelineHeight/(r9+r3));return e.scrollSnapshotRef.current={anchorT:r,anchorX:i,scrollLeft:o,scrollTop:a,startTime:e.root.startTime+o/e.scale,endTime:e.root.startTime+(o+e.timelineWidth)/e.scale,startRow:s,endRow:l,scale:e.scale},e}case"setWithPanel":if(e.withPanel===t.withPanel)return e;return{...e,withPanel:t.withPanel};case"forceRender":return e.memoCacheRef.current.set("",{}),{...e}}};function ii(e){let{getQuickLinks:t,withPanel:n=!1,children:r}=e,i=(0,rX.useRef)(null),o=(0,rX.useRef)(void 0),a=(0,rX.useRef)(t);a.current=t;let s=(0,rX.useRef)(new Map),l=(0,rX.useRef)(new Map),[c,u]=(0,rX.useReducer)(ir,r8,e=>({...e,scrollbarWidth:r0(),timelineRef:i,scrollSnapshotRef:o,memoCacheRef:s,withPanel:n,getQuickLinks:e=>{var t;let n=e.spanId,r=l.current.get(n);if(r)return r;let i=(null==(t=a.current)?void 0:t.call(a,e))||[];return l.current.set(n,i),i}}));(0,rX.useEffect)(()=>u({type:"setWithPanel",withPanel:n}),[n]);let d=(0,rX.useMemo)(()=>({state:c,dispatch:u}),[c,u]);return(0,rQ.jsx)(it.Provider,{value:d,children:r})}let io=()=>(0,rX.useContext)(it);var ia=e.i(493839),is=r,il=d,ic=p,iu=h,id=ia;let ip=(e,t)=>e.duration*t<64,ih=(e,t)=>e.duration*t>=500,im=e=>e.isVercel?String(iu.default.colorVercel):String(iu.default["color".concat(e.resourceIndex%5)]),ig=(e,t)=>{let n=ih(e,t),r=e.isHovered&&!n&&!1!==e.isHighlighted;return(0,ic.clsx)(iu.default.spanNode,n&&iu.default.huge,ip(e,t)&&iu.default.small,e.isSelected&&iu.default.selected,r&&iu.default.xHover,e.isHighlighted?iu.default.colorHighlight:im(e),!1===e.isHighlighted&&iu.default.unlit)},iv=e=>e.isInstrumentationHint?"Get Started":(0,id.formatDuration)(e.duration),ix=(0,il.memo)(function(e){let{root:t,scale:n,spans:r,scrollSnapshotRef:i,cache:o}=e;return r.map(e=>(0,is.jsx)(iy,{cacheKey:o.get(e.span.spanId),node:e,root:t,scale:n,scrollSnapshotRef:i},e.span.spanId))}),iy=(0,il.memo)(function(e){let{node:t,root:n,scale:r,scrollSnapshotRef:i}=e,o=(0,il.useRef)(null);t.ref=o;let{span:a}=t,s=iv(t),l=(t.startTime-n.startTime)*r,c=r7+(r9+r3)*t.row,u=t.duration*r,d=r9,p=ih(t,r),h=ip(t,r),f=t.isHovered&&!p&&!1!==t.isHighlighted;h&&!f&&(d*=.4,c+=(r9-d)*.5);let m=!1;if(f){let{duration:e,endTime:r}=n,o=i.current;o&&(e=o.endTime-o.startTime,r=o.endTime),m=r-t.startTime<.25*e}return(0,is.jsxs)(is.Fragment,{children:[(0,is.jsx)("button",{"aria-label":"".concat(a.name," - ").concat(s),className:ig(t,r),"data-span-id":a.spanId,"data-start-time":t.startTime-n.startTime,"data-right-side":m,ref:o,style:{"--span-width":"".concat(u,"px"),minWidth:f?u:void 0,width:f?void 0:u,height:d,maxWidth:f&&!m?(n.endTime-t.startTime)*r:void 0,containIntrinsicWidth:f?void 0:u,containIntrinsicHeight:d,left:m?void 0:l,right:m?(n.endTime-t.endTime)*r:void 0,top:c},type:"button",children:h&&!f?null:(0,is.jsxs)(is.Fragment,{children:[(0,is.jsx)("span",{className:iu.default.spanName,children:t.label||a.name}),p?(0,is.jsx)("span",{className:iu.default.spanSpacer}):null,f||u>128?(0,is.jsx)("span",{className:iu.default.spanDuration,children:s}):null]})}),t.events&&!h?t.events.map(e=>(0,is.jsx)(ib,{event:e,node:t,root:n,scale:r},e.key)):null]})}),ib=(0,il.memo)(function(e){let{event:t,node:n,root:r,scale:i}=e,o=(0,il.useRef)(null);t.ref=o;let{event:{name:a}}=t,s=(0,id.formatDuration)(t.timestamp-r.startTime),l=(t.timestamp-r.startTime)*i,c=r7+(r9+r3)*n.row;return(0,is.jsxs)("div",{"aria-label":"".concat(a," - ").concat(s),className:(0,ic.clsx)(iu.default.spanNodeEvent,n.isHighlighted?iu.default.colorHighlight:im(n),!1===n.isHighlighted&&iu.default.unlit),"data-hovered":t.isHovered,ref:o,style:{left:l,top:c},children:[(0,is.jsxs)("div",{className:(0,ic.clsx)(iu.default.hoverInfo,(t.timestamp-n.startTime)/n.duration<.5?iu.default.alignStart:iu.default.alignEnd),children:[(0,is.jsx)("span",{className:iu.default.eventName,children:a}),(0,is.jsx)("span",{className:iu.default.eventTimestamp,children:s})]}),(0,is.jsx)("div",{className:iu.default.eventDiamond})]})}),iw=e=>"".concat((100*e).toFixed(3),"%"),ij=(e,t)=>e<t?-1:+(e>t),iC=e=>{let t={};for(let[n,r]of Object.entries(e)){let e=n.indexOf("."),i="",o="";-1!==e?(i=n.substring(0,e),o=n.substring(e+1)):o=n;let a=t[i];a||(a={prefix:i,attributes:[]},t[i]=a),a.attributes.push({key:n,suffix:o,value:String(r)})}let n=Array.from(Object.values(t)).sort((e,t)=>ij(e.prefix,t.prefix));for(let e of n)e.attributes.sort((e,t)=>ij(e.suffix,t.suffix));return n},ik=(e,t)=>{let n=[];if(!t)return n;for(let e=t;"parent"in e;e=e.parent)n.unshift(e);return n};function iS(e){var t;let{attached:n=!1}=e,{state:{root:r,selected:i,resourceMap:o,getQuickLinks:a,isMobile:s},dispatch:l}=io(),c=(0,m.useMemo)(()=>{var e;return iC(null!=(e=null==i?void 0:i.span.attributes)?e:{})},[i]),u=(0,m.useMemo)(()=>{let e=null==i?void 0:i.span.resource;if(!e)return[];let t=o[e];return t?iC(t):[]},[o,i]),d=(0,m.useMemo)(()=>ik(r,i),[r,i]);if(!i)return null;let{span:p}=i,h=iL(i);return(0,f.jsxs)(n7,{className:(0,g.clsx)(rJ.default.spanDetailPanel,s&&rJ.default.mobile),children:[n&&!s?(0,f.jsx)(iV,{}):null,(0,f.jsx)(n7,{className:rJ.default.spanDetailPanelTop,direction:"row",children:(0,f.jsxs)(n7,{align:"center",className:rJ.default.spanDetailPanelTopInfo,direction:"row",gap:3,justify:"space-between",children:[(0,f.jsxs)(n7,{align:"center",className:rJ.default.spanDetailPanelTruncatedHeading,direction:"row",gap:3,children:[i.isInstrumentationHint?null:(0,f.jsx)(rw,{as:"span",className:rJ.default.spanDetailPanelDuration,monospace:!0,size:13,children:(0,ia.formatDuration)(i.duration)}),(0,f.jsx)(rw,{as:"span",className:rJ.default.spanDetailPanelName,size:13,title:p.name,children:p.name})]}),(0,f.jsxs)(n7,{align:"center",className:rJ.default.spanDetailPanelCorner,direction:"row",gap:2,children:[(0,f.jsx)(n7,{direction:"row",children:(0,f.jsx)("div",{className:rJ.default.spanDetailPanelCloseVerticalRule})}),(0,f.jsx)(nG,{"aria-label":"Close Span Details",className:rJ.default.spanDetailPanelClose,onClick:()=>l({type:"deselect"}),shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,f.jsx)(nq.Cross,{color:"gray-700",size:20})})]})]})}),(0,f.jsxs)(n7,{className:rJ.default.spanDetailPanelBody,gap:3,children:[i.isVercel?(0,f.jsx)(iP,{node:i}):null,i.isInstrumentationHint?(0,f.jsx)(iF,{}):null,!i.isInstrumentationHint&&d.length?(0,f.jsx)(iE,{className:rJ.default.ancestorGroup,name:"Location",children:d.map(e=>(0,f.jsxs)("button",{className:rJ.default.ancestorNode,onClick:()=>l({type:"select",id:e.span.spanId}),type:"button",children:[(0,f.jsxs)("div",{className:rJ.default.ancestorText,children:[(0,f.jsx)("span",{className:rJ.default.ancestorName,children:e.label||e.span.name}),(0,f.jsx)("span",{className:rJ.default.ancestorDuration,children:(0,ia.formatDuration)(e.duration)})]}),(0,f.jsx)("span",{"aria-hidden":!0,className:rJ.default.ancestorLineContainer,children:(0,f.jsx)("span",{className:(0,g.clsx)(rJ.default.ancestorLine,im(e)),style:{left:iw((e.startTime-r.startTime)/r.duration),width:iw(e.duration/r.duration)}})})]},"".concat(i.span.spanId,".").concat(e.span.spanId)))}):null,h?(0,f.jsx)(iR,{getQuickLinks:a,span:i.span}):null,(null==(t=i.events)?void 0:t.length)?(0,f.jsx)(iE,{name:"Events",children:i.events.map(e=>(0,f.jsxs)(m.Fragment,{children:[(0,f.jsxs)("dl",{className:rJ.default.spanDetailPanelAttribute,children:[(0,f.jsx)("dt",{className:rJ.default.spanDetailPanelAttributeKey,children:e.event.name}),(0,f.jsx)("dd",{className:rJ.default.spanDetailPanelAttributeValue,children:(0,ia.formatDuration)(e.timestamp-r.startTime)})]}),Object.entries(e.event.attributes).map(t=>{let[n,r]=t;return(0,f.jsx)(iB,{name:"".concat(e.event.name,".").concat(n),value:r},n)})]},e.key))}):null,c.length?(0,f.jsx)(iE,{name:"Attributes",children:c.map(e=>(0,f.jsx)(m.Fragment,{children:e.attributes.map(e=>{let{key:t,value:n}=e;return(0,f.jsx)(iB,{name:t,value:n},t)})},e.prefix))}):null,u.length?(0,f.jsx)(iE,{name:"Resource",children:u.map(e=>(0,f.jsx)(m.Fragment,{children:e.attributes.map(e=>{let{key:t,value:n}=e;return(0,f.jsx)(iB,{name:t,value:n},t)})},e.prefix))}):null,i.isInstrumentationHint?null:(0,f.jsxs)(iE,{name:"Library",children:[(0,f.jsx)(iB,{name:"name",value:p.library.name}),p.library.version?(0,f.jsx)(iB,{name:"version",value:p.library.version}):null]})]})]})}let iN="vc-trace-span-exp:";function iE(e){let{name:t,className:n="",children:r}=e,[i,o]=(0,m.useState)(()=>!("localStorage"in globalThis)||"0"!==localStorage.getItem("".concat(iN).concat(t))),a=(0,m.useCallback)(()=>{o(e=>{let n=!e;return localStorage.setItem("".concat(iN).concat(t),String(Number(n))),n})},[t]);return(0,f.jsxs)(n7,{className:(0,g.clsx)(rJ.default.detailGroup,i?rJ.default.expanded:rJ.default.collapsed,n),children:[(0,f.jsxs)("button",{className:rJ.default.detailHeading,onClick:a,type:"button",children:[(0,f.jsx)("span",{children:t}),(0,f.jsx)(nZ.ChevronDown,{className:rJ.default.detailHeadingIcon})]}),i?r:null]})}let iD=new Set(["OPTIONS","HEAD","GET","PUT","POST","DELETE"]),iI={"Resolve Deployment":"How long it took Vercel's routing layer to retrieve details for the deployment.","Resolve Cache":"How long it took Vercel's routing layer to check for a cached function invocation.","Resolve Route":"How long it took Vercel's routing layer to resolve routing rules, including redirects and rewrites.","Invoke Middleware":"How long it took this middleware to start and run user code.","Invoke Function":"How long it took this Vercel Function to start and run user code.",waitUntil:"How long it took to run user code inside of waitUntil.","Start VM":"How long it took to start the Virtual Machine which contains the Vercel Function.","Spawn Node.js":"How long it took the Virtual Machine to start the Node.js runtime.","Spawn Python":"How long it took the Virtual Machine to start the Python runtime.","Init User Code":"How long it took to import the user code and run any globally-scoped code."},iA=new Set(["Start VM","Spawn Node.js","Spawn Python","Init User Code"]),iT=e=>{if(!e||!("span"in e))return null;let t=e.span.attributes,n=t["vercel.region"]||t["vercel.function.region"];return n?String(n):null},iM=e=>{let{name:t}=e.span,n=iT(e),r=iT(e.parent);return"true"===e.span.attributes["vercel.middleware.internal"]?"The Vercel Toolbar created this middleware.":iA.has(t)||"Invoke Function"===t&&e.children.some(e=>iA.has(e.span.name))?"This function encountered a cold start.":n&&r&&n!==r?"This request was routed across regions.":null},iL=e=>{if(!e.isVercel)return!1;let{name:t}=e.span,n=t.indexOf(" ");if(-1===n)return!1;let r=t.substring(0,n);return iD.has(r)};function iP(e){let{node:t}=e,{name:n}=t.span,r=iI[n];if(!r&&iL(t)&&(r="How long it took for Vercel to process the request and send the response."),!r)return null;let i=iM(t);return(0,f.jsx)(iE,{name:"What is this?",children:(0,f.jsxs)("div",{className:rJ.default.infraSpanDescription,children:[(0,f.jsx)("span",{children:r}),i?(0,f.jsx)(ra,{children:i}):i]})})}let iR=(0,m.memo)(function(e){let{getQuickLinks:t,span:n}=e,r=t(n);return r.length?(0,f.jsx)(iE,{name:"Links",children:r.map(e=>{let{key:t,value:n}=e;return(0,f.jsx)(iO,{link:n,name:t},t)})}):null});function i_(e){let[t,n]=(0,m.useState)({}),r=void 0!==e.__resolvedValue||void 0!==e.__rejectedValue;return(0,m.useEffect)(()=>{r||e.then(t=>{e.__resolvedValue=t}).catch(t=>{e.__rejectedValue=t}).finally(()=>n({}))},[e,r]),e.__resolvedValue}function iO(e){let{name:t,link:n}=e,r=i_(n);return(0,f.jsxs)(rV,{as:r?void 0:"span",className:(0,g.clsx)(rJ.default.spanDetailPanelAttribute,rJ.default.spanDetailPanelQuickLink),href:(null==r?void 0:r.href)||"",children:[(0,f.jsx)("span",{className:rJ.default.spanDetailPanelAttributeKey,children:t}),(0,f.jsx)("span",{className:(0,g.clsx)(rJ.default.spanDetailPanelAttributeValue,rJ.default.spanDetailPanelQuickLinkLabel),children:r?(0,f.jsxs)(f.Fragment,{children:[r.label,r.icon||(0,f.jsx)(rY.ExternalSmall,{color:"gray-900"})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r$,{height:18,width:32+8*t.length}),(0,f.jsx)(r$,{height:18,rounded:!0,width:18})]})})]})}function iF(){return(0,f.jsx)(iE,{name:"What is this?",children:(0,f.jsxs)("div",{className:rJ.default.infraSpanDescription,children:[(0,f.jsx)("span",{children:"You can visualize your application's spans alongside Vercel's spans in this viewer."}),(0,f.jsx)(rM,{href:"https://vercel.com/docs/session-tracing#adding-custom-spans",size:"small",target:"_blank",children:"Get Started"})]})})}function iB(e){let{name:t,value:n}=e;return(0,f.jsxs)("dl",{className:rJ.default.spanDetailPanelAttribute,children:[(0,f.jsx)("dt",{className:rJ.default.spanDetailPanelAttributeKey,children:t}),(0,f.jsx)("dd",{className:rJ.default.spanDetailPanelAttributeValue,title:String(n),children:String(n)})]})}function iV(){let{state:{panelWidth:e},dispatch:t}=io(),n=(0,m.useRef)({start:{x:0,width:e},x:0,width:e,isHeld:!1});n.current.width=e;let r=(0,m.useCallback)(e=>{if("mouse"!==e.pointerType)return;e.preventDefault();let t=n.current;t.start.x=e.clientX,t.x=e.clientX,t.start.width=t.width,t.isHeld=!0},[]),i=(0,m.useCallback)(()=>{t({type:"setPanelWidth",width:r8.panelWidth})},[t]);return(0,m.useEffect)(()=>{let e=0,r=()=>{let e=n.current;t({type:"setPanelWidth",width:e.start.width+e.start.x-e.x})},i=t=>{n.current.isHeld&&(t.preventDefault(),n.current.x=t.clientX,cancelAnimationFrame(e),e=requestAnimationFrame(r))},o=()=>{n.current.isHeld=!1};return window.addEventListener("pointermove",i),window.addEventListener("pointerup",o),()=>{window.removeEventListener("pointermove",i),window.removeEventListener("pointerup",o)}},[t]),(0,f.jsx)("div",{"aria-hidden":!0,className:rJ.default.spanDetailPanelResizer,onDoubleClick:i,onPointerDown:r})}var iz=r,iH=d,iU=e.i(936096);let iG=(0,iU.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 6.5C1.5 3.73858 3.73858 1.5 6.5 1.5C9.26142 1.5 11.5 3.73858 11.5 6.5C11.5 9.26142 9.26142 11.5 6.5 11.5C3.73858 11.5 1.5 9.26142 1.5 6.5ZM6.5 0C2.91015 0 0 2.91015 0 6.5C0 10.0899 2.91015 13 6.5 13C8.02469 13 9.42677 12.475 10.5353 11.596L13.9697 15.0303L14.5 15.5607L15.5607 14.5L15.0303 13.9697L11.596 10.5353C12.475 9.42677 13 8.02469 13 6.5C13 2.91015 10.0899 0 6.5 0ZM4.125 5.875H4.75H5.875V4.75V4.125H7.125V4.75V5.875H8.25H8.875V7.125H8.25H7.125V8.25V8.875H5.875V8.25V7.125H4.75H4.125V5.875Z" fill="currentColor"/>'),iW=(0,iU.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M6.5 1.5C3.73858 1.5 1.5 3.73858 1.5 6.5C1.5 9.26142 3.73858 11.5 6.5 11.5C9.26142 11.5 11.5 9.26142 11.5 6.5C11.5 3.73858 9.26142 1.5 6.5 1.5ZM0 6.5C0 2.91015 2.91015 0 6.5 0C10.0899 0 13 2.91015 13 6.5C13 8.02469 12.475 9.42677 11.596 10.5353L15.0303 13.9697L15.5607 14.5L14.5 15.5607L13.9697 15.0303L10.5353 11.596C9.42677 12.475 8.02469 13 6.5 13C2.91015 13 0 10.0899 0 6.5ZM4.75 5.875H4.125V7.125H4.75H8.25H8.875V5.875H8.25H4.75Z" fill="currentColor"/>');var iq=e.i(762539),iZ=h;function iK(){let{dispatch:e}=io(),t=(0,iH.useCallback)(()=>{e({type:"adjustScaleRatio",direction:1})},[e]),n=(0,iH.useCallback)(()=>{e({type:"adjustScaleRatio",direction:-1})},[e]),r=(0,iH.useCallback)(()=>{e({type:"adjustScaleRatio",direction:0})},[e]);return(0,iz.jsxs)(n7,{className:iZ.default.zoomButtonGroup,direction:"row",children:[(0,iz.jsx)(nG,{"aria-label":"Zoom Out",className:iZ.default.zoomButton,onClick:n,svgOnly:!0,variant:"unstyled",children:(0,iz.jsx)(iW,{})}),(0,iz.jsx)("div",{className:iZ.default.divider}),(0,iz.jsx)(nG,{"aria-label":"Reset Zoom",className:iZ.default.zoomButton,onClick:r,svgOnly:!0,variant:"unstyled",children:(0,iz.jsx)(iq.Minus,{})}),(0,iz.jsx)("div",{className:iZ.default.divider}),(0,iz.jsx)(nG,{"aria-label":"Zoom In",className:iZ.default.zoomButton,onClick:t,svgOnly:!0,variant:"unstyled",children:(0,iz.jsx)(iG,{})})]})}var i$=e.i(311826),iY=r,iJ=p,iQ=d,iX=h,i0=ia,i1=d;function i2(e){let t=(0,i1.useRef)({});return{setStyle:(0,i1.useCallback)((n,r)=>{if(t.current[n]=r,e.current){if(!r)return void e.current.style.removeProperty(n);e.current.style.setProperty(n,r)}},[e]),styleRef:t,style:{...t.current}}}var i5=d;function i4(e){let t=(0,i5.useRef)(e);t.current=e,(0,i5.useEffect)(()=>{let e=0,n=0,r=()=>{t.current(e),e=0},i=t=>{if(!t.ctrlKey&&!t.metaKey)return;t.preventDefault();let i=-t.deltaY;switch(t.deltaMode){case WheelEvent.DOM_DELTA_PAGE:i*=window.innerHeight;break;case WheelEvent.DOM_DELTA_LINE:i*=20}e+=i,cancelAnimationFrame(n),n=requestAnimationFrame(r)};return window.addEventListener("wheel",i,{passive:!1}),()=>{window.removeEventListener("wheel",i),cancelAnimationFrame(n)}},[])}let i3=[1,2,4,5,8,10];function i9(e){let{scale:t}=e,{state:{root:n}}=io(),r=n.duration,i=Math.floor(Math.log10(r)),o=Math.max(2,Math.pow(10,i)*(Math.floor(Math.log10(.5*r))===i?1:.5)),a=o*t,s=1;for(let e of i3){if(o/e<24)break;s=e}o/=s,a/=s;let l=Math.ceil(r/o),c=Math.ceil(100/a)||1;return(0,iY.jsx)("div",{className:iX.default.markersContainer,children:(0,iY.jsx)("div",{"aria-hidden":!0,className:iX.default.markers,style:{width:Math.floor(n.duration*t+15),visibility:-1!==t?"visible":"hidden","--marker-width":"".concat(a,"px")},children:Array(l).fill(null).map((e,t)=>{let n=t%c==0;return(0,iY.jsx)("span",{className:(0,iJ.clsx)(iX.default.marker,!n&&iX.default.notch),children:n?(0,iY.jsx)("span",{className:iX.default.markerLabel,children:(0,i0.formatDuration)(o*t)}):null},String(t))})})})}function i7(e){let{events:t,root:n,scale:r}=e;return(0,iY.jsx)("div",{className:iX.default.eventMarkersContainer,children:(0,iY.jsx)("div",{"aria-hidden":!0,className:iX.default.eventMarkers,style:{width:Math.floor(n.duration*r)},children:t.map(e=>(0,iY.jsx)("span",{className:(0,iJ.clsx)(iX.default.eventMarker),style:{left:Math.floor((e.timestamp-n.startTime)*r)}},e.key))})})}let i6=2;function i8(e){let{memoCacheRef:t,timelineRef:n,root:r,spans:i,events:o,scale:a,dispatch:s,scrollSnapshotRef:l}=e,c=(0,iQ.useRef)(!1),u=(0,iQ.useRef)(i);u.current=i;let d=(0,iQ.useRef)(o);d.current=o;let p=(0,iQ.useRef)(null),{style:h,setStyle:f}=i2(p),m=(0,iQ.useRef)(null),g=(0,iQ.useRef)(null),{style:v,setStyle:x}=i2(g),y=(0,iQ.useRef)(void 0),b=(0,iQ.useRef)(null),{style:w,setStyle:j}=i2(b),C=(0,iQ.useRef)(0);(0,iQ.useEffect)(()=>{let e=n.current;if(!e)return;let i=C.current,o=0,l=!1,p=!1,h=!1,g=!1,v=0,w=0,S=Date.now()+500,N=()=>{y.current||(y.current=e.getBoundingClientRect())},E=e=>y.current?(e-r7-r4)/(r9+r3):0,D=()=>{let e=t.current;for(let t of u.current)t.isHovered&&(t.isHovered=!1,e.set(t.span.spanId,{}));s({type:"forceRender"})},I=0,A=()=>{var n,g,C,k,T,M,L,P;if(!c.current)return;y.current||N();let R=y.current;if(!R)return;let{scrollLeft:_,scrollTop:O}=e,F=Math.max(0,Math.min(i+_-R.left-r4,r.duration*a)),B="".concat(F-_+r4,"px");x("left",B),f("left",B);let V=r.startTime+F/a,z=V-r.startTime;if(z<0||z>r.duration?null==(n=m.current)||n.removeAttribute("data-text"):null==(g=m.current)||g.setAttribute("data-text",(0,i0.formatTimeSelection)(z)),l){let e,t,n=i-o,s=Math.abs(n);if(!h){if(s<4)return;h=!0,j("display","flex"),D()}n>0?(j("left",""),j("right","0")):(j("left","0"),j("right","")),j("width","".concat(s,"px"));let l=Math.max(0,Math.min(o+_-R.left-r4,r.duration*a))/a;l<z?(e=l,t=z):(e=z,t=l),null==(C=b.current)||C.setAttribute("data-range","".concat((0,i0.formatTimeSelection)(e)," — ").concat((0,i0.formatTimeSelection)(t))),null==(k=b.current)||k.setAttribute("data-duration","".concat((0,i0.formatTimeSelection)(t-e)," selected"))}if(Date.now()<S){I=requestAnimationFrame(A);return}if(_!==v||O!==w){v=_,w=O,I=requestAnimationFrame(A);return}if(i-R.left<128?null==(T=m.current)||T.setAttribute("data-align","left"):i-R.left>R.width-128?null==(M=m.current)||M.setAttribute("data-align","right"):null==(L=m.current)||L.removeAttribute("data-align"),!h&&!p){let e=t.current,n=E(O)-i6,r=E(O+R.height)+i6;for(let t of u.current){let i=t.row>=n&&t.row<=r&&V>=t.startTime&&V<=t.endTime;t.isHovered!==i&&(t.isHovered=i,e.set(t.span.spanId,{}))}let i=12/a;for(let e of d.current){let t=V>=e.timestamp-i&&V<=e.timestamp+i;if(e.isHovered===t)continue;e.isHovered=t;let n=null==(P=e.ref)?void 0:P.current;n&&n.setAttribute("data-hovered",String(t))}s({type:"forceRender"})}};I=requestAnimationFrame(A);let T=e=>{"mouse"===e.pointerType&&(c.current=!0)},M=()=>{c.current&&(c.current=!1,D())},L=e=>{let{clientX:t}=e;C.current=i=t,cancelAnimationFrame(I),I=requestAnimationFrame(A)},P=e=>{e.preventDefault()},R=e=>{var t;if(2===e.button)g=!0,e.preventDefault();else{if(0!==e.button)return;g=!1}(null==(t=n.current)?void 0:t.contains(e.target))?(o=i,l=!0):(p=!0,requestAnimationFrame(D))},_=t=>{if(p=!1,!l||(l=!1,!h))return;if(h=!1,j("display",""),j("left",""),j("right",""),j("width",""),t.preventDefault(),t.stopImmediatePropagation(),g){g=!1;return}y.current||N();let n=y.current;if(!n)return;let{scrollLeft:c}=e,u=Math.max(0,Math.min((o+c-n.left-r4)/a,r.duration)),d=Math.max(0,Math.min((i+c-n.left-r4)/a,r.duration));s({type:"scaleToRange",t1:u+r.startTime,t2:d+r.startTime})},O=e=>{l&&"Escape"===e.key&&(g=!0,_(e))},F=()=>{y.current=void 0,k.current=void 0,cancelAnimationFrame(I),I=requestAnimationFrame(A)},B=()=>{cancelAnimationFrame(I),I=requestAnimationFrame(A)},V=new ResizeObserver(()=>{y.current=void 0});return V.observe(e),window.addEventListener("mousemove",L),e.addEventListener("contextmenu",P),window.addEventListener("mousedown",R),window.addEventListener("mouseup",_),window.addEventListener("blur",_),window.addEventListener("keydown",O,!0),window.addEventListener("scroll",F),e.addEventListener("scroll",B),e.addEventListener("pointerenter",T),e.addEventListener("pointerleave",M),()=>{V.disconnect(),window.removeEventListener("mousemove",L),e.removeEventListener("contextmenu",P),window.removeEventListener("mousedown",R),window.removeEventListener("mouseup",_),window.removeEventListener("blur",_),window.removeEventListener("keydown",O,!0),window.removeEventListener("scroll",F),e.removeEventListener("scroll",B),e.removeEventListener("pointerenter",T),e.removeEventListener("pointerleave",M),cancelAnimationFrame(I),C.current=i,D()}},[s,r,a,x,f,j,t,n,l]);let k=(0,iQ.useRef)(void 0);return i4(e=>{var t,r;let i=n.current;if(!i)return;null!=(r=(t=y).current)||(t.current=i.getBoundingClientRect());let o=y.current,l=Math.max(0,Math.min(C.current-o.left-r4,o.width-2*r4)),c=0,u=k.current;(null==u?void 0:u.anchorX)===l?c=u.anchorT:k.current=u={anchorT:c=(i.scrollLeft+l)/a,anchorX:l},s({type:"trackpadScale",delta:e/64,anchorT:c,anchorX:l})}),(0,iY.jsxs)(iY.Fragment,{children:[(0,iY.jsx)("div",{className:iX.default.cursorMarkerStickyParent,children:(0,iY.jsx)("div",{className:iX.default.cursorMarkerLabelContainer,ref:p,style:h,children:(0,iY.jsx)("div",{className:iX.default.cursorMarkerLabel,ref:m})})}),(0,iY.jsx)("div",{className:iX.default.cursorMarkerStickyParent,children:(0,iY.jsx)("div",{className:iX.default.cursorMarkerContainer,ref:g,style:v,children:(0,iY.jsx)("div",{className:iX.default.cursorMarker,children:(0,iY.jsx)("div",{className:iX.default.cursorSelection,ref:b,style:w})})})})]})}var oe=d,ot=i$;function on(){return[]}let or=t=>{let{state:n,dispatch:r}=io(),{root:i,filter:o,scale:a,timelineRef:s,timelineWidth:l,spanMap:c,scrollSnapshotRef:u,selected:d,memoCacheRef:p}=n,h=oi(n.timelineHeight),f=(0,oe.useRef)(0),[m,g]=(0,oe.useState)(on),[v,x]=(0,oe.useState)(on),[y,b]=(0,oe.useState)(on),[w,j]=(0,oe.useState)(-1),C=(0,oe.useRef)(void 0);return(0,oe.useEffect)(()=>{var e;return null==(e=C.current)?void 0:e.call(C,o)},[o]),(0,oe.useEffect)(()=>{if(null==t?void 0:t.length){for(let e of m)for(let n of e){let e=t.includes(n.span.spanId);n.isHighlighted!==e&&(n.isHighlighted=e,p.current.set(n.span.spanId,{}))}r({type:"forceRender"})}},[m,t,r,p]),(0,oe.useEffect)(()=>{if(!i.startTime)return;let t=new Worker(e.r(805325)),n=++f.current,o=e=>{let t=e.data;switch(t.type){case"setRowsResult":if(t.isEnd)for(let e of t.rows)for(let t of e){var i,o;t.span=null!=(o=null==(i=c[t.span.spanId])?void 0:i.span)?o:t.span}g(t.rows);break;case"updateHighlight":{if(t.requestId!==n)return;let{matches:e}=t;g(t=>{for(let n of t)for(let t of n){let n=e.has(t.span.spanId);t.isHighlighted!==n&&(t.isHighlighted=n,p.current.set(t.span.spanId,{}))}return t}),r({type:"forceRender"})}}};t.addEventListener("message",o);let a={requestId:n,type:"calculateSpanPositions",root:i};return t.postMessage(a),C.current=e=>{let r=e.trim().toLocaleLowerCase();if(!r)return void g(e=>e.map(e=>e.map(e=>(e.isHighlighted=void 0,{...e}))));let o={type:"filterSpans",requestId:n=++f.current,root:i,filter:r};t.postMessage(o)},()=>{t.terminate()}},[i,c,r,p]),(0,oe.useEffect)(()=>{if(!m.length)return;let e=s.current,t=u.current,n=!1,r=!1,o=0,c=0,d=Math.max(500,.5*l),p=Array(m.length).fill(null),f=()=>{var e;r=!0;let n=Math.min(1+c+Math.ceil(null!=(e=null==t?void 0:t.endRow)?e:1/0),m.length);for(let e=n;e--;){if(p[e])continue;let t=g(e);if(Math.abs(t)>c){if(r=!1,t>0)continue;break}let n=[],i=m[e];if(i){for(let e of i){if(!(0,ot.adjustSpanVisibility)(e,a))continue;let t=v(e);o=Math.max(t,o),n.push({d:t,span:e})}p[e]=n}}},g=e=>t?e<t.startRow?e-t.startRow:e>t.endRow?e-t.endRow:0:0,v=e=>{if(!t)return 0;let n=0;e.endTime<t.startTime?n=t.startTime-e.endTime:e.startTime>t.endTime&&(n=e.startTime-t.endTime);let r=Math.abs(g(e.row));return n||r?Math.sqrt(Math.pow(n/a,2)+Math.pow(r*r9+r3,2)):0},y=()=>{if(!e)return;let{scrollLeft:n,scrollTop:r}=e,o=(r-r7-r4)/(r9+r3),s=o+Math.ceil(h/(r9+r3));u.current=t={anchorT:n/a,anchorX:0,scrollLeft:n,scrollTop:r,startTime:i.startTime+n/a,endTime:i.startTime+(n+l)/a,startRow:o,endRow:s,scale:a};for(let e=p.length;e--;)p[e]=null},w=0,C=()=>{(n||!t)&&(n=!1,y()),f();let e=[],i=[];for(let t of p)if(t)for(let{d:n,span:r}of t)!(n>c)&&(e.push(r),r.events&&i.push(...r.events));c<d&&(!r||c<o)&&(c=Math.min(d,c+100),w=requestAnimationFrame(C)),x(e),b(i),j(a)};C();let k=Date.now(),S=e=>{(e.ctrlKey||e.metaKey)&&(k=Date.now())};null==e||e.addEventListener("wheel",S);let N=()=>{Date.now()-k<=50||(n=!0,cancelAnimationFrame(w),w=requestAnimationFrame(C))};return null==e||e.addEventListener("scroll",N),()=>{cancelAnimationFrame(w),null==e||e.removeEventListener("wheel",S),null==e||e.removeEventListener("scroll",N)}},[m,i,a,u,s,l,h]),(0,oe.useEffect)(()=>{var e;let t;if(!d)return;for(let e of v)if(e.span.spanId===d.span.spanId){t=e;break}let n=null==t||null==(e=t.ref)?void 0:e.current;if(t&&n)return t.isSelected=!0,n.className=ig(t,a),()=>{t.isSelected=!1,n.className=ig(t,a)}},[v,a,d]),{rows:m,spans:v,events:y,scale:w}};function oi(e){let[t,n]=(0,oe.useState)(e);return(0,oe.useEffect)(()=>{if(t===e)return;let r=0,i=0,o=()=>{if(++r<=3){i=requestAnimationFrame(o);return}n(e)};return o(),()=>{cancelAnimationFrame(i)}},[t,e]),t}var oo=r,oa=d,ol=h;let oc=()=>"devicePixelRatio"in globalThis&&globalThis.devicePixelRatio||1,ou=()=>{let[e,t]=(0,oa.useState)(1);return(0,oa.useLayoutEffect)(()=>{let n=()=>t(oc()),r=matchMedia("(resolution: ".concat(e,"dppx)"));return r.addEventListener("change",n),n(),()=>{r.removeEventListener("change",n)}},[e]),e},od=r4,op=(0,oa.memo)(function(e){let{timelineRef:t,rows:n,scale:r}=e,{state:{root:i,baseScale:o,timelineWidth:a,width:s,scrollbarWidth:l}}=io(),c=s+2*r4,u=ou(),d=(0,oa.useRef)(null),p=(0,oa.useRef)(null),h=s/(s-l)*Math.min(s/a,o/r),f=Math.min(s,(a-l)*h);(0,oa.useEffect)(()=>{let e,n=!1,r=0,i=e=>{var t;return!!(null==(t=d.current)?void 0:t.contains(e))},o=0,a=()=>{if(!n||!e)return;let i=t.current;i&&(i.scrollLeft=(r-.5*f-e.left)/h)},s=e=>{({clientX:r}=e),cancelAnimationFrame(o),o=requestAnimationFrame(a)},l=t=>{var r;i(t.target)&&(n=!0,e=null==(r=d.current)?void 0:r.getBoundingClientRect(),s(t))},c=()=>{n=!1,e=void 0},u=e=>{i(e.target)&&e.cancelable&&e.preventDefault()},p=e=>{n&&e.cancelable&&e.preventDefault()};return window.addEventListener("pointerdown",l),window.addEventListener("pointermove",s),window.addEventListener("pointerup",c),window.addEventListener("blur",c),window.addEventListener("touchstart",u,{passive:!1}),window.addEventListener("touchmove",p,{passive:!1}),()=>{window.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),window.removeEventListener("touchstart",u),window.removeEventListener("touchmove",p),cancelAnimationFrame(o)}},[t,h,f]),(0,oa.useEffect)(()=>{let e=p.current,t=null==e?void 0:e.getContext("2d");if(!e||!t)return;let r=requestAnimationFrame(()=>{t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.scale(u,u);let r=1,o=3,a=(c-2*od)/i.duration;for(let e of(t.fillStyle="#ccc",t.beginPath(),n))for(let n of e){let e=od-r+(r+o)*n.row;if(e>=r5-o-od)break;let s=od+(n.startTime-i.startTime)*a,l=n.duration*a;t.roundRect(s,e,l,o,o)}t.fill()});return()=>cancelAnimationFrame(r)},[u,i,c,n]);let m=(0,oa.useRef)(null),{style:g,setStyle:v}=i2(m);return(0,oa.useLayoutEffect)(()=>{let e=t.current;if(!e)return;let n=0,r=()=>{v("transform","translateX(".concat(od+e.scrollLeft*h,"px)"))};r();let i=()=>{cancelAnimationFrame(n),n=requestAnimationFrame(r)};return e.addEventListener("scroll",i),()=>{cancelAnimationFrame(n),e.removeEventListener("scroll",i)}},[t,h,v]),(0,oo.jsxs)("div",{className:ol.default.mapContainer,ref:d,style:{width:f>0?c:"100%",height:r5},children:[(0,oo.jsx)("canvas",{className:ol.default.mapCanvas,height:r5*u,ref:p,style:{width:c,height:r5},width:c*u}),(0,oo.jsx)("div",{className:ol.default.mapThumb,ref:m,style:{transform:g.transform,width:f>0?f:"calc(100% - ".concat(2*r4,"px)"),top:2,height:r5-4}})]})});var oh=r,of=d,om=r,og=d,ov=e.i(846722),ox=e.i(129818),oy=r,ob=d,ow=p,oj=r,oC=d,ok=p,oS=d;let oN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+(0,oS.useId)()};var oE=nT,oD=r,oI=d,oA=p,oT=rr,oM=e.i(624063);function oL(e){let{id:t,style:n,label:r,className:i,children:o,size:a,error:s,...l}=e,c=(0,oI.useMemo)(()=>{if(o)return o;if((0,oI.isValidElement)(s))return s;if(s&&"object"==typeof s){var e;return(0,oD.jsxs)(oD.Fragment,{children:["message"in s?s.message:null,"link"in s?(0,oD.jsxs)(oD.Fragment,{children:[" ",(0,oD.jsx)("span",{className:oM.default["action-link"],children:(0,oD.jsx)(rV,{external:!0,href:s.link,type:"blend",children:null!=(e=s.action)?e:"Learn More"})})]}):null]})}return s},[o,s]);return(0,oD.jsxs)(n7,{"aria-atomic":"true",className:(0,oA.clsx)(oM.default.error,i,{[String(oM.default.large)]:"large"===a,[String(oM.default.small)]:"small"===a}),"data-geist-error":"","data-testid":l["data-testid"],"data-version":"v1",direction:"row",gap:0,id:t,role:"alert",style:n,children:[(0,oD.jsx)("div",{"aria-hidden":!0,style:{display:"flex",alignItems:"center",marginRight:8,marginTop:oP(a)},children:(0,oD.jsx)(oT.Stop,{color:"red-900",size:16})}),(0,oD.jsxs)("div",{className:oM.default.text,children:[r?(0,oD.jsxs)("b",{className:oM.default.label,children:[r,":"]}):null,c]})]})}let oP=e=>{if(void 0===e)return 2;switch(e){case"small":return 2;case"large":return 4}};var oR=r,o_=p,oO=e.i(328645);function oF(e){let{bypassCasing:t=!1,children:n,className:r,id:i,style:o,value:a,withInput:s,wrapperClassName:l}=e;return(0,oR.jsxs)("label",{className:l,"data-version":"v1",htmlFor:i,style:o,children:[(0,oR.jsx)("div",{className:(0,o_.clsx)(oO.default.label,r,{[String(oO.default.input)]:s,[String(oO.default.capitalize)]:!t}),children:a}),n]})}var oB=e.i(772891);let oV=(0,oC.memo)((0,oC.forwardRef)(function(e,t){let{explicitId:n,disabled:r,label:i,typeName:o="text",prefix:a,suffix:s,prefixStyling:l=!0,prefixContainer:c=!0,suffixStyling:u=!0,suffixContainer:d=!0,width:p,error:h,showErrorMessage:f=!0,type:m,size:g,className:v,rounded:x,innerWrapperClassName:y,wrapperClassName:b,spellCheck:w=!1,autoCapitalize:j="none",autoComplete:C="off",autoCorrect:k="off",bypassCasing:S=!1,...N}=e,{focusProps:E,isFocusVisible:D}=nc({isTextInput:!0}),I=i?oF:oC.Fragment,A=oN("".concat(N.id||"input","-")),T={...i&&{value:i,withInput:!0,style:{width:p},id:A,wrapperClassName:b,bypassCasing:S}},M=nP()||r,L=oN("input-"),P=nI(h?"error":m),R=N["aria-label"]||N.title,_=()=>a?c?(0,oj.jsx)("label",{"aria-hidden":!0,"data-geist-input-prefix":"",htmlFor:null!=n?n:A,children:a}):a:null,O=()=>s?d?(0,oj.jsx)("label",{"aria-hidden":!0,"data-geist-input-suffix":"",htmlFor:null!=n?n:A,children:s}):s:null,F=(0,oC.useMemo)(()=>(0,oE.getIxIconSize)(g),[g]);return(0,oj.jsxs)(I,{...T,children:[(0,oj.jsxs)("div",{className:(0,ok.clsx)(oB.default.container,P,{[String(oB.default.prefix)]:a,[String(oB.default.suffix)]:s,[String(oB.default.noPrefixStyle)]:!l,[String(oB.default.noSuffixStyle)]:!u,[String(oB.default.large)]:"large"===g,[String(oB.default.small)]:"small"===g,[String(oB.default.xSmall)]:"xSmall"===g,[String(oB.default.mediumSmall)]:"mediumSmall"===g,[String(oB.default.keyboardFocus)]:D,[String(oB.default.rounded)]:x,[String(oB.default.error)]:h},y),"data-geist-input-wrapper":"","data-version":"v1",style:{width:p,"--geist-icon-size":"".concat(F,"px")},children:[(0,oj.jsx)("input",{...N,"aria-describedby":h?"".concat(L,"-error"):N["aria-describedby"],"aria-invalid":!!h,"aria-label":R,autoCapitalize:j,autoComplete:C,autoCorrect:k,className:(0,ok.clsx)(oB.default.input,v),"data-geist-input":"",disabled:M,id:null!=n?n:A,onBlur:e=>{var t,n;null==(t=E.onBlur)||t.call(E,e),null==(n=N.onBlur)||n.call(N,e)},onFocus:e=>{var t,n;null==(t=E.onFocus)||t.call(E,e),null==(n=N.onFocus)||n.call(N,e)},ref:t,spellCheck:w,type:o}),_(),O()]}),f&&h?(0,oj.jsx)(oL,{"data-testid":N["data-testid"]?rZ(N["data-testid"],"error"):void 0,error:h,id:"".concat(L,"-error"),size:oz[g||"small"],style:{width:p,marginTop:"var(--geist-gap-quarter)"}}):null]})})),oz={xSmall:"small",small:"small",mediumSmall:"small",large:"large"};var oH=r,oU=p,oG=d;function oW(){return o$(/^Mac/)}function oq(){return o$(/^iPhone/)}function oZ(){return o$(/^iPad/)||oW()&&navigator.maxTouchPoints>1}function oK(){return oW()||oq()||oZ()}function o$(e){return null!=window.navigator?e.test(window.navigator.platform):void 0}var oY=e.i(900071);function oJ(e){let{meta:t,shift:n,alt:r,ctrl:i,small:o,children:a,className:s,type:l,...c}=e,u=nI(l,!0);return(0,oH.jsxs)("kbd",{className:(0,oU.clsx)(oY.default.kbd,{[String(oY.default.small)]:o},u,s),...c,"data-geist-kbd":"","data-version":"v1",children:[t?(0,oH.jsx)(oQ,{}):null,n?(0,oH.jsx)("span",{children:"⇧"}):null,r?(0,oH.jsx)("span",{children:"⌥"}):null,i?(0,oH.jsx)("span",{children:"⌃"}):null,a?(0,oH.jsx)("span",{children:a}):null]})}function oQ(){let[e,t]=(0,oG.useState)(" "),n=oK();return(0,oG.useEffect)(()=>{!0===n&&t("⌘"),!1===n&&t("Ctrl")},[n]),(0,oH.jsx)("span",{style:{minWidth:"1em",display:"inline-block"},children:e})}var oX=e.i(716331);function o0(e,t){var n;let{value:r,scrollOnClear:i=!0,onChange:o,disabled:a,width:s,onClear:l,cmdk:c,...u}=e,d=(0,ob.useRef)(null),p=t||null,[h,f]=(0,ob.useState)(null),m=(0,ob.useCallback)(e=>{var n;e&&(d.current=e,p&&(p.current=e),f((null==(n=e.closest("[data-geist-input-wrapper]"))?void 0:n.getBoundingClientRect().width)||null),"function"==typeof t&&t(e))},[p,t]),g=(0,ob.useCallback)(()=>{d.current&&!a&&(d.current.value&&(d.current.value="",null==o||o({target:{value:""}}),null==l||l()),d.current.focus({preventScroll:!i}))},[a,i,o,l]),v=!!(u.defaultValue?null==(n=d.current)?void 0:n.value:r),x=v&&(0,oy.jsx)("button",{className:(0,ow.clsx)(oX.default.button,{[String(oX.default.disabled)]:a}),onClick:g,tabIndex:a?-1:void 0,type:"button",children:(0,oy.jsx)(oJ,{className:oX.default.kbd,small:!0,style:{margin:0},children:"Esc"})}),y=(0,oy.jsxs)(n7,{"aria-label":v?"Press Esc to clear":"Press Cmd + K to open the Command Menu",className:oX.default.cmdk,"data-animate":v,direction:"row",style:{gap:2},children:[(0,oy.jsxs)(oJ,{"aria-hidden":!0,className:oX.default.command,small:!0,children:[(0,oy.jsx)("span",{"data-key":"esc",children:"Esc"}),(0,oy.jsx)("span",{"data-key":"cmd",children:"⌘"})]}),(0,oy.jsx)(oJ,{"aria-hidden":!0,className:oX.default.k,small:!0,children:"K"})]}),b=c?y:x;return(0,oy.jsx)(oV,{...u,"aria-label":u["aria-label"]||u.label||u.title,disabled:a,onChange:o,onKeyDown:e=>{"Escape"===e.key&&(e.preventDefault(),g())},ref:m,suffix:u.suffix?(0,oy.jsxs)(n7,{align:"center",className:oX.default.suffixContainer,"data-suffix-group":"",direction:"row",children:[u.suffix,b]}):b,suffixContainer:!1,suffixStyling:!1,value:r,width:s||h||void 0})}let o1=(0,ob.memo)((0,ob.forwardRef)(o0));function o2(e,t){let{clearable:n=!0,loading:r=!1,...i}=e,o=n?o1:oV,a=r?nj:"small"===i.size?ox.MagnifyingGlassSmall:ov.MagnifyingGlass;return(0,om.jsx)(o,{...i,"aria-label":"Search",prefix:(0,om.jsx)(a,{size:16}),prefixStyling:!1,ref:t,typeName:"search"})}let o5=(0,og.forwardRef)(o2);var o4=h;function o3(){return(0,oh.jsx)("nav",{className:o4.default.searchBar,children:(0,oh.jsx)(o9,{})})}function o9(){let{dispatch:e}=io(),[t,n]=(0,of.useState)("");return(0,of.useEffect)(()=>{let n=setTimeout(()=>e({type:"setFilter",filter:t}),100);return()=>{clearTimeout(n)}},[e,t]),(0,oh.jsx)("div",{className:o4.default.searchInput,children:(0,oh.jsx)(o5,{height:r1,onChange:e=>n(e.target.value),placeholder:"Search spans…",value:t,width:"100%"})})}let o7={traceId:"skeleton",spans:[{parentSpanId:"",spanId:"root",name:"root span",kind:1,resource:"vercel.runtime",startTime:[5e3,0],endTime:[6e3,0],duration:[1e3,0],library:{name:"vercel-site"},status:{code:1},attributes:{"vercel.ownerId":"team_abc"},traceFlags:1,events:[],links:[]}],resources:[{name:"vercel.runtime",attributes:{}}],rootSpanId:"root"};function o6(e){var t;let{trace:n=o7,className:r="",scrollLock:i=!1,height:o,withPanel:a=!1,highlightedSpans:s}=e,l=n===o7,{state:c,dispatch:f}=io(),{timelineRef:m,scrollSnapshotRef:g}=c,v=c.memoCacheRef.current,x=(null!=(t=null==s?void 0:s.length)?t:0)>0;(0,d.useEffect)(()=>{let{root:e,map:t}=(0,i$.parseTrace)(n);f({type:"setRoot",root:e,spanMap:t,resources:n.resources||[]})},[f,n]);let{rows:y,spans:b,events:w,scale:j}=or(s),C=(0,d.useRef)(null);(0,d.useLayoutEffect)(()=>{let e=C.current;if(!e)return;let t=()=>{let t=2*r4,n=e.getBoundingClientRect();f({type:"setSize",width:n.width-t,height:n.height})};t();let n=new ResizeObserver(t);return n.observe(e),window.addEventListener("resize",t),()=>{n.disconnect(),window.removeEventListener("resize",t)}},[f]);let k=(0,d.useRef)({t:0,x:-1,y:-1,spanId:""}),S=(0,d.useCallback)(e=>{let t=k.current,n=Date.now(),{clientX:r,clientY:i}=e,o=Math.sqrt(Math.pow(r-t.x,2)+Math.pow(i-t.y,2));if(n-t.t<=500&&o<=8)return(e.stopPropagation(),e.preventDefault(),t.spanId)?(f({type:"select",id:t.spanId}),void f({type:"scaleToNode",id:t.spanId})):void f({type:"resetScale"});let a=e.target;if(!a.closest(".".concat(String(h.default.timeline))))return;let s=a.closest("[data-span-id]"),l=(null==s?void 0:s.dataset.spanId)||"";k.current={x:r,y:i,t:n,spanId:l},l&&(f({type:"toggleSelection",id:l}),e.stopPropagation())},[f]);(0,d.useLayoutEffect)(()=>{let e=m.current;if(!e)return;let t=g.current;t&&(e.scrollLeft=t.anchorT*j-t.anchorX)},[g,m,j]),(0,d.useEffect)(()=>{var e;let t=null==(e=c.selected)?void 0:e.span.spanId;if(!t)return;let n=setTimeout(()=>{let e=c.timelineRef.current,n=null==e?void 0:e.querySelector('[data-span-id="'.concat(t,'"]'));if(!e||!n)return;let r=e.getBoundingClientRect(),i=n.getBoundingClientRect();i.width<r.width&&(i.left<r.left||i.right>r.right||i.top<r.top||i.bottom>r.bottom)&&n.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},500);return()=>{clearTimeout(n)}},[c.selected,c.timelineRef]),(0,d.useEffect)(()=>{let e=e=>{"Escape"===e.key&&f({type:"escape"})};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[f]),(0,d.useEffect)(()=>{if(!i)return;let e=document.documentElement,t=document.body;e.style.overflow="clip",t.style.overflow="clip";let n=e=>{(null==e?void 0:e.cancelable)?e.preventDefault():window.scrollTo({left:0,top:0,behavior:"instant"})};return n(),window.addEventListener("scroll",n,{passive:!1}),()=>{e.style.overflow="",t.style.overflow="",window.removeEventListener("scroll",n)}},[i]);let N=Math.max(c.timelineHeight-c.scrollbarWidth,r7+r3+y.length*(r9+r3)-r3+84),E=!!(c.isMobile&&c.selected);return(0,u.jsxs)("div",{className:(0,p.clsx)(h.default.traceViewer,l&&h.default.skeleton,r),onClickCapture:S,ref:C,style:{height:o,"--timeline-padding":"".concat(r4,"px"),"--row-height":"".concat(r9,"px"),"--row-padding":"".concat(r3,"px"),"--search-height":"".concat(x?0:r1,"px"),"--search-gap":"".concat(x?2:r2,"px"),"--map-height":"".concat(r5,"px"),"--timeline-width":"".concat(c.timelineWidth,"px"),"--timeline-height":"".concat(c.timelineHeight,"px"),"--timeline-scroll-width":"".concat(Math.round(c.root.duration*c.scale),"px"),"--panel-width":"".concat(c.panelWidth,"px"),"--panel-height":"".concat(c.panelHeight,"px"),"--height":"".concat(c.height,"px"),"--scrollbar-width":"".concat(c.scrollbarWidth,"px"),"--marker-height":"".concat(r7,"px"),"--marker-notch-height":"".concat(r6,"px")},children:[x?null:(0,u.jsx)(o3,{}),(0,u.jsx)(op,{rows:y,scale:j,timelineRef:m}),(0,u.jsxs)("div",{className:(0,p.clsx)(h.default.traceViewerContent,E&&h.default.inert),children:[(0,u.jsx)("div",{className:h.default.timeline,ref:m,children:(0,u.jsx)("div",{style:{position:"relative",width:c.timelineWidth,height:c.timelineHeight-2*r4,padding:r4,paddingBottom:0},children:(0,u.jsxs)("div",{className:h.default.traceNode,style:{width:c.root.duration*j||void 0,height:N-2*r4},children:[(0,u.jsx)(i9,{scale:j}),(0,u.jsx)(i7,{events:w,root:c.root,scale:j}),(0,u.jsx)(i8,{dispatch:f,events:w,memoCacheRef:c.memoCacheRef,root:c.root,scale:j,scrollSnapshotRef:g,spans:b,timelineRef:m}),(0,u.jsx)(ix,{cacheKey:v.get(""),cache:v,root:c.root,scale:j,scrollSnapshotRef:g,spans:b})]})})}),(0,u.jsx)("div",{className:h.default.zoomButtonTraceViewer,children:(0,u.jsx)(iK,{})})]}),a?(0,u.jsx)("div",{className:(0,p.clsx)(h.default.spanDetailPanelTraceViewer,!c.selected&&h.default.hidden,c.isMobile&&h.default.mobile),children:(0,u.jsx)(iS,{attached:!0})}):null]})}function o8(e){return(0,u.jsx)(ii,{getQuickLinks:e.getQuickLinks,withPanel:!0,children:(0,u.jsx)(o6,{withPanel:!0,...e})})}function ae(e){let{data:t,href:n,trace:i}=e;if(!t||!i)return(0,r.jsx)(o.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:(0,r.jsx)(o.CardContent,{className:"p-3",children:(0,r.jsxs)("div",{className:"bg-v0-background-200 flex flex-col items-center justify-center rounded-[6px] p-8",children:[(0,r.jsx)("div",{className:"mb-4 rounded-full border border-v0-red-300 bg-v0-red-200 p-2 text-v0-red-700",children:(0,r.jsx)(s.CrossCircle,{})}),(0,r.jsx)("h3",{className:"mb-2 font-medium text-v0-gray-1000",children:"Trace Analysis Failed"}),(0,r.jsx)("p",{className:"max-w-96 text-center text-v0-red-700",children:"Something went wrong while analyzing the trace. Please try again later."})]})})});let l=JSON.parse(decodeURIComponent(t)),c=JSON.parse(decodeURIComponent(i));return(0,r.jsxs)(o.Card,{className:"not-prose w-full max-w-3xl shadow-sm",children:[(0,r.jsx)(o.CardHeader,{className:"flex p-3",children:(0,r.jsxs)(o.CardTitle,{className:"mx-0.5 flex flex-col gap-1 text-sm font-medium text-v0-gray-1000",children:[(0,r.jsx)("span",{children:"Trace Analysis"}),(0,r.jsxs)("a",{href:n,className:"flex items-center font-normal hover:opacity-70",children:[n,(0,r.jsx)(a.ArrowUpRightSmall,{})]})]})}),(0,r.jsxs)(o.CardContent,{className:"p-0",children:[(0,r.jsx)("div",{className:"relative col-span-full! border-y border-y-gray-300",children:(0,r.jsx)(o8,{className:"absolute left-0 top-0 w-full",height:"50vh",scrollLock:!0,trace:c,highlightedSpans:l.map(e=>e.spanId)})}),(0,r.jsxs)("section",{className:"p-3",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-v0-gray-1000",children:"Performance Impact"}),(0,r.jsx)("p",{className:"mb-6 text-sm text-v0-gray-900",children:"The following spans are the most performance-impacting spans in the trace."}),(0,r.jsx)("ul",{className:"flex flex-col gap-2",children:l.map(e=>(0,r.jsxs)("li",{className:"flex flex-col gap-2",children:[(0,r.jsx)("b",{children:e.spanName}),(0,r.jsx)("span",{children:e.description})]},e.spanId))})]})]})]})}function at(e){let{data:t,isLast:n}=e,a=JSON.parse(decodeURIComponent(t));return n?(0,r.jsx)(o.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:(0,r.jsx)(o.CardContent,{className:"p-3",children:(0,r.jsx)("ul",{className:"bg-v0-background-200 flex flex-col gap-2 rounded-[6px] p-4",children:a.map(e=>(0,r.jsxs)("li",{className:"flex items-center gap-2",children:["pending"===e.status?(0,r.jsx)(c.Minus,{className:"size-4"}):null,"loading"===e.status?(0,r.jsx)(i.Spinner,{size:16}):null,"loaded"===e.status?(0,r.jsx)(l.Check,{className:"size-4"}):null,(0,r.jsx)("span",{children:e.label})]},e.label))})})}):null}function an(e){let{message:t}=e;return(0,r.jsx)(o.Card,{className:"not-prose w-full max-w-lg shadow-sm",children:(0,r.jsx)(o.CardContent,{className:"p-3",children:(0,r.jsx)("div",{className:"text-v0-red-700",children:t})})})}e.s(["TraceAnalysisError",()=>an,"TraceAnalysisReport",()=>ae,"TraceAnalysisStatus",()=>at],302998);var ar=r,ai=d,ao=eK,aa=e.i(539085),as=e.i(716360),al=e.i(529693),ac=r,au=d,ad=e.i(672421),ap=e.i(267285);function ah(e){let{data:t,path:n="",level:r=0}=e;if(null===t)return(0,ac.jsx)("span",{className:"text-v0-gray-900",children:"null"});if("object"!=typeof t)return(0,ac.jsx)(av,{value:t});let i=Array.isArray(t),o=i?t:Object.keys(t);return(0,ac.jsx)("div",{className:"ml-4",children:i?(0,ac.jsx)(am,{items:o,path:n,level:r}):(0,ac.jsx)(af,{items:o,data:t,path:n,level:r})})}function af(e){let{items:t,data:n,path:r,level:i}=e;return(0,ac.jsx)(ac.Fragment,{children:t.map(e=>(0,ac.jsx)(ag,{label:e,value:n[e],path:r?"".concat(r,".").concat(e):e,level:i+1},e))})}function am(e){let{items:t,path:n,level:r}=e;return(0,ac.jsx)(ac.Fragment,{children:t.map((e,t)=>(0,ac.jsx)(ag,{label:t.toString(),value:e,path:n?"".concat(n,"[").concat(t,"]"):"[".concat(t,"]"),level:r+1,isArrayItem:!0},t))})}function ag(e){let{label:t,value:n,path:r,level:i,isArrayItem:o=!1}=e,[a,s]=(0,au.useState)(i<2),l=null!==n&&"object"==typeof n,c=()=>{s(!a)};return(0,ac.jsxs)("div",{className:"my-1",children:[(0,ac.jsxs)("div",{className:"flex items-start ".concat(l?"cursor-pointer":""),onClick:l?c:void 0,children:[l&&(0,ac.jsx)("div",{className:"mr-1 mt-0.5",children:a?(0,ac.jsx)(ad.ChevronDown,{className:"h-4 w-4 text-v0-gray-900"}):(0,ac.jsx)(ap.ChevronRight,{className:"h-4 w-4 text-v0-gray-900"})}),(0,ac.jsxs)("div",{children:[o?(0,ac.jsxs)("span",{className:"text-v0-blue-700",children:["[",t,"]: "]}):(0,ac.jsxs)("span",{className:"text-v0-blue-700",children:['"',t,'": ']}),l?(0,ac.jsx)("span",{className:"text-v0-gray-900",children:Array.isArray(n)?"Array(".concat(n.length,")"):"Object{".concat(Object.keys(n).length,"}")}):(0,ac.jsx)(av,{value:n})]})]}),l&&a&&(0,ac.jsx)(ah,{data:n,path:r,level:i})]})}function av(e){let{value:t}=e;return"string"==typeof t?(0,ac.jsxs)("span",{className:"text-v0-green-700",children:['"',t,'"']}):"number"==typeof t?(0,ac.jsx)("span",{className:"text-v0-purple-700",children:t}):"boolean"==typeof t?(0,ac.jsx)("span",{className:"text-orange-600",children:t.toString()}):null===t?(0,ac.jsx)("span",{className:"text-v0-gray-900",children:"null"}):(0,ac.jsx)("span",{children:String(t)})}var ax=e.i(383542),ay=e.i(335249);function ab(e){let{loading:t,toolName:n,content:r,isLast:i}=e,[o,a]=(0,ai.useState)(!0),s={collapsed:{height:0,opacity:0,marginTop:0,marginBottom:0},expanded:{height:"auto",opacity:1,marginTop:"1rem",marginBottom:0}};return((0,ai.useEffect)(()=>{t||a(!1)},[t]),!i&&t)?null:(0,ar.jsx)(ax.Accordion,{className:"m-0 flex flex-col p-0",type:"single",collapsible:!t,children:(0,ar.jsxs)(ax.AccordionItem,{value:"item-1",className:"border-none [&>h3]:my-0",children:[(0,ar.jsx)(ax.AccordionTrigger,{className:"bg-v0-background-200 border-v0-alpha-400 mt-0 flex flex-row items-center justify-between gap-2 rounded-md border p-2 font-mono text-v0-gray-900",children:(0,ar.jsxs)("div",{className:"flex flex-row items-center gap-2 text-sm",children:[(0,ar.jsx)(aa.Zap,{className:"size-3"}),n]})}),(0,ar.jsx)(ax.AccordionContent,{children:(0,ar.jsx)(as.AnimatePresence,{initial:!1,children:(0,ar.jsx)(al.motion.div,{className:"flex flex-col gap-4 border-l pl-3 text-sm text-zinc-600 dark:border-zinc-800 dark:text-zinc-400",initial:"collapsed",animate:"expanded",exit:"collapsed",variants:s,transition:{duration:.2,ease:"easeInOut"},children:(0,ar.jsx)(ah,{data:r,path:"",level:0})},"reasoning")})})]})})}function aw(e){let t,{toolName:n,status:r="success",toolId:i,input:o,output:a,error:s,timestamp:l,isLast:c,icon:u=(0,ar.jsx)(aa.Zap,{className:"h-3 w-3"})}=e,[d,p]=(0,ai.useState)(null);(0,ai.useEffect)(()=>{if("success"===r){let e=document.getElementById("tool-execution-".concat(i));console.log("Got success, updating portal container",{loadingCard:e,status:r,toolId:i}),e&&(console.log("FOUND  LOADING CARD",e),p(e),e.innerHTML="")}},[r,i]);try{t=(0,ar.jsx)(ab,{loading:"loading"===r,toolName:n,content:a?JSON.parse(ay.default.decode(a)):s?JSON.parse(ay.default.decode(a||"")):""})}catch(e){console.error("Error parsing output:",e),t=(0,ar.jsx)(ab,{loading:"loading"===r,toolName:n,content:s||"Something went wrong"})}return"loading"===r?(0,ar.jsx)(ab,{loading:!0,toolName:n,content:""}):"success"===r&&d?(0,ao.createPortal)(t,d):t}e.s(["ToolExecutionCard",()=>aw],968552)},490838,e=>{"use strict";var t=e.i(142219),n=e.i(743124),r=e.i(418929);function i(e,i){let{atoms:o,actions:a}=(0,r.useCurrentChatPrompt)(),{setTodoList:s}=a;(0,n.useEffect)(()=>{if(!e||"task-manage-todos-v1"!==e.type)return;let n=e.parts.findLast(e=>"updated-todo-list"===e.type);n&&e.lastPartSentAt&&t.store.get(o.derivedTodoList).updatedAt<e.lastPartSentAt&&s({list:n.updatedList,updatedAt:e.lastPartSentAt})},[e])}e.s(["useMaybeUpdateTodoList",()=>i])},571822,e=>{e.v({content:"eyebrow-module__RUAzfa__content"})},884284,795970,29956,249082,563044,301795,876366,865408,423814,276953,e=>{"use strict";let t;var n,r,i,o,a,s,l,c,u,d,p=e.i(743124),h=e.i(284627),f=e.i(639056),m=e.i(142219);let g=2e3;function v(e,t){let{actions:n,atoms:r}=(0,h.useCurrentChatLoader)(),i=(0,f.useAtomValue)(r.lastPartUpdate);(0,p.useEffect)(()=>{if(!e||!t||!h.LOADABLE_RICH_PART_TYPES.includes(e.type))return;let o=(0,m.getAtomValue)(r.lastPartUpdatedAt),a=(0,m.getAtomValue)(r.currentPartKey),s=e,l=s.id;Date.now()-o>=g?i&&s.createdAt&&i.createdAt&&!(s.createdAt>=i.createdAt)||(n.setPartKey(l),n.setLastPartUpdate(s)):a===l&&n.setLastPartUpdate(s)},[e,t])}e.s(["useMaybeUpdateLoader",()=>v],884284),e.s(["GetOrRequestIntegrationV1",()=>rU],423814);var x=e.i(509473),y=e.i(486239),b=e.i(306283),w=e.i(236808);e.s(["useRichAssistantParts",()=>S],795970);var j=x,C=p,k=w;function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{openReportError:r}=(0,k.useReportAgentError)();return(0,C.useMemo)(()=>{let i=t.parts.map((i,o)=>{let a=e[i.type];if("parse-error"===i.type)return(0,j.jsx)(k.AgentNote,{title:"Response rendering failed",variant:"error",primaryAction:{text:"Report issue",onClick:()=>r("A parsing error occurred")},children:"Something went wrong parsing this response. Help us fix it by reporting the issue."},o);if(n)return a(i,o);let s=a(i,o);return s?(0,j.jsx)(k.RichPart,{...t,children:s},o):null}).filter(Boolean);return 0===i.length?null:i},[r,e,t,n])}e.s(["RichAssistantStepsCard",()=>r_],865408);var N=x,E=e.i(674523),D=e.i(906261),I=e.i(667660),A=e.i(434673),T=e.i(583965),M=e.i(726988),L=e.i(491320),P=e.i(520605),R=e.i(779647),_=e.i(183673),O=e.i(304649),F=e.i(65836),B=e.i(196269),V=e.i(926224),z=e.i(301331);e.i(563948);var H=e.i(407562),U=e.i(53223),G=e.i(745587),W=e.i(209819),q=e.i(472166),Z=e.i(92479),K=e.i(554912),$=e.i(762585),Y=e.i(972011),J=e.i(22061),Q=e.i(992879),X=p,ee=e.i(725415),et=e.i(449381),en=e.i(157357),er=e.i(316799),ei=e.i(768061),eo=e.i(324141),ea=e.i(710227),es=e.i(433743),el=e.i(128173),ec=w,eu=e.i(996174),ed=e.i(211976),ep=e.i(44337),eh=x,ef=e.i(403055),em=f,eg=p,ev=e.i(418929),ex=e.i(707827),ey=e.i(936096),eb=Y,ew=e.i(563152);let ej=(0,ey.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5 7.25H4.25V8.75H5H11H11.75V7.25H11H5Z" fill="currentColor"/>'),eC=(0,ey.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM8.75 4.75V4H7.25V4.75V7.875C7.25 8.18976 7.39819 8.48615 7.65 8.675L9.55 10.1L10.15 10.55L11.05 9.35L10.45 8.9L8.75 7.625V4.75Z" fill="currentColor"/>');e.s(["Clock",0,eC],29956);let ek=(0,ey.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.75 4H1V5.5H1.75H14.25H15V4H14.25H1.75ZM1.75 10.5H1V12H1.75H14.25H15V10.5H14.25H1.75Z" fill="currentColor"/>');var eS=e.i(199551),eN=e.i(922106),eE=e.i(641913),eD=e.i(244078),eI=e.i(819969),eA=e.i(758118),eT=e.i(365290),eM=e.i(571822),eL=e.i(535389),eP=e.i(997974),eR=e.i(89440),e_=e.i(675120),eO=e.i(176248),eF=p,eB=e.i(152076),eV=p;function ez(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,eV.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}let eH="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function eU(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function eG(e){return"nodeType"in e}function eW(e){var t,n;return e?eU(e)?e:eG(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function eq(e){let{Document:t}=eW(e);return e instanceof t}function eZ(e){return!eU(e)&&e instanceof eW(e).HTMLElement}function eK(e){return e instanceof eW(e).SVGElement}function e$(e){return e?eU(e)?e.document:eG(e)?eq(e)?e:eZ(e)||eK(e)?e.ownerDocument:document:document:document}let eY=eH?eV.useLayoutEffect:eV.useEffect;function eJ(e){let t=(0,eV.useRef)(e);return eY(()=>{t.current=e}),(0,eV.useCallback)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function eQ(){let e=(0,eV.useRef)(null);return[(0,eV.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,eV.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}function eX(e,t){void 0===t&&(t=[e]);let n=(0,eV.useRef)(e);return eY(()=>{n.current!==e&&(n.current=e)},t),n}function e0(e,t){let n=(0,eV.useRef)();return(0,eV.useMemo)(()=>{let t=e(n.current);return n.current=t,t},[...t])}function e1(e){let t=eJ(e),n=(0,eV.useRef)(null),r=(0,eV.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,r]}function e2(e){let t=(0,eV.useRef)();return(0,eV.useEffect)(()=>{t.current=e},[e]),t.current}let e5={};function e4(e,t){return(0,eV.useMemo)(()=>{if(t)return t;let n=null==e5[e]?0:e5[e]+1;return e5[e]=n,e+"-"+n},[e,t])}function e3(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>{for(let[r,i]of Object.entries(n)){let n=t[r];null!=n&&(t[r]=n+e*i)}return t},{...t})}}let e9=e3(1),e7=e3(-1);function e6(e){return"clientX"in e&&"clientY"in e}function e8(e){if(!e)return!1;let{KeyboardEvent:t}=eW(e.target);return t&&e instanceof t}function te(e){if(!e)return!1;let{TouchEvent:t}=eW(e.target);return t&&e instanceof t}function tt(e){if(te(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return e6(e)?{x:e.clientX,y:e.clientY}:null}let tn=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[tn.Translate.toString(e),tn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),tr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ti(e){return e.matches(tr)?e:e.querySelector(tr)}e.s(["CSS",()=>tn,"add",()=>e9,"canUseDOM",()=>eH,"findFirstFocusableNode",()=>ti,"getEventCoordinates",()=>tt,"getOwnerDocument",()=>e$,"getWindow",()=>eW,"isDocument",()=>eq,"isHTMLElement",()=>eZ,"isKeyboardEvent",()=>e8,"isNode",()=>eG,"isSVGElement",()=>eK,"isWindow",()=>eU,"subtract",()=>e7,"useCombinedRefs",()=>ez,"useEvent",()=>eJ,"useInterval",()=>eQ,"useIsomorphicLayoutEffect",()=>eY,"useLatestValue",()=>eX,"useLazyMemo",()=>e0,"useNodeRef",()=>e1,"usePrevious",()=>e2,"useUniqueId",()=>e4],249082);var to=p;let ta={display:"none"};function ts(e){let{id:t,value:n}=e;return to.default.createElement("div",{id:t,style:ta},n)}function tl(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e,i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return to.default.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function tc(){let[e,t]=(0,to.useState)("");return{announce:(0,to.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}let tu=(0,eF.createContext)(null);function td(e){let t=(0,eF.useContext)(tu);(0,eF.useEffect)(()=>{if(!t)throw Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function tp(){let[e]=(0,eF.useState)(()=>new Set),t=(0,eF.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,eF.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}let th={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},tf={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function tm(e){let{announcements:t=tf,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=th}=e,{announce:o,announcement:a}=tc(),s=e4("DndLiveRegion"),[l,c]=(0,eF.useState)(!1);if((0,eF.useEffect)(()=>{c(!0)},[]),td((0,eF.useMemo)(()=>({onDragStart(e){let{active:n}=e;o(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&o(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;o(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;o(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;o(t.onDragCancel({active:n,over:r}))}}),[o,t])),!l)return null;let u=eF.default.createElement(eF.default.Fragment,null,eF.default.createElement(ts,{id:r,value:i.draggable}),eF.default.createElement(tl,{id:s,announcement:a}));return n?(0,eB.createPortal)(u,n):u}function tg(){}function tv(e,t){return(0,eF.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function tx(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,eF.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(n||(n={}));let ty=Object.freeze({x:0,y:0});function tb(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function tw(e,t){let n=tt(e);if(!n)return"0 0";let r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function tj(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function tC(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function tk(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function tS(e,t){if(!e||0===e.length)return null;let[n]=e;return t?n[t]:n}function tN(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}let tE=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=tN(t,t.left,t.top),o=[];for(let e of r){let{id:t}=e,r=n.get(t);if(r){let n=tb(tN(r),i);o.push({id:t,data:{droppableContainer:e,value:n}})}}return o.sort(tj)},tD=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=tk(t),o=[];for(let e of r){let{id:t}=e,r=n.get(t);if(r){let n=tk(r),a=Number((i.reduce((e,t,r)=>e+tb(n[r],t),0)/4).toFixed(4));o.push({id:t,data:{droppableContainer:e,value:a}})}}return o.sort(tj)};function tI(e,t){let n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=i-r,s=o-n;if(r<i&&n<o){let n=t.width*t.height,r=e.width*e.height,i=a*s;return Number((i/(n+r-i)).toFixed(4))}return 0}let tA=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=[];for(let e of r){let{id:r}=e,o=n.get(r);if(o){let n=tI(o,t);n>0&&i.push({id:r,data:{droppableContainer:e,value:n}})}}return i.sort(tC)};function tT(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function tM(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ty}let tL=function(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}(1);function tP(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function tR(e,t,n){let r=tP(t);if(!r)return e;let{scaleX:i,scaleY:o,x:a,y:s}=r,l=e.left-a-(1-i)*parseFloat(n),c=e.top-s-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,d=o?e.height/o:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}let t_={ignoreTransform:!1};function tO(e,t){void 0===t&&(t=t_);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:r}=eW(e).getComputedStyle(e);t&&(n=tR(n,t,r))}let{top:r,left:i,width:o,height:a,bottom:s,right:l}=n;return{top:r,left:i,width:o,height:a,bottom:s,right:l}}function tF(e){return tO(e,{ignoreTransform:!0})}function tB(e){let t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function tV(e,t){return void 0===t&&(t=eW(e).getComputedStyle(e)),"fixed"===t.position}function tz(e,t){void 0===t&&(t=eW(e).getComputedStyle(e));let n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let r=t[e];return"string"==typeof r&&n.test(r)})}function tH(e,t){let n=[];function r(i){if(null!=t&&n.length>=t||!i)return n;if(eq(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!eZ(i)||eK(i)||n.includes(i))return n;let o=eW(e).getComputedStyle(i);return(i!==e&&tz(i,o)&&n.push(i),tV(i,o))?n:r(i.parentNode)}return e?r(e):n}function tU(e){let[t]=tH(e,1);return null!=t?t:null}function tG(e){return eH&&e?eU(e)?e:eG(e)?eq(e)||e===e$(e).scrollingElement?window:eZ(e)?e:null:null:null}function tW(e){return eU(e)?e.scrollX:e.scrollLeft}function tq(e){return eU(e)?e.scrollY:e.scrollTop}function tZ(e){return{x:tW(e),y:tq(e)}}function tK(e){return!!eH&&!!e&&e===document.scrollingElement}function t$(e){let t={x:0,y:0},n=tK(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x;return{isTop:i,isLeft:o,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(r||(r={}));let tY={x:.2,y:.2};function tJ(e,t,n,i,o){let{top:a,left:s,right:l,bottom:c}=n;void 0===i&&(i=10),void 0===o&&(o=tY);let{isTop:u,isBottom:d,isLeft:p,isRight:h}=t$(e),f={x:0,y:0},m={x:0,y:0},g={height:t.height*o.y,width:t.width*o.x};return!u&&a<=t.top+g.height?(f.y=r.Backward,m.y=i*Math.abs((t.top+g.height-a)/g.height)):!d&&c>=t.bottom-g.height&&(f.y=r.Forward,m.y=i*Math.abs((t.bottom-g.height-c)/g.height)),!h&&l>=t.right-g.width?(f.x=r.Forward,m.x=i*Math.abs((t.right-g.width-l)/g.width)):!p&&s<=t.left+g.width&&(f.x=r.Backward,m.x=i*Math.abs((t.left+g.width-s)/g.width)),{direction:f,speed:m}}function tQ(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function tX(e){return e.reduce((e,t)=>e9(e,tZ(t)),ty)}function t0(e,t){if(void 0===t&&(t=tO),!e)return;let{top:n,left:r,bottom:i,right:o}=t(e);tU(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let t1=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+tW(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+tq(t),0)}]];class t2{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=tH(t),r=tX(n);for(let[t,i,o]of(this.rect={...e},this.width=e.width,this.height=e.height,t1))for(let e of i)Object.defineProperty(this,e,{get:()=>{let i=o(n),a=r[t]-i;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class t5{add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}}function t4(e){let{EventTarget:t}=eW(e);return e instanceof t?e:e$(e)}function t3(e,t){let n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function t9(e){e.preventDefault()}function t7(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(i||(i={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(o||(o={}));let t6={start:[o.Space,o.Enter],cancel:[o.Esc],end:[o.Space,o.Enter,o.Tab]},t8=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case o.Right:return{...n,x:n.x+25};case o.Left:return{...n,x:n.x-25};case o.Down:return{...n,y:n.y+25};case o.Up:return{...n,y:n.y-25}}};class ne{attach(){this.handleStart(),this.windowListeners.add(i.Resize,this.handleCancel),this.windowListeners.add(i.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(i.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&t0(n),t(ty)}handleKeyDown(e){if(e8(e)){let{active:t,context:n,options:r}=this.props,{keyboardCodes:i=t6,coordinateGetter:a=t8,scrollBehavior:s="smooth"}=r,{code:l}=e;if(i.end.includes(l))return void this.handleEnd(e);if(i.cancel.includes(l))return void this.handleCancel(e);let{collisionRect:c}=n.current,u=c?{x:c.left,y:c.top}:ty;this.referenceCoordinates||(this.referenceCoordinates=u);let d=a(e,{active:t,context:n.current,currentCoordinates:u});if(d){let t=e7(d,u),r={x:0,y:0},{scrollableAncestors:i}=n.current;for(let n of i){let i=e.code,{isTop:a,isRight:l,isLeft:c,isBottom:u,maxScroll:p,minScroll:h}=t$(n),f=tQ(n),m={x:Math.min(i===o.Right?f.right-f.width/2:f.right,Math.max(i===o.Right?f.left:f.left+f.width/2,d.x)),y:Math.min(i===o.Down?f.bottom-f.height/2:f.bottom,Math.max(i===o.Down?f.top:f.top+f.height/2,d.y))},g=i===o.Right&&!l||i===o.Left&&!c,v=i===o.Down&&!u||i===o.Up&&!a;if(g&&m.x!==d.x){let e=n.scrollLeft+t.x,a=i===o.Right&&e<=p.x||i===o.Left&&e>=h.x;if(a&&!t.y)return void n.scrollTo({left:e,behavior:s});a?r.x=n.scrollLeft-e:r.x=i===o.Right?n.scrollLeft-p.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:s});break}if(v&&m.y!==d.y){let e=n.scrollTop+t.y,a=i===o.Down&&e<=p.y||i===o.Up&&e>=h.y;if(a&&!t.x)return void n.scrollTo({top:e,behavior:s});a?r.y=n.scrollTop-e:r.y=i===o.Down?n.scrollTop-p.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,e9(e7(d,this.referenceCoordinates),r))}}}handleMove(e,t){let{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new t5(e$(t)),this.windowListeners=new t5(eW(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}}function nt(e){return!!(e&&"distance"in e)}function nn(e){return!!(e&&"delay"in e)}ne.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=t6,onActivation:i}=t,{active:o}=n,{code:a}=e.nativeEvent;if(r.start.includes(a)){let t=o.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class nr{attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(i.Resize,this.handleCancel),this.windowListeners.add(i.DragStart,t9),this.windowListeners.add(i.VisibilityChange,this.handleCancel),this.windowListeners.add(i.ContextMenu,t9),this.documentListeners.add(i.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(nn(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(nt(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(i.Click,t7,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(i.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:n,initialCoordinates:r,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!r)return;let s=null!=(t=tt(e))?t:ty,l=e7(r,s);if(!n&&a){if(nt(a)){if(null!=a.tolerance&&t3(l,a.tolerance))return this.handleCancel();if(t3(l,a.distance))return this.handleStart()}return nn(a)&&t3(l,a.tolerance)?this.handleCancel():void this.handlePending(a,l)}e.cancelable&&e.preventDefault(),o(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===o.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}constructor(e,t,n){var r;void 0===n&&(n=t4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:i}=e,{target:o}=i;this.props=e,this.events=t,this.document=e$(o),this.documentListeners=new t5(this.document),this.listeners=new t5(n),this.windowListeners=new t5(eW(o)),this.initialCoordinates=null!=(r=tt(i))?r:ty,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}}let ni={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class no extends nr{constructor(e){let{event:t}=e;super(e,ni,e$(t.target))}}no.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!!n.isPrimary&&0===n.button&&(null==r||r({event:n}),!0)}}];let na={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(a||(a={}));class ns extends nr{constructor(e){super(e,na,e$(e.event.target))}}ns.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==a.RightClick&&(null==r||r({event:n}),!0)}}];let nl={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class nc extends nr{static setup(){return window.addEventListener(nl.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(nl.move.name,e)};function e(){}}constructor(e){super(e,nl)}}function nu(e){let{acceleration:t,activator:n=s.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:a=5,order:c=l.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:p,delta:h,threshold:f}=e,m=np({delta:h,disabled:!o}),[g,v]=eQ(),x=(0,eF.useRef)({x:0,y:0}),y=(0,eF.useRef)({x:0,y:0}),b=(0,eF.useMemo)(()=>{switch(n){case s.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case s.DraggableRect:return i}},[n,i,u]),w=(0,eF.useRef)(null),j=(0,eF.useCallback)(()=>{let e=w.current;if(!e)return;let t=x.current.x*y.current.x,n=x.current.y*y.current.y;e.scrollBy(t,n)},[]),C=(0,eF.useMemo)(()=>c===l.TreeOrder?[...d].reverse():d,[c,d]);(0,eF.useEffect)(()=>{if(!o||!d.length||!b)return void v();for(let e of C){if((null==r?void 0:r(e))===!1)continue;let n=p[d.indexOf(e)];if(!n)continue;let{direction:i,speed:o}=tJ(e,n,b,t,f);for(let e of["x","y"])m[e][i[e]]||(o[e]=0,i[e]=0);if(o.x>0||o.y>0){v(),w.current=e,g(j,a),x.current=o,y.current=i;return}}x.current={x:0,y:0},y.current={x:0,y:0},v()},[t,j,r,v,o,a,JSON.stringify(b),JSON.stringify(m),g,d,C,p,JSON.stringify(f)])}nc.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t,{touches:i}=n;return!(i.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(s||(s={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(l||(l={}));let nd={x:{[r.Backward]:!1,[r.Forward]:!1},y:{[r.Backward]:!1,[r.Forward]:!1}};function np(e){let{delta:t,disabled:n}=e,i=e2(t);return e0(e=>{if(n||!i||!e)return nd;let o={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[r.Backward]:e.x[r.Backward]||-1===o.x,[r.Forward]:e.x[r.Forward]||1===o.x},y:{[r.Backward]:e.y[r.Backward]||-1===o.y,[r.Forward]:e.y[r.Forward]||1===o.y}}},[n,t,i])}function nh(e,t){let n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return e0(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}function nf(e,t){return(0,eF.useMemo)(()=>e.reduce((e,n)=>{let{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,n)}))]},[]),[e,t])}!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(c||(c={})),function(e){e.Optimized="optimized"}(u||(u={}));let nm=new Map;function ng(e,t){let{dragging:n,dependencies:r,config:i}=t,[o,a]=(0,eF.useState)(null),{frequency:s,measure:l,strategy:u}=i,d=(0,eF.useRef)(e),p=v(),h=eX(p),f=(0,eF.useCallback)(function(e){void 0===e&&(e=[]),h.current||a(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),m=(0,eF.useRef)(null),g=e0(t=>{if(p&&!n)return nm;if(!t||t===nm||d.current!==e||null!=o){let t=new Map;for(let n of e){if(!n)continue;if(o&&o.length>0&&!o.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}let e=n.node.current,r=e?new t2(l(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,o,n,p,l]);return(0,eF.useEffect)(()=>{d.current=e},[e]),(0,eF.useEffect)(()=>{p||f()},[n,p]),(0,eF.useEffect)(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),(0,eF.useEffect)(()=>{p||"number"!=typeof s||null!==m.current||(m.current=setTimeout(()=>{f(),m.current=null},s))},[s,p,f,...r]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:null!=o};function v(){switch(u){case c.Always:return!1;case c.BeforeDragging:return n;default:return!n}}}function nv(e,t){return e0(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function nx(e,t){return nv(e,t)}function ny(e){let{callback:t,disabled:n}=e,r=eJ(t),i=(0,eF.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(r)},[r,n]);return(0,eF.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}function nb(e){let{callback:t,disabled:n}=e,r=eJ(t),i=(0,eF.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(r)},[n]);return(0,eF.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}function nw(e){return new t2(tO(e),e)}function nj(e,t,n){void 0===t&&(t=nw);let[r,i]=(0,eF.useState)(null);function o(){i(r=>{if(!e)return null;if(!1===e.isConnected){var i;return null!=(i=null!=r?r:n)?i:null}let o=t(e);return JSON.stringify(r)===JSON.stringify(o)?r:o})}let a=ny({callback(t){if(e)for(let n of t){let{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){o();break}}}}),s=nb({callback:o});return eY(()=>{o(),e?(null==s||s.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==a||a.disconnect())},[e]),r}function nC(e){let t=nv(e);return tM(e,t)}let nk=[];function nS(e){let t=(0,eF.useRef)(e),n=e0(n=>e?n&&n!==nk&&e&&t.current&&e.parentNode===t.current.parentNode?n:tH(e):nk,[e]);return(0,eF.useEffect)(()=>{t.current=e},[e]),n}function nN(e){let[t,n]=(0,eF.useState)(null),r=(0,eF.useRef)(e),i=(0,eF.useCallback)(e=>{let t=tG(e.target);t&&n(e=>e?(e.set(t,tZ(t)),new Map(e)):null)},[]);return(0,eF.useEffect)(()=>{let t=r.current;if(e!==t){o(t);let a=e.map(e=>{let t=tG(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,tZ(t)]):null}).filter(e=>null!=e);n(a.length?new Map(a):null),r.current=e}return()=>{o(e),o(t)};function o(e){e.forEach(e=>{let t=tG(e);null==t||t.removeEventListener("scroll",i)})}},[i,e]),(0,eF.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>e9(e,t),ty):tX(e):ty,[e,t])}function nE(e,t){void 0===t&&(t=[]);let n=(0,eF.useRef)(null);return(0,eF.useEffect)(()=>{n.current=null},t),(0,eF.useEffect)(()=>{let t=e!==ty;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?e7(e,n.current):ty}function nD(e){(0,eF.useEffect)(()=>{if(!eH)return;let t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}function nI(e,t){return(0,eF.useMemo)(()=>e.reduce((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=e=>{i(e,t)},e},{}),[e,t])}function nA(e){return(0,eF.useMemo)(()=>e?tB(e):null,[e])}let nT=[];function nM(e,t){void 0===t&&(t=tO);let[n]=e,r=nA(n?eW(n):null),[i,o]=(0,eF.useState)(nT);function a(){o(()=>e.length?e.map(e=>tK(e)?r:new t2(t(e),e)):nT)}let s=nb({callback:a});return eY(()=>{null==s||s.disconnect(),a(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),i}function nL(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return eZ(t)?t:e}function nP(e){let{measure:t}=e,[n,r]=(0,eF.useState)(null),i=nb({callback:(0,eF.useCallback)(e=>{for(let{target:n}of e)if(eZ(n)){r(e=>{let r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),[o,a]=e1((0,eF.useCallback)(e=>{let n=nL(e);null==i||i.disconnect(),n&&(null==i||i.observe(n)),r(n?t(n):null)},[t,i]));return(0,eF.useMemo)(()=>({nodeRef:o,rect:n,setRef:a}),[n,o,a])}let nR=[{sensor:no,options:{}},{sensor:ne,options:{}}],n_={current:{}},nO={draggable:{measure:tF},droppable:{measure:tF,strategy:c.WhileDragging,frequency:u.Optimized},dragOverlay:{measure:tO}};class nF extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}let nB={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nF,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nO,measureDroppableContainers:tg,windowRect:null,measuringScheduled:!1},nV={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tg,draggableNodes:new Map,over:null,measureDroppableContainers:tg},nz=(0,eF.createContext)(nV),nH=(0,eF.createContext)(nB);function nU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nF}}}function nG(e,t){switch(t.type){case n.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case n.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case n.DragEnd:case n.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case n.RegisterDroppable:{let{element:n}=t,{id:r}=n,i=new nF(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case n.SetDroppableDisabled:{let{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;let a=new nF(e.droppable.containers);return a.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case n.UnregisterDroppable:{let{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;let o=new nF(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function nW(e){let{disabled:t}=e,{active:n,activatorEvent:r,draggableNodes:i}=(0,eF.useContext)(nz),o=e2(r),a=e2(null==n?void 0:n.id);return(0,eF.useEffect)(()=>{if(!t&&!r&&o&&null!=a){if(!e8(o)||document.activeElement===o.target)return;let e=i.get(a);if(!e)return;let{activatorNode:t,node:n}=e;(t.current||n.current)&&requestAnimationFrame(()=>{for(let e of[t.current,n.current]){if(!e)continue;let t=ti(e);if(t){t.focus();break}}})}},[r,t,i,a,o]),null}function nq(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}function nZ(e){return(0,eF.useMemo)(()=>({draggable:{...nO.draggable,...null==e?void 0:e.draggable},droppable:{...nO.droppable,...null==e?void 0:e.droppable},dragOverlay:{...nO.dragOverlay,...null==e?void 0:e.dragOverlay}}),[null==e?void 0:e.draggable,null==e?void 0:e.droppable,null==e?void 0:e.dragOverlay])}function nK(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e,o=(0,eF.useRef)(!1),{x:a,y:s}="boolean"==typeof i?{x:i,y:i}:i;eY(()=>{if(!a&&!s||!t){o.current=!1;return}if(o.current||!r)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let i=tM(n(e),r);if(a||(i.x=0),s||(i.y=0),o.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){let t=tU(e);t&&t.scrollBy({top:i.y,left:i.x})}},[t,a,s,r,n])}let n$=(0,eF.createContext)({...ty,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(d||(d={}));let nY=(0,eF.memo)(function(e){var t,r,i,o;let{id:a,accessibility:s,autoScroll:l=!0,children:c,sensors:u=nR,collisionDetection:p=tA,measuring:h,modifiers:f,...m}=e,[g,v]=(0,eF.useReducer)(nG,void 0,nU),[x,y]=tp(),[b,w]=(0,eF.useState)(d.Uninitialized),j=b===d.Initialized,{draggable:{active:C,nodes:k,translate:S},droppable:{containers:N}}=g,E=null!=C?k.get(C):null,D=(0,eF.useRef)({initial:null,translated:null}),I=(0,eF.useMemo)(()=>{var e;return null!=C?{id:C,data:null!=(e=null==E?void 0:E.data)?e:n_,rect:D}:null},[C,E]),A=(0,eF.useRef)(null),[T,M]=(0,eF.useState)(null),[L,P]=(0,eF.useState)(null),R=eX(m,Object.values(m)),_=e4("DndDescribedBy",a),O=(0,eF.useMemo)(()=>N.getEnabled(),[N]),F=nZ(h),{droppableRects:B,measureDroppableContainers:V,measuringScheduled:z}=ng(O,{dragging:j,dependencies:[S.x,S.y],config:F.droppable}),H=nh(k,C),U=(0,eF.useMemo)(()=>L?tt(L):null,[L]),G=ew(),W=nx(H,F.draggable.measure);nK({activeNode:null!=C?k.get(C):null,config:G.layoutShiftCompensation,initialRect:W,measure:F.draggable.measure});let q=nj(H,F.draggable.measure,W),Z=nj(H?H.parentElement:null),K=(0,eF.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),$=N.getNodeFor(null==(t=K.current.over)?void 0:t.id),Y=nP({measure:F.dragOverlay.measure}),J=null!=(r=Y.nodeRef.current)?r:H,Q=j?null!=(i=Y.rect)?i:q:null,X=!!(Y.nodeRef.current&&Y.rect),ee=nC(X?null:q),et=nA(J?eW(J):null),en=nS(j?null!=$?$:H:null),er=nM(en),ei=nq(f,{transform:{x:S.x-ee.x,y:S.y-ee.y,scaleX:1,scaleY:1},activatorEvent:L,active:I,activeNodeRect:q,containerNodeRect:Z,draggingNodeRect:Q,over:K.current.over,overlayNodeRect:Y.rect,scrollableAncestors:en,scrollableAncestorRects:er,windowRect:et}),eo=U?e9(U,S):null,ea=nN(en),es=nE(ea),el=nE(ea,[q]),ec=e9(ei,es),eu=Q?tL(Q,ei):null,ed=I&&eu?p({active:I,collisionRect:eu,droppableRects:B,droppableContainers:O,pointerCoordinates:eo}):null,ep=tS(ed,"id"),[eh,ef]=(0,eF.useState)(null),em=tT(X?ei:e9(ei,el),null!=(o=null==eh?void 0:eh.rect)?o:null,q),eg=(0,eF.useRef)(null),ev=(0,eF.useCallback)((e,t)=>{let{sensor:r,options:i}=t;if(null==A.current)return;let o=k.get(A.current);if(!o)return;let a=e.nativeEvent,s=new r({active:A.current,activeNode:o,event:a,options:i,context:K,onAbort(e){if(!k.get(e))return;let{onDragAbort:t}=R.current,n={id:e};null==t||t(n),x({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!k.get(e))return;let{onDragPending:i}=R.current,o={id:e,constraint:t,initialCoordinates:n,offset:r};null==i||i(o),x({type:"onDragPending",event:o})},onStart(e){let t=A.current;if(null==t)return;let r=k.get(t);if(!r)return;let{onDragStart:i}=R.current,o={activatorEvent:a,active:{id:t,data:r.data,rect:D}};(0,eB.unstable_batchedUpdates)(()=>{null==i||i(o),w(d.Initializing),v({type:n.DragStart,initialCoordinates:e,active:t}),x({type:"onDragStart",event:o}),M(eg.current),P(a)})},onMove(e){v({type:n.DragMove,coordinates:e})},onEnd:l(n.DragEnd),onCancel:l(n.DragCancel)});function l(e){return async function(){let{active:t,collisions:r,over:i,scrollAdjustedTranslate:o}=K.current,s=null;if(t&&o){let{cancelDrop:l}=R.current;s={activatorEvent:a,active:t,collisions:r,delta:o,over:i},e===n.DragEnd&&"function"==typeof l&&await Promise.resolve(l(s))&&(e=n.DragCancel)}A.current=null,(0,eB.unstable_batchedUpdates)(()=>{v({type:e}),w(d.Uninitialized),ef(null),M(null),P(null),eg.current=null;let t=e===n.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=R.current[t];null==e||e(s),x({type:t,event:s})}})}}eg.current=s},[k]),ex=nf(u,(0,eF.useCallback)((e,t)=>(n,r)=>{let i=n.nativeEvent,o=k.get(r);if(null!==A.current||!o||i.dndKit||i.defaultPrevented)return;let a={active:o};!0===e(n,t.options,a)&&(i.dndKit={capturedBy:t.sensor},A.current=r,ev(n,t))},[k,ev]));nD(u),eY(()=>{q&&b===d.Initializing&&w(d.Initialized)},[q,b]),(0,eF.useEffect)(()=>{let{onDragMove:e}=R.current,{active:t,activatorEvent:n,collisions:r,over:i}=K.current;if(!t||!n)return;let o={active:t,activatorEvent:n,collisions:r,delta:{x:ec.x,y:ec.y},over:i};(0,eB.unstable_batchedUpdates)(()=>{null==e||e(o),x({type:"onDragMove",event:o})})},[ec.x,ec.y]),(0,eF.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=K.current;if(!e||null==A.current||!t||!i)return;let{onDragOver:o}=R.current,a=r.get(ep),s=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:s};(0,eB.unstable_batchedUpdates)(()=>{ef(s),null==o||o(l),x({type:"onDragOver",event:l})})},[ep]),eY(()=>{K.current={activatorEvent:L,active:I,activeNode:H,collisionRect:eu,collisions:ed,droppableRects:B,draggableNodes:k,draggingNode:J,draggingNodeRect:Q,droppableContainers:N,over:eh,scrollableAncestors:en,scrollAdjustedTranslate:ec},D.current={initial:Q,translated:eu}},[I,H,ed,eu,k,J,Q,B,N,eh,en,ec]),nu({...G,delta:S,draggingRect:eu,pointerCoordinates:eo,scrollableAncestors:en,scrollableAncestorRects:er});let ey=(0,eF.useMemo)(()=>({active:I,activeNode:H,activeNodeRect:q,activatorEvent:L,collisions:ed,containerNodeRect:Z,dragOverlay:Y,draggableNodes:k,droppableContainers:N,droppableRects:B,over:eh,measureDroppableContainers:V,scrollableAncestors:en,scrollableAncestorRects:er,measuringConfiguration:F,measuringScheduled:z,windowRect:et}),[I,H,q,L,ed,Z,Y,k,N,B,eh,V,en,er,F,z,et]),eb=(0,eF.useMemo)(()=>({activatorEvent:L,activators:ex,active:I,activeNodeRect:q,ariaDescribedById:{draggable:_},dispatch:v,draggableNodes:k,over:eh,measureDroppableContainers:V}),[L,ex,I,q,v,_,k,eh,V]);return eF.default.createElement(tu.Provider,{value:y},eF.default.createElement(nz.Provider,{value:eb},eF.default.createElement(nH.Provider,{value:ey},eF.default.createElement(n$.Provider,{value:em},c)),eF.default.createElement(nW,{disabled:(null==s?void 0:s.restoreFocus)===!1})),eF.default.createElement(tm,{...s,hiddenTextDescribedById:_}));function ew(){let e=(null==T?void 0:T.autoScrollEnabled)===!1,t="object"==typeof l?!1===l.enabled:!1===l,n=j&&!e&&!t;return"object"==typeof l?{...l,enabled:n}:{enabled:n}}}),nJ=(0,eF.createContext)(null),nQ="button",nX="Draggable";function n0(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e,o=e4(nX),{activators:a,activatorEvent:s,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:p}=(0,eF.useContext)(nz),{role:h=nQ,roleDescription:f="draggable",tabIndex:m=0}=null!=i?i:{},g=(null==l?void 0:l.id)===t,v=(0,eF.useContext)(g?n$:nJ),[x,y]=e1(),[b,w]=e1(),j=nI(a,t),C=eX(n);return eY(()=>(d.set(t,{id:t,key:o,node:x,activatorNode:b,data:C}),()=>{let e=d.get(t);e&&e.key===o&&d.delete(t)}),[d,t]),{active:l,activatorEvent:s,activeNodeRect:c,attributes:(0,eF.useMemo)(()=>({role:h,tabIndex:m,"aria-disabled":r,"aria-pressed":!!g&&h===nQ||void 0,"aria-roledescription":f,"aria-describedby":u.draggable}),[r,h,m,g,f,u.draggable]),isDragging:g,listeners:r?void 0:j,node:x,over:p,setNodeRef:y,setActivatorNodeRef:w,transform:v}}function n1(){return(0,eF.useContext)(nH)}let n2="Droppable",n5={timeout:25};function n4(e){let{data:t,disabled:r=!1,id:i,resizeObserverConfig:o}=e,a=e4(n2),{active:s,dispatch:l,over:c,measureDroppableContainers:u}=(0,eF.useContext)(nz),d=(0,eF.useRef)({disabled:r}),p=(0,eF.useRef)(!1),h=(0,eF.useRef)(null),f=(0,eF.useRef)(null),{disabled:m,updateMeasurementsFor:g,timeout:v}={...n5,...o},x=eX(null!=g?g:i),y=nb({callback:(0,eF.useCallback)(()=>{if(!p.current){p.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),f.current=null},v)},[v]),disabled:m||!s}),[b,w]=e1((0,eF.useCallback)((e,t)=>{y&&(t&&(y.unobserve(t),p.current=!1),e&&y.observe(e))},[y])),j=eX(t);return(0,eF.useEffect)(()=>{y&&b.current&&(y.disconnect(),p.current=!1,y.observe(b.current))},[b,y]),(0,eF.useEffect)(()=>(l({type:n.RegisterDroppable,element:{id:i,key:a,disabled:r,node:b,rect:h,data:j}}),()=>l({type:n.UnregisterDroppable,key:a,id:i})),[i]),(0,eF.useEffect)(()=>{r!==d.current.disabled&&(l({type:n.SetDroppableDisabled,id:i,key:a,disabled:r}),d.current.disabled=r)},[i,a,r,l]),{active:s,rect:h,isOver:(null==c?void 0:c.id)===i,node:b,over:c,setNodeRef:w}}let n3={position:"fixed",touchAction:"none"},n9=e=>e8(e)?"transform 250ms ease":void 0,n7=((e,t)=>{let{as:n,activatorEvent:r,adjustScale:i,children:o,className:a,rect:s,style:l,transform:c,transition:u=n9}=e;if(!s)return null;let d=i?c:{...c,scaleX:1,scaleY:1},p={...n3,width:s.width,height:s.height,top:s.top,left:s.left,transform:tn.Transform.toString(d),transformOrigin:i&&r?tw(r,s):void 0,transition:"function"==typeof u?u(r):u,...l};return eF.default.createElement(n,{className:a,style:p,ref:t},o)},{duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:tn.Transform.toString(t)},{transform:tn.Transform.toString(n)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:n,dragOverlay:r}=e,i={},{styles:o,className:a}=t;if(null!=o&&o.active)for(let[e,t]of Object.entries(o.active))void 0!==t&&(i[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=o&&o.dragOverlay)for(let[e,t]of Object.entries(o.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=a&&a.active&&n.node.classList.add(a.active),null!=a&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(let[e,t]of Object.entries(i))n.node.style.setProperty(e,t);null!=a&&a.active&&n.node.classList.remove(a.active)}})});e.s(["DndContext",()=>nY,"KeyboardCode",()=>o,"KeyboardSensor",()=>ne,"MouseSensor",()=>ns,"PointerSensor",()=>no,"TouchSensor",()=>nc,"closestCenter",()=>tE,"closestCorners",()=>tD,"getClientRect",()=>tO,"getFirstCollision",()=>tS,"getScrollableAncestors",()=>tH,"useDndContext",()=>n1,"useDraggable",()=>n0,"useDroppable",()=>n4,"useSensor",()=>tv,"useSensors",()=>tx],563044);var n6=p;function n8(e,t,n){let r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function re(e,t){return e.reduce((e,n,r)=>{let i=t.get(n);return i&&(e[r]=i),e},Array(e.length))}function rt(e){return null!==e&&e>=0}function rn(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function rr(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}let ri=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e,o=n8(t,r,n),a=t[i],s=o[i];return s&&a?{x:s.left-a.left,y:s.top-a.top,scaleX:s.width/a.width,scaleY:s.height/a.height}:null},ro={scaleX:1,scaleY:1},ra=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:a}=e,s=null!=(t=o[n])?t:r;if(!s)return null;if(i===n){let e=o[a];return e?{x:0,y:n<a?e.top+e.height-(s.top+s.height):e.top-s.top,...ro}:null}let l=rs(o,i,n);return i>n&&i<=a?{x:0,y:-s.height-l,...ro}:i<n&&i>=a?{x:0,y:s.height+l,...ro}:{x:0,y:0,...ro}};function rs(e,t,n){let r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}let rl="Sortable",rc=n6.default.createContext({activeIndex:-1,containerId:rl,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ri,disabled:{draggable:!1,droppable:!1}});function ru(e){let{children:t,id:n,items:r,strategy:i=ri,disabled:o=!1}=e,{active:a,dragOverlay:s,droppableRects:l,over:c,measureDroppableContainers:u}=n1(),d=e4(rl,n),p=null!==s.rect,h=(0,n6.useMemo)(()=>r.map(e=>"object"==typeof e&&"id"in e?e.id:e),[r]),f=null!=a,m=a?h.indexOf(a.id):-1,g=c?h.indexOf(c.id):-1,v=(0,n6.useRef)(h),x=!rn(h,v.current),y=-1!==g&&-1===m||x,b=rr(o);eY(()=>{x&&f&&u(h)},[x,h,f,u]),(0,n6.useEffect)(()=>{v.current=h},[h]);let w=(0,n6.useMemo)(()=>({activeIndex:m,containerId:d,disabled:b,disableTransforms:y,items:h,overIndex:g,useDragOverlay:p,sortedRects:re(h,l),strategy:i}),[m,d,b.draggable,b.droppable,y,h,g,l,p,i]);return n6.default.createElement(rc.Provider,{value:w},t)}let rd=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return n8(n,r,i).indexOf(t)},rp=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:a,previousItems:s,previousContainerId:l,transition:c}=e;return!!c&&!!r&&(s===o||i!==a)&&(!!n||a!==i&&t===l)},rh={duration:200,easing:"ease"},rf="transform",rm=tn.Transition.toString({property:rf,duration:0,easing:"linear"}),rg={roleDescription:"sortable"};function rv(e){let{disabled:t,index:n,node:r,rect:i}=e,[o,a]=(0,n6.useState)(null),s=(0,n6.useRef)(n);return eY(()=>{if(!t&&n!==s.current&&r.current){let e=i.current;if(e){let t=tO(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&a(n)}}n!==s.current&&(s.current=n)},[t,n,r,i]),(0,n6.useEffect)(()=>{o&&a(null)},[o]),o}function rx(e){let{animateLayoutChanges:t=rp,attributes:n,disabled:r,data:i,getNewIndex:o=rd,id:a,strategy:s,resizeObserverConfig:l,transition:c=rh}=e,{items:u,containerId:d,activeIndex:p,disabled:h,disableTransforms:f,sortedRects:m,overIndex:g,useDragOverlay:v,strategy:x}=(0,n6.useContext)(rc),y=ry(r,h),b=u.indexOf(a),w=(0,n6.useMemo)(()=>({sortable:{containerId:d,index:b,items:u},...i}),[d,i,b,u]),j=(0,n6.useMemo)(()=>u.slice(u.indexOf(a)),[u,a]),{rect:C,node:k,isOver:S,setNodeRef:N}=n4({id:a,data:w,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...l}}),{active:E,activatorEvent:D,activeNodeRect:I,attributes:A,setNodeRef:T,listeners:M,isDragging:L,over:P,setActivatorNodeRef:R,transform:_}=n0({id:a,data:w,attributes:{...rg,...n},disabled:y.draggable}),O=ez(N,T),F=!!E,B=F&&!f&&rt(p)&&rt(g),V=!v&&L,z=V&&B?_:null,H=null!=s?s:x,U=B?null!=z?z:H({rects:m,activeNodeRect:I,activeIndex:p,overIndex:g,index:b}):null,G=rt(p)&&rt(g)?o({id:a,items:u,activeIndex:p,overIndex:g}):b,W=null==E?void 0:E.id,q=(0,n6.useRef)({activeId:W,items:u,newIndex:G,containerId:d}),Z=u!==q.current.items,K=t({active:E,containerId:d,isDragging:L,isSorting:F,id:a,index:b,items:u,newIndex:q.current.newIndex,previousItems:q.current.items,previousContainerId:q.current.containerId,transition:c,wasDragging:null!=q.current.activeId}),$=rv({disabled:!K,index:b,node:k,rect:C});return(0,n6.useEffect)(()=>{F&&q.current.newIndex!==G&&(q.current.newIndex=G),d!==q.current.containerId&&(q.current.containerId=d),u!==q.current.items&&(q.current.items=u)},[F,G,d,u]),(0,n6.useEffect)(()=>{if(W===q.current.activeId)return;if(null!=W&&null==q.current.activeId){q.current.activeId=W;return}let e=setTimeout(()=>{q.current.activeId=W},50);return()=>clearTimeout(e)},[W]),{active:E,activeIndex:p,attributes:A,data:w,rect:C,index:b,newIndex:G,items:u,isOver:S,isSorting:F,isDragging:L,listeners:M,node:k,overIndex:g,over:P,setNodeRef:O,setActivatorNodeRef:R,setDroppableNodeRef:N,setDraggableNodeRef:T,transform:null!=$?$:U,transition:Y()};function Y(){return $||Z&&q.current.newIndex===b?rm:(!V||e8(D))&&c&&(F||K)?tn.Transition.toString({...c,property:rf}):void 0}}function ry(e,t){var n,r;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}function rb(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let rw=[o.Down,o.Right,o.Up,o.Left],rj=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:a,over:s,scrollableAncestors:l}}=t;if(rw.includes(e.code)){if(e.preventDefault(),!n||!r)return;let t=[];a.getEnabled().forEach(n=>{if(!n||null!=n&&n.disabled)return;let a=i.get(n.id);if(a)switch(e.code){case o.Down:r.top<a.top&&t.push(n);break;case o.Up:r.top>a.top&&t.push(n);break;case o.Left:r.left>a.left&&t.push(n);break;case o.Right:r.left<a.left&&t.push(n)}});let c=tD({active:n,collisionRect:r,droppableRects:i,droppableContainers:t,pointerCoordinates:null}),u=tS(c,"id");if(u===(null==s?void 0:s.id)&&c.length>1&&(u=c[1].id),null!=u){let e=a.get(n.id),t=a.get(u),o=t?i.get(t.id):null,s=null==t?void 0:t.node.current;if(s&&o&&e&&t){let n=tH(s).some((e,t)=>l[t]!==e),i=rC(e,t),a=rk(e,t),c=n||!i?{x:0,y:0}:{x:a?r.width-o.width:0,y:a?r.height-o.height:0},u={x:o.left,y:o.top};return c.x&&c.y?u:e7(u,c)}}}};function rC(e,t){return!!rb(e)&&!!rb(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}function rk(e,t){return!!rb(e)&&!!rb(t)&&!!rC(e,t)&&e.data.current.sortable.index<t.data.current.sortable.index}function rS(e){let{chatId:t,submitQueuedPrompt:n}=e,r=(0,eI.getChatAtoms)(t),{atoms:i,actions:{setIsTodosWithQueueOpen:o}}=(0,ev.useCurrentChatPrompt)(),a=(0,em.useAtomValue)(i.isTodosWithQueueOpen),s=(0,em.useAtomValue)(r.isStreaming),l=(0,em.useAtomValue)(i.promptQueue),{completedList:c,notCompletedList:u,totalCount:d,isListComplete:p,totalDone:h,totalInProgress:f}=(0,em.useAtomValue)(i.todoList),m=f>0,g=(0,eg.useMemo)(()=>l.length>0?"".concat(l.length," prompt").concat(1===l.length?"":"s"," queued"):p?"".concat(d," tasks complete"):s?"Task ".concat(h+(m?f:0)," of ").concat(d," ").concat(m?"in progress":"complete"):d>0?"Task ".concat(h," of ").concat(d," complete"):null,[l.length,p,s,h,d,m,f]),v=(0,eg.useMemo)(()=>l.length>0?d>0?"".concat(d," tasks"):null:s?null:h===d&&d>0?"Done":d>0?"Paused":null,[s,l.length,d,h]),x=l.length>0,y=d>0&&d!==h,b=(0,eg.useMemo)(()=>y&&x&&a?"tasks":"",[y,x,a]),{topRef:w,bottomRef:j,showTopBorder:C,showBottomBorder:k,containerRef:S}=(0,eL.useScrollBorders)("vertical",{showInitialBorders:!0,dependencies:[b,a]});return(0,eh.jsx)(eD.Root,{type:"single",collapsible:!0,className:"w-full",value:a?"tasks":"",onValueChange:e=>{o("tasks"===e)},children:(0,eh.jsxs)(eD.Item,{value:"tasks",className:"w-full",children:[(0,eh.jsxs)(eD.Trigger,{className:(0,ef.cn)("group/trigger w-full flex items-center px-3 h-9 justify-between rounded-t-[12px] text-v0-gray-1000 rounded-b-[6px]","focus-visible:ring-offset-background outline-hidden has-focus-visible:ring-2 ring-v0-blue-700 ring-inset transition focus-visible:ring-2 focus-visible:ring-offset-1"),children:[(0,eh.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,eh.jsx)(ew.ChevronDownSmall,{className:(0,ef.cn)("transition-all shrink-0","rotate-[-90deg] group-data-[state=open]/trigger:rotate-0 duration-100")}),(0,eh.jsx)(e_.TransitionNode,{...e_.PRESETS.buttonContent,justify:"start",renderKey:"".concat(x,"-").concat(y),children:(0,eh.jsx)("span",{className:"text-label-13 font-medium whitespace-nowrap",children:g})})]}),(0,eh.jsx)("span",{className:"text-[13px] font-medium text-v0-gray-900",children:v})]}),(0,eh.jsx)(eD.Content,{className:(0,ef.cn)("overflow-hidden data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up",eM.default.content),children:(0,eh.jsxs)("div",{className:"relative overflow-hidden",children:[(0,eh.jsx)(eP.ScrollFade,{direction:"top",visible:C,orientation:"vertical",color:"muted"}),(0,eh.jsx)(eP.ScrollFade,{direction:"bottom",visible:k,orientation:"vertical",color:"muted"}),(0,eh.jsx)("div",{ref:S,tabIndex:-1,className:"max-h-[140px] overflow-y-scroll",style:{...(0,eA.visibleStylesIf)(a),...(0,eT.transitionStyles)(["opacity","filter"],{duration:300}),filter:"blur(".concat(3*!a,"px)")},children:(0,eh.jsxs)("div",{className:"px-3 pb-3 flex flex-col gap-2 relative",children:[(0,eh.jsx)(eP.ScrollMarker,{ref:w,side:"top",orientation:"vertical"}),x?(0,eh.jsx)(rN,{promptQueue:l,submitQueuedPrompt:n}):null,x&&y?(0,eh.jsx)("div",{className:"border-t border-v0-gray-200"}):null,y?(0,eh.jsxs)("div",{className:"flex flex-col gap-2",children:[h>0?(0,eh.jsx)(rI,{completedList:c,totalDone:h,isStreaming:s}):null,u.map((e,t)=>(0,eh.jsx)(rA,{item:e,isStreaming:s},t))]}):null,(0,eh.jsx)(eP.ScrollMarker,{ref:j,side:"bottom",orientation:"vertical"})]})})]})})]})})}function rN(e){let{promptQueue:t,submitQueuedPrompt:n}=e,{actions:{reorderPromptQueue:r}}=(0,ev.useCurrentChatPrompt)(),i=tx(tv(no),tv(ne,{coordinateGetter:rj})),o=e=>{let{active:t,over:n}=e;n&&t.id!==n.id&&r(t.id,n.id)};return(0,eh.jsx)(nY,{sensors:i,collisionDetection:tE,onDragEnd:o,children:(0,eh.jsx)(ru,{items:t.map(e=>e.id),strategy:ra,children:(0,eh.jsx)(e_.TransitionNode,{renderKey:"".concat(t.length),style:{width:"100%"},childClassName:"w-full overflow-hidden",children:(0,eh.jsx)("div",{className:"flex flex-col gap-1 group/prompt-queue overflow-hidden ",children:t.map(e=>(0,eh.jsx)(rE,{prompt:e,submitQueuedPrompt:n,isDragDisabled:t.length<2},e.id))})})})})}function rE(e){let{prompt:t,isDragDisabled:n,submitQueuedPrompt:r}=e,{attributes:i,listeners:o,setNodeRef:a,transform:s,isDragging:l,isSorting:c}=rx({id:t.id,disabled:n}),{actions:u,atoms:d}=(0,ev.useCurrentChatPrompt)(),p=(0,em.useAtomValue)(d.editingQueuedPrompt),h=(null==p?void 0:p.id)===t.id,f={transform:tn.Transform.toString(s),opacity:l&&c?.5:1,...c?(0,eT.transitionStyles)(["opacity","transform"],{duration:l?20:250}):{}},m=(0,eT.transitionStyles)(["opacity","scale"],{duration:150}),g=(0,eg.useMemo)(()=>n?"cursor-default":c?"cursor-grabbing":"cursor-grab",[n,c]);return(0,eh.jsxs)("div",{ref:a,style:{...f,animationDuration:"0.8s"},className:(0,ef.cn)("group relative flex items-center gap-2 group/prompt-queue-item",{"animate-pulse":h}),children:[(0,eh.jsxs)("div",{className:(0,ef.cn)("flex items-center gap-2 flex-1 overflow-hidden",g),...i,...o,children:[(0,eh.jsxs)("div",{className:"min-w-4 min-h-4 grid place-items-center justify-items-center text-v0-gray-500 group/prefix",children:[(0,eh.jsx)(ek,{className:(0,ef.cn)("grid-stack opacity-0 scale-75 ",{"group-hover/prefix:opacity-100 group-hover/prefix:scale-100":!n}),style:{...c?(0,eA.visibleStylesIf)(l):{},...m}}),(0,eh.jsx)(eC,{className:(0,ef.cn)("grid-stack",{"group-hover/prefix:opacity-0 group-hover/prefix:scale-75":!n}),style:{...c?(0,eA.visibleStylesIf)(!l):{},...m}})]}),(0,eh.jsx)("span",{className:"text-[13px] flex-1 truncate",children:(0,ev.getPlainTextFromQueuedMessage)(t)})]}),(0,eh.jsx)("div",{className:"flex items-center absolute right-0",children:(0,eh.jsxs)("div",{className:(0,ef.cn)("flex items-center opacity-0 gap-1 bg-v0-background-200","group-hover/prompt-queue-item:opacity-100 focus-within:opacity-100"),style:{...c?(0,eA.visibleStylesIf)(!1):{},...m},children:[(0,eh.jsx)("div",{className:"absolute w-[32px] left-[-32px] h-full bg-gradient-to-l from-muted to-transparent pointer-events-none"}),(0,eh.jsx)(rD,{onClick:()=>r(t),title:"Send prompt",children:(0,eh.jsx)(eE.ArrowUp,{})}),(0,eh.jsx)(rD,{onClick:()=>u.startEditingQueuedPrompt(t),title:"Edit queued prompt",children:(0,eh.jsx)(eS.PencilEdit,{})}),(0,eh.jsx)(rD,{onClick:()=>u.removePromptFromQueue(t.id),title:"Remove from queue",children:(0,eh.jsx)(eN.Trash,{})})]})})]})}function rD(e){let{children:t,onClick:n,title:r}=e;return(0,eh.jsx)(eO.Button,{className:"px-0 h-6 w-6 text-v0-gray-900 hover:text-v0-gray-1000 focus-visible:text-v0-gray-1000",size:"sm",variant:"ghost",type:"button",onClick:n,title:r,children:t})}function rI(e){let{completedList:t,totalDone:n,isStreaming:r}=e;return(0,eh.jsx)(eD.Root,{type:"single",collapsible:!0,className:"w-full",children:(0,eh.jsxs)(eD.Item,{value:"completed",children:[(0,eh.jsx)(eD.Trigger,{className:"group/completed flex items-center gap-2 text-[13px] w-full",children:(0,eh.jsx)(rA,{item:{task:"".concat(n," completed tasks"),status:"done"},isStreaming:r})}),(0,eh.jsx)(eD.Content,{className:"overflow-hidden data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up",children:(0,eh.jsx)("div",{className:"flex flex-col gap-1 pt-2",children:t.map((e,t)=>(0,eh.jsx)(rA,{item:e,prefix:(0,eh.jsx)(rL,{}),isStreaming:r},t))})})]})})}function rA(e){let{item:t,isStreaming:n,prefix:r}=e,{prefix:i}=(0,eg.useMemo)(()=>{switch(t.status){case"in-progress":return{prefix:n?(0,eh.jsx)(ex.Spinner,{size:16}):(0,eh.jsx)(ej,{})};case"todo":return{prefix:(0,eh.jsx)(rT,{})};case"done":return{prefix:(0,eh.jsx)(eb.CheckCircleFill,{})}}},[t.status,n]);return(0,eh.jsxs)("div",{className:rM({status:t.status}),children:[(0,eh.jsx)("div",{className:"min-w-4 min-h-4 flex items-center justify-center text-v0-gray-500 mt-[2px]",children:null!=r?r:i}),(0,eh.jsx)("div",{className:"word-break whitespace-pre-wrap overflow-hidden min-h-4",children:t.task})]})}e.s(["SortableContext",()=>ru,"arrayMove",()=>n8,"sortableKeyboardCoordinates",()=>rj,"useSortable",()=>rx,"verticalListSortingStrategy",()=>ra],301795);let rT=(0,ey.withNewIcon)('<circle cx="8" cy="8" r="7.25" stroke="currentColor" fill="transparent" stroke-width="1.5" stroke-dasharray="2.7 3"/>'),rM=(0,eR.cva)("flex items-start gap-2 min-h-fit text-[13px] transition-colors truncate",{variants:{status:{"in-progress":"",todo:"text-v0-gray-1000",done:"text-v0-gray-900"}},defaultVariants:{status:"todo"}}),rL=(0,ey.withNewIcon)('<path d="M12.0605 6L7.03027 11.0303C6.73738 11.3232 6.26262 11.3232 5.96973 11.0303L3.93945 9L5 7.93945L6.5 9.43945L11 4.93945L12.0605 6Z" fill="currentColor"/>');e.s(["EyebrowTodosWithQueue",()=>rS,"Todo",0,rT],876366);var rP=e.i(385671),rR=e.i(393753);let r_=e=>{let{steps:t,messageId:n,preventRenderSkipOrContinue:r=!1}=e,i=(0,et.useActiveBlockState)(),{latestBlock:o}=(0,z.useBlockHistory)({searchAll:!0}),a=i||o,s=t.filter(e=>["add-integration","add-env-var","run-script","run-action"].includes(e.type));return 0===s.length?null:(0,N.jsx)(rO,{steps:s,messageId:n,currentBlock:a,preventRenderSkipOrContinue:r})},rO=e=>{var t,n,r,i;let{steps:o,messageId:a,currentBlock:s,preventRenderSkipOrContinue:l}=e,{stores:c}=(0,A.useAllTeamIntegrations)(),u=(0,et.useActiveBlockState)(),{isStreaming:d}=(0,Z.useChatLoadingState)(),{refresh:p}=(0,T.useBrowserFrame)(),h=(0,W.useChatMetadata)(),{canWriteToChat:f}=h,{messages:m,activeForkKey:g}=(0,Z.useChatMessages)(),v=(0,X.useMemo)(()=>m.filter(e=>null==g?void 0:g.includes(e.id)),[m,g]),x=(0,X.useMemo)(()=>v[v.length-1].id===a,[v,a]),y=(0,et.useSetActiveBlockView)(),{chatId:b}=(0,Z.useChatId)(),{activeScope:w}=(0,I.useActiveScope)(),j=(0,L.useDefaultTeam)(),[C,k]=(0,X.useState)(null),[S,z]=(0,X.useState)(!1),eh=(0,X.useMemo)(()=>o.filter(e=>"run-script"===e.type).map(e=>"".concat((null==s?void 0:s.id)||"NO_BLOCK",":").concat(e.stepName)),[o,null==s?void 0:s.id]),{data:ef,isLoading:em}=(0,en.useCompletedExecutions)(eh),{project:eg}=(0,W.useChatMetadata)(),{envVars:ev,isLoading:ex,refetchVercelProject:ey}=(0,_.useVercelProject)({v0ProjectId:null!=(r=null==eg?void 0:eg.projectId)?r:void 0}),{actions:eb}=(0,rP.useChatLayout)(),{appendCodeOutputEvents:ew,expandConsole:ej}=(0,K.useConsole)((null==s?void 0:s.id)||"NO_BLOCK"),{setActiveFilePath:eC}=(0,G.useActiveFile)({blockId:(null==s?void 0:s.id)||"NO_BLOCK"}),{saveLastOpenedBlock:ek}=(0,er.useLastOpenedBlock)(),eS=null==(t=h.project)?void 0:t.vercelProjectId,{integrations:eN}=(0,R.useIntegrationOptions)({integrationIds:E.RECOMMENDED_INTEGRATION_SLUGS,isEnabled:!0}),{stores:{data:{marketplaceStores:eE,nativeStores:eD},refetch:eI},isLoading:eA}=(0,M.useConnectedIntegrations)({vercelProjectId:null!=eS?eS:void 0,v0ProjectId:null==(n=h.project)?void 0:n.projectId,refreshInterval:0}),eT=(0,X.useMemo)(()=>!eS||eA?[]:[...eE.map(e=>e.product.name),...eD.map(e=>e.integrationName)],[eE,eA,eS,eD]),eM=(0,X.useMemo)(()=>eT.some(e=>"supabase"===e.toLowerCase()),[eT]),eL=(0,X.useMemo)(()=>!!ev&&(0,ee.getSQLExecEnvVars)(Object.keys(ev)).length>0,[ev]),{clearTimeout:eP}=(0,ea.getProjectSettingsActions)(null!=(i=null==eg?void 0:eg.projectId)?i:""),{refetchLinks:eR}=(0,P.useIntegrationLinks)({source:"add-integration",messageId:a},async e=>{let t=o.findIndex(t=>"add-integration"===t.type&&t.stepName===e[0].integrationName);-1!==t&&eF(t,"connected_integration"),eP(e[0].integrationName),ey(),e.forEach(e=>{(0,U.track)("AddIntegration",{integrationSlug:e.integrationName,chatId:e.chatId||"",source:e.source})}),p()}),[e_,eO]=(0,X.useState)({}),eF=(e,t)=>{eO(n=>({...n,[e]:t}))},eB=async e=>{if(!s)return void H.toast.error("Cannot open file",{description:"No active block available"});u&&(y(!0,s),ek(s.id),await eC(e),eb.setActiveTabIntent("code"))},eV=async e=>{if(null===C)return;if(!s)return void H.toast.error("Cannot apply script",{description:"No active block available"});let t=e.endsWith(".sql")?"sql":e.endsWith(".py")?"python":e.endsWith(".js")?"javascript":void 0;if(!t)throw Error("Unsupported file type");let n=null==eg?void 0:eg.projectId;eF(C,"applying_script");let r=s.id+":"+e;try{if(await eB(e),"code-project"!==s.meta.type)throw Error("Code execution is only supported for code blocks");let o=(0,V.parseMultiFileSource)({source:s.source,blockType:"code-project",blockId:s.id}).find(t=>t.meta.file===e);if(!o){u?H.toast.error("Script file not found",{description:'The script "'.concat(e,'" could not be found in the active block.')}):H.toast.error("Script file not found",{description:'The script "'.concat(e,'" is not available in the most recent block. Try opening the block that contains this script first.')}),eF(C,"none");return}let a={error:"No result"};if("sql"===t){if(!n)throw Error("Your chat must be in a project to run SQL scripts.");let t=eT.filter(e=>(0,ep.isSqlExecProviderName)(e))[0];a=await (0,B.doSqlExecution)({props:{language:o.lang,source:o.source,meta:{file:e,transaction:o.meta.transaction},closed:!0,originalCode:o.source},sqlExecProvider:t,v0ProjectId:n,operationId:r})}else{var i;a=await (0,F.doExecution)({language:t,source:o.source,meta:{file:e,transaction:o.meta.transaction},closed:!0,originalCode:o.source},r,null!=(i=null==eg?void 0:eg.vercelProjectId)?i:void 0)}if("error"in a)ew([{type:"output",blockId:s.id,fileName:e,content:a.error,timestamp:new Date().toISOString(),method:"stderr"}]),H.toast.error("Error",{description:a.error}),eF(C,"none");else{let t=(0,rR.transformExecutionOutputToEvents)(a,s.id,e);ew(t),eF(C,"applied_script")}null==ej||ej()}catch(e){H.toast.error("Error applying script",{description:e instanceof Error?e.message:"Unknown error"}),eF(C,"none")}},ez=async(e,t,n,r,i)=>{if(void 0===i)throw Error("Index is required within steps");(0,U.track)("ClickAddIntegration",{integration:e}),eF(i,"linking_integration");try{if("blob"===e.slug){let t=await fetch("/chat/api/integrations/marketplace/storage/create-blob",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(n.name,"-blob"),projectId:n.id})});if(!t.ok){var o;let e=await t.json();throw eF(i,"none"),Error(null!=(o=e.error)?o:"Failed to create blob store")}eI(),p(),H.toast.success("Blob storage connected successfully"),(0,U.track)("AddIntegration",{integrationSlug:e.slug,chatId:b||"",source:"add-integration"});return}let s=E.POTENTIALLY_CONFLICTING_INTEGRATIONS.some(t=>t.has(e.name)&&eT.find(e=>t.has(e))),l=await (0,eo.createAddIntegrationUrl)({integration:e,chatId:b||"",v0ProjectId:t||"",teamSlug:(0,D.isUserScope)(w)?j||"":(null==w?void 0:w.slug)||"",dashboardProject:n,source:"add-integration",messageId:a,needPrefix:s});await eR(),r?r.location.href=l:window.open(l,"_blank")}catch(e){H.toast.error(e instanceof Error?e.message:"Failed to add integration")}},eH=(e,t)=>{switch(e.type){case"add-integration":let n=eN.find(t=>t.name===e.stepName);return{stepTitle:"Install ".concat(e.stepName),stepActions:n?(0,N.jsx)(es.IntegrationSplitButton,{agentStyling:!0,allTeamStores:c,integration:n,onConnect:ez,status:e_[t],vercelProjectId:null!=eS?eS:void 0,onStatusChange:eF,source:"steps-card",starter:!1,disabled:d||!f,sendFollowUp:!1,stepIndex:t,disableIntrospection:!0}):(0,N.jsx)($.Skeleton,{className:"h-8 w-20 rounded-md"})};case"run-script":let r=e.stepName.substring(e.stepName.lastIndexOf("/")+1),i="Apply",o=!1,a=!1;switch(e_[t]){case"creating_project":i="Connecting",o=!0,a=!0;break;case"applying_script":i="Applying",o=!0,a=!0;break;case"applied_script":i="Applied",a=!0;break;default:i="Apply",o=!1,a=!1}let s=e.stepName.endsWith(".sql"),l=e.stepName.endsWith(".py"),u=e.stepName.endsWith(".js"),h=s||l||u,m=s&&h&&(null==eg?void 0:eg.projectId)&&eL,g=h&&(l||u);return{stepTitle:"Run ".concat(r),stepActions:em?(0,N.jsx)($.Skeleton,{className:"h-7 w-[77px]"}):(0,N.jsx)("div",{className:"flex flex-row gap-2",children:(0,N.jsx)(eu.Tooltip,{content:h?s&&!m?"No database connected":void 0:"v0 can only run SQL, Python, and Node.js scripts",children:(0,N.jsx)(ed.SpinnerButton,{size:"sm",className:"h-7",pending:o,disabled:a||!m&&!g||!f,onClick:()=>eV(e.stepName),children:i})})})};case"run-action":if("supabase-chat-url"===e.stepName){var v,x;let e=C===t;return{stepTitle:(0,N.jsxs)("div",{className:"flex flex-row items-center gap-2 group min-w-0",children:[(0,N.jsx)("div",{className:"truncate text-sm font-medium group-hover:text-v0-gray-1000 ".concat(e?"text-gray-900":"text-gray-500"),children:"Setup Development Auth Redirect URL"}),(0,N.jsx)(eu.Tooltip,{className:"max-w-96",content:(0,N.jsxs)("span",{children:["Adds this chat as"," ",(0,N.jsx)("strong",{className:"font-medium",children:"redirect URL"})," to Supabase and env vars, used for development purposes."]}),children:(0,N.jsx)("div",{className:"flex-shrink-0 group-hover:text-v0-gray-1000 ".concat(e?"text-gray-900":"text-gray-500"),children:(0,N.jsx)(J.Question,{className:"h-4 w-4"})})})]}),stepActions:(0,N.jsx)(el.SupabaseChatUrlStep,{agentStyling:!0,stepStatus:e_[t],isLoadingCompletedExecutions:em,canWriteToChat:!!f,hasSupabaseIntegration:eM,activeStep:C,index:t,projectId:null!=(v=null==eg?void 0:eg.projectId)?v:void 0,vercelProjectId:null!=(x=null==eg?void 0:eg.vercelProjectId)?x:void 0,chatId:b,updateStepStatus:eF,refresh:p})}}return null;case"add-env-var":return{stepTitle:"Add ".concat(e.stepName),stepActions:(0,N.jsx)(es.IntegrationSplitButton,{agentStyling:!0,allTeamStores:c,integration:ei.MANUAL_INTEGRATION,onConnect:ez,status:e_[t],vercelProjectId:null!=eS?eS:void 0,onStatusChange:eF,source:"steps-card",starter:!1,disabled:d||!f,sendFollowUp:!1,stepIndex:t,envVarKeys:[e.stepName],disableIntrospection:!0})}}};(0,X.useEffect)(()=>{o.forEach((e,t)=>{switch(e.type){case"add-integration":eT.includes(e.stepName)&&eF(t,"connected_integration");break;case"add-env-var":(null==ev?void 0:ev[e.stepName])&&eF(t,"added_env_vars");break;case"run-script":(null==ef?void 0:ef["".concat((null==s?void 0:s.id)||"NO_BLOCK",":").concat(e.stepName)])&&eF(t,"applied_script");break;case"run-action":if("supabase-chat-url"===e.stepName){var n;if(!b)return;(null==ev||null==(n=ev.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL)?void 0:n.value.includes(b))&&eF(t,"completed_action")}}})},[o,eT,ev,ef,null==s?void 0:s.id,b]),(0,X.useEffect)(()=>{if(!em&&!ex&&!eA){let e=new Set(["connected_integration","added_env_vars","applied_script","completed_action"]),t=o.findIndex((t,n)=>!e.has(e_[n]));-1!==t&&k(t)}},[em,ex,eA,o,e_]);let eU=(e,t)=>{let n=e_[t];if("add-integration"===e.type&&eA||"run-script"===e.type&&em||"add-env-var"===e.type&&ex||"run-action"===e.type&&em)return(0,N.jsx)($.Skeleton,{className:"h-4 w-4 rounded-full"});if("added_env_vars"===n||"connected_integration"===n||"applied_script"===n||"completed_action"===n)return(0,N.jsx)(Y.CheckCircleFill,{});if("add-integration"===e.type){var r,i;let t=eN.find(t=>t.name===e.stepName);return(0,N.jsx)("div",{className:"flex h-4 w-4 items-center justify-center overflow-hidden rounded-full",children:(0,N.jsx)(Q.default,{src:null!=(r=null==t?void 0:t.icon)?r:"/placeholder-icon.png",alt:null!=(i=null==t?void 0:t.name)?i:"Integration",width:16,height:16})})}return(0,N.jsx)(rT,{})},{submit:eG}=(0,q.useV0Chat)(),eW=(0,X.useMemo)(()=>o.some((e,t)=>{let n=e_[t];return"added_env_vars"===n||"connected_integration"===n||"applied_script"===n||"completed_action"===n}),[o,e_]),eq=(0,X.useCallback)(async()=>{z(!0);let e=[],t=[],n=[];for(let[r,i]of o.entries()){let o=e_[r];"connected_integration"===o&&"add-integration"===i.type?e.push(i.stepName):"added_env_vars"===o?n.push(i.stepName):"applied_script"===o&&t.push(i.stepName)}try{await eG({action:"new",content:{version:1,parts:[{type:"confirmed-steps",connectedIntegrationNames:e,appliedScripts:t,addedEnvVars:n}]},messageMode:"build",revalidateVercelEnvAndIntegrations:!0})}catch(e){H.toast.error("Failed to submit message"),console.error("Error submitting follow-up message:",e)}finally{setTimeout(()=>{z(!1)},100)}},[o,e_,eG]),eZ=!o.every(e=>ei.SUCCESS_INTEGRATION_STATUSES.includes(e_[o.indexOf(e)]));return(0,N.jsxs)("div",{className:(0,O.cn)(ec.AGENT_BLOCK_CLASS,"flex-col mb-4 py-2 min-h-11 flex",!d&&"gap-1",!f&&"pointer-events-none",{"border-v0-blue-700":eZ}),children:[(0,N.jsx)(ec.BlockRing,{isVisible:!0,isActive:eZ}),o.map((e,t)=>{let n=eH(e,t);if(!n)return null;let{stepTitle:r,stepActions:i}=n,o="".concat(e.type,"-").concat(e.stepName,"-").concat(t);return(0,N.jsxs)("div",{className:"flex h-8 cursor-pointer items-center gap-2 justify-between",onClick:()=>{k(t),"run-script"===e.type&&eB(e.stepName)},children:[(0,N.jsxs)("div",{className:"flex w-full min-w-0 items-center gap-2",children:[(0,N.jsx)("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center text-v0-gray-500",children:eU(e,t)}),"string"==typeof r?(0,N.jsx)("div",{className:"min-w-0 shrink overflow-hidden text-ellipsis text-nowrap hover:text-v0-gray-1000 ".concat(C===t?"text-gray-900":"text-gray-500"),children:r}):(0,N.jsx)("div",{className:"min-w-0 flex-1 overflow-hidden",children:r})]}),(0,N.jsx)("div",{className:"flex shrink-0 justify-end [&>div]:justify-end",children:C===t&&i})]},o)}),(!d&&f&&x&&!l||S)&&(0,N.jsx)("div",{className:"flex justify-end items-center gap-2 transition-all duration-300 ease-in-out overflow-hidden ".concat(d?"h-0 max-h-0 opacity-0 py-0 mt-0 mb-0":"h-8 max-h-8 opacity-100 py-[2px] mt-2"),children:(0,N.jsx)(ed.SpinnerButton,{onClick:eq,className:"w-full h-7",variant:"secondary",size:"sm",pending:S,disabled:S||d,children:eW?(0,N.jsx)("div",{className:"flex items-center gap-2",children:"Continue building"}):(0,N.jsx)("div",{className:"flex items-center gap-2",children:"Skip for now"})})})]})};var rF=Q,rB=E,rV=e.i(424725),rz=p,rH=ef;function rU(e){let t=S({"starting-integration-status-check":()=>null,"request-install-integration":()=>null,"finished-integration-status-check":e=>(0,x.jsx)(rG,{...e})},e),n=e.parts.find(e=>"request-install-integration"===e.type);return n?(0,x.jsx)(r_,{messageId:e.messageId,steps:n.steps}):(0,x.jsx)(w.RichTask,{...e,Icon:y.Database,renderedParts:t,children:(0,x.jsx)(w.TaskName,{...e,textActive:"Checking Integrations",textComplete:"Integration Check Complete"})})}function rG(e){return(0,x.jsxs)("div",{className:"flex flex-col gap-2 [&_span]:align-middle w-full",children:[e.integrations.map((e,t)=>(0,x.jsx)(rW,{...e},t)),e.envVars.length?(0,x.jsxs)("span",{children:["Found ",e.envVars.length," environment variables."]}):null]})}function rW(e){let{schema:t,status:n,name:r,instanceName:i}=e,o=(0,rz.useMemo)(()=>(0,x.jsx)(rV.ContextPill,{prefix:(0,x.jsx)(rZ,{name:r}),className:"mx-1",children:i}),[r,i]);return"not_connected"===n?(0,x.jsxs)("span",{children:[o," is not connected"]}):t?(0,x.jsxs)("div",{className:"flex flex-col gap-3 w-full",children:[(0,x.jsxs)("span",{children:["Connected to ",o," ",t.tableCount," tables found."]}),(0,x.jsx)("div",{className:"flex flex-col gap-3",children:t.tables.map(e=>(0,x.jsx)(rq,{table:e},e.name))})]}):(0,x.jsxs)("span",{children:[o," is connected, but no schema available"]})}function rq(e){let{table:t}=e;return(0,x.jsxs)("div",{className:(0,rH.cn)("material-small flex flex-col rounded-md w-full",w.AGENT_BLOCK_MAX_WIDTH_CLASS),children:[(0,x.jsxs)("div",{className:"px-2.5 flex py-2 text-v0-gray-1000 border-b gap-2 justify-between border-v0-gray-200",children:[(0,x.jsxs)("span",{className:"flex items-center gap-2",children:[(0,x.jsx)("span",{className:"text-v0-gray-500",children:(0,x.jsx)(y.Database,{})}),t.name]}),(0,x.jsxs)("span",{className:"text-gray-500 text-[11px]",children:[t.columns.length," columns"]})]}),(0,x.jsx)("div",{className:"flex flex-col p-1.5 py-2",children:t.columns.map((e,t)=>(0,x.jsxs)("div",{className:(0,rH.cn)("flex items-center gap-4 h-7 justify-between rounded-[6px] px-1.5",{"bg-v0-background-200":t%2==0}),children:[(0,x.jsx)("span",{className:"text-label-12-mono text-v0-gray-900",children:e.name}),(0,x.jsx)("span",{className:"text-v0-gray-900 text-[12px]",children:e.type})]},e.name))})]})}function rZ(e){let{name:t}=e,n=rB.INTEGRATION_NAME_TO_SVG[t];return n?(0,x.jsx)("div",{className:"flex items-center size-4 justify-center rounded-full bg-[#000000]",children:(0,x.jsx)(rF.default,{src:n,alt:t,width:10,height:10,className:"h-2.5 w-2.5"})}):(0,x.jsx)("span",{className:"text-v0-gray-900",children:(0,x.jsx)(b.Puzzle,{})})}let rK=(0,ey.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM10.5 5.5H5.5V10.5H10.5V5.5Z" fill="currentColor"/>');e.s(["StopCircle",0,rK],276953)},207086,141861,874090,681813,360187,198744,346602,744799,542727,851805,e=>{"use strict";e.s(["CodingV1",()=>V],207086);var t=e.i(509473),n=e.i(743124),r=e.i(318504),i=e.i(226092),o=e.i(486011),a=e.i(276953),s=e.i(743839),l=e.i(270370),c=e.i(236808),u=e.i(795970),d=e.i(454471),p=e.i(304649),h=e.i(365290),f=e.i(176248),m=e.i(758118),g=e.i(818273),v=e.i(449381),x=e.i(53223),y=e.i(707827),b=e.i(301331),w=e.i(209819),j=e.i(697856),C=e.i(862664),k=e.i(92479),S=e.i(530135),N=e.i(863785),E=e.i(397036),D=e.i(529693),I=e.i(926224);e.i(563948);var A=e.i(407562),T=e.i(316799),M=e.i(249897),L=e.i(76866),P=e.i(519738);e.i(904347);var R=e.i(37737),_=e.i(556355);let O={duration:450};function F(e){let{changedFiles:r,blockId:i,isBlockClosed:o}=e,{latestSource:a}=(0,b.useBlockHistory)({blockId:i,searchAll:!0}),s=(0,n.useMemo)(()=>a?(0,I.getChangedFiles)({source:a,blockId:i,blockType:"code-project",closed:o}):r,[a,i,r,o]);if(0===s.length)return null;let l=s.map((e,r)=>{let i=(0,d.filePathToIcon)(e.fileName),o="loading...",a=e.baseName.includes(o)||e.fileName.includes(o);return(0,n.createElement)(D.motion.div,{...(0,E.motionReplyAnimationIf)(e.isActive&&!a),key:e.fileName+"-"+r,className:"grid grid-cols-[auto_auto_1fr] gap-2.5 items-center max-w-full"},a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Spinner,{size:16})," Loading files changed..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i,{className:"shrink-0"}),(0,t.jsx)("span",{className:"text-v0-gray-1000 shrink-0",children:e.baseName}),(0,t.jsx)("span",{className:"text-v0-gray-900 min-w-0 truncate",children:e.fileName})]}))});return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:l})}let B=n.default.memo(F);function V(e){let s=(0,u.useRichAssistantParts)({"code-project":e=>(0,t.jsx)(B,{changedFiles:e.changedFiles,blockId:e.blockId,isBlockClosed:e.closed})},e),l=(0,g.useIsStreaming)(),d=e.parts[0],f="code-project"===d.type?d:null,y=((null==f?void 0:f.isVersioned)||!1)&&!e.isActive&&!l,k=null==f?void 0:f.blockId,{currentBlockIndex:S,ensureBlockSource:E,isLoadingBlockSource:D,thisBlock:I}=(0,b.useBlockHistory)({blockId:k||"",searchAll:!0}),P=(null==I?void 0:I.sourceVersionKey)||(null==f?void 0:f.sourceVersionKey),R=P&&(0,M.parseSourceVersionToNumber)(P)||1,_=S+1,F=(0,n.useCallback)(async()=>{D||await E()},[E,D]),{getBlockShared:V}=(0,j.useSharedBlocks)(),{getBlockDeployed:U}=(0,C.useDeployedBlocks)(),G=!!k&&(V(k)||U(k)),W=!l&&f&&!f.closed,q=(0,v.useActiveBlockState)(),Z=k===(null==q?void 0:q.id),K=(0,v.useSetActiveBlockView)(),{getBlockTemplateId:$}=(0,N.useBlockTemplateId)(),{saveLastOpenedBlock:Y}=(0,T.useLastOpenedBlock)(),J=(0,n.useCallback)(async t=>{var n,r;if(Z||(t.preventDefault(),t.stopPropagation()),!k||!y)return;(0,x.track)("ClickBlockPreview",{blockId:k});let i=await E().catch(()=>{A.toast.error("Failed to load block source.")})||f.source;i&&(K(!0,{id:k,meta:f.meta,messageId:e.messageId,type:"code-project",language:f.lang||"javascript",source:i,closed:!0,hasSourceBeenEdited:!1,remoteInfo:{},forkedFromBlockId:void 0,latestDeploymentInfo:f.latestDeploymentInfo,templateVersionId:null==(n=$(k))?void 0:n.templateVersionId,templateCanonId:null==(r=$(k))?void 0:r.templateCanonId}),Y(k))},[Z,k,E,null==f?void 0:f.source,null==f?void 0:f.meta,null==f?void 0:f.lang,y,null==f?void 0:f.latestDeploymentInfo,e.messageId,$,K,Y]),{restoreCurrentBlock:Q,isRestoring:X}=(0,L.useRestoreBlockVersion)(k),{canWriteToChat:ee}=(0,w.useChatMetadata)(),et=(0,n.useMemo)(()=>y?G?o.Globe:W?a.StopCircle:i.ChevronRightSmall:r.FileText,[y,G,W]),en=y?e=>{y&&J(e)}:void 0;return(0,t.jsx)(z,{blockId:k,editVersionNumber:R,canWriteToChat:ee||!1,children:(0,t.jsxs)("div",{className:(0,p.cn)(c.AGENT_BLOCK_MAX_WIDTH_CLASS,"rounded-[8px] m-[-1px] border border-transparent relative cursor-pointer",y?c.AGENT_BLOCK_CLASS:"",{"border-v0-blue-700":y&&Z,"border-v0-gray-600":y&&!Z}),style:{...(0,h.transitionStyles)(["border-color","background","padding","box-shadow"],O)},onClick:en,onMouseEnter:F,children:[(0,t.jsx)(c.BlockRing,{isVisible:y,isActive:Z}),(0,t.jsx)(c.RichTask,{...e,Icon:et,renderedParts:s,hideTimelineLine:y,hideTimeSpent:!0,onClick:en,headerChildrenEnd:(0,t.jsx)(H,{isVersioned:y,blockId:k,messageId:e.messageId,canWriteToChat:ee||!1,isRestoring:X,restoreCurrentBlock:Q}),autoCloseDelay:y?0:void 0,className:"w-full overflow-hidden",children:(0,t.jsxs)("div",{className:"grid gap-2 overflow-hidden truncate grid-cols-[auto_auto] content-center align-middle",children:[(0,t.jsx)("span",{className:(0,p.cn)("truncate min-w-0 flex-1 text-label-13 font-normal",{"text-v0-gray-1000":y}),children:(0,t.jsx)(c.TaskName,{...e,textActive:"Making changes",textComplete:"Made some changes"})}),(0,t.jsx)("span",{className:"text-v0-gray-900 text-label-13 pl-0.5 shrink-0 flex items-center gap-1",...(0,m.a11yHideIf)(!y),style:{...(0,m.visibleStylesIf)(y),...(0,h.transitionStyles)(["opacity"],O)},children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:_?"v".concat(_):null}),R>1&&ee?(0,t.jsx)("span",{children:"(edited)"}):null]})})]})})]})})}function z(e){let{children:r,blockId:i,editVersionNumber:o,canWriteToChat:a}=e,{isLatest:s}=(0,P.useBlockVersionInfo)(i),l=(0,n.useCallback)(()=>{i&&(0,R.openDialog)({type:"undoChanges",data:{blockId:i}})},[i]);if(o<=1||!a)return r;let u=o-1;return(0,t.jsxs)("div",{className:"relative",children:[r,(0,t.jsxs)("div",{className:"flex items-end gap-1",children:[(0,t.jsx)(c.TimelineCorner20,{className:"ml-5"}),(0,t.jsxs)("div",{className:"text-v0-gray-900 font-normal text-label-13 -mb-1.5 select-none flex items-center gap-1",children:[(0,t.jsxs)("span",{children:[" ","You made ",u," edit",u>1?(0,t.jsx)("span",{children:"s"}):null," "]}),s&&(0,t.jsxs)("button",{className:"flex items-center gap-1",onClick:l,disabled:!s,children:[(0,t.jsx)("span",{children:"•"})," Undo"]})]})]})]})}let H=n.default.memo(function(e){let{isVersioned:n,blockId:r,messageId:i,canWriteToChat:o,isRestoring:a,restoreCurrentBlock:s}=e;if(!n||!r)return null;let l=n;return(0,t.jsx)("div",{className:"flex items-center gap-1 min-w-fit",...(0,m.a11yHideIf)(!l),style:{...(0,m.visibleStylesIf)(l),...(0,h.transitionStyles)(["opacity"],O)},children:(0,t.jsx)(U,{blockId:r,messageId:i,canWriteToChat:o,isRestoring:a,restoreCurrentBlock:s})})});function U(e){let{blockId:n,messageId:r,isRestoring:i,restoreCurrentBlock:o,canWriteToChat:a}=e,{activeForkKey:c}=(0,k.useChatMessages)();return r!==(null==c?void 0:c[c.length-1])&&a&&n?i?(0,t.jsx)(G,{disabled:i,children:(0,t.jsx)(y.Spinner,{size:16})}):(0,t.jsxs)(_.DropdownMenu,{children:[(0,t.jsx)(_.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(G,{children:(0,t.jsx)(s.MoreHorizontal,{size:16})})}),(0,t.jsxs)(_.DropdownMenuContent,{className:"p-1",align:"end",children:[(0,t.jsxs)(_.DropdownMenuItem,{onClick:o,children:[(0,t.jsx)(S.UndoIcon,{})," Restore"]}),(0,t.jsxs)(_.DropdownMenuItem,{onClick:()=>{(0,R.openDialog)({type:"forkBlock",data:{blockId:n,page:"chat",canWriteToChat:!!a,actionType:"duplicate"}})},children:[(0,t.jsx)(l.PlusCircle,{})," New Chat"]})]})]}):null}function G(e){let{onClick:n,children:r,variant:i="ghost",className:o,"aria-label":a,disabled:s,...l}=e;return(0,t.jsxs)(f.Button,{className:(0,p.cn)("relative z-10 size-7 shrink-0 rounded-md px-1 transition-none has-[>svg]:p-0 ",o),size:"sm",variant:"ghost",...l,children:[r,(0,t.jsx)("span",{className:"sr-only",children:a})]})}e.s(["DiagnosticsV1",()=>J],141861);var W=t,q=e.i(936096);let Z=(0,q.withNewIcon)('<path d="M12.798 1.24199L13.3283 1.77232L14.0567 1.04389L13.1398 0.574402L12.798 1.24199ZM9.95705 4.0829L9.42672 3.55257L9.95705 4.0829ZM6.5844 6.95555L7.11473 7.48588L7.46767 7.13295L7.27837 6.67111L6.5844 6.95555ZM1.49995 12.04L2.03027 12.5703L2.03028 12.5703L1.49995 12.04ZM1.49994 14.54L0.969615 15.0703H0.969615L1.49994 14.54ZM3.99995 14.54L4.53028 15.0703L3.99995 14.54ZM9.10147 9.43848L9.37633 8.74066L8.91883 8.56046L8.57114 8.90815L9.10147 9.43848ZM14.7848 3.25519L15.4568 2.92229L14.9931 1.98617L14.2544 2.72486L14.7848 3.25519ZM11.9571 6.0829L11.4267 5.55257L11.9571 6.0829ZM10.5428 6.0829L11.0732 5.55257L11.0732 5.55257L10.5428 6.0829ZM9.95705 5.49711L9.42672 6.02744L9.42672 6.02745L9.95705 5.49711ZM12.2676 0.711655L9.42672 3.55257L10.4874 4.61323L13.3283 1.77232L12.2676 0.711655ZM10.7499 1.5C11.3659 1.5 11.9452 1.64794 12.4562 1.90957L13.1398 0.574402C12.4221 0.206958 11.6091 0 10.7499 0V1.5ZM6.99994 5.25C6.99994 3.17893 8.67888 1.5 10.7499 1.5V0C7.85045 0 5.49994 2.3505 5.49994 5.25H6.99994ZM7.27837 6.67111C7.09913 6.23381 6.99994 5.75443 6.99994 5.25H5.49994C5.49994 5.95288 5.63848 6.62528 5.89043 7.23999L7.27837 6.67111ZM6.05407 6.42522L0.969615 11.5097L2.03028 12.5703L7.11473 7.48588L6.05407 6.42522ZM0.969616 11.5097C-0.0136344 12.4929 -0.013635 14.0871 0.969615 15.0703L2.03027 14.0097C1.63281 13.6122 1.63281 12.9678 2.03027 12.5703L0.969616 11.5097ZM0.969615 15.0703C1.95287 16.0536 3.54703 16.0536 4.53028 15.0703L3.46962 14.0097C3.07215 14.4071 2.42774 14.4071 2.03027 14.0097L0.969615 15.0703ZM4.53028 15.0703L9.6318 9.96881L8.57114 8.90815L3.46962 14.0097L4.53028 15.0703ZM10.7499 9C10.2637 9 9.80071 8.90782 9.37633 8.74066L8.82661 10.1363C9.4232 10.3713 10.0724 10.5 10.7499 10.5V9ZM14.4999 5.25C14.4999 7.32107 12.821 9 10.7499 9V10.5C13.6494 10.5 15.9999 8.1495 15.9999 5.25H14.4999ZM14.1127 3.5881C14.3604 4.08811 14.4999 4.65168 14.4999 5.25H15.9999C15.9999 4.4156 15.8047 3.62465 15.4568 2.92229L14.1127 3.5881ZM12.4874 6.61323L15.3151 3.78552L14.2544 2.72486L11.4267 5.55257L12.4874 6.61323ZM10.0125 6.61323C10.6959 7.29665 11.804 7.29665 12.4874 6.61323L11.4267 5.55257C11.3291 5.6502 11.1708 5.6502 11.0732 5.55257L10.0125 6.61323ZM9.42672 6.02745L10.0125 6.61323L11.0732 5.55257L10.4874 4.96678L9.42672 6.02745ZM9.42672 3.55257C8.7433 4.23599 8.7433 5.34403 9.42672 6.02744L10.4874 4.96678C10.3898 4.86915 10.3897 4.71086 10.4874 4.61323L9.42672 3.55257Z" fill="currentColor"/>');var K=c,$=u,Y=n;function J(e){let t=(0,Y.useMemo)(()=>{var t;return(null==(t=e.parts.find(e=>"diagnostics-found-issues"===e.type))?void 0:t.summaries.length)||0},[e.parts]),n=(0,$.useRichAssistantParts)({"fetching-diagnostics":()=>null,"diagnostics-passed":()=>null,"diagnostic-invocations-exhausted":()=>null,"diagnostics-found-issues":e=>(0,W.jsx)("div",{className:"flex flex-col gap-2",children:e.summaries.map((e,t)=>(0,W.jsx)("div",{children:e},t))})},e);return(0,W.jsx)(K.RichTask,{...e,Icon:Z,renderedParts:t?n:null,children:(0,W.jsx)(K.TaskName,{...e,textActive:"Reviewing work",textComplete:t?"Reviewed work":"No issues found"})})}e.s(["FetchFromWebV1",()=>en],874090);var Q=t,X=o,ee=c,et=u;function en(e){let t=(0,et.useRichAssistantParts)({"starting-fetch-from-web":e=>{let{url:t}=e;return'Visiting "'.concat((0,ee.readableUrl)({url:t}),'"')},"finished-fetch-from-web":e=>(0,Q.jsxs)(Q.Fragment,{children:["Read ",(0,Q.jsx)(ee.AgentCitationPill,{align:"start",...e})]})},e);return(0,Q.jsx)(ee.RichTask,{...e,Icon:X.Globe,renderedParts:t,children:(0,Q.jsx)(ee.TaskName,{...e,textActive:"Fetching from Web",textComplete:"Fetched from Web"})})}e.s(["GenerateDesignInspirationV1",()=>ea],681813);var er=t;let ei=(0,q.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M10.6789 2.05378L9.81677 5.56255L13.3254 6.4247L14.1876 2.91593L10.6789 2.05378ZM10.3829 0.436426C9.93957 0.327486 9.49186 0.59858 9.38292 1.04193L8.19943 5.85853C8.09049 6.30188 8.36159 6.7496 8.80494 6.85854L13.6214 8.04205C14.0648 8.15099 14.5125 7.8799 14.6214 7.43654L15.8049 2.61994C15.9139 2.17659 15.6428 1.72887 15.1994 1.61993L10.3829 0.436426ZM9.50003 14.5C10.6046 14.5 11.5 13.6046 11.5 12.5C11.5 11.3955 10.6046 10.5 9.50003 10.5C8.39546 10.5 7.50003 11.3955 7.50003 12.5C7.50003 13.6046 8.39546 14.5 9.50003 14.5ZM9.50003 16C11.433 16 13 14.433 13 12.5C13 10.567 11.433 9.00004 9.50003 9.00004C7.56703 9.00004 6.00003 10.567 6.00003 12.5C6.00003 14.433 7.56703 16 9.50003 16ZM2.93145 5.14833L5.61583 7.51283L2.2572 8.66149L2.93145 5.14833ZM0.467708 10.0272C0.3916 10.4238 0.772291 10.7546 1.15436 10.624L7.68945 8.38894C8.07152 8.25827 8.16989 7.7636 7.86688 7.4967L2.64371 2.89595C2.33836 2.62699 1.85633 2.79184 1.77963 3.19147L0.467708 10.0272Z" fill="currentColor"/>');var eo=c;function ea(e){return(0,er.jsx)(eo.RichTask,{...e,Icon:ei,renderedParts:null,maxHeight:400,children:(0,er.jsx)(eo.TaskName,{...e,textActive:"Generating design brief",textComplete:"Generated enhanced design brief"})})}e.s(["InspectSiteV1",()=>ed],198744);var es=t;let el=(0,q.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 3.5H3.5L5 1H11L12.5 3.5H14.5H16V5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V5V3.5H1.5ZM4.78624 4.27174L5.84929 2.5H10.1507L11.2138 4.27174L11.6507 5H12.5H14.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V5H3.5H4.34929L4.78624 4.27174ZM9.75 8.5C9.75 9.4665 8.9665 10.25 8 10.25C7.0335 10.25 6.25 9.4665 6.25 8.5C6.25 7.5335 7.0335 6.75 8 6.75C8.9665 6.75 9.75 7.5335 9.75 8.5ZM11.25 8.5C11.25 10.2949 9.79493 11.75 8 11.75C6.20507 11.75 4.75 10.2949 4.75 8.5C4.75 6.70507 6.20507 5.25 8 5.25C9.79493 5.25 11.25 6.70507 11.25 8.5Z" fill="currentColor"/>');e.s(["Camera",0,el],360187);var ec=c,eu=u;function ed(e){let t=(0,eu.useRichAssistantParts)({"starting-inspect-site":e=>{let{url:t}=e;return null},"skipping-inspect-site":e=>{let{reason:t}=e;return t},"inspect-site-complete":e=>(0,es.jsx)(ep,{...e}),screenshot:e=>(0,es.jsx)(ec.WebsiteScreenshot,{screenshotUrl:e.screenshotUrl,url:e.url})},e);return(0,es.jsx)(ec.RichTask,{...e,Icon:el,renderedParts:t,children:(0,es.jsx)(ec.TaskName,{...e,textActive:"Inspecting Site",textComplete:"Inspected Site"})})}function ep(e){let t=e.screenshotResults.filter(e=>!!e.screenshotUrl);return(0,es.jsxs)("div",{className:"flex-col flex gap-1",children:[t.map((e,t)=>(0,es.jsx)("div",{className:"flex gap-2 flex-col",children:(0,es.jsx)(ec.WebsiteScreenshot,{screenshotUrl:e.screenshotUrl})},t)),0===t.length&&(0,es.jsx)(ec.AgentNote,{variant:"warning",children:"No screenshots were taken."})]})}e.s(["ReadFilesV1",()=>ev],346602);var eh=t,ef=e.i(129818),em=c,eg=u;function ev(e){let t=(0,eg.useRichAssistantParts)({"starting-read-files":e=>(0,eh.jsx)(em.FileList,{label:"Reading",files:e.filePaths}),"finished-read-files":()=>"Finished reading"},e);return(0,eh.jsx)(em.RichTask,{...e,Icon:ef.MagnifyingGlassSmall,renderedParts:t,children:(0,eh.jsx)(em.TaskName,{...e,textActive:"Searching repository",textComplete:"Searched repository"})})}e.s(["RunShellCommandV1",()=>eC],744799);var ex=t,ey=e.i(708377),eb=c,ew=u,ej=n;function eC(e){let t=(0,ew.useRichAssistantParts)({"starting-shell-command":e=>(0,ex.jsx)(eb.Command,{...e}),"finished-shell-command":e=>(0,ex.jsx)(eb.CommandOutput,{...e})},e,!0),n=(0,ej.useMemo)(()=>(0,ex.jsx)(eb.Terminal,{children:t}),[t]);return(0,ex.jsx)(eb.RichTask,{...e,Icon:ey.TerminalWindow,renderedParts:n,children:(0,ex.jsx)(eb.TaskName,{...e,textActive:"Running some commands",textComplete:"Ran some commands"})})}e.s(["SearchRepoV1",()=>eI],542727);var ek=t,eS=ef,eN=c,eE=u,eD=e.i(266007);function eI(e){let t=(0,eE.useRichAssistantParts)({ls:()=>null,"grepping-repo":()=>null,"repo-search-result":()=>null,"starting-repo-search":e=>(0,ek.jsxs)(ek.Fragment,{children:["Searching ",'"'.concat((0,eD.cleanAgentFilePath)(e.query),'"')]}),"reading-file":e=>(0,ek.jsxs)(ek.Fragment,{children:["Read ",(0,ek.jsx)(eN.File,{...e,shorten:!0})]}),"ls-results":e=>e.numFiles?"Scanning ".concat(e.numFiles," file").concat(e.numFiles>1?"s":""):"Scanning files","grep-results":e=>e.numMatches?"Scanned ".concat(e.numMatches," file").concat(e.numMatches>1?"s":""):null,"grep-file-results":e=>e.numFileMatches?"Scanned ".concat(e.numFileMatches," file").concat(e.numFileMatches>1?"s":""):"Scanned files","select-files":e=>(0,ek.jsx)(eN.FileList,{label:"Reading file".concat(e.filePaths.length>1?"s":""),files:e.filePaths.map(eD.cleanAgentFilePath)})},e);return(0,ek.jsx)(eN.RichTask,{...e,Icon:eS.MagnifyingGlassSmall,renderedParts:t,children:(0,ek.jsx)(eN.TaskName,{...e,textActive:"Searching repository",textComplete:"Searched repository"})})}e.s(["SearchWebV1",()=>eP],851805);var eA=t,eT=o,eM=c,eL=u;function eP(e){let t=(0,eL.useRichAssistantParts)({"starting-web-search":e=>'Searching "'.concat(e.query,'"'),"got-results":e=>"Analyzing ".concat(e.count," results..."),"failed-web-search":()=>(0,eA.jsx)(eM.AgentNote,{variant:"info",title:"No results",children:"We couldn't find any results for your search."}),"finished-web-search":e=>(0,eA.jsxs)("div",{className:"flex flex-col gap-1 max-w-full",children:[e.answer,(0,eA.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.citations.map((t,n)=>(0,eA.jsx)(eM.AgentCitationPill,{align:(0,eM.indexAndLengthToAlign)(n,e.citations.length),...t},n))})]})},e);return(0,eA.jsx)(eM.RichTask,{...e,Icon:eT.Globe,renderedParts:t,children:(0,eA.jsx)(eM.TaskName,{...e,textActive:"Searching the Web",textComplete:"Searched the Web"})})}},818273,165336,e=>{"use strict";e.s(["Renderer",()=>eK,"didRunOutOfCredits",()=>e4,"getBlocksFromState",()=>e9,"getMetadataFromState",()=>e6,"getRowType",()=>e7,"isFetchingDiagnostics",()=>e3,"useIsStreaming",()=>eY,"useIsV3",()=>eQ],818273);var t=e.i(509473),n=e.i(743124),r=e.i(15185),i=e.i(595432),o=e.i(651219),a=e.i(760343),s=e.i(595961),l=e.i(742998),c=e.i(397711),u=e.i(242084),d=e.i(583984),p=e.i(32170),h=e.i(233327),f=e.i(209819),m=e.i(707827),g=e.i(985353),v=e.i(967276),x=e.i(661535),y=e.i(708306),b=e.i(616593),w=e.i(768061),j=e.i(229983),C=e.i(696871),k=e.i(606278),S=e.i(101387),N=e.i(366346),E=e.i(90177),D=e.i(302998),I=e.i(968552);e.i(168204);var A=e.i(225695),T=t,M=e.i(236808),L=e.i(490838),P=e.i(884284),R=n,_=e.i(423814),O=e.i(207086),F=e.i(141861),B=e.i(874090),V=e.i(681813),z=e.i(198744),H=e.i(346602),U=e.i(744799),G=e.i(542727),W=e.i(851805);e.s(["MockThinkingV1",()=>eo,"ThinkingV1",()=>ea],165336);var q=t,Z=e.i(795970),K=e.i(936096),$=n,Y=M,J=t,Q=n,X=e.i(194945),ee=e.i(438819),et=e.i(694686);let en=(0,ee.default)(X.default),er=Q.default.memo(function(e){let{children:t}=e;return(0,J.jsx)("div",{className:"flex flex-col [&_*]:!m-0 gap-1.5",children:(0,J.jsx)(en,{allowedLinkPrefixes:et.allowedLinkPrefixes,allowedImagePrefixes:et.allowedImagePrefixes,defaultOrigin:et.defaultOrigin,components:{p:e=>{let{children:t}=e;return(0,J.jsx)("p",{children:t})},code:e=>{let{children:t}=e;return(0,J.jsx)("code",{className:"rounded-[0.375rem] border bg-v0-gray-100 px-1 py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",children:t})}},children:t})})}),ei=(0,K.withNewIcon)('<path d="M10 0c1.27 0 2.33.86 2.65 2.03a3 3 0 0 1 2.14 4.57 3.49 3.49 0 0 1-.05 5.34l.01.31A3.75 3.75 0 0 1 8 14.5a3.74 3.74 0 0 1-6.74-2.56 3.5 3.5 0 0 1-.05-5.34 2.99 2.99 0 0 1 2.14-4.57A2.75 2.75 0 0 1 8 .87C8.5.33 9.21 0 10 0Zm0 1.5c-.69 0-1.25.56-1.25 1.25V5A3.75 3.75 0 0 1 5 8.75v-1.5c1.24 0 2.25-1 2.25-2.25V2.75a1.25 1.25 0 1 0-2.4.48l.07.14.03.07a.75.75 0 0 1-1.29.75l-.04-.06-.08-.16a2.74 2.74 0 0 1-.17-.42 1.5 1.5 0 0 0-.83 2.33l.32-.07a.75.75 0 0 1 .28 1.47 2 2 0 0 0 .72 3.94.75.75 0 0 1 .28 1.47 3.51 3.51 0 0 1-1.35-.01 2.25 2.25 0 0 0 4.46-.43V12A3.75 3.75 0 0 1 11 8.25v1.5c-1.24 0-2.25 1-2.25 2.25v.25a2.25 2.25 0 0 0 4.46.43 3.51 3.51 0 0 1-1.35.01.75.75 0 0 1 .28-1.47 2 2 0 0 0 .73-3.93.75.75 0 0 1 .27-1.48l.32.07a1.5 1.5 0 0 0-.83-2.33c-.04.15-.1.29-.17.42l-.08.16-.04.06a.75.75 0 0 1-1.3-.75l.04-.07.07-.14A1.25 1.25 0 0 0 10 1.5Z" fill="currentColor"/>');function eo(){let e=(0,$.useId)(),t=(0,$.useRef)(Date.now());return(0,q.jsx)(ea,{isActive:!0,isLast:!0,isFirst:!0,isLastMessage:!1,messageId:"thinking-v1-mock-".concat(e),type:"task-thinking-v1",parts:[],createdAt:t.current,hideTimeSpent:!0,finishedAt:null,lastPartSentAt:null,id:"thinking-v1-mock-".concat(e)})}function ea(e){let{...t}=e,n=(0,Z.useRichAssistantParts)({"thinking-end":e=>(0,q.jsx)(er,{children:e.thought})},t),r=(0,$.useMemo)(()=>{var e;return null==(e=t.parts.find(e=>"thinking-end"===e.type))?void 0:e.duration},[t]),i=(0,$.useMemo)(()=>{if(!r)return"for a moment";let e=Math.round(r);if(e<60)return"for ".concat(e,"s");{let t=Math.floor(e/60),n=e%60;return n>0?"for ".concat(t,"m ").concat(n,"s"):"for ".concat(t,"m")}},[r]);return(0,q.jsx)(Y.RichTask,{...t,Icon:ei,hideTimeSpent:!0,renderedParts:n,children:t.isActive?"Thinking":"Thought ".concat(i)})}var es=t,el=e.i(204554),ec=M,eu=n;function ed(e){let t=(0,eu.useMemo)(()=>e.parts.filter(e=>"updated-todo-list"===e.type).every(e=>e.updatedList.every(e=>"todo"===e.status||"in-progress"===e.status)&&!e.updatedList.some(e=>"done"===e.status))?el.ListUnordered:ep,[e]);return(0,es.jsx)(ec.RichTask,{...e,Icon:t,renderedParts:null,hideTimeSpent:!0,children:(0,es.jsx)(ec.TaskName,{...e,textActive:"Managing Todos",textComplete:"Managed Todos"})})}let ep=(0,K.withNewIcon)('\n<path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5ZM12.0605 5.75L7.03027 10.7803C6.73738 11.0732 6.26262 11.0732 5.96973 10.7803L3.93945 8.75L5 7.68945L6.5 9.18945L11 4.68945L12.0605 5.75Z" fill="currentColor"/>');(0,K.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 2.79933C9.19835 2.53997 9.5 2.05521 9.5 1.5C9.5 0.671573 8.82843 0 8 0C7.17157 0 6.5 0.671573 6.5 1.5C6.5 2.05521 6.80165 2.53997 7.25 2.79933V5H7C4.027 5 1.55904 7.16229 1.08296 10H0V13H1V14.5V16H2.5H13.5H15V14.5V13H16V10H14.917C14.441 7.16229 11.973 5 9 5H8.75V2.79933ZM7 6.5C4.51472 6.5 2.5 8.51472 2.5 11V14.5H13.5V11C13.5 8.51472 11.4853 6.5 9 6.5H7ZM7.25 11.25C7.25 12.2165 6.4665 13 5.5 13C4.5335 13 3.75 12.2165 3.75 11.25C3.75 10.2835 4.5335 9.5 5.5 9.5C6.4665 9.5 7.25 10.2835 7.25 11.25ZM10.5 13C11.4665 13 12.25 12.2165 12.25 11.25C12.25 10.2835 11.4665 9.5 10.5 9.5C9.5335 9.5 8.75 10.2835 8.75 11.25C8.75 12.2165 9.5335 13 10.5 13Z" fill="currentColor" />');var eh=t,ef=e.i(397036),em=M,eg=Z,ev=e.i(529693);function ex(e){let t=e=>{let{invocations:t}=e;return(0,eh.jsxs)(em.AgentNote,{variant:"info",title:"Output Stopped",children:["The maximum number of calls for the message has been reached (",t,")."]})},n=(0,eg.useRichAssistantParts)({"agent-timeout":()=>(0,eh.jsx)(em.AgentNote,{variant:"info",title:"Agent Timeout",children:"The Agent timed out. Type a new prompt to continue."}),"out-of-credits":()=>(0,eh.jsx)(em.AgentNote,{variant:"info",title:"Out of Credits",children:"The Agent stopped because you are out of credits. Please add more credits to continue."}),"orchestrator-invocations-exhausted":t,"subagent-invocations-exhausted":t,"orchestrator-error":()=>(0,eh.jsx)(em.AgentNote,{variant:"info",title:"Task stopped",children:"The task was stopped because the agent encountered an unrecoverable error."}),"manually-stopped-on-client":()=>null},e,!0);return(0,eh.jsx)(ev.motion.div,{className:"flex flex-col gap-2",...(0,ef.motionReplyAnimationIf)(e.isActive),children:null==n?void 0:n.map(e=>e)})}var ey=t,eb=e.i(129818),ew=M,ej=Z,eC=e.i(266007);function ek(e){let t=(0,ej.useRichAssistantParts)({"grepping-file":()=>null,"starting-search-in-file":e=>(0,ey.jsxs)(ey.Fragment,{children:["Searching ",'"'.concat((0,eC.cleanAgentFilePath)(e.query),'"')]}),"reading-file":e=>(0,ey.jsxs)(ey.Fragment,{children:["Read ",(0,ey.jsx)(ew.File,{...e,shorten:!0})]}),"grep-results":e=>e.numMatches?"Found ".concat(e.numMatches," match").concat(e.numMatches>1?"es":""):"Searching file","selected-chunks":e=>(0,ey.jsx)(ew.FileList,{label:"Reading chunk".concat(e.chunks.length>1?"s":""),files:e.chunks})},e);return(0,ey.jsx)(ew.RichTask,{...e,Icon:eb.MagnifyingGlassSmall,renderedParts:t,children:(0,ey.jsx)(ew.TaskName,{...e,textActive:"Searching file",textComplete:"Searched file"})})}var eS=_,eN=F,eE=B,eD=V,eI=z,eA=H,eT=U,eM=G,eL=W,eP=O;function eR(e){let{isFirst:t,isLast:n,part:r,messageId:i,isConsecutiveAssistantPart:o,isLastMessage:a}=e,s=eY()&&n;(0,L.useMaybeUpdateTodoList)(r,i),(0,P.useMaybeUpdateLoader)(r,s);let l=(0,R.useMemo)(()=>{if(!r)return(0,T.jsx)("div",{children:"Error parsing part"});let e={isActive:s,isFirst:t,isLast:n,messageId:i,isLastMessage:a};switch(r.type){case"task-start-v1":return null;case"task-search-web-v1":return(0,T.jsx)(eL.SearchWebV1,{...r,...e});case"task-fetch-from-web-v1":return(0,T.jsx)(eE.FetchFromWebV1,{...r,...e});case"task-search-repo-v1":return(0,T.jsx)(eM.SearchRepoV1,{...r,...e});case"task-thinking-v1":return(0,T.jsx)(ea,{...r,...e});case"task-diagnostics-v1":return(0,T.jsx)(eN.DiagnosticsV1,{...r,...e});case"task-run-shell-command-v1":return(0,T.jsx)(eT.RunShellCommandV1,{...r,...e});case"task-manage-todos-v1":return(0,T.jsx)(ed,{...r,...e});case"task-read-files-v1":return(0,T.jsx)(eA.ReadFilesV1,{...r,...e});case"task-stopped-v1":return(0,T.jsx)(ex,{...r,...e});case"task-inspect-site-v1":return(0,T.jsx)(eI.InspectSiteV1,{...r,...e});case"task-generate-design-inspiration-v1":return(0,T.jsx)(eD.GenerateDesignInspirationV1,{...r,...e});case"task-get-or-request-integration-v1":return(0,T.jsx)(eS.GetOrRequestIntegrationV1,{...r,...e});case"task-coding-v1":return(0,T.jsx)(eP.CodingV1,{...r,...e});case"task-read-file-v1":return(0,T.jsx)(ek,{...r,...e});case"task-repaired-parser-content-v1":return(0,T.jsx)("div",{children:"Error parsing part"});default:return r}},[s,t,n,a,i,r]);return(0,T.jsxs)(T.Fragment,{children:[o&&l?(0,T.jsx)(M.ConsecutiveTimelineLine,{animate:s}):null,l]})}var e_=eC,eO=M,eF=e.i(403055),eB=e.i(865408),eV=e.i(242759);let ez=(0,o.default)(()=>e.A(752282).then(e=>e.InlineMath)),eH=(0,o.default)(()=>e.A(752282).then(e=>e.BlockMath)),eU=(0,o.default)(()=>e.A(524582).then(e=>e.Mermaid),{loadableGenerated:{modules:[537684]}}),eG=(0,o.default)(()=>e.A(688269).then(e=>e.Table),{loadableGenerated:{modules:[20068]}}),eW="\0",eq=String.fromCharCode(65535);function eZ(e,t){if(void 0===e)return e;let n=e+eW;for(;;)if(t>=65535)n+=eq,t-=65535;else{n+=String.fromCharCode(t+1);break}return n}let eK=n.default.memo(eX),e$=n.default.createContext(!1),eY=()=>n.default.use(e$),eJ=n.default.createContext(!1),eQ=()=>n.default.use(eJ);function eX(e){let n,{messageId:r,role:i,streaming:o,rows:a,isLastMessage:s=!1,v3:l=!1}=e,{authorId:u,from:d}=(0,f.useChatMetadata)(),{user:m}=(0,p.useUser)(),g=!1,v=[],x=a.map((e,n)=>{let[a,c]=e,u=eZ("",n);return 0===a?(g=!0,(0,t.jsx)(eJ.Provider,{value:l,children:(0,t.jsx)(e$.Provider,{value:o||!1,children:(0,t.jsx)(e0,{data:c,id:u,messageId:r,chatOrigin:d,isLastMessage:s})})},u)):(1===a&&"assistant"===i&&c.context&&Array.isArray(c.context)&&c.context.length>0&&(v=c.context),null)});if(!g)if(0===v.length)return null;else n=(0,t.jsx)(h.CitationsCarousel,{urls:v.map(e=>{let{url:t}=e;return t})});let y=(0,t.jsxs)(t.Fragment,{children:[n,x]});return"assistant"===i?(0,t.jsx)(c.SegmenterProvider,{messageId:r,readonly:!!u&&(null==m?void 0:m.id)!==u,streaming:o,children:y}):y}function e0(e){let{data:n,id:r,messageId:i,isLastMessage:o}=e;return n.map((e,a)=>{var s,l;let c=eZ(r,a),u=!1;return u=(0,e_.getIsConsecutiveAssistantPart)(e,a,n),(0,t.jsx)(e1,{data:e,id:e[0]===A.AssistantMessagePartTagName?null==(s=e[1])?void 0:s.id:c,isFirst:0===a,isLast:a===n.length-1,index:a,messageId:i,isLastMessage:o,isConsecutiveAssistantPart:u},e[0]===A.AssistantMessagePartTagName?null==(l=e[1])?void 0:l.id:c)})}function e1(e){let{data:o,id:p,index:h,messageId:f,isFirst:b,isLast:T,isLastMessage:M,isConsecutiveAssistantPart:L}=e,{age:P}=(0,eV.useFlags)(),R=(0,c.useRegister)({id:p,content:"string"==typeof o?o:void 0,type:"string"==typeof o?"text":o[0],props:"string"==typeof o?{}:o[1]}),_="string"!=typeof o&&"Codeblock"===o[0]&&o[1].blockId?o[1].source:void 0;if("string"==typeof o)return o;let[O,F,...B]=o;if(void 0===O)return null;let V=(0,t.jsx)(e0,{data:B,id:p,messageId:f,isLastMessage:M});switch(O){case"text":return(0,t.jsx)("span",{...R.elementProps,children:V});case"span":case"p":case"blockquote":case"strong":case"em":case"del":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"ul":case"ol":case"li":let z=O;return(0,t.jsx)(z,{...R.elementProps,...F,children:V});case"code":if(1===B.length&&"string"==typeof B[0]&&(0,x.isColorCode)(B[0]))return(0,t.jsx)(x.ColorCode,{...R.elementProps,value:B[0]});return(0,t.jsx)("code",{...R.elementProps,className:"rounded-[0.375rem] border bg-v0-gray-100 px-1 py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",...F,children:V});case"a":let H=F.href;if("string"==typeof H&&H.startsWith("/"))return(0,t.jsx)("span",{...R.elementProps,children:V});if("string"==typeof H&&H.startsWith("#"))return(0,t.jsx)("a",{...R.elementProps,className:"font-normal text-v0-blue-700 no-underline decoration-from-font underline-offset-2 transition-colors hover:text-v0-blue-700",href:H,children:V});return(0,t.jsxs)("a",{...R.elementProps,className:"font-normal text-v0-blue-700 no-underline decoration-from-font underline-offset-2 transition-colors hover:text-v0-blue-700",href:F.href||"#",rel:"noopener noreferrer",target:"_blank",children:[V,(0,t.jsx)(u.External,{className:"mb-0.5 ml-0.5 inline h-3 w-3"})]});case"img":{let{style:e,...n}={...R.elementProps,...F};return(0,t.jsx)("img",{...n,className:"rounded-xl"})}case"hr":return(0,t.jsx)("hr",{...R.elementProps});case"table":return(0,t.jsx)("table",{...R.elementProps,className:"table-fixed",children:V});case"tr":return(0,t.jsx)("tr",{...R.elementProps,children:V});case"td":return(0,t.jsx)("td",{...R.elementProps,children:V});case"th":return(0,t.jsx)("th",{...R.elementProps,children:V});case"thead":return(0,t.jsx)("thead",{...R.elementProps,children:V});case"tbody":return(0,t.jsx)("tbody",{...R.elementProps,children:V});case"Codeblock":let U=_||B.join("");if(F.blockId&&F.meta.type&&!C.INLINE_BLOCK_TYPES.includes(F.meta.type))return(0,t.jsxs)("div",{className:"flex flex-col",children:[L?(0,t.jsx)(eO.TimelineLine,{}):null,(0,t.jsx)("div",{className:(0,eF.cn)("block-preview flex flex-col gap-3",L?"not-last:mb-4":""),...R.elementProps,children:(0,t.jsx)(l.RenderBlockPreview,{blockId:F.blockId,closed:F.closed,language:F.lang,remoteInfo:F.remoteInfo,messageId:f,meta:F.meta,resultId:F.resultId,source:U,type:F.meta.type,latestDeploymentInfo:F.latestDeploymentInfo},F.blockId)})]});if(!U)return(0,t.jsx)("div",{...R.elementProps});switch(F.lang){case"mermaid":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(n.Suspense,{fallback:null,children:(0,t.jsx)(eU,{source:U,title:F.meta.title})})});case"math":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(eH,{math:U})});case"csv":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(a.LoadingCard,{title:"Loading table..."}),children:(0,t.jsx)(eG,{source:U})})});case"toolcall":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(g.Toolcall,{source:U})});default:return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(s.SyntaxHighlighter,{language:F.lang,blockId:F.blockId,closed:F.closed,sqlExecutionState:F.meta.sqlExecutionState,transaction:F.meta.transaction,type:F.meta.type,fileName:F.meta.name,children:U})})}case"InlineMath":return(0,t.jsx)("span",{...R.elementProps,children:(0,t.jsx)(ez,{math:B.join("")})});case"Math":return(0,t.jsx)("span",{...R.elementProps,children:(0,t.jsx)(eH,{math:B.join("")})});case"LinearProcessFlow":case"Steps":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(i.Steps,{children:V})});case"Thinking":case"DevThinking":case"V0Info":return(0,t.jsx)(e2,{closed:F.closed,chars:F.chars,elementProps:R.elementProps,children:V});case"Solution":case"footnoteDefinition":return null;case"Quiz":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(r.Quiz,{...F,children:V})});case"V0LoadingImage":return T?(0,t.jsx)(E.LoadingImage,{}):null;case"Spinner":let G=null,W=F.message||"Generating...";return W.toLowerCase().includes("search")||W.toLowerCase().startsWith("added")?G=null:h>0&&(G=(0,t.jsx)(m.Spinner,{})),(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(e5,{isLast:T,icon:G,message:W})});case"MathInstructions":case"MathBlock":return(0,t.jsx)("div",{...R.elementProps,children:V});case"footnoteReference":return(0,t.jsx)("span",{...R.elementProps,children:(0,t.jsx)(d.Reference,{idPrefix:"cite-".concat(f,"-"),label:F.label})});case"AddEnvironmentVariables":case"AddEnvironmentVariable":return(0,t.jsx)(v.default,{names:F.names,messageId:f});case"ToolExecutionCardLoading":return(0,t.jsx)(I.ToolExecutionCard,{...F,status:"loading",isLast:T});case"ToolExecution":case"ToolExecutionCard":return(0,t.jsx)(I.ToolExecutionCard,{status:"success",...F});case A.AssistantMessagePartTagName:return(0,t.jsx)(eR,{...F,closed:F.closed,isFirst:b,isLastMessage:M,isLast:T,messageId:f,isConsecutiveAssistantPart:L});case"AddIntegration":return(0,t.jsx)(w.default,{category:F.category,namesProp:F.names,messageId:f,starter:F.starter});case"StepsCard":let q={steps:F.steps,messageId:f,isLastMessage:M};if(P)return(0,t.jsx)(eB.RichAssistantStepsCard,{steps:F.steps,messageId:f,preventRenderSkipOrContinue:!0});return(0,t.jsx)(N.StepsCard,{...q});case"OpenExternalDashboard":return(0,t.jsx)(k.default,{integration:F.integration});case"SuggestedNextSteps":return M?(0,t.jsx)(j.SuggestedNextSteps,{options:F.options}):null;case"LoadingLighthouse":return T?(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(y.LighthouseReportLoading,{})}):null;case"Lighthouse":case"LighthouseReport":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(y.default,{...F})});case"TraceAnalysis":case"TraceAnalysisReport":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(D.TraceAnalysisReport,{...F})});case"TraceAnalysisStatus":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(D.TraceAnalysisStatus,{...F,isLast:T})});case"TraceAnalysisError":return(0,t.jsx)("div",{...R.elementProps,children:(0,t.jsx)(D.TraceAnalysisError,{...F})});case"br":return(0,t.jsx)("br",{...R.elementProps});case"Action":return(0,t.jsx)(S.SuggestedAction,{name:F.name,elementProps:R.elementProps,description:F.description,messageId:f});case"Actions":if(!M)return null;return(0,t.jsx)(S.SuggestedActions,{elementProps:R.elementProps,isLast:T,messageId:f,children:V});default:return(0,t.jsxs)("div",{...R.elementProps,children:[(0,t.jsx)("h5",{children:"<".concat(O,">")}),V,(0,t.jsx)("h5",{children:"</".concat(O,">")})]})}}function e2(e){let{closed:n,chars:r,elementProps:i,children:o=null}=e,a=eY();return(0,t.jsx)(b.ThinkingTime,{isLoading:void 0===n&&!!a||!n,seconds:r?r/170:void 0,children:(0,t.jsx)("div",{...i,className:"[&>p:first-child]:mt-0 [&>p:last-child]:mb-0",children:o})})}function e5(e){let{isLast:n,icon:r,message:i}=e,o=eY();return n&&o?(0,t.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[r,(0,t.jsx)("span",{className:"animate-pulse",children:i})]}):null}function e4(e){try{let t=null==e?void 0:e[0][1],n=t[t.length-1],r=n[0],i=n[1].part;if(r!==A.AssistantMessagePartTagName||"task-stopped-v1"!==i.type)return!1;return 1===i.parts.length&&"out-of-credits"===i.parts[0].type}catch(e){return!1}}function e3(e){try{let t=null==e?void 0:e[0][1],n=t[t.length-1],r=n[0],i=n[1].part;if(r!==A.AssistantMessagePartTagName||"task-diagnostics-v1"!==i.type)return!1;return 1===i.parts.length&&"fetching-diagnostics"===i.parts[0].type}catch(e){return!1}}function e9(e,t,n){let r=[];if(!e||"message-binary-format"!==e.type||!Array.isArray(e.value)||!e.value.length)return r;function i(e,i){if(e!==A.AssistantMessagePartTagName)return;let o=i.part;if("task-coding-v1"!==o.type)return;let a=o.parts[0];"code-project"===a.type&&(a.isVersioned||(null==n?void 0:n.includeNonVersionedBlocks))&&r.push({id:a.blockId,meta:a.meta,remoteInfo:void 0,type:a.type,messageId:t,source:a.source,language:a.lang,lastEditedAt:a.lastEditedAt,lastDeployedAt:a.lastDeployedAt,closed:!!a.closed,createdAt:void 0,latestDeploymentInfo:void 0,forkedFromBlockId:void 0,needsBlockSource:a.needsBlockSource,sourceVersionKey:a.sourceVersionKey})}function o(e,n,i){if("Codeblock"!==e||!n.meta.type)return null;let o=i.join(""),a=n.blockId;if(!a)return null;r.push({id:a,meta:n.meta,type:n.meta.type,messageId:t,source:n.source||o,language:n.lang,resultId:n.resultId,remoteInfo:n.remoteInfo,lastEditedAt:n.lastEditedAt,lastDeployedAt:n.lastDeployedAt,closed:void 0!==n.closed&&!!n.closed,createdAt:n.createdAt,latestDeploymentInfo:void 0,forkedFromBlockId:void 0,needsBlockSource:n.needsBlockSource||!1,sourceVersionKey:n.sourceVersionKey})}if(0===e.value[0][0])for(let t of e.value[0][1])e8(t,e=>{let[t,n,...r]=e;i(t,n),o(t,n,r)});return r}function e7(e){return e&&0===e[0]?"markdown":e&&1===e[0]?"metadata":void 0}function e6(e){var t;let n,r,i,o,a,s,l,c=[],u="",d=null==(t=e.find(e=>"metadata"===e7(e)))?void 0:t[1];return d&&("context"in d&&void 0!==d.context&&Array.isArray(d.context)&&(c=d.context),"title"in d&&"string"==typeof d.title&&(u=d.title),"finishReason"in d&&(n=d.finishReason),"usage"in d&&(r=d.usage),"loadingText"in d&&"string"==typeof d.loadingText&&(l=d.loadingText),"relevantFiles"in d&&Array.isArray(d.relevantFiles)&&(o=d.relevantFiles),"grepQueries"in d&&Array.isArray(d.grepQueries)&&(a=d.grepQueries),"notifications"in d&&Array.isArray(d.notifications)&&(s=d.notifications),"modelId"in d&&(i=d.modelId)),{docsContext:c,loadingText:l,title:u,modelId:i,finishReason:n,relevantFiles:o,grepQueries:a,notifications:s,usage:r}}function e8(e,t){if(Array.isArray(e)){let[n,r,...i]=e;"string"==typeof n&&t(e),i.map(e=>e8(e,t))}}},449381,e=>{"use strict";e.s(["assertBlockId",()=>l,"useActiveBlockState",()=>c,"useActiveBlockView",()=>u,"useCloseActiveBlock",()=>h,"useSetActiveBlockState",()=>d,"useSetActiveBlockView",()=>p]);var t=e.i(818273),n=e.i(767373),r=e.i(92479),i=e.i(743124),o=e.i(346970),a=e.i(391795),s=e.i(301331);function l(e){return null!=e?e:"_no_block_"}function c(e){let{chatId:t}=(0,r.useChatId)(),{data:n}=(0,o.default)(["active-block",null!=e?e:t]);return n}function u(){let{chatId:e}=(0,r.useChatId)(),{data:t}=(0,o.default)(["block-view",e]);return!!t}function d(){let{chatId:e}=(0,r.useChatId)(),{mutate:t}=(0,a.useSWRConfig)(),{ensureBlockSource:n}=(0,s.useBlockSource)();return(0,i.useCallback)(r=>{(null==r?void 0:r.id)&&n(r.id),t(["active-block",e],null!=r?r:null,!1)},[e,t,n])}function p(){let{chatId:e}=(0,r.useChatId)(),{mutate:t}=(0,a.useSWRConfig)();return(0,i.useCallback)((n,r)=>{n?t(["active-block",e],r,!1):t(["active-block",e],null,!1),t(["block-view",e],n,!1)},[e,t])}function h(){let{messages:e}=(0,r.useChatMessages)(),o=c(),a=p(),{ensureBlockSource:l}=(0,s.useBlockSource)();return(0,i.useCallback)((r,i)=>{if(!o)return;let s=()=>{let n;if(!i)return void a(!1);let r=-1;for(let o of e.map(e=>{var n;return(0,t.getBlocksFromState)(null!=(n=e.content)?n:"",e.id)}).flat()){if(!o)continue;let e=i.findIndex(e=>e===o.messageId);e>-1&&e>=r&&(r=e,n=o)}if(!n)return void a(!1);l(n.id),a(!0,n)};return r?r===o.messageId?void s():void(new Set((0,n.getChildMessageIds)(e.map(e=>({...e,messageId:e.id})),r)).has(o.messageId)&&s()):void a(!1)},[o,e,a])}}]);